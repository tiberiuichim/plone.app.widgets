var requirejs,require,define;!function(global){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.2.0",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(match,multi,multiText,singlePrefix){return singlePrefix||""}function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){var i;if(ary)for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}function eachReverse(ary,func){var i;if(ary)for(i=ary.length-1;-1<i&&(!ary[i]||!func(ary[i],i,ary));i-=1);}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(!deepStringMixin||"object"!=typeof value||!value||isArray(value)||isFunction(value)||value instanceof RegExp?target[prop]=value:(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)))}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),(context=getOwn(contexts,contextName))||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick="undefined"!=typeof setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser)return(node=req.createNode(config,moduleName,url)).setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,config.onNodeCreated&&config.onNodeCreated(node,config,moduleName,url),currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{setTimeout(function(){},0),importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head||(head=script.parentNode),dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript())&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")]),context?(context.defQueue.push([name,deps,callback]),context.defQueueMap[name]=!0):globalDefQueue.push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;function normalize(name,baseName,applyMap){var mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"];if(name&&(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),function(ary){var i,part;for(i=0;i<ary.length;i++)if("."===(part=ary[i]))ary.splice(i,1),i-=1;else if(".."===part){if(0===i||1===i&&".."===ary[2]||".."===ary[i-1])continue;0<i&&(ary.splice(i-1,2),i-=2)}}(name),name=name.join("/")),applyMap&&map&&(baseParts||starMap)){outerLoop:for(i=(nameParts=name.split("/")).length;0<i;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;0<j;j-=1)if((mapValue=getOwn(map,baseParts.slice(0,j).join("/")))&&(mapValue=getOwn(mapValue,nameSegment))){foundMap=mapValue,foundI=i;break outerLoop}!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return getOwn(config.pkgs,name)||name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName)return scriptNode.parentNode.removeChild(scriptNode),!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&1<pathConfig.length)return pathConfig.shift(),context.require.undef(id),context.makeRequire(null,{skipMap:!0})([id]),!0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return-1<index&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),prefix=(nameParts=splitPrefix(name))[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):-1===name.indexOf("!")?normalize(name,parentName,applyMap):name:(prefix=(nameParts=splitPrefix(normalizedName=normalize(name,parentName,applyMap)))[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!(suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1)),url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap)).error&&"error"===name?fn(mod.error):mod.on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(each(globalDefQueue,function(queueItem){var id=queueItem[0];"string"==typeof id&&(context.defQueueMap[id]=!0),defQueue.push(queueItem)}),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function checkLoaded(){var err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?stillLoading=usingPathFallback=!0:(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return(err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads)).contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){!function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}context.defQueueMap={}}return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine)return mod.exports?defined[mod.map.id]=mod.exports:mod.exports=defined[mod.map.id]={}},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}},(Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;if(!this.shim)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&void 0===exports&&((cjsModule=this.module)?exports=cjsModule.exports:this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;if(this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad)){var resLoadMaps=[];each(this.depMaps,function(depMap){resLoadMaps.push(depMap.normalizedMap||depMap)}),req.onResourceLoad(context,this.map,resLoadMaps)}cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(context.defQueueMap,id)||this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),on(normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),"defined",bind(this,function(value){this.map.normalizedMap=normalizedMap,this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),void((normalizedMod=getOwn(registry,normalizedMap.id))&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):bundleId?(this.map.url=context.nameToUrl(bundleId),void this.load()):((load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})})).error=bind(this,function(err){this.inited=!0,(this.error=err).requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){(enabledRegistry[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.undefed||(this.defineDep(i,depExports),this.check())})),this.errback?on(depMap,"error",bind(this,this.errback)):this.events.error&&on(depMap,"error",bind(this,function(err){this.emit("error",err)}))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},(context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,defQueueMap:{},Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){if(cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/"),"string"==typeof cfg.urlArgs){var urlArgs=cfg.urlArgs;cfg.urlArgs=function(id,url){return(-1===url.indexOf("?")?"?":"&")+urlArgs}}var shim=config.shim,objs={paths:!0,bundles:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?(config[prop]||(config[prop]={}),mixin(config[prop],value,!0,!0)):config[prop]=value}),cfg.bundles&&eachProp(cfg.bundles,function(value,prop){each(value,function(v){v!==prop&&(bundlesMap[v]=prop)})}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&each(cfg.packages,function(pkgObj){var name;name=(pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj).name,pkgObj.location&&(config.paths[name]=pkgObj.location),config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id,null,!0))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){return function(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(id=makeModuleMap(deps,relMap,!1,!0).id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),(requireMod=getModule(makeModuleMap(null,relMap))).skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0];return-1!==index&&(!("."===segment||".."===segment)||1<index)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);mod.undefed=!0,removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],eachReverse(defQueue,function(args,i){args[0]===id&&defQueue.splice(i,1)}),delete context.defQueueMap[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){getOwn(registry,depMap.id)&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(context.defQueueMap={},mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain&&(moduleName=pkgMain),bundleId=getOwn(bundlesMap,moduleName))return context.nameToUrl(bundleId,ext,skipExt);if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,i=(syms=moduleName.split("/")).length;0<i;i-=1)if(parentPath=getOwn(paths,syms.slice(0,i).join("/"))){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}url=syms.join("/"),url=("/"===(url+=ext||(/^data\:|^blob\:|\?/.test(url)||skipExt?"":".js")).charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs&&!/^blob\:/.test(url)?url+config.urlArgs(moduleName,url):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){var parents=[];return eachProp(registry,function(value,key){0!==key.indexOf("_@r")&&each(value.depMaps,function(depMap){if(depMap.id===data.id)return parents.push(key),!0})}),onError(makeError("scripterror",'Script error for "'+data.id+(parents.length?'", needed by: '+parents.join(", "):'"'),evt,[data.id]))}}}).require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(script){if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript}}(this),define("node_modules/requirejs/require.js",function(){}),function(){var root=this,previousUnderscore=root._,ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create,Ctor=function(){},_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}},cb=function(value,context,argCount){return null==value?_.identity:_.isFunction(value)?optimizeCb(value,context,argCount):_.isObject(value)?_.matcher(value):_.property(value)};_.iteratee=function(value,context){return cb(value,context,1/0)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||null==obj)return obj;for(var index=1;index<length;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;i<l;i++){var key=keys[i];undefinedOnly&&void 0!==obj[key]||(obj[key]=source[key])}return obj}},baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result},property=function(key){return function(obj){return null==obj?void 0:obj[key]}},MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(collection){var length=getLength(collection);return"number"==typeof length&&0<=length&&length<=MAX_ARRAY_INDEX};function createReduce(dir){return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0<dir?0:length-1;return arguments.length<3&&(memo=obj[keys?keys[index]:index],index+=dir),function(obj,iteratee,memo,keys,index,length){for(;0<=index&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}(obj,iteratee,memo,keys,index,length)}}_.each=_.forEach=function(obj,iteratee,context){var i,length;if(iteratee=optimizeCb(iteratee,context),isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj);else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++)iteratee(obj[keys[i]],keys[i],obj)}return obj},_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length),index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results},_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(obj,predicate,context){var key;if(void 0!==(key=isArrayLike(obj)?_.findIndex(obj,predicate,context):_.findKey(obj,predicate,context))&&-1!==key)return obj[key]},_.filter=_.select=function(obj,predicate,context){var results=[];return predicate=cb(predicate,context),_.each(obj,function(value,index,list){predicate(value,index,list)&&results.push(value)}),results},_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)},_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return!1}return!0},_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return!0}return!1},_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){return isArrayLike(obj)||(obj=_.values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),0<=_.indexOf(obj,item,fromIndex)},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return null==func?func:func.apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))},_.max=function(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)value=obj[i],result<value&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){computed=iteratee(value,index,list),(lastComputed<computed||computed===-1/0&&result===-1/0)&&(result=value,lastComputed=computed)});return result},_.min=function(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)(value=obj[i])<result&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){((computed=iteratee(value,index,list))<lastComputed||computed===1/0&&result===1/0)&&(result=value,lastComputed=computed)});return result},_.shuffle=function(obj){for(var rand,set=isArrayLike(obj)?obj:_.values(obj),length=set.length,shuffled=Array(length),index=0;index<length;index++)(rand=_.random(0,index))!==index&&(shuffled[index]=shuffled[rand]),shuffled[rand]=set[index];return shuffled},_.sample=function(obj,n,guard){return null==n||guard?(isArrayLike(obj)||(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))},_.sortBy=function(obj,iteratee,context){return iteratee=cb(iteratee,context),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(b<a||void 0===a)return 1;if(a<b||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};return iteratee=cb(iteratee,context),_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)}),result}};_.groupBy=group(function(result,value,key){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,value,key){result[key]=value}),_.countBy=group(function(result,value,key){_.has(result,key)?result[key]++:result[key]=1}),_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):isArrayLike(obj)?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:isArrayLike(obj)?obj.length:_.keys(obj).length},_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];return _.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)}),[pass,fail]},_.first=_.head=_.take=function(array,n,guard){if(null!=array)return null==n||guard?array[0]:_.initial(array,array.length-n)},_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))},_.last=function(array,n,guard){if(null!=array)return null==n||guard?array[array.length-1]:_.rest(array,Math.max(0,array.length-n))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){for(var output=[],idx=0,i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){shallow||(value=flatten(value,shallow,strict));var j=0,len=value.length;for(output.length+=len;j<len;)output[idx++]=value[j++]}else strict||(output[idx++]=value)}return output};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);for(var length=getLength(array),index=0<dir?0:length-1;0<=index&&index<length;index+=dir)if(predicate(array[index],index,array))return index;return-1}}function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if("number"==typeof idx)0<dir?i=0<=idx?idx:Math.max(idx+length,i):length=0<=idx?Math.min(idx+1,length):idx+length+1;else if(sortedIndex&&idx&&length)return array[idx=sortedIndex(array,item)]===item?idx:-1;if(item!=item)return 0<=(idx=predicateFind(slice.call(array,i,length),_.isNaN))?idx+i:-1;for(idx=0<dir?i:length-1;0<=idx&&idx<length;idx+=dir)if(array[idx]===item)return idx;return-1}}_.flatten=function(array,shallow){return flatten(array,shallow,!1)},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iteratee,context){_.isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=cb(iteratee,context));for(var result=[],seen=[],i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;isSorted?(i&&seen===computed||result.push(value),seen=computed):iteratee?_.contains(seen,computed)||(seen.push(computed),result.push(value)):_.contains(result,value)||result.push(value)}return result},_.union=function(){return _.uniq(flatten(arguments,!0,!0))},_.intersection=function(array){for(var result=[],argsLength=arguments.length,i=0,length=getLength(array);i<length;i++){var item=array[i];if(!_.contains(result,item)){for(var j=1;j<argsLength&&_.contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result},_.difference=function(array){var rest=flatten(arguments,!0,!0,1);return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(array){for(var length=array&&_.max(array,getLength).length||0,result=Array(length),index=0;index<length;index++)result[index]=_.pluck(array,index);return result},_.object=function(list,values){for(var result={},i=0,length=getLength(list);i<length;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.findIndex=createPredicateIndexFinder(1),_.findLastIndex=createPredicateIndexFinder(-1),_.sortedIndex=function(array,obj,iteratee,context){for(var value=(iteratee=cb(iteratee,context,1))(obj),low=0,high=getLength(array);low<high;){var mid=Math.floor((low+high)/2);iteratee(array[mid])<value?low=mid+1:high=mid}return low},_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFinder(-1,_.findLastIndex),_.range=function(start,stop,step){null==stop&&(stop=start||0,start=0),step=step||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;idx<length;idx++,start+=step)range[idx]=start;return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return _.isObject(result)?result:self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2),bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound},_.partial=function(func){var boundArgs=slice.call(arguments,1),bound=function(){for(var position=0,length=boundArgs.length,args=Array(length),i=0;i<length;i++)args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound},_.bindAll=function(obj){var i,key,length=arguments.length;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++)obj[key=arguments[i]]=_.bind(obj[key],obj);return obj},_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache,address=""+(hasher?hasher.apply(this,arguments):key);return _.has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=_.partial(_.delay,_,1),_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:_.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)};return function(){var now=_.now();previous||!1!==options.leading||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0||wait<remaining?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;last<wait&&0<=last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),timeout||(context=args=null)))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}},_.compose=function(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}},_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}},_.before=function(times,func){var memo;return function(){return 0<--times&&(memo=func.apply(this,arguments)),times<=1&&(func=null),memo}},_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=_.isFunction(constructor)&&constructor.prototype||ObjProto,prop="constructor";for(_.has(obj,prop)&&!_.contains(keys,prop)&&keys.push(prop);nonEnumIdx--;)(prop=nonEnumerableProps[nonEnumIdx])in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)&&keys.push(prop)}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=Array(length),i=0;i<length;i++)values[i]=obj[keys[i]];return values},_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var currentKey,keys=_.keys(obj),length=keys.length,results={},index=0;index<length;index++)results[currentKey=keys[index]]=iteratee(obj[currentKey],currentKey,obj);return results},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=Array(length),i=0;i<length;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;i<length;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);for(var key,keys=_.keys(obj),i=0,length=keys.length;i<length;i++)if(predicate(obj[key=keys[i]],key,obj))return key},_.pick=function(object,oiteratee,context){var iteratee,keys,result={},obj=object;if(null==obj)return result;_.isFunction(oiteratee)?(keys=_.allKeys(obj),iteratee=optimizeCb(oiteratee,context)):(keys=flatten(arguments,!1,!1,1),iteratee=function(value,key,obj){return key in obj},obj=Object(obj));for(var i=0,length=keys.length;i<length;i++){var key=keys[i],value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}return result},_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee))iteratee=_.negate(iteratee);else{var keys=_.map(flatten(arguments,!1,!1,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)},_.defaults=createAssigner(_.allKeys,!0),_.create=function(prototype,props){var result=baseCreate(prototype);return props&&_.extendOwn(result,props),result},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(null==object)return!length;for(var obj=Object(object),i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!==toString.call(b))return!1;switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b}var areArrays="[object Array]"===className;if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}bStack=bStack||[];for(var length=(aStack=aStack||[]).length;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if((length=a.length)!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],aStack,bStack))return!1}else{var key,keys=_.keys(a);if(length=keys.length,_.keys(b).length!==length)return!1;for(;length--;)if(key=keys[length],!_.has(b,key)||!eq(a[key],b[key],aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0};_.isEqual=function(a,b){return eq(a,b)},_.isEmpty=function(obj){return null==obj||(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))?0===obj.length:0===_.keys(obj).length)},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return _.has(obj,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(obj){return"function"==typeof obj||!1}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj},_.isBoolean=function(obj){return!0===obj||!1===obj||"[object Boolean]"===toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return null!=obj&&hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.noop=function(){},_.property=property,_.propertyOf=function(obj){return null==obj?function(){}:function(key){return obj[key]}},_.matcher=_.matches=function(attrs){return attrs=_.extendOwn({},attrs),function(obj){return _.isMatch(obj,attrs)}},_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_.invert(escapeMap),createEscaper=function(map){var escaper=function(match){return map[match]},source="(?:"+_.keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap),_.unescape=createEscaper(unescapeMap),_.result=function(object,property,fallback){var value=null==object?void 0:object[property];return void 0===value&&(value=fallback),_.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)},argument=settings.variable||"obj";return template.source="function("+argument+"){\n"+source+"}",template},_.chain=function(obj){var instance=_(obj);return instance._chain=!0,instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result(this,func.apply(_,args))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0],result(this,obj)}}),_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),function(){var root,writer;Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound});var Level={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function IEConsoleWriter(){}function ConsoleWriter(){}function Logger(name,parent){this._loggers={},this.name=name||"",this._parent=parent||null,parent||(this._enabled=!0,this._level=Level.WARN)}function setWriter(w){writer=w}IEConsoleWriter.prototype={output:function(log_name,level,messages){if(void 0!==window.console&&void 0!==console.log){log_name&&messages.unshift(log_name+":");var level_name,message=messages.join(" ");if(void 0===typeof console.info)level_name=level<=Level.DEBUG?"DEBUG":level<=Level.INFO?"INFO":level<=Level.WARN?"WARN":level<=Level.ERROR?"ERROR":"FATAL",console.log("["+level_name+"] "+message);else level<=Level.DEBUG?(message="[DEBUG] "+message,console.log(message)):level<=Level.INFO?console.info(message):level<=Level.WARN?console.warn(message):console.error(message)}}},ConsoleWriter.prototype={output:function(log_name,level,messages){log_name&&messages.unshift(log_name+":"),level<=Level.DEBUG?(messages.unshift("[DEBUG]"),console.log.apply(console,messages)):level<=Level.INFO?console.info.apply(console,messages):level<=Level.WARN?console.warn.apply(console,messages):console.error.apply(console,messages)}},Logger.prototype={getLogger:function(name){for(var path=name.split("."),root=this,route=this.name?[this.name]:[];path.length;){var entry=path.shift();route.push(entry),entry in root._loggers||(root._loggers[entry]=new Logger(route.join("."),root)),root=root._loggers[entry]}return root},_getFlag:function(flag){var context=this;for(flag="_"+flag;null!==context;){if(void 0!==context[flag])return context[flag];context=context._parent}return null},setEnabled:function(state){this._enabled=!!state},isEnabled:function(){this._getFlag("enabled")},setLevel:function(level){"number"==typeof level?this._level=level:"string"==typeof level&&(level=level.toUpperCase())in Level&&(this._level=Level[level])},getLevel:function(){return this._getFlag("level")},log:function(level,messages){!messages.length||!this._getFlag("enabled")||level<this._getFlag("level")||(messages=Array.prototype.slice.call(messages),writer.output(this.name,level,messages))},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)}},window.console&&window.console.log&&"function"==typeof window.console.log.apply?setWriter(new ConsoleWriter):setWriter(new IEConsoleWriter),root=new Logger;for(var match,logconfig=/loglevel(|-[^=]+)=([^&]+)/g;null!==(match=logconfig.exec(window.location.search));){(""===match[1]?root:root.getLogger(match[1].slice(1))).setLevel(match[2].toUpperCase())}var api={Level:Level,getLogger:root.getLogger.bind(root),setEnabled:root.setEnabled.bind(root),isEnabled:root.isEnabled.bind(root),setLevel:root.setLevel.bind(root),getLevel:root.getLevel.bind(root),debug:root.debug.bind(root),info:root.info.bind(root),warn:root.warn.bind(root),error:root.error.bind(root),fatal:root.fatal.bind(root),getWriter:function(){return writer},setWriter:setWriter};"function"==typeof define?define("logging",[],function(){return api}):window.logging=api}(),define("pat-logger",["logging"],function(logging){return logging.getLogger("patterns")}),function(factory){"function"==typeof define&&define.amd?define("jquery.browser",["jquery"],function($){return factory($)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=factory(require("jquery")):factory(window.jQuery)}(function(jQuery){"use strict";function uaMatch(ua){void 0===ua&&(ua=window.navigator.userAgent),ua=ua.toLowerCase();var match=/(edge)\/([\w.]+)/.exec(ua)||/(opr)[\/]([\w.]+)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||0<=ua.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[],platform_match=/(ipad)/.exec(ua)||/(ipod)/.exec(ua)||/(iphone)/.exec(ua)||/(kindle)/.exec(ua)||/(silk)/.exec(ua)||/(android)/.exec(ua)||/(windows phone)/.exec(ua)||/(win)/.exec(ua)||/(mac)/.exec(ua)||/(linux)/.exec(ua)||/(cros)/.exec(ua)||/(playbook)/.exec(ua)||/(bb)/.exec(ua)||/(blackberry)/.exec(ua)||[],browser={},matched={browser:match[5]||match[3]||match[1]||"",version:match[2]||match[4]||"0",versionNumber:match[4]||match[2]||"0",platform:platform_match[0]||""};if(matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version,browser.versionNumber=parseInt(matched.versionNumber,10)),matched.platform&&(browser[matched.platform]=!0),(browser.android||browser.bb||browser.blackberry||browser.ipad||browser.iphone||browser.ipod||browser.kindle||browser.playbook||browser.silk||browser["windows phone"])&&(browser.mobile=!0),(browser.cros||browser.mac||browser.linux||browser.win)&&(browser.desktop=!0),(browser.chrome||browser.opr||browser.safari)&&(browser.webkit=!0),browser.rv||browser.edge){matched.browser="msie",browser.msie=!0}if(browser.safari&&browser.blackberry){matched.browser="blackberry",browser.blackberry=!0}if(browser.safari&&browser.playbook){matched.browser="playbook",browser.playbook=!0}if(browser.bb){var bb="blackberry";browser[matched.browser=bb]=!0}if(browser.opr){matched.browser="opera",browser.opera=!0}if(browser.safari&&browser.android){matched.browser="android",browser.android=!0}if(browser.safari&&browser.kindle){matched.browser="kindle",browser.kindle=!0}if(browser.safari&&browser.silk){matched.browser="silk",browser.silk=!0}return browser.name=matched.browser,browser.platform=matched.platform,browser}return window.jQBrowser=uaMatch(window.navigator.userAgent),window.jQBrowser.uaMatch=uaMatch,jQuery&&(jQuery.browser=window.jQBrowser),window.jQBrowser}),define("pat-utils",["jquery","jquery.browser","underscore"],function($){$.fn.safeClone=function(){var $clone=this.clone();return void 0!==$.browser.msie&&$clone.findInclusive(":input[placeholder]").each(function(i,item){var $item=$(item);$item.attr("placeholder")===$item.val()&&$item.val("")}),$clone},Array.prototype.forEach||(Array.prototype.forEach=function(callback,thisArg){var T,k;if(null===this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("function"!=typeof callback)throw new TypeError(callback+" is not a function");for(1<arguments.length&&(T=thisArg),k=0;k<len;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}});function isObject(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj}var transitions={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}};return isElementInViewport=function(el,partial,offset){if(el===[])return!1;el instanceof $&&(el=el[0]);var rec=el.getBoundingClientRect(),rec_values=[rec.top,rec.bottom,rec.left,rec.right];return!_.every(rec_values,function(v){if(0===v)return!0})&&(partial?(void 0===offset&&(offset=0),rec.top<=0+offset&&rec.bottom>=0+offset):0<=rec.top&&0<=rec.left&&rec.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rec.right<=(window.innerWidth||document.documentElement.clientWidth))},{jqueryPlugin:function(pattern){return function(method,options){return 0===this.length?this:("object"==typeof method&&(options=method,method=void 0),"function"==typeof pattern?function(pattern,method,options){return this.each(function(){var pat,$el=$(this);if(pat=pattern.init($el,options),method){if(void 0===pat[method])return $.error("Method "+method+" does not exist on jQuery."+pattern.name),!1;if("_"===method.charAt(0))return $.error("Method "+method+" is private on jQuery."+pattern.name),!1;pat[method].apply(pat,[options])}}),this}.call(this,pattern,method,options):function(pattern,method,options){var $this=this;if(method){if(pattern[method])return pattern[method].apply($this,[$this].concat([options]));$.error("Method "+method+" does not exist on jQuery."+pattern.name)}else pattern.init.apply($this,[$this].concat([options]));return $this}.call(this,pattern,method,options))}},debounce:function(func,wait){var timeout;return function(){var context=this,args=arguments;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,func.apply(context,args)},wait)}},escapeRegExp:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:isObject,extend:function(obj){if(!isObject(obj))return obj;for(var source,prop,i=1,length=arguments.length;i<length;i++)for(prop in source=arguments[i])hasOwnProperty.call(source,prop)&&(obj[prop]=source[prop]);return obj},rebaseURL:function(base,url){return-1!==url.indexOf("://")||"/"===url[0]?url:base.slice(0,base.lastIndexOf("/")+1)+url},findLabel:function(input){for(var $label,label=input.parentNode;label&&11!==label.nodeType;label=label.parentNode)if("LABEL"===label.tagName)return label;return input.id&&($label=$('label[for="'+input.id+'"]')),$label&&0===$label.length&&input.form&&($label=$('label[for="'+input.name+'"]',input.form)),$label&&$label.length?$label[0]:null},elementInViewport:function(el){var rect=el.getBoundingClientRect(),docEl=document.documentElement,vWidth=window.innerWidth||docEl.clientWidth,vHeight=window.innerHeight||docEl.clientHeight;return!(rect.right<0||rect.bottom<0||rect.left>vWidth||rect.top>vHeight)},removeWildcardClass:function($targets,classes){if(-1===classes.indexOf("*"))$targets.removeClass(classes);else{var matcher=classes.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");matcher=matcher.replace(/[*]/g,".*"),matcher=new RegExp("^"+matcher+"$"),$targets.filter("[class]").each(function(){for(var $this=$(this),classes=$this.attr("class").split(/\s+/),ok=[],i=0;i<classes.length;i++)matcher.test(classes[i])||ok.push(classes[i]);ok.length?$this.attr("class",ok.join(" ")):$this.removeAttr("class")})}},hideOrShow:function($slave,visible,options,pattern_name){var duration="css"===options.transition||"none"===options.transition?null:options.effect.duration;$slave.removeClass("visible hidden in-progress");var onComplete=function(){$slave.removeClass("in-progress").addClass(visible?"visible":"hidden").trigger("pat-update",{pattern:pattern_name,transition:"complete"})};if(duration){var t=transitions[options.transition];$slave.addClass("in-progress").trigger("pat-update",{pattern:pattern_name,transition:"start"}),$slave[visible?t.show:t.hide]({duration:duration,easing:options.effect.easing,complete:onComplete})}else"css"!==options.transition&&$slave[visible?"show":"hide"](),onComplete()},addURLQueryParameter:function(fullURL,param,value){var val=new RegExp("(\\?|\\&)"+param+"=.*?(?=(&|$))"),parts=fullURL.toString().split("#"),url=parts[0],hash=parts[1],newURL=url;return newURL=val.test(url)?url.replace(val,"$1"+param+"="+value):/\?.+$/.test(url)?url+"&"+param+"="+value:url+"?"+param+"="+value,hash&&(newURL+="#"+hash),newURL},removeDuplicateObjects:function(objs){return _.reduce(objs,function(list,next_obj){var is_duplicate=!1;return _.each(list,function(obj){is_duplicate=_.keys(obj).length===_.keys(next_obj).length&&!_.chain(obj).omit(function(v,k){return this[k]===v}.bind(next_obj)).keys().value().length}),is_duplicate||list.push(next_obj),list},[])},mergeStack:function(stack,length){for(var results=[],i=0;i<length;i++)results.push({});return _.each(stack,function(frame){for(var frame_length=frame.length-1,x=0;x<length;x++)results[x]=$.extend(results[x]||{},frame[frame_length<x?frame_length:x])}),results},isElementInViewport:isElementInViewport}}),define("pat-compat",[],function(){var _hasOwnProperty,hasDontEnumBug,dontEnums,dontEnumsLength;Array.prototype.every||(Array.prototype.every=function(fun){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var thisp=arguments[1],i=0;i<len;i++)if(i in t&&!fun.call(thisp,t[i],i,t))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(fun){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var res=[],thisp=arguments[1],i=0;i<len;i++)if(i in t){var val=t[i];fun.call(thisp,val,i,t)&&res.push(val)}return res}),Array.prototype.forEach||(Array.prototype.forEach=function(callback,thisArg){var T,k;if(null===this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("[object Function]"!=={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),k=0;k<len;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(0<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),len<=n)return-1;for(var k=0<=n?n:Math.max(len-Math.abs(n),0);k<len;k++)if(k in t&&t[k]===searchElement)return k;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(searchElement){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=len;1<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*Math.floor(Math.abs(n))));for(var k=0<=n?Math.min(n,len-1):len-Math.abs(n);0<=k;k--)if(k in t&&t[k]===searchElement)return k;return-1}),Array.prototype.map||(Array.prototype.map=function(callback,thisArg){var T,A,k;if(null===this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("[object Function]"!=={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),A=new Array(len),k=0;k<len;){var kValue,mappedValue;k in O&&(kValue=O[k],mappedValue=callback.call(T,kValue,k,O),A[k]=mappedValue),k++}return A}),Array.prototype.reduce||(Array.prototype.reduce=function(accumulator){if(null==this)throw new TypeError("Object is null or undefined");var curr,i=0,l=this.length>>0;if("function"!=typeof accumulator)throw new TypeError("First argument is not callable");if(arguments.length<2){if(0===l)throw new TypeError("Array length is 0 and no second argument");curr=this[0],i=1}else curr=arguments[1];for(;i<l;)i in this&&(curr=accumulator.call(void 0,curr,this[i],i,this)),++i;return curr}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(callbackfn){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof callbackfn)throw new TypeError;if(0===len&&1===arguments.length)throw new TypeError;var accumulator,k=len-1;if(2<=arguments.length)accumulator=arguments[1];else for(;;){if(k in this){accumulator=this[k--];break}if(--k<0)throw new TypeError}for(;0<=k;)k in t&&(accumulator=callbackfn.call(void 0,accumulator,t[k],k,t)),k--;return accumulator}),Array.prototype.some||(Array.prototype.some=function(fun){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var thisp=arguments[1],i=0;i<len;i++)if(i in t&&fun.call(thisp,t[i],i,t))return!0;return!1}),Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound}),Object.keys||(Object.keys=(_hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnumsLength=(dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(obj){if("object"!=typeof obj&&"function"!=typeof obj||null===obj)throw new TypeError("Object.keys called on non-object");var result=[];for(var prop in obj)_hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(var i=0;i<dontEnumsLength;i++)_hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}))}),define("pat-jquery-ext",["jquery"],function($){var methods={init:function(options){var settings={time:3,initialTime:8,exceptionAreas:[]};return this.each(function(){var $this=$(this);$this.data("timeout")||(options&&$.extend(settings,options),$this.data("timeout",{lastEvent:new Date,trueTime:settings.time,time:settings.initialTime,untouched:!0,inExceptionArea:!1}),$this.bind("mouseover.timeout",methods.mouseMoved),$this.bind("mouseenter.timeout",methods.mouseMoved),$(settings.exceptionAreas).each(function(){$this.find(this).live("mouseover.timeout",{parent:$this},methods.enteredException).live("mouseleave.timeout",{parent:$this},methods.leftException)}),0<settings.initialTime?$this.timeout("startTimer"):$this.addClass("timeout"))})},enteredException:function(event){var data=event.data.parent.data("timeout");data.inExceptionArea=!0,event.data.parent.data("timeout",data),event.data.parent.trigger("mouseover")},leftException:function(event){var data=event.data.parent.data("timeout");data.inExceptionArea=!1,event.data.parent.data("timeout",data)},destroy:function(){return this.each(function(){var $this=$(this),data=$this.data("timeout");$(window).unbind(".timeout"),data.timeout.remove(),$this.removeData("timeout")})},mouseMoved:function(){var $this=$(this),data=$this.data("timeout");$this.hasClass("timeout")?($this.removeClass("timeout"),$this.timeout("startTimer")):data.untouched&&(data.untouched=!1,data.time=data.trueTime),data.lastEvent=new Date,$this.data("timeout",data)},startTimer:function(){var $this=$(this),data=$this.data("timeout"),fn=function(){var data=$this.data("timeout");if(data&&data.lastEvent)if(data.inExceptionArea)setTimeout(fn,Math.floor(1e3*data.time));else{var now=new Date,diff=Math.floor(1e3*data.time)-(now-data.lastEvent);0<diff?setTimeout(fn,diff+100):$this.addClass("timeout")}};setTimeout(fn,Math.floor(1e3*data.time))}};$.fn.timeout=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.timeout"):methods.init.apply(this,arguments)},$.extend($.expr[":"],{scrollable:function(element){return"scroll"===$(element).css("overflow")||"scroll"===$(element).css("overflowX")||"scroll"===$(element).css("overflowY")||(element.clientHeight<element.scrollHeight&&(-1!==$.inArray($(element).css("overflowY"),["scroll","auto"])||-1!==$.inArray($(element).css("overflow"),["scroll","auto"]))||element.clientWidth<element.scrollWidth&&(-1!==$.inArray($(element).css("overflowX"),["scroll","auto"])||-1!==$.inArray($(element).css("overflow"),["scroll","auto"])))}}),$.fn.makeVisibleInScroll=function(parent_id){var absoluteParent=null;return"string"==typeof parent_id?absoluteParent=$("#"+parent_id):parent_id&&(absoluteParent=$(parent_id)),this.each(function(){var parent,$this=$(this);parent=absoluteParent||(0<(parent=$this.parents(":scrollable")).length?$(parent[0]):$(window));var elemTop=$this.position().top,elemBottom=$this.height()+elemTop,viewTop=parent.scrollTop(),viewBottom=parent.height()+viewTop;elemTop<viewTop?parent.scrollTop(elemTop):elemBottom>viewBottom-parent.height()/2&&parent.scrollTop(elemTop-(parent.height()-$this.height())/2)})},$.fn.setPositionAbsolute=function(element,offsettop,offsetleft){return this.each(function(){var $this=$(this),thiswidth=$(this).width(),pos=element.offset(),width=element.width(),height=element.height(),setleft=pos.left+width-thiswidth+offsetleft,settop=pos.top+height+offsettop;$this.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:setleft+"px",top:settop+"px",width:thiswidth}),$this.remove().appendTo("body").show()})},$.fn.positionAncestor=function(selector){var left=0,top=0;return this.each(function(){var $ancestor=$(this).closest(selector);if($ancestor.length&&"static"!==$ancestor.css("position")){var $child=$(this),childMarginEdgeLeft=$child.offset().left-parseInt($child.css("marginLeft"),10),childMarginEdgeTop=$child.offset().top-parseInt($child.css("marginTop"),10),ancestorPaddingEdgeLeft=$ancestor.offset().left+parseInt($ancestor.css("borderLeftWidth"),10),ancestorPaddingEdgeTop=$ancestor.offset().top+parseInt($ancestor.css("borderTopWidth"),10);return left=childMarginEdgeLeft-ancestorPaddingEdgeLeft,top=childMarginEdgeTop-ancestorPaddingEdgeTop,!1}}),{left:left,top:top}},String.prototype.startsWith=function(str){return null!==this.match("^"+str)},String.prototype.endsWith=function(str){return null!==this.match(str+"$")},$.simplePlaceholder={placeholder_class:null,hide_placeholder:function(){var $this=$(this);$this.val()===$this.attr("placeholder")&&$this.val("").removeClass($.simplePlaceholder.placeholder_class)},show_placeholder:function(){var $this=$(this);""===$this.val()&&$this.val($this.attr("placeholder")).addClass($.simplePlaceholder.placeholder_class)},prevent_placeholder_submit:function(){return $(this).find(".simple-placeholder").each(function(){var $this=$(this);$this.val()===$this.attr("placeholder")&&$this.val("")}),!0}},$.fn.simplePlaceholder=function(options){if(void 0===document.createElement("input").placeholder){var config={placeholder_class:"placeholding"};options&&$.extend(config,options),$.simplePlaceholder.placeholder_class=config.placeholder_class,this.each(function(){var $this=$(this);$this.focus($.simplePlaceholder.hide_placeholder),$this.blur($.simplePlaceholder.show_placeholder),""===$this.val()&&($this.val($this.attr("placeholder")),$this.addClass($.simplePlaceholder.placeholder_class)),$this.addClass("simple-placeholder"),$(this.form).submit($.simplePlaceholder.prevent_placeholder_submit)})}return this},$.fn.findInclusive=function(selector){return this.find("*").addBack().filter(selector)},$.fn.slideIn=function(speed,easing,callback){return this.animate({width:"show"},speed,easing,callback)},$.fn.slideOut=function(speed,easing,callback){return this.animate({width:"hide"},speed,easing,callback)},$.expr[":"].Contains=function(a,i,m){return 0<=$(a).text().toUpperCase().indexOf(m[3].toUpperCase())},$.fn.scopedFind=function(selector){return selector.startsWith("#")?$(selector):this.find(selector)}}),define("pat-registry",["jquery","underscore","pat-logger","pat-utils","pat-compat","pat-jquery-ext"],function($,_,logger,utils){for(var match,log=logger.getLogger("registry"),disable_re=/patterns-disable=([^&]+)/g,dont_catch_re=/patterns-dont-catch/g,dont_catch=!1,disabled={};null!==(match=disable_re.exec(window.location.search));)disabled[match[1]]=!0,log.info("Pattern disabled via url config:",match[1]);for(;null!==(match=dont_catch_re.exec(window.location.search));)dont_catch=!0,log.info("I will not catch init exceptions");var registry={patterns:{},initialized:!1,init:function(){$(document).ready(function(){log.info("loaded: "+Object.keys(registry.patterns).sort().join(", ")),registry.scan(document.body),registry.initialized=!0,log.info("finished initial scan.")})},clear:function(){this.patterns={}},transformPattern:function(name,content){if(disabled[name])log.debug("Skipping disabled pattern:",name);else{var pattern=registry.patterns[name];if(pattern.transform)try{pattern.transform($(content))}catch(e){if(dont_catch)throw e;log.error("Transform error for pattern"+name,e)}}},initPattern:function(name,el,trigger){var $el=$(el),pattern=registry.patterns[name];if(pattern.init&&(plog=logger.getLogger("pat."+name),$el.is(pattern.trigger))){plog.debug("Initialising:",$el);try{pattern.init($el,null,trigger),plog.debug("done.")}catch(e){if(dont_catch)throw e;plog.error("Caught error:",e)}}},orderPatterns:function(patterns){return _.contains(patterns,"validation")&&_.contains(patterns,"inject")&&(patterns.splice(patterns.indexOf("validation"),1),patterns.unshift("validation")),patterns},scan:function(content,patterns,trigger){var selectors=[];(patterns=this.orderPatterns(patterns||Object.keys(registry.patterns))).forEach(_.partial(this.transformPattern,_,content)),patterns=_.each(patterns,function(name){var pattern=registry.patterns[name];pattern.trigger&&selectors.unshift(pattern.trigger)}),$(content).findInclusive(selectors.join(",")).filter(function(){return 0===$(this).parents("pre").length}).filter(":not(.cant-touch-this)").toArray().reduceRight(function(acc,el){patterns.forEach(_.partial(this.initPattern,_,el,trigger))}.bind(this),null),$("body").addClass("patterns-loaded")},register:function(pattern,name){var plugin_name;return(name=name||pattern.name)?registry.patterns[name]?(log.error("Already have a pattern called: "+name),!1):((registry.patterns[name]=pattern).jquery_plugin&&(plugin_name=("pat-"+name).replace(/-([a-zA-Z])/g,function(match,p1){return p1.toUpperCase()}),$.fn[plugin_name]=utils.jqueryPlugin(pattern),$.fn[plugin_name.replace(/^pat/,"pattern")]=$.fn[plugin_name]),log.debug("Registered pattern:",name,pattern),registry.initialized&&registry.scan(document.body,[name]),!0):(log.error("Pattern lacks a name:",pattern),!1)}};return registry}),define("pat-mockup-parser",["jquery"],function($){"use strict";return{getOptions:function getOptions($el,patternName,options){options=options||{},0===$el.length||$.nodeName($el[0],"body")||(options=getOptions($el.parent(),patternName,options));var elOptions={};if(0!==$el.length&&(elOptions=$el.data("pat-"+patternName))&&"string"==typeof elOptions){var tmpOptions={};$.each(elOptions.split(";"),function(i,item){(item=item.split(":")).reverse();var key=item.pop();key=key.replace(/^\s+|\s+$/g,""),item.reverse();var value=item.join(":");value=value.replace(/^\s+|\s+$/g,""),tmpOptions[key]=value}),elOptions=tmpOptions}return $.extend(!0,{},options,elOptions)}}}),define("pat-base",["jquery","pat-registry","pat-mockup-parser","pat-logger"],function($,Registry,mockupParser,logger){"use strict";var log=logger.getLogger("Patternslib Base"),initBasePattern=function($el,options,trigger){var name=this.prototype.name,log=logger.getLogger("pat."+name),pattern=$el.data("pattern-"+name);if(void 0===pattern&&Registry.patterns[name]){try{options="mockup"===this.prototype.parser?mockupParser.getOptions($el,name,options):options,pattern=new Registry.patterns[name]($el,options,trigger)}catch(e){log.error("Failed while initializing '"+name+"' pattern.",e)}$el.data("pattern-"+name,pattern)}return pattern},Base=function($el,options,trigger){this.$el=$el,this.options=$.extend(!0,{},this.defaults||{},options||{}),this.init($el,options,trigger),this.emit("init")};return Base.prototype={constructor:Base,on:function(eventName,eventCallback){this.$el.on(eventName+"."+this.name+".patterns",eventCallback)},emit:function(eventName,args){void 0===args&&(args=[]),this.$el.trigger(eventName+"."+this.name+".patterns",args)}},Base.extend=function(patternProps){var child,parent=this;if(!patternProps)throw new Error("Pattern configuration properties required when calling Base.extend");(child=patternProps.hasOwnProperty("constructor")?patternProps.constructor:function(){parent.apply(this,arguments)}).extend=Base.extend,child.init=initBasePattern,child.jquery_plugin=!0,child.trigger=patternProps.trigger;var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,$.extend(!0,child.prototype,patternProps),child.__super__=parent.prototype,patternProps.name?patternProps.trigger?Registry.register(child,patternProps.name):log.warn("The pattern '"+patternProps.name+"' does not have a trigger attribute, it will not be registered."):log.warn("This pattern without a name attribute will not be registered!"),child},Base}),function(h){"function"==typeof define&&define.amd?define("datatables.net",["jquery"],function(E){return h(E,window,document)}):"object"==typeof exports?module.exports=function(E,G){return E||(E=window),G||(G="undefined"!=typeof window?require("jquery"):require("jquery")(E)),h(G,E,E.document)}:h(jQuery,window,document)}(function(h,E,G,k){function X(a){var b,c,d={};h.each(a,function(e){(b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(c=e.replace(b[0],b[2].toLowerCase()),d[c]=e,"o"===b[1]&&X(a[e]))}),a._hungarianMap=d}function I(a,b,c){var d;a._hungarianMap||X(a),h.each(b,function(e){(d=a._hungarianMap[e])===k||!c&&b[d]!==k||("o"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),I(a[d],b[d],c)):b[d]=b[e])})}function Ca(a){var b=m.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&F(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&F(a,a,"sZeroRecords","sLoadingRecords"),a.sInfoThousands&&(a.sThousands=a.sInfoThousands),(a=a.sDecimal)&&cb(a)}function db(a){if(A(a,"ordering","bSort"),A(a,"orderMulti","bSortMulti"),A(a,"orderClasses","bSortClasses"),A(a,"orderCellsTop","bSortCellsTop"),A(a,"order","aaSorting"),A(a,"orderFixed","aaSortingFixed"),A(a,"paging","bPaginate"),A(a,"pagingType","sPaginationType"),A(a,"pageLength","iDisplayLength"),A(a,"searching","bFilter"),"boolean"==typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":""),"boolean"==typeof a.scrollX&&(a.scrollX=a.scrollX?"100%":""),a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&I(m.models.oSearch,a[b])}function eb(a){A(a,"orderable","bSortable"),A(a,"orderData","aDataSort"),A(a,"orderSequence","asSorting"),A(a,"orderDataType","sortDataType");var b=a.aDataSort;"number"==typeof b&&!h.isArray(b)&&(a.aDataSort=[b])}function fb(a){if(!m.__browser){var b={};m.__browser=b;var c=h("<div/>").css({position:"fixed",top:0,left:-1*h(E).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(h("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(h("<div/>").css({width:"100%",height:10}))).appendTo("body"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth,b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth,b.bScrollbarLeft=1!==Math.round(e.offset().left),b.bBounding=!!c[0].getBoundingClientRect().width,c.remove()}h.extend(a.oBrowser,m.__browser),a.oScroll.iBarWidth=m.__browser.barWidth}function gb(a,b,c,d,e,f){var g,j=!1;for(c!==k&&(g=c,j=!0);d!==e;)a.hasOwnProperty(d)&&(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Da(a,b){var c=m.defaults.column,d=a.aoColumns.length;c=h.extend({},m.models.oColumn,c,{nTh:b||G.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c),(c=a.aoPreSearchCols)[d]=h.extend({},m.models.oSearch,c[d]),ja(a,d,h(b).data())}function ja(a,b,c){b=a.aoColumns[b];var d=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var f=(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(eb(c),I(m.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),c.sClass&&e.addClass(c.sClass),h.extend(b,c),F(b,c,"sWidth","sWidthOrig"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),F(b,c,"aDataSort"));var g=b.mData,j=Q(g),i=b.mRender?Q(b.mRender):null;c=function(a){return"string"==typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter)),b._setter=null,b.fnGetData=function(a,b,c){var d=j(a,b,k,c);return i&&b?i(d,b,a,c):d},b.fnSetData=function(a,b,c){return R(g)(a,b,c)},"number"!=typeof g&&(a._rowReadObject=!0),a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone)),a=-1!==h.inArray("asc",b.asSorting),c=-1!==h.inArray("desc",b.asSorting),b.bSortable&&(a||c)?b.sSortingClassJUI=a&&!c?(b.sSortingClass=d.sSortableAsc,d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,d.sSortJUI):(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI="")}function Y(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Ea(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}(""!==(b=a.oScroll).sY||""!==b.sX)&&ka(a),r(a,null,"column-sizing",[a])}function Z(a,b){var c=la(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function $(a,b){var c=la(a,"bVisible");return-1!==(c=h.inArray(b,c))?c:null}function aa(a){var b=0;return h.each(a.aoColumns,function(a,d){d.bVisible&&"none"!==h(d.nTh).css("display")&&b++}),b}function la(a,b){var c=[];return h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)}),c}function Fa(a){var e,f,g,j,i,h,l,q,t,b=a.aoColumns,c=a.aoData,d=m.ext.type.detect;for(e=0,f=b.length;e<f;e++)if(t=[],!(l=b[e]).sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(g=0,j=d.length;g<j;g++){for(i=0,h=c.length;i<h&&(t[i]===k&&(t[i]=B(a,i,e,"type")),(q=d[g](t[i],a))||g===d.length-1)&&"html"!==q;i++);if(q){l.sType=q;break}}l.sType||(l.sType="string")}}function hb(a,b,c,d){var e,f,g,j,i,n,l=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){var q=(n=b[e]).targets!==k?n.targets:n.aTargets;for(h.isArray(q)||(q=[q]),f=0,g=q.length;f<g;f++)if("number"==typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Da(a);d(q[f],n)}else if("number"==typeof q[f]&&q[f]<0)d(l.length+q[f],n);else if("string"==typeof q[f])for(j=0,i=l.length;j<i;j++)("_all"==q[f]||h(l[j].nTh).hasClass(q[f]))&&d(j,n)}if(c)for(e=0,a=c.length;e<a;e++)d(e,c[e])}function M(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},m.models.oRow,{src:c?"dom":"data",idx:e});f._aData=b,a.aoData.push(f);for(var g=a.aoColumns,j=0,i=g.length;j<i;j++)g[j].sType=null;return a.aiDisplayMaster.push(e),(b=a.rowIdFn(b))!==k&&(a.aIds[b]=f),(c||!a.oFeatures.bDeferRender)&&Ga(a,e,c,d),e}function ma(a,b){var c;return b instanceof h||(b=h(b)),b.map(function(b,e){return c=Ha(a,e),M(a,c.data,e,c.cells)})}function B(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,i=f.fnGetData(g,d,{settings:a,row:b,col:c});if(i===k)return a.iDrawError!=e&&null===j&&(J(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=e),j;if(i!==g&&null!==i||null===j||d===k){if("function"==typeof i)return i.call(g)}else i=j;return null===i&&"display"==d?"":i}function ib(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function Ia(a){return h.map(a.match(/(\\.|[^\.])+/g)||[""],function(a){return a.replace(/\\\./g,".")})}function Q(a){if(h.isPlainObject(a)){var b={};return h.each(a,function(a,c){c&&(b[a]=Q(c))}),function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"==typeof a)return function(b,c,f,g){return a(b,c,f,g)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b){return b[a]};var c=function(a,b,f){var g,j;if(""!==f)for(var i=0,n=(j=Ia(f)).length;i<n;i++){if(f=j[i].match(ba),g=j[i].match(U),f){if(j[i]=j[i].replace(ba,""),""!==j[i]&&(a=a[j[i]]),g=[],j.splice(0,i+1),j=j.join("."),h.isArray(a))for(i=0,n=a.length;i<n;i++)g.push(c(a[i],b,j));a=""===(a=f[0].substring(1,f[0].length-1))?g:g.join(a);break}if(g)j[i]=j[i].replace(U,""),a=a[j[i]]();else{if(null===a||a[j[i]]===k)return k;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}function R(a){if(h.isPlainObject(a))return R(a._);if(null===a)return function(){};if("function"==typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,d){b[a]=d};var b=function(a,d,e){var f;f=(e=Ia(e))[e.length-1];for(var g,j,i=0,n=e.length-1;i<n;i++){if(g=e[i].match(ba),j=e[i].match(U),g){if(e[i]=e[i].replace(ba,""),a[e[i]]=[],(f=e.slice()).splice(0,i+1),g=f.join("."),h.isArray(d))for(j=0,n=d.length;j<n;j++)b(f={},d[j],g),a[e[i]].push(f);else a[e[i]]=d;return}j&&(e[i]=e[i].replace(U,""),a=a[e[i]](d)),null!==a[e[i]]&&a[e[i]]!==k||(a[e[i]]={}),a=a[e[i]]}f.match(U)?a[f.replace(U,"")](d):a[f.replace(ba,"")]=d};return function(c,d){return b(c,d,a)}}function Ja(a){return D(a.aoData,"_aData")}function na(a){a.aoData.length=0,a.aiDisplayMaster.length=0,a.aiDisplay.length=0,a.aIds={}}function oa(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--;-1!=d&&c===k&&a.splice(d,1)}function ca(a,b,c,d){var f,e=a.aoData[b],g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=B(a,b,d,"display")};if("dom"!==c&&(c&&"auto"!==c||"dom"!==e.src)){var j=e.anCells;if(j)if(d!==k)g(j[d],d);else for(c=0,f=j.length;c<f;c++)g(j[c],c)}else e._aData=Ha(a,e,d,d===k?k:e._aData).data;if(e._aSortData=null,e._aFilterData=null,g=a.aoColumns,d!==k)g[d].sType=null;else{for(c=0,f=g.length;c<f;c++)g[c].sType=null;Ka(a,e)}}function Ha(a,b,c,d){var g,j,n,e=[],f=b.firstChild,i=0,l=a.aoColumns,q=a._rowReadObject,t=(d=d!==k?d:q?{}:[],function(a,b){if("string"==typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),R(a)(d,b.getAttribute(c)))}}),m=function(a){c!==k&&c!==i||(j=l[i],n=h.trim(a.innerHTML),j&&j._bAttrSrc?(R(j.mData._)(d,n),t(j.mData.sort,a),t(j.mData.type,a),t(j.mData.filter,a)):q?(j._setter||(j._setter=R(j.mData)),j._setter(d,n)):d[i]=n),i++};if(f)for(;f;)"TD"!=(g=f.nodeName.toUpperCase())&&"TH"!=g||(m(f),e.push(f)),f=f.nextSibling;else for(f=0,g=(e=b.anCells).length;f<g;f++)m(e[f]);return(b=b.firstChild?b:b.nTr)&&(b=b.getAttribute("id"))&&R(a.rowId)(d,b),{data:d,cells:e}}function Ga(a,b,c,d){var j,i,n,l,q,e=a.aoData[b],f=e._aData,g=[];if(null===e.nTr){for(j=c||G.createElement("tr"),e.nTr=j,e.anCells=g,j._DT_RowIndex=b,Ka(a,e),l=0,q=a.aoColumns.length;l<q;l++)n=a.aoColumns[l],(i=c?d[l]:G.createElement(n.sCellType))._DT_CellIndex={row:b,column:l},g.push(i),c&&!n.mRender&&n.mData===l||h.isPlainObject(n.mData)&&n.mData._===l+".display"||(i.innerHTML=B(a,b,l,"display")),n.sClass&&(i.className+=" "+n.sClass),n.bVisible&&!c?j.appendChild(i):!n.bVisible&&c&&i.parentNode.removeChild(i),n.fnCreatedCell&&n.fnCreatedCell.call(a.oInstance,i,B(a,b,l),f,b,l);r(a,"aoRowCreatedCallback",null,[j,f,b])}e.nTr.setAttribute("role","row")}function Ka(a,b){var c=b.nTr,d=b._aData;if(c){var e=a.rowIdFn(d);e&&(c.id=e),d.DT_RowClass&&(e=d.DT_RowClass.split(" "),b.__rowc=b.__rowc?qa(b.__rowc.concat(e)):e,h(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass)),d.DT_RowAttr&&h(c).attr(d.DT_RowAttr),d.DT_RowData&&h(c).data(d.DT_RowData)}}function jb(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===h("th, td",g).length,n=a.oClasses,l=a.aoColumns;for(i&&(e=h("<tr/>").appendTo(g)),b=0,c=l.length;b<c;b++)f=l[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),La(a,f.nTh,b))),f.sTitle!=d[0].innerHTML&&d.html(f.sTitle),Ma(a,"header")(a,d,f,n);if(i&&da(a.aoHeader,g),h(g).find(">tr").attr("role","row"),h(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH),h(j).find(">tr>th, >tr>td").addClass(n.sFooterTH),null!==j)for(b=0,c=(a=a.aoFooter[0]).length;b<c;b++)(f=l[b]).nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}function ea(a,b,c){var d,e,f,n,g=[],j=[],i=a.aoColumns.length;if(b){for(c===k&&(c=!1),d=0,e=b.length;d<e;d++){for(g[d]=b[d].slice(),g[d].nTr=b[d].nTr,f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}for(d=0,e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);for(f=0,b=g[d].length;f<b;f++)if(n=i=1,j[d][f]===k){for(a.appendChild(g[d][f].cell),j[d][f]=1;g[d+i]!==k&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+n]!==k&&g[d][f].cell==g[d][f+n].cell;){for(c=0;c<i;c++)j[d+c][f+n]=1;n++}h(g[d][f].cell).attr("rowspan",i).attr("colspan",n)}}}}function N(a){var b=r(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{b=[];var c=0,d=a.asStripeClasses,e=d.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==y(a),i=a.aiDisplay;a.bDrawing=!0,g!==k&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);g=a._iDisplayStart;var n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!kb(a))return}else a.iDraw++;if(0!==i.length)for(f=j?a.aoData.length:n,j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];if(null===q.nTr&&Ga(a,l),l=q.nTr,0!==e){var t=d[c%e];q._sRowStripe!=t&&(h(l).removeClass(q._sRowStripe).addClass(t),q._sRowStripe=t)}r(a,"aoRowCallback",null,[l,q._aData,c,j]),b.push(l),c++}else c=f.sZeroRecords,1==a.iDraw&&"ajax"==y(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{class:e?d[0]:""}).append(h("<td />",{valign:"top",colSpan:aa(a),class:a.oClasses.sRowEmpty}).html(c))[0];r(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Ja(a),g,n,i]),r(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Ja(a),g,n,i]),(d=h(a.nTBody)).children().detach(),d.append(h(b)),r(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1}}function S(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&lb(a),d?fa(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice(),!0!==b&&(a._iDisplayStart=0),a._drawHold=b,N(a),a._drawHold=!1}function mb(a){var b=a.oClasses,c=h(a.nTable),d=(c=h("<div/>").insertBefore(c),a.oFeatures),e=h("<div/>",{id:a.sTableId+"_wrapper",class:b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0],a.nTableWrapper=e[0],a.nTableReinsertBefore=a.nTable.nextSibling;for(var g,j,i,n,l,q,f=a.sDom.split(""),k=0;k<f.length;k++){if(g=null,"<"==(j=f[k])){if(i=h("<div/>")[0],"'"==(n=f[k+1])||'"'==n){for(l="",q=2;f[k+q]!=n;)l+=f[k+q],q++;"H"==l?l=b.sJUIHeader:"F"==l&&(l=b.sJUIFooter),-1!=l.indexOf(".")?(n=l.split("."),i.id=n[0].substr(1,n[0].length-1),i.className=n[1]):"#"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l,k+=q}e.append(i),e=h(i)}else if(">"==j)e=e.parent();else if("l"==j&&d.bPaginate&&d.bLengthChange)g=nb(a);else if("f"==j&&d.bFilter)g=ob(a);else if("r"==j&&d.bProcessing)g=pb(a);else if("t"==j)g=qb(a);else if("i"==j&&d.bInfo)g=rb(a);else if("p"==j&&d.bPaginate)g=sb(a);else if(0!==m.ext.feature.length)for(q=0,n=(i=m.ext.feature).length;q<n;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}g&&((i=a.aanFeatures)[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e),a.nHolding=null}function da(a,b){var d,e,f,g,j,i,n,l,q,k,c=h(b).children("tr");for(a.splice(0,a.length),f=0,i=c.length;f<i;f++)a.push([]);for(f=0,i=c.length;f<i;f++)for(e=(d=c[f]).firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){for(l=(l=1*e.getAttribute("colspan"))&&0!==l&&1!==l?l:1,q=(q=1*e.getAttribute("rowspan"))&&0!==q&&1!==q?q:1,g=0,j=a[f];j[g];)g++;for(n=g,k=1===l,j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][n+j]={cell:e,unique:k},a[f+g].nTr=d}e=e.nextSibling}}function ra(a,b,c){var d=[];c||(c=a.aoHeader,b&&da(c=[],b));b=0;for(var e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function sa(a,b,c){if(r(a,"aoServerParams","serverParams",[b]),b&&h.isArray(b)){var d={},e=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value}),b=d}var f,g=a.ajax,j=a.oInstance,i=function(b){r(a,null,"xhr",[a,b,a.jqXHR]),c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var n=h.isFunction(f)?f(b,a):f;b=h.isFunction(f)&&n?n:h.extend(!0,b,n);delete g.data}n={data:b,success:function(b){var c=b.error||b.sError;c&&J(a,0,c),a.json=b,i(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var d=r(a,null,"xhr",[a,null,a.jqXHR]);-1===h.inArray(!0,d)&&("parsererror"==c?J(a,0,"Invalid JSON response",1):4===b.readyState&&J(a,0,"Ajax error",7)),C(a,!1)}},a.oAjaxData=b,r(a,null,"preXhr",[a,b]),a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||"string"==typeof g?a.jqXHR=h.ajax(h.extend(n,{url:g||a.sAjaxSource})):h.isFunction(g)?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(n,g)),g.data=f)}function kb(a){return!a.bAjaxDataGet||(a.iDraw++,C(a,!0),sa(a,tb(a),function(b){ub(a,b)}),!1)}function tb(a){var g,i,n,l,b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,j=[],k=V(a);g=a._iDisplayStart,i=!1!==d.bPaginate?a._iDisplayLength:-1;var t=function(a,b){j.push({name:a,value:b})};t("sEcho",a.iDraw),t("iColumns",c),t("sColumns",D(b,"sName").join(",")),t("iDisplayStart",g),t("iDisplayLength",i);var pa={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)n=b[g],l=f[g],i="function"==typeof n.mData?"function":n.mData,pa.columns.push({data:i,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),t("mDataProp_"+g,i),d.bFilter&&(t("sSearch_"+g,l.sSearch),t("bRegex_"+g,l.bRegex),t("bSearchable_"+g,n.bSearchable)),d.bSort&&t("bSortable_"+g,n.bSortable);return d.bFilter&&(t("sSearch",e.sSearch),t("bRegex",e.bRegex)),d.bSort&&(h.each(k,function(a,b){pa.order.push({column:b.col,dir:b.dir}),t("iSortCol_"+a,b.col),t("sSortDir_"+a,b.dir)}),t("iSortingCols",k.length)),null===(b=m.ext.legacy.ajax)?a.sAjaxSource?j:pa:b?j:pa}function ub(a,b){var c=ta(a,b),d=b.sEcho!==k?b.sEcho:b.draw,e=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}for(na(a),a._iRecordsTotal=parseInt(e,10),a._iRecordsDisplay=parseInt(f,10),d=0,e=c.length;d<e;d++)M(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,N(a),a._bInitComplete||ua(a,b),a.bAjaxDataGet=!0,C(a,!1)}function ta(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?Q(c)(b):b}function ob(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=(j=d.sSearch).match(/_INPUT_/)?j.replace("_INPUT_",g):j+g,i=(b=h("<div/>",{id:f.f?null:c+"_filter",class:b.sFilter}).append(h("<label/>").append(j)),f=function(){var b=this.value?this.value:"";b!=e.sSearch&&(fa(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,N(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===y(a)?400:0,h("input",b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",g?Na(f,g):f).on("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c));return h(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{i[0]!==G.activeElement&&i.val(e.sSearch)}catch(d){}}),b[0]}function fa(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch,d.bRegex=a.bRegex,d.bSmart=a.bSmart,d.bCaseInsensitive=a.bCaseInsensitive};if(Fa(a),"ssp"!=y(a)){for(vb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive),f(b),b=0;b<e.length;b++)wb(a,e[b].sSearch,b,e[b].bEscapeRegex!==k?!e[b].bEscapeRegex:e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);xb(a)}else f(b);a.bFiltered=!0,r(a,null,"search",[a])}function xb(a){for(var d,e,b=m.ext.search,c=a.aiDisplay,f=0,g=b.length;f<g;f++){for(var j=[],i=0,n=c.length;i<n;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0,h.merge(c,j)}}function wb(a,b,c,d,e,f){if(""!==b){var g=[],j=a.aiDisplay;for(d=Oa(b,d,e,f),e=0;e<j.length;e++)b=a.aoData[j[e]]._aFilterData[c],d.test(b)&&g.push(j[e]);a.aiDisplay=g}}function vb(a,b,c,d,e,f){d=Oa(b,d,e,f),f=a.oPreviousSearch.sSearch;var j,g=a.aiDisplayMaster;e=[];if(0!==m.ext.search.length&&(c=!0),j=yb(a),b.length<=0)a.aiDisplay=g.slice();else{for((j||c||f.length>b.length||0!==b.indexOf(f)||a.bSorted)&&(a.aiDisplay=g.slice()),b=a.aiDisplay,c=0;c<b.length;c++)d.test(a.aoData[b[c]]._sFilterRow)&&e.push(b[c]);a.aiDisplay=e}}function Oa(a,b,c,d){return a=b?a:Pa(a),c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$"),RegExp(a,d?"i":"")}function yb(a){var c,d,e,f,g,j,i,h,b=a.aoColumns,l=m.ext.type.search;for(c=!1,d=0,f=a.aoData.length;d<f;d++)if(!(h=a.aoData[d])._aFilterData){for(j=[],e=0,g=b.length;e<g;e++)(c=b[e]).bSearchable?(i=B(a,d,e,"filter"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=""),"string"!=typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(va.innerHTML=i,i=Wb?va.textContent:va.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);h._aFilterData=j,h._sFilterRow=j.join("  "),c=!0}return c}function zb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Ab(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function rb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h("<div/>",{class:a.oClasses.sInfo,id:c?null:b+"_info"});return c||(a.aoDrawCallback.push({fn:Bb,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",b+"_info")),d[0]}function Bb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered),j=Cb(a,j+=c.sInfoPostFix),null!==(c=c.fnInfoCallback)&&(j=c.call(a.oInstance,a,d,e,f,g,j)),h(b).html(j)}}function Cb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ga(a){var b,c,f,d=a.iInitDisplayStart,e=a.aoColumns;c=a.oFeatures;var g=a.bDeferLoading;if(a.bInitialised){for(mb(a),jb(a),ea(a,a.aoHeader),ea(a,a.aoFooter),C(a,!0),c.bAutoWidth&&Ea(a),b=0,c=e.length;b<c;b++)(f=e[b]).sWidth&&(f.nTh.style.width=v(f.sWidth));r(a,null,"preInit",[a]),S(a),("ssp"!=(e=y(a))||g)&&("ajax"==e?sa(a,[],function(c){var f=ta(a,c);for(b=0;b<f.length;b++)M(a,f[b]);a.iInitDisplayStart=d,S(a),C(a,!1),ua(a,c)}):(C(a,!1),ua(a)))}else setTimeout(function(){ga(a)},200)}function ua(a,b){a._bInitComplete=!0,(b||a.oInit.aaData)&&Y(a),r(a,null,"plugin-init",[a,b]),r(a,"aoInitComplete","init",[a,b])}function Qa(a,b){var c=parseInt(b,10);a._iDisplayLength=c,Ra(a),r(a,null,"length",[a,c])}function nb(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,f=(e=h.isArray(d[0]))?d[0]:d,e=(d=e?d[1]:d,h("<select/>",{name:c+"_length","aria-controls":c,class:b.sLengthSelect})),g=0,j=f.length;g<j;g++)e[0][g]=new Option("number"==typeof d[g]?a.fnFormatNumber(d[g]):d[g],f[g]);var i=h("<div><label/></div>").addClass(b.sLength);return a.aanFeatures.l||(i[0].id=c+"_length"),i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML)),h("select",i).val(a._iDisplayLength).on("change.DT",function(){Qa(a,h(this).val()),N(a)}),h(a.nTable).on("length.dt.DT",function(b,c,d){a===c&&h("select",i).val(d)}),i[0]}function sb(a){var b=a.sPaginationType,c=m.ext.pager[b],d="function"==typeof c,e=function(a){N(a)},f=(b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],a.aanFeatures);return d||c.fnInit(a,b,e),f.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var k,b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=(b=(l=-1===i)?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),0);for(k=f.p.length;l<k;l++)Ma(a,"pageButton")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,e)},sName:"pagination"})),b}function Sa(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();return 0===f||-1===e?d=0:"number"==typeof b?f<(d=b*e)&&(d=0):"first"==b?d=0:"previous"==b?(d=0<=e?d-e:0)<0&&(d=0):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:J(a,0,"Unknown paging action: "+b,5),b=a._iDisplayStart!==d,a._iDisplayStart=d,b&&(r(a,null,"page",[a]),c&&N(a)),b}function pb(a){return h("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing",class:a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none"),r(a,null,"processing",[a,b])}function qb(a){(b=h(a.nTable)).attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),n=h(b[0].cloneNode(!1)),l=b.children("tfoot");l.length||(l=null),i=h("<div/>",{class:f.sScrollWrapper}).append(h("<div/>",{class:f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?d?v(d):null:"100%"}).append(h("<div/>",{class:f.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append("top"===j?g:null).append(b.children("thead"))))).append(h("<div/>",{class:f.sScrollBody}).css({position:"relative",overflow:"auto",width:d?v(d):null}).append(b)),l&&i.append(h("<div/>",{class:f.sScrollFoot}).css({overflow:"hidden",border:0,width:d?d?v(d):null:"100%"}).append(h("<div/>",{class:f.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===j?g:null).append(b.children("tfoot")))));var b,k=(b=i.children())[0],t=(f=b[1],l?b[2]:null);return d&&h(f).on("scroll.DT",function(){var a=this.scrollLeft;k.scrollLeft=a,l&&(t.scrollLeft=a)}),h(f).css(e&&c.bCollapse?"max-height":"height",e),a.nScrollHead=k,a.nScrollBody=f,a.nScrollFoot=t,a.aoDrawCallback.push({fn:ka,sName:"scrolling"}),i[0]}function ka(a){var O,K,P,w,B,c=(b=a.oScroll).sX,d=b.sXInner,e=b.sY,b=b.iBarWidth,f=h(a.nScrollHead),g=f[0].style,i=(j=f.children("div"))[0].style,n=j.children("table"),j=a.nScrollBody,l=h(j),q=j.style,t=h(a.nScrollFoot).children("div"),m=t.children("table"),o=h(a.nTHead),p=h(a.nTable),s=p[0],r=s.style,u=a.nTFoot?h(a.nTFoot):null,x=a.oBrowser,T=x.bScrollOversize,Xb=D(a.aoColumns,"nTh"),Ta=[],y=[],z=[],A=[],C=function(a){(a=a.style).paddingTop="0",a.paddingBottom="0",a.borderTopWidth="0",a.borderBottomWidth="0",a.height=0};K=j.scrollHeight>j.clientHeight,a.scrollBarVis!==K&&a.scrollBarVis!==k?(a.scrollBarVis=K,Y(a)):(a.scrollBarVis=K,p.children("thead, tfoot").remove(),u&&(P=u.clone().prependTo(p),O=u.find("tr"),P=P.find("tr")),w=o.clone().prependTo(p),o=o.find("tr"),K=w.find("tr"),w.find("th, td").removeAttr("tabindex"),c||(q.width="100%",f[0].style.width="100%"),h.each(ra(a,w),function(b,c){B=Z(a,b),c.style.width=a.aoColumns[B].sWidth}),u&&H(function(a){a.style.width=""},P),f=p.outerWidth(),""===c?(r.width="100%",T&&(p.find("tbody").height()>j.offsetHeight||"scroll"==l.css("overflow-y"))&&(r.width=v(p.outerWidth()-b)),f=p.outerWidth()):""!==d&&(r.width=v(d),f=p.outerWidth()),H(C,K),H(function(a){z.push(a.innerHTML),Ta.push(v(h(a).css("width")))},K),H(function(a,b){-1!==h.inArray(a,Xb)&&(a.style.width=Ta[b])},o),h(K).height(0),u&&(H(C,P),H(function(a){A.push(a.innerHTML),y.push(v(h(a).css("width")))},P),H(function(a,b){a.style.width=y[b]},O),h(P).height(0)),H(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+z[b]+"</div>",a.style.width=Ta[b]},K),u&&H(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+A[b]+"</div>",a.style.width=y[b]},P),p.outerWidth()<f?(O=j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")?f+b:f,T&&(j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y"))&&(r.width=v(O-b)),(""===c||""!==d)&&J(a,1,"Possible column misalignment",6)):O="100%",q.width=v(O),g.width=v(O),u&&(a.nScrollFoot.style.width=v(O)),!e&&T&&(q.height=v(s.offsetHeight+b)),c=p.outerWidth(),n[0].style.width=v(c),i.width=v(c),d=p.height()>j.clientHeight||"scroll"==l.css("overflow-y"),i[e="padding"+(x.bScrollbarLeft?"Left":"Right")]=d?b+"px":"0px",u&&(m[0].style.width=v(c),t[0].style.width=v(c),t[0].style[e]=d?b+"px":"0px"),p.children("colgroup").insertBefore(p.children("thead")),l.scroll(),!a.bSorted&&!a.bFiltered||a._drawHold||(j.scrollTop=0))}function H(a,b,c){for(var g,j,d=0,e=0,f=b.length;e<f;){for(g=b[e].firstChild,j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Ea(a){var m,o,b=a.nTable,c=a.aoColumns,e=(d=a.oScroll).sY,f=d.sX,g=d.sXInner,j=c.length,i=la(a,"bVisible"),n=h("th",a.nTHead),l=b.getAttribute("width"),k=b.parentNode,t=!1,p=a.oBrowser,d=p.bScrollOversize;for((m=b.style.width)&&-1!==m.indexOf("%")&&(l=m),m=0;m<i.length;m++)null!==(o=c[i[m]]).sWidth&&(o.sWidth=Db(o.sWidthOrig,k),t=!0);if(d||!t&&!f&&!e&&j==aa(a)&&j==n.length)for(m=0;m<j;m++)null!==(i=Z(a,m))&&(c[i].sWidth=v(n.eq(m).width()));else{(j=h(b).clone().css("visibility","hidden").removeAttr("id")).find("tbody tr").remove();var s=h("<tr/>").appendTo(j.find("tbody"));for(j.find("thead, tfoot").remove(),j.append(h(a.nTHead).clone()).append(h(a.nTFoot).clone()),j.find("tfoot th, tfoot td").css("width",""),n=ra(a,j.find("thead")[0]),m=0;m<i.length;m++)o=c[i[m]],n[m].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?v(o.sWidthOrig):"",o.sWidthOrig&&f&&h(n[m]).append(h("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(m=0;m<i.length;m++)o=c[t=i[m]],h(Eb(a,t)).clone(!1).append(o.sContentPadding).appendTo(s);for(h("[name]",j).removeAttr("name"),o=h("<div/>").css(f||e?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(j).appendTo(k),f&&g?j.width(g):f?(j.css("width","auto"),j.removeAttr("width"),j.width()<k.clientWidth&&l&&j.width(k.clientWidth)):e?j.width(k.clientWidth):l&&j.width(l),m=e=0;m<i.length;m++)g=(k=h(n[m])).outerWidth()-k.width(),e+=k=p.bBounding?Math.ceil(n[m].getBoundingClientRect().width):k.outerWidth(),c[i[m]].sWidth=v(k-g);b.style.width=v(e),o.remove()}l&&(b.style.width=v(l)),!l&&!f||a._reszEvt||(b=function(){h(E).on("resize.DT-"+a.sInstance,Na(function(){Y(a)}))},d?setTimeout(b,1e3):b(),a._reszEvt=!0)}function Db(a,b){if(!a)return 0;var c=h("<div/>").css("width",v(a)).appendTo(b||G.body),d=c[0].offsetWidth;return c.remove(),d}function Eb(a,b){var c=Fb(a,b);if(c<0)return null;var d=a.aoData[c];return d.nTr?d.anCells[b]:h("<td/>").html(B(a,c,b,"display"))[0]}function Fb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)(c=(c=(c=B(a,f,b,"display")+"").replace(Yb,"")).replace(/&nbsp;/g," ")).length>d&&(d=c.length,e=f);return e}function v(a){return null===a?"0px":"number"==typeof a?a<0?"0px":a+"px":a.match(/\d$/)?a+"px":a}function V(a){var b,c,f,g,j,i,d=[],e=a.aoColumns;b=a.aaSortingFixed,c=h.isPlainObject(b);var n=[];for(f=function(a){a.length&&!h.isArray(a[0])?n.push(a):h.merge(n,a)},h.isArray(b)&&f(b),c&&b.pre&&f(b.pre),f(a.aaSorting),c&&b.post&&f(b.post),a=0;a<n.length;a++)for(b=0,c=(f=e[i=n[a][0]].aDataSort).length;b<c;b++)j=e[g=f[b]].sType||"string",n[a]._idx===k&&(n[a]._idx=h.inArray(n[a][1],e[g].asSorting)),d.push({src:i,col:g,dir:n[a][1],index:n[a]._idx,type:j,formatter:m.ext.type.order[j+"-pre"]});return d}function lb(a){var b,c,j,h,d=[],e=m.ext.type.order,f=a.aoData,g=0,i=a.aiDisplayMaster;for(Fa(a),b=0,c=(h=V(a)).length;b<c;b++)(j=h[b]).formatter&&g++,Gb(a,j.col);if("ssp"!=y(a)&&0!==h.length){for(b=0,c=i.length;b<c;b++)d[i[b]]=b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,k=f[a]._aSortData,m=f[b]._aSortData;for(g=0;g<i;g++)if(0!==(c=(c=k[(j=h[g]).col])<(e=m[j.col])?-1:e<c?1:0))return"asc"===j.dir?c:-c;return(c=d[a])<(e=d[b])?-1:e<c?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,m=f[a]._aSortData,o=f[b]._aSortData;for(j=0;j<k;j++)if(c=m[(i=h[j]).col],g=o[i.col],0!==(c=(i=e[i.type+"-"+i.dir]||e["string-"+i.dir])(c,g)))return c;return(c=d[a])<(g=d[b])?-1:g<c?1:0})}a.bSorted=!0}function Hb(a){for(var b,c,d=a.aoColumns,e=V(a),f=(a=a.oLanguage.oAria,0),g=d.length;f<g;f++){var j=(c=d[f]).asSorting;b=c.sTitle.replace(/<.*?>/g,"");var i=c.nTh;i.removeAttribute("aria-sort"),c.bSortable&&(b+="asc"===(c=0<e.length&&e[0].col==f?(i.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),j[e[0].index+1]||j[0]):j[0])?a.sSortAscending:a.sSortDescending),i.setAttribute("aria-label",b)}}function Ua(a,b,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;return c===k&&(c=h.inArray(a[1],f)),c+1<f.length?c+1:b?null:0};"number"==typeof e[0]&&(e=a.aaSorting=[e]),c&&a.oFeatures.bSortMulti?-1!==(c=h.inArray(b,D(e,"0")))?(null===(b=g(e[c],!0))&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=f[b],e[c]._idx=b)):(e.push([b,f[0],0]),e[e.length-1]._idx=0):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0),S(a),"function"==typeof d&&d(a)}function La(a,b,c,d){var e=a.aoColumns[c];Va(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Ua(a,c,b.shiftKey,d),"ssp"!==y(a)&&C(a,!1)},0)):Ua(a,c,b.shiftKey,d))})}function wa(a){var f,g,b=a.aLastSort,c=a.oClasses.sSortColumn,d=V(a),e=a.oFeatures;if(e.bSort&&e.bSortClasses){for(e=0,f=b.length;e<f;e++)g=b[e].src,h(D(a.aoData,"anCells",g)).removeClass(c+(e<2?e+1:3));for(e=0,f=d.length;e<f;e++)g=d[e].src,h(D(a.aoData,"anCells",g)).addClass(c+(e<2?e+1:3))}a.aLastSort=d}function Gb(a,b){var e,c=a.aoColumns[b],d=m.ext.order[c.sSortDataType];d&&(e=d.call(a.oInstance,a,b,$(a,b)));for(var f,g=m.ext.type.order[c.sType+"-pre"],j=0,i=a.aoData.length;j<i;j++)(c=a.aoData[j])._aSortData||(c._aSortData=[]),(!c._aSortData[b]||d)&&(f=d?e[j]:B(a,j,b,"sort"),c._aSortData[b]=g?g(f):f)}function xa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:zb(a.oPreviousSearch),columns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:zb(a.aoPreSearchCols[d])}})};r(a,"aoStateSaveParams","stateSaveParams",[a,b]),a.oSavedState=b,a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Ib(a,b,c){var d,e,f=a.aoColumns;b=function(b){if(b&&b.time){var g=r(a,"aoStateLoadParams","stateLoadParams",[a,b]);if(-1===h.inArray(!1,g)&&!(0<(g=a.iStateDuration)&&b.time<+new Date-1e3*g||b.columns&&f.length!==b.columns.length)){if(a.oLoadedState=h.extend(!0,{},b),b.start!==k&&(a._iDisplayStart=b.start,a.iInitDisplayStart=b.start),b.length!==k&&(a._iDisplayLength=b.length),b.order!==k&&(a.aaSorting=[],h.each(b.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)})),b.search!==k&&h.extend(a.oPreviousSearch,Ab(b.search)),b.columns)for(d=0,e=b.columns.length;d<e;d++)(g=b.columns[d]).visible!==k&&(f[d].bVisible=g.visible),g.search!==k&&h.extend(a.aoPreSearchCols[d],Ab(g.search));r(a,"aoStateLoaded","stateLoaded",[a,b])}}c()};if(a.oFeatures.bStateSave){var g=a.fnStateLoadCallback.call(a.oInstance,a,b);g!==k&&b(g)}else c()}function ya(a){var b=m.settings;return-1!==(a=h.inArray(a,D(b,"nTable")))?b[a]:null}function J(a,b,c,d){if(c="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+c,d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+d),b)E.console&&console.log&&console.log(c);else if(b=(b=m.ext).sErrMode||b.errMode,a&&r(a,null,"error",[a,d,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==typeof b&&b(a,d,c)}}function F(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?F(a,b,d[0],d[1]):F(a,b,d)}):(d===k&&(d=c),b[c]!==k&&(a[d]=b[c]))}function Jb(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&"data"!==e&&"aaData"!==e&&h.isArray(d)?d.slice():d);return a}function Va(a,b,c){h(a).on("click.DT",b,function(b){a.blur(),c(b)}).on("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).on("selectstart.DT",function(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function r(a,b,c,d){var e=[];return b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)})),null!==c&&(b=h.Event(c+".dt"),h(a.nTable).trigger(b,d),e.push(b.result)),e}function Ra(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;c<=b&&(b=c-d),b-=b%d,(-1===d||b<0)&&(b=0),a._iDisplayStart=b}function Ma(a,b){var c=a.renderer,d=m.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:"string"==typeof c&&d[c]||d._}function y(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ha(a,b){var c=[],d=(c=Kb.numbers_length,Math.floor(c/2));return b<=c?c=W(0,b):a<=d?((c=W(0,c-2)).push("ellipsis"),c.push(b-1)):(b-1-d<=a?c=W(b-(c-2),b):((c=W(a-d+2,a+d-1)).push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0)),c.DT_el="span",c}function cb(a){h.each({num:function(b){return za(b,a)},"num-fmt":function(b){return za(b,a,Wa)},"html-num":function(b){return za(b,a,Aa)},"html-num-fmt":function(b){return za(b,a,Aa,Wa)}},function(b,c){x.type.order[b+a+"-pre"]=c,b.match(/^html\-/)&&(x.type.search[b+a]=x.type.search.html)})}function Lb(a){return function(){var b=[ya(this[m.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return m.ext.internal[a].apply(this,b)}}var x,s,o,u,m=function(a){this.$=function(a,b){return this.api(!0).$(a,b)},this._=function(a,b){return this.api(!0).rows(a,b).data()},this.api=function(a){return new s(a?ya(this[x.iApiIndex]):this)},this.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);return(b===k||b)&&c.draw(),d.flatten().toArray()},this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===k||a?b.draw(!1):(""!==d.sX||""!==d.sY)&&ka(c)},this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()},this.fnClose=function(a){this.api(!0).row(a).child.hide()},this.fnDeleteRow=function(a,b,c){var d=this.api(!0),e=(a=d.rows(a)).settings()[0],h=e.aoData[a[0][0]];return a.remove(),b&&b.call(this,e,h),(c===k||c)&&d.draw(),h},this.fnDestroy=function(a){this.api(!0).destroy(a)},this.fnDraw=function(a){this.api(!0).draw(a)},this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0),null===b||b===k?e.search(a,c,d,h):e.column(b).search(a,c,d,h),e.draw()},this.fnGetData=function(a,b){var c=this.api(!0);if(a===k)return c.data().toArray();var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==k||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||null},this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()},this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?[(a=b.cell(a).index()).row,a.columnVisible,a.column]:null},this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()},this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]},this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)},this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b),(c===k||c)&&a.columns.adjust().draw()},this.fnSettings=function(){return ya(this[x.iApiIndex])},this.fnSort=function(a){this.api(!0).order(a).draw()},this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)},this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);return c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a),(e===k||e)&&h.columns.adjust(),(d===k||d)&&h.draw(),0},this.fnVersionCheck=x.fnVersionCheck;var b=this,c=a===k,d=this.length;for(var e in c&&(a={}),this.oApi=this.internal=x.internal,m.ext.internal)e&&(this[e]=Lb(e));return this.each(function(){var i,e={},g=1<d?Jb(e,a,!0):a,j=0,n=(e=this.getAttribute("id"),!1),l=m.defaults,q=h(this);if("table"!=this.nodeName.toLowerCase())J(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{db(l),eb(l.column),I(l,l,!0),I(l.column,l.column,!0),I(l,h.extend(g,q.data()));var t=m.settings;j=0;for(i=t.length;j<i;j++){var o=t[j];if(o.nTable==this||o.nTHead.parentNode==this||o.nTFoot&&o.nTFoot.parentNode==this){var s=g.bRetrieve!==k?g.bRetrieve:l.bRetrieve;if(c||s)return o.oInstance;if(g.bDestroy!==k?g.bDestroy:l.bDestroy){o.oInstance.fnDestroy();break}return void J(o,0,"Cannot reinitialise DataTable",3)}if(o.sTableId==this.id){t.splice(j,1);break}}null!==e&&""!==e||(this.id=e="DataTables_Table_"+m.ext._unique++);var p=h.extend(!0,{},m.models.oSettings,{sDestroyWidth:q[0].style.width,sInstance:e,sTableId:e});p.nTable=this,p.oApi=b.internal,p.oInit=g,t.push(p),p.oInstance=1===b.length?b:q.dataTable(),db(g),g.oLanguage&&Ca(g.oLanguage),g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=h.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]),g=Jb(h.extend(!0,{},l),g),F(p.oFeatures,g,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),F(p,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),F(p.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),F(p.oLanguage,g,"fnInfoCallback"),z(p,"aoDrawCallback",g.fnDrawCallback,"user"),z(p,"aoServerParams",g.fnServerParams,"user"),z(p,"aoStateSaveParams",g.fnStateSaveParams,"user"),z(p,"aoStateLoadParams",g.fnStateLoadParams,"user"),z(p,"aoStateLoaded",g.fnStateLoaded,"user"),z(p,"aoRowCallback",g.fnRowCallback,"user"),z(p,"aoRowCreatedCallback",g.fnCreatedRow,"user"),z(p,"aoHeaderCallback",g.fnHeaderCallback,"user"),z(p,"aoFooterCallback",g.fnFooterCallback,"user"),z(p,"aoInitComplete",g.fnInitComplete,"user"),z(p,"aoPreDrawCallback",g.fnPreDrawCallback,"user"),p.rowIdFn=Q(g.rowId),fb(p);var u=p.oClasses;h.extend(u,m.ext.classes,g.oClasses),q.addClass(u.sTable),p.iInitDisplayStart===k&&(p.iInitDisplayStart=g.iDisplayStart,p._iDisplayStart=g.iDisplayStart),null!==g.iDeferLoading&&(p.bDeferLoading=!0,e=h.isArray(g.iDeferLoading),p._iRecordsDisplay=e?g.iDeferLoading[0]:g.iDeferLoading,p._iRecordsTotal=e?g.iDeferLoading[1]:g.iDeferLoading);var v=p.oLanguage;h.extend(!0,v,g.oLanguage),v.sUrl&&(h.ajax({dataType:"json",url:v.sUrl,success:function(a){Ca(a),I(l.oLanguage,a),h.extend(!0,v,a),ga(p)},error:function(){ga(p)}}),n=!0),null===g.asStripeClasses&&(p.asStripeClasses=[u.sStripeOdd,u.sStripeEven]);e=p.asStripeClasses;var x=q.children("tbody").find("tr").eq(0);if(-1!==h.inArray(!0,h.map(e,function(a){return x.hasClass(a)}))&&(h("tbody tr",this).removeClass(e.join(" ")),p.asDestroyStripes=e.slice()),e=[],0!==(t=this.getElementsByTagName("thead")).length&&(da(p.aoHeader,t[0]),e=ra(p)),null===g.aoColumns)for(t=[],j=0,i=e.length;j<i;j++)t.push(null);else t=g.aoColumns;for(j=0,i=t.length;j<i;j++)Da(p,e?e[j]:null);if(hb(p,g.aoColumnDefs,t,function(a,b){ja(p,a,b)}),x.length){var w=function(a,b){return null!==a.getAttribute("data-"+b)?b:null};h(x[0]).children("th, td").each(function(a,b){var c=p.aoColumns[a];if(c.mData===a){var d=w(b,"sort")||w(b,"order"),e=w(b,"filter")||w(b,"search");null===d&&null===e||(c.mData={_:a+".display",sort:null!==d?a+".@data-"+d:k,type:null!==d?a+".@data-"+d:k,filter:null!==e?a+".@data-"+e:k},ja(p,a))}})}var T=p.oFeatures;e=function(){if(g.aaSorting===k){var a=p.aaSorting;for(j=0,i=a.length;j<i;j++)a[j][1]=p.aoColumns[j].asSorting[0]}wa(p),T.bSort&&z(p,"aoDrawCallback",function(){if(p.bSorted){var a=V(p),b={};h.each(a,function(a,c){b[c.src]=c.dir}),r(p,null,"order",[p,a,b]),Hb(p)}}),z(p,"aoDrawCallback",function(){(p.bSorted||"ssp"===y(p)||T.bDeferRender)&&wa(p)},"sc");a=q.children("caption").each(function(){this._captionSide=h(this).css("caption-side")});var b=q.children("thead");if(0===b.length&&(b=h("<thead/>").appendTo(q)),p.nTHead=b[0],0===(b=q.children("tbody")).length&&(b=h("<tbody/>").appendTo(q)),p.nTBody=b[0],0===(b=q.children("tfoot")).length&&0<a.length&&(""!==p.oScroll.sX||""!==p.oScroll.sY)&&(b=h("<tfoot/>").appendTo(q)),0===b.length||0===b.children().length?q.addClass(u.sNoFooter):0<b.length&&(p.nTFoot=b[0],da(p.aoFooter,p.nTFoot)),g.aaData)for(j=0;j<g.aaData.length;j++)M(p,g.aaData[j]);else(p.bDeferLoading||"dom"==y(p))&&ma(p,h(p.nTBody).children("tr"));p.aiDisplay=p.aiDisplayMaster.slice(),!(p.bInitialised=!0)===n&&ga(p)};g.bStateSave?(T.bStateSave=!0,z(p,"aoDrawCallback",xa,"state_save"),Ib(p,g,e)):e()}}),b=null,this},Xa={},Mb=/[\r\n]/g,Aa=/<.*?>/g,Zb=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,$b=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Wa=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,L=function(a){return!a||!0===a||"-"===a},Nb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Ob=function(a,b){return Xa[b]||(Xa[b]=RegExp(Pa(b),"g")),"string"==typeof a&&"."!==b?a.replace(/\./g,"").replace(Xa[b],"."):a},Ya=function(a,b,c){var d="string"==typeof a;return!!L(a)||(b&&d&&(a=Ob(a,b)),c&&d&&(a=a.replace(Wa,"")),!isNaN(parseFloat(a))&&isFinite(a))},Pb=function(a,b,c){return!!L(a)||((L(a)||"string"==typeof a)&&!!Ya(a.replace(Aa,""),b,c)||null)},D=function(a,b,c){var d=[],e=0,f=a.length;if(c!==k)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<f;e++)a[e]&&d.push(a[e][b]);return d},ia=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==k)for(;f<g;f++)a[b[f]][c]&&e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},W=function(a,b){var d,c=[];b===k?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Qb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},qa=function(a){var b;a:{if(!(a.length<2))for(var c=(b=a.slice().sort())[0],d=1,e=b.length;d<e;d++){if(b[d]===c){b=!1;break a}c=b[d]}b=!0}if(b)return a.slice();b=[];e=a.length;var f,g=0;d=0;a:for(;d<e;d++){for(c=a[d],f=0;f<g;f++)if(b[f]===c)continue a;b.push(c),g++}return b};m.util={throttle:function(a,b){var d,e,c=b!==k?b:200;return function(){var b=this,g=+new Date,j=arguments;d&&g<d+c?(clearTimeout(e),e=setTimeout(function(){d=k,a.apply(b,j)},c)):(d=g,a.apply(b,j))}},escapeRegex:function(a){return a.replace($b,"\\$1")}};var A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ba=/\[.*?\]$/,U=/\(\)$/,Pa=m.util.escapeRegex,va=h("<div>")[0],Wb=va.textContent!==k,Yb=/<.*?>/g,Na=m.util.throttle,Rb=[],w=Array.prototype;s=function(a,b){if(!(this instanceof s))return new s(a,b);var c=[],d=function(a){(a=function(a){var b,c,d=m.settings,e=h.map(d,function(a){return a.nTable});return a?a.nTable&&a.oApi?[a]:a.nodeName&&"table"===a.nodeName.toLowerCase()?-1!==(b=h.inArray(a,e))?[d[b]]:null:a&&"function"==typeof a.settings?a.settings().toArray():("string"==typeof a?c=h(a):a instanceof h&&(c=a),c?c.map(function(){return-1!==(b=h.inArray(this,e))?d[b]:null}).toArray():void 0):[]}(a))&&(c=c.concat(a))};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=qa(c),b&&h.merge(this,b),this.selector={rows:null,cols:null,opts:null},s.extend(this,this,Rb)},m.Api=s,h.extend(s.prototype,{any:function(){return 0!==this.count()},concat:w.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new s(b[a],this[a]):null},filter:function(a){var b=[];if(w.filter)b=w.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new s(this.context,b)},flatten:function(){var a=[];return new s(this.context,a.concat.apply(a,this.toArray()))},join:w.join,indexOf:w.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var f,g,j,h,n,m,o,e=[],l=this.context,u=this.selector;for("string"==typeof a&&(d=c,c=b,b=a,a=!1),g=0,j=l.length;g<j;g++){var r=new s(l[g]);if("table"===b)(f=c.call(r,l[g],g))!==k&&e.push(f);else if("columns"===b||"rows"===b)(f=c.call(r,l[g],this[g],g))!==k&&e.push(f);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(o=this[g],"column-rows"===b&&(m=Ba(l[g],u.opts)),h=0,n=o.length;h<n;h++)f=o[h],(f="cell"===b?c.call(r,l[g],f.row,f.column,g,h):c.call(r,l[g],f,g,h,m))!==k&&e.push(f)}return e.length||d?((b=(a=new s(l,a?e.concat.apply([],e):e)).selector).rows=u.rows,b.cols=u.cols,b.opts=u.opts,a):this},lastIndexOf:w.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(w.map)b=w.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new s(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:w.pop,push:w.push,reduce:w.reduce||function(a,b){return gb(this,a,b,0,this.length,1)},reduceRight:w.reduceRight||function(a,b){return gb(this,a,b,this.length-1,-1,-1)},reverse:w.reverse,selector:null,shift:w.shift,slice:function(){return new s(this.context,this)},sort:w.sort,splice:w.splice,toArray:function(){return w.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},unique:function(){return new s(this.context,qa(this))},unshift:w.unshift}),s.extend=function(a,b,c){if(c.length&&b&&(b instanceof s||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=b.apply(a,arguments);return s.extend(d,d,c.methodExt),d}};for(d=0,e=c.length;d<e;d++)b[(f=c[d]).name]="function"==typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,s.extend(a,b[f.name],f.propExt)}},s.register=o=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<d;c++)s.register(a[c],b);else{var g,j,e=a.split("."),f=Rb;for(c=0,d=e.length;c<d;c++){var i;g=(j=-1!==e[c].indexOf("()"))?e[c].replace("()",""):e[c];a:{i=0;for(var n=f.length;i<n;i++)if(f[i].name===g){i=f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i)),c===d-1?i.val=b:f=j?i.methodExt:i.propExt}}},s.registerPlural=u=function(a,b,c){s.register(a,c),s.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof s?a.length?h.isArray(a[0])?new s(a.context,a[0]):a[0]:k:a})},o("tables()",function(a){var b;if(a){b=s;var c=this.context;if("number"==typeof a)a=[c[a]];else{var d=h.map(c,function(a){return a.nTable});a=h(d).filter(a).map(function(){var a=h.inArray(this,d);return c[a]}).toArray()}b=new b(a)}else b=this;return b}),o("table()",function(a){var b=(a=this.tables(a)).context;return b.length?new s(b[0]):a}),u("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)}),u("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)}),u("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)}),u("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)}),u("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)}),o("draw()",function(a){return this.iterator("table",function(b){"page"===a?N(b):("string"==typeof a&&(a="full-hold"!==a),S(b,!1===a))})}),o("page()",function(a){return a===k?this.page.info().page:this.iterator("table",function(b){Sa(b,a)})}),o("page.info()",function(){if(0===this.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,serverSide:"ssp"===y(a)}}),o("page.len()",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:k:this.iterator("table",function(b){Qa(b,a)})});var Sb=function(a,b,c){if(c){var d=new s(a);d.one("draw",function(){c(d.ajax.json())})}if("ssp"==y(a))S(a,b);else{C(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort(),sa(a,[],function(c){na(a);for(var d=0,e=(c=ta(a,c)).length;d<e;d++)M(a,c[d]);S(a,b),C(a,!1)})}};o("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json}),o("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData}),o("ajax.reload()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})}),o("ajax.url()",function(a){var b=this.context;return a===k?0===b.length?k:(b=b[0]).ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource:this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})}),o("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})});var Za=function(a,b,c,d,e){var g,j,i,n,l,m,f=[];for(i=typeof b,b&&"string"!==i&&"function"!==i&&b.length!==k||(b=[b]),i=0,n=b.length;i<n;i++)for(l=0,m=(j=b[i]&&b[i].split&&!b[i].match(/[\[\(:]/)?b[i].split(","):[b[i]]).length;l<m;l++)(g=c("string"==typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&(f=f.concat(g));if((a=x.selector[a]).length)for(i=0,n=a.length;i<n;i++)f=a[i](d,e,f);return qa(f)},$a=function(a){return a||(a={}),a.filter&&a.search===k&&(a.search=a.filter),h.extend({search:"none",order:"current",page:"all"},a)},ab=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;return a.length=0,a},Ba=function(a,b){var c,d,e,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var j=b.search;if(d=b.order,e=b.page,"ssp"==y(a))return"removed"===j?[]:W(0,c.length);if("current"==e)for(c=a._iDisplayStart,d=a.fnDisplayEnd();c<d;c++)f.push(g[c]);else if("current"==d||"applied"==d)f="none"==j?c.slice():"applied"==j?g.slice():h.map(c,function(a){return-1===h.inArray(a,g)?a:null});else if("index"==d||"original"==d)for(c=0,d=a.aoData.length;c<d;c++)"none"==j?f.push(c):(-1===(e=h.inArray(c,g))&&"removed"==j||0<=e&&"applied"==j)&&f.push(c);return f};o("rows()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");b=$a(b);var c=this.iterator("table",function(c){var f,e=b;return Za("row",a,function(a){var b=Nb(a);if(null!==b&&!e)return[b];if(f||(f=Ba(c,e)),null!==b&&-1!==h.inArray(b,f))return[b];if(null===a||a===k||""===a)return f;if("function"==typeof a)return h.map(f,function(b){var e=c.aoData[b];return a(b,e._aData,e.nTr)?b:null});if(b=Qb(ia(c.aoData,f,"nTr")),a.nodeName)return a._DT_RowIndex!==k?[a._DT_RowIndex]:a._DT_CellIndex?[a._DT_CellIndex.row]:(b=h(a).closest("*[data-dt-row]")).length?[b.data("dt-row")]:[];if("string"==typeof a&&"#"===a.charAt(0)){var i=c.aIds[a.replace(/^#/,"")];if(i!==k)return[i.idx]}return h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},c,e)},1);return c.selector.rows=a,c.selector.opts=b,c}),o("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||k},1)}),o("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return ia(a.aoData,b,"_aData")},1)}),u("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)}),u("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){ca(b,c,a)})}),u("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)}),u("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((!0===a?"#":"")+h)}return new s(c,b)}),u("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,d){var g,h,i,n,l,e=b.aoData,f=e[c];for(e.splice(c,1),g=0,h=e.length;g<h;g++)if(l=(i=e[g]).anCells,null!==i.nTr&&(i.nTr._DT_RowIndex=g),null!==l)for(i=0,n=l.length;i<n;i++)l[i]._DT_CellIndex.row=g;oa(b.aiDisplayMaster,c),oa(b.aiDisplay,c),oa(a[d],c,!1),0<b._iRecordsDisplay&&b._iRecordsDisplay--,Ra(b),(c=b.rowIdFn(f._aData))!==k&&delete b.aIds[c]}),this.iterator("table",function(a){for(var c=0,d=a.aoData.length;c<d;c++)a.aoData[c].idx=c}),this}),o("rows.add()",function(a){var b=this.iterator("table",function(b){var c,f,g,h=[];for(f=0,g=a.length;f<g;f++)(c=a[f]).nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(ma(b,c)[0]):h.push(M(b,c));return h},1),c=this.rows(-1);return c.pop(),h.merge(c,b),c}),o("row()",function(a,b){return ab(this.rows(a,b))}),o("row().data()",function(a){var b=this.context;return a===k?b.length&&this.length?b[0].aoData[this[0]]._aData:k:(b[0].aoData[this[0]]._aData=a,ca(b[0],this[0],"data"),this)}),o("row().node()",function(){var a=this.context;return a.length&&this.length&&a[0].aoData[this[0]].nTr||null}),o("row.add()",function(a){a instanceof h&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?ma(b,a)[0]:M(b,a)});return this.row(b[0])});var bb=function(a,b){var c=a.context;c.length&&(c=c[0].aoData[b!==k?b:a[0]])&&c._details&&(c._details.remove(),c._detailsShow=k,c._details=k)},Tb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new s(e),g=e.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<D(g,"_details").length&&(f.on("draw.dt.DT_details",function(a,b){e===b&&f.rows({page:"current"}).eq(0).each(function(a){(a=g[a])._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(e===b)for(var c,d=aa(b),f=0,h=g.length;f<h;f++)(c=g[f])._details&&c._details.children("td[colspan]").attr("colspan",d)}),f.on("destroy.dt.DT_details",function(a,b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&bb(f,c)}))}}};o("row().child()",function(a,b){var c=this.context;if(a===k)return c.length&&this.length?c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)bb(this);else if(c.length&&this.length){var d=c[0],e=(c=c[0].aoData[this[0]],[]),f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&"tr"===a.nodeName.toLowerCase()?e.push(a):(c=h("<tr><td/></tr>").addClass(b),h("td",c).addClass(b).html(a)[0].colSpan=aa(d),e.push(c[0]))};f(a,b),c._details&&c._details.detach(),c._details=h(e),c._detailsShow&&c._details.insertAfter(c.nTr)}return this}),o(["row().child.show()","row().child().show()"],function(){return Tb(this,!0),this}),o(["row().child.hide()","row().child().hide()"],function(){return Tb(this,!1),this}),o(["row().child.remove()","row().child().remove()"],function(){return bb(this),this}),o("row().child.isShown()",function(){var a=this.context;return a.length&&this.length&&a[0].aoData[this[0]]._detailsShow||!1});var bc=/^([^:]+):(name|visIdx|visible)$/,Ub=function(a,b,c,d,e){c=[],d=0;for(var f=e.length;d<f;d++)c.push(B(a,e[d],b));return c};o("columns()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");b=$a(b);var c=this.iterator("table",function(c){var e=a,f=b,g=c.aoColumns,j=D(g,"sName"),i=D(g,"nTh");return Za("column",e,function(a){var b=Nb(a);if(""===a)return W(g.length);if(null!==b)return[0<=b?b:g.length+b];if("function"==typeof a){var e=Ba(c,f);return h.map(g,function(b,f){return a(f,Ub(c,f,0,0,e),i[f])?f:null})}var k="string"==typeof a?a.match(bc):"";if(k)switch(k[2]){case"visIdx":case"visible":if((b=parseInt(k[1],10))<0){var m=h.map(g,function(a,b){return a.bVisible?b:null});return[m[m.length+b]]}return[Z(c,b)];case"name":return h.map(j,function(a,b){return a===k[1]?b:null});default:return[]}return a.nodeName&&a._DT_CellIndex?[a._DT_CellIndex.column]:(b=h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray()).length||!a.nodeName?b:(b=h(a).closest("*[data-dt-column]")).length?[b.data("dt-column")]:[]},c,f)},1);return c.selector.cols=a,c.selector.opts=b,c}),u("columns().header()","column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)}),u("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)}),u("columns().data()","column().data()",function(){return this.iterator("column-rows",Ub,1)}),u("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)}),u("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return ia(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)}),u("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return ia(a.aoData,e,"anCells",b)},1)}),u("columns().visible()","column().visible()",function(a,b){var c=this.iterator("column",function(b,c){if(a===k)return b.aoColumns[c].bVisible;var i,n,l,f=b.aoColumns,g=f[c],j=b.aoData;if(a!==k&&g.bVisible!==a){if(a){var m=h.inArray(!0,D(f,"bVisible"),c+1);for(i=0,n=j.length;i<n;i++)l=j[i].nTr,f=j[i].anCells,l&&l.insertBefore(f[c],f[m]||null)}else h(D(b.aoData,"anCells",c)).detach();g.bVisible=a,ea(b,b.aoHeader),ea(b,b.aoFooter),xa(b)}});return a!==k&&(this.iterator("column",function(c,e){r(c,null,"column-visibility",[c,e,a,b])}),(b===k||b)&&this.columns.adjust()),c}),u("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?$(b,c):c},1)}),o("columns.adjust()",function(){return this.iterator("table",function(a){Y(a)},1)}),o("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return Z(c,b);if("fromData"===a||"toVisible"===a)return $(c,b)}}),o("column()",function(a,b){return ab(this.columns(a,b))}),o("cells()",function(a,b,c){if(h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null)),h.isPlainObject(b)&&(c=b,b=null),null===b||b===k)return this.iterator("table",function(b){var l,m,o,u,s,r,v,d=a,e=$a(c),f=b.aoData,g=Ba(b,e),j=Qb(ia(f,g,"anCells")),i=h([].concat.apply([],j)),n=b.aoColumns.length;return Za("cell",d,function(a){var c="function"==typeof a;if(null===a||a===k||c){for(m=[],o=0,u=g.length;o<u;o++)for(l=g[o],s=0;s<n;s++)r={row:l,column:s},c?(v=f[l],a(r,B(b,l,s),v.anCells?v.anCells[s]:null)&&m.push(r)):m.push(r);return m}return h.isPlainObject(a)?[a]:(c=i.filter(a).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray()).length||!a.nodeName?c:(v=h(a).closest("*[data-dt-row]")).length?[{row:v.data("dt-row"),column:v.data("dt-column")}]:[]},b,e)});var f,g,j,i,n,d=this.columns(b,c),e=this.rows(a,c),l=this.iterator("table",function(a,b){for(f=[],g=0,j=e[b].length;g<j;g++)for(i=0,n=d[b].length;i<n;i++)f.push({row:e[b][g],column:d[b][i]});return f},1);return h.extend(l.selector,{cols:b,rows:a,opts:c}),l}),u("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b])&&a.anCells?a.anCells[c]:k},1)}),o("cells().data()",function(){return this.iterator("cell",function(a,b,c){return B(a,b,c)},1)}),u("cells().cache()","cell().cache()",function(a){return a="search"===a?"_aFilterData":"_aSortData",this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)}),u("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return B(b,c,d,a)},1)}),u("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:$(a,c)}},1)}),u("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){ca(b,c,a,d)})}),o("cell()",function(a,b,c){return ab(this.cells(a,b,c))}),o("cell().data()",function(a){var b=this.context,c=this[0];return a===k?b.length&&c.length?B(b[0],c[0].row,c[0].column):k:(ib(b[0],c[0].row,c[0].column,a),ca(b[0],c[0].row,"data",c[0].column),this)}),o("order()",function(a,b){var c=this.context;return a===k?0!==c.length?c[0].aaSorting:k:("number"==typeof a?a=[[a,b]]:a.length&&!h.isArray(a[0])&&(a=Array.prototype.slice.call(arguments)),this.iterator("table",function(b){b.aaSorting=a.slice()}))}),o("order.listener()",function(a,b,c){return this.iterator("table",function(d){La(d,a,b,c)})}),o("order.fixed()",function(a){if(a)return this.iterator("table",function(b){b.aaSortingFixed=h.extend(!0,{},a)});var b=(b=this.context).length?b[0].aaSortingFixed:k;return h.isArray(b)?{pre:b}:b}),o(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])}),c.aaSorting=e})}),o("search()",function(a,b,c,d){var e=this.context;return a===k?0!==e.length?e[0].oPreviousSearch.sSearch:k:this.iterator("table",function(e){e.oFeatures.bFilter&&fa(e,h.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null!==b&&b,bSmart:null===c||c,bCaseInsensitive:null===d||d}),1)})}),u("columns().search()","column().search()",function(a,b,c,d){return this.iterator("column",function(e,f){var g=e.aoPreSearchCols;if(a===k)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null!==b&&b,bSmart:null===c||c,bCaseInsensitive:null===d||d}),fa(e,e.oPreviousSearch,1))})}),o("state()",function(){return this.context.length?this.context[0].oSavedState:null}),o("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})}),o("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),o("state.save()",function(){return this.iterator("table",function(a){xa(a)})}),m.versionCheck=m.fnVersionCheck=function(a){for(var c,d,b=m.version.split("."),e=0,f=(a=a.split(".")).length;e<f;e++)if((c=parseInt(b[e],10)||0)!==(d=parseInt(a[e],10)||0))return d<c;return!0},m.isDataTable=m.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;return a instanceof m.Api||(h.each(m.settings,function(a,e){var f=e.nScrollHead?h("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?h("table",e.nScrollFoot)[0]:null;e.nTable!==b&&f!==b&&g!==b||(c=!0)}),c)},m.tables=m.fnTables=function(a){var b=!1;h.isPlainObject(a)&&(b=a.api,a=a.visible);var c=h.map(m.settings,function(b){if(!a||a&&h(b.nTable).is(":visible"))return b.nTable});return b?new s(c):c},m.camelToHungarian=I,o("$()",function(a,b){var c=this.rows(b).nodes();c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))}),h.each(["on","one","off"],function(a,b){o(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0]=h.map(a[0].split(/\s/),function(a){return a.match(/\.dt\b/)?a:a+".dt"}).join(" ");var d=h(this.tables().nodes());return d[b].apply(d,a),this})}),o("clear()",function(){return this.iterator("table",function(a){na(a)})}),o("settings()",function(){return new s(this.context,this.context)}),o("init()",function(){var a=this.context;return a.length?a[0].oInit:null}),o("data()",function(){return this.iterator("table",function(a){return D(a.aoData,"_aData")}).flatten()}),o("destroy()",function(a){return a=a||!1,this.iterator("table",function(b){var o,c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),k=(f=h(f),h(b.nTableWrapper)),l=h.map(b.aoData,function(a){return a.nTr});b.bDestroying=!0,r(b,"aoDestroyCallback","destroy",[b]),a||new s(b).columns().visible(!0),k.off(".DT").find(":not(tbody *)").off(".DT"),h(E).off(".DT-"+b.sInstance),e!=g.parentNode&&(i.children("thead").detach(),i.append(g)),j&&e!=j.parentNode&&(i.children("tfoot").detach(),i.append(j)),b.aaSorting=[],b.aaSortingFixed=[],wa(b),h(l).removeClass(b.asStripeClasses.join(" ")),h("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone),f.children().detach(),f.append(l),i[g=a?"remove":"detach"](),k[g](),!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),i.css("width",b.sDestroyWidth).removeClass(d.sTable),(o=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%o])})),-1!==(c=h.inArray(b,m.settings))&&m.settings.splice(c,1)})}),h.each(["column","row","cell"],function(a,b){o(b+"s().every()",function(a){var d=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,n){a.call(e[b](g,"cell"===b?h:d,"cell"===b?d:k),g,h,i,n)})})}),o("i18n()",function(a,b,c){var d=this.context[0];return(a=Q(a)(d.oLanguage))===k&&(a=b),c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:a._),a.replace("%d",c)}),m.version="1.10.16",m.settings=[],m.models={},m.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},m.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},m.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},m.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},m.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},X(m.defaults),m.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},X(m.defaults.column),m.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==y(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==y(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||d<c||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},m.ext=x={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:m.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:m.version},h.extend(x,{afnFiltering:x.search,aTypes:x.type.detect,ofnSearch:x.type.search,oSort:x.type.order,afnSortData:x.order,aoFeatures:x.feature,oApi:x.internal,oStdClasses:x.classes,oPagination:x.pager}),h.extend(m.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Kb=m.ext.pager;h.extend(Kb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(a,b){return[ha(a,b)]},simple_numbers:function(a,b){return["previous",ha(a,b),"next"]},full_numbers:function(a,b){return["first","previous",ha(a,b),"next","last"]},first_last_numbers:function(a,b){return["first",ha(a,b),"last"]},_numbers:ha,numbers_length:7}),h.extend(!0,m.ext.renderer,{pageButton:{_:function(a,b,c,d,e,f){var n,l,s,g=a.oClasses,j=a.oLanguage.oPaginate,i=a.oLanguage.oAria.paginate||{},m=0,o=function(b,d){var k,s,u,r,v=function(b){Sa(a,b.data.action,!0)};for(k=0,s=d.length;k<s;k++)if(r=d[k],h.isArray(r))u=h("<"+(r.DT_el||"div")+"/>").appendTo(b),o(u,r);else{switch(n=null,l="",r){case"ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case"first":n=j.sFirst,l=r+(0<e?"":" "+g.sPageButtonDisabled);break;case"previous":n=j.sPrevious,l=r+(0<e?"":" "+g.sPageButtonDisabled);break;case"next":n=j.sNext,l=r+(e<f-1?"":" "+g.sPageButtonDisabled);break;case"last":n=j.sLast,l=r+(e<f-1?"":" "+g.sPageButtonDisabled);break;default:n=r+1,l=e===r?g.sPageButtonActive:""}null!==n&&(Va(u=h("<a>",{class:g.sPageButton+" "+l,"aria-controls":a.sTableId,"aria-label":i[r],"data-dt-idx":m,tabindex:a.iTabIndex,id:0===c&&"string"==typeof r?a.sTableId+"_"+r:null}).html(n).appendTo(b),{action:r},v),m++)}};try{s=h(b).find(G.activeElement).data("dt-idx")}catch(u){}o(h(b).empty(),d),s!==k&&h(b).find("[data-dt-idx="+s+"]").focus()}}}),h.extend(m.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Ya(a,c)?"num"+c:null},function(a){if(a&&!(a instanceof Date)&&!Zb.test(a))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||L(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Ya(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c,!0)?"html-num-fmt"+c:null},function(a){return L(a)||"string"==typeof a&&-1!==a.indexOf("<")?"html":null}]),h.extend(m.ext.type.search,{html:function(a){return L(a)?a:"string"==typeof a?a.replace(Mb," ").replace(Aa,""):""},string:function(a){return L(a)?a:"string"==typeof a?a.replace(Mb," "):a}});var za=function(a,b,c,d){return 0===a||a&&"-"!==a?(b&&(a=Ob(a,b)),a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,""))),1*a):-1/0};h.extend(x.type.order,{"date-pre":function(a){return Date.parse(a)||-1/0},"html-pre":function(a){return L(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return L(a)?"":"string"==typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:b<a?1:0},"string-desc":function(a,b){return a<b?1:b<a?-1:0}}),cb(""),h.extend(!0,m.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on("order.dt.DT",function(e,f,g,h){a===f&&(e=c.idx,b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass("asc"==h[e]?d.sSortAsc:"desc"==h[e]?d.sSortDesc:c.sSortingClass))})},jqueryui:function(a,b,c,d){h("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b),h(a.nTable).on("order.dt.DT",function(e,f,g,h){a===f&&(e=c.idx,b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass("asc"==h[e]?d.sSortAsc:"desc"==h[e]?d.sSortDesc:c.sSortingClass),b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass("asc"==h[e]?d.sSortJUIAsc:"desc"==h[e]?d.sSortJUIDesc:c.sSortingClassJUI))})}}});var Vb=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};return m.render={number:function(a,b,c,d,e){return{display:function(f){if("number"!=typeof f&&"string"!=typeof f)return f;var g=f<0?"-":"",h=parseFloat(f);return isNaN(h)?Vb(f):(h=h.toFixed(c),f=Math.abs(h),h=parseInt(f,10),f=c?b+(f-h).toFixed(c).substring(2):"",g+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+f+(e||""))}}},text:function(){return{display:Vb}}},h.extend(m.ext.internal,{_fnExternApiFunc:Lb,_fnBuildAjax:sa,_fnAjaxUpdate:kb,_fnAjaxParameters:tb,_fnAjaxUpdateDraw:ub,_fnAjaxDataSrc:ta,_fnAddColumn:Da,_fnColumnOptions:ja,_fnAdjustColumnSizing:Y,_fnVisibleToColumnIndex:Z,_fnColumnIndexToVisible:$,_fnVisbleColumns:aa,_fnGetColumns:la,_fnColumnTypes:Fa,_fnApplyColumnDefs:hb,_fnHungarianMap:X,_fnCamelToHungarian:I,_fnLanguageCompat:Ca,_fnBrowserDetect:fb,_fnAddData:M,_fnAddTr:ma,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==k?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:ib,_fnSplitObjNotation:Ia,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:R,_fnGetDataMaster:Ja,_fnClearTable:na,_fnDeleteIndex:oa,_fnInvalidate:ca,_fnGetRowElements:Ha,_fnCreateTr:Ga,_fnBuildHead:jb,_fnDrawHead:ea,_fnDraw:N,_fnReDraw:S,_fnAddOptionsHtml:mb,_fnDetectHeader:da,_fnGetUniqueThs:ra,_fnFeatureHtmlFilter:ob,_fnFilterComplete:fa,_fnFilterCustom:xb,_fnFilterColumn:wb,_fnFilter:vb,_fnFilterCreateSearch:Oa,_fnEscapeRegex:Pa,_fnFilterData:yb,_fnFeatureHtmlInfo:rb,_fnUpdateInfo:Bb,_fnInfoMacros:Cb,_fnInitialise:ga,_fnInitComplete:ua,_fnLengthChange:Qa,_fnFeatureHtmlLength:nb,_fnFeatureHtmlPaginate:sb,_fnPageChange:Sa,_fnFeatureHtmlProcessing:pb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:qb,_fnScrollDraw:ka,_fnApplyToChildren:H,_fnCalculateColumnWidths:Ea,_fnThrottle:Na,_fnConvertToWidth:Db,_fnGetWidestNode:Eb,_fnGetMaxLenString:Fb,_fnStringToCss:v,_fnSortFlatten:V,_fnSort:lb,_fnSortAria:Hb,_fnSortListener:Ua,_fnSortAttachListener:La,_fnSortingClasses:wa,_fnSortData:Gb,_fnSaveState:xa,_fnLoadState:Ib,_fnSettingsFromNode:ya,_fnLog:J,_fnMap:F,_fnBindAction:Va,_fnCallbackReg:z,_fnCallbackFire:r,_fnLengthOverflow:Ra,_fnRenderer:Ma,_fnDataSource:y,_fnRowAttributes:Ka,_fnCalculateEnd:function(){}}),((h.fn.dataTable=m).$=h).fn.dataTableSettings=m.settings,h.fn.dataTableExt=m.ext,h.fn.DataTable=function(a){return h(this).dataTable(a).api()},h.each(m,function(a,b){h.fn.DataTable[a]=b}),h.fn.dataTable}),function(b){"function"==typeof define&&define.amd?define("datatables.net-bs",["jquery","datatables.net"],function(a){return b(a,window,document)}):"object"==typeof exports?module.exports=function(a,d){return a||(a=window),d&&d.fn.dataTable||(d=require("datatables.net")(a,d).$),b(d,a,a.document)}:b(jQuery,window,document)}(function(b,a,d,m){var f=b.fn.dataTable;return b.extend(!0,f.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),b.extend(f.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm",sProcessing:"dataTables_processing panel panel-default"}),f.ext.renderer.pageButton.bootstrap=function(a,h,r,s,j,n){var e,g,i,o=new f.Api(a),t=a.oClasses,k=a.oLanguage.oPaginate,u=a.oLanguage.oAria.paginate||{},p=0,q=function(d,f){var l,h,i,c,m=function(a){a.preventDefault(),!b(a.currentTarget).hasClass("disabled")&&o.page()!=a.data.action&&o.page(a.data.action).draw("page")};for(l=0,h=f.length;l<h;l++)if(c=f[l],b.isArray(c))q(d,c);else{switch(g=e="",c){case"ellipsis":e="&#x2026;",g="disabled";break;case"first":e=k.sFirst,g=c+(0<j?"":" disabled");break;case"previous":e=k.sPrevious,g=c+(0<j?"":" disabled");break;case"next":e=k.sNext,g=c+(j<n-1?"":" disabled");break;case"last":e=k.sLast,g=c+(j<n-1?"":" disabled");break;default:e=c+1,g=j===c?"active":""}e&&(i=b("<li>",{class:t.sPageButton+" "+g,id:0===r&&"string"==typeof c?a.sTableId+"_"+c:null}).append(b("<a>",{href:"#","aria-controls":a.sTableId,"aria-label":u[c],"data-dt-idx":p,tabindex:a.iTabIndex}).html(e)).appendTo(d),a.oApi._fnBindAction(i,{action:c},m),p++)}};try{i=b(h).find(d.activeElement).data("dt-idx")}catch(v){}q(b(h).empty().html('<ul class="pagination"/>').children("ul"),s),i!==m&&b(h).find("[data-dt-idx="+i+"]").focus()},f}),function(d){"function"==typeof define&&define.amd?define("datatables.net-buttons",["jquery","datatables.net"],function(n){return d(n,window,document)}):"object"==typeof exports?module.exports=function(n,o){return n||(n=window),o&&o.fn.dataTable||(o=require("datatables.net")(n,o).$),d(o,n,n.document)}:d(jQuery,window,document)}(function(d,n,o,l){var q,i=d.fn.dataTable,w=0,x=0,j=i.ext.buttons,m=function(a,b){void 0===b&&(b={}),!0===b&&(b={}),d.isArray(b)&&(b={buttons:b}),this.c=d.extend(!0,{},m.defaults,b),b.buttons&&(this.c.buttons=b.buttons),this.s={dt:new i.Api(a),buttons:[],listenKeys:"",namespace:"dtb"+w++},this.dom={container:d("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};d.extend(m.prototype,{action:function(a,b){var c=this._nodeToButton(a);return b===l?c.conf.action:(c.conf.action=b,this)},active:function(a,b){var c=this._nodeToButton(a),e=this.c.dom.button.active;c=d(c.node);return b===l?c.hasClass(e):(c.toggleClass(e,b===l||b),this)},add:function(a,b){var c=this.s.buttons;if("string"==typeof b){for(var e=b.split("-"),d=(c=this.s,0),h=e.length-1;d<h;d++)c=c.buttons[1*e[d]];c=c.buttons,b=1*e[e.length-1]}return this._expandButton(c,a,!1,b),this._draw(),this},container:function(){return this.dom.container},disable:function(a){return a=this._nodeToButton(a),d(a.node).addClass(this.c.dom.button.disabled),this},destroy:function(){d("body").off("keyup."+this.s.namespace);var b,c,a=this.s.buttons.slice();for(b=0,c=a.length;b<c;b++)this.remove(a[b].node);for(this.dom.container.remove(),b=0,c=(a=this.s.dt.settings()[0]).length;b<c;b++)if(a.inst===this){a.splice(b,1);break}return this},enable:function(a,b){if(!1===b)return this.disable(a);var c=this._nodeToButton(a);return d(c.node).removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(a){return a=this._nodeToButton(a),d(a.node)},processing:function(a,b){var c=this._nodeToButton(a);return b===l?d(c.node).hasClass("processing"):(d(c.node).toggleClass("processing",b),this)},remove:function(a){var b=this._nodeToButton(a),c=this._nodeToHost(a),e=this.s.dt;if(b.buttons.length)for(var g=b.buttons.length-1;0<=g;g--)this.remove(b.buttons[g].node);return b.conf.destroy&&b.conf.destroy.call(e.button(a),e,d(a),b.conf),this._removeKey(b.conf),d(b.node).remove(),a=d.inArray(b,c),c.splice(a,1),this},text:function(a,b){var c=this._nodeToButton(a),e=this.c.dom.collection.buttonLiner,g=(e=c.inCollection&&e&&e.tag?e.tag:this.c.dom.buttonLiner.tag,this.s.dt),h=d(c.node),f=function(a){return"function"==typeof a?a(g,h,c.conf):a};return b===l?f(c.conf.text):(c.conf.text=b,e?h.children(e).html(f(b)):h.html(f(b)),this)},_constructor:function(){var a=this,b=this.s.dt,c=b.settings()[0],e=this.c.buttons;c._buttons||(c._buttons=[]),c._buttons.push({inst:this,name:this.c.name});c=0;for(var g=e.length;c<g;c++)this.add(e[c]);b.on("destroy",function(){a.destroy()}),d("body").on("keyup."+this.s.namespace,function(b){if(!o.activeElement||o.activeElement===o.body){var c=String.fromCharCode(b.keyCode).toLowerCase();-1!==a.s.listenKeys.toLowerCase().indexOf(c)&&a._keypress(c,b)}})},_addKey:function(a){a.key&&(this.s.listenKeys+=d.isPlainObject(a.key)?a.key.key:a.key)},_draw:function(a,b){a||(a=this.dom.container,b=this.s.buttons),a.children().detach();for(var c=0,e=b.length;c<e;c++)a.append(b[c].inserter),a.append(" "),b[c].buttons&&b[c].buttons.length&&this._draw(b[c].collection,b[c].buttons)},_expandButton:function(a,b,c,e){for(var g=this.s.dt,f=0,r=(b=d.isArray(b)?b:[b]).length;f<r;f++){var k=this._resolveExtends(b[f]);if(k)if(d.isArray(k))this._expandButton(a,k,c,e);else{var p=this._buildButton(k,c);if(p){if(e!==l?(a.splice(e,0,p),e++):a.push(p),p.conf.buttons){var t=this.c.dom.collection;p.collection=d("<"+t.tag+"/>").addClass(t.className).attr("role","menu"),p.conf._collection=p.collection,this._expandButton(p.buttons,p.conf.buttons,!0,e)}k.init&&k.init.call(g.button(p.node),g,d(p.node),k),0}}}},_buildButton:function(a,b){var c=this.c.dom.button,e=this.c.dom.buttonLiner,g=this.c.dom.collection,h=this.s.dt,f=function(b){return"function"==typeof b?b(h,k,a):b};if(b&&g.button&&(c=g.button),b&&g.buttonLiner&&(e=g.buttonLiner),a.available&&!a.available(h,a))return!1;var r=function(a,b,c,e){e.action.call(b.button(c),a,b,c,e),d(b.table().node()).triggerHandler("buttons-action.dt",[b.button(c),b,c,e])},k=d("<"+c.tag+"/>").addClass(c.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(b){b.preventDefault(),!k.hasClass(c.disabled)&&a.action&&r(b,h,k,a),k.blur()}).on("keyup.dtb",function(b){13===b.keyCode&&!k.hasClass(c.disabled)&&a.action&&r(b,h,k,a)});return"a"===c.tag.toLowerCase()&&k.attr("href","#"),e.tag?(g=d("<"+e.tag+"/>").html(f(a.text)).addClass(e.className),"a"===e.tag.toLowerCase()&&g.attr("href","#"),k.append(g)):k.html(f(a.text)),!1===a.enabled&&k.addClass(c.disabled),a.className&&k.addClass(a.className),a.titleAttr&&k.attr("title",f(a.titleAttr)),a.namespace||(a.namespace=".dt-button-"+x++),e=(e=this.c.dom.buttonContainer)&&e.tag?d("<"+e.tag+"/>").addClass(e.className).append(k):k,this._addKey(a),{conf:a,node:k.get(0),inserter:e,buttons:[],inCollection:b,collection:null}},_nodeToButton:function(a,b){b||(b=this.s.buttons);for(var c=0,e=b.length;c<e;c++){if(b[c].node===a)return b[c];if(b[c].buttons.length){var d=this._nodeToButton(a,b[c].buttons);if(d)return d}}},_nodeToHost:function(a,b){b||(b=this.s.buttons);for(var c=0,e=b.length;c<e;c++){if(b[c].node===a)return b;if(b[c].buttons.length){var d=this._nodeToHost(a,b[c].buttons);if(d)return d}}},_keypress:function(a,b){var c=function(e){for(var g=0,h=e.length;g<h;g++){var f=e[g].conf,r=e[g].node;f.key&&(f.key===a?d(r).click():!d.isPlainObject(f.key)||f.key.key!==a||f.key.shiftKey&&!b.shiftKey||f.key.altKey&&!b.altKey||f.key.ctrlKey&&!b.ctrlKey||(!f.key.metaKey||b.metaKey)&&d(r).click()),e[g].buttons.length&&c(e[g].buttons)}};c(this.s.buttons)},_removeKey:function(a){if(a.key){var b=d.isPlainObject(a.key)?a.key.key:a.key;a=this.s.listenKeys.split(""),b=d.inArray(b,a);a.splice(b,1),this.s.listenKeys=a.join("")}},_resolveExtends:function(a){var c,e,b=this.s.dt,g=function(c){for(var e=0;!d.isPlainObject(c)&&!d.isArray(c);){if(c===l)return;if("function"==typeof c){if(!(c=c(b,a)))return!1}else if("string"==typeof c){if(!j[c])throw"Unknown button type: "+c;c=j[c]}if(30<++e)throw"Buttons: Too many iterations"}return d.isArray(c)?c:d.extend({},c)};for(a=g(a);a&&a.extend;){if(!j[a.extend])throw"Cannot extend unknown button type: "+a.extend;var h=g(j[a.extend]);if(d.isArray(h))return h;if(!h)return!1;c=h.className,a=d.extend({},h,a),c&&a.className!==c&&(a.className=c+" "+a.className);var f=a.postfixButtons;if(f){for(a.buttons||(a.buttons=[]),c=0,e=f.length;c<e;c++)a.buttons.push(f[c]);a.postfixButtons=null}if(f=a.prefixButtons){for(a.buttons||(a.buttons=[]),c=0,e=f.length;c<e;c++)a.buttons.splice(c,0,f[c]);a.prefixButtons=null}a.extend=h.extend}return a}}),m.background=function(a,b,c){c===l&&(c=400),a?d("<div/>").addClass(b).css("display","none").appendTo("body").fadeIn(c):d("body > div."+b).fadeOut(c,function(){d(this).removeClass(b).remove()})},m.instanceSelector=function(a,b){if(!a)return d.map(b,function(a){return a.inst});var c=[],e=d.map(b,function(a){return a.name}),g=function(a){if(d.isArray(a))for(var f=0,r=a.length;f<r;f++)g(a[f]);else"string"==typeof a?-1!==a.indexOf(",")?g(a.split(",")):-1!==(a=d.inArray(d.trim(a),e))&&c.push(b[a].inst):"number"==typeof a&&c.push(b[a].inst)};return g(a),c},m.buttonSelector=function(a,b){for(var c=[],e=function(a,b,c){for(var d,g,f=0,h=b.length;f<h;f++)(d=b[f])&&(g=c!==l?c+f:f+"",a.push({node:d.node,name:d.conf.name,idx:g}),d.buttons&&e(a,d.buttons,g+"-"))},g=function(a,b){var f,h,i=[];if(e(i,b.s.buttons),f=d.map(i,function(a){return a.node}),d.isArray(a)||a instanceof d)for(f=0,h=a.length;f<h;f++)g(a[f],b);else if(null===a||a===l||"*"===a)for(f=0,h=i.length;f<h;f++)c.push({inst:b,node:i[f].node});else if("number"==typeof a)c.push({inst:b,node:b.s.buttons[a].node});else if("string"==typeof a)if(-1!==a.indexOf(","))for(f=0,h=(i=a.split(",")).length;f<h;f++)g(d.trim(i[f]),b);else if(a.match(/^\d+(\-\d+)*$/))f=d.map(i,function(a){return a.idx}),c.push({inst:b,node:i[d.inArray(a,f)].node});else if(-1!==a.indexOf(":name")){var j=a.replace(":name","");for(f=0,h=i.length;f<h;f++)i[f].name===j&&c.push({inst:b,node:i[f].node})}else d(f).filter(a).each(function(){c.push({inst:b,node:this})});else"object"==typeof a&&a.nodeName&&(-1!==(i=d.inArray(a,f))&&c.push({inst:b,node:f[i]}))},h=0,f=a.length;h<f;h++)g(b,a[h]);return c},m.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},m.version="1.4.2",d.extend(j,{collection:{text:function(a){return a.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(a,b,c,e){a=c.offset();var g=d(b.table().container()),h=!1;d("div.dt-button-background").length&&(h=d(".dt-button-collection").offset(),d("body").trigger("click.dtb-collection")),e._collection.addClass(e.collectionLayout).css("display","none").appendTo("body").fadeIn(e.fade);var f=e._collection.css("position");h&&"absolute"===f?e._collection.css({top:h.top,left:h.left}):"absolute"===f?(e._collection.css({top:a.top+c.outerHeight(),left:a.left}),h=g.offset().top+g.height(),c=a.top+c.outerHeight()+e._collection.outerHeight()-h,h=a.top-e._collection.outerHeight(),(h=g.offset().top-h)<c&&e._collection.css("top",a.top-e._collection.outerHeight()-5),c=a.left+e._collection.outerWidth(),(g=g.offset().left+g.width())<c&&e._collection.css("left",a.left-(c-g))):((a=e._collection.height()/2)>d(n).height()/2&&(a=d(n).height()/2),e._collection.css("marginTop",-1*a)),e.background&&m.background(!0,e.backgroundClassName,e.fade),setTimeout(function(){d("div.dt-button-background").on("click.dtb-collection",function(){}),d("body").on("click.dtb-collection",function(a){var c=d.fn.addBack?"addBack":"andSelf";d(a.target).parents()[c]().filter(e._collection).length||(e._collection.fadeOut(e.fade,function(){e._collection.detach()}),d("div.dt-button-background").off("click.dtb-collection"),m.background(!1,e.backgroundClassName,e.fade),d("body").off("click.dtb-collection"),b.off("buttons-action.b-internal"))})},10),e.autoClose&&b.on("buttons-action.b-internal",function(){d("div.dt-button-background").click()})},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(a,b){return j.copyHtml5?"copyHtml5":j.copyFlash&&j.copyFlash.available(a,b)?"copyFlash":void 0},csv:function(a,b){return j.csvHtml5&&j.csvHtml5.available(a,b)?"csvHtml5":j.csvFlash&&j.csvFlash.available(a,b)?"csvFlash":void 0},excel:function(a,b){return j.excelHtml5&&j.excelHtml5.available(a,b)?"excelHtml5":j.excelFlash&&j.excelFlash.available(a,b)?"excelFlash":void 0},pdf:function(a,b){return j.pdfHtml5&&j.pdfHtml5.available(a,b)?"pdfHtml5":j.pdfFlash&&j.pdfFlash.available(a,b)?"pdfFlash":void 0},pageLength:function(a){a=a.settings()[0].aLengthMenu;var b=d.isArray(a[0])?a[0]:a,c=d.isArray(a[0])?a[1]:a,e=function(a){return a.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},a.page.len())};return{extend:"collection",text:e,className:"buttons-page-length",autoClose:!0,buttons:d.map(b,function(a,b){return{text:c[b],className:"button-page-length",action:function(b,c){c.page.len(a).draw()},init:function(b,c,d){var e=this;c=function(){e.active(b.page.len()===a)};b.on("length.dt"+d.namespace,c),c()},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}),init:function(a,b,c){var d=this;a.on("length.dt"+c.namespace,function(){d.text(e(a))})},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}}),i.Api.register("buttons()",function(a,b){b===l&&(b=a,a=l),this.selector.buttonGroup=a;var c=this.iterator(!0,"table",function(c){if(c._buttons)return m.buttonSelector(m.instanceSelector(a,c._buttons),b)},!0);return c._groupSelector=a,c}),i.Api.register("button()",function(a,b){var c=this.buttons(a,b);return 1<c.length&&c.splice(1,c.length),c}),i.Api.registerPlural("buttons().active()","button().active()",function(a){return a===l?this.map(function(a){return a.inst.active(a.node)}):this.each(function(b){b.inst.active(b.node,a)})}),i.Api.registerPlural("buttons().action()","button().action()",function(a){return a===l?this.map(function(a){return a.inst.action(a.node)}):this.each(function(b){b.inst.action(b.node,a)})}),i.Api.register(["buttons().enable()","button().enable()"],function(a){return this.each(function(b){b.inst.enable(b.node,a)})}),i.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(a){a.inst.disable(a.node)})}),i.Api.registerPlural("buttons().nodes()","button().node()",function(){var a=d();return d(this.each(function(b){a=a.add(b.inst.node(b.node))})),a}),i.Api.registerPlural("buttons().processing()","button().processing()",function(a){return a===l?this.map(function(a){return a.inst.processing(a.node)}):this.each(function(b){b.inst.processing(b.node,a)})}),i.Api.registerPlural("buttons().text()","button().text()",function(a){return a===l?this.map(function(a){return a.inst.text(a.node)}):this.each(function(b){b.inst.text(b.node,a)})}),i.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(a){a.inst.node(a.node).trigger("click")})}),i.Api.registerPlural("buttons().containers()","buttons().container()",function(){var a=d(),b=this._groupSelector;return this.iterator(!0,"table",function(c){if(c._buttons)for(var d=0,g=(c=m.instanceSelector(b,c._buttons)).length;d<g;d++)a=a.add(c[d].container())}),a}),i.Api.register("button().add()",function(a,b){var c=this.context;return c.length&&((c=m.instanceSelector(this._groupSelector,c[0]._buttons)).length&&c[0].add(b,a)),this.button(this._groupSelector,a)}),i.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(a){a.destroy()}),this}),i.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(a){a.inst.remove(a.node)}),this}),i.Api.register("buttons.info()",function(a,b,c){var e=this;return!1===a?(d("#datatables_buttons_info").fadeOut(function(){d(this).remove()}),clearTimeout(q),q=null):(q&&clearTimeout(q),d("#datatables_buttons_info").length&&d("#datatables_buttons_info").remove(),d('<div id="datatables_buttons_info" class="dt-button-info"/>').html(a?"<h2>"+a+"</h2>":"").append(d("<div/>")["string"==typeof b?"html":"append"](b)).css("display","none").appendTo("body").fadeIn(),c!==l&&0!==c&&(q=setTimeout(function(){e.buttons.info(!1)},c))),this}),i.Api.register("buttons.exportData()",function(a){if(this.context.length){for(var b=new i.Api(this.context[0]),c=d.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(a){return e(a)},footer:function(a){return e(a)},body:function(a){return e(a)}}},a),e=function(a){return"string"!=typeof a||(a=a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),c.stripHtml&&(a=a.replace(/<[^>]*>/g,"")),c.trim&&(a=a.replace(/^\s+|\s+$/g,"")),c.stripNewlines&&(a=a.replace(/\n/g," ")),c.decodeEntities&&(u.innerHTML=a,a=u.value)),a},g=(a=b.columns(c.columns).indexes().map(function(a){var d=b.column(a).header();return c.format.header(d.innerHTML,a,d)}).toArray(),b.table().footer()?b.columns(c.columns).indexes().map(function(a){var d=b.column(a).footer();return c.format.footer(d?d.innerHTML:"",a,d)}).toArray():null),h=b.rows(c.rows,c.modifier).indexes().toArray(),f=(h=(f=b.cells(h,c.columns)).render(c.orthogonal).toArray(),f.nodes().toArray()),j=a.length,k=0<j?h.length/j:0,l=Array(k),m=0,n=0;n<k;n++){for(var o=Array(j),q=0;q<j;q++)o[q]=c.format.body(h[m],n,q,f[m]),m++;l[n]=o}return{header:a,footer:g,body:l}}}),i.Api.register("buttons.exportInfo()",function(a){var b;a||(a={});var c=a;return"function"==typeof(b="*"===c.filename&&"*"!==c.title&&c.title!==l?c.title:c.filename)&&(b=b()),b===l||null===b?b=null:(-1!==b.indexOf("*")&&(b=d.trim(b.replace("*",d("title").text()))),b=b.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""),(c=s(c.extension))||(c=""),b+=c),{filename:b,title:c=null===(c=s(a.title))?null:-1!==c.indexOf("*")?c.replace("*",d("title").text()||"Exported data"):c,messageTop:v(this,a.messageTop||a.message,"top"),messageBottom:v(this,a.messageBottom,"bottom")}});var s=function(a){return null===a||a===l?null:"function"==typeof a?a():a},v=function(a,b,c){return null===(b=s(b))?null:(a=d("caption",a.table().container()).eq(0),"*"===b?a.css("caption-side")!==c?null:a.length?a.text():"":b)},u=d("<textarea/>")[0];return d.fn.dataTable.Buttons=m,d.fn.DataTable.Buttons=m,d(o).on("init.dt plugin-init.dt",function(a,b){if("dt"===a.namespace){var c=b.oInit.buttons||i.defaults.buttons;c&&!b._buttons&&new m(b,c).container()}}),i.ext.feature.push({fnInit:function(a){var b=(a=new i.Api(a)).init().buttons||i.defaults.buttons;return new m(a,b).container()},cFeature:"B"}),m}),function(g){"function"==typeof define&&define.amd?define("datatables.net-buttons-colvis",["jquery","datatables.net","datatables.net-buttons"],function(d){return g(d,window,document)}):"object"==typeof exports?module.exports=function(d,e){return d||(d=window),e&&e.fn.dataTable||(e=require("datatables.net")(d,e).$),e.fn.dataTable.Buttons||require("datatables.net-buttons")(d,e),g(e,d,d.document)}:g(jQuery,window,document)}(function(g,d,e,h){return d=g.fn.dataTable,g.extend(d.ext.buttons,{colvis:function(b,a){return{extend:"collection",text:function(a){return a.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:a.columns,columnText:a.columnText}]}},columnsToggle:function(b,a){return b.columns(a.columns).indexes().map(function(b){return{extend:"columnToggle",columns:b,columnText:a.columnText}}).toArray()},columnToggle:function(b,a){return{extend:"columnVisibility",columns:a.columns,columnText:a.columnText}},columnsVisibility:function(b,a){return b.columns(a.columns).indexes().map(function(b){return{extend:"columnVisibility",columns:b,visibility:a.visibility,columnText:a.columnText}}).toArray()},columnVisibility:{columns:h,text:function(b,a,c){return c._columnText(b,c)},className:"buttons-columnVisibility",action:function(b,a,c,f){a=(b=a.columns(f.columns)).visible(),b.visible(f.visibility!==h?f.visibility:!(a.length&&a[0]))},init:function(b,a,c){var f=this;b.on("column-visibility.dt"+c.namespace,function(a,d){!d.bDestroying&&d.nTable==b.settings()[0].nTable&&f.active(b.column(c.columns).visible())}).on("column-reorder.dt"+c.namespace,function(a,d,e){1===b.columns(c.columns).count()&&("number"==typeof c.columns&&(c.columns=e.mapping[c.columns]),a=b.column(c.columns),f.text(c._columnText(b,c)),f.active(a.visible()))}),this.active(b.column(c.columns).visible())},destroy:function(b,a,c){b.off("column-visibility.dt"+c.namespace).off("column-reorder.dt"+c.namespace)},_columnText:function(b,a){var c=b.column(a.columns).index(),f=b.settings()[0].aoColumns[c].sTitle.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");return a.columnText?a.columnText(b,c,f):f}},colvisRestore:{className:"buttons-colvisRestore",text:function(b){return b.i18n("buttons.colvisRestore","Restore visibility")},init:function(b,a,c){c._visOriginal=b.columns().indexes().map(function(a){return b.column(a).visible()}).toArray()},action:function(b,a,c,d){a.columns().every(function(b){b=a.colReorder&&a.colReorder.transpose?a.colReorder.transpose(b,"toOriginal"):b,this.visible(d._visOriginal[b])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(b,a,c,d){a.columns(d.show).visible(!0,!1),a.columns(d.hide).visible(!1,!1),a.columns.adjust()},show:[],hide:[]}}),d.Buttons}),function(h){"function"==typeof define&&define.amd?define("datatables.net-buttons-flash",["jquery","datatables.net","datatables.net-buttons"],function(j){return h(j,window,document)}):"object"==typeof exports?module.exports=function(j,l){return j||(j=window),l&&l.fn.dataTable||(l=require("datatables.net")(j,l).$),l.fn.dataTable.Buttons||require("datatables.net-buttons")(j,l),h(l,j,j.document)}:h(jQuery,window,document)}(function(h,j,l,p){function v(a){for(var b="";0<=a;)b=String.fromCharCode(a%26+65)+b,a=Math.floor(a/26)-1;return b}function o(a,b,d){var c=a.createElement(b);return d&&(d.attr&&h(c).attr(d.attr),d.children&&h.each(d.children,function(a,b){c.appendChild(b)}),null!==d.text&&d.text!==p&&c.appendChild(a.createTextNode(d.text))),c}function B(a,b){var c,d=a.header[b].length;a.footer&&a.footer[b].length>d&&(d=a.footer[b].length);for(var e=0,f=a.body.length;e<f;e++)if(d<(c=-1!==(c=null!==(c=a.body[e][b])&&c!==p?c.toString():"").indexOf("\n")?((c=c.split("\n")).sort(function(a,b){return b.length-a.length}),c[0].length):c.length)&&(d=c),40<d)return 52;return 6<(d*=1.3)?d:6}function w(a){q===p&&(q=-1===u.serializeToString(h.parseXML(m["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),h.each(a,function(b,d){if(h.isPlainObject(d))w(d);else{if(q){var e,f,c=d.childNodes[0],i=[];for(e=c.attributes.length-1;0<=e;e--){f=c.attributes[e].nodeName;var k=c.attributes[e].nodeValue;-1!==f.indexOf(":")&&(i.push({name:f,value:k}),c.removeAttribute(f))}for(e=0,f=i.length;e<f;e++)(k=d.createAttribute(i[e].name.replace(":","_dt_b_namespace_token_"))).value=i[e].value,c.setAttributeNode(k)}c=u.serializeToString(d),q&&(-1===c.indexOf("<?xml")&&(c='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+c),c=c.replace(/_dt_b_namespace_token_/g,":")),c=c.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),a[b]=c}})}var g=h.fn.dataTable,i={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){return"string"==typeof a&&(a=l.getElementById(a)),a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a),this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(RegExp("\\s*"+a+"\\s*"))}),a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,d){(a=this.clients[a])&&a.receiveEvent(b,d)},log:function(a){console.log("Flash: "+a)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};for(""!==a.style.width&&(b.width=a.style.width.replace("px","")),""!==a.style.height&&(b.height=a.style.height.replace("px",""));a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b},Client:function(a){this.handlers={},this.id=i.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,i.register(this.id,this),a&&this.glue(a)}};i.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,sheetName:"",glue:function(a,b){this.domElement=i.$(a);var d=99;this.domElement.style.zIndex&&(d=parseInt(this.domElement.style.zIndex,10)+1);var c=i.getDOMObjectPosition(this.domElement);this.div=l.createElement("div");var e=this.div.style;e.position="absolute",e.left="0px",e.top="0px",e.width=c.width+"px",e.height=c.height+"px",e.zIndex=d,void 0!==b&&""!==b&&(this.div.title=b),0!==c.width&&0!==c.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(c.width,c.height).replace(/&/g,"&amp;"))},positionElement:function(){var a=i.getDOMObjectPosition(this.domElement),b=this.div.style;b.position="absolute",b.width=a.width+"px",b.height=a.height+"px",0!==a.width&&0!==a.height&&(this.sized=!0,(b=this.div.childNodes[0]).width=a.width,b.height=a.height)},getHTML:function(a,b){var d="",c="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/))d=d+'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+(location.href.match(/^https/i)?"https://":"http://")+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+i.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+c+'"/><param name="wmode" value="transparent"/></object>';else d+='<embed id="'+this.movieId+'" src="'+i.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+c+'" wmode="transparent" />';return d},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){var a=this;this.domElement&&this.div&&(h(this.div).remove(),this.div=this.domElement=null,h.each(i.clients,function(b,d){d===a&&delete i.clients[b]}))},reposition:function(a){if(a&&((this.domElement=i.$(a))||this.hide()),this.domElement&&this.div){a=i.getDOMObjectPosition(this.domElement);var b=this.div.style;b.left=a.left+"px",b.top=a.top+"px"}},clearText:function(){this.clipText="",this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a,this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a,this.ready&&this.movie.setText(a)},setFileName:function(a){this.fileName=a,this.ready&&this.movie.setFileName(a)},setSheetData:function(a){this.ready&&this.movie.setSheetData(JSON.stringify(a))},setAction:function(a){this.action=a,this.ready&&this.movie.setAction(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a,this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){var d;switch(a=a.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=l.getElementById(this.movieId),!this.movie)return d=this,void setTimeout(function(){d.receiveEvent("load",null)},1);if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return d=this,setTimeout(function(){d.receiveEvent("load",null)},100),void(this.ready=!0);this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var c=0,e=this.handlers[a].length;c<e;c++){var f=this.handlers[a][c];"function"==typeof f?f(this,b):"object"==typeof f&&2==f.length?f[0][f[1]](this,b):"string"==typeof f&&j[f](this,b)}}},i.hasFlash=function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(a){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==p&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},j.ZeroClipboard_TableTools=i;var q,x=function(a,b){b.attr("id"),b.parents("html").length?a.glue(b[0],""):setTimeout(function(){x(a,b)},500)},s=function(a,b){var d=b.match(/[\s\S]{1,8192}/g)||[];a.clearText();for(var c=0,e=d.length;c<e;c++)a.appendText(d[c])},y=function(a){return a.newline?a.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},z=function(a,b){for(var d=y(b),c=a.buttons.exportData(b.exportOptions),e=b.fieldBoundary,f=b.fieldSeparator,h=RegExp(e,"g"),i=b.escapeChar!==p?b.escapeChar:"\\",j=function(a){for(var b="",c=0,d=a.length;c<d;c++)0<c&&(b+=f),b+=e?e+(""+a[c]).replace(h,i+e)+e:a[c];return b},l=b.header?j(c.header)+d:"",o=b.footer&&c.footer?d+j(c.footer):"",n=[],g=0,m=c.body.length;g<m;g++)n.push(j(c.body[g]));return{str:l+n.join(d)+o,rows:n.length}},t={available:function(){return i.hasFlash()},init:function(a,b,d){i.moviePath=g.Buttons.swfPath;var c=new i.Client;c.setHandCursor(!0),c.addEventListener("mouseDown",function(){d._fromFlash=!0,a.button(b[0]).trigger(),d._fromFlash=!1}),x(c,b),d._flash=c},destroy:function(a,b,d){d._flash.destroy()},fieldSeparator:",",fieldBoundary:'"',exportOptions:{},title:"*",messageTop:"*",messageBottom:"*",filename:"*",extension:".csv",header:!0,footer:!1},u="",m=(u=void 0===j.XMLSerializer?new function(){this.serializeToString=function(a){return a.xml}}:new XMLSerializer,{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="61"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'}),A=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(a){return a/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(a){return a/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\([\d,]+\)$/,style:61,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^[\d,]+$/,style:63},{match:/^[\d,]+\.\d{2}$/,style:64}];return g.Buttons.swfPath="//cdn.datatables.net/buttons/"+g.Buttons.version+"/swf/flashExport.swf",g.Api.register("buttons.resize()",function(){h.each(i.clients,function(a,b){b.domElement!==p&&b.domElement.parentNode&&b.positionElement()})}),g.ext.buttons.copyFlash=h.extend({},t,{className:"buttons-copy buttons-flash",text:function(a){return a.i18n("buttons.copy","Copy")},action:function(a,b,d,c){if(c._fromFlash){this.processing(!0);a=c._flash;var e=z(b,c),f=(d=b.buttons.exportInfo(c),y(c));e=e.str;d.title&&(e=d.title+f+f+e),d.messageTop&&(e=d.messageTop+f+f+e),d.messageBottom&&(e=e+f+f+d.messageBottom),c.customize&&(e=c.customize(e,c)),a.setAction("copy"),s(a,e),this.processing(!1),b.buttons.info(b.i18n("buttons.copyTitle","Copy to clipboard"),b.i18n("buttons.copySuccess",{_:"Copied %d rows to clipboard",1:"Copied 1 row to clipboard"},data.rows),3e3)}},fieldSeparator:"\t",fieldBoundary:""}),g.ext.buttons.csvFlash=h.extend({},t,{className:"buttons-csv buttons-flash",text:function(a){return a.i18n("buttons.csv","CSV")},action:function(a,b,d,c){a=c._flash,b=z(b,c),b=c.customize?c.customize(b.str,c):b.str,a.setAction("csv"),a.setFileName(_filename(c)),s(a,b)},escapeChar:'"'}),g.ext.buttons.excelFlash=h.extend({},t,{className:"buttons-excel buttons-flash",text:function(a){return a.i18n("buttons.excel","Excel")},action:function(a,b,d,c){this.processing(!0);a=c._flash;var j,l,e=0,f=h.parseXML(m["xl/worksheets/sheet1.xml"]),i=f.getElementsByTagName("sheetData")[0],k=(d={_rels:{".rels":h.parseXML(m["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":h.parseXML(m["xl/_rels/workbook.xml.rels"])},"workbook.xml":h.parseXML(m["xl/workbook.xml"]),"styles.xml":h.parseXML(m["xl/styles.xml"]),worksheets:{"sheet1.xml":f}},"[Content_Types].xml":h.parseXML(m["[Content_Types].xml"])},b.buttons.exportData(c.exportOptions)),g=function(a){l=o(f,"row",{attr:{r:j=e+1}});for(var b=0,c=a.length;b<c;b++){var d=v(b)+""+j,g=null;if(null!==a[b]&&a[b]!==p&&""!==a[b]){a[b]=h.trim(a[b]);for(var k=0,n=A.length;k<n;k++){var m=A[k];if(a[b].match&&!a[b].match(/^0\d+/)&&a[b].match(m.match)){g=a[b].replace(/[^\d\.\-]/g,""),m.fmt&&(g=m.fmt(g)),g=o(f,"c",{attr:{r:d,s:m.style},children:[o(f,"v",{text:g})]});break}}g||(g="number"==typeof a[b]||a[b].match&&a[b].match(/^-?\d+(\.\d+)?$/)&&!a[b].match(/^0\d+/)?o(f,"c",{attr:{t:"n",r:d},children:[o(f,"v",{text:a[b]})]}):(m=a[b].replace?a[b].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):a[b],o(f,"c",{attr:{t:"inlineStr",r:d},children:{row:o(f,"is",{children:{row:o(f,"t",{text:m})}})}}))),l.appendChild(g)}}i.appendChild(l),e++};h("sheets sheet",d.xl["workbook.xml"]).attr("name",function(a){var b="Sheet1";return a.sheetName&&(b=a.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),b}(c)),c.customizeData&&c.customizeData(k);var n=function(a,b){var c=h("mergeCells",f);c[0].appendChild(o(f,"mergeCell",{attr:{ref:"A"+a+":"+v(b)+a}})),c.attr("count",c.attr("count")+1),h("row:eq("+(a-1)+") c",f).attr("s","51")};(b=b.buttons.exportInfo(c)).title&&(g([b.title],e),n(e,k.header.length-1)),b.messageTop&&(g([b.messageTop],e),n(e,k.header.length-1)),c.header&&(g(k.header,e),h("row:last c",f).attr("s","2"));for(var r=0,q=k.body.length;r<q;r++)g(k.body[r],e);for(c.footer&&k.footer&&(g(k.footer,e),h("row:last c",f).attr("s","2")),b.messageBottom&&(g([b.messageBottom],e),n(e,k.header.length-1)),g=o(f,"cols"),h("worksheet",f).prepend(g),n=0,r=k.header.length;n<r;n++)g.appendChild(o(f,"col",{attr:{min:n+1,max:n+1,width:B(k,n),customWidth:1}}));c.customize&&c.customize(d),w(d),a.setAction("excel"),a.setFileName(b.filename),a.setSheetData(d),s(a,""),this.processing(!1)},extension:".xlsx"}),g.ext.buttons.pdfFlash=h.extend({},t,{className:"buttons-pdf buttons-flash",text:function(a){return a.i18n("buttons.pdf","PDF")},action:function(a,b,d,c){this.processing(!0);a=c._flash,d=b.buttons.exportData(c.exportOptions);var e=b.buttons.exportInfo(c),f=b.table().node().offsetWidth,g=b.columns(c.columns).indexes().map(function(a){return b.column(a).header().offsetWidth/f});a.setAction("pdf"),a.setFileName(e.filename),s(a,JSON.stringify({title:e.title||"",messageTop:e.messageTop||"",messageBottom:e.messageBottom||"",colWidth:g.toArray(),orientation:c.orientation,size:c.pageSize,header:c.header?d.header:null,footer:c.footer?d.footer:null,body:d.body})),this.processing(!1)},extension:".pdf",orientation:"portrait",pageSize:"A4",newline:"\n"}),g.Buttons}),function(j){"function"==typeof define&&define.amd?define("datatables.net-buttons-html5",["jquery","datatables.net","datatables.net-buttons"],function(k){return j(k,window,document)}):"object"==typeof exports?module.exports=function(k,l,t,s){return k||(k=window),l&&l.fn.dataTable||(l=require("datatables.net")(k,l).$),l.fn.dataTable.Buttons||require("datatables.net-buttons")(k,l),j(l,k,k.document,t,s)}:j(jQuery,window,document)}(function(j,k,l,t,s,q){function x(a){for(var c="";0<=a;)c=String.fromCharCode(a%26+65)+c,a=Math.floor(a/26)-1;return c}function p(a,c,d){var b=a.createElement(c);return d&&(d.attr&&j(b).attr(d.attr),d.children&&j.each(d.children,function(a,c){b.appendChild(c)}),null!==d.text&&d.text!==q&&b.appendChild(a.createTextNode(d.text))),b}function J(a,c){var b,d=a.header[c].length;a.footer&&a.footer[c].length>d&&(d=a.footer[c].length);for(var e=0,f=a.body.length;e<f;e++)if(d<(b=-1!==(b=null!==(b=a.body[e][c])&&b!==q?b.toString():"").indexOf("\n")?((b=b.split("\n")).sort(function(a,b){return b.length-a.length}),b[0].length):b.length)&&(d=b),40<d)return 52;return 6<(d*=1.3)?d:6}var r,m=j.fn.dataTable,h="undefined"!=typeof self&&self||void 0!==k&&k||this.content;if(void 0===h||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))r=void 0;else{var v=h.document.createElementNS("http://www.w3.org/1999/xhtml","a"),K="download"in v,L=/constructor/i.test(h.HTMLElement)||h.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent),M=function(a){(h.setImmediate||h.setTimeout)(function(){throw a},0)},B=function(a){setTimeout(function(){"string"==typeof a?(h.URL||h.webkitURL||h).revokeObjectURL(a):a.remove()},4e4)},C=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},E=function(a,c,d){d||(a=C(a));var e,b=this,f=(d="application/octet-stream"===a.type,function(){for(var a,c=(a=[].concat(a=["writestart","progress","write","writeend"])).length;c--;){var d=b["on"+a[c]];if("function"==typeof d)try{d.call(b,b)}catch(f){M(f)}}});if(b.readyState=b.INIT,K)e=(h.URL||h.webkitURL||h).createObjectURL(a),setTimeout(function(){v.href=e,v.download=c;var a=new MouseEvent("click");v.dispatchEvent(a),f(),B(e),b.readyState=b.DONE});else if((A||d&&L)&&h.FileReader){var g=new FileReader;g.onloadend=function(){var a=A?g.result:g.result.replace(/^data:[^;]*;/,"data:attachment/file;");h.open(a,"_blank")||(h.location.href=a),b.readyState=b.DONE,f()},g.readAsDataURL(a),b.readyState=b.INIT}else e||(e=(h.URL||h.webkitURL||h).createObjectURL(a)),d?h.location.href=e:h.open(e,"_blank")||(h.location.href=e),b.readyState=b.DONE,f(),B(e)},i=E.prototype;r="undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,c,d){return c=c||a.name||"download",d||(a=C(a)),navigator.msSaveOrOpenBlob(a,c)}:(i.abort=function(){},i.readyState=i.INIT=0,i.WRITING=1,i.DONE=2,i.error=i.onwritestart=i.onprogress=i.onwrite=i.onabort=i.onerror=i.onwriteend=null,function(a,c,d){return new E(a,c||a.name||"download",d)})}m.fileSave=r;var F=function(a){return a.newline?a.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},G=function(a,c){for(var d=F(c),b=a.buttons.exportData(c.exportOptions),e=c.fieldBoundary,f=c.fieldSeparator,g=RegExp(e,"g"),n=c.escapeChar!==q?c.escapeChar:"\\",j=function(a){for(var b="",c=0,d=a.length;c<d;c++)0<c&&(b+=f),b+=e?e+(""+a[c]).replace(g,n+e)+e:a[c];return b},h=c.header?j(b.header)+d:"",k=c.footer&&b.footer?d+j(b.footer):"",l=[],o=0,i=b.body.length;o<i;o++)l.push(j(b.body[o]));return{str:h+l.join(d)+k,rows:l.length}},H=function(){if(-1===navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("Chrome")||-1!==navigator.userAgent.indexOf("Opera"))return!1;var a=navigator.userAgent.match(/AppleWebKit\/(\d+\.\d+)/);return!!(a&&1<a.length&&1*a[1]<603.1)};try{var u,w=new XMLSerializer}catch(O){}var z={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="67"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},I=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(a){return a/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(a){return a/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64}];return m.ext.buttons.copyHtml5={className:"buttons-copy buttons-html5",text:function(a){return a.i18n("buttons.copy","Copy")},action:function(a,c,d,b){this.processing(!0);var e=this,f=(a=G(c,b),c.buttons.exportInfo(b)),g=F(b),n=a.str;d=j("<div/>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});if(f.title&&(n=f.title+g+g+n),f.messageTop&&(n=f.messageTop+g+g+n),f.messageBottom&&(n=n+g+g+f.messageBottom),b.customize&&(n=b.customize(n,b)),b=j("<textarea readonly/>").val(n).appendTo(d),l.queryCommandSupported("copy")){d.appendTo(c.table().container()),b[0].focus(),b[0].select();try{var h=l.execCommand("copy");if(d.remove(),h)return c.buttons.info(c.i18n("buttons.copyTitle","Copy to clipboard"),c.i18n("buttons.copySuccess",{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},a.rows),2e3),void this.processing(!1)}catch(k){}}h=j("<span>"+c.i18n("buttons.copyKeys","Press <i>ctrl</i> or <i>⌘</i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.")+"</span>").append(d),c.buttons.info(c.i18n("buttons.copyTitle","Copy to clipboard"),h,0),b[0].focus(),b[0].select();var D=j(h).closest(".dt-button-info"),i=function(){D.off("click.buttons-copy"),j(l).off(".buttons-copy"),c.buttons.info(!1)};D.on("click.buttons-copy",i),j(l).on("keydown.buttons-copy",function(a){27===a.keyCode&&(i(),e.processing(!1))}).on("copy.buttons-copy cut.buttons-copy",function(){i(),e.processing(!1)})},exportOptions:{},fieldSeparator:"\t",fieldBoundary:"",header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},m.ext.buttons.csvHtml5={bom:!1,className:"buttons-csv buttons-html5",available:function(){return k.FileReader!==q&&k.Blob},text:function(a){return a.i18n("buttons.csv","CSV")},action:function(a,c,d,b){this.processing(!0),a=G(c,b).str,c=c.buttons.exportInfo(b),d=b.charset,b.customize&&(a=b.customize(a,b)),!1!==d?(d||(d=l.characterSet||l.charset),d&&(d=";charset="+d)):d="",b.bom&&(a="\ufeff"+a),r(new Blob([a],{type:"text/csv"+d}),c.filename,!0),this.processing(!1)},filename:"*",extension:".csv",exportOptions:{},fieldSeparator:",",fieldBoundary:'"',escapeChar:'"',charset:null,header:!0,footer:!1},m.ext.buttons.excelHtml5={className:"buttons-excel buttons-html5",available:function(){return k.FileReader!==q&&(t||k.JSZip)!==q&&!H()&&w},text:function(a){return a.i18n("buttons.excel","Excel")},action:function(a,c,d,b){this.processing(!0);var h,l,e=this,f=0,g=(a=function(a){return j.parseXML(z[a])})("xl/worksheets/sheet1.xml"),n=g.getElementsByTagName("sheetData")[0],i=(a={_rels:{".rels":a("_rels/.rels")},xl:{_rels:{"workbook.xml.rels":a("xl/_rels/workbook.xml.rels")},"workbook.xml":a("xl/workbook.xml"),"styles.xml":a("xl/styles.xml"),worksheets:{"sheet1.xml":g}},"[Content_Types].xml":a("[Content_Types].xml")},d=c.buttons.exportData(b.exportOptions),function(a){l=p(g,"row",{attr:{r:h=f+1}});for(var b=0,c=a.length;b<c;b++){var d=x(b)+""+h,e=null;if(null!==a[b]&&a[b]!==q&&""!==a[b]){a[b]=j.trim(a[b]);for(var i=0,k=I.length;i<k;i++){var m=I[i];if(a[b].match&&!a[b].match(/^0\d+/)&&a[b].match(m.match)){e=a[b].replace(/[^\d\.\-]/g,""),m.fmt&&(e=m.fmt(e)),e=p(g,"c",{attr:{r:d,s:m.style},children:[p(g,"v",{text:e})]});break}}e||(e="number"==typeof a[b]||a[b].match&&a[b].match(/^-?\d+(\.\d+)?$/)&&!a[b].match(/^0\d+/)?p(g,"c",{attr:{t:"n",r:d},children:[p(g,"v",{text:a[b]})]}):(m=a[b].replace?a[b].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):a[b],p(g,"c",{attr:{t:"inlineStr",r:d},children:{row:p(g,"is",{children:{row:p(g,"t",{text:m})}})}}))),l.appendChild(e)}}n.appendChild(l),f++});j("sheets sheet",a.xl["workbook.xml"]).attr("name",function(a){var c="Sheet1";return a.sheetName&&(c=a.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),c}(b)),b.customizeData&&b.customizeData(d);var m=function(a,b){var c=j("mergeCells",g);c[0].appendChild(p(g,"mergeCell",{attr:{ref:"A"+a+":"+x(b)+a}})),c.attr("count",c.attr("count")+1),j("row:eq("+(a-1)+") c",g).attr("s","51")},o=c.buttons.exportInfo(b);o.title&&(i([o.title],f),m(f,d.header.length-1)),o.messageTop&&(i([o.messageTop],f),m(f,d.header.length-1)),b.header&&(i(d.header,f),j("row:last c",g).attr("s","2"));c=0;for(var s=d.body.length;c<s;c++)i(d.body[c],f);for(b.footer&&d.footer&&(i(d.footer,f),j("row:last c",g).attr("s","2")),o.messageBottom&&(i([o.messageBottom],f),m(f,d.header.length-1)),c=p(g,"cols"),j("worksheet",g).prepend(c),i=0,m=d.header.length;i<m;i++)c.appendChild(p(g,"col",{attr:{min:i+1,max:i+1,width:J(d,i),customWidth:1}}));b.customize&&b.customize(a),d={type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},function y(a,c){u===q&&(u=-1===w.serializeToString(j.parseXML(z["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),j.each(c,function(c,b){if(j.isPlainObject(b))y(e=a.folder(c),b);else{if(u){var e,f,g,n=[];for(f=(e=b.childNodes[0]).attributes.length-1;0<=f;f--){g=e.attributes[f].nodeName;var h=e.attributes[f].nodeValue;-1!==g.indexOf(":")&&(n.push({name:g,value:h}),e.removeAttribute(g))}for(f=0,g=n.length;f<g;f++)(h=b.createAttribute(n[f].name.replace(":","_dt_b_namespace_token_"))).value=n[f].value,e.setAttributeNode(h)}e=w.serializeToString(b),u&&(-1===e.indexOf("<?xml")&&(e='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+e),e=e.replace(/_dt_b_namespace_token_/g,":")),e=e.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),a.file(c,e)}})}(b=new(t||k.JSZip),a),b.generateAsync?b.generateAsync(d).then(function(a){r(a,o.filename),e.processing(!1)}):(r(b.generate(d),o.filename),this.processing(!1))},filename:"*",extension:".xlsx",exportOptions:{},header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},m.ext.buttons.pdfHtml5={className:"buttons-pdf buttons-html5",available:function(){return k.FileReader!==q&&(s||k.pdfMake)},text:function(a){return a.i18n("buttons.pdf","PDF")},action:function(a,c,d,b){this.processing(!0);var e=this,f=(a=c.buttons.exportData(b.exportOptions),c.buttons.exportInfo(b));c=[];b.header&&c.push(j.map(a.header,function(a){return{text:"string"==typeof a?a:a+"",style:"tableHeader"}}));var g=0;for(d=a.body.length;g<d;g++)c.push(j.map(a.body[g],function(a){return{text:"string"==typeof a?a:a+"",style:g%2?"tableBodyEven":"tableBodyOdd"}}));b.footer&&a.footer&&c.push(j.map(a.footer,function(a){return{text:"string"==typeof a?a:a+"",style:"tableFooter"}})),c={pageSize:b.pageSize,pageOrientation:b.orientation,content:[{table:{headerRows:1,body:c},layout:"noBorders"}],styles:{tableHeader:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154",alignment:"center"},tableBodyEven:{},tableBodyOdd:{fillColor:"#f3f3f3"},tableFooter:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154"},title:{alignment:"center",fontSize:15},message:{}},defaultStyle:{fontSize:10}},f.messageTop&&c.content.unshift({text:f.messageTop,style:"message",margin:[0,0,0,12]}),f.messageBottom&&c.content.push({text:f.messageBottom,style:"message",margin:[0,0,0,12]}),f.title&&c.content.unshift({text:f.title,style:"title",margin:[0,0,0,12]}),b.customize&&b.customize(c,b),c=(s||k.pdfMake).createPdf(c),"open"!==b.download||H()?c.getBuffer(function(a){a=new Blob([a],{type:"application/pdf"}),r(a,f.filename),e.processing(!1)}):(c.open(),this.processing(!1))},title:"*",filename:"*",extension:".pdf",exportOptions:{},orientation:"portrait",pageSize:"A4",header:!0,footer:!1,messageTop:"*",messageBottom:"*",customize:null,download:"download"},m.Buttons}),function(d){"function"==typeof define&&define.amd?define("datatables.net-buttons-print",["jquery","datatables.net","datatables.net-buttons"],function(e){return d(e,window,document)}):"object"==typeof exports?module.exports=function(e,c){return e||(e=window),c&&c.fn.dataTable||(c=require("datatables.net")(e,c).$),c.fn.dataTable.Buttons||require("datatables.net-buttons")(e,c),d(c,e,e.document)}:d(jQuery,window,document)}(function(d,e,c){var i=d.fn.dataTable,f=c.createElement("a"),l=function(a){return f.href=a,-1===(a=f.host).indexOf("/")&&0!==f.pathname.indexOf("/")&&(a+="/"),f.protocol+"//"+a+f.pathname+f.search};return i.ext.buttons.print={className:"buttons-print",text:function(a){return a.i18n("buttons.print","Print")},action:function(a,b,c,h){a=b.buttons.exportData(d.extend({decodeEntities:!1},h.exportOptions)),c=b.buttons.exportInfo(h);var f=function(b,c){for(var a="<tr>",d=0,e=b.length;d<e;d++)a+="<"+c+">"+b[d]+"</"+c+">";return a+"</tr>"};b='<table class="'+b.table().node().className+'">';h.header&&(b+="<thead>"+f(a.header,"th")+"</thead>");b+="<tbody>";for(var k=0,i=a.body.length;k<i;k++)b+=f(a.body[k],"td");b+="</tbody>",h.footer&&a.footer&&(b+="<tfoot>"+f(a.footer,"th")+"</tfoot>");b+="</table>";var g=e.open("","");g.document.close();var j="<title>"+c.title+"</title>";d("style, link").each(function(){var b=j,a=d(this).clone()[0];"link"===a.nodeName.toLowerCase()&&(a.href=l(a.href)),j=b+a.outerHTML});try{g.document.head.innerHTML=j}catch(m){d(g.document.head).html(j)}g.document.body.innerHTML="<h1>"+c.title+"</h1><div>"+(c.messageTop||"")+"</div>"+b+"<div>"+(c.messageBottom||"")+"</div>",d(g.document.body).addClass("dt-print-view"),d("img",g.document.body).each(function(a,b){b.setAttribute("src",l(b.getAttribute("src")))}),h.customize&&h.customize(g),setTimeout(function(){h.autoPrint&&(g.print(),g.close())},1e3)},title:"*",messageTop:"*",messageBottom:"*",exportOptions:{},header:!0,footer:!1,autoPrint:!0,customize:null},i.Buttons}),function(c){"function"==typeof define&&define.amd?define("datatables.net-buttons-bs",["jquery","datatables.net-bs","datatables.net-buttons"],function(a){return c(a,window,document)}):"object"==typeof exports?module.exports=function(a,b){return a||(a=window),b&&b.fn.dataTable||(b=require("datatables.net-bs")(a,b).$),b.fn.dataTable.Buttons||require("datatables.net-buttons")(a,b),c(b,a.document)}:c(jQuery,window,document)}(function(c){var a=c.fn.dataTable;return c.extend(!0,a.Buttons.defaults,{dom:{container:{className:"dt-buttons btn-group"},button:{className:"btn btn-default"},collection:{tag:"ul",className:"dt-button-collection dropdown-menu",button:{tag:"li",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"a",className:""}}}}),a.ext.buttons.collection.text=function(a){return a.i18n("buttons.collection",'Collection <span class="caret"/>')},a.Buttons}),function(f){"function"==typeof define&&define.amd?define("datatables.net-colreorder",["jquery","datatables.net"],function(o){return f(o,window,document)}):"object"==typeof exports?module.exports=function(o,l){return o||(o=window),l&&l.fn.dataTable||(l=require("datatables.net")(o,l).$),f(l,o,o.document)}:f(jQuery,window,document)}(function(f,o,l,r){function q(a){for(var b=[],c=0,e=a.length;c<e;c++)b[a[c]]=c;return b}function p(a,b,c){b=a.splice(b,1)[0],a.splice(c,0,b)}function s(a,b,c){for(var e=[],f=0,d=a.childNodes.length;f<d;f++)1==a.childNodes[f].nodeType&&e.push(a.childNodes[f]);b=e[b],null!==c?a.insertBefore(b,e[c]):a.appendChild(b)}var t=f.fn.dataTable;f.fn.dataTableExt.oApi.fnColReorder=function(a,b,c,e,g){var d,h,j,m,i,k,l=a.aoColumns.length;if(i=function(a,b,d){if(a[b]&&"function"!=typeof a[b]){var c=a[b].split("."),e=c.shift();isNaN(1*e)||(a[b]=d[1*e]+"."+c.join("."))}},b!=c)if(b<0||l<=b)this.oApi._fnLog(a,1,"ColReorder 'from' index is out of bounds: "+b);else if(c<0||l<=c)this.oApi._fnLog(a,1,"ColReorder 'to' index is out of bounds: "+c);else{for(j=[],d=0,h=l;d<h;d++)j[d]=d;p(j,b,c);var n=q(j);for(d=0,h=a.aaSorting.length;d<h;d++)a.aaSorting[d][0]=n[a.aaSorting[d][0]];if(null!==a.aaSortingFixed)for(d=0,h=a.aaSortingFixed.length;d<h;d++)a.aaSortingFixed[d][0]=n[a.aaSortingFixed[d][0]];for(d=0,h=l;d<h;d++){for(j=0,m=(k=a.aoColumns[d]).aDataSort.length;j<m;j++)k.aDataSort[j]=n[k.aDataSort[j]];k.idx=n[k.idx]}for(f.each(a.aLastSort,function(b,c){a.aLastSort[b].src=n[c.src]}),d=0,h=l;d<h;d++)"number"==typeof(k=a.aoColumns[d]).mData?k.mData=n[k.mData]:f.isPlainObject(k.mData)&&(i(k.mData,"_",n),i(k.mData,"filter",n),i(k.mData,"sort",n),i(k.mData,"type",n));if(a.aoColumns[b].bVisible){for(i=this.oApi._fnColumnIndexToVisible(a,b),m=null,d=c<b?c:c+1;null===m&&d<l;)m=this.oApi._fnColumnIndexToVisible(a,d),d++;for(d=0,h=(j=a.nTHead.getElementsByTagName("tr")).length;d<h;d++)s(j[d],i,m);if(null!==a.nTFoot)for(d=0,h=(j=a.nTFoot.getElementsByTagName("tr")).length;d<h;d++)s(j[d],i,m);for(d=0,h=a.aoData.length;d<h;d++)null!==a.aoData[d].nTr&&s(a.aoData[d].nTr,i,m)}for(p(a.aoColumns,b,c),d=0,h=l;d<h;d++)a.oApi._fnColumnOptions(a,d,{});for(p(a.aoPreSearchCols,b,c),d=0,h=a.aoData.length;d<h;d++){if(k=(m=a.aoData[d]).anCells)for(p(k,b,c),j=0,i=k.length;j<i;j++)k[j]&&k[j]._DT_CellIndex&&(k[j]._DT_CellIndex.column=j);"dom"!==m.src&&f.isArray(m._aData)&&p(m._aData,b,c)}for(d=0,h=a.aoHeader.length;d<h;d++)p(a.aoHeader[d],b,c);if(null!==a.aoFooter)for(d=0,h=a.aoFooter.length;d<h;d++)p(a.aoFooter[d],b,c);for((g||g===r)&&f.fn.dataTable.Api(a).rows().invalidate(),d=0,h=l;d<h;d++)f(a.aoColumns[d].nTh).off("click.DT"),this.oApi._fnSortAttachListener(a,a.aoColumns[d].nTh,d);f(a.oInstance).trigger("column-reorder.dt",[a,{from:b,to:c,mapping:n,drop:e,iFrom:b,iTo:c,aiInvertMapping:n}])}};var i=function(a,b){var c=new f.fn.dataTable.Api(a).settings()[0];if(c._colReorder)return c._colReorder;!0===b&&(b={});var e=f.fn.dataTable.camelToHungarian;return e&&(e(i.defaults,i.defaults,!0),e(i.defaults,b||{})),this.s={dt:null,init:f.extend(!0,{},i.defaults,b),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=c,(this.s.dt._colReorder=this)._fnConstruct(),this};return f.extend(i.prototype,{fnReset:function(){return this._fnOrderColumns(this.fnOrder()),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(a,b){var e,g,c=[],d=this.s.dt.aoColumns;if(a===r){for(e=0,g=d.length;e<g;e++)c.push(d[e]._ColReorder_iOrigCol);return c}if(b){for(d=this.fnOrder(),e=0,g=a.length;e<g;e++)c.push(f.inArray(a[e],d));a=c}return this._fnOrderColumns(q(a)),this},fnTranspose:function(a,b){b||(b="toCurrent");var c=this.fnOrder(),e=this.s.dt.aoColumns;return"toCurrent"===b?f.isArray(a)?f.map(a,function(a){return f.inArray(a,c)}):f.inArray(a,c):f.isArray(a)?f.map(a,function(a){return e[a]._ColReorder_iOrigCol}):e[a]._ColReorder_iOrigCol},_fnConstruct:function(){var e,a=this,b=this.s.dt.aoColumns.length,c=this.s.dt.nTable;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback),e=0;e<b;e++)e>this.s.fixed-1&&e<b-this.s.fixedRight&&this._fnMouseListener(e,this.s.dt.aoColumns[e].nTh),this.s.dt.aoColumns[e]._ColReorder_iOrigCol=e;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(b,c){a._fnStateSave.call(a,c)},"ColReorder_State");var g=null;if(this.s.init.aiOrder&&(g=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(g=this.s.dt.oLoadedState.ColReorder),g)if(a.s.dt._bInitComplete)b=q(g),a._fnOrderColumns.call(a,b);else{var d=!1;f(c).on("draw.dt.colReorder",function(){if(!a.s.dt._bInitComplete&&!d){d=!0;var b=q(g);a._fnOrderColumns.call(a,b)}})}else this._fnSetColumnIndexes();f(c).on("destroy.dt.colReorder",function(){f(c).off("destroy.dt.colReorder draw.dt.colReorder"),f(a.s.dt.nTHead).find("*").off(".ColReorder"),f.each(a.s.dt.aoColumns,function(a,b){f(b.nTh).removeAttr("data-column-index")}),a.s.dt._colReorder=null,a.s=null})},_fnOrderColumns:function(a){var b=!1;if(a.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var c=0,e=a.length;c<e;c++){var g=f.inArray(c,a);c!=g&&(p(a,g,c),this.s.dt.oInstance.fnColReorder(g,c,!0,!1),b=!0)}f.fn.dataTable.Api(this.s.dt).rows().invalidate(),this._fnSetColumnIndexes(),b&&((""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}},_fnStateSave:function(a){var b,c,e,g=this.s.dt.aoColumns;if(a.ColReorder=[],a.aaSorting){for(b=0;b<a.aaSorting.length;b++)a.aaSorting[b][0]=g[a.aaSorting[b][0]]._ColReorder_iOrigCol;var d=f.extend(!0,[],a.aoSearchCols);for(b=0,c=g.length;b<c;b++)e=g[b]._ColReorder_iOrigCol,a.aoSearchCols[e]=d[b],a.abVisCols[e]=g[b].bVisible,a.ColReorder.push(e)}else if(a.order){for(b=0;b<a.order.length;b++)a.order[b][0]=g[a.order[b][0]]._ColReorder_iOrigCol;for(d=f.extend(!0,[],a.columns),b=0,c=g.length;b<c;b++)e=g[b]._ColReorder_iOrigCol,a.columns[e]=d[b],a.ColReorder.push(e)}},_fnMouseListener:function(a,b){var c=this;f(b).on("mousedown.ColReorder",function(a){c._fnMouseDown.call(c,a,b)}).on("touchstart.ColReorder",function(a){c._fnMouseDown.call(c,a,b)})},_fnMouseDown:function(a,b){var c=this,e=f(a.target).closest("th, td").offset(),g=parseInt(f(b).attr("data-column-index"),10);g!==r&&(this.s.mouse.startX=this._fnCursorPosition(a,"pageX"),this.s.mouse.startY=this._fnCursorPosition(a,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(a,"pageX")-e.left,this.s.mouse.offsetY=this._fnCursorPosition(a,"pageY")-e.top,this.s.mouse.target=this.s.dt.aoColumns[g].nTh,this.s.mouse.targetIndex=g,this.s.mouse.fromIndex=g,this._fnRegions(),f(l).on("mousemove.ColReorder touchmove.ColReorder",function(a){c._fnMouseMove.call(c,a)}).on("mouseup.ColReorder touchend.ColReorder",function(a){c._fnMouseUp.call(c,a)}))},_fnMouseMove:function(a){if(null===this.dom.drag){if(Math.pow(Math.pow(this._fnCursorPosition(a,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(a,"pageY")-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(a,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(a,"pageY")-this.s.mouse.offsetY});for(var b=!1,c=this.s.mouse.toIndex,e=1,f=this.s.aoTargets.length;e<f;e++)if(this._fnCursorPosition(a,"pageX")<this.s.aoTargets[e-1].x+(this.s.aoTargets[e].x-this.s.aoTargets[e-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[e-1].x),this.s.mouse.toIndex=this.s.aoTargets[e-1].to,b=!0;break}b||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&c!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!1),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(){f(l).off(".ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var a=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:f(this.s.dt.nTable).offset().left,to:0});for(var b=0,c=this.s.aoTargets[0].x,e=0,g=a.length;e<g;e++)e!=this.s.mouse.fromIndex&&b++,a[e].bVisible&&"none"!==a[e].nTh.style.display&&(c+=f(a[e].nTh).outerWidth(),this.s.aoTargets.push({x:c,to:b}));0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var a=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,b=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,c=b.parentNode,e=c.parentNode,g=e.parentNode,d=f(b).clone();this.dom.drag=f(g.cloneNode(!1)).addClass("DTCR_clonedTable").append(f(e.cloneNode(!1)).append(f(c.cloneNode(!1)).append(d[0]))).css({position:"absolute",top:0,left:0,width:f(b).outerWidth(),height:f(b).outerHeight()}).appendTo("body"),this.dom.pointer=f("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:a?f("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:f(this.s.dt.nTable).offset().top,height:a?f("div.dataTables_scroll",this.s.dt.nTableWrapper).height():f(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){f.each(this.s.dt.aoColumns,function(a,b){f(b.nTh).attr("data-column-index",a)})},_fnCursorPosition:function(a,b){return-1!==a.type.indexOf("touch")?a.originalEvent.touches[0][b]:a[b]}}),i.defaults={aiOrder:null,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null},i.version="1.4.1",f.fn.dataTable.ColReorder=i,f.fn.DataTable.ColReorder=i,"function"==typeof f.fn.dataTable&&"function"==typeof f.fn.dataTableExt.fnVersionCheck&&f.fn.dataTableExt.fnVersionCheck("1.10.8")?f.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;return a._colReorder?b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"):(b=a.oInit,new i(a,b.colReorder||b.oColReorder||{})),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download"),f(l).on("preInit.dt.colReorder",function(a,b){if("dt"===a.namespace){var c=b.oInit.colReorder,e=t.defaults.colReorder;(c||e)&&(e=f.extend({},c,e),!1!==c&&new i(b,e))}}),f.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(a){a._colReorder.fnReset()})}),f.fn.dataTable.Api.register("colReorder.order()",function(a,b){return a?this.iterator("table",function(c){c._colReorder.fnOrder(a,b)}):this.context.length?this.context[0]._colReorder.fnOrder():null}),f.fn.dataTable.Api.register("colReorder.transpose()",function(a,b){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(a,b):a}),f.fn.dataTable.Api.register("colReorder.move()",function(a,b,c,e){return this.context.length&&this.context[0]._colReorder.s.dt.oInstance.fnColReorder(a,b,c,e),this}),i}),function(d){"function"==typeof define&&define.amd?define("datatables.net-rowreorder",["jquery","datatables.net"],function(f){return d(f,window,document)}):"object"==typeof exports?module.exports=function(f,g){return f||(f=window),g&&g.fn.dataTable||(g=require("datatables.net")(f,g).$),d(g,f,f.document)}:d(jQuery,window,document)}(function(d,f,g,m){var h=d.fn.dataTable,k=function(c,b){if(!h.versionCheck||!h.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=d.extend(!0,{},h.defaults.rowReorder,k.defaults,b),this.s={bodyTop:null,dt:new h.Api(c),getDataFn:h.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:h.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0,documentOuterHeight:0,domCloneOuterHeight:0},this.dom={clone:null,dtScroll:d("div.dataTables_scrollBody",this.s.dt.table().container())};var a=this.s.dt.settings()[0],e=a.rowreorder;if(e)return e;(a.rowreorder=this)._constructor()};d.extend(k.prototype,{_constructor:function(){var c=this,b=this.s.dt,a=d(b.table().node());"static"===a.css("position")&&a.css("position","relative"),d(b.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(a){if(c.c.enable){var i=d(this).closest("tr"),j=b.row(i);if(j.any())return c._emitEvent("pre-row-reorder",{node:j.node(),index:j.index()}),c._mouseDown(a,i),!1}}),b.on("destroy.rowReorder",function(){d(b.table().container()).off(".rowReorder"),b.off(".rowReorder")})},_cachePositions:function(){var c=this.s.dt,b=d(c.table().node()).find("thead").outerHeight(),a=d.unique(c.rows({page:"current"}).nodes().toArray()),e=d.map(a,function(a){return d(a).position().top-b});a=d.map(e,function(a,b){return e.length<b-1?(a+e[b+1])/2:(a+a+d(c.row(":last-child").node()).outerHeight())/2});this.s.middles=a,this.s.bodyTop=d(c.table().body()).offset().top,this.s.windowHeight=d(f).height(),this.s.documentOuterHeight=d(g).outerHeight()},_clone:function(c){var b=d(this.s.dt.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(c.clone(!1)),a=c.outerWidth(),e=c.outerHeight(),i=c.children().map(function(){return d(this).width()});b.width(a).height(e).find("tr").children().each(function(a){this.style.width=i[a]+"px"}),b.appendTo("body"),this.dom.clone=b,this.s.domCloneOuterHeight=b.outerHeight()},_clonePosition:function(c){var b=this.s.start,a=this._eventToPage(c,"Y")-b.top,e=(c=this._eventToPage(c,"X")-b.left,this.c.snapX);a+=b.offsetTop,b=!0===e?b.offsetLeft:"number"==typeof e?b.offsetLeft+e:c+b.offsetLeft;a<0?a=0:a+this.s.domCloneOuterHeight>this.s.documentOuterHeight&&(a=this.s.documentOuterHeight-this.s.domCloneOuterHeight),this.dom.clone.css({top:a,left:b})},_emitEvent:function(c,b){this.s.dt.iterator("table",function(a){d(a.nTable).triggerHandler(c+".dt",b)})},_eventToPage:function(c,b){return-1!==c.type.indexOf("touch")?c.originalEvent.touches[0]["page"+b]:c["page"+b]},_mouseDown:function(c,b){var a=this,e=this.s.dt,i=this.s.start,j=b.offset();i.top=this._eventToPage(c,"Y"),i.left=this._eventToPage(c,"X"),i.offsetTop=j.top,i.offsetLeft=j.left,i.nodes=d.unique(e.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(b),this._clonePosition(c),(this.dom.target=b).addClass("dt-rowReorder-moving"),d(g).on("mouseup.rowReorder touchend.rowReorder",function(b){a._mouseUp(b)}).on("mousemove.rowReorder touchmove.rowReorder",function(b){a._mouseMove(b)}),d(f).width()===d(g).width()&&d(g.body).addClass("dt-rowReorder-noOverflow"),e=this.dom.dtScroll,this.s.scroll={windowHeight:d(f).height(),windowWidth:d(f).width(),dtTop:e.length?e.offset().top:null,dtLeft:e.length?e.offset().left:null,dtHeight:e.length?e.outerHeight():null,dtWidth:e.length?e.outerWidth():null}},_mouseMove:function(c){this._clonePosition(c);for(var b=this._eventToPage(c,"Y")-this.s.bodyTop,a=this.s.middles,e=null,i=this.s.dt,j=i.table().body(),g=0,f=a.length;g<f;g++)if(b<a[g]){e=g;break}null===e&&(e=a.length),null!==this.s.lastInsert&&this.s.lastInsert===e||(0===e?this.dom.target.prependTo(j):(b=d.unique(i.rows({page:"current"}).nodes().toArray()),e>this.s.lastInsert?this.dom.target.insertAfter(b[e-1]):this.dom.target.insertBefore(b[e])),this._cachePositions(),this.s.lastInsert=e),this._shiftScroll(c)},_mouseUp:function(){var a,e,c=this,b=this.s.dt,i=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),d(g).off(".rowReorder"),d(g.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;var j=this.s.start.nodes,f=d.unique(b.rows({page:"current"}).nodes().toArray()),k={},h=[],l=[],n=this.s.getDataFn,m=this.s.setDataFn;for(a=0,e=j.length;a<e;a++)if(j[a]!==f[a]){var o=b.row(f[a]).id(),s=b.row(f[a]).data(),p=b.row(j[a]).data();o&&(k[o]=n(p)),h.push({node:f[a],oldData:n(s),newData:n(p),newPosition:a,oldPosition:d.inArray(f[a],j)}),l.push(f[a])}var q=[h,{dataSrc:i,nodes:l,values:k,triggerRow:b.row(this.dom.target)}];this._emitEvent("row-reorder",q);var r=function(){if(c.c.update){for(a=0,e=h.length;a<e;a++){var d=b.row(h[a].node).data();m(d,h[a].newData),b.columns().every(function(){this.dataSrc()===i&&b.cell(h[a].node,this.index()).invalidate("data")})}c._emitEvent("row-reordered",q),b.draw(!1)}};this.c.editor?(this.c.enable=!1,this.c.editor.edit(l,!1,d.extend({submit:"changed"},this.c.formOptions)).multiSet(i,k).one("submitUnsuccessful.rowReorder",function(){b.draw(!1)}).one("submitSuccess.rowReorder",function(){r()}).one("submitComplete",function(){c.c.enable=!0,c.c.editor.off(".rowReorder")}).submit()):r()},_shiftScroll:function(c){var f,h,b=this,a=this.s.scroll,e=!1,d=c.pageY-g.body.scrollTop;d<65?f=-5:d>a.windowHeight-65&&(f=5),null!==a.dtTop&&c.pageY<a.dtTop+65?h=-5:null!==a.dtTop&&c.pageY>a.dtTop+a.dtHeight-65&&(h=5),f||h?(a.windowVert=f,a.dtVert=h,e=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&e&&(this.s.scrollInterval=setInterval(function(){if(a.windowVert&&(g.body.scrollTop=g.body.scrollTop+a.windowVert),a.dtVert){var c=b.dom.dtScroll[0];a.dtVert&&(c.scrollTop=c.scrollTop+a.dtVert)}},20))}}),k.defaults={dataSrc:0,editor:null,enable:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0};var l=d.fn.dataTable.Api;return l.register("rowReorder()",function(){return this}),l.register("rowReorder.enable()",function(c){return c===m&&(c=!0),this.iterator("table",function(b){b.rowreorder&&(b.rowreorder.c.enable=c)})}),l.register("rowReorder.disable()",function(){return this.iterator("table",function(c){c.rowreorder&&(c.rowreorder.c.enable=!1)})}),k.version="1.2.3",d.fn.dataTable.RowReorder=k,d.fn.DataTable.RowReorder=k,d(g).on("init.dt.dtr",function(c,b){if("dt"===c.namespace){var a=b.oInit.rowReorder,e=h.defaults.rowReorder;(a||e)&&(e=d.extend({},a,e),!1!==a&&new k(b,e))}}),k}),function(d){"function"==typeof define&&define.amd?define("datatables.net-fixedcolumns",["jquery","datatables.net"],function(p){return d(p,window,document)}):"object"==typeof exports?module.exports=function(p,r){return p||(p=window),r&&r.fn.dataTable||(r=require("datatables.net")(p,r).$),d(r,p,p.document)}:d(jQuery,window,document)}(function(d,p,r,t){var u,s=d.fn.dataTable,m=function(a,b){var c=this;if(this instanceof m){b!==t&&!0!==b||(b={});var e=d.fn.dataTable.camelToHungarian;if(e&&(e(m.defaults,m.defaults,!0),e(m.defaults,b)),e=new d.fn.dataTable.Api(a).settings()[0],this.s={dt:e,iTableColumns:e.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[],rtl:"rtl"===d(e.nTable).css("direction")},this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}},e._oFixedColumns)throw"FixedColumns already initialised on this table";e._oFixedColumns=this,e._bInitComplete?this._fnConstruct(b):e.oApi._fnCallbackReg(e,"aoInitComplete",function(){c._fnConstruct(b)},"FixedColumns")}else alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.")};return d.extend(m.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc(),this._fnGridLayout(),this.fnUpdate()},fnRecalculateHeight:function(a){delete a._DTTC_iHeight,a.style.height="auto"},fnSetRowHeight:function(a,b){a.style.height=b+"px"},fnGetPosition:function(a){var b=this.s.dt.oInstance;if(d(a).parents(".DTFC_Cloned").length){if("tr"===a.nodeName.toLowerCase())return a=d(a).index(),b.fnGetPosition(d("tr",this.s.dt.nTBody)[a]);var c=d(a).index();a=d(a.parentNode).index();return[b.fnGetPosition(d("tr",this.s.dt.nTBody)[a]),c,b.oApi._fnVisibleToColumnIndex(this.s.dt,c)]}return b.fnGetPosition(a)},_fnConstruct:function(a){var b=this;if("function"!=typeof this.s.dt.oInstance.fnVersionCheck||!0!==this.s.dt.oInstance.fnVersionCheck("1.8.0"))alert("FixedColumns "+m.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation");else if(""===this.s.dt.oScroll.sX)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");else{this.s=d.extend(!0,this.s,m.defaults,a),a=this.s.dt.oClasses,this.dom.grid.dt=d(this.s.dt.nTable).parents("div."+a.sScrollWrapper)[0],this.dom.scroller=d("div."+a.sScrollBody,this.dom.grid.dt)[0],this._fnColCalc(),this._fnGridSetup();var c,e=!1;d(this.s.dt.nTableWrapper).on("mousedown.DTFC",function(){e=!0,d(r).one("mouseup",function(){e=!1})}),d(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){e||(c="main")}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="main"),"main"===c&&(0<b.s.iLeftColumns&&(b.dom.grid.left.liner.scrollTop=b.dom.scroller.scrollTop),0<b.s.iRightColumns)&&(b.dom.grid.right.liner.scrollTop=b.dom.scroller.scrollTop)});var f="onwheel"in r.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";0<b.s.iLeftColumns&&d(b.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){e||(c="left")}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="left"),"left"===c&&(b.dom.scroller.scrollTop=b.dom.grid.left.liner.scrollTop,0<b.s.iRightColumns&&(b.dom.grid.right.liner.scrollTop=b.dom.grid.left.liner.scrollTop))}).on(f,function(a){b.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX}),0<b.s.iRightColumns&&d(b.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){e||(c="right")}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="right"),"right"===c&&(b.dom.scroller.scrollTop=b.dom.grid.right.liner.scrollTop,0<b.s.iLeftColumns&&(b.dom.grid.left.liner.scrollTop=b.dom.grid.right.liner.scrollTop))}).on(f,function(a){b.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX}),d(p).on("resize.DTFC",function(){b._fnGridLayout.call(b)});var g=!0,h=d(this.s.dt.nTable);h.on("draw.dt.DTFC",function(){b._fnColCalc(),b._fnDraw.call(b,g),g=!1}).on("column-sizing.dt.DTFC",function(){b._fnColCalc(),b._fnGridLayout(b)}).on("column-visibility.dt.DTFC",function(a,c,d,e,f){(f===t||f)&&(b._fnColCalc(),b._fnGridLayout(b),b._fnDraw(!0))}).on("select.dt.DTFC deselect.dt.DTFC",function(a){"dt"===a.namespace&&b._fnDraw(!1)}).on("destroy.dt.DTFC",function(){h.off(".DTFC"),d(b.dom.scroller).off(".DTFC"),d(p).off(".DTFC"),d(b.s.dt.nTableWrapper).off(".DTFC"),d(b.dom.grid.left.liner).off(".DTFC "+f),d(b.dom.grid.left.wrapper).remove(),d(b.dom.grid.right.liner).off(".DTFC "+f),d(b.dom.grid.right.wrapper).remove()}),this._fnGridLayout(),this.s.dt.oInstance.fnDraw(!1)}},_fnColCalc:function(){var a=this,b=0,c=0;this.s.aiInnerWidths=[],this.s.aiOuterWidths=[],d.each(this.s.dt.aoColumns,function(e,f){var h,g=d(f.nTh);if(g.filter(":visible").length){var i=g.outerWidth();0===a.s.aiOuterWidths.length&&(i+="string"==typeof(h=d(a.s.dt.nTable).css("border-left-width"))?1:parseInt(h,10)),a.s.aiOuterWidths.length===a.s.dt.aoColumns.length-1&&(i+="string"==typeof(h=d(a.s.dt.nTable).css("border-right-width"))?1:parseInt(h,10)),a.s.aiOuterWidths.push(i),a.s.aiInnerWidths.push(g.width()),e<a.s.iLeftColumns&&(b+=i),a.s.iTableColumns-a.s.iRightColumns<=e&&(c+=i)}else a.s.aiInnerWidths.push(0),a.s.aiOuterWidths.push(0)}),this.s.iLeftWidth=b,this.s.iRightWidth=c},_fnGridSetup:function(){var b,a=this._fnDTOverflow();this.dom.body=this.s.dt.nTable,this.dom.header=this.s.dt.nTHead.parentNode,this.dom.header.parentNode.parentNode.style.position="relative";var c=d('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; right:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],e=c.childNodes[0],f=c.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(c,this.dom.grid.dt),c.appendChild(this.dom.grid.dt),this.dom.grid.wrapper=c,0<this.s.iLeftColumns&&(this.dom.grid.left.wrapper=e,this.dom.grid.left.head=e.childNodes[0],this.dom.grid.left.body=e.childNodes[1],this.dom.grid.left.liner=d("div.DTFC_LeftBodyLiner",c)[0],c.appendChild(e)),0<this.s.iRightColumns&&(this.dom.grid.right.wrapper=f,this.dom.grid.right.head=f.childNodes[0],this.dom.grid.right.body=f.childNodes[1],this.dom.grid.right.liner=d("div.DTFC_RightBodyLiner",c)[0],f.style.right=a.bar+"px",(b=d("div.DTFC_RightHeadBlocker",c)[0]).style.width=a.bar+"px",b.style.right=-a.bar+"px",this.dom.grid.right.headBlock=b,(b=d("div.DTFC_RightFootBlocker",c)[0]).style.width=a.bar+"px",b.style.right=-a.bar+"px",this.dom.grid.right.footBlock=b,c.appendChild(f)),this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,0<this.s.iLeftColumns&&(this.dom.grid.left.foot=e.childNodes[2]),0<this.s.iRightColumns)&&(this.dom.grid.right.foot=f.childNodes[2]),this.s.rtl&&d("div.DTFC_RightHeadBlocker",c).css({left:-a.bar+"px",right:""})},_fnGridLayout:function(){var a=this,b=this.dom.grid;d(b.wrapper).width();var c=d(this.s.dt.nTable.parentNode).outerHeight(),e=d(this.s.dt.nTable.parentNode.parentNode).outerHeight(),f=this._fnDTOverflow(),g=this.s.iLeftWidth,h=this.s.iRightWidth,i="rtl"===d(this.dom.body).css("direction"),k=function(b,c){f.bar?a._firefoxScrollError()?34<d(b).height()&&(b.style.width=c+f.bar+"px"):b.style.width=c+f.bar+"px":(b.style.width=c+20+"px",b.style.paddingRight="20px",b.style.boxSizing="border-box")};f.x&&(c-=f.bar),b.wrapper.style.height=e+"px",0<this.s.iLeftColumns&&((e=b.left.wrapper).style.width=g+"px",e.style.height="1px",e.style.right=i?(e.style.left="",0):(e.style.left=0,""),b.left.body.style.height=c+"px",b.left.foot&&(b.left.foot.style.top=(f.x?f.bar:0)+"px"),k(b.left.liner,g),b.left.liner.style.height=c+"px",b.left.liner.style.maxHeight=c+"px"),0<this.s.iRightColumns&&((e=b.right.wrapper).style.width=h+"px",e.style.height="1px",this.s.rtl?(e.style.left=f.y?f.bar+"px":0,e.style.right=""):(e.style.left="",e.style.right=f.y?f.bar+"px":0),b.right.body.style.height=c+"px",b.right.foot&&(b.right.foot.style.top=(f.x?f.bar:0)+"px"),k(b.right.liner,h),b.right.liner.style.height=c+"px",b.right.liner.style.maxHeight=c+"px",b.right.headBlock.style.display=f.y?"block":"none",b.right.footBlock.style.display=f.y?"block":"none")},_fnDTOverflow:function(){var a=this.s.dt.nTable,b=a.parentNode,c={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};return a.offsetWidth>b.clientWidth&&(c.x=!0),a.offsetHeight>b.clientHeight&&(c.y=!0),c},_fnDraw:function(a){this._fnGridLayout(),this._fnCloneLeft(a),this._fnCloneRight(a),null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right),d(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(a){if(!(this.s.iRightColumns<=0)){var b,c=[];for(b=this.s.iTableColumns-this.s.iRightColumns;b<this.s.iTableColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.right,this.dom.grid.right,c,a)}},_fnCloneLeft:function(a){if(!(this.s.iLeftColumns<=0)){var b,c=[];for(b=0;b<this.s.iLeftColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.left,this.dom.grid.left,c,a)}},_fnCopyLayout:function(a,b,c){for(var e=[],f=[],g=[],h=0,i=a.length;h<i;h++){var k=[];k.nTr=d(a[h].nTr).clone(c,!1)[0];for(var l=0,o=this.s.iTableColumns;l<o;l++)if(-1!==d.inArray(l,b)){var q=d.inArray(a[h][l].cell,g);-1===q?(q=d(a[h][l].cell).clone(c,!1)[0],f.push(q),g.push(a[h][l].cell),k.push({cell:q,unique:a[h][l].unique})):k.push({cell:f[q],unique:a[h][l].unique})}e.push(k)}return e},_fnClone:function(a,b,c,e){var g,h,i,k,l,o,q,n,m,f=this,j=this.s.dt;if(e){for(d(a.header).remove(),a.header=d(this.dom.header).clone(!0,!1)[0],a.header.className+=" DTFC_Cloned",a.header.style.width="100%",b.head.appendChild(a.header),n=this._fnCopyLayout(j.aoHeader,c,!0),(k=d(">thead",a.header)).empty(),g=0,h=n.length;g<h;g++)k[0].appendChild(n[g].nTr);j.oApi._fnDrawHead(j,n,!0)}else for(n=this._fnCopyLayout(j.aoHeader,c,!1),m=[],j.oApi._fnDetectHeader(m,d(">thead",a.header)[0]),g=0,h=n.length;g<h;g++)for(i=0,k=n[g].length;i<k;i++)m[g][i].cell.className=n[g][i].cell.className,d("span.DataTables_sort_icon",m[g][i].cell).each(function(){this.className=d("span.DataTables_sort_icon",n[g][i].cell)[0].className});this._fnEqualiseHeights("thead",this.dom.header,a.header),"auto"==this.s.sHeightMatch&&d(">tbody>tr",f.dom.body).css("height","auto"),null!==a.body&&(d(a.body).remove(),a.body=null),a.body=d(this.dom.body).clone(!0)[0],a.body.className+=" DTFC_Cloned",a.body.style.paddingBottom=j.oScroll.iBarWidth+"px",a.body.style.marginBottom=2*j.oScroll.iBarWidth+"px",null!==a.body.getAttribute("id")&&a.body.removeAttribute("id"),d(">thead>tr",a.body).empty(),d(">tfoot",a.body).remove();var p=d("tbody",a.body)[0];if(d(p).empty(),0<j.aiDisplay.length){for(h=d(">thead>tr",a.body)[0],q=0;q<c.length;q++)l=c[q],(o=d(j.aoColumns[l].nTh).clone(!0)[0]).innerHTML="",(k=o.style).paddingTop="0",k.paddingBottom="0",k.borderTopWidth="0",k.borderBottomWidth="0",k.height=0,k.width=f.s.aiInnerWidths[l]+"px",h.appendChild(o);d(">tbody>tr",f.dom.body).each(function(a){a=!1===f.s.dt.oFeatures.bServerSide?f.s.dt.aiDisplay[f.s.dt._iDisplayStart+a]:a;var b=f.s.dt.aoData[a].anCells||d(this).children("td, th"),e=this.cloneNode(!1);for(e.removeAttribute("id"),e.setAttribute("data-dt-row",a),q=0;q<c.length;q++)l=c[q],0<b.length&&((o=d(b[l]).clone(!0,!0)[0]).removeAttribute("id"),o.setAttribute("data-dt-row",a),o.setAttribute("data-dt-column",j.oApi._fnVisibleToColumnIndex(j,l)),e.appendChild(o));p.appendChild(e)})}else d(">tbody>tr",f.dom.body).each(function(){(o=this.cloneNode(!0)).className=o.className+" DTFC_NoData",d("td",o).html(""),p.appendChild(o)});if(a.body.style.width="100%",a.body.style.margin="0",a.body.style.padding="0",j.oScroller!==t&&(h=j.oScroller.dom.force,b.forcer?b.forcer.style.height=h.style.height:(b.forcer=h.cloneNode(!0),b.liner.appendChild(b.forcer))),b.liner.appendChild(a.body),this._fnEqualiseHeights("tbody",f.dom.body,a.body),null!==j.nTFoot){if(e){for(null!==a.footer&&a.footer.parentNode.removeChild(a.footer),a.footer=d(this.dom.footer).clone(!0,!0)[0],a.footer.className+=" DTFC_Cloned",a.footer.style.width="100%",b.foot.appendChild(a.footer),n=this._fnCopyLayout(j.aoFooter,c,!0),(b=d(">tfoot",a.footer)).empty(),g=0,h=n.length;g<h;g++)b[0].appendChild(n[g].nTr);j.oApi._fnDrawHead(j,n,!0)}else for(n=this._fnCopyLayout(j.aoFooter,c,!1),b=[],j.oApi._fnDetectHeader(b,d(">tfoot",a.footer)[0]),g=0,h=n.length;g<h;g++)for(i=0,k=n[g].length;i<k;i++)b[g][i].cell.className=n[g][i].cell.className;this._fnEqualiseHeights("tfoot",this.dom.footer,a.footer)}b=j.oApi._fnGetUniqueThs(j,d(">thead",a.header)[0]),d(b).each(function(a){l=c[a],this.style.width=f.s.aiInnerWidths[l]+"px"}),null!==f.s.dt.nTFoot&&(b=j.oApi._fnGetUniqueThs(j,d(">tfoot",a.footer)[0]),d(b).each(function(a){l=c[a],this.style.width=f.s.aiInnerWidths[l]+"px"}))},_fnGetTrNodes:function(a){for(var b=[],c=0,d=a.childNodes.length;c<d;c++)"TR"==a.childNodes[c].nodeName.toUpperCase()&&b.push(a.childNodes[c]);return b},_fnEqualiseHeights:function(a,b,c){if("none"!=this.s.sHeightMatch||"thead"===a||"tfoot"===a){var e,f,g=b.getElementsByTagName(a)[0];c=c.getElementsByTagName(a)[0];(a=d(">"+a+">tr:eq(0)",b).children(":first")).outerHeight(),a.height();g=this._fnGetTrNodes(g),b=this._fnGetTrNodes(c);var h=[];for(c=0,a=b.length;c<a;c++)e=(e=g[c].offsetHeight)<(f=b[c].offsetHeight)?f:e,"semiauto"==this.s.sHeightMatch&&(g[c]._DTTC_iHeight=e),h.push(e);for(c=0,a=b.length;c<a;c++)b[c].style.height=h[c]+"px",g[c].style.height=h[c]+"px"}},_firefoxScrollError:function(){if(u===t){var a=d("<div/>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body");u=a[0].clientWidth===a[0].offsetWidth&&0!==this._fnDTOverflow().bar,a.remove()}return u}}),m.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"},m.version="3.2.3",s.Api.register("fixedColumns()",function(){return this}),s.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnUpdate()})}),s.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnRedrawLayout()})}),s.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(a,b){a._oFixedColumns&&a._oFixedColumns.fnRecalculateHeight(this.row(b).node())})}),s.Api.register("fixedColumns().rowIndex()",function(a){return(a=d(a)).parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[a.index()]:this.row(a).index()}),s.Api.register("fixedColumns().cellIndex()",function(a){if((a=d(a)).parents(".DTFC_Cloned").length){var b=a.parent().index();b=this.rows({page:"current"}).indexes()[b],a=a.parents(".DTFC_LeftWrapper").length?a.index():this.columns().flatten().length-this.context[0]._oFixedColumns.s.iRightColumns+a.index();return{row:b,column:this.column.index("toData",a),columnVisible:a}}return this.cell(a).index()}),d(r).on("init.dt.fixedColumns",function(a,b){if("dt"===a.namespace){var c=b.oInit.fixedColumns,e=s.defaults.fixedColumns;(c||e)&&(e=d.extend({},c,e),!1!==c&&new m(b,e))}}),d.fn.dataTable.FixedColumns=m,d.fn.DataTable.FixedColumns=m}),function(d){"function"==typeof define&&define.amd?define("datatables.net-fixedheader",["jquery","datatables.net"],function(g){return d(g,window,document)}):"object"==typeof exports?module.exports=function(g,h){return g||(g=window),h&&h.fn.dataTable||(h=require("datatables.net")(g,h).$),d(h,g,g.document)}:d(jQuery,window,document)}(function(d,g,h,k){var j=d.fn.dataTable,l=0,i=function(b,a){if(!(this instanceof i))throw"FixedHeader must be initialised with the 'new' keyword.";!0===a&&(a={}),b=new j.Api(b),this.c=d.extend(!0,{},i.defaults,a),this.s={dt:b,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:d(g).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:b.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+l++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:d(b.table().header()),tbody:d(b.table().body()),tfoot:d(b.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var e=b.settings()[0];if(e._fixedHeader)throw"FixedHeader already initialised on table "+e.nTable.id;(e._fixedHeader=this)._constructor()};return d.extend(i.prototype,{enable:function(b){this.s.enable=b,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(b){return b!==k&&(this.c.headerOffset=b,this.update()),this.c.headerOffset},footerOffset:function(b){return b!==k&&(this.c.footerOffset=b,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var b=this,a=this.s.dt;d(g).on("scroll"+this.s.namespace,function(){b._scroll()}).on("resize"+this.s.namespace,function(){b.s.position.windowHeight=d(g).height(),b.update()});var e=d(".fh-fixedHeader");!this.c.headerOffset&&e.length&&(this.c.headerOffset=e.outerHeight()),e=d(".fh-fixedFooter"),!this.c.footerOffset&&e.length&&(this.c.footerOffset=e.outerHeight()),a.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc",function(){b.update()}),a.on("destroy.dtfc",function(){a.off(".dtfc"),d(g).off(b.s.namespace)}),this._positions(),this._scroll()},_clone:function(b,a){var e=this.s.dt,c=this.dom[b],f="header"===b?this.dom.thead:this.dom.tfoot;!a&&c.floating?c.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(c.floating&&(c.placeholder.remove(),this._unsize(b),c.floating.children().detach(),c.floating.remove()),c.floating=d(e.table().node().cloneNode(!1)).css("table-layout","fixed").removeAttr("id").append(f).appendTo("body"),c.placeholder=f.clone(!1),c.placeholder.find("*[id]").removeAttr("id"),c.host.prepend(c.placeholder),this._matchWidths(c.placeholder,c.floating))},_matchWidths:function(b,a){var c=function(b,c){d(b,a).each(function(a){d(this).css({width:c[a],minWidth:c[a]})})},f=(e=function(a){return d(a,b).map(function(){return d(this).width()}).toArray()})("th"),e=e("td");c("th",f),c("td",e)},_unsize:function(b){var a=this.dom[b].floating;a&&("footer"===b||"header"===b&&!this.s.autoWidth)?d("th, td",a).css({width:"",minWidth:""}):a&&"header"===b&&d("th, td",a).css("min-width","")},_horizontal:function(b,a){var e=this.dom[b],c=this.s.position,d=this.s.scrollLeft;e.floating&&d[b]!==a&&(e.floating.css("left",c.left-a),d[b]=a)},_modeChange:function(b,a,e){var c=this.dom[a],f=this.s.position,g=d.contains(this.dom["footer"===a?"tfoot":"thead"][0],h.activeElement)?h.activeElement:null;"in-place"===b?(c.placeholder&&(c.placeholder.remove(),c.placeholder=null),this._unsize(a),"header"===a?c.host.prepend(this.dom.thead):c.host.append(this.dom.tfoot),c.floating&&(c.floating.remove(),c.floating=null)):"in"===b?(this._clone(a,e),c.floating.addClass("fixedHeader-floating").css("header"===a?"top":"bottom",this.c[a+"Offset"]).css("left",f.left+"px").css("width",f.width+"px"),"footer"===a&&c.floating.css("top","")):"below"===b?(this._clone(a,e),c.floating.addClass("fixedHeader-locked").css("top",f.tfootTop-f.theadHeight).css("left",f.left+"px").css("width",f.width+"px")):"above"===b&&(this._clone(a,e),c.floating.addClass("fixedHeader-locked").css("top",f.tbodyTop).css("left",f.left+"px").css("width",f.width+"px")),g&&g!==h.activeElement&&g.focus(),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[a+"Mode"]=b},_positions:function(){var b=this.s.dt.table(),a=this.s.position,e=this.dom,c=(b=d(b.node())).children("thead"),f=b.children("tfoot");e=e.tbody;a.visible=b.is(":visible"),a.width=b.outerWidth(),a.left=b.offset().left,a.theadTop=c.offset().top,a.tbodyTop=e.offset().top,a.theadHeight=a.tbodyTop-a.theadTop,f.length?(a.tfootTop=f.offset().top,a.tfootBottom=a.tfootTop+f.outerHeight(),a.tfootHeight=a.tfootBottom-a.tfootTop):(a.tfootTop=a.tbodyTop+e.outerHeight(),a.tfootBottom=a.tfootTop,a.tfootHeight=a.tfootTop)},_scroll:function(b){var f,a=d(h).scrollTop(),e=d(h).scrollLeft(),c=this.s.position;this.s.enable&&(this.c.header&&(f=!c.visible||a<=c.theadTop-this.c.headerOffset?"in-place":a<=c.tfootTop-c.theadHeight-this.c.headerOffset?"in":"below",(b||f!==this.s.headerMode)&&this._modeChange(f,"header",b),this._horizontal("header",e)),this.c.footer&&this.dom.tfoot.length)&&(a=!c.visible||a+c.windowHeight>=c.tfootBottom+this.c.footerOffset?"in-place":c.windowHeight+a>c.tbodyTop+c.tfootHeight+this.c.footerOffset?"in":"above",(b||a!==this.s.footerMode)&&this._modeChange(a,"footer",b),this._horizontal("footer",e))}}),i.version="3.1.3",i.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},d.fn.dataTable.FixedHeader=i,d.fn.DataTable.FixedHeader=i,d(h).on("init.dt.dtfh",function(b,a){if("dt"===b.namespace){var e=a.oInit.fixedHeader,c=j.defaults.fixedHeader;!e&&!c||a._fixedHeader||(c=d.extend({},c,e),!1!==e&&new i(a,c))}}),j.Api.register("fixedHeader()",function(){}),j.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(b){(b=b._fixedHeader)&&b.update()})}),j.Api.register("fixedHeader.enable()",function(b){return this.iterator("table",function(a){a=a._fixedHeader,b=b===k||b,a&&b!==a.s.enable&&a.enable(b)})}),j.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(b){(b=b._fixedHeader)&&b.s.enable&&b.enable(!1)})}),d.each(["header","footer"],function(b,a){j.Api.register("fixedHeader."+a+"Offset()",function(b){var c=this.context;return b===k?c.length&&c[0]._fixedHeader?c[0]._fixedHeader[a+"Offset"]():k:this.iterator("table",function(c){(c=c._fixedHeader)&&c[a+"Offset"](b)})})}),i}),function(e){"function"==typeof define&&define.amd?define("datatables.net-select",["jquery","datatables.net"],function(j){return e(j,window,document)}):"object"==typeof exports?module.exports=function(j,m){return j||(j=window),m&&m.fn.dataTable||(m=require("datatables.net")(j,m).$),e(m,j,j.document)}:e(jQuery,window,document)}(function(e,j,m,h){function v(a,c,b){var d;d=function(b,c){if(c<b){var d=c;c=b,b=d}var f=!1;return a.columns(":visible").indexes().filter(function(a){return a===b&&(f=!0),a===c?!(f=!1):f})};var f=function(b,c){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(b)>d.indexOf(c)){var f=c;c=b,b=f}var e=!1;return d.filter(function(a){return a===b&&(e=!0),a===c?!(e=!1):e})};b=a.cells({selected:!0}).any()||b?(d=d(b.column,c.column),f(b.row,c.row)):(d=d(0,c.column),f(0,c.row)),b=a.cells(b,d).flatten(),a.cells(c,{selected:!0}).any()?a.cells(b).deselect():a.cells(b).select()}function r(a){var c=a.settings()[0]._select.selector;e(a.table().container()).off("mousedown.dtSelect",c).off("mouseup.dtSelect",c).off("click.dtSelect",c),e("body").off("click.dtSelect"+a.table().node().id)}function x(a){var c=e(a.table().container()),b=a.settings()[0],d=b._select.selector;c.on("mousedown.dtSelect",d,function(b){(b.shiftKey||b.metaKey||b.ctrlKey)&&c.css("-moz-user-select","none").one("selectstart.dtSelect",d,function(){return!1})}).on("mouseup.dtSelect",d,function(){c.css("-moz-user-select","")}).on("click.dtSelect",d,function(b){var c=a.select.items();if(!j.getSelection||!e.trim(j.getSelection().toString())){var d=a.settings()[0];if(e(b.target).closest("div.dataTables_wrapper")[0]==a.table().container()){var k=a.cell(e(b.target).closest("td, th"));if(k.any()){var g=e.Event("user-select.dt");i(a,g,[c,k,b]),g.isDefaultPrevented()||(g=k.index(),"row"===c?(c=g.row,s(b,a,d,"row",c)):"column"===c?(c=k.index().column,s(b,a,d,"column",c)):"cell"===c&&(c=k.index(),s(b,a,d,"cell",c)),d._select_lastCell=g)}}}}),e("body").on("click.dtSelect"+a.table().node().id,function(c){b._select.blurable&&!e(c.target).parents().filter(a.table().container()).length&&0!==e(c.target).parents("html").length&&!e(c.target).parents("div.DTE").length&&p(b,!0)})}function i(a,c,b,d){d&&!a.flatten().length||("string"==typeof c&&(c+=".dt"),b.unshift(a),e(a.table().node()).trigger(c,b))}function y(a){var c=a.settings()[0];if(c._select.info&&c.aanFeatures.i&&"api"!==a.select.style()){var b=a.rows({selected:!0}).flatten().length,d=a.columns({selected:!0}).flatten().length,f=a.cells({selected:!0}).flatten().length,l=function(b,c,d){b.append(e('<span class="select-item"/>').append(a.i18n("select."+c+"s",{_:"%d "+c+"s selected",0:"",1:"1 "+c+" selected"},d)))};e.each(c.aanFeatures.i,function(c,a){a=e(a);var g=e('<span class="select-info"/>');l(g,"row",b),l(g,"column",d),l(g,"cell",f);var h=a.children("span.select-info");h.length&&h.remove(),""!==g.text()&&a.append(g)})}}function z(a,c,b,d){var f=a[c+"s"]({search:"applied"}).indexes(),l=(d=e.inArray(d,f),e.inArray(b,f));if(a[c+"s"]({selected:!0}).any()||-1!==d){if(l<d){var g=l;l=d,d=g}f.splice(l+1,f.length),f.splice(0,d)}else f.splice(e.inArray(b,f)+1,f.length);a[c](b,{selected:!0}).any()?(f.splice(e.inArray(b,f),1),a[c+"s"](f).deselect()):a[c+"s"](f).select()}function p(a,c){if(c||"single"===a._select.style){var b=new g.Api(a);b.rows({selected:!0}).deselect(),b.columns({selected:!0}).deselect(),b.cells({selected:!0}).deselect()}}function s(a,c,b,d,f){var e=c.select.style(),g=c[d](f,{selected:!0}).any();"os"===e?a.ctrlKey||a.metaKey?c[d](f).select(!g):a.shiftKey?"cell"===d?v(c,f,b._select_lastCell||null):z(c,d,f,b._select_lastCell?b._select_lastCell[d]:null):(a=c[d+"s"]({selected:!0}),g&&1===a.flatten().length?c[d](f).deselect():(a.deselect(),c[d](f).select())):"multi+shift"==e&&a.shiftKey?"cell"===d?v(c,f,b._select_lastCell||null):z(c,d,f,b._select_lastCell?b._select_lastCell[d]:null):c[d](f).select(!g)}function q(a,c){return function(b){return b.i18n("buttons."+a,c)}}function t(a){return"draw.dt.DT"+(a=a._eventNamespace)+" select.dt.DT"+a+" deselect.dt.DT"+a}var g=e.fn.dataTable;g.select={},g.select.version="1.2.3",g.select.init=function(a){var c=a.settings()[0],b=c.oInit.select,d=g.defaults.select,f=(b=b===h?d:b,d="row","api"),l=!1,w=!0,k="td, th",j="selected",i=!1;c._select={},!0===b?(f="os",i=!0):"string"==typeof b?(f=b,i=!0):e.isPlainObject(b)&&(b.blurable!==h&&(l=b.blurable),b.info!==h&&(w=b.info),b.items!==h&&(d=b.items),b.style!==h&&(f=b.style,i=!0),b.selector!==h&&(k=b.selector),b.className!==h)&&(j=b.className),a.select.selector(k),a.select.items(d),a.select.style(f),a.select.blurable(l),a.select.info(w),c._select.className=j,e.fn.dataTable.ext.order["select-checkbox"]=function(b,c){return this.api().column(c,{order:"index"}).nodes().map(function(c){return"row"===b._select.items?e(c).parent().hasClass(b._select.className):"cell"===b._select.items&&e(c).hasClass(b._select.className)})},!i&&e(a.table().node()).hasClass("selectable")&&a.select.style("os")},e.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,c){g.ext.selector[c.type].push(function(b,a,f){var e,g=[];if((a=a.selected)===h)return f;for(var k=0,i=f.length;k<i;k++)e=b[c.prop][f[k]],(!0===a&&!0===e._select_selected||!1===a&&!e._select_selected)&&g.push(f[k]);return g})}),g.ext.selector.cell.push(function(a,c,b){var d,f=[];if((c=c.selected)===h)return b;for(var e=0,g=b.length;e<g;e++)d=a.aoData[b[e].row],(!0===c&&d._selected_cells&&!0===d._selected_cells[b[e].column]||!1===c&&(!d._selected_cells||!d._selected_cells[b[e].column]))&&f.push(b[e]);return f});var n=g.Api.register,o=g.Api.registerPlural;n("select()",function(){return this.iterator("table",function(a){g.select.init(new g.Api(a))})}),n("select.blurable()",function(a){return a===h?this.context[0]._select.blurable:this.iterator("table",function(c){c._select.blurable=a})}),n("select.info()",function(a){return y===h?this.context[0]._select.info:this.iterator("table",function(c){c._select.info=a})}),n("select.items()",function(a){return a===h?this.context[0]._select.items:this.iterator("table",function(c){c._select.items=a,i(new g.Api(c),"selectItems",[a])})}),n("select.style()",function(a){return a===h?this.context[0]._select.style:this.iterator("table",function(c){if(c._select.style=a,!c._select_init){var b=new g.Api(c);c.aoRowCreatedCallback.push({fn:function(b,a,d){for((a=c.aoData[d])._select_selected&&e(b).addClass(c._select.className),b=0,d=c.aoColumns.length;b<d;b++)(c.aoColumns[b]._select_selected||a._selected_cells&&a._selected_cells[b])&&e(a.anCells[b]).addClass(c._select.className)},sName:"select-deferRender"}),b.on("preXhr.dt.dtSelect",function(){var c=b.rows({selected:!0}).ids(!0).filter(function(b){return b!==h}),a=b.cells({selected:!0}).eq(0).map(function(c){var a=b.row(c.row).id(!0);return a?{row:a,column:c.column}:h}).filter(function(b){return b!==h});b.one("draw.dt.dtSelect",function(){b.rows(c).select(),a.any()&&a.each(function(c){b.cells(c.row,c.column).select()})})}),b.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){y(b)}),b.on("destroy.dtSelect",function(){r(b),b.off(".dtSelect")})}var d=new g.Api(c);r(d),"api"!==a&&x(d),i(new g.Api(c),"selectStyle",[a])})}),n("select.selector()",function(a){return a===h?this.context[0]._select.selector:this.iterator("table",function(c){r(new g.Api(c)),c._select.selector=a,"api"!==c._select.style&&x(new g.Api(c))})}),o("rows().select()","row().select()",function(a){var c=this;return!1===a?this.deselect():(this.iterator("row",function(b,c){p(b),b.aoData[c]._select_selected=!0,e(b.aoData[c].nTr).addClass(b._select.className)}),this.iterator("table",function(b,a){i(c,"select",["row",c[a]],!0)}),this)}),o("columns().select()","column().select()",function(a){var c=this;return!1===a?this.deselect():(this.iterator("column",function(b,c){p(b),b.aoColumns[c]._select_selected=!0;var a=new g.Api(b).column(c);e(a.header()).addClass(b._select.className),e(a.footer()).addClass(b._select.className),a.nodes().to$().addClass(b._select.className)}),this.iterator("table",function(b,a){i(c,"select",["column",c[a]],!0)}),this)}),o("cells().select()","cell().select()",function(a){var c=this;return!1===a?this.deselect():(this.iterator("cell",function(b,c,a){p(b),(c=b.aoData[c])._selected_cells===h&&(c._selected_cells=[]),c._selected_cells[a]=!0,c.anCells&&e(c.anCells[a]).addClass(b._select.className)}),this.iterator("table",function(b,a){i(c,"select",["cell",c[a]],!0)}),this)}),o("rows().deselect()","row().deselect()",function(){var a=this;return this.iterator("row",function(c,b){c.aoData[b]._select_selected=!1,e(c.aoData[b].nTr).removeClass(c._select.className)}),this.iterator("table",function(c,b){i(a,"deselect",["row",a[b]],!0)}),this}),o("columns().deselect()","column().deselect()",function(){var a=this;return this.iterator("column",function(c,b){c.aoColumns[b]._select_selected=!1;var a=new g.Api(c),f=a.column(b);e(f.header()).removeClass(c._select.className),e(f.footer()).removeClass(c._select.className),a.cells(null,b).indexes().each(function(b){var a=c.aoData[b.row],d=a._selected_cells;a.anCells&&(!d||!d[b.column])&&e(a.anCells[b.column]).removeClass(c._select.className)})}),this.iterator("table",function(c,b){i(a,"deselect",["column",a[b]],!0)}),this}),o("cells().deselect()","cell().deselect()",function(){var a=this;return this.iterator("cell",function(c,b,a){(b=c.aoData[b])._selected_cells[a]=!1,b.anCells&&!c.aoColumns[a]._select_selected&&e(b.anCells[a]).removeClass(c._select.className)}),this.iterator("table",function(c,b){i(a,"deselect",["cell",a[b]],!0)}),this});var u=0;return e.extend(g.ext.buttons,{selected:{text:q("selected","Selected"),className:"buttons-selected",init:function(a,c,b){var d=this;b._eventNamespace=".select"+u++,a.on(t(b),function(){var a=d.rows({selected:!0}).any()||d.columns({selected:!0}).any()||d.cells({selected:!0}).any();d.enable(a)}),this.disable()},destroy:function(a,c,b){a.off(b._eventNamespace)}},selectedSingle:{text:q("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a,c,b){var d=this;b._eventNamespace=".select"+u++,a.on(t(b),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(1===b)}),this.disable()},destroy:function(a,c,b){a.off(b._eventNamespace)}},selectAll:{text:q("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:q("selectNone","Deselect all"),className:"buttons-select-none",action:function(){p(this.settings()[0],!0)},init:function(a,c,b){var d=this;b._eventNamespace=".select"+u++,a.on(t(b),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(0<b)}),this.disable()},destroy:function(a,c,b){a.off(b._eventNamespace)}}}),e.each(["Row","Column","Cell"],function(a,c){var b=c.toLowerCase();g.ext.buttons["select"+c+"s"]={text:q("select"+c+"s","Select "+b+"s"),className:"buttons-select-"+b+"s",action:function(){this.select.items(b)},init:function(a){var c=this;a.on("selectItems.dt.DT",function(a,d,e){c.active(e===b)})}}}),e(m).on("preInit.dt.dtSelect",function(a,c){"dt"===a.namespace&&g.select.init(new g.Api(c))}),g.select}),define("mockup-patterns-datatables",["jquery","pat-base","datatables.net","datatables.net-bs","datatables.net-buttons","datatables.net-buttons-colvis","datatables.net-buttons-flash","datatables.net-buttons-html5","datatables.net-buttons-print","datatables.net-buttons-bs","datatables.net-colreorder","datatables.net-rowreorder","datatables.net-fixedcolumns","datatables.net-fixedheader","datatables.net-select"],function($,Base,Dt){"use strict";return Base.extend({name:"datatables",trigger:".pat-datatables",parser:"mockup",table:null,defaults:{},init:function(){this.table=this.$el.DataTable(this.options)}})}),define("mockup-patterns-backdrop",["jquery","pat-base"],function($,Base){"use strict";return Base.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var self=this;self.$backdrop=$("> ."+self.options.className,self.$el),0===self.$backdrop.size()&&(self.$backdrop=$("<div/>").hide().appendTo(self.$el).addClass(self.options.className),null!==self.options.zIndex&&self.$backdrop.css("z-index",self.options.zIndex)),!0===self.options.closeOnEsc&&$(document).on("keydown",function(e,data){self.$el.is("."+self.options.classActiveName)&&27===e.keyCode&&self.hide()}),!0===self.options.closeOnClick&&self.$backdrop.on("click",function(){self.$el.is("."+self.options.classActiveName)&&self.hide()})},show:function(){this.$el.hasClass(this.options.classActiveName)||(this.emit("show"),this.$backdrop.css("opacity","0").show(),this.$el.addClass(this.options.classActiveName),this.$backdrop.animate({opacity:this.options.opacity},500),this.emit("shown"))},hide:function(){this.$el.hasClass(this.options.classActiveName)&&(this.emit("hide"),this.$backdrop.animate({opacity:"0"},500).hide(),this.$el.removeClass(this.options.classActiveName),this.emit("hidden"))}})}),function(root,factory){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)});else if("undefined"!=typeof exports){var _=require("underscore");factory(root,exports,_)}else root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone,array=[],slice=array.slice;Backbone.VERSION="1.1.2",Backbone.$=$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){return eventsApi(this,"on",name,[callback,context])&&callback&&(this._events||(this._events={}),(this._events[name]||(this._events[name]=[])).push({callback:callback,context:context,ctx:context||this})),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events=void 0,this;for(i=0,l=(names=name?[name]:_.keys(this._events)).length;i<l;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;j<k;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;for(var id in callback||"object"!=typeof name||(callback=this),obj&&((listeningTo={})[obj._listenId]=obj),listeningTo)(obj=listeningTo[id]).off(name,callback,this),(remove||_.isEmpty(obj._events))&&delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;i<l;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args);return}};_.each({listenTo:"on",listenToOnce:"once"},function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={});return callback||"object"!=typeof name||(callback=this),(listeningTo[obj._listenId||(obj._listenId=_.uniqueId("l"))]=obj)[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection&&(this.collection=options.collection),options.parse&&(attrs=this.parse(attrs,options)||{}),attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;for(attr in unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]),attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=options);for(var i=0,l=changes.length;i<l;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)options=this._pending,this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return!!this.hasChanged()&&_.clone(this.changed);var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){void 0===(options=options?_.clone(options):{}).parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){if(!model.set(model.parse(resp,options),options))return!1;success&&success(model,resp,options),model.trigger("sync",model,resp,options)},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options))return!1;success&&success(model,resp,options),model.trigger("sync",model,resp,options)},wrapError(this,options),"patch"===(method=this.isNew()?"create":options.patch?"patch":"update")&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return!error||(this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1)}});_.each(["keys","values","pairs","invert","pick","omit"],function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var i,l,index,model,singular=!_.isArray(models);for(options||(options={}),i=0,l=(models=singular?[models]:_.clone(models)).length;i<l;i++)(model=models[i]=this.get(models[i]))&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model,options));return singular?models[0]:models},set:function(models,options){(options=_.defaults({},options,setOptions)).parse&&(models=this.parse(models,options));var i,l,id,model,attrs,existing,sort,singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&!1!==options.sort,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!(sortable||!add||!remove)&&[];for(i=0,l=models.length;i<l;i++){if(id=(attrs=models[i]||{})instanceof Model?model=attrs:attrs[targetModel.prototype.idAttribute||"id"],existing=this.get(id))remove&&(modelMap[existing.cid]=!0),merge&&(attrs=attrs===model?model.attributes:attrs,options.parse&&(attrs=existing.parse(attrs,options)),existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0)),models[i]=existing;else if(add){if(!(model=models[i]=this._prepareModel(attrs,options)))continue;toAdd.push(model),this._addReference(model,options)}model=existing||model,!order||!model.isNew()&&modelMap[model.id]||order.push(model),modelMap[model.id]=!0}if(remove){for(i=0,l=this.length;i<l;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length||order&&order.length)if(sortable&&(sort=!0),this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;i<l;i++)this.models.splice(at+i,0,toAdd[i]);else{order&&(this.models.length=0);var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;i<l;i++)this.models.push(orderedModels[i])}if(sort&&this.sort({silent:!0}),!options.silent){for(i=0,l=toAdd.length;i<l;i++)(model=toAdd[i]).trigger("add",model,this,options);(sort||order&&order.length)&&this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;i<l;i++)this._removeReference(this.models[i],options);return options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(null!=obj)return this._byId[obj]||this._byId[obj.id]||this._byId[obj.cid]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){void 0===(options=options?_.clone(options):{}).parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs;var model=new(((options=options?_.clone(options):{}).collection=this).model)(attrs,options);return model.validationError?(this.trigger("invalid",this,model.validationError,options),!1):model},_addReference:function(model,options){null!=(this._byId[model.cid]=model).id&&(this._byId[model.id]=model),model.collection||(model.collection=this),model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});_.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});_.each(["groupBy","countBy","sortBy","indexBy"],function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],!1!==delegate&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;for(var key in this.undelegateEvents(),events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs.class=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){if(xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend)return beforeSend.apply(this,arguments)}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"===params.type&&noXhrPatch&&(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},execute:function(callback,args){callback&&callback.apply(this,args)},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)"),new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){return i===params.length-1?param||null:param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/#.*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=decodeURI(this.location.pathname+this.location.search);var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.slice(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);if(this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange){var frame=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=frame.hide().appendTo("body")[0].contentWindow,this.navigate(fragment)}this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment)return!1;this.iframe&&this.navigate(current),this.loadUrl()},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){if(handler.route.test(fragment))return handler.callback(fragment),!0})},navigate:function(fragment,options){if(!History.started)return!1;options&&!0!==options||(options={trigger:!!options});var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=fragment.replace(pathStripper,""),this.fragment!==fragment){if(""===(this.fragment=fragment)&&"/"!==url&&(url=url.slice(0,-1)),this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}return options.trigger?this.loadUrl(fragment):void 0}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;Model.extend=Collection.extend=Router.extend=View.extend=History.extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}};return Backbone}),define("mockup-router",["underscore","backbone"],function(_,Backbone){"use strict";var regexEscape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};return new(Backbone.Router.extend({actions:[],redirects:{},addRoute:function(patternName,id,callback,context,pathExp,expReplace){void 0===_.findWhere(this.patterns,{patternName:patternName,id:id})&&this.actions.push({patternName:patternName,id:id,callback:callback,context:context,pathExp:pathExp,expReplace:expReplace});var regex=new RegExp("("+regexEscape(patternName)+":"+regexEscape(id)+")");this.route(regex,"handleRoute")},addRedirect:function(pathExp,destination){this.redirects[pathExp]=destination},handleRoute:function(pattern){var parts=pattern.split(":"),patternName=parts[0],id=parts[1],action=_.findWhere(this.actions,{patternName:patternName,id:id});action&&action.callback.call(action.context)},redirect:function(){var newPath,regex,hash,path=window.parent.location.pathname;if(_.some(this.actions,function(action){if(action.pathExp&&(regex=new RegExp(action.pathExp),path.match(regex))){hash="!/"+action.patternName+":"+action.id;var replaceWith="";return action.expReplace&&(replaceWith=action.expReplace),newPath=path.replace(regex,replaceWith),!0}},this),void 0===hash)for(var pathExp in this.redirects)if(regex=new RegExp(pathExp),path.match(regex)){hash="!/"+this.redirects[pathExp],newPath=path.replace(regex,"");break}void 0!==hash&&this._changeLocation.apply(this,[newPath,hash])},_changeLocation:function(path,hash){window.parent.location.hash=hash,window.parent.location.pathname=path},start:function(){Backbone.history.start()},reset:function(){this.actions=[]}}))}),define("mockup-utils",["jquery"],function($){"use strict";var Loading=function(options){var self=this;self.className="plone-loader";return options||(options={}),self.options=$.extend({},{backdrop:null,zIndex:10005},options),self.init=function(){self.$el=$("."+self.className),0===self.$el.length&&(self.$el=$("<div><div></div></div>"),self.$el.addClass(self.className).hide().appendTo("body"))},self.show=function(closable){self.init(),self.$el.show();var zIndex=self.options.zIndex;"function"==typeof zIndex?zIndex=Math.max(zIndex(),10005):(zIndex=10005,$(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){zIndex=Math.max(zIndex,$(this).css("zIndex")||10005)}),zIndex+=1),self.$el.css("zIndex",zIndex),void 0===closable&&(closable=!0),self.options.backdrop&&(self.options.backdrop.closeOnClick=closable,self.options.backdrop.closeOnEsc=closable,self.options.backdrop.init(),self.options.backdrop.show())},self.hide=function(){self.init(),self.$el.hide()},self},generateId=function(prefix){return void 0===prefix&&(prefix="id"),prefix+Math.floor(65536*(1+Math.random())).toString(16).substring(1)},storage={get:function(name){if(window.localStorage){var val=window.localStorage[name];return"string"==typeof val?JSON.parse(val):void 0}},set:function(name,val){window.localStorage&&(window.localStorage[name]=JSON.stringify(val))}};return{bool:function(val){return"string"==typeof val&&(val=$.trim(val).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(val)},escapeHTML:function(val){return $("<div/>").text(val).html()},removeHTML:function(val){return val.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:generateId,getAuthenticator:function(){var $el=$('input[name="_authenticator"]');return 0===$el.length?0<($el=$('a[href*="_authenticator"]')).length?$el.attr("href").split("_authenticator=")[1]:"":$el.val()},getWindow:function(){var win=window;return win.parent!==window&&(win=win.parent),win},Loading:Loading,loading:new Loading,parseBodyTag:function(txt){return $(/<body[^>]*>[^]*<\/body>/im.exec(txt)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(options){var self=this;return self.options=$.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},options),self.pattern=self.options.pattern,void 0!==self.pattern&&null!==self.pattern||(self.pattern={browsing:!1,basePath:"/"}),self.options.url&&!self.options.vocabularyUrl?self.options.vocabularyUrl=self.options.url:self.pattern.vocabularyUrl&&(self.options.vocabularyUrl=self.pattern.vocabularyUrl),self.valid=Boolean(self.options.vocabularyUrl),self.getBatch=function(page){return{page:page||1,size:self.options.batchSize}},self.getCurrentPath=function(){var currentPath,pattern=self.pattern;"function"==typeof(currentPath=self.currentPath?self.currentPath:pattern.currentPath)&&(currentPath=currentPath());var path=currentPath;return path||(path=pattern.basePath?pattern.basePath:pattern.options.basePath?pattern.options.basePath:"/"),path},self.getCriterias=function(term,searchOptions){void 0===searchOptions&&(searchOptions={});var criterias=[];return(searchOptions=$.extend({},{useBaseCriteria:!0,additionalCriterias:[]},searchOptions)).useBaseCriteria&&(criterias=self.options.baseCriteria.slice(0)),term&&(term+="*",criterias.push({i:self.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:term})),searchOptions.searchPath?criterias.push({i:"path",o:self.options.pathOperator,v:searchOptions.searchPath+"::"+self.options.pathDepth}):self.pattern.browsing&&criterias.push({i:"path",o:self.options.pathOperator,v:self.getCurrentPath()+"::"+self.options.pathDepth}),criterias=criterias.concat(searchOptions.additionalCriterias)},self.getQueryData=function(term,page){var data={query:JSON.stringify({criteria:self.getCriterias(term),sort_on:self.options.sort_on,sort_order:self.options.sort_order}),attributes:JSON.stringify(self.options.attributes)};return page&&(data.batch=JSON.stringify(self.getBatch(page))),data},self.getUrl=function(){var url=self.options.vocabularyUrl;return-1===url.indexOf("?")?url+="?":url+="&",url+$.param(self.getQueryData())},self.selectAjax=function(){return{url:self.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(term,page){return self.getQueryData(term,page)},results:function(data,page){var more=10*page<data.total;return{results:data.results,more:more}}}},self.search=function(term,operation,value,callback,useBaseCriteria,type){void 0===useBaseCriteria&&(useBaseCriteria=!0),void 0===type&&(type="GET");var criteria=[];useBaseCriteria&&(criteria=self.options.baseCriteria.slice(0)),criteria.push({i:term,o:operation,v:value});var data={query:JSON.stringify({criteria:criteria}),attributes:JSON.stringify(self.options.attributes)};$.ajax({url:self.options.vocabularyUrl,dataType:"JSON",data:data,type:type,success:callback})},self},setId:function($el,prefix){void 0===prefix&&(prefix="id");var id=$el.attr("id");return id=void 0===id?generateId(prefix):id.replace(/\./g,"-"),$el.attr("id",id),id},storage:storage}}),define("mockup-i18n",["jquery"],function($){"use strict";return function(){var self=this;self.baseUrl=$("body").attr("data-i18ncatalogurl"),self.baseUrl||(self.baseUrl="/plonejsi18n"),self.currentLanguage=$("html").attr("lang")||"en",1<self.currentLanguage.split("-").length&&(self.currentLanguage=self.currentLanguage.split("-")[0]+"_"+self.currentLanguage.split("-")[1].toUpperCase()),self.storage=null,self.catalogs={},self.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(self.storage=window.localStorage)}catch(e){}self.configure=function(config){for(var key in config)self[key]=config[key]},self._setCatalog=function(domain,language,catalog){domain in self.catalogs||(self.catalogs[domain]={}),self.catalogs[domain][language]=catalog},self._storeCatalog=function(domain,language,catalog){var key=domain+"-"+language;null!==self.storage&&null!==catalog&&(self.storage.setItem(key,JSON.stringify(catalog)),self.storage.setItem(key+"-updated",Date.now()))},self.getUrl=function(domain,language){return self.baseUrl+"?domain="+domain+"&language="+language},self.loadCatalog=function(domain,language){if(void 0===language&&(language=self.currentLanguage),null!==self.storage){var key=domain+"-"+language;if(key in self.storage&&Date.now()-parseInt(self.storage.getItem(key+"-updated"),10)<self.ttl){var catalog=JSON.parse(self.storage.getItem(key));return void self._setCatalog(domain,language,catalog)}}$.getJSON(self.getUrl(domain,language),function(catalog){null!==catalog&&(self._setCatalog(domain,language,catalog),self._storeCatalog(domain,language,catalog))})},self.MessageFactory=function(domain,language){return language=language||self.currentLanguage,function(msgid,keywords){var msgstr,regexp,keyword;if(msgstr=domain in self.catalogs&&language in self.catalogs[domain]&&msgid in self.catalogs[domain][language]?self.catalogs[domain][language][msgid]:msgid,keywords)for(keyword in keywords)keywords.hasOwnProperty(keyword)&&(regexp=new RegExp("\\$\\{"+keyword+"\\}","g"),msgstr=msgstr.replace(regexp,keywords[keyword]));return msgstr}}}}),define("translate",["mockup-i18n"],function(I18N){"use strict";var _t=null;return function(msgid,keywords){if(null===_t){var i18n=new I18N;i18n.loadCatalog("widgets"),_t=i18n.MessageFactory("widgets")}return _t(msgid,keywords)}}),function(factory){"function"==typeof define&&define.amd?define("jquery.form",["jquery"],factory):factory("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function($){"use strict";var feature={};feature.fileapi=void 0!==$("<input type='file'/>").get(0).files,feature.formdata=void 0!==window.FormData;var hasProp=!!$.fn.prop;function doAjaxSubmit(e){var options=e.data;e.isDefaultPrevented()||(e.preventDefault(),$(e.target).ajaxSubmit(options))}function captureSubmittingElement(e){var target=e.target,$el=$(target);if(!$el.is("[type=submit],[type=image]")){var t=$el.closest("[type=submit]");if(0===t.length)return;target=t[0]}var form=this;if("image"==(form.clk=target).type)if(void 0!==e.offsetX)form.clk_x=e.offsetX,form.clk_y=e.offsetY;else if("function"==typeof $.fn.offset){var offset=$el.offset();form.clk_x=e.pageX-offset.left,form.clk_y=e.pageY-offset.top}else form.clk_x=e.pageX-target.offsetLeft,form.clk_y=e.pageY-target.offsetTop;setTimeout(function(){form.clk=form.clk_x=form.clk_y=null},100)}function log(){if($.fn.ajaxSubmit.debug){var msg="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(msg):window.opera&&window.opera.postError&&window.opera.postError(msg)}}$.fn.attr2=function(){if(!hasProp)return this.attr.apply(this,arguments);var val=this.prop.apply(this,arguments);return val&&val.jquery||"string"==typeof val?val:this.attr.apply(this,arguments)},$.fn.ajaxSubmit=function(options){if(!this.length)return log("ajaxSubmit: skipping submit process - no element selected"),this;var method,action,url,$form=this;"function"==typeof options?options={success:options}:void 0===options&&(options={}),method=options.type||this.attr2("method"),(url=(url="string"==typeof(action=options.url||this.attr2("action"))?$.trim(action):"")||window.location.href||"")&&(url=(url.match(/^([^#]+)/)||[])[1]),options=$.extend(!0,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},options);var veto={};if(this.trigger("form-pre-serialize",[this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(options.beforeSerialize&&!1===options.beforeSerialize(this,options))return log("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var traditional=options.traditional;void 0===traditional&&(traditional=$.ajaxSettings.traditional);var qx,elements=[],a=this.formToArray(options.semantic,elements);if(options.data&&(options.extraData=options.data,qx=$.param(options.data,traditional)),options.beforeSubmit&&!1===options.beforeSubmit(a,this,options))return log("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[a,this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=$.param(a,traditional);qx&&(q=q?q+"&"+qx:qx),"GET"==options.type.toUpperCase()?(options.url+=(0<=options.url.indexOf("?")?"&":"?")+q,options.data=null):options.data=q;var callbacks=[];if(options.resetForm&&callbacks.push(function(){$form.resetForm()}),options.clearForm&&callbacks.push(function(){$form.clearForm(options.includeHidden)}),!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?"replaceWith":"html";$(options.target)[fn](data).each(oldSuccess,arguments)})}else options.success&&callbacks.push(options.success);if(options.success=function(data,status,xhr){for(var context=options.context||this,i=0,max=callbacks.length;i<max;i++)callbacks[i].apply(context,[data,status,xhr||$form,$form])},options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form])}}if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form])}}var hasFileInputs=0<$("input[type=file]:enabled",this).filter(function(){return""!==$(this).val()}).length,mp="multipart/form-data",multipart=$form.attr("enctype")==mp||$form.attr("encoding")==mp,fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var jqxhr,shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;!1!==options.iframe&&(options.iframe||shouldUseFrame)?options.closeKeepAlive?$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a)}):jqxhr=fileUploadIframe(a):jqxhr=(hasFileInputs||multipart)&&fileAPI?function(a){for(var formdata=new FormData,i=0;i<a.length;i++)formdata.append(a[i].name,a[i].value);if(options.extraData){var serializedData=function(extraData){var i,part,serialized=$.param(extraData,options.traditional).split("&"),len=serialized.length,result=[];for(i=0;i<len;i++)serialized[i]=serialized[i].replace(/\+/g," "),part=serialized[i].split("="),result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);return result}(options.extraData);for(i=0;i<serializedData.length;i++)serializedData[i]&&formdata.append(serializedData[i][0],serializedData[i][1])}options.data=null;var s=$.extend(!0,{},$.ajaxSettings,options,{contentType:!1,processData:!1,cache:!1,type:method||"POST"});options.uploadProgress&&(s.xhr=function(){var xhr=$.ajaxSettings.xhr();return xhr.upload&&xhr.upload.addEventListener("progress",function(event){var percent=0,position=event.loaded||event.position,total=event.total;event.lengthComputable&&(percent=Math.ceil(position/total*100)),options.uploadProgress(event,position,total,percent)},!1),xhr});s.data=null;var beforeSend=s.beforeSend;return s.beforeSend=function(xhr,o){options.formData?o.data=options.formData:o.data=formdata,beforeSend&&beforeSend.call(this,xhr,o)},$.ajax(s)}(a):$.ajax(options),$form.removeData("jqxhr").data("jqxhr",jqxhr);for(var k=0;k<elements.length;k++)elements[k]=null;return this.trigger("form-submit-notify",[this,options]),this;function fileUploadIframe(a){var el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle,form=$form[0],deferred=$.Deferred();if(deferred.abort=function(status){xhr.abort(status)},a)for(i=0;i<elements.length;i++)el=$(elements[i]),hasProp?el.prop("disabled",!1):el.removeAttr("disabled");if((s=$.extend(!0,{},$.ajaxSettings,options)).context=s.context||s,id="jqFormIO"+(new Date).getTime(),s.iframeTarget?(n=($io=$(s.iframeTarget)).attr2("name"))?id=n:$io.attr2("name",id):($io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),io=$io[0],xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e="timeout"===status?"timeout":"aborted";log("aborting upload... "+e),this.aborted=1;try{io.contentWindow.document.execCommand&&io.contentWindow.document.execCommand("Stop")}catch(ignore){}$io.attr("src",s.iframeSrc),xhr.error=e,s.error&&s.error.call(s.context,xhr,e,status),g&&$.event.trigger("ajaxError",[xhr,s,e]),s.complete&&s.complete.call(s.context,xhr,e)}},(g=s.global)&&0==$.active++&&$.event.trigger("ajaxStart"),g&&$.event.trigger("ajaxSend",[xhr,s]),s.beforeSend&&!1===s.beforeSend.call(s.context,xhr,s))return s.global&&$.active--,deferred.reject(),deferred;if(xhr.aborted)return deferred.reject(),deferred;(sub=form.clk)&&(n=sub.name)&&!sub.disabled&&(s.extraData=s.extraData||{},s.extraData[n]=sub.value,"image"==sub.type&&(s.extraData[n+".x"]=form.clk_x,s.extraData[n+".y"]=form.clk_y));var CLIENT_TIMEOUT_ABORT=1,SERVER_ABORT=2;function getDoc(frame){var doc=null;try{frame.contentWindow&&(doc=frame.contentWindow.document)}catch(err){log("cannot get iframe.contentWindow document: "+err)}if(doc)return doc;try{doc=frame.contentDocument?frame.contentDocument:frame.document}catch(err){log("cannot get iframe.contentDocument: "+err),doc=frame.document}return doc}var csrf_token=$("meta[name=csrf-token]").attr("content"),csrf_param=$("meta[name=csrf-param]").attr("content");function doSubmit(){var t=$form.attr2("target"),a=$form.attr2("action");form.setAttribute("target",id),method&&!/post/i.test(method)||form.setAttribute("method","POST"),a!=s.url&&form.setAttribute("action",s.url),s.skipEncodingOverride||method&&!/post/i.test(method)||$form.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&(timeoutHandle=setTimeout(function(){timedOut=!0,cb(CLIENT_TIMEOUT_ABORT)},s.timeout));var extraInputs=[];try{if(s.extraData)for(var n in s.extraData)s.extraData.hasOwnProperty(n)&&($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty("name")&&s.extraData[n].hasOwnProperty("value")?extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]):extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]));s.iframeTarget||$io.appendTo("body"),io.attachEvent?io.attachEvent("onload",cb):io.addEventListener("load",cb,!1),setTimeout(function checkState(){try{var state=getDoc(io).readyState;log("state = "+state),state&&"uninitialized"==state.toLowerCase()&&setTimeout(checkState,50)}catch(e){log("Server abort: ",e," (",e.name,")"),cb(SERVER_ABORT),timeoutHandle&&clearTimeout(timeoutHandle),timeoutHandle=void 0}},15);try{form.submit()}catch(err){document.createElement("form").submit.apply(form)}}finally{form.setAttribute("action",a),t?form.setAttribute("target",t):$form.removeAttr("target"),$(extraInputs).remove()}}csrf_param&&csrf_token&&(s.extraData=s.extraData||{},s.extraData[csrf_param]=csrf_token),s.forceSync?doSubmit():setTimeout(doSubmit,10);var data,doc,callbackProcessed,domCheckCount=50;function cb(e){if(!xhr.aborted&&!callbackProcessed){if((doc=getDoc(io))||(log("cannot access response document"),e=SERVER_ABORT),e===CLIENT_TIMEOUT_ABORT&&xhr)return xhr.abort("timeout"),void deferred.reject(xhr,"timeout");if(e==SERVER_ABORT&&xhr)return xhr.abort("server abort"),void deferred.reject(xhr,"error","server abort");if(doc&&doc.location.href!=s.iframeSrc||timedOut){io.detachEvent?io.detachEvent("onload",cb):io.removeEventListener("load",cb,!1);var errMsg,status="success";try{if(timedOut)throw"timeout";var isXml="xml"==s.dataType||doc.XMLDocument||$.isXMLDoc(doc);if(log("isXml="+isXml),!isXml&&window.opera&&(null===doc.body||!doc.body.innerHTML)&&--domCheckCount)return log("requeing onLoad callback, DOM not available"),void setTimeout(cb,250);var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null,xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc,isXml&&(s.dataType="xml"),xhr.getResponseHeader=function(header){return{"content-type":s.dataType}[header.toLowerCase()]},docRoot&&(xhr.status=Number(docRoot.getAttribute("status"))||xhr.status,xhr.statusText=docRoot.getAttribute("statusText")||xhr.statusText);var dt=(s.dataType||"").toLowerCase(),scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName("textarea")[0];if(ta)xhr.responseText=ta.value,xhr.status=Number(ta.getAttribute("status"))||xhr.status,xhr.statusText=ta.getAttribute("statusText")||xhr.statusText;else if(scr){var pre=doc.getElementsByTagName("pre")[0],b=doc.getElementsByTagName("body")[0];pre?xhr.responseText=pre.textContent?pre.textContent:pre.innerText:b&&(xhr.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"==dt&&!xhr.responseXML&&xhr.responseText&&(xhr.responseXML=toXml(xhr.responseText));try{data=httpData(xhr,dt,s)}catch(err){status="parsererror",xhr.error=errMsg=err||status}}catch(err){log("error caught: ",err),status="error",xhr.error=errMsg=err||status}xhr.aborted&&(log("upload aborted"),status=null),xhr.status&&(status=200<=xhr.status&&xhr.status<300||304===xhr.status?"success":"error"),"success"===status?(s.success&&s.success.call(s.context,data,"success",xhr),deferred.resolve(xhr.responseText,"success",xhr),g&&$.event.trigger("ajaxSuccess",[xhr,s])):status&&(void 0===errMsg&&(errMsg=xhr.statusText),s.error&&s.error.call(s.context,xhr,status,errMsg),deferred.reject(xhr,"error",errMsg),g&&$.event.trigger("ajaxError",[xhr,s,errMsg])),g&&$.event.trigger("ajaxComplete",[xhr,s]),g&&!--$.active&&$.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,xhr,status),callbackProcessed=!0,s.timeout&&clearTimeout(timeoutHandle),setTimeout(function(){s.iframeTarget?$io.attr("src",s.iframeSrc):$io.remove(),xhr.responseXML=null},100)}}}var toXml=$.parseXML||function(s,doc){return window.ActiveXObject?((doc=new ActiveXObject("Microsoft.XMLDOM")).async="false",doc.loadXML(s)):doc=(new DOMParser).parseFromString(s,"text/xml"),doc&&doc.documentElement&&"parsererror"!=doc.documentElement.nodeName?doc:null},parseJSON=$.parseJSON||function(s){return window.eval("("+s+")")},httpData=function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml="xml"===type||!type&&0<=ct.indexOf("xml"),data=xml?xhr.responseXML:xhr.responseText;return xml&&"parsererror"===data.documentElement.nodeName&&$.error&&$.error("parsererror"),s&&s.dataFilter&&(data=s.dataFilter(data,type)),"string"==typeof data&&("json"===type||!type&&0<=ct.indexOf("json")?data=parseJSON(data):("script"===type||!type&&0<=ct.indexOf("javascript"))&&$.globalEval(data)),data};return deferred}},$.fn.ajaxForm=function(options){if((options=options||{}).delegation=options.delegation&&$.isFunction($.fn.on),options.delegation||0!==this.length)return options.delegation?($(document).off("submit.form-plugin",this.selector,doAjaxSubmit).off("click.form-plugin",this.selector,captureSubmittingElement).on("submit.form-plugin",this.selector,options,doAjaxSubmit).on("click.form-plugin",this.selector,options,captureSubmittingElement),this):this.ajaxFormUnbind().bind("submit.form-plugin",options,doAjaxSubmit).bind("click.form-plugin",options,captureSubmittingElement);var o={s:this.selector,c:this.context};return!$.isReady&&o.s?(log("DOM not ready, queuing ajaxForm"),$(function(){$(o.s,o.c).ajaxForm(options)})):log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)")),this},$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},$.fn.formToArray=function(semantic,elements){var a=[];if(0===this.length)return a;var i,j,n,v,el,max,jmax,form=this[0],els=semantic?form.getElementsByTagName("*"):form.elements;if(!els)return a;for(i=0,max=els.length;i<max;i++)if((n=(el=els[i]).name)&&!el.disabled)if(semantic&&form.clk&&"image"==el.type)form.clk==el&&(a.push({name:n,value:$(el).val(),type:el.type}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}));else if((v=$.fieldValue(el,!0))&&v.constructor==Array)for(elements&&elements.push(el),j=0,jmax=v.length;j<jmax;j++)a.push({name:n,value:v[j]});else if(feature.fileapi&&"file"==el.type){elements&&elements.push(el);var files=el.files;if(files.length)for(j=0;j<files.length;j++)a.push({name:n,value:files[j],type:el.type});else a.push({name:n,value:"",type:el.type})}else null!=v&&(elements&&elements.push(el),a.push({name:n,value:v,type:el.type,required:el.required}));if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];(n=input.name)&&!input.disabled&&"image"==input.type&&(a.push({name:n,value:$input.val()}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}))}return a},$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))},$.fn.fieldSerialize=function(successful){var a=[];return this.each(function(){var n=this.name;if(n){var v=$.fieldValue(this,successful);if(v&&v.constructor==Array)for(var i=0,max=v.length;i<max;i++)a.push({name:n,value:v[i]});else null!=v&&a.push({name:this.name,value:v})}}),$.param(a)},$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i],v=$.fieldValue(el,successful);null==v||v.constructor==Array&&!v.length||(v.constructor==Array?$.merge(val,v):val.push(v))}return val},$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(void 0===successful&&(successful=!0),successful&&(!n||el.disabled||"reset"==t||"button"==t||("checkbox"==t||"radio"==t)&&!el.checked||("submit"==t||"image"==t)&&el.form&&el.form.clk!=el||"select"==tag&&-1==el.selectedIndex))return null;if("select"!=tag)return $(el).val();var index=el.selectedIndex;if(index<0)return null;for(var a=[],ops=el.options,one="select-one"==t,max=one?index+1:ops.length,i=one?index:0;i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(v||(v=op.attributes&&op.attributes.value&&!op.attributes.value.specified?op.text:op.value),one)return v;a.push(v)}}return a},$.fn.clearForm=function(includeHidden){return this.each(function(){$("input,select,textarea",this).clearFields(includeHidden)})},$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();re.test(t)||"textarea"==tag?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==tag?this.selectedIndex=-1:"file"==t?/MSIE/.test(navigator.userAgent)?$(this).replaceWith($(this).clone(!0)):$(this).val(""):includeHidden&&(!0===includeHidden&&/hidden/.test(t)||"string"==typeof includeHidden&&$(this).is(includeHidden))&&(this.value="")})},$.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},$.fn.enable=function(b){return void 0===b&&(b=!0),this.each(function(){this.disabled=!b})},$.fn.selected=function(select){return void 0===select&&(select=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=select;else if("option"==this.tagName.toLowerCase()){var $sel=$(this).parent("select");select&&$sel[0]&&"select-one"==$sel[0].type&&$sel.find("option").selected(!1),this.selected=select}})},$.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","pat-base","mockup-patterns-backdrop","pat-registry","mockup-router","mockup-utils","translate","jquery.form"],function($,_,Base,Backdrop,registry,Router,utils,_t){"use strict";return Base.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"]',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage",templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function($action,response,options){var reg;return(reg=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(response))&&1<reg.length?reg[1].split('"')[0]:(reg=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(response))&&1<reg.length?reg[1].split('"')[0]:(reg=/<base.*href=[\"'](.*)[\"'].*/im.exec(response))&&1<reg.length?reg[1]:""}},routerOptions:{id:null,pathExp:null},form:function(actions){var self=this,$modal=self.$modal;self.options.automaticallyAddButtonActions&&(actions[self.options.buttons]={}),actions.a={},$.each(actions,function(action,options){var actionKeys=_.union(_.keys(self.options.actionOptions),["templateOptions"]),actionOptions=$.extend(!0,{},self.options.actionOptions,_.pick(options,actionKeys));options.templateOptions=$.extend(!0,options.templateOptions,self.options.templateOptions);var patternKeys=_.union(_.keys(self.options.actionOptions),["actions","actionOptions"]),patternOptions=$.extend(!0,_.omit(options,patternKeys),self.options);$(action,$("."+options.templateOptions.classBodyName,$modal)).each(function(action){var $action=$(this);$action.on(actionOptions.eventType,function(e){e.stopPropagation(),e.preventDefault(),self.loading.show(!1),null!==actionOptions.modalFunction?self[actionOptions.modalFunction]():$.nodeName($action[0],"input")||$.nodeName($action[0],"button")||!0===options.isForm?self.options.handleFormAction.apply(self,[$action,actionOptions,patternOptions]):(null!==options.ajaxUrl||$.nodeName($action[0],"a"))&&self.options.handleLinkAction.apply(self,[$action,actionOptions,patternOptions])})})})},handleFormAction:function($action,options,patternOptions){var $form,url,self=this,extraData={};if(extraData[$action.attr("name")]=$action.attr("value"),$form=$.nodeName($action[0],"form")?$action:$action.parents("form:not(.disableAutoSubmit)"),url=null!==options.ajaxUrl?"function"==typeof options.ajaxUrl?options.ajaxUrl.apply(self,[$action,options]):options.ajaxUrl:$action.parents("form").attr("action"),options.disableAjaxFormSubmit)return $action.attr("name")&&$action.attr("value")&&$form.append($('<input type="hidden" name="'+$action.attr("name")+'" value="'+$action.attr("value")+'" />')),void $form.trigger("submit");$form.on("submit",function(e){e.preventDefault()}),$form.trigger("submit"),self.loading.show(!1),$form.ajaxSubmit({timeout:options.timeout,data:extraData,url:url,error:function(xhr,textStatus,errorStatus){self.loading.hide(),"timeout"===textStatus&&options.onTimeout?options.onTimeout.apply(self,xhr,errorStatus):options.onError?options.onError(xhr,textStatus,errorStatus):console.log("error happened do something"),self.emit("formActionError",[xhr,textStatus,errorStatus])},success:function(response,state,xhr,form){self.loading.hide(),0===$(options.error,response).size()&&0===$(options.formFieldError,response).size()?!0!==options.redirectOnResponse?(options.onSuccess&&options.onSuccess(self,response,state,xhr,form),!0===options.displayInModal?self.redraw(response,patternOptions):($action.trigger("destroy.plone-modal.patterns"),options.reloadWindowOnClose&&self.reloadWindow()),self.emit("formActionSuccess",[response,state,xhr,form])):"function"==typeof options.redirectToUrl?window.parent.location.href=options.redirectToUrl.apply(self,[$action,response,options]):window.parent.location.href=options.redirectToUrl:options.onFormError?options.onFormError(self,response,state,xhr,form):self.redraw(response,patternOptions)}})},handleLinkAction:function($action,options,patternOptions){var url,self=this;url=options.ajaxUrl?"function"==typeof options.ajaxUrl?options.ajaxUrl.apply(self,[$action,options]):options.ajaxUrl:$action.attr("href"),!1!==options.displayInModal?$.ajax({url:url}).fail(function(xhr,textStatus,errorStatus){"timeout"===textStatus&&options.onTimeout?options.onTimeout(self.$modal,xhr,errorStatus):options.onError?options.onError(xhr,textStatus,errorStatus):window.alert(_t("There was an error loading modal.")),self.emit("linkActionError",[xhr,textStatus,errorStatus])}).done(function(response,state,xhr){self.redraw(response,patternOptions),options.onSuccess&&options.onSuccess(self,response,state,xhr),self.emit("linkActionSuccess",[response,state,xhr])}).always(function(){self.loading.hide()}):"_blank"===$action.attr("target")?(window.open(url,"_blank"),self.loading.hide()):window.location=url},render:function(options){var self=this;if(self.emit("before-render"),self.$raw){var $raw=self.$raw.clone();$("input:checked",$raw).each(function(){this.setAttribute&&this.setAttribute("checked","checked")});var tplObject={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:options.templateOptions};if(null===options.title){var $title=$(options.titleSelector,$raw);tplObject.title=$title.html(),$(options.titleSelector,$raw).remove()}else tplObject.title=options.title;options.prependContent&&(tplObject.prepend=$("<div />").append($(options.prependContent,$raw).clone()).html(),$(options.prependContent,$raw).remove()),options.content?tplObject.content=$(options.content,$raw).html():tplObject.content=$raw.html(),self.$modal=$(_.template(self.options.templateOptions.template)(tplObject)),self.$modalDialog=$("> ."+self.options.templateOptions.classDialog,self.$modal),self.$modalContent=$("> ."+self.options.templateOptions.classModal,self.$modalDialog),$("form",self.$modal).on("keydown",function(event){13===event.keyCode&&"TEXTAREA"!==event.target.nodeName&&(event.preventDefault(),$("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))}),$(options.buttons,self.$modal).each(function(){var $button=$(this);$button.on("click",function(e){e.stopPropagation(),e.preventDefault()}).clone().appendTo($(".pattern-modal-buttons",self.$modal)).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),$button.trigger("click")}),$button.hide()}),self.emit("before-events-setup"),$(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",self.$modal).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),$(e.target).trigger("destroy.plone-modal.patterns")}),options.form&&options.form.apply(self,[options.actions]),self.$modal.addClass(self.options.templateOptions.className).on("destroy.plone-modal.patterns",function(e){e.stopPropagation(),self.hide()}).on("resize.plone-modal.patterns",function(e){e.stopPropagation(),e.preventDefault(),self.positionModal()}).appendTo(self.$wrapperInner),self.options.loadLinksWithinModal&&self.$modal.on("click",function(e){e.stopPropagation(),$.nodeName(e.target,"a")&&e.preventDefault(),self.$modal.trigger("modal-click")}),self.$modal.data("pattern-"+self.name,self),self.emit("after-render")}}},reloadWindow:function(){window.parent.location.reload()},init:function(){var self=this;self.options.loadLinksWithinModal=$.parseJSON(self.options.loadLinksWithinModal),null!==self.options.routerOptions.id&&Router.addRoute("modal",self.options.routerOptions.id,function(){this.show()},self,self.options.routerOptions.pathExp,self.options.routerOptions.expReplace),!0===self.options.backdropOptions.closeOnEsc&&$(document).on("keydown",function(e,data){self.$el.is("."+self.options.templateOptions.classActiveName)&&27===e.keyCode&&self.hide()}),$(window.parent).resize(function(){self.positionModal()}),self.options.triggers&&$.each(self.options.triggers,function(i,item){var e=item.substring(0,item.indexOf(" ")),selector=item.substring(item.indexOf(" "),item.length);$(selector||self.$el).on(e,function(e){e.stopPropagation(),e.preventDefault(),self.show()})}),self.$el.is("a")&&(self.$el.attr("href")&&!self.options.image&&(self.options.target||"#"!==self.$el.attr("href").substr(0,1)||(self.options.target=self.$el.attr("href"),self.options.content=""),self.options.ajaxUrl||"#"===self.$el.attr("href").substr(0,1)||(self.options.ajaxUrl=function(){return self.$el.attr("href")})),self.$el.on("click",function(e){e.stopPropagation(),e.preventDefault(),self.show()})),self.initModal()},createAjaxModal:function(){var self=this;self.emit("before-ajax"),self.loading.show();var ajaxUrl=self.options.ajaxUrl;"function"==typeof ajaxUrl&&(ajaxUrl=ajaxUrl.apply(self,[self.options])),self.ajaxXHR=$.ajax({url:ajaxUrl,type:self.options.ajaxType}).done(function(response,textStatus,xhr){self.ajaxXHR=void 0,self.$raw=$("<div />").append($(utils.parseBodyTag(response))),self.emit("after-ajax",self,textStatus,xhr),self._show()}).fail(function(xhr,textStatus,errorStatus){var options=self.options.actionOptions;"timeout"===textStatus&&options.onTimeout?options.onTimeout(self.$modal,xhr,errorStatus):options.onError?options.onError(xhr,textStatus,errorStatus):(window.alert(_t("There was an error loading modal.")),self.hide()),self.emit("linkActionError",[xhr,textStatus,errorStatus])}).always(function(){self.loading.hide()})},createTargetModal:function(){this.$raw=$(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=$("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var $el=$(this.options.html);this.$raw=$el,this._show()},createImageModal:function(){this.$wrapper.addClass("image-modal");var src=this.$el.attr("href"),srcset=this.$el.attr("data-modal-srcset")||"",title=$.trim(this.$el.context.innerText)||"Image";this.$raw=$("<div><h1>"+title+'</h1><div id="content"><div class="modal-image"><img src="'+src+'" srcset="'+srcset+'" /></div></div></div>'),this._show()},initModal:function(){this.options.ajaxUrl?this.createModal=this.createAjaxModal:this.options.target?this.createModal=this.createTargetModal:this.options.html?this.createModal=this.createHtmlModal:this.options.image?this.createModal=this.createImageModal:this.createModal=this.createBasicModal},findPosition:function(horpos,vertpos,margin,modalWidth,modalHeight,wrapperInnerWidth,wrapperInnerHeight){var absTop,absBottom,absLeft,absRight,returnpos={};return absRight=absLeft=absTop=absLeft="auto",returnpos.left="left"===horpos?(absLeft=margin+"px",wrapperInnerWidth<modalWidth&&(absLeft="0px"),absLeft):"right"===horpos?(absRight=margin+"px",wrapperInnerWidth<modalWidth&&(absRight="0px"),returnpos.right=absRight,"auto"):(absLeft=wrapperInnerWidth/2-modalWidth/2-margin+"px",wrapperInnerWidth<modalWidth&&(absLeft="0px"),absLeft),returnpos.top="top"===vertpos?(absTop=margin+"px",wrapperInnerHeight<modalHeight&&(absTop="0px"),absTop):"bottom"===vertpos?(absBottom=margin+"px",wrapperInnerHeight<modalHeight&&(absBottom="0px"),returnpos.bottom=absBottom,"auto"):(absTop=wrapperInnerHeight/2-modalHeight/2-margin+"px",wrapperInnerHeight<modalHeight&&(absTop="0px"),absTop),returnpos},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){if(this.modalInitialized()){this.$modal.removeAttr("style"),this.$wrapper.parent().is("body")&&this.$wrapper.height($(window.parent).height());var margin="function"==typeof this.options.margin?this.options.margin():this.options.margin;this.$modal.css({position:"absolute",padding:margin}),this.$modalDialog.css({margin:"0",padding:"0",width:this.options.width,height:this.options.height}),this.$modalContent.css({width:this.options.width});var posopt=this.options.position.split(" "),horpos=posopt[0],vertpos=posopt[1],modalWidth=this.$modalDialog.outerWidth(!0),modalHeight=this.$modalDialog.outerHeight(!0),wrapperInnerWidth=this.$wrapperInner.width(),wrapperInnerHeight=this.$wrapperInner.height(),pos=this.findPosition(horpos,vertpos,margin,modalWidth,modalHeight,wrapperInnerWidth,wrapperInnerHeight);for(var key in pos)this.$modalDialog.css(key,pos[key])}},render:function(options){this.emit("render"),this.options.render.apply(this,[options]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var self=this,backdrop=new Backdrop(self.$el.parents(self.options.backdrop),self.options.backdropOptions),zIndex=1041;return $(self.options.zIndexSelector).each(function(){zIndex=Math.max(zIndex,parseInt($(this).css("zIndex"))+1||1041)}),self.$wrapper=$("<div/>").hide().css({"z-index":zIndex,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(self.options.templateOptions.classWrapperName).insertBefore(backdrop.$backdrop).on("click",function(e){self.options.backdropOptions.closeOnClick&&(e.stopPropagation(),e.preventDefault(),backdrop.hide())}),backdrop.on("hidden",function(e){void 0!==self.$modal&&self.$modal.hasClass(self.options.templateOptions.classActiveName)&&self.hide()}),self.loading=new utils.Loading({backdrop:backdrop}),self.$wrapperInner=$("<div/>").addClass(self.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(self.$wrapper),backdrop},_show:function(){var self=this;self.render.apply(self,[self.options]),self.emit("show"),self.backdrop.show(),self.$wrapper.show(),self.loading.hide(),self.$el.addClass(self.options.templateOptions.classActiveName),self.$modal.addClass(self.options.templateOptions.classActiveName),registry.scan(self.$modal),self.positionModal(),$(window.parent).on("resize.plone-modal.patterns",function(){self.positionModal()}),$("body").addClass("plone-modal-open"),self.emit("shown")},hide:function(){this.ajaxXHR&&this.ajaxXHR.abort(),this.emit("hide"),this._suppressHide&&!window.confirm(this._suppressHide)||(this.loading.hide(),this.$el.removeClass(this.options.templateOptions.classActiveName),void 0!==this.$modal&&(this.$modal.remove(),this.initModal()),this.$wrapper.remove(),$(".plone-modal",$("body")).size()<1&&(this._suppressHide=void 0,this.backdrop.hide(),$("body").removeClass("plone-modal-open"),$(window.parent).off("resize.plone-modal.patterns")),this.emit("hidden"))},redraw:function(response,options){this.emit("beforeDraw"),this.$modal.remove(),this.$raw=$("<div />").append($(utils.parseBodyTag(response))),this.render.apply(this,[options||this.options]),this.$modal.addClass(this.options.templateOptions.classActiveName),this.positionModal(),registry.scan(this.$modal),this.emit("afterDraw")}})}),define("mockup-ui-url/views/base",["jquery","underscore","backbone","translate"],function($,_,Backbone,_t){"use strict";return Backbone.View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(options){for(var key in this.options=options,this.options)this[key]=this.options[key];this.options._t=_t},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){if(null!==this.template){var data=$.extend({_t:_t},this.options,this.serializedModel()),template=this.template;"string"==typeof template&&(template=_.template(template)),this.$el.html(template(data))}},propagateEvent:function(eventName){if(0<eventName.indexOf(":")){var eventId=eventName.split(":")[0];if(""!==this.eventPrefix&&(eventId===this.eventPrefix||eventId===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(name){var args=[].slice.call(arguments,0);""!==this.eventPrefix&&(args[0]=this.eventPrefix+":"+name,Backbone.View.prototype.trigger.apply(this,args),this.id&&(args[0]=this.eventPrefix+"."+this.id+":"+name,Backbone.View.prototype.trigger.apply(this,args)))}})}),define("mockup-ui-url/views/container",["jquery","underscore","mockup-ui-url/views/base"],function($,_,BaseView){"use strict";return BaseView.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,idPrefix:"container-",render:function(){return this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this.$el.data("component",this),this},renderItems:function(){var $container;if(null!==this.itemContainer){if(0===($container=$(this.itemContainer,this.$el)).length)throw"Item Container element not found."}else $container=this.$el;_.each(this.items,function(view){!0===view.appendInContainer?$container.append(view.render().$el):view.render()},this)},bindEvents:function(){var self=this;_.each(this.items,function(view){view.on("all",function(){var eventTarget,slice=[].slice,eventName=arguments[0],newName=""!==self.id?self.id+"."+eventName:eventName;if(1<arguments.length&&(eventTarget=arguments[1]),newName!==eventName){var newArgs=slice.call(arguments,0);newArgs[0]=newName,self.trigger.apply(self,newArgs)}void 0!==eventTarget&&!0===eventTarget.isUIView&&!0===eventTarget.propagateEvent(eventName)&&self.trigger.apply(self,arguments)})})},get:function(id){return _.findWhere(this.items,{id:id})},add:function(item){if(void 0!==item.id&&this.get(item.id))throw"Another item with the same `id` already exists.";this.items.push(item)}})}),define("mockup-ui-url/views/toolbar",["mockup-ui-url/views/container"],function(ContainerView){"use strict";return ContainerView.extend({tagName:"div",className:"navbar",idPrefix:"toolbar-"})}),define("mockup-ui-url/views/buttongroup",["underscore","mockup-ui-url/views/container"],function(_,ContainerView){"use strict";return ContainerView.extend({tagName:"div",className:"btn-group",idPrefix:"btngroup-",disable:function(){_.each(this.items,function(button){button.disable()})},enable:function(){_.each(this.items,function(button){button.enable()})}})}),define("mockup-patterns-tooltip",["jquery","pat-base"],function($,Base,undefined){"use strict";var bootstrapTooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};return bootstrapTooltip.VERSION="3.2.0",bootstrapTooltip.DEFAULTS={animation:!0,placement:"auto",selector:!1,template:'<div class="tooltip mockup-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!0,container:!1,viewport:{selector:"body",padding:0}},bootstrapTooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},bootstrapTooltip.prototype.getDefaults=function(){return bootstrapTooltip.DEFAULTS},bootstrapTooltip.prototype.getOptions=function(options){return(options=$.extend({},this.getDefaults(),this.$element.data(),options)).delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},bootstrapTooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},bootstrapTooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="in",!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)},bootstrapTooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="out",!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)},bootstrapTooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,$parent=this.$element.parent(),parentDim=this.getPosition($parent);placement="bottom"==placement&&pos.top+pos.height+actualHeight-parentDim.scroll>parentDim.height?"top":"top"==placement&&pos.top-parentDim.scroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentDim.width?"left":"left"==placement&&pos.left-actualWidth<parentDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){that.$element.trigger("shown.bs."+that.type),that.hoverState=null};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(150):complete()}},bootstrapTooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var arrowDelta=delta.left?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowPosition=delta.left?"left":"top",arrowOffsetPosition=delta.left?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],arrowPosition)},bootstrapTooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},bootstrapTooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},bootstrapTooltip.prototype.hide=function(){var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.trigger("hidden.bs."+that.type)}if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(150):complete(),this.hoverState=null,this},bootstrapTooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},bootstrapTooltip.prototype.hasContent=function(){return this.getTitle()},bootstrapTooltip.prototype.getPosition=function($element){var el=($element=$element||this.$element)[0],isBody="BODY"==el.tagName;return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():null,{scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop(),width:isBody?$(window).width():$element.outerWidth(),height:isBody?$(window).height():$element.outerHeight()},isBody?{top:0,left:0}:$element.offset())},bootstrapTooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},bootstrapTooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.width&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},bootstrapTooltip.prototype.getTitle=function(){var $e=this.$element,o=this.options;return $e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},bootstrapTooltip.prototype.getUID=function(prefix){for(;prefix+=~~(1e6*Math.random()),document.getElementById(prefix););return prefix},bootstrapTooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},bootstrapTooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},bootstrapTooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},bootstrapTooltip.prototype.enable=function(){this.enabled=!0},bootstrapTooltip.prototype.disable=function(){this.enabled=!1},bootstrapTooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},bootstrapTooltip.prototype.toggle=function(e){var self=this;e&&((self=$(e.currentTarget).data("bs."+this.type))||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),self.tip().hasClass("in")?self.leave(self):self.enter(self)},bootstrapTooltip.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)},Base.extend({name:"tooltip",trigger:".pat-tooltip",parser:"mockup",defaults:{html:!1,placement:"top"},init:function(){"true"===this.options.html?this.options.html=!0:this.options.html=!1,this.data=new bootstrapTooltip(this.$el[0],this.options)}})}),define("mockup-ui-url/views/button",["underscore","mockup-ui-url/views/base","mockup-patterns-tooltip"],function(_,BaseView,Tooltip){"use strict";return BaseView.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(options){if(!options.id){var title=options.title||"";options.id=""!==title?title.toLowerCase().replace(" ","-"):this.cid}BaseView.prototype.initialize.apply(this,[options]),this.on("render",function(){if(this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),_.each(this.extraClasses,function(klass){this.$el.addClass(klass)}),null!==this.tooltip){this.$el.attr("title",this.tooltip);new Tooltip(this.$el);this.$el.on("hidden",function(e){"hidden"===e.type&&e.stopPropagation()})}},this)},handleClick:function(e){e.preventDefault(),this.$el.prop("disabled")||this.uiEventTrigger("click",this,e)},serializedModel:function(){return _.extend({icon:"",title:""},this.options)},disable:function(){this.$el.prop("disabled",!0)},enable:function(){this.$el.prop("disabled",!1)}})}),define("mockup-patterns-structure-url/js/navigation",["backbone","mockup-utils"],function(Backbone,utils){"use strict";return Backbone.Model.extend({initialize:function(options){this.options=options,this.app=options.app,this.model=options.model},folderClicked:function(e){e.preventDefault();this.app.setCurrentPath(this.model.attributes.path),this.app.collection.goTo(this.app.collection.information.firstPage)}})}),define("mockup-patterns-structure-url/js/models/result",["backbone"],function(Backbone){"use strict";return Backbone.Model.extend({defaults:function(){return{is_folderish:!1,review_state:"",getURL:""}},uid:function(){return this.attributes.UID}})}),define("mockup-patterns-structure-url/js/actions",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","translate"],function($,_,Backbone,Result,utils,_t){"use strict";return Backbone.Model.extend({initialize:function(options){this.options=options,this.app=options.app,this.model=options.model,this.selectedCollection=this.app.selectedCollection},selectAll:function(e){e.preventDefault();var self=this,page=1,count=0,getPage=function(){self.app.loading.show(),$.ajax({url:self.app.collection.url,type:"GET",dataType:"json",data:{query:self.app.collection.queryParser({searchPath:self.model.attributes.path}),batch:JSON.stringify({page:page,size:100}),attributes:JSON.stringify(self.app.collection.queryHelper.options.attributes)}}).done(function(data){var items=self.app.collection.parse(data,count);count+=items.length,_.each(items,function(item){self.app.selectedCollection.add(new Result(item))}),page+=1,data.total>count?getPage():(self.app.loading.hide(),self.app.tableView.render())})};getPage()},doAction:function(buttonName,successMsg,failMsg){var self=this;$.ajax({url:self.app.buttons.get(buttonName).options.url,data:{selection:JSON.stringify([self.model.attributes.UID]),folder:self.model.attributes.path,_authenticator:utils.getAuthenticator()},dataType:"json",type:"POST"}).done(function(data){var msg;"success"===data.status?(msg=_t(successMsg+' "'+self.model.attributes.Title+'"'),self.app.collection.pager(),self.app.updateButtons()):msg=_t("Error "+failMsg+' "'+self.model.attributes.Title+'"'),self.app.setStatus({text:msg,type:data.status||"warning"})})},cutClicked:function(e){e.preventDefault(),this.doAction("cut",_t("Cut"),_t("cutting"))},copyClicked:function(e){e.preventDefault(),this.doAction("copy",_t("Copied"),_t("copying"))},pasteClicked:function(e){e.preventDefault(),this.doAction("paste",_t("Pasted into"),_t("Error pasting into"))},moveTopClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:function(e){e.preventDefault();var self=this;$.ajax({url:self.app.getAjaxUrl(self.app.setDefaultPageUrl),type:"POST",data:{_authenticator:$('[name="_authenticator"]').val(),id:this.model.attributes.id},success:function(data){self.app.ajaxSuccessResponse.apply(self.app,[data])},error:function(data){self.app.ajaxErrorResponse.apply(self.app,[data])}})}})}),define("mockup-patterns-structure-url/js/actionmenu",["underscore"],function(_){"use strict";var menuOptions={openItem:{url:"#",title:"Open",category:"button",iconCSS:"glyphicon glyphicon-eye-open",css:"",modal:!1},editItem:{url:"#",title:"Edit",category:"button",iconCSS:"glyphicon glyphicon-pencil",css:"",modal:!1},cutItem:{library:"mockup-patterns-structure-url/js/actions",method:"cutClicked",url:"#",title:"Cut",category:"dropdown",iconCSS:"glyphicon glyphicon-scissors",css:"",modal:!1},copyItem:{library:"mockup-patterns-structure-url/js/actions",method:"copyClicked",url:"#",title:"Copy",category:"dropdown",iconCSS:"glyphicon glyphicon-duplicate",css:"",modal:!1},pasteItem:{library:"mockup-patterns-structure-url/js/actions",method:"pasteClicked",url:"#",title:"Paste",category:"dropdown",iconCSS:"glyphicon glyphicon-open-file",css:"",modal:!1},"move-top":{library:"mockup-patterns-structure-url/js/actions",method:"moveTopClicked",url:"#",title:"Move to top of folder",category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rright",css:"",modal:!1},"move-bottom":{library:"mockup-patterns-structure-url/js/actions",method:"moveBottomClicked",url:"#",title:"Move to bottom of folder",category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rleft",css:"",modal:!1},"set-default-page":{library:"mockup-patterns-structure-url/js/actions",method:"setDefaultPageClicked",url:"#",title:"Set as default page",category:"dropdown",iconCSS:"glyphicon glyphicon-ok-circle",css:"",modal:!1},selectAll:{library:"mockup-patterns-structure-url/js/actions",method:"selectAll",url:"#",title:"Select all contained items",category:"dropdown",iconCSS:"glyphicon glyphicon-check",css:"",modal:!1}};return function(menu){if(null!==menu.menuOptions)return menu.menuOptions;var model=menu.model.attributes,app=menu.app,result=_.clone(menuOptions);app.pasteAllowed()&&model.is_folderish||delete result.pasteItem,(app.inQueryMode()||!1===menu.options.canMove)&&(delete result["move-top"],delete result["move-bottom"]),!model.is_folderish&&app.setDefaultPageUrl||delete result["set-default-page"],model.is_folderish||delete result.selectAll;var typeToViewAction=app.options.typeToViewAction,viewAction=typeToViewAction&&typeToViewAction[model.portal_type]||"";return result.openItem.url=model.getURL+viewAction,result.editItem.url=model.getURL+"/edit",result}}),define("text",["module"],function(module){"use strict";var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation="undefined"!=typeof location&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||void 0),buildMap={},masterConfig=module.config&&module.config()||{};function useDefault(value,defaultValue){return void 0===value||""===value?defaultValue:value}return text={version:"2.0.15",strip:function(content){if(content){var matches=(content=content.replace(xmlRegExp,"")).match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,temp,strip=!1,index=name.lastIndexOf("."),isRelative=0===name.indexOf("./")||0===name.indexOf("../");return-1!==index&&(!isRelative||1<index)?(modName=name.substring(0,index),ext=name.substring(index+1)):modName=name,-1!==(index=(temp=ext||modName).indexOf("!"))&&(strip="strip"===temp.substring(index+1),temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return!match||(uProtocol=match[2],uPort=(uHostName=(uHostName=match[3]).split(":"))[1],uHostName=uHostName[0],(!uProtocol||uProtocol===protocol)&&(!uHostName||uHostName.toLowerCase()===hostname.toLowerCase())&&(!uPort&&!uHostName||function(protocol1,port1,protocol2,port2){if(port1===port2)return!0;if(protocol1===protocol2){if("http"===protocol1)return useDefault(port1,"80")===useDefault(port2,"80");if("https"===protocol1)return useDefault(port1,"443")===useDefault(port2,"443")}return!1}(uProtocol,uPort,protocol,port)))},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config&&config.isBuild&&!config.inlineText)onLoad();else{masterConfig.isBuild=config&&config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;0!==url.indexOf("empty:")?!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)}):onLoad()}},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},"node"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync(url,"utf8");"\ufeff"===file[0]&&(file=file.substring(1)),callback(file)}catch(e){errback&&errback(e)}}):"xhr"===masterConfig.env||!masterConfig.env&&text.createXhr()?text.get=function(url,callback,errback,headers){var header,xhr=text.createXhr();if(xhr.open("GET",url,!0),headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;4===xhr.readyState&&(399<(status=xhr.status||0)&&status<600?((err=new Error(url+" HTTP status: "+status)).xhr=xhr,errback&&errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url))},xhr.send(null)}:"rhino"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?text.get=function(url,callback){var stringBuffer,line,file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),"utf-8")),content="";try{for(stringBuffer=new java.lang.StringBuffer,(line=input.readLine())&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1)),null!==line&&stringBuffer.append(line);null!==(line=input.readLine());)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)}:("xpconnect"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(Cc=Components.classes,Ci=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{(inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream)).init(fileObj,1,0,!1),(convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream)).init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}}),text}),define("text!mockup-patterns-structure-url/templates/actionmenu.xml",[],function(){return'<% _.each(menuOptions.button, function(menuOption){ %>\n<a class="action <%- menuOption.name %> <%- menuOption.idx %> pat-tooltip <%- menuOption.css %>"\n    href="<%- menuOption.url %>"\n    title="<%- _t(menuOption.title) %>">\n  <% if (menuOption.iconCSS) { %>\n  <span class="<%- menuOption.iconCSS %>"></span>\n  <% } else { %>\n  <%- _t(menuOption.title) %> \n  <% } %>\n</a>&nbsp;\n<% }); %>\n\n\n<% if (menuOptions.dropdown) { %>\n<a class="dropdown-toggle"\n    data-toggle="dropdown"\n    href="#"\n    aria-haspopup="true"\n    aria-expanded="true"\n    id="<%- id %>"\n    title="Actions">\n  <span class="glyphicon glyphicon-cog"></span><span class="caret"></span>\n</a>\n<ul class="dropdown-menu pull-right" aria-labelledby="<%- id %>">\n  <% if (header) { %>\n    <li class="dropdown-header"><%- header %></li>\n    <li class="divider"></li>\n  <% } %>\n\n  <% _.each(menuOptions.dropdown, function(menuOption){ %>\n  <li>\n    <a class="action <%- menuOption.name %> <%- menuOption.idx %> <%- menuOption.css %>"\n        href="<%- menuOption.url %>">\n      <% if (menuOption.iconCSS) { %>\n      <span class="<%- menuOption.iconCSS %>"></span>\n      <% } %>\n      <%- _t(menuOption.title) %>\n    </a>\n  </li>\n  <% }); %>\n</ul>\n<% } %>\n'}),function(root){define("bootstrap-dropdown",["jquery"],function(){return function(){return function($){"use strict";var toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};function getParent($this){var selector=$this.attr("data-target");selector||(selector=(selector=$this.attr("href"))&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){e&&3===e.which||($(".dropdown-backdrop").remove(),$(toggle).each(function(){var $this=$(this),$parent=getParent($this),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target)||($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||($this.attr("aria-expanded","false"),$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget)))))}))}Dropdown.VERSION="3.3.6",Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive&&27!=e.which||isActive&&27==e.which)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var $items=$parent.find(".dropdown-menu li:not(.disabled):visible a");if($items.length){var index=$items.index(e.target);38==e.which&&0<index&&index--,40==e.which&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery),window.jQuery.fn.dropdown.Constructor}.apply(root,arguments)})}(this),define("mockup-patterns-structure-url/js/views/actionmenu",["jquery","underscore","mockup-ui-url/views/base","mockup-utils","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/actions","mockup-patterns-structure-url/js/actionmenu","text!mockup-patterns-structure-url/templates/actionmenu.xml","pat-registry","translate","mockup-patterns-tooltip","bootstrap-dropdown"],function($,_,BaseView,utils,Result,Actions,ActionMenu,ActionMenuTemplate,registry,_t){"use strict";return BaseView.extend({className:"btn-group actionmenu",template:_.template(ActionMenuTemplate),menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",eventConstructor:function(definition){var self=this,libName=definition.library,method=definition.method;if("string"!=typeof libName||"string"!=typeof method)return!1;return function(e){var lib=new(require(libName))(self);return lib[method]&&lib[method](e)}},events:function(){var self=this,result={},menuOptionsCategorized={};return _.each(self.menuOptions,function(menuOption,key){var idx=utils.generateId();menuOption.idx=idx,menuOption.name=key;var category=menuOption.category||"dropdown";void 0===menuOptionsCategorized[category]&&(menuOptionsCategorized[category]=[]),menuOptionsCategorized[category].push(menuOption),menuOption.css=menuOption.css||"",!0===menuOption.modal&&(menuOption.css+=" pat-plone-modal");var e=self.eventConstructor(menuOption);e&&(result["click a."+idx]=e)}),self.menuOptionsCategorized=menuOptionsCategorized,result},initialize:function(options){BaseView.prototype.initialize.apply(this,[options]),this.options=options,this.selectedCollection=this.app.selectedCollection;var menuGenerator=this.options.menuGenerator||this.menuGenerator;if(menuGenerator){var menuOptions=require(menuGenerator)(this);"object"==typeof menuOptions&&(this.menuOptions=menuOptions)}},render:function(){this.$el.empty();var data=this.model.toJSON();return data.header=this.options.header||null,data.menuOptions=this.menuOptionsCategorized,this.$el.html(this.template($.extend({_t:_t,id:utils.generateId()},data))),data.menuOptions.dropdown&&(this.$dropdown=this.$(".dropdown-toggle"),this.$dropdown.dropdown()),this.options.className&&this.$el.addClass(this.options.className),registry.scan(this.$el),this}})}),define("text!mockup-patterns-structure-url/templates/tablerow.xml",[],function(){return'<td class="selection" data-order="<%- attributes[\'_sort\'] %>"><input type="checkbox" <% if(selected){ %> checked="checked" <% } %>/></td>\n\n<td class="title">\n  <div class="pull-left">\n    <a href="<%- viewURL %>"\n        class="manage state-<%- review_state %> contenttype-<%- contenttype %>"\n        title="<%- portal_type %>">\n        <% if(attributes["getMimeIcon"] && contenttype == \'file\'){ %>\n           <img class="mime-icon" src="<%- getMimeIcon %>"> <% } %>\n      <% if(Title){ %>\n        <%- Title %>\n      <% } else { %>\n        <em><%- id %></em>\n      <% } %>\n    </a>\n    <% if(expired){ %>\n      <span class="plone-item-expired"><%- _t(\'Expired\') %></span>\n    <% } %>\n    <% if(ineffective){ %>\n      <span class="plone-item-ineffective"><%- _t(\'Before publishing date\') %></span>\n    <% } %>\n    <% if(activeColumns.indexOf(\'Description\') !== -1 && _.has(availableColumns, \'Description\') && Description) { %>\n    <p class="Description">\n      <small>\n        <%- Description %>\n      </small>\n    </p>\n    <% } %>\n  </div>\n  <% if(attributes["getIcon"] && thumb_scale) { %>\n    <img class="thumb-<%- thumb_scale %> pull-right" src="<%- getURL %>/@@images/image/<%- thumb_scale %>">\n  <% } %>\n</td>\n\n<% _.each(activeColumns, function(column) { %>\n  <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n    <td class="<%- column %>" data-order="<%- attributes[column] %>"><%- attributes[column] %></td>\n  <% } %>\n<% }); %>\n\n<td class="actionmenu-container"></td>\n'}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("moment",factory):global.moment=factory()}(this,function(){"use strict";var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function getParsingFlags(m){return null==m._pf&&(m._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m);m._isValid=!(isNaN(m._d.getTime())||!(flags.overflow<0)||flags.empty||flags.invalidMonth||flags.invalidWeekday||flags.nullInput||flags.invalidFormat||flags.userInvalidated),m._strict&&(m._isValid=m._isValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour)}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(void 0!==from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),void 0!==from._i&&(to._i=from._i),void 0!==from._f&&(to._f=from._f),void 0!==from._l&&(to._l=from._l),void 0!==from._strict&&(to._strict=from._strict),void 0!==from._tzm&&(to._tzm=from._tzm),void 0!==from._isUTC&&(to._isUTC=from._isUTC),void 0!==from._offset&&(to._offset=from._offset),void 0!==from._pf&&(to._pf=getParsingFlags(from)),void 0!==from._locale&&(to._locale=from._locale),0<momentProperties.length)for(i in momentProperties)void 0!==(val=from[prop=momentProperties[i]])&&(to[prop]=val);return to}var updateInProgress=!1;function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),!1===updateInProgress&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return number<0?Math.ceil(number):Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function Locale(){}var globalLocale,locales={};function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data=void 0===values?locale_locales__getLocale(key):defineLocale(key,values))&&(globalLocale=data),globalLocale._abbr}function defineLocale(name,values){return null!==values?(values.abbr=name,locales[name]=locales[name]||new Locale,locales[name].set(values),locale_locales__getSetGlobalLocale(name),locales[name]):(delete locales[name],null)}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return function(names){for(var j,next,locale,split,i=0;i<names.length;){for(j=(split=normalizeLocale(names[i]).split("-")).length,next=(next=normalizeLocale(names[i+1]))?next.split("-"):null;0<j;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}(key)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop))&&(normalizedInput[normalizedProp]=inputObject[prop]);return normalizedInput}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else if("function"==typeof this[units=normalizeUnits(units)])return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length;return(0<=number?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||function(format){var i,length,input,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=(input=array[i]).match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"");return function(mom){var output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}for(localFormattingTokens.lastIndex=0;0<=i&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={};function addRegexToken(token,regex,strictRegex){var sth;regexes[token]="function"==typeof(sth=regex)&&"[object Function]"===Object.prototype.toString.call(sth)?regex:function(isStrict){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(token.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}var tokens={};function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",matchWord),addRegexToken("MMMM",matchWord),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function setMonth(mom,value){var dayOfMonth;return"string"==typeof value&&"number"!=typeof(value=mom.localeData().monthsParse(value))||(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth)),mom}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[MONTH]<0||11<a[MONTH]?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||24<a[HOUR]||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||59<a[MINUTE]?MINUTE:a[SECOND]<0||59<a[SECOND]?SECOND:a[MILLISECOND]<0||999<a[MILLISECOND]?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||DATE<overflow)&&(overflow=DATE),getParsingFlags(m).overflow=overflow),m}function warn(msg){!1===utils_hooks__hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(warn(msg+"\n"+(new Error).stack),firstTime=!1),fn.apply(this,arguments)},fn)}var deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break}for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(string)){config._f+=(match[6]||" ")+isoTimes[i][0];break}string.match(matchOffset)&&(config._f+="Z"),configFromStringAndFormat(config)}else config._isValid=!1}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<1970&&date.setUTCFullYear(y),date}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)});var getSetYear=makeGetSet("FullYear",!(utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(68<toInt(input)?1900:2e3)}));function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return end<daysToDayOfWeek&&(daysToDayOfWeek-=7),daysToDayOfWeek<end-7&&(daysToDayOfWeek+=7),adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function defaults(a,b,c){return null!=a?a:null!=b?b:c}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=function(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&function(config){var w,weekYear,week,weekday,dow,doy,temp;null!=(w=config._w).GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d)<dow&&++week:weekday=null!=w.e?w.e+dow:dow);temp=function(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var dayOfYear,week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,d=createUTCDate(year,0,1+week1Jan).getUTCDay();return d<firstDayOfWeek&&(d+=7),{year:0<(dayOfYear=1+week1Jan+7*(week-1)-d+(weekday=null!=weekday?1*weekday:firstDayOfWeek))?year:year-1,dayOfYear:0<dayOfYear?dayOfYear:daysInYear(year-1)+dayOfYear}}(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:function(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<1970&&date.setFullYear(y),date}).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function configFromStringAndFormat(config){if(config._f!==utils_hooks__hooks.ISO_8601){config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],(parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0])&&(0<(skipped=string.substr(0,string.indexOf(parsedInput))).length&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,0<string.length&&getParsingFlags(config).unusedInput.push(string),!0===getParsingFlags(config).bigHour&&config._a[HOUR]<=12&&0<config._a[HOUR]&&(getParsingFlags(config).bigHour=void 0),config._a[HOUR]=function(locale,hour,meridiem){var isPm;if(null==meridiem)return hour;return null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):(null!=locale.isPM&&((isPm=locale.isPM(meridiem))&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0)),hour)}(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}else configFromISO(config)}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||void 0===format&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?function(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,config._d=new Date(NaN);for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}(config):format?configFromStringAndFormat(config):isDate(input)?config._d=input:function(config){var input=config._i;void 0===input?config._d=new Date:isDate(input)?config._d=new Date(+input):"string"==typeof input?function(config){var matched=aspNetJsonRegex.exec(config._i);null===matched?(configFromISO(config),!1===config._isValid&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config))):config._d=new Date(+matched[1])}(config):isArray(input)?(config._a=function(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):"object"==typeof input?function(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],configFromArray(config)}}(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}(config),config))}function createLocalOrUTC(input,format,locale,strict,isUTC){var res,c={};return"boolean"==typeof locale&&(strict=locale,locale=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,(res=new Moment(checkOverflow(prepareConfig(c))))._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other}),prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return this<other?this:other});function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)moments[i].isValid()&&!moments[i][fn](res)||(res=moments[i]);return res}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return offset<0&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchOffset),addRegexToken("ZZ",matchOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=(string||"").match(matchOffset)||[],parts=((matches[matches.length-1]||[])+"").match(chunkOffset)||["-",0,0],minutes=60*parts[1]+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-+res,res._d.setTime(+res._d+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function isUtc(){return this._isUTC&&0===this._offset}utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=create__isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=function(base,other){var res;other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):((res=positiveMomentsDifference(other,base)).milliseconds=-res.milliseconds,res.months=-res.months);return res}(local__createLocal(duration.from),local__createLocal(duration.to)),(duration={}).ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function createAdder(direction,name){return function(val,period){var tmp;return null===period||isNaN(+period)||(!function(name,msg){deprecations[name]||(warn(msg),deprecations[name]=!0)}(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),add_subtract__addSubtract(this,create__createDuration(val="string"==typeof val?+val:val,period),direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months)}create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(null!=(newLocaleData=locale_locales__getLocale(key))&&(this._locale=newLocaleData),this)}utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});function localeData(){return this._locale}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,0,"quarter"),addUnitAlias("quarter","Q"),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",matchWord),addRegexToken("ddd",matchWord),addRegexToken("dddd",matchWord),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0});var getSetHour=makeGetSet("Hours",!0);addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var token,getSetSecond=makeGetSet("Seconds",!1);for(addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3),token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=function(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)))},momentPrototype__proto.clone=function(){return new Moment(this)},momentPrototype__proto.diff=function(input,units,asFloat){var delta,output,that=cloneWithOffset(input,this),zoneDelta=6e4*(that.utcOffset()-this.utcOffset());return"year"===(units=normalizeUnits(units))||"month"===units||"quarter"===units?(a=this,b=that,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),adjust=b-anchor<0?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),(b-anchor)/(anchor2-anchor)),output=-(wholeMonthDiff+adjust),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output);var a,b,anchor2,adjust,wholeMonthDiff,anchor},momentPrototype__proto.endOf=function(units){return void 0===(units=normalizeUnits(units))||"millisecond"===units?this:this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")},momentPrototype__proto.format=function(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output)},momentPrototype__proto.from=function(time,withoutSuffix){return this.isValid()?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()},momentPrototype__proto.fromNow=function(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)},momentPrototype__proto.to=function(time,withoutSuffix){return this.isValid()?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()},momentPrototype__proto.toNow=function(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)},momentPrototype__proto.get=getSet,momentPrototype__proto.invalidAt=function(){return getParsingFlags(this).overflow},momentPrototype__proto.isAfter=function(input,units){return"millisecond"===(units=normalizeUnits(void 0!==units?units:"millisecond"))?+(input=isMoment(input)?input:local__createLocal(input))<+this:(isMoment(input)?+input:+local__createLocal(input))<+this.clone().startOf(units)},momentPrototype__proto.isBefore=function(input,units){var inputMs;return"millisecond"===(units=normalizeUnits(void 0!==units?units:"millisecond"))?+this<+(input=isMoment(input)?input:local__createLocal(input)):(inputMs=isMoment(input)?+input:+local__createLocal(input),+this.clone().endOf(units)<inputMs)},momentPrototype__proto.isBetween=function(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)},momentPrototype__proto.isSame=function(input,units){var inputMs;return"millisecond"===(units=normalizeUnits(units||"millisecond"))?+this==+(input=isMoment(input)?input:local__createLocal(input)):(inputMs=+local__createLocal(input),+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units))},momentPrototype__proto.isValid=function(){return valid__isValid(this)},momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=function(){return extend({},getParsingFlags(this))},momentPrototype__proto.set=getSet,momentPrototype__proto.startOf=function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this},momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=function(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]},momentPrototype__proto.toObject=function(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}},momentPrototype__proto.toDate=function(){return this._offset?new Date(+this):this._d},momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=moment_format__toISOString,momentPrototype__proto.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},momentPrototype__proto.unix=function(){return Math.floor(+this/1e3)},momentPrototype__proto.valueOf=function(){return+this._d-6e4*(this._offset||0)},momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=function(){return isLeapYear(this.year())},momentPrototype__proto.weekYear=function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")},momentPrototype__proto.isoWeekYear=function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")},momentPrototype__proto.quarter=momentPrototype__proto.quarters=function(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)},momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=function(){return daysInMonth(this.year(),this.month())},momentPrototype__proto.week=momentPrototype__proto.weeks=function(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")},momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")},momentPrototype__proto.weeksInYear=function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},momentPrototype__proto.isoWeeksInYear=function(){return weeksInYear(this.year(),1,4)},momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=function(input,locale){return"string"!=typeof input?input:isNaN(input)?"number"==typeof(input=locale.weekdaysParse(input))?input:null:parseInt(input,10)}(input,this.localeData()),this.add(input-day,"d")):day},momentPrototype__proto.weekday=function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")},momentPrototype__proto.isoWeekday=function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},momentPrototype__proto.dayOfYear=function(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")},momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=function(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null!=input?("string"==typeof input&&(input=offsetFromString(input)),Math.abs(input)<16&&(input*=60),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this)},momentPrototype__proto.utc=function(keepLocalTime){return this.utcOffset(0,keepLocalTime)},momentPrototype__proto.local=function(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this},momentPrototype__proto.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(offsetFromString(this._i)),this},momentPrototype__proto.hasAlignedHourOffset=function(input){return input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60==0},momentPrototype__proto.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},momentPrototype__proto.isDSTShifted=function(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var c={};if(copyConfig(c,this),(c=prepareConfig(c))._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&0<compareArrays(c._a,other.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted},momentPrototype__proto.isLocal=function(){return!this._isUTC},momentPrototype__proto.isUtcOffset=function(){return this._isUTC},momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=function(){return this._isUTC?"UTC":""},momentPrototype__proto.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()});var momentPrototype=momentPrototype__proto;function preParsePostFormat(string){return string}var prototype__proto=Locale.prototype;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function list(format,index,field,count,setter){if("number"==typeof format&&(index=format,format=void 0),format=format||"",null!=index)return lists__get(format,index,field,setter);var i,out=[];for(i=0;i<count;i++)out[i]=lists__get(format,i,field,setter);return out}prototype__proto._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},prototype__proto.calendar=function(key,mom,now){var output=this._calendar[key];return"function"==typeof output?output.call(mom,now):output},prototype__proto._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},prototype__proto.longDateFormat=function(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])},prototype__proto._invalidDate="Invalid date",prototype__proto.invalidDate=function(){return this._invalidDate},prototype__proto._ordinal="%d",prototype__proto.ordinal=function(number){return this._ordinal.replace("%d",number)},prototype__proto._ordinalParse=/\d{1,2}/,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},prototype__proto.relativeTime=function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},prototype__proto.pastFuture=function(diff,output){var format=this._relativeTime[0<diff?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},prototype__proto.set=function(config){var prop,i;for(i in config)"function"==typeof(prop=config[i])?this[i]=prop:this["_"+i]=prop;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},prototype__proto.months=function(m){return this._months[m.month()]},prototype__proto._months=defaultLocaleMonths,prototype__proto.monthsShort=function(m){return this._monthsShort[m.month()]},prototype__proto._monthsShort=defaultLocaleMonthsShort,prototype__proto.monthsParse=function(monthName,format,strict){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}},prototype__proto.week=function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},prototype__proto._week={dow:0,doy:6},prototype__proto.firstDayOfYear=function(){return this._week.doy},prototype__proto.firstDayOfWeek=function(){return this._week.dow},prototype__proto.weekdays=function(m){return this._weekdays[m.day()]},prototype__proto._weekdays=defaultLocaleWeekdays,prototype__proto.weekdaysMin=function(m){return this._weekdaysMin[m.day()]},prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin,prototype__proto.weekdaysShort=function(m){return this._weekdaysShort[m.day()]},prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort,prototype__proto.weekdaysParse=function(weekdayName){var i,mom,regex;for(this._weekdaysParse=this._weekdaysParse||[],i=0;i<7;i++)if(this._weekdaysParse[i]||(mom=local__createLocal([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},prototype__proto.isPM=function(input){return"p"===(input+"").toLowerCase().charAt(0)},prototype__proto._meridiemParse=/[ap]\.?m?\.?/i,prototype__proto.meridiem=function(hours,minutes,isLower){return 11<hours?isLower?"pm":"PM":isLower?"am":"AM"},locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10;return number+(1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs;function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y");function makeGetter(name){return function(){return this._data[name]}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");var round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11};var iso_string__abs=Math.abs;function iso_string__toISOString(){var minutes,hours,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);hours=absFloor((minutes=absFloor(seconds/60))/60),seconds%=60,minutes%=60;var Y=absFloor(months/12),M=months%=12,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var duration_prototype__proto=Duration.prototype;return duration_prototype__proto.abs=function(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this},duration_prototype__proto.add=function(input,value){return duration_add_subtract__addSubtract(this,input,value,1)},duration_prototype__proto.subtract=function(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)},duration_prototype__proto.as=function(units){var days,months,milliseconds=this._milliseconds;if("month"===(units=normalizeUnits(units))||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}},duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},duration_prototype__proto._bubble=function(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return 0<=milliseconds&&0<=days&&0<=months||milliseconds<=0&&days<=0&&months<=0||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),months=days=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,months+=monthsFromDays=absFloor(daysToMonths(days+=absFloor(hours/24))),days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this},duration_prototype__proto.get=function(units){return this[(units=normalizeUnits(units))+"s"]()},duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=function(){return absFloor(this.days()/7)},duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=function(withSuffix){var locale=this.localeData(),output=function(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<thresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<thresholds.h&&["hh",hours]||1===days&&["d"]||days<thresholds.d&&["dd",days]||1===months&&["M"]||months<thresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=0<+posNegDuration,a[4]=locale,function(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}.apply(null,a)}(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)},duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",/[+-]?\d+(\.\d{1,3})?/),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.10.6",hookCallback=local__createLocal,utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=function(){return pickBy("isBefore",[].slice.call(arguments,0))},utils_hooks__hooks.max=function(){return pickBy("isAfter",[].slice.call(arguments,0))},utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=function(input){return local__createLocal(1e3*input)},utils_hooks__hooks.months=function(format,index){return list(format,index,"months",12,"month")},utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=function(format,index){return list(format,index,"weekdays",7,"day")},utils_hooks__hooks.parseZone=function(){return local__createLocal.apply(null,arguments).parseZone()},utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=function(format,index){return list(format,index,"monthsShort",12,"month")},utils_hooks__hooks.weekdaysMin=function(format,index){return list(format,index,"weekdaysMin",7,"day")},utils_hooks__hooks.defineLocale=defineLocale,utils_hooks__hooks.weekdaysShort=function(format,index){return list(format,index,"weekdaysShort",7,"day")},utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeThreshold=function(threshold,limit){return void 0!==thresholds[threshold]&&(void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,!0))},utils_hooks__hooks}),define("mockup-patterns-structure-url/js/views/tablerow",["jquery","underscore","backbone","mockup-patterns-structure-url/js/navigation","mockup-patterns-structure-url/js/views/actionmenu","text!mockup-patterns-structure-url/templates/tablerow.xml","mockup-utils","translate","moment"],function($,_,Backbone,Nav,ActionMenuView,TableRowTemplate,utils,_t,moment){"use strict";return Backbone.View.extend({tagName:"tr",className:"itemRow",template:_.template(TableRowTemplate),events:{"change input":"itemSelected","click td.title a.manage":"itemClicked"},initialize:function(options){this.options=options,this.app=options.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table,this.now=moment()},expired:function(data){return!!data.attributes.ExpirationDate&&moment(data.attributes.ExpirationDate).diff(this.now,"seconds")<0},ineffective:function(data){return!!data.attributes.EffectiveDate&&0<moment(data.attributes.EffectiveDate).diff(this.now,"seconds")},render:function(){var data=this.model.toJSON();data.selected=!1,this.selectedCollection.findWhere({UID:data.UID})&&(data.selected=!0),data.attributes=this.model.attributes,data.activeColumns=this.app.activeColumns,data.availableColumns=this.app.availableColumns,data.portal_type=data.portal_type?data.portal_type:"",data.contenttype=data.portal_type.toLowerCase().replace(/\.| /g,"-"),data._authenticator=utils.getAuthenticator(),data.thumb_scale=this.app.thumb_scale;var viewAction=this.app.typeToViewAction&&this.app.typeToViewAction[data.attributes.portal_type]||"";data.viewURL=data.attributes.getURL+viewAction,data._t=_t,data.expired=this.expired(data),data.ineffective=this.ineffective(data),this.$el.html(this.template(data));var attrs=this.model.attributes;this.$el.addClass("state-"+attrs.review_state).addClass("type-"+attrs.portal_type),attrs.is_folderish&&this.$el.addClass("folder"),this.$el.attr("data-path",data.path),this.$el.attr("data-UID",data.UID),this.$el.attr("data-id",data.id),this.$el.attr("data-type",data.portal_type),this.$el.attr("data-folderish",data.is_folderish),this.$el.removeClass("expired"),this.$el.removeClass("ineffective"),data.expired&&this.$el.addClass("expired"),data.ineffective&&this.$el.addClass("ineffective"),this.el.model=this.model;var canMove=!!this.app.options.moveUrl;return this.menu=new ActionMenuView({app:this.app,model:this.model,menuOptions:this.app.menuOptions,menuGenerator:this.app.menuGenerator,canMove:canMove}),$(".actionmenu-container",this.$el).append(this.menu.render().el),this},itemClicked:function(e){var key,keyEvent=this.app.keyEvent;key=keyEvent&&keyEvent.ctrlKey||!this.model.attributes.is_folderish?"other":"folder";var definition=this.app.options.tableRowItemAction[key]||[],libName=definition[0],method=definition[1];if("string"!=typeof libName||"string"!=typeof key)return null;var lib=new(require(libName))(this);return lib[method]&&lib[method](e)},itemSelected:function(){var checkbox=this.$("input")[0];checkbox.checked?this.app.selectedCollection.add(this.model.clone()):this.app.selectedCollection.removeResult(this.model);var selectedCollection=this.selectedCollection,keyEvent=this.app.keyEvent;if(keyEvent&&keyEvent.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode){var $el=$(this.app.last_selected),lastCheckedIndex=$el.index(),thisIndex=this.$el.index();this.app.tableView.$('input[type="checkbox"]').each(function(){var index=($el=$(this)).parents("tr").index();if(lastCheckedIndex<index&&index<thisIndex||index<lastCheckedIndex&&thisIndex<index){this.checked=checkbox.checked;var $tr=$(this).closest("tr.itemRow");if(0<$tr.length){var model=$tr[0].model,existing=selectedCollection.getByUID(model.attributes.UID);this.checked?existing||selectedCollection.add(model.clone()):existing&&selectedCollection.removeResult(existing)}}})}this.app.last_selected=this.el}})}),define("text!mockup-patterns-structure-url/templates/table.xml",[],function(){return'<div class="alert alert-<%- status.type %> status">\n  <strong><%- status.label %></strong>\n  <span><%- status.text %></span>&nbsp;<% // &nbsp; to get correct height for empty alerts %>\n</div>\n\n<div class="fc-breadcrumbs-container">\n  <div class="fc-breadcrumbs" colspan="<%- activeColumns.length + 3 %>">\n    <a href="#" data-path="/">\n      <span class="glyphicon glyphicon-home"></span> /\n    </a>\n    <% _.each(pathParts, function(part, idx, list){\n      if(part){\n        if(idx > 0){ %>\n          /\n        <% } %>\n        <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n      <% }\n    }); %>\n  </div>\n</div>\n\n<table class="pat-datatables table table-striped table-bordered"\n       data-pat-datatables="<%- datatables_options %>">\n  <thead>\n    <tr>\n      <th class="selection"><input type="checkbox" class="select-all" /></th>\n      <th class="title"><%- _t(\'Title\') %></th>\n      <% _.each(activeColumns, function(column){ %>\n        <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th class="actions"><%- _t("Actions") %></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'}),function(root){define("jquery.event.drop",["jquery"],function(){return function(){return function($){$.fn.drop=function(str,arg,opts){var type="string"==typeof str?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;return 0!==type.indexOf("drop")&&(type="drop"+type),opts=(str==fn?arg:opts)||{},fn?this.bind(type,opts,fn):this.trigger(type)},$.drop=function(opts){opts=opts||{},drop.multi=!0===opts.multi?1/0:!1===opts.multi?1:isNaN(opts.multi)?drop.multi:opts.multi,drop.delay=opts.delay||drop.delay,drop.tolerance=$.isFunction(opts.tolerance)?opts.tolerance:null===opts.tolerance?null:drop.tolerance,drop.mode=opts.mode||drop.mode||"intersect"};var $special=$.event.special,drop=$.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(obj){$.data(this,drop.datakey).related+=1},remove:function(){$.data(this,drop.datakey).related-=1},setup:function(){if(!$.data(this,drop.datakey)){$.data(this,drop.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),drop.targets.push(this)}},teardown:function(){if(!($.data(this,drop.datakey)||{}).related){$.removeData(this,drop.datakey);var element=this;drop.targets=$.grep(drop.targets,function(target){return target!==element})}},handler:function(event,dd){var $targets;if(dd)switch(event.type){case"mousedown":case"touchstart":$targets=$(drop.targets),"string"==typeof dd.drop&&($targets=$targets.filter(dd.drop)),$targets.each(function(){var data=$.data(this,drop.datakey);data.active=[],data.anyactive=0,data.winner=0}),dd.droppable=$targets,$special.drag.hijack(event,"dropinit",dd);break;case"mousemove":case"touchmove":drop.event=event,drop.timer||drop.tolerate(dd);break;case"mouseup":case"touchend":drop.timer=clearTimeout(drop.timer),dd.propagates&&($special.drag.hijack(event,"drop",dd),$special.drag.hijack(event,"dropend",dd))}},locate:function(elem,index){var data=$.data(elem,drop.datakey),$elem=$(elem),posi=$elem.offset()||{},height=$elem.outerHeight(),width=$elem.outerWidth(),location={elem:elem,width:width,height:height,top:posi.top,left:posi.left,right:posi.left+width,bottom:posi.top+height};return data&&(data.location=location,data.index=index,data.elem=elem),location},contains:function(target,test){return(test[0]||test.left)>=target.left&&(test[0]||test.right)<=target.right&&(test[1]||test.top)>=target.top&&(test[1]||test.bottom)<=target.bottom},modes:{intersect:function(event,proxy,target){return this.contains(target,[event.pageX,event.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(event,proxy,target){return Math.max(0,Math.min(target.bottom,proxy.bottom)-Math.max(target.top,proxy.top))*Math.max(0,Math.min(target.right,proxy.right)-Math.max(target.left,proxy.left))},fit:function(event,proxy,target){return this.contains(target,proxy)?1:0},middle:function(event,proxy,target){return this.contains(target,[proxy.left+.5*proxy.width,proxy.top+.5*proxy.height])?1:0}},sort:function(a,b){return b.winner-a.winner||a.index-b.index},tolerate:function(dd){var i,drp,drg,data,arr,len,elem,ia,x=0,end=dd.interactions.length,xy=[drop.event.pageX,drop.event.pageY],tolerance=drop.tolerance||drop.modes[drop.mode];do{if(ia=dd.interactions[x]){if(!ia)return;ia.drop=[],arr=[],len=ia.droppable.length,tolerance&&(drg=drop.locate(ia.proxy)),i=0;do{if(elem=ia.droppable[i]){if(!(drp=(data=$.data(elem,drop.datakey)).location))continue;data.winner=tolerance?tolerance.call(drop,drop.event,drg,drp):drop.contains(drp,xy)?1:0,arr.push(data)}}while(++i<len);for(arr.sort(drop.sort),i=0;(data=arr[i])&&(data.winner&&ia.drop.length<drop.multi?(data.active[x]||data.anyactive||(!1!==$special.drag.hijack(drop.event,"dropstart",dd,x,data.elem)[0]?(data.active[x]=1,data.anyactive+=1):data.winner=0),data.winner&&ia.drop.push(data.elem)):data.active[x]&&1==data.anyactive&&($special.drag.hijack(drop.event,"dropend",dd,x,data.elem),data.active[x]=0,data.anyactive-=1)),++i<len;);}}while(++x<end);drop.last&&xy[0]==drop.last.pageX&&xy[1]==drop.last.pageY?delete drop.timer:drop.timer=setTimeout(function(){drop.tolerate(dd)},drop.delay),drop.last=drop.event}};$special.dropinit=$special.dropstart=$special.dropend=drop}(jQuery),$.drop}.apply(root,arguments)})}(this),function(root){define("jquery.event.drag",["jquery"],function(){return function(){!function($){$.fn.drag=function(str,arg,opts){var type="string"==typeof str?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;return 0!==type.indexOf("drag")&&(type="drag"+type),opts=(str==fn?arg:opts)||{},fn?this.bind(type,opts,fn):this.trigger(type)};var $event=$.event,$special=$event.special,drag=$special.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(obj){var data=$.data(this,drag.datakey),opts=obj.data||{};data.related+=1,$.each(drag.defaults,function(key,def){void 0!==opts[key]&&(data[key]=opts[key])})},remove:function(){$.data(this,drag.datakey).related-=1},setup:function(){if(!$.data(this,drag.datakey)){var data=$.extend({related:0},drag.defaults);$.data(this,drag.datakey,data),$event.add(this,"touchstart mousedown",drag.init,data),this.attachEvent&&this.attachEvent("ondragstart",drag.dontstart)}},teardown:function(){($.data(this,drag.datakey)||{}).related||($.removeData(this,drag.datakey),$event.remove(this,"touchstart mousedown",drag.init),drag.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",drag.dontstart))},init:function(event){if(!drag.touched){var results,dd=event.data;if(!(0!=event.which&&0<dd.which&&event.which!=dd.which)&&!$(event.target).is(dd.not)&&(!dd.handle||$(event.target).closest(dd.handle,event.currentTarget).length)&&(drag.touched="touchstart"==event.type?this:null,dd.propagates=1,dd.mousedown=this,dd.interactions=[drag.interaction(this,dd)],dd.target=event.target,dd.pageX=event.pageX,dd.pageY=event.pageY,dd.dragging=null,results=drag.hijack(event,"draginit",dd),dd.propagates))return(results=drag.flatten(results))&&results.length&&(dd.interactions=[],$.each(results,function(){dd.interactions.push(drag.interaction(this,dd))})),dd.propagates=dd.interactions.length,!1!==dd.drop&&$special.drop&&$special.drop.handler(event,dd),drag.textselect(!1),drag.touched?$event.add(drag.touched,"touchmove touchend",drag.handler,dd):$event.add(document,"mousemove mouseup",drag.handler,dd),!(!drag.touched||dd.live)&&void 0}},interaction:function(elem,dd){var offset=$(elem)[dd.relative?"position":"offset"]()||{top:0,left:0};return{drag:elem,callback:new drag.callback,droppable:[],offset:offset}},handler:function(event){var dd=event.data;switch(event.type){case!dd.dragging&&"touchmove":event.preventDefault();case!dd.dragging&&"mousemove":if(Math.pow(event.pageX-dd.pageX,2)+Math.pow(event.pageY-dd.pageY,2)<Math.pow(dd.distance,2))break;event.target=dd.target,drag.hijack(event,"dragstart",dd),dd.propagates&&(dd.dragging=!0);case"touchmove":event.preventDefault();case"mousemove":if(dd.dragging){if(drag.hijack(event,"drag",dd),dd.propagates){!1!==dd.drop&&$special.drop&&$special.drop.handler(event,dd);break}event.type="mouseup"}case"touchend":case"mouseup":default:drag.touched?$event.remove(drag.touched,"touchmove touchend",drag.handler):$event.remove(document,"mousemove mouseup",drag.handler),dd.dragging&&(!1!==dd.drop&&$special.drop&&$special.drop.handler(event,dd),drag.hijack(event,"dragend",dd)),drag.textselect(!0),!1===dd.click&&dd.dragging&&$.data(dd.mousedown,"suppress.click",(new Date).getTime()+5),dd.dragging=drag.touched=!1}},hijack:function(event,type,dd,x,elem){if(dd){var result,ia,callback,orig={event:event.originalEvent,type:event.type},mode=type.indexOf("drop")?"drag":"drop",i=x||0,len=isNaN(x)?dd.interactions.length:x;event.type=type,event.originalEvent=null,dd.results=[];do{if(ia=dd.interactions[i]){if("dragend"!==type&&ia.cancelled)continue;callback=drag.properties(event,dd,ia),ia.results=[],$(elem||ia[mode]||dd.droppable).each(function(p,subject){if(callback.target=subject,!(event.isPropagationStopped=function(){return!1})===(result=subject?$event.dispatch.call(subject,event,callback):null)?("drag"==mode&&(ia.cancelled=!0,dd.propagates-=1),"drop"==type&&(ia[mode][p]=null)):"dropinit"==type&&ia.droppable.push(drag.element(result)||subject),"dragstart"==type&&(ia.proxy=$(drag.element(result)||ia.drag)[0]),ia.results.push(result),delete event.result,"dropinit"!==type)return result}),dd.results[i]=drag.flatten(ia.results),"dropinit"==type&&(ia.droppable=drag.flatten(ia.droppable)),"dragstart"!=type||ia.cancelled||callback.update()}}while(++i<len);return event.type=orig.type,event.originalEvent=orig.event,drag.flatten(dd.results)}},properties:function(event,dd,ia){var obj=ia.callback;return obj.drag=ia.drag,obj.proxy=ia.proxy||ia.drag,obj.startX=dd.pageX,obj.startY=dd.pageY,obj.deltaX=event.pageX-dd.pageX,obj.deltaY=event.pageY-dd.pageY,obj.originalX=ia.offset.left,obj.originalY=ia.offset.top,obj.offsetX=obj.originalX+obj.deltaX,obj.offsetY=obj.originalY+obj.deltaY,obj.drop=drag.flatten((ia.drop||[]).slice()),obj.available=drag.flatten((ia.droppable||[]).slice()),obj},element:function(arg){if(arg&&(arg.jquery||1==arg.nodeType))return arg},flatten:function(arr){return $.map(arr,function(member){return member&&member.jquery?$.makeArray(member):member&&member.length?drag.flatten(member):member})},textselect:function(bool){$(document)[bool?"unbind":"bind"]("selectstart",drag.dontstart).css("MozUserSelect",bool?"":"none"),document.unselectable=bool?"off":"on"},dontstart:function(){return!1},callback:function(){}};drag.callback.prototype={update:function(){$special.drop&&this.available.length&&$.each(this.available,function(i){$special.drop.locate(this,i)})}};var $dispatch=$event.dispatch;$event.dispatch=function(event){if(!(0<$.data(this,"suppress."+event.type)-(new Date).getTime()))return $dispatch.apply(this,arguments);$.removeData(this,"suppress."+event.type)};var touchHooks=$event.fixHooks.touchstart=$event.fixHooks.touchmove=$event.fixHooks.touchend=$event.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(event,orig){if(orig){var touched=orig.touches&&orig.touches[0]||orig.changedTouches&&orig.changedTouches[0]||null;touched&&$.each(touchHooks.props,function(i,prop){event[prop]=touched[prop]})}return event}}}(jQuery)}.apply(root,arguments)})}(this),define("mockup-patterns-sortable",["jquery","pat-base","jquery.event.drop","jquery.event.drag"],function($,Base,drop){"use strict";return Base.extend({name:"sortable",trigger:".pat-sortable",parser:"mockup",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",createDragItem:function(pattern,$el){return $el.clone().addClass(pattern.options.cloneClass).css({opacity:.75,position:"absolute"}).appendTo(document.body)},drop:void 0},init:function(){var self=this,start=0;self.$el.find(self.options.selector).drag("start",function(e,dd){var $el=$(this);return $(this).addClass(self.options.dragClass),drop({tolerance:function(event,proxy,target){if(0!==$(target.elem).closest(self.$el).length){var test=event.pageY>target.top+target.height/2;return $.data(target.elem,"drop+reorder",test?"insertAfter":"insertBefore"),this.contains(target,[event.pageX,event.pageY])}}}),start=$el.index(),self.options.createDragItem(self,$el)}).drag(function(e,dd){$(dd.proxy).css({top:dd.offsetY,left:dd.offsetX});var drop=dd.drop[0],method=$.data(drop||{},"drop+reorder");method&&drop&&(drop!=dd.current||method!=dd.method)&&($(this)[method](drop),dd.current=drop,dd.method=method,dd.update())}).drag("end",function(e,dd){var $el=$(this);$el.removeClass(self.options.dragClass),$(dd.proxy).remove(),self.options.drop&&("string"==typeof self.options.drop?window[self.options.drop]($el,$el.index()-start):self.options.drop($el,$el.index()-start))}).drop("init",function(e,dd){return this!=dd.drag})}})}),define("mockup-patterns-moment",["jquery","pat-base","moment","mockup-i18n"],function($,Base,moment,i18n){return Base.extend({name:"moment",trigger:".pat-moment",parser:"mockup",moment_i18n_map:{no:"nb"},defaults:{selector:null,format:"LLL",setTitle:!1},convert:function($el){var date=$el.attr("data-date");if(date||(date=$.trim($el.html())),date&&"None"!==date){var currentLanguage=(new i18n).currentLanguage;currentLanguage in this.moment_i18n_map&&(currentLanguage=this.moment_i18n_map[currentLanguage]),moment.locale([currentLanguage,"en"]),(date=moment(date)).isValid()&&(this.options.setTitle&&$el.attr("title",date.format("LLLL")),(date="relative"===this.options.format?date.fromNow():"calendar"===this.options.format?date.calendar():date.format(this.options.format))&&$el.html(date))}},init:function(){var self=this;self.options.selector?self.$el.find(self.options.selector).each(function(){self.convert($(this))}):self.convert(self.$el)}})}),function(root){define("bootstrap-alert",["jquery"],function(){return function(){return function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.6",Alert.TRANSITION_DURATION=150,Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr("data-target");selector||(selector=(selector=$this.attr("href"))&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),$parent.length||($parent=$this.closest(".alert")),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),window.jQuery.fn.alert.Constructor}.apply(root,arguments)})}(this),define("mockup-patterns-structure-url/js/views/table",["jquery","underscore","mockup-patterns-structure-url/js/views/tablerow","text!mockup-patterns-structure-url/templates/table.xml","mockup-ui-url/views/base","mockup-patterns-datatables","mockup-patterns-sortable","mockup-patterns-moment","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/views/actionmenu","translate","pat-registry","bootstrap-alert"],function($,_,TableRowView,TableTemplate,BaseView,patDataTables,Sortable,patMoment,Result,ActionMenuView,_t,registry){"use strict";return BaseView.extend({tagName:"div",template:_.template(TableTemplate),initialize:function(options){var self=this;BaseView.prototype.initialize.apply(self,[options]),self.collection=self.app.collection,self.selectedCollection=self.app.selectedCollection,self.listenTo(self.collection,"sync",self.render),self.listenTo(self.selectedCollection,"remove",self.render),self.listenTo(self.selectedCollection,"reset",self.render),self.collection.pager(),self.subsetIds=[],self.contextInfo=null,$("body").on("context-info-loaded",function(event,data){self.contextInfo=data,self.setContextInfo()}),self.dateColumns=["ModificationDate","EffectiveDate","CreationDate","ExpirationDate","start","end","last_comment_date"]},events:{"click .fc-breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll"},setContextInfo:function(){var data=this.contextInfo,$defaultPage=this.$('[data-id="'+data.defaultPage+'"]');0<$defaultPage.length&&$defaultPage.addClass("default-page");var crumbs=data.breadcrumbs;if(crumbs&&crumbs.length){var $crumbs=this.$(".fc-breadcrumbs a.crumb");_.each(crumbs,function(crumb,idx){$crumbs.eq(idx).html(crumb.title)})}},render:function(){var self=this,datatables_options={aaSorting:[],aoColumnDefs:[{bSortable:!1,aTargets:[0,self.app.activeColumns.length+2]}],paging:!1,searching:!1,info:!1};if($.extend(datatables_options,self.app.options.datatables_options),self.$el.html(self.template({_t:_t,pathParts:_.filter(self.app.getCurrentPath().split("/").slice(1),function(val){return 0<val.length}),status:self.app.status,activeColumns:self.app.activeColumns,availableColumns:self.app.availableColumns,datatables_options:JSON.stringify(datatables_options)})),self.collection.length){var container=self.$("tbody");self.collection.each(function(result){self.dateColumns.map(function(col){!result.attributes.hasOwnProperty(col)||"None"!==result.attributes[col]&&result.attributes[col]||(result.attributes[col]="")});var view=new TableRowView({model:result,app:self.app,table:self}).render();container.append(view.el)})}return self.moment=new patMoment(self.$el,{selector:"."+self.dateColumns.join(",."),format:self.options.app.momentFormat}),self.app.options.moveUrl&&self.addReordering(),self.storeOrder(),registry.scan(self.$el),self.$el.find("table").on("order.dt",function(e,settings,details){var btn=$('<button type="button" class="btn btn-danger btn-xs"></button>').text(_t("Reset column sorting")).on("click",function(e){self.$el.find("table.pat-datatables").data("patternDatatables").table.order([0,"asc"]).draw().order([]).draw(),self.addReordering(),self.app.setStatus()});self.app.setStatus(_t("Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column."),"warning",btn=btn),$(".pat-datatables tbody").find("tr").off("drag"),self.$el.removeClass("order-support")}),this},breadcrumbClicked:function(e){e.preventDefault();var $el=$(e.target);"A"!==$el[0].tagName&&($el=$el.parent("a"));var path="";$($el.prevAll("a").get().reverse()).each(function(){var part=$(this).attr("data-path");path+=part,"/"!==part&&(path+="/")}),path+=$el.attr("data-path"),this.app.setCurrentPath(path),this.collection.currentPage=1,this.collection.pager()},selectAll:function(e){$(e.target).is(":checked")?$('input[type="checkbox"]',this.$("tbody")).prop("checked",!0).change():(this.selectedCollection.remove(this.collection.models,{silent:!0}),this.selectedCollection.trigger("remove")),this.setContextInfo()},toggleSelectAll:function(e){$(e.target).is(":checked")||this.$(".select-all").prop("checked",!1)},addReordering:function(){var self=this;if(self.app.inQueryMode())return self.app.setStatus({text:_t("Cannot order items while querying"),type:"warning"}),void self.$el.removeClass("order-support");self.$el.addClass("order-support");new Sortable(self.$("tbody"),{selector:"tr",createDragItem:function(pattern,$el){var $tr=$el.clone(),$table=$("<table><tbody></tbody></table>");return $("tbody",$table).append($tr),$table.addClass("structure-dragging").css({opacity:.85,position:"absolute"}),$table.width($el.width()),$table.height($el.height()),$table.appendTo(document.body),$table},drop:function($el,delta){0!==delta&&(self.app.moveItem($el.attr("data-id"),delta,self.subsetIds),self.storeOrder())}})},storeOrder:function(){var subsetIds=[];this.$("tbody tr.itemRow").each(function(){subsetIds.push($(this).attr("data-id"))}),this.subsetIds=subsetIds}})}),define("text!mockup-ui-url/templates/popover.xml",[],function(){return'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n'}),define("mockup-ui-url/views/popover",["jquery","underscore","mockup-ui-url/views/container","mockup-patterns-backdrop","text!mockup-ui-url/templates/popover.xml"],function($,_,ContainerView,Backdrop,PopoverTemplate){"use strict";return ContainerView.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:PopoverTemplate,content:null,title:null,triggerView:null,idPrefix:"popover-",triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:void 0,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(options){ContainerView.prototype.initialize.apply(this,[options]),this.bindTriggerEvents(),this.on("render",function(){this.$el.attr("role","tooltip").attr("aria-hidden","false"),this.renderTitle(),this.renderContent()},this)},afterRender:function(){},getTemplateOptions:function(){return this.options},renderTitle:function(){var title=this.title;"function"==typeof title&&(title=title(this.getTemplateOptions())),this.$(".popover-title").empty().append(title)},renderContent:function(){this.$(".popover-content").empty().append(this.content(this.getTemplateOptions()))},bindTriggerEvents:function(){this.triggerView&&_.each(this.triggerEvents,function(func,event){var method=this[func];method||$.error("Function not found."),this.stopListening(this.triggerView,event),this.listenTo(this.triggerView,event,method)},this)},getPosition:function(){var $el=this.triggerView.$el;return $.extend({},{width:$el[0].offsetWidth,height:$el[0].offsetHeight},$el.offset())},getBodyClassName:function(){var name="popover-";return this.options.id&&(name+=this.options.id+"-"),name+="active"},show:function(){$(".popover:visible").each(function(){var popover=$(this).data("component");popover&&popover.hide()}),this.position(),this.setBackdrop(),!0===this.useBackdrop&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this),this.$el.attr("aria-hidden","false"),$("body").addClass(this.getBodyClassName())},position:function(){var tp,placement,actualWidth,actualHeight,pos=this.getPosition(),$tip=this.$el;switch(placement=this.placement,$tip.css({top:0,left:0}).addClass("active"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}this.applyPlacement(tp,placement)},applyPlacement:function(offset,placement){var actualWidth,actualHeight,delta,replace,$el=this.$el,$tip=this.$el,width=$tip[0].offsetWidth,height=$tip[0].offsetHeight;$el.removeClass(placement),$el.offset(offset).addClass(placement).addClass("active"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,"top"===placement&&actualHeight!==height&&(offset.top=offset.top+height-actualHeight,replace=!0),"bottom"===placement||"top"===placement?(delta=0,offset.left<0&&(delta=-2*offset.left,offset.left=0,$el.removeClass(placement),$el.offset(offset).addClass(placement),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.positionArrow(delta-width+actualWidth,actualWidth,"left")):this.positionArrow(actualHeight-height,actualHeight,"top"),replace&&$el.offset(offset)},positionArrow:function(delta,dimension,position){this.$(".arrow").css(position,delta?50*(1-delta/dimension)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&(this.triggerView.$el.removeClass("active"),this.triggerView.$el.attr("aria-hidden","true")),this.uiEventTrigger("hide",this),this.$el.attr("aria-hidden","true"),$("body").removeClass(this.getBodyClassName())},toggle:function(button,e){this.opened?this.hide():this.show()},setBackdrop:function(){if(!0===this.useBackdrop&&void 0===this.backdrop){var self=this;this.$backdrop=this.$el.closest(".ui-backdrop-element"),0===this.$backdrop.length&&(this.$backdrop=$("body")),this.backdrop=new Backdrop(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",function(e){"backdrop.patterns"===e.namespace&&(e.stopPropagation(),!0===self.opened&&self.hide())}),this.on("popover:hide",function(){this.backdrop.hide()},this)}}})}),define("text!mockup-patterns-structure-url/templates/selection_item.xml",[],function(){return'<span class="selected-item">\n  <a href="#" data-uid="<%- UID %>" title="remove" class="remove">\n    <span class="glyphicon glyphicon-remove-circle"></span>\n  </a>\n  <%- Title %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionwell",["jquery","underscore","mockup-ui-url/views/popover","text!mockup-patterns-structure-url/templates/selection_item.xml"],function($,_,PopoverView,ItemTemplate){"use strict";return PopoverView.extend({className:"popover selected-items",title:_.template('<input type="text" class="filter" placeholder="Filter" /><a href="#" class=" remove-all"><span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>'),content:_.template("<% collection.each(function(item) { %><%= item_template(item.toJSON()) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(options){PopoverView.prototype.initialize.apply(this,[options]);var self=this,timeout=0;this.listenTo(this.collection,"reset all add remove",function(){clearTimeout(timeout),timeout=setTimeout(function(){self.render()},50)}),this.options.item_template=_.template(ItemTemplate)},render:function(){return PopoverView.prototype.render.call(this),0===this.collection.length&&this.$el.removeClass("active"),this},itemRemoved:function(e){e.preventDefault();var uid=$(e.currentTarget).data("uid");this.collection.removeByUID(uid),0!==this.collection.length&&this.show()},filterSelected:function(e){var val=$(e.target).val().toLowerCase();$(".selected-item",this.$el).each(function(){var $el=$(this);-1===$el.text().toLowerCase().indexOf(val)?$el.hide():$el.show()})},removeAll:function(e){e.preventDefault(),this.collection.reset(),this.hide()}})}),define("mockup-patterns-structure-url/js/views/generic-popover",["jquery","underscore","mockup-ui-url/views/popover","translate","pat-registry"],function($,_,PopoverView,_t,registry){"use strict";return PopoverView.extend({events:{"click button.applyBtn":"applyButtonClicked","click button.closeBtn":"toggle"},submitText:_t("Apply"),initialize:function(options){this.app=options.app,this.className="popover "+options.id,this.title=options.form.title||options.title,this.submitText=options.form.submitText||_t("Apply"),this.submitContext=options.form.submitContext||"primary",this.data={},this.options=options,this.setContent(options.form.template),PopoverView.prototype.initialize.apply(this,[options])},setContent:function(content){var html="<form>"+content+"</form>";html+='<button class="btn btn-block btn-'+this.submitContext+' applyBtn">'+this.submitText+" </button>",this.options.form.closeText&&(html+='<button class="btn btn-block btn-default closeBtn">'+this.options.form.closeText+" </button>"),this.content=_.template(html)},getTemplateOptions:function(){var items=[];return this.app.selectedCollection.each(function(item){items.push(item.toJSON())}),$.extend({},!0,this.options,{items:items,data:this.data})},applyButtonClicked:function(){var data={};_.each(this.$el.find("form").serializeArray(),function(param){param.name in data?data[param.name]+=","+param.value:data[param.name]=param.value}),this.app.buttonClickEvent(this.triggerView,data),this.hide()},afterRender:function(){var self=this;if(self.options.form.dataUrl){self.$(".popover-content").html(_t("Loading...")),self.app.loading.show();var url=self.app.getAjaxUrl(self.options.form.dataUrl);$.ajax({url:url,dataType:"json",type:"POST",cache:!1,data:{selection:JSON.stringify(self.app.getSelectedUids()),transitions:!0,render:"yes"}}).done(function(result){self.data=result.data||result,self.renderContent(),registry.scan(self.$el)}).fail(function(){var originalContent=self.content;self.setContent("<p>"+_t("Error loading popover from server.")+"</p>",!1),self.renderContent(),self.content=originalContent}).always(function(){self.app.loading.hide(),self.position()})}else registry.scan(self.$el),self.position()},toggle:function(button,e){PopoverView.prototype.toggle.apply(this,[button,e]);this.opened&&(this.$el.replaceWith(this.render().el),this.position())}})}),define("mockup-patterns-structure-url/js/views/rearrange",["underscore","mockup-ui-url/views/popover","translate"],function(_,PopoverView,_t){"use strict";return PopoverView.extend({className:"popover rearrange",title:_.template('<%- _t("Rearrange items in this folder") %>'),content:_.template('<div class="form-group"><label><%- _t("What to rearrange on") %></label><select name="rearrange_on" class="form-control"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block"><b><%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %></b></p></div><div><label> <input type="checkbox" name="reversed" /> <%- _t("Reverse") %></label></div><button class="btn btn-block btn-primary"><%- _t("Rearrange") %></button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(options){this.app=options.app,PopoverView.prototype.initialize.apply(this,[options]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return PopoverView.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){if("/"!==this.app.collection.queryHelper.getCurrentPath()||window.confirm(_t("Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?"))){var data={rearrange_on:this.$rearrangeOn.val(),reversed:!1};this.$reversed[0].checked&&(data.reversed=!0),this.app.buttonClickEvent(this.triggerView,data),this.hide()}}})}),define("text!mockup-patterns-structure-url/templates/selection_button.xml",[],function(){return'<span class="glyphicon glyphicon-list"></span>\n<%- title %>\n<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\n  <%- length %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionbutton",["mockup-ui-url/views/button","text!mockup-patterns-structure-url/templates/selection_button.xml"],function(ButtonView,tplButton){"use strict";return ButtonView.extend({collection:null,template:tplButton,initialize:function(options){ButtonView.prototype.initialize.apply(this,[options]);var self=this;self.timeout=0,null!==this.collection&&this.collection.on("add remove reset",function(){clearTimeout(self.timeout),self.timeout=setTimeout(function(){self.render(),0===self.collection.length&&self.$el.removeClass("active")},50)},this)},serializedModel:function(){var obj={icon:"",title:this.options.title,length:0};return null!==this.collection&&(obj.length=this.collection.length),obj}})}),define("text!mockup-patterns-structure-url/templates/paging.xml",[],function(){return'  <ul class="pagination pagination-sm pagination-centered">\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, function(p){ %>\n    <li class="<% if (currentPage == p) { %>active<% } else if ( p == \'...\' ) { %>disabled<% }%>">\n      <a href="#" class="page"><%- p %></a>\n    </li>\n    <% }); %>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled"><a href="#"><%- _t("Show:") %></a></li>\n    <li class="serverhowmany serverhowmany15 <% if(perPage == 15){ %>disabled<% } %>">\n      <a href="#" class="">15</a>\n    </li>\n    <li class="serverhowmany serverhowmany30 <% if(perPage == 30){ %>disabled<% } %>">\n      <a href="#" class="">30</a>\n    </li>\n    <li class="serverhowmany serverhowmany50 <% if(perPage == 50){ %>disabled<% } %>">\n      <a href="#" class="">50</a>\n    </li>\n    <li class="serverhowmany serverhowmany250 <% if(perPage == 250){ %>disabled<% } %>">\n      <a href="#" class="">250</a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled">\n      <a href="#">\n        <%- _t("Page:") %> <span class="current"><%- currentPage %></span>\n        <%- _t("of") %>\n        <span class="total"><%- totalPages %></span>\n              <%- _t("shown") %>\n      </a>\n    </li>\n  </ul>\n'}),define("mockup-patterns-structure-url/js/views/paging",["jquery","underscore","backbone","text!mockup-patterns-structure-url/templates/paging.xml","translate"],function($,_,Backbone,PagingTemplate,_t){"use strict";return Backbone.View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:_.template(PagingTemplate),maxPages:7,initialize:function(options){this.options=options,this.app=this.options.app,this.collection=this.app.collection,this.collection.on("reset",this.render,this),this.collection.on("sync",this.render,this),this.$el.appendTo("#pagination")},render:function(){var data=this.collection.info();data.pages=this.getPages(data);var html=this.template($.extend({_t:_t},data));return this.$el.html(html),this},getPages:function(data){var totalPages=data.totalPages;if(!totalPages)return[];var currentPage=data.currentPage,left=1,right=totalPages;totalPages>this.maxPages&&(left=Math.max(1,Math.floor(currentPage-this.maxPages/2)),(right=Math.min(left+this.maxPages,totalPages))-left<this.maxPages&&(left-=Math.floor(this.maxPages/2)));for(var pages=[],i=left;i<=right;i+=1)pages.push(i);return 1<pages[0]&&(2<pages[0]&&(pages=["..."].concat(pages)),pages=[1].concat(pages)),pages[pages.length-1]<totalPages-1&&(pages[pages.length-2]<totalPages-2&&pages.push("..."),pages.push(totalPages)),pages},nextResultPage:function(e){e.preventDefault(),this.app.setStatus(),this.collection.requestNextPage()},previousResultPage:function(e){e.preventDefault(),this.app.setStatus(),this.collection.requestPreviousPage()},gotoFirst:function(e){e.preventDefault(),this.app.setStatus(),this.collection.goTo(this.collection.information.firstPage)},gotoLast:function(e){e.preventDefault(),this.app.setStatus(),this.collection.goTo(this.collection.information.totalPages)},gotoPage:function(e){e.preventDefault(),this.app.setStatus();var page=$(e.target).text();this.collection.goTo(page)},changeCount:function(e){e.preventDefault(),this.app.setStatus();var per=$(e.target).text();this.collection.howManyPer(per),this.app.setCookieSetting("perPage",per)}})}),define("mockup-patterns-structure-url/js/views/columns",["jquery","underscore","mockup-ui-url/views/popover","mockup-patterns-sortable"],function($,_,PopoverView,Sortable){"use strict";return PopoverView.extend({className:"popover attribute-columns",title:_.template('<%- _t("Columns") %>'),content:_.template('<label><%- _t("Select columns to show, drag and drop to reorder") %></label><ul></ul><button class="btn btn-block btn-success"><%- _t("Save") %></button>'),itemTemplate:_.template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(options){this.app=options.app,PopoverView.prototype.initialize.apply(this,[options])},afterRender:function(){var self=this;self.$container=self.$("ul"),_.each(self.app.activeColumns,function(id){var $el=$(self.itemTemplate({title:self.app.availableColumns[id],id:id}));$el.find("input")[0].checked=!0,self.$container.append($el)});var availableKeys=_.keys(_.omit(self.app.availableColumns,self.app.activeColumns)).sort(function(a,b){var ca=self.app.availableColumns[a],cb=self.app.availableColumns[b];return ca<cb?-1:ca==cb?0:1});_.each(availableKeys,function(id){var $el=$(self.itemTemplate({title:self.app.availableColumns[id],id:id}));self.$container.append($el)});new Sortable(self.$container,{selector:"li"});return this},applyButtonClicked:function(){var self=this;this.hide(),self.app.activeColumns=[],self.$("input:checked").each(function(){self.app.activeColumns.push($(this).val())}),self.app.setCookieSetting(self.app.activeColumnsCookie,this.app.activeColumns),self.app.tableView.render()}})}),function(root){define("select2",["jquery"],function(){return function(){var $;void 0===($=jQuery).fn.each2&&$.extend($.fn,{each2:function(c){for(var j=$([0]),i=-1,l=this.length;++i<l&&(j.context=j[0]=this[i])&&!1!==c.call(j[0],i,j););return this}}),function($,undefined){"use strict";if(window.Select2===undefined){var AbstractSelect2,SingleSelect2,MultiSelect2,nextUid,sizer,$document,scrollBarDimensions,counter,lastMousePosition={x:0,y:0},KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(k){switch(k=k.which?k.which:k){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return!0}return!!e.metaKey},isFunctionKey:function(k){return 112<=(k=k.which?k.which:k)&&k<=123}},DIACRITICS={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};$document=$(document),counter=1,nextUid=function(){return counter++},SingleSelect2=clazz(AbstractSelect2=clazz(Object,{bind:function(func){var self=this;return function(){func.apply(self,arguments)}},init:function(opts){var results,search;this.opts=opts=this.prepareOpts(opts),this.id=opts.id,opts.element.data("select2")!==undefined&&null!==opts.element.data("select2")&&opts.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=$(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(opts.element.attr("id")||"autogen"+nextUid()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",opts.element.attr("title")),this.body=$(document.body),syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",opts.element.attr("style")),this.container.css(evaluate(opts.containerCss,this.opts.element)),this.container.addClass(evaluate(opts.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",killEvent),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(evaluate(opts.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",killEvent),this.results=results=this.container.find(".select2-results"),this.search=search=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",killEvent),this.results.on("mousemove",function(e){var lastpos=lastMousePosition;lastpos!==undefined&&lastpos.x===e.pageX&&lastpos.y===e.pageY||$(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind(function(event){this._touchEvent=!0,this.highlightUnderEvent(event)})),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(event){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(threshold,element){var notify=debounce(threshold,function(e){element.trigger("scroll-debounced",e)});element.on("scroll",function(e){0<=indexOf(e.target,element.get())&&notify(e)})}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),$(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),$(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),$.fn.mousewheel&&results.mousewheel(function(e,delta,deltaX,deltaY){var top=results.scrollTop();0<deltaY&&top-deltaY<=0?(results.scrollTop(0),killEvent(e)):deltaY<0&&results.get(0).scrollHeight-results.scrollTop()+deltaY<=results.height()&&(results.scrollTop(results.get(0).scrollHeight-results.height()),killEvent(e))}),installKeyUpChangeEvent(search),search.on("keyup-change input paste",this.bind(this.updateResults)),search.on("focus",function(){search.addClass("select2-focused")}),search.on("blur",function(){search.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(e){0<$(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=undefined,$.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==opts.maximumInputLength&&this.search.attr("maxlength",opts.maximumInputLength);var disabled=opts.element.prop("disabled");disabled===undefined&&(disabled=!1),this.enable(!disabled);var readonly=opts.element.prop("readonly");readonly===undefined&&(readonly=!1),this.readonly(readonly),scrollBarDimensions=scrollBarDimensions||function(){var $template=$("<div class='select2-measure-scrollbar'></div>");$template.appendTo(document.body);var dim={width:$template.width()-$template[0].clientWidth,height:$template.height()-$template[0].clientHeight};return $template.remove(),dim}(),this.autofocus=opts.element.prop("autofocus"),opts.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",opts.searchInputPlaceholder)},destroy:function(){var element=this.opts.element,select2=element.data("select2"),self=this;this.close(),element.length&&element[0].detachEvent&&self._sync&&element.each(function(){self._sync&&this.detachEvent("onpropertychange",self._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,select2!==undefined&&(select2.container.remove(),select2.liveRegion.remove(),select2.dropdown.remove(),element.removeData("select2").off(".select2"),element.is("input[type='hidden']")?element.css("display",""):(element.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?element.attr({tabindex:this.elementTabIndex}):element.removeAttr("tabindex"),element.show())),cleanupJQueryElements.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(element){return element.is("option")?{id:element.prop("value"),text:element.text(),element:element.get(),css:element.attr("class"),disabled:element.prop("disabled"),locked:equal(element.attr("locked"),"locked")||equal(element.data("locked"),!0)}:element.is("optgroup")?{text:element.attr("label"),children:[],element:element.get(),css:element.attr("class")}:void 0},prepareOpts:function(opts){var element,select,idKey,ajaxUrl,self=this;if("select"===(element=opts.element).get(0).tagName.toLowerCase()&&(this.select=select=opts.element),select&&$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in opts)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),opts.debug=opts.debug||$.fn.select2.defaults.debug,opts.debug&&console&&console.warn&&(null!=opts.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=opts.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=opts.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=opts.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=opts.ajax&&null!=opts.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=opts.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=opts.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=opts.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=opts.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=opts.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=opts.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),opts.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=opts.element.data("tags")){var elemTags=opts.element.data("tags");$.isArray(elemTags)||(elemTags=[]),opts.element.data("select2Tags",elemTags)}if(null!=opts.sorter&&(opts.sortResults=opts.sorter),null!=opts.selectOnClose&&(opts.selectOnBlur=opts.selectOnClose),null!=opts.ajax&&$.isFunction(opts.ajax.processResults)&&(opts.ajax.results=opts.ajax.processResults),null!=opts.language){var lang=opts.language;$.isFunction(lang.noMatches)&&(opts.formatNoMatches=lang.noMatches),$.isFunction(lang.searching)&&(opts.formatSearching=lang.searching),$.isFunction(lang.inputTooShort)&&(opts.formatInputTooShort=lang.inputTooShort),$.isFunction(lang.inputTooLong)&&(opts.formatInputTooLong=lang.inputTooLong),$.isFunction(lang.loadingMore)&&(opts.formatLoading=lang.loadingMore),$.isFunction(lang.maximumSelected)&&(opts.formatSelectionTooBig=lang.maximumSelected)}if("function"!=typeof(opts=$.extend({},{populateResults:function(container,results,query){var populate,id=this.opts.id,liveRegion=this.liveRegion;(populate=function(results,container,depth){var i,l,result,selectable,disabled,compound,node,label,innerContainer,formatted,nodes=[];for(i=0,l=(results=opts.sortResults(results,container,query)).length;i<l;i+=1)selectable=!(disabled=!0===(result=results[i]).disabled)&&id(result)!==undefined,compound=result.children&&0<result.children.length,(node=$("<li></li>")).addClass("select2-results-dept-"+depth),node.addClass("select2-result"),node.addClass(selectable?"select2-result-selectable":"select2-result-unselectable"),disabled&&node.addClass("select2-disabled"),compound&&node.addClass("select2-result-with-children"),node.addClass(self.opts.formatResultCssClass(result)),node.attr("role","presentation"),(label=$(document.createElement("div"))).addClass("select2-result-label"),label.attr("id","select2-result-label-"+nextUid()),label.attr("role","option"),(formatted=opts.formatResult(result,label,query,self.opts.escapeMarkup))!==undefined&&(label.html(formatted),node.append(label)),compound&&((innerContainer=$("<ul></ul>")).addClass("select2-result-sub"),populate(result.children,innerContainer,depth+1),node.append(innerContainer)),node.data("select2-data",result),nodes.push(node[0]);container.append(nodes),liveRegion.text(opts.formatMatches(results.length))})(results,container,0)}},$.fn.select2.defaults,opts)).id&&(idKey=opts.id,opts.id=function(e){return e[idKey]}),$.isArray(opts.element.data("select2Tags"))){if("tags"in opts)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+opts.element.attr("id");opts.tags=opts.element.data("select2Tags")}if(select?(opts.query=this.bind(function(query){var children,placeholderOption,process,data={results:[],more:!1},term=query.term;process=function(element,collection){var group;element.is("option")?query.matcher(term,element.text(),element)&&collection.push(self.optionToData(element)):element.is("optgroup")&&(group=self.optionToData(element),element.children().each2(function(i,elm){process(elm,group.children)}),0<group.children.length&&collection.push(group))},children=element.children(),this.getPlaceholder()!==undefined&&0<children.length&&(placeholderOption=this.getPlaceholderOption())&&(children=children.not(placeholderOption)),children.each2(function(i,elm){process(elm,data.results)}),query.callback(data)}),opts.id=function(e){return e.id}):"query"in opts||("ajax"in opts?((ajaxUrl=opts.element.data("ajax-url"))&&0<ajaxUrl.length&&(opts.ajax.url=ajaxUrl),opts.query=ajax.call(opts.element,opts.ajax)):"data"in opts?opts.query=local(opts.data):"tags"in opts&&(opts.query=tags(opts.tags),opts.createSearchChoice===undefined&&(opts.createSearchChoice=function(term){return{id:$.trim(term),text:$.trim(term)}}),opts.initSelection===undefined&&(opts.initSelection=function(element,callback){var data=[];$(splitVal(element.val(),opts.separator,opts.transformVal)).each(function(){var obj={id:this,text:this},tags=opts.tags;$.isFunction(tags)&&(tags=tags()),$(tags).each(function(){if(equal(this.id,obj.id))return obj=this,!1}),data.push(obj)}),callback(data)}))),"function"!=typeof opts.query)throw"query function not defined for Select2 "+opts.element.attr("id");if("top"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.unshift(item)};else if("bottom"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.push(item)};else if("function"!=typeof opts.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return opts},monitorSource:function(){var observer,el=this.opts.element,self=this;el.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var disabled=el.prop("disabled");disabled===undefined&&(disabled=!1),this.enable(!disabled);var readonly=el.prop("readonly");readonly===undefined&&(readonly=!1),this.readonly(readonly),this.container&&(syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(evaluate(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(evaluate(this.opts.dropdownCssClass,this.opts.element)))}),el.length&&el[0].attachEvent&&el.each(function(){this.attachEvent("onpropertychange",self._sync)}),(observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==undefined&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new observer(function(mutations){$.each(mutations,self._sync)}),this.propertyObserver.observe(el.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(data){var evt=$.Event("select2-selecting",{val:this.id(data),object:data,choice:data});return this.opts.element.trigger(evt),!evt.isDefaultPrevented()},triggerChange:function(details){details=details||{},details=$.extend({},details,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(details),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var enabled=this._enabled&&!this._readonly,disabled=!enabled;return enabled!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",disabled),this.close(),this.enabledInterface=enabled,!0)},enable:function(enabled){enabled===undefined&&(enabled=!0),this._enabled!==enabled&&(this._enabled=enabled,this.opts.element.prop("disabled",!enabled),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(enabled){enabled===undefined&&(enabled=!1),this._readonly!==enabled&&(this._readonly=enabled,this.opts.element.prop("readonly",enabled),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var bodyOffset,above,changeDirection,css,resultsListNode,$dropdown=this.dropdown,container=this.container,offset=container.offset(),height=container.outerHeight(!1),width=container.outerWidth(!1),dropHeight=$dropdown.outerHeight(!1),$window=$(window),windowWidth=$window.width(),windowHeight=$window.height(),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,dropTop=offset.top+height,dropLeft=offset.left,enoughRoomBelow=dropTop+dropHeight<=viewportBottom,enoughRoomAbove=offset.top-dropHeight>=$window.scrollTop(),dropWidth=$dropdown.outerWidth(!1);$dropdown.hasClass("select2-drop-above")?(above=!0,!enoughRoomAbove&&enoughRoomBelow&&(above=!(changeDirection=!0))):(above=!1,!enoughRoomBelow&&enoughRoomAbove&&(above=changeDirection=!0)),changeDirection&&($dropdown.hide(),offset=this.container.offset(),height=this.container.outerHeight(!1),width=this.container.outerWidth(!1),dropHeight=$dropdown.outerHeight(!1),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,dropTop=offset.top+height,dropLeft=offset.left,dropWidth=$dropdown.outerWidth(!1),$dropdown.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(resultsListNode=$(".select2-results",$dropdown)[0],$dropdown.addClass("select2-drop-auto-width"),$dropdown.css("width",""),width<(dropWidth=$dropdown.outerWidth(!1)+(resultsListNode.scrollHeight===resultsListNode.clientHeight?0:scrollBarDimensions.width))?width=dropWidth:dropWidth=width,dropHeight=$dropdown.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(dropTop-=(bodyOffset=this.body.offset()).top,dropLeft-=bodyOffset.left),!(dropLeft+dropWidth<=viewPortRight)&&offset.left+viewPortRight+container.outerWidth(!1)>dropWidth&&(dropLeft=offset.left+this.container.outerWidth(!1)-dropWidth),css={left:dropLeft,width:width},above?(this.container.addClass("select2-drop-above"),$dropdown.addClass("select2-drop-above"),dropHeight=$dropdown.outerHeight(!1),css.top=offset.top-dropHeight,css.bottom="auto"):(css.top=dropTop,css.bottom="auto",this.container.removeClass("select2-drop-above"),$dropdown.removeClass("select2-drop-above")),css=$.extend(css,evaluate(this.opts.dropdownCss,this.opts.element)),$dropdown.css(css)},shouldOpen:function(){var event;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(event=$.Event("select2-opening"),this.opts.element.trigger(event),!event.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),$document.on("mousemove.select2Event",function(e){lastMousePosition.x=e.pageX,lastMousePosition.y=e.pageY}),!0)},opening:function(){var mask,cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(mask=$("#select2-drop-mask")).length&&((mask=$(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),mask.hide(),mask.appendTo(this.body),mask.on("mousedown touchstart click",function(e){reinsertElement(mask);var self,dropdown=$("#select2-drop");0<dropdown.length&&((self=dropdown.data("select2")).opts.selectOnBlur&&self.selectHighlighted({noFocus:!0}),self.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==mask[0]&&this.dropdown.before(mask),$("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),mask.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var that=this;this.container.parents().add(window).each(function(){$(this).on(resize+" "+scroll+" "+orient,function(e){that.opened()&&that.positionDropdown()})})},close:function(){if(this.opened()){var cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.parents().add(window).each(function(){$(this).off(scroll).off(resize).off(orient)}),this.clearDropdownAlignmentPreference(),$("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),$document.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger($.Event("select2-close"))}},externalSearch:function(term){this.open(),this.search.val(term),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var nextSearchTerm=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return nextSearchTerm!==undefined&&(this.search.val(nextSearchTerm),this.search.select(),!0)},getMaximumSelectionSize:function(){return evaluate(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var children,index,child,hb,rb,y,more,topOffset,results=this.results;(index=this.highlight())<0||(0!=index?(children=this.findHighlightableChoices().find(".select2-result-label"),hb=(topOffset=((child=$(children[index])).offset()||{}).top||0)+child.outerHeight(!0),index===children.length-1&&0<(more=results.find("li.select2-more-results")).length&&(hb=more.offset().top+more.outerHeight(!0)),(rb=results.offset().top+results.outerHeight(!1))<hb&&results.scrollTop(results.scrollTop()+(hb-rb)),(y=topOffset-results.offset().top)<0&&"none"!=child.css("display")&&results.scrollTop(results.scrollTop()+y)):results.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(delta){for(var choices=this.findHighlightableChoices(),index=this.highlight();-1<index&&index<choices.length;){var choice=$(choices[index+=delta]);if(choice.hasClass("select2-result-selectable")&&!choice.hasClass("select2-disabled")&&!choice.hasClass("select2-selected")){this.highlight(index);break}}},highlight:function(index){var choice,data,choices=this.findHighlightableChoices();if(0===arguments.length)return indexOf(choices.filter(".select2-highlighted")[0],choices.get());index>=choices.length&&(index=choices.length-1),index<0&&(index=0),this.removeHighlight(),(choice=$(choices[index])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",choice.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(choice.text()),(data=choice.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(data),choice:data})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(event){var el=$(event.target).closest(".select2-result-selectable");if(0<el.length&&!el.is(".select2-highlighted")){var choices=this.findHighlightableChoices();this.highlight(choices.index(el))}else 0==el.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var results=this.results,more=results.find("li.select2-more-results"),page=this.resultsPage+1,self=this,term=this.search.val(),context=this.context;0!==more.length&&more.offset().top-results.offset().top-results.height()<=this.opts.loadMorePadding&&(more.addClass("select2-active"),this.opts.query({element:this.opts.element,term:term,page:page,context:context,matcher:this.opts.matcher,callback:this.bind(function(data){self.opened()&&(self.opts.populateResults.call(this,results,data.results,{term:term,page:page,context:context}),self.postprocessResults(data,!1,!1),!0===data.more?(more.detach().appendTo(results).html(self.opts.escapeMarkup(evaluate(self.opts.formatLoadMore,self.opts.element,page+1))),window.setTimeout(function(){self.loadMoreIfNeeded()},10)):more.remove(),self.positionDropdown(),self.resultsPage=page,self.context=data.context,this.opts.element.trigger({type:"select2-loaded",items:data}))})}))},tokenize:function(){},updateResults:function(initial){var data,input,queryNumber,search=this.search,results=this.results,opts=this.opts,self=this,term=search.val(),lastTerm=$.data(this.container,"select2-last-term");if((!0===initial||!lastTerm||!equal(term,lastTerm))&&($.data(this.container,"select2-last-term",term),!0===initial||!1!==this.showSearchInput&&this.opened())){queryNumber=++this.queryCount;var maxSelSize=this.getMaximumSelectionSize();if(!(1<=maxSelSize&&(data=this.data(),$.isArray(data)&&data.length>=maxSelSize&&checkFormatter(opts.formatSelectionTooBig,"formatSelectionTooBig"))))return search.val().length<opts.minimumInputLength?(checkFormatter(opts.formatInputTooShort,"formatInputTooShort")?render("<li class='select2-no-results'>"+evaluate(opts.formatInputTooShort,opts.element,search.val(),opts.minimumInputLength)+"</li>"):render(""),void(initial&&this.showSearch&&this.showSearch(!0))):void(opts.maximumInputLength&&search.val().length>opts.maximumInputLength?checkFormatter(opts.formatInputTooLong,"formatInputTooLong")?render("<li class='select2-no-results'>"+evaluate(opts.formatInputTooLong,opts.element,search.val(),opts.maximumInputLength)+"</li>"):render(""):(opts.formatSearching&&0===this.findHighlightableChoices().length&&render("<li class='select2-searching'>"+evaluate(opts.formatSearching,opts.element)+"</li>"),search.addClass("select2-active"),this.removeHighlight(),(input=this.tokenize())!=undefined&&null!=input&&search.val(input),this.resultsPage=1,opts.query({element:opts.element,term:search.val(),page:this.resultsPage,context:null,matcher:opts.matcher,callback:this.bind(function(data){var def;if(queryNumber==this.queryCount)if(this.opened())if(data.hasError!==undefined&&checkFormatter(opts.formatAjaxError,"formatAjaxError"))render("<li class='select2-ajax-error'>"+evaluate(opts.formatAjaxError,opts.element,data.jqXHR,data.textStatus,data.errorThrown)+"</li>");else{if(this.context=data.context===undefined?null:data.context,this.opts.createSearchChoice&&""!==search.val()&&(def=this.opts.createSearchChoice.call(self,search.val(),data.results))!==undefined&&null!==def&&self.id(def)!==undefined&&null!==self.id(def)&&0===$(data.results).filter(function(){return equal(self.id(this),self.id(def))}).length&&this.opts.createSearchChoicePosition(data.results,def),0===data.results.length&&checkFormatter(opts.formatNoMatches,"formatNoMatches"))return render("<li class='select2-no-results'>"+evaluate(opts.formatNoMatches,opts.element,search.val())+"</li>"),void(this.showSearch&&this.showSearch(search.val()));results.empty(),self.opts.populateResults.call(this,results,data.results,{term:search.val(),page:this.resultsPage,context:null}),!0===data.more&&checkFormatter(opts.formatLoadMore,"formatLoadMore")&&(results.append("<li class='select2-more-results'>"+opts.escapeMarkup(evaluate(opts.formatLoadMore,opts.element,this.resultsPage))+"</li>"),window.setTimeout(function(){self.loadMoreIfNeeded()},10)),this.postprocessResults(data,initial),postRender(),this.opts.element.trigger({type:"select2-loaded",items:data})}else this.search.removeClass("select2-active")})})));render("<li class='select2-selection-limit'>"+evaluate(opts.formatSelectionTooBig,opts.element,maxSelSize)+"</li>")}function postRender(){search.removeClass("select2-active"),self.positionDropdown(),results.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?self.liveRegion.text(results.text()):self.liveRegion.text(self.opts.formatMatches(results.find('.select2-result-selectable:not(".select2-selected")').length))}function render(html){results.html(html),postRender()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var $el;($el=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var range,el=$el[0],pos=$el.val().length;$el.focus(),(0<el.offsetWidth||0<el.offsetHeight)&&el===document.activeElement&&(el.setSelectionRange?el.setSelectionRange(pos,pos):el.createTextRange&&((range=el.createTextRange()).collapse(!1),range.select()))},0)},selectHighlighted:function(options){if(this._touchMoved)this.clearTouchMoved();else{var index=this.highlight(),data=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");data?(this.highlight(index),this.onSelect(data,options)):options&&options.noFocus&&this.close()}},getPlaceholder:function(){var placeholderOption;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((placeholderOption=this.getPlaceholderOption())!==undefined?placeholderOption.text():undefined)},getPlaceholderOption:function(){if(this.select){var firstOption=this.select.children("option").first();if(this.opts.placeholderOption!==undefined)return"first"===this.opts.placeholderOption&&firstOption||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===$.trim(firstOption.text())&&""===firstOption.val())return firstOption}},initContainerWidth:function(){var width=function(){var style,attrs,matches,i,l;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return $.isFunction(this.opts.width)?this.opts.width():this.opts.width;if("string"==typeof(style=this.opts.element.attr("style")))for(i=0,l=(attrs=style.split(";")).length;i<l;i+=1)if(null!==(matches=attrs[i].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=matches.length)return matches[1];return"resolve"===this.opts.width?0<(style=this.opts.element.css("width")).indexOf("%")?style:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==width&&this.container.css("width",width)}}),{createContainer:function(){return $(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var el,range,len;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(el=this.search.get(0)).createTextRange?((range=el.createTextRange()).collapse(!1),range.select()):el.setSelectionRange&&(len=this.search.val().length,el.setSelectionRange(len,len))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){$("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),cleanupJQueryElements.call(this,"selection","focusser")},initContainer:function(){var selection,elementLabel,container=this.container,dropdown=this.dropdown,idSuffix=nextUid();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=selection=container.find(".select2-choice"),this.focusser=container.find(".select2-focusser"),selection.find(".select2-chosen").attr("id","select2-chosen-"+idSuffix),this.focusser.attr("aria-labelledby","select2-chosen-"+idSuffix),this.results.attr("id","select2-results-"+idSuffix),this.search.attr("aria-owns","select2-results-"+idSuffix),this.focusser.attr("id","s2id_autogen"+idSuffix),elementLabel=$("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(elementLabel.text()).attr("for",this.focusser.attr("id"));var originalTitle=this.opts.element.attr("title");this.opts.element.attr("title",originalTitle||elementLabel.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text($("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==KEY.PAGE_UP&&e.which!==KEY.PAGE_DOWN)switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return void this.selectHighlighted({noFocus:!0});case KEY.ESC:return this.cancel(e),void killEvent(e)}else killEvent(e)})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&1<this.results.length&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.ESC){if(!1!==this.opts.openOnEnter||e.which!==KEY.ENTER){if(e.which==KEY.DOWN||e.which==KEY.UP||e.which==KEY.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void killEvent(e)}return e.which==KEY.DELETE||e.which==KEY.BACKSPACE?(this.opts.allowClear&&this.clear(),void killEvent(e)):void 0}killEvent(e)}})),installKeyUpChangeEvent(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(0<=this.opts.minimumResultsForSearch){if(e.stopPropagation(),this.opened())return;this.open()}})),selection.on("mousedown touchstart","abbr",this.bind(function(e){var event;this.isInterfaceEnabled()&&(this.clear(),(event=e).preventDefault(),event.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())})),selection.on("mousedown touchstart",this.bind(function(e){reinsertElement(selection),this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),killEvent(e)})),dropdown.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),selection.on("focus",this.bind(function(e){killEvent(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger($.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(triggerChange){var data=this.selection.data("select2-data");if(data){var evt=$.Event("select2-clearing");if(this.opts.element.trigger(evt),evt.isDefaultPrevented())return;var placeholderOption=this.getPlaceholderOption();this.opts.element.val(placeholderOption?placeholderOption.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==triggerChange&&(this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data}),this.triggerChange({removed:data}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var self=this;this.opts.initSelection.call(null,this.opts.element,function(selected){selected!==undefined&&null!==selected&&(self.updateSelection(selected),self.close(),self.setPlaceholder(),self.lastSearchTerm=self.search.val())})}},isPlaceholderOptionSelected:function(){var placeholderOption;return this.getPlaceholder()!==undefined&&((placeholderOption=this.getPlaceholderOption())!==undefined&&placeholderOption.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===undefined||null===this.opts.element.val())},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var selected=element.find("option").filter(function(){return this.selected&&!this.disabled});callback(self.optionToData(selected))}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var id=element.val(),match=null;opts.query({matcher:function(term,text,el){var is_match=equal(id,opts.id(el));return is_match&&(match=el),is_match},callback:$.isFunction(callback)?function(){callback(match)}:$.noop})}),opts},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===undefined?undefined:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var placeholder=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&placeholder!==undefined){if(this.select&&this.getPlaceholderOption()===undefined)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(placeholder)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(data,initial,noHighlightUpdate){var selected=0,self=this;if(this.findHighlightableChoices().each2(function(i,elm){if(equal(self.id(elm.data("select2-data")),self.opts.element.val()))return selected=i,!1}),!1!==noHighlightUpdate&&(!0===initial&&0<=selected?this.highlight(selected):this.highlight(0)),!0===initial){var min=this.opts.minimumResultsForSearch;0<=min&&this.showSearch(function countResults(results){var count=0;return $.each(results,function(i,item){item.children?count+=countResults(item.children):count++}),count}(data.results)>=min)}},showSearch:function(showSearchInput){this.showSearchInput!==showSearchInput&&(this.showSearchInput=showSearchInput,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!showSearchInput),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!showSearchInput),$(this.dropdown,this.container).toggleClass("select2-with-searchbox",showSearchInput))},onSelect:function(data,options){if(this.triggerSelect(data)){var old=this.opts.element.val(),oldData=this.data();this.opts.element.val(this.id(data)),this.updateSelection(data),this.opts.element.trigger({type:"select2-selected",val:this.id(data),choice:data}),this.lastSearchTerm=this.search.val(),this.close(),options&&options.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),equal(old,this.id(data))||this.triggerChange({added:data,removed:oldData})}},updateSelection:function(data){var formatted,cssClass,container=this.selection.find(".select2-chosen");this.selection.data("select2-data",data),container.empty(),null!==data&&(formatted=this.opts.formatSelection(data,container,this.opts.escapeMarkup)),formatted!==undefined&&container.append(formatted),(cssClass=this.opts.formatSelectionCssClass(data,container))!==undefined&&container.addClass(cssClass),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==undefined&&this.container.addClass("select2-allowclear")},val:function(){var val,triggerChange=!1,data=null,self=this,oldData=this.data();if(0===arguments.length)return this.opts.element.val();if(val=arguments[0],1<arguments.length&&(triggerChange=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(val).find("option").filter(function(){return this.selected}).each2(function(i,elm){return data=self.optionToData(elm),!1}),this.updateSelection(data),this.setPlaceholder(),triggerChange&&this.triggerChange({added:data,removed:oldData});else{if(!val&&0!==val)return void this.clear(triggerChange);if(this.opts.initSelection===undefined)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(val),this.opts.initSelection(this.opts.element,function(data){self.opts.element.val(data?self.id(data):""),self.updateSelection(data),self.setPlaceholder(),triggerChange&&self.triggerChange({added:data,removed:oldData})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(value){var data,triggerChange=!1;if(0===arguments.length)return(data=this.selection.data("select2-data"))==undefined&&(data=null),data;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),1<arguments.length&&(triggerChange=arguments[1]),value?(data=this.data(),this.opts.element.val(value?this.id(value):""),this.updateSelection(value),triggerChange&&this.triggerChange({added:value,removed:data})):this.clear(triggerChange)}}),MultiSelect2=clazz(AbstractSelect2,{createContainer:function(){return $(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var data=[];element.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(i,elm){data.push(self.optionToData(elm))}),callback(data)}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var ids=splitVal(element.val(),opts.separator,opts.transformVal),matches=[];opts.query({matcher:function(term,text,el){var is_match=$.grep(ids,function(id){return equal(id,opts.id(el))}).length;return is_match&&matches.push(el),is_match},callback:$.isFunction(callback)?function(){for(var ordered=[],i=0;i<ids.length;i++)for(var id=ids[i],j=0;j<matches.length;j++){var match=matches[j];if(equal(id,opts.id(match))){ordered.push(match),matches.splice(j,1);break}}callback(ordered)}:$.noop})}),opts},selectChoice:function(choice){var selected=this.container.find(".select2-search-choice-focus");selected.length&&choice&&choice[0]==selected[0]||(selected.length&&this.opts.element.trigger("choice-deselected",selected),selected.removeClass("select2-search-choice-focus"),choice&&choice.length&&(this.close(),choice.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",choice)))},destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),cleanupJQueryElements.call(this,"searchContainer","selection")},initContainer:function(){var selection,selector=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=selection=this.container.find(selector);var _this=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){_this.search[0].focus(),_this.selectChoice($(this))}),this.search.attr("id","s2id_autogen"+nextUid()),this.search.prev().text($("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var selected=selection.find(".select2-search-choice-focus"),prev=selected.prev(".select2-search-choice:not(.select2-locked)"),next=selected.next(".select2-search-choice:not(.select2-locked)"),pos=function(el){var offset=0,length=0;if("selectionStart"in(el=$(el)[0]))offset=el.selectionStart,length=el.selectionEnd-offset;else if("selection"in document){el.focus();var sel=document.selection.createRange();length=document.selection.createRange().text.length,sel.moveStart("character",-el.value.length),offset=sel.text.length-length}return{offset:offset,length:length}}(this.search);if(selected.length&&(e.which==KEY.LEFT||e.which==KEY.RIGHT||e.which==KEY.BACKSPACE||e.which==KEY.DELETE||e.which==KEY.ENTER)){var selectedChoice=selected;return e.which==KEY.LEFT&&prev.length?selectedChoice=prev:e.which==KEY.RIGHT?selectedChoice=next.length?next:null:e.which===KEY.BACKSPACE?this.unselect(selected.first())&&(this.search.width(10),selectedChoice=prev.length?prev:next):e.which==KEY.DELETE?this.unselect(selected.first())&&(this.search.width(10),selectedChoice=next.length?next:null):e.which==KEY.ENTER&&(selectedChoice=null),this.selectChoice(selectedChoice),killEvent(e),void(selectedChoice&&selectedChoice.length||this.open())}if((e.which===KEY.BACKSPACE&&1==this.keydowns||e.which==KEY.LEFT)&&0==pos.offset&&!pos.length)return this.selectChoice(selection.find(".select2-search-choice:not(.select2-locked)").last()),void killEvent(e);if(this.selectChoice(null),this.opened())switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case KEY.ESC:return this.cancel(e),void killEvent(e)}if(e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.BACKSPACE&&e.which!==KEY.ESC){if(e.which===KEY.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==KEY.PAGE_UP&&e.which!==KEY.PAGE_DOWN||killEvent(e),e.which===KEY.ENTER&&killEvent(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger($.Event("select2-blur"))})),this.container.on("click",selector,this.bind(function(e){this.isInterfaceEnabled()&&(0<$(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",selector,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var self=this;this.opts.initSelection.call(null,this.opts.element,function(data){data!==undefined&&null!==data&&(self.updateSelection(data),self.close(),self.clearSearch())})}},clearSearch:function(){var placeholder=this.getPlaceholder(),maxWidth=this.getMaxSearchWidth();placeholder!==undefined&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(placeholder).addClass("select2-default"),this.search.width(0<maxWidth?maxWidth:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(data){var ids={},filtered=[],self=this;$(data).each(function(){self.id(this)in ids||(ids[self.id(this)]=0,filtered.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(filtered),self.postprocessResults()},tokenize:function(){var input=this.search.val();null!=(input=this.opts.tokenizer.call(this,input,this.data(),this.bind(this.onSelect),this.opts))&&input!=undefined&&(this.search.val(input),0<input.length&&this.open())},onSelect:function(data,options){this.triggerSelect(data)&&""!==data.text&&(this.addSelectedChoice(data),this.opts.element.trigger({type:"selected",val:this.id(data),choice:data}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(data,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:data}),options&&options.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(data){var val=this.getVal(),self=this;$(data).each(function(){val.push(self.createChoice(this))}),this.setVal(val)},createChoice:function(data){var formatted,cssClass,enableChoice=!data.locked,enabledItem=$("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),disabledItem=$("<li class='select2-search-choice select2-locked'><div></div></li>"),choice=enableChoice?enabledItem:disabledItem,id=this.id(data);return(formatted=this.opts.formatSelection(data,choice.find("div"),this.opts.escapeMarkup))!=undefined&&choice.find("div").replaceWith($("<div></div>").html(formatted)),(cssClass=this.opts.formatSelectionCssClass(data,choice.find("div")))!=undefined&&choice.addClass(cssClass),enableChoice&&choice.find(".select2-search-choice-close").on("mousedown",killEvent).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect($(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),killEvent(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),choice.data("select2-data",data),choice.insertBefore(this.searchContainer),id},unselect:function(selected){var data,index,val=this.getVal();if(0===(selected=selected.closest(".select2-search-choice")).length)throw"Invalid argument: "+selected+". Must be .select2-search-choice";if(data=selected.data("select2-data")){var evt=$.Event("select2-removing");if(evt.val=this.id(data),evt.choice=data,this.opts.element.trigger(evt),evt.isDefaultPrevented())return!1;for(;0<=(index=indexOf(this.id(data),val));)val.splice(index,1),this.setVal(val),this.select&&this.postprocessResults();return selected.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data}),this.triggerChange({removed:data}),!0}},postprocessResults:function(data,initial,noHighlightUpdate){var val=this.getVal(),choices=this.results.find(".select2-result"),compound=this.results.find(".select2-result-with-children"),self=this;choices.each2(function(i,choice){0<=indexOf(self.id(choice.data("select2-data")),val)&&(choice.addClass("select2-selected"),choice.find(".select2-result-selectable").addClass("select2-selected"))}),compound.each2(function(i,choice){choice.is(".select2-result-selectable")||0!==choice.find(".select2-result-selectable:not(.select2-selected)").length||choice.addClass("select2-selected")}),-1==this.highlight()&&!1!==noHighlightUpdate&&!0===this.opts.closeOnSelect&&self.highlight(0),!this.opts.createSearchChoice&&0<!choices.filter(".select2-result:not(.select2-selected)").length&&(!data||data&&!data.more&&0===this.results.find(".select2-no-results").length)&&checkFormatter(self.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+evaluate(self.opts.formatNoMatches,self.opts.element,self.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-getSideBorderPadding(this.search)},resizeSearch:function(){var minimumWidth,left,maxWidth,searchWidth,sideBorderPadding=getSideBorderPadding(this.search);minimumWidth=function(e){if(!sizer){var style=e[0].currentStyle||window.getComputedStyle(e[0],null);(sizer=$(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:style.fontSize,fontFamily:style.fontFamily,fontStyle:style.fontStyle,fontWeight:style.fontWeight,letterSpacing:style.letterSpacing,textTransform:style.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),$(document.body).append(sizer)}return sizer.text(e.val()),sizer.width()}(this.search)+10,left=this.search.offset().left,(searchWidth=(maxWidth=this.selection.width())-(left-this.selection.offset().left)-sideBorderPadding)<minimumWidth&&(searchWidth=maxWidth-sideBorderPadding),searchWidth<40&&(searchWidth=maxWidth-sideBorderPadding),searchWidth<=0&&(searchWidth=minimumWidth),this.search.width(Math.floor(searchWidth))},getVal:function(){var val;return this.select?null===(val=this.select.val())?[]:val:splitVal(val=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(val){if(this.select)this.select.val(val);else{var unique=[],valMap={};$(val).each(function(){this in valMap||(unique.push(this),valMap[this]=0)}),this.opts.element.val(0===unique.length?"":unique.join(this.opts.separator))}},buildChangeDetails:function(old,current){current=current.slice(0),old=old.slice(0);for(var i=0;i<current.length;i++)for(var j=0;j<old.length;j++)if(equal(this.opts.id(current[i]),this.opts.id(old[j]))){current.splice(i,1),i--,old.splice(j,1);break}return{added:current,removed:old}},val:function(val,triggerChange){var oldData,self=this;if(0===arguments.length)return this.getVal();if((oldData=this.data()).length||(oldData=[]),!val&&0!==val)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(triggerChange&&this.triggerChange({added:this.data(),removed:oldData}));if(this.setVal(val),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),triggerChange&&this.triggerChange(this.buildChangeDetails(oldData,this.data()));else{if(this.opts.initSelection===undefined)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(data){var ids=$.map(data,self.id);self.setVal(ids),self.updateSelection(data),self.clearSearch(),triggerChange&&self.triggerChange(self.buildChangeDetails(oldData,self.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var val=[],self=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){val.push(self.opts.id($(this).data("select2-data")))}),this.setVal(val),this.triggerChange()},data:function(values,triggerChange){var ids,old,self=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return $(this).data("select2-data")}).get();old=this.data(),values||(values=[]),ids=$.map(values,function(e){return self.opts.id(e)}),this.setVal(ids),this.updateSelection(values),this.clearSearch(),triggerChange&&this.triggerChange(this.buildChangeDetails(old,this.data()))}}),$.fn.select2=function(){var opts,select2,method,value,multiple,args=Array.prototype.slice.call(arguments,0),allowedMethods=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],valueMethods=["opened","isFocused","container","dropdown"],propertyMethods=["val","data"],methodsMap={search:"externalSearch"};return this.each(function(){if(0===args.length||"object"==typeof args[0])(opts=0===args.length?{}:$.extend({},args[0])).element=$(this),"select"===opts.element.get(0).tagName.toLowerCase()?multiple=opts.element.prop("multiple"):(multiple=opts.multiple||!1,"tags"in opts&&(opts.multiple=multiple=!0)),(select2=multiple?new window.Select2.class.multi:new window.Select2.class.single).init(opts);else{if("string"!=typeof args[0])throw"Invalid arguments to select2 plugin: "+args;if(indexOf(args[0],allowedMethods)<0)throw"Unknown method: "+args[0];if(value=undefined,(select2=$(this).data("select2"))===undefined)return;if(method=args[0],value="container"===method?select2.container:"dropdown"===method?select2.dropdown:(methodsMap[method]&&(method=methodsMap[method]),select2[method].apply(select2,args.slice(1))),0<=indexOf(args[0],valueMethods)||0<=indexOf(args[0],propertyMethods)&&1==args.length)return!1}}),value===undefined?this:value},$.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(result,container,query,escapeMarkup){var markup=[];return markMatch(this.text(result),query.term,markup,escapeMarkup),markup.join("")},transformVal:function(val){return $.trim(val)},formatSelection:function(data,container,escapeMarkup){return data?escapeMarkup(this.text(data)):undefined},sortResults:function(results,container,query){return results},formatResultCssClass:function(data){return data.css},formatSelectionCssClass:function(data,container){return undefined},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==undefined?null:e.id},text:function(e){return e&&this.data&&this.data.text?$.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(term,text){return 0<=stripDiacritics(""+text).toUpperCase().indexOf(stripDiacritics(""+term).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(input,selection,selectCallback,opts){var token,index,i,l,separator,original=input,dupe=!1;if(!opts.createSearchChoice||!opts.tokenSeparators||opts.tokenSeparators.length<1)return undefined;for(;;){for(index=-1,i=0,l=opts.tokenSeparators.length;i<l&&(separator=opts.tokenSeparators[i],!(0<=(index=input.indexOf(separator))));i++);if(index<0)break;if(token=input.substring(0,index),input=input.substring(index+separator.length),0<token.length&&(token=opts.createSearchChoice.call(this,token,selection))!==undefined&&null!==token&&opts.id(token)!==undefined&&null!==opts.id(token)){for(dupe=!1,i=0,l=selection.length;i<l;i++)if(equal(opts.id(token),opts.id(selection[i]))){dupe=!0;break}dupe||selectCallback(token)}}return original!==input?input:void 0},escapeMarkup:defaultEscapeMarkup,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(c){return c},adaptDropdownCssClass:function(c){return null},nextSearchTerm:function(selectedObject,currentSearchTerm){return undefined},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(instance){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(instance.opts.minimumResultsForSearch<0)}},$.fn.select2.locales=[],$.fn.select2.locales.en={formatMatches:function(matches){return 1===matches?"One result is available, press enter to select it.":matches+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(jqXHR,textStatus,errorThrown){return"Loading failed"},formatInputTooShort:function(input,min){var n=min-input.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(input,max){var n=input.length-max;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(limit){return"You can only select "+limit+" item"+(1==limit?"":"s")},formatLoadMore:function(pageNumber){return"Loading more results…"},formatSearching:function(){return"Searching…"}},$.extend($.fn.select2.defaults,$.fn.select2.locales.en),$.fn.select2.ajaxDefaults={transport:$.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:ajax,local:local,tags:tags},util:{debounce:debounce,markMatch:markMatch,escapeMarkup:defaultEscapeMarkup,stripDiacritics:stripDiacritics},class:{abstract:AbstractSelect2,single:SingleSelect2,multi:MultiSelect2}}}function reinsertElement(element){var placeholder=$(document.createTextNode(""));element.before(placeholder),placeholder.before(element),placeholder.remove()}function stripDiacritics(str){return str.replace(/[^\u0000-\u007E]/g,function(a){return DIACRITICS[a]||a})}function indexOf(value,array){for(var i=0,l=array.length;i<l;i+=1)if(equal(value,array[i]))return i;return-1}function equal(a,b){return a===b||a!==undefined&&b!==undefined&&(null!==a&&null!==b&&(a.constructor===String?a+""==b+"":b.constructor===String&&b+""==a+""))}function splitVal(string,separator,transform){var val,i,l;if(null===string||string.length<1)return[];for(i=0,l=(val=string.split(separator)).length;i<l;i+=1)val[i]=transform(val[i]);return val}function getSideBorderPadding(element){return element.outerWidth(!1)-element.width()}function installKeyUpChangeEvent(element){var key="keyup-change-value";element.on("keydown",function(){$.data(element,key)===undefined&&$.data(element,key,element.val())}),element.on("keyup",function(){var val=$.data(element,key);val!==undefined&&element.val()!==val&&($.removeData(element,key),element.trigger("keyup-change"))})}function debounce(quietMillis,fn,ctx){var timeout;return ctx=ctx||undefined,function(){var args=arguments;window.clearTimeout(timeout),timeout=window.setTimeout(function(){fn.apply(ctx,args)},quietMillis)}}function killEvent(event){event.preventDefault(),event.stopPropagation()}function syncCssClasses(dest,src,adapter){var classes,adapted,replacements=[];(classes=$.trim(dest.attr("class")))&&$((classes=""+classes).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&replacements.push(this)}),(classes=$.trim(src.attr("class")))&&$((classes=""+classes).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(adapted=adapter(this))&&replacements.push(adapted)}),dest.attr("class",replacements.join(" "))}function markMatch(text,term,markup,escapeMarkup){var match=stripDiacritics(text.toUpperCase()).indexOf(stripDiacritics(term.toUpperCase())),tl=term.length;match<0?markup.push(escapeMarkup(text)):(markup.push(escapeMarkup(text.substring(0,match))),markup.push("<span class='select2-match'>"),markup.push(escapeMarkup(text.substring(match,match+tl))),markup.push("</span>"),markup.push(escapeMarkup(text.substring(match+tl,text.length))))}function defaultEscapeMarkup(markup){var replace_map={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replace_map[match]})}function ajax(options){var timeout,handler=null,quietMillis=options.quietMillis||100,ajaxUrl=options.url,self=this;return function(query){window.clearTimeout(timeout),timeout=window.setTimeout(function(){var data=options.data,url=ajaxUrl,transport=options.transport||$.fn.select2.ajaxDefaults.transport,deprecated={type:options.type||"GET",cache:options.cache||!1,jsonpCallback:options.jsonpCallback||undefined,dataType:options.dataType||"json"},params=$.extend({},$.fn.select2.ajaxDefaults.params,deprecated);data=data?data.call(self,query.term,query.page,query.context):null,url="function"==typeof url?url.call(self,query.term,query.page,query.context):url,handler&&"function"==typeof handler.abort&&handler.abort(),options.params&&($.isFunction(options.params)?$.extend(params,options.params.call(self)):$.extend(params,options.params)),$.extend(params,{url:url,dataType:options.dataType,data:data,success:function(data){var results=options.results(data,query.page,query);query.callback(results)},error:function(jqXHR,textStatus,errorThrown){var results={hasError:!0,jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown};query.callback(results)}}),handler=transport.call(self,params)},quietMillis)}}function local(options){var dataText,tmp,data=options,text=function(item){return""+item.text};$.isArray(data)&&(data={results:tmp=data}),!1===$.isFunction(data)&&(tmp=data,data=function(){return tmp});var dataItem=data();return dataItem.text&&(text=dataItem.text,$.isFunction(text)||(dataText=dataItem.text,text=function(item){return item[dataText]})),function(query){var process,t=query.term,filtered={results:[]};""!==t?(process=function(datum,collection){var group,attr;if((datum=datum[0]).children){for(attr in group={},datum)datum.hasOwnProperty(attr)&&(group[attr]=datum[attr]);group.children=[],$(datum.children).each2(function(i,childDatum){process(childDatum,group.children)}),(group.children.length||query.matcher(t,text(group),datum))&&collection.push(group)}else query.matcher(t,text(datum),datum)&&collection.push(datum)},$(data().results).each2(function(i,datum){process(datum,filtered.results)}),query.callback(filtered)):query.callback(data())}}function tags(data){var isFunc=$.isFunction(data);return function(query){var t=query.term,filtered={results:[]},result=isFunc?data(query):data;$.isArray(result)&&($(result).each(function(){var isObject=this.text!==undefined,text=isObject?this.text:this;(""===t||query.matcher(t,text))&&filtered.results.push(isObject?this:{id:this,text:this})}),query.callback(filtered))}}function checkFormatter(formatter,formatterName){if($.isFunction(formatter))return!0;if(!formatter)return!1;if("string"==typeof formatter)return!0;throw new Error(formatterName+" must be a string, function, or falsy value")}function evaluate(val,context){if($.isFunction(val)){var args=Array.prototype.slice.call(arguments,2);return val.apply(context,args)}return val}function cleanupJQueryElements(){var self=this;$.each(arguments,function(i,element){self[element].remove(),self[element]=null})}function clazz(SuperClass,methods){var constructor=function(){};return((constructor.prototype=new SuperClass).constructor=constructor).prototype.parent=SuperClass.prototype,constructor.prototype=$.extend(constructor.prototype,methods),constructor}}(jQuery)}.apply(root,arguments)})}(this),define("mockup-patterns-select2",["jquery","pat-base","mockup-utils","select2","jquery.event.drag","jquery.event.drop"],function($,Base,utils){"use strict";return Base.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var self=this;self.options.initialValues&&(self.options.id=function(term){return term.id},self.options.initSelection=function($el,callback){var data=[],value=$el.val(),seldefaults=self.options.initialValues;"string"==typeof self.options.initialValues&&""!==self.options.initialValues&&("{"===self.options.initialValues[0]?seldefaults=JSON.parse(self.options.initialValues):(seldefaults={},$(self.options.initialValues.split(self.options.separator)).each(function(){var selection=this.split(":"),id=$.trim(selection[0]),text=$.trim(selection[1]);seldefaults[id]=text}))),$(value.split(self.options.separator)).each(function(){var text=this;seldefaults[this]&&(text=seldefaults[this]),data.push({id:utils.removeHTML(this),text:utils.removeHTML(text)})}),callback(data)})},initializeTags:function(){this.options.tags&&"string"==typeof this.options.tags&&("["===this.options.tags.substr(0,1)?this.options.tags=JSON.parse(this.options.tags):this.options.tags=this.options.tags.split(this.options.separator)),this.options.tags&&!this.options.allowNewItems&&(this.options.data=$.map(this.options.tags,function(value,i){return{id:value,text:value}}),this.options.multiple=!0,delete this.options.tags)},initializeOrdering:function(){var self=this;if(self.options.orderable){var formatSelection=function(data,$container){return data?data.text:void 0};self.options.formatSelection&&(formatSelection=self.options.formatSelection),self.options.formatSelection=function(data,$container){return $container.parents("li").drag("start",function(e,dd){return $(this).addClass("select2-choice-dragging"),self.$el.select2("onSortStart"),$.drop({tolerance:function(event,proxy,target){var test=event.pageY>target.top+target.height/2;return $.data(target.elem,"drop+reorder",test?"insertAfter":"insertBefore"),this.contains(target,[event.pageX,event.pageY])}}),$(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(e,dd){$(dd.proxy).css({top:dd.offsetY,left:dd.offsetX});var drop=dd.drop[0],method=$.data(drop||{},"drop+reorder");!drop||drop==dd.current&&method==dd.method||($(this)[method](drop),dd.current=drop,dd.method=method,dd.update())}).drag("end",function(e,dd){$(this).removeClass("select2-choice-dragging"),self.$el.select2("onSortEnd"),$(dd.proxy).remove()}).drop("init",function(e,dd){return this!=dd.drag}),formatSelection(data,$container)}}},initializeSelect2:function(){this.options.formatResultCssClass=function(ob){if(ob.id)return"select2-option-"+ob.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},this.$el.select2(this.options),this.$select2=this.$el.parent().find(".select2-container"),this.$el.parent().off("close.plone-modal.patterns"),this.options.orderable&&this.$select2.addClass("select2-orderable")},init:function(){var self=this;if(self.options.allowNewItems=!self.options.hasOwnProperty("allowNewItems")||JSON.parse(self.options.allowNewItems),self.options.ajax||self.options.vocabularyUrl){self.options.vocabularyUrl&&(self.options.multiple=void 0===self.options.multiple||self.options.multiple,self.options.ajax=self.options.ajax||{},self.options.ajax.url=self.options.vocabularyUrl,self.options.initSelection=function($el,callback){var data=[],value=$el.val();$(value.split(self.options.separator)).each(function(){var val=utils.removeHTML(this);data.push({id:val,text:val})}),callback(data)});var queryTerm="";self.options.ajax=$.extend({quietMillis:300,data:function(term,page){return{query:queryTerm=term,page_limit:10,page:page}},results:function(data,page){var results=data.results;if(self.options.vocabularyUrl){var dataIds=[];$.each(data.results,function(i,item){dataIds.push(item.id)}),results=[];var haveResult=""===queryTerm||0<=$.inArray(queryTerm,dataIds);self.options.allowNewItems&&!haveResult&&(queryTerm=utils.removeHTML(queryTerm),results.push({id:queryTerm,text:queryTerm})),$.each(data.results,function(i,item){results.push(item)})}return{results:results}}},self.options.ajax)}else if(self.options.multiple&&self.$el.is("select")){var vals=self.$el.val()||[],options=$.map(self.$el.find("option"),function(o){return{text:$(o).html(),id:o.value}}),$hidden=$('<input type="hidden" />');$hidden.val(vals.join(self.options.separator)),$hidden.attr("class",self.$el.attr("class")),$hidden.attr("name",self.$el.attr("name")),$hidden.attr("id",self.$el.attr("id")),self.$orig=self.$el,self.$el.replaceWith($hidden),self.$el=$hidden,self.options.data=options}self.initializeValues(),self.initializeTags(),self.initializeOrdering(),self.initializeSelect2()}})}),function(factory){"function"==typeof define&&define.amd?define("picker",["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):this.Picker=factory(jQuery)}(function($){var $window=$(window),$document=$(document),$html=$(document.documentElement),supportsTransitions=null!=document.documentElement.style.transition;function PickerConstructor(ELEMENT,NAME,COMPONENT,OPTIONS){if(!ELEMENT)return PickerConstructor;var IS_DEFAULT_THEME=!1,STATE={id:ELEMENT.id||"P"+Math.abs(~~(Math.random()*new Date))},SETTINGS=COMPONENT?$.extend(!0,{},COMPONENT.defaults,OPTIONS):OPTIONS||{},CLASSES=$.extend({},PickerConstructor.klasses(),SETTINGS.klass),$ELEMENT=$(ELEMENT),PickerInstance=function(){return this.start()},P=PickerInstance.prototype={constructor:PickerInstance,$node:$ELEMENT,start:function(){return STATE&&STATE.start?P:(STATE.methods={},STATE.start=!0,STATE.open=!1,STATE.type=ELEMENT.type,ELEMENT.autofocus=ELEMENT==getActiveElement(),ELEMENT.readOnly=!SETTINGS.editable,ELEMENT.id=ELEMENT.id||STATE.id,"text"!=ELEMENT.type&&(ELEMENT.type="text"),P.component=new COMPONENT(P,SETTINGS),P.$root=$('<div class="'+CLASSES.picker+'" id="'+ELEMENT.id+'_root" />'),aria(P.$root[0],"hidden",!0),P.$holder=$(createWrappedComponent()).appendTo(P.$root),prepareElementHolder(),SETTINGS.formatSubmit&&function(){var name;!0===SETTINGS.hiddenName?(name=ELEMENT.name,ELEMENT.name=""):name=(name=["string"==typeof SETTINGS.hiddenPrefix?SETTINGS.hiddenPrefix:"","string"==typeof SETTINGS.hiddenSuffix?SETTINGS.hiddenSuffix:"_submit"])[0]+ELEMENT.name+name[1];P._hidden=$('<input type=hidden name="'+name+'"'+($ELEMENT.data("value")||ELEMENT.value?' value="'+P.get("select",SETTINGS.formatSubmit)+'"':"")+">")[0],$ELEMENT.on("change."+STATE.id,function(){P._hidden.value=ELEMENT.value?P.get("select",SETTINGS.formatSubmit):""})}(),function(){$ELEMENT.data(NAME,P).addClass(CLASSES.input).val($ELEMENT.data("value")?P.get("select",SETTINGS.format):ELEMENT.value),SETTINGS.editable||$ELEMENT.on("focus."+STATE.id+" click."+STATE.id,function(event){event.preventDefault(),P.open()}).on("keydown."+STATE.id,handleKeydownEvent);aria(ELEMENT,{haspopup:!0,expanded:!1,readonly:!1,owns:ELEMENT.id+"_root"})}(),SETTINGS.containerHidden?$(SETTINGS.containerHidden).append(P._hidden):$ELEMENT.after(P._hidden),SETTINGS.container?$(SETTINGS.container).append(P.$root):$ELEMENT.after(P.$root),P.on({start:P.component.onStart,render:P.component.onRender,stop:P.component.onStop,open:P.component.onOpen,close:P.component.onClose,set:P.component.onSet}).on({start:SETTINGS.onStart,render:SETTINGS.onRender,stop:SETTINGS.onStop,open:SETTINGS.onOpen,close:SETTINGS.onClose,set:SETTINGS.onSet}),IS_DEFAULT_THEME=function(element){var theme;element.currentStyle?theme=element.currentStyle.position:window.getComputedStyle&&(theme=getComputedStyle(element).position);return"fixed"==theme}(P.$holder[0]),ELEMENT.autofocus&&P.open(),P.trigger("start").trigger("render"))},render:function(entireComponent){return entireComponent?(P.$holder=$(createWrappedComponent()),prepareElementHolder(),P.$root.html(P.$holder)):P.$root.find("."+CLASSES.box).html(P.component.nodes(STATE.open)),P.trigger("render")},stop:function(){return STATE.start&&(P.close(),P._hidden&&P._hidden.parentNode.removeChild(P._hidden),P.$root.remove(),$ELEMENT.removeClass(CLASSES.input).removeData(NAME),setTimeout(function(){$ELEMENT.off("."+STATE.id)},0),ELEMENT.type=STATE.type,ELEMENT.readOnly=!1,P.trigger("stop"),STATE.methods={},STATE.start=!1),P},open:function(dontGiveFocus){return STATE.open?P:($ELEMENT.addClass(CLASSES.active),aria(ELEMENT,"expanded",!0),setTimeout(function(){P.$root.addClass(CLASSES.opened),aria(P.$root[0],"hidden",!1)},0),!1!==dontGiveFocus&&(STATE.open=!0,IS_DEFAULT_THEME&&$html.css("overflow","hidden").css("padding-right","+="+getScrollbarWidth()),IS_DEFAULT_THEME&&supportsTransitions?P.$holder.find("."+CLASSES.frame).one("transitionend",function(){P.$holder[0].focus()}):P.$holder[0].focus(),$document.on("click."+STATE.id+" focusin."+STATE.id,function(event){var target=event.target;target!=ELEMENT&&target!=document&&3!=event.which&&P.close(target===P.$holder[0])}).on("keydown."+STATE.id,function(event){var keycode=event.keyCode,keycodeToMove=P.component.key[keycode],target=event.target;27==keycode?P.close(!0):target!=P.$holder[0]||!keycodeToMove&&13!=keycode?$.contains(P.$root[0],target)&&13==keycode&&(event.preventDefault(),target.click()):(event.preventDefault(),keycodeToMove?PickerConstructor._.trigger(P.component.key.go,P,[PickerConstructor._.trigger(keycodeToMove)]):P.$root.find("."+CLASSES.highlighted).hasClass(CLASSES.disabled)||(P.set("select",P.component.item.highlight),SETTINGS.closeOnSelect&&P.close(!0)))})),P.trigger("open"))},close:function(giveFocus){return giveFocus&&(SETTINGS.editable?ELEMENT.focus():(P.$holder.off("focus.toOpen").focus(),setTimeout(function(){P.$holder.on("focus.toOpen",handleFocusToOpenEvent)},0))),$ELEMENT.removeClass(CLASSES.active),aria(ELEMENT,"expanded",!1),setTimeout(function(){P.$root.removeClass(CLASSES.opened+" "+CLASSES.focused),aria(P.$root[0],"hidden",!0)},0),STATE.open?(STATE.open=!1,IS_DEFAULT_THEME&&$html.css("overflow","").css("padding-right","-="+getScrollbarWidth()),$document.off("."+STATE.id),P.trigger("close")):P},clear:function(options){return P.set("clear",null,options)},set:function(thing,value,options){var thingItem,thingValue,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(options=thingIsObject&&$.isPlainObject(value)?value:options||{},thing){for(thingItem in thingIsObject||(thingObject[thing]=value),thingObject)thingValue=thingObject[thingItem],thingItem in P.component.item&&(void 0===thingValue&&(thingValue=null),P.component.set(thingItem,thingValue,options)),"select"!=thingItem&&"clear"!=thingItem||$ELEMENT.val("clear"==thingItem?"":P.get(thingItem,SETTINGS.format)).trigger("change");P.render()}return options.muted?P:P.trigger("set",thingObject)},get:function(thing,format){if(null!=STATE[thing=thing||"value"])return STATE[thing];if("valueSubmit"==thing){if(P._hidden)return P._hidden.value;thing="value"}if("value"==thing)return ELEMENT.value;if(thing in P.component.item){if("string"!=typeof format)return P.component.get(thing);var thingValue=P.component.get(thing);return thingValue?PickerConstructor._.trigger(P.component.formats.toString,P.component,[format,thingValue]):""}},on:function(thing,method,internal){var thingName,thingMethod,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(thing)for(thingName in thingIsObject||(thingObject[thing]=method),thingObject)thingMethod=thingObject[thingName],internal&&(thingName="_"+thingName),STATE.methods[thingName]=STATE.methods[thingName]||[],STATE.methods[thingName].push(thingMethod);return P},off:function(){var i,thingName,names=arguments;for(i=0,namesCount=names.length;i<namesCount;i+=1)(thingName=names[i])in STATE.methods&&delete STATE.methods[thingName];return P},trigger:function(name,data){var _trigger=function(name){var methodList=STATE.methods[name];methodList&&methodList.map(function(method){PickerConstructor._.trigger(method,P,[data])})};return _trigger("_"+name),_trigger(name),P}};function createWrappedComponent(){return PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",P.component.nodes(STATE.open),CLASSES.box),CLASSES.wrap),CLASSES.frame),CLASSES.holder,'tabindex="-1"')}function prepareElementHolder(){P.$holder.on({keydown:handleKeydownEvent,"focus.toOpen":handleFocusToOpenEvent,blur:function(){$ELEMENT.removeClass(CLASSES.target)},focusin:function(event){P.$root.removeClass(CLASSES.focused),event.stopPropagation()},"mousedown click":function(event){var target=event.target;target!=P.$holder[0]&&(event.stopPropagation(),"mousedown"!=event.type||$(target).is("input, select, textarea, button, option")||(event.preventDefault(),P.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var $target=$(this),targetData=$target.data(),targetDisabled=$target.hasClass(CLASSES.navDisabled)||$target.hasClass(CLASSES.disabled),activeElement=getActiveElement();activeElement=activeElement&&(activeElement.type||activeElement.href),(targetDisabled||activeElement&&!$.contains(P.$root[0],activeElement))&&P.$holder[0].focus(),!targetDisabled&&targetData.nav?P.set("highlight",P.component.item.highlight,{nav:targetData.nav}):!targetDisabled&&"pick"in targetData?(P.set("select",targetData.pick),SETTINGS.closeOnSelect&&P.close(!0)):targetData.clear?(P.clear(),SETTINGS.closeOnClear&&P.close(!0)):targetData.close&&P.close(!0)})}function handleFocusToOpenEvent(event){event.stopPropagation(),$ELEMENT.addClass(CLASSES.target),P.$root.addClass(CLASSES.focused),P.open()}function handleKeydownEvent(event){var keycode=event.keyCode,isKeycodeDelete=/^(8|46)$/.test(keycode);if(27==keycode)return P.close(!0),!1;(32==keycode||isKeycodeDelete||!STATE.open&&P.component.key[keycode])&&(event.preventDefault(),event.stopPropagation(),isKeycodeDelete?P.clear().close():P.open())}return new PickerInstance}function getScrollbarWidth(){if($html.height()<=$window.height())return 0;var $outer=$('<div style="visibility:hidden;width:100px" />').appendTo("body"),widthWithoutScroll=$outer[0].offsetWidth;$outer.css("overflow","scroll");var widthWithScroll=$('<div style="width:100%" />').appendTo($outer)[0].offsetWidth;return $outer.remove(),widthWithoutScroll-widthWithScroll}function aria(element,attribute,value){if($.isPlainObject(attribute))for(var key in attribute)ariaSet(element,key,attribute[key]);else ariaSet(element,attribute,value)}function ariaSet(element,attribute,value){element.setAttribute(("role"==attribute?"":"aria-")+attribute,value)}function getActiveElement(){try{return document.activeElement}catch(err){}}return PickerConstructor.klasses=function(prefix){return{picker:prefix=prefix||"picker",opened:prefix+"--opened",focused:prefix+"--focused",input:prefix+"__input",active:prefix+"__input--active",target:prefix+"__input--target",holder:prefix+"__holder",frame:prefix+"__frame",wrap:prefix+"__wrap",box:prefix+"__box"}},PickerConstructor._={group:function(groupObject){for(var loopObjectScope,nodesList="",counter=PickerConstructor._.trigger(groupObject.min,groupObject);counter<=PickerConstructor._.trigger(groupObject.max,groupObject,[counter]);counter+=groupObject.i)loopObjectScope=PickerConstructor._.trigger(groupObject.item,groupObject,[counter]),nodesList+=PickerConstructor._.node(groupObject.node,loopObjectScope[0],loopObjectScope[1],loopObjectScope[2]);return nodesList},node:function(wrapper,item,klass,attribute){return item?"<"+wrapper+(klass=klass?' class="'+klass+'"':"")+(attribute=attribute?" "+attribute:"")+">"+(item=$.isArray(item)?item.join(""):item)+"</"+wrapper+">":""},lead:function(number){return(number<10?"0":"")+number},trigger:function(callback,scope,args){return"function"==typeof callback?callback.apply(scope,args||[]):callback},digits:function(string){return/\d/.test(string[1])?2:1},isDate:function(value){return-1<{}.toString.call(value).indexOf("Date")&&this.isInteger(value.getDate())},isInteger:function(value){return-1<{}.toString.call(value).indexOf("Number")&&value%1==0},ariaAttr:function(attribute,data){$.isPlainObject(attribute)||(attribute={attribute:data});for(var key in data="",attribute){var attr=("role"==key?"":"aria-")+key,attrVal=attribute[key];data+=null==attrVal?"":attr+'="'+attribute[key]+'"'}return data}},PickerConstructor.extend=function(name,Component){$.fn[name]=function(options,action){var componentData=this.data(name);return"picker"==options?componentData:componentData&&"string"==typeof options?PickerConstructor._.trigger(componentData[options],componentData,[action]):this.each(function(){$(this).data(name)||new PickerConstructor(this,name,Component,options)})},$.fn[name].defaults=Component.defaults},PickerConstructor}),function(factory){"function"==typeof define&&define.amd?define("picker.date",["picker","jquery"],factory):"object"==typeof exports?module.exports=factory(require("./picker.js"),require("jquery")):factory(Picker,jQuery)}(function(Picker,$){var prefix,_=Picker._;function DatePicker(picker,settings){var collectionDisabled,calendar=this,element=picker.$node[0],elementValue=element.value,elementDataValue=picker.$node.data("value"),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format,isRTL=function(){return element.currentStyle?"rtl"==element.currentStyle.direction:"rtl"==getComputedStyle(picker.$root[0]).direction};calendar.settings=settings,calendar.$node=picker.$node,calendar.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},calendar.item={},calendar.item.clear=null,calendar.item.disable=(settings.disable||[]).slice(0),calendar.item.enable=-(!0===(collectionDisabled=calendar.item.disable)[0]?collectionDisabled.shift():-1),calendar.set("min",settings.min).set("max",settings.max).set("now"),valueString?calendar.set("select",valueString,{format:formatString,defaultValue:!0}):calendar.set("select",null).set("highlight",calendar.item.now),calendar.key={40:7,38:-7,39:function(){return isRTL()?-1:1},37:function(){return isRTL()?1:-1},go:function(timeChange){var highlightedObject=calendar.item.highlight,targetDate=new Date(highlightedObject.year,highlightedObject.month,highlightedObject.date+timeChange);calendar.set("highlight",targetDate,{interval:timeChange}),this.render()}},picker.on("render",function(){picker.$root.find("."+settings.klass.selectMonth).on("change",function(){var value=this.value;value&&(picker.set("highlight",[picker.get("view").year,value,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectMonth).trigger("focus"))}),picker.$root.find("."+settings.klass.selectYear).on("change",function(){var value=this.value;value&&(picker.set("highlight",[value,picker.get("view").month,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectYear).trigger("focus"))})},1).on("open",function(){var includeToday="";calendar.disabled(calendar.get("now"))&&(includeToday=":not(."+settings.klass.buttonToday+")"),picker.$root.find("button"+includeToday+", select").attr("disabled",!1)},1).on("close",function(){picker.$root.find("button, select").attr("disabled",!0)},1)}DatePicker.prototype.set=function(type,value,options){var calendar=this,calendarItem=calendar.item;return null===value?("clear"==type&&(type="select"),calendarItem[type]=value):(calendarItem["enable"==type?"disable":"flip"==type?"enable":type]=calendar.queue[type].split(" ").map(function(method){return value=calendar[method](type,value,options)}).pop(),"select"==type?calendar.set("highlight",calendarItem.select,options):"highlight"==type?calendar.set("view",calendarItem.highlight,options):type.match(/^(flip|min|max|disable|enable)$/)&&(calendarItem.select&&calendar.disabled(calendarItem.select)&&calendar.set("select",calendarItem.select,options),calendarItem.highlight&&calendar.disabled(calendarItem.highlight)&&calendar.set("highlight",calendarItem.highlight,options))),calendar},DatePicker.prototype.get=function(type){return this.item[type]},DatePicker.prototype.create=function(type,value,options){var isInfiniteValue;return(value=void 0===value?type:value)==-1/0||value==1/0?isInfiniteValue=value:value=$.isPlainObject(value)&&_.isInteger(value.pick)?value.obj:$.isArray(value)?(value=new Date(value[0],value[1],value[2]),_.isDate(value)?value:this.create().obj):_.isInteger(value)||_.isDate(value)?this.normalize(new Date(value),options):this.now(type,value,options),{year:isInfiniteValue||value.getFullYear(),month:isInfiniteValue||value.getMonth(),date:isInfiniteValue||value.getDate(),day:isInfiniteValue||value.getDay(),obj:isInfiniteValue||value,pick:isInfiniteValue||value.getTime()}},DatePicker.prototype.createRange=function(from,to){var calendar=this,createDate=function(date){return!0===date||$.isArray(date)||_.isDate(date)?calendar.create(date):date};return _.isInteger(from)||(from=createDate(from)),_.isInteger(to)||(to=createDate(to)),_.isInteger(from)&&$.isPlainObject(to)?from=[to.year,to.month,to.date+from]:_.isInteger(to)&&$.isPlainObject(from)&&(to=[from.year,from.month,from.date+to]),{from:createDate(from),to:createDate(to)}},DatePicker.prototype.withinRange=function(range,dateUnit){return range=this.createRange(range.from,range.to),dateUnit.pick>=range.from.pick&&dateUnit.pick<=range.to.pick},DatePicker.prototype.overlapRanges=function(one,two){return one=this.createRange(one.from,one.to),two=this.createRange(two.from,two.to),this.withinRange(one,two.from)||this.withinRange(one,two.to)||this.withinRange(two,one.from)||this.withinRange(two,one.to)},DatePicker.prototype.now=function(type,value,options){return value=new Date,options&&options.rel&&value.setDate(value.getDate()+options.rel),this.normalize(value,options)},DatePicker.prototype.navigate=function(type,value,options){var targetDateObject,targetYear,targetMonth,targetDate,isTargetArray=$.isArray(value),isTargetObject=$.isPlainObject(value),viewsetObject=this.item.view;if(isTargetArray||isTargetObject){for(targetDate=isTargetObject?(targetYear=value.year,targetMonth=value.month,value.date):(targetYear=+value[0],targetMonth=+value[1],+value[2]),options&&options.nav&&viewsetObject&&viewsetObject.month!==targetMonth&&(targetYear=viewsetObject.year,targetMonth=viewsetObject.month),targetYear=(targetDateObject=new Date(targetYear,targetMonth+(options&&options.nav?options.nav:0),1)).getFullYear(),targetMonth=targetDateObject.getMonth();new Date(targetYear,targetMonth,targetDate).getMonth()!==targetMonth;)targetDate-=1;value=[targetYear,targetMonth,targetDate]}return value},DatePicker.prototype.normalize=function(value){return value.setHours(0,0,0,0),value},DatePicker.prototype.measure=function(type,value){return value?"string"==typeof value?value=this.parse(type,value):_.isInteger(value)&&(value=this.now(type,value,{rel:value})):value="min"==type?-1/0:1/0,value},DatePicker.prototype.viewset=function(type,dateObject){return this.create([dateObject.year,dateObject.month,1])},DatePicker.prototype.validate=function(type,dateObject,options){var hasEnabledBeforeTarget,hasEnabledAfterTarget,reachedMin,reachedMax,calendar=this,originalDateObject=dateObject,interval=options&&options.interval?options.interval:1,isFlippedBase=-1===calendar.item.enable,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,hasEnabledWeekdays=isFlippedBase&&calendar.item.disable.filter(function(value){if($.isArray(value)){var dateTime=calendar.create(value).pick;dateTime<dateObject.pick?hasEnabledBeforeTarget=!0:dateTime>dateObject.pick&&(hasEnabledAfterTarget=!0)}return _.isInteger(value)}).length;if((!options||!options.nav&&!options.defaultValue)&&(!isFlippedBase&&calendar.disabled(dateObject)||isFlippedBase&&calendar.disabled(dateObject)&&(hasEnabledWeekdays||hasEnabledBeforeTarget||hasEnabledAfterTarget)||!isFlippedBase&&(dateObject.pick<=minLimitObject.pick||dateObject.pick>=maxLimitObject.pick)))for(isFlippedBase&&!hasEnabledWeekdays&&(!hasEnabledAfterTarget&&0<interval||!hasEnabledBeforeTarget&&interval<0)&&(interval*=-1);calendar.disabled(dateObject)&&(1<Math.abs(interval)&&(dateObject.month<originalDateObject.month||dateObject.month>originalDateObject.month)&&(dateObject=originalDateObject,interval=0<interval?1:-1),dateObject.pick<=minLimitObject.pick?(reachedMin=!0,interval=1,dateObject=calendar.create([minLimitObject.year,minLimitObject.month,minLimitObject.date+(dateObject.pick===minLimitObject.pick?0:-1)])):dateObject.pick>=maxLimitObject.pick&&(reachedMax=!0,interval=-1,dateObject=calendar.create([maxLimitObject.year,maxLimitObject.month,maxLimitObject.date+(dateObject.pick===maxLimitObject.pick?0:1)])),!reachedMin||!reachedMax);)dateObject=calendar.create([dateObject.year,dateObject.month,dateObject.date+interval]);return dateObject},DatePicker.prototype.disabled=function(dateToVerify){var calendar=this,isDisabledMatch=calendar.item.disable.filter(function(dateToDisable){return _.isInteger(dateToDisable)?dateToVerify.day===(calendar.settings.firstDay?dateToDisable:dateToDisable-1)%7:$.isArray(dateToDisable)||_.isDate(dateToDisable)?dateToVerify.pick===calendar.create(dateToDisable).pick:$.isPlainObject(dateToDisable)?calendar.withinRange(dateToDisable,dateToVerify):void 0});return isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(dateToDisable){return $.isArray(dateToDisable)&&"inverted"==dateToDisable[3]||$.isPlainObject(dateToDisable)&&dateToDisable.inverted}).length,-1===calendar.item.enable?!isDisabledMatch:isDisabledMatch||dateToVerify.pick<calendar.item.min.pick||dateToVerify.pick>calendar.item.max.pick},DatePicker.prototype.parse=function(type,value,options){var calendar=this,parsingObject={};return value&&"string"==typeof value?(options&&options.format||((options=options||{}).format=calendar.settings.format),calendar.formats.toArray(options.format).map(function(label){var formattingLabel=calendar.formats[label],formatLength=formattingLabel?_.trigger(formattingLabel,calendar,[value,parsingObject]):label.replace(/^!/,"").length;formattingLabel&&(parsingObject[label]=value.substr(0,formatLength)),value=value.substr(formatLength)}),[parsingObject.yyyy||parsingObject.yy,+(parsingObject.mm||parsingObject.m)-1,parsingObject.dd||parsingObject.d]):value},DatePicker.prototype.formats=function(){function getWordLengthFromCollection(string,collection,dateObject){var word=string.match(/[^\x00-\x7F]+|\w+/)[0];return dateObject.mm||dateObject.m||(dateObject.m=collection.indexOf(word)+1),word.length}function getFirstWordLength(string){return string.match(/\w+/)[0].length}return{d:function(string,dateObject){return string?_.digits(string):dateObject.date},dd:function(string,dateObject){return string?2:_.lead(dateObject.date)},ddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysShort[dateObject.day]},dddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysFull[dateObject.day]},m:function(string,dateObject){return string?_.digits(string):dateObject.month+1},mm:function(string,dateObject){return string?2:_.lead(dateObject.month+1)},mmm:function(string,dateObject){var collection=this.settings.monthsShort;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},mmmm:function(string,dateObject){var collection=this.settings.monthsFull;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},yy:function(string,dateObject){return string?2:(""+dateObject.year).slice(2)},yyyy:function(string,dateObject){return string?4:dateObject.year},toArray:function(formatString){return formatString.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(formatString,itemObject){var calendar=this;return calendar.formats.toArray(formatString).map(function(label){return _.trigger(calendar.formats[label],calendar,[0,itemObject])||label.replace(/^!/,"")}).join("")}}}(),DatePicker.prototype.isDateExact=function(one,two){return _.isInteger(one)&&_.isInteger(two)||"boolean"==typeof one&&"boolean"==typeof two?one===two:(_.isDate(one)||$.isArray(one))&&(_.isDate(two)||$.isArray(two))?this.create(one).pick===this.create(two).pick:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&(this.isDateExact(one.from,two.from)&&this.isDateExact(one.to,two.to))},DatePicker.prototype.isDateOverlap=function(one,two){var firstDay=this.settings.firstDay?1:0;return _.isInteger(one)&&(_.isDate(two)||$.isArray(two))?(one=one%7+firstDay)===this.create(two).day+1:_.isInteger(two)&&(_.isDate(one)||$.isArray(one))?(two=two%7+firstDay)===this.create(one).day+1:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&this.overlapRanges(one,two)},DatePicker.prototype.flipEnable=function(val){var itemObject=this.item;itemObject.enable=val||(-1==itemObject.enable?1:-1)},DatePicker.prototype.deactivate=function(type,datesToDisable){var calendar=this,disabledItems=calendar.item.disable.slice(0);return"flip"==datesToDisable?calendar.flipEnable():!1===datesToDisable?(calendar.flipEnable(1),disabledItems=[]):!0===datesToDisable?(calendar.flipEnable(-1),disabledItems=[]):datesToDisable.map(function(unitToDisable){for(var matchFound,index=0;index<disabledItems.length;index+=1)if(calendar.isDateExact(unitToDisable,disabledItems[index])){matchFound=!0;break}matchFound||(_.isInteger(unitToDisable)||_.isDate(unitToDisable)||$.isArray(unitToDisable)||$.isPlainObject(unitToDisable)&&unitToDisable.from&&unitToDisable.to)&&disabledItems.push(unitToDisable)}),disabledItems},DatePicker.prototype.activate=function(type,datesToEnable){var calendar=this,disabledItems=calendar.item.disable,disabledItemsCount=disabledItems.length;return"flip"==datesToEnable?calendar.flipEnable():!0===datesToEnable?(calendar.flipEnable(1),disabledItems=[]):!1===datesToEnable?(calendar.flipEnable(-1),disabledItems=[]):datesToEnable.map(function(unitToEnable){var matchFound,disabledUnit,index,isExactRange;for(index=0;index<disabledItemsCount;index+=1){if(disabledUnit=disabledItems[index],calendar.isDateExact(disabledUnit,unitToEnable)){matchFound=disabledItems[index]=null,isExactRange=!0;break}if(calendar.isDateOverlap(disabledUnit,unitToEnable)){$.isPlainObject(unitToEnable)?(unitToEnable.inverted=!0,matchFound=unitToEnable):$.isArray(unitToEnable)?(matchFound=unitToEnable)[3]||matchFound.push("inverted"):_.isDate(unitToEnable)&&(matchFound=[unitToEnable.getFullYear(),unitToEnable.getMonth(),unitToEnable.getDate(),"inverted"]);break}}if(matchFound)for(index=0;index<disabledItemsCount;index+=1)if(calendar.isDateExact(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}if(isExactRange)for(index=0;index<disabledItemsCount;index+=1)if(calendar.isDateOverlap(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}matchFound&&disabledItems.push(matchFound)}),disabledItems.filter(function(val){return null!=val})},DatePicker.prototype.nodes=function(isOpen){var collection,fullCollection,calendar=this,settings=calendar.settings,calendarItem=calendar.item,nowObject=calendarItem.now,selectedObject=calendarItem.select,highlightedObject=calendarItem.highlight,viewsetObject=calendarItem.view,disabledCollection=calendarItem.disable,minLimitObject=calendarItem.min,maxLimitObject=calendarItem.max,tableHead=(collection=(settings.showWeekdaysFull?settings.weekdaysFull:settings.weekdaysShort).slice(0),fullCollection=settings.weekdaysFull.slice(0),settings.firstDay&&(collection.push(collection.shift()),fullCollection.push(fullCollection.shift())),_.node("thead",_.node("tr",_.group({min:0,max:6,i:1,node:"th",item:function(counter){return[collection[counter],settings.klass.weekdays,'scope=col title="'+fullCollection[counter]+'"']}})))),createMonthNav=function(next){return _.node("div"," ",settings.klass["nav"+(next?"Next":"Prev")]+(next&&viewsetObject.year>=maxLimitObject.year&&viewsetObject.month>=maxLimitObject.month||!next&&viewsetObject.year<=minLimitObject.year&&viewsetObject.month<=minLimitObject.month?" "+settings.klass.navDisabled:""),"data-nav="+(next||-1)+" "+_.ariaAttr({role:"button",controls:calendar.$node[0].id+"_table"})+' title="'+(next?settings.labelMonthNext:settings.labelMonthPrev)+'"')},createMonthLabel=function(){var monthsCollection=settings.showMonthsShort?settings.monthsShort:settings.monthsFull;return settings.selectMonths?_.node("select",_.group({min:0,max:11,i:1,node:"option",item:function(loopedMonth){return[monthsCollection[loopedMonth],0,"value="+loopedMonth+(viewsetObject.month==loopedMonth?" selected":"")+(viewsetObject.year==minLimitObject.year&&loopedMonth<minLimitObject.month||viewsetObject.year==maxLimitObject.year&&loopedMonth>maxLimitObject.month?" disabled":"")]}}),settings.klass.selectMonth,(isOpen?"":"disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id+"_table"})+' title="'+settings.labelMonthSelect+'"'):_.node("div",monthsCollection[viewsetObject.month],settings.klass.month)},createYearLabel=function(){var focusedYear=viewsetObject.year,numberYears=!0===settings.selectYears?5:~~(settings.selectYears/2);if(numberYears){var minYear=minLimitObject.year,maxYear=maxLimitObject.year,lowestYear=focusedYear-numberYears,highestYear=focusedYear+numberYears;if(lowestYear<minYear&&(highestYear+=minYear-lowestYear,lowestYear=minYear),maxYear<highestYear){var availableYears=lowestYear-minYear,neededYears=highestYear-maxYear;lowestYear-=neededYears<availableYears?neededYears:availableYears,highestYear=maxYear}return _.node("select",_.group({min:lowestYear,max:highestYear,i:1,node:"option",item:function(loopedYear){return[loopedYear,0,"value="+loopedYear+(focusedYear==loopedYear?" selected":"")]}}),settings.klass.selectYear,(isOpen?"":"disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id+"_table"})+' title="'+settings.labelYearSelect+'"')}return _.node("div",focusedYear,settings.klass.year)};return _.node("div",(settings.selectYears?createYearLabel()+createMonthLabel():createMonthLabel()+createYearLabel())+createMonthNav()+createMonthNav(1),settings.klass.header)+_.node("table",tableHead+_.node("tbody",_.group({min:0,max:5,i:1,node:"tr",item:function(rowCounter){var shiftDateBy=settings.firstDay&&0===calendar.create([viewsetObject.year,viewsetObject.month,1]).day?-7:0;return[_.group({min:7*rowCounter-viewsetObject.day+shiftDateBy+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(targetDate){targetDate=calendar.create([viewsetObject.year,viewsetObject.month,targetDate+(settings.firstDay?1:0)]);var klasses,isSelected=selectedObject&&selectedObject.pick==targetDate.pick,isHighlighted=highlightedObject&&highlightedObject.pick==targetDate.pick,isDisabled=disabledCollection&&calendar.disabled(targetDate)||targetDate.pick<minLimitObject.pick||targetDate.pick>maxLimitObject.pick,formattedDate=_.trigger(calendar.formats.toString,calendar,[settings.format,targetDate]);return[_.node("div",targetDate.date,(klasses=[settings.klass.day],klasses.push(viewsetObject.month==targetDate.month?settings.klass.infocus:settings.klass.outfocus),nowObject.pick==targetDate.pick&&klasses.push(settings.klass.now),isSelected&&klasses.push(settings.klass.selected),isHighlighted&&klasses.push(settings.klass.highlighted),isDisabled&&klasses.push(settings.klass.disabled),klasses.join(" ")),"data-pick="+targetDate.pick+" "+_.ariaAttr({role:"gridcell",label:formattedDate,selected:!(!isSelected||calendar.$node.val()!==formattedDate)||null,activedescendant:!!isHighlighted||null,disabled:!!isDisabled||null})),"",_.ariaAttr({role:"presentation"})]}})]}})),settings.klass.table,'id="'+calendar.$node[0].id+'_table" '+_.ariaAttr({role:"grid",controls:calendar.$node[0].id,readonly:!0}))+_.node("div",_.node("button",settings.today,settings.klass.buttonToday,"type=button data-pick="+nowObject.pick+(isOpen&&!calendar.disabled(nowObject)?"":" disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id}))+_.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id}))+_.node("button",settings.close,settings.klass.buttonClose,"type=button data-close=true "+(isOpen?"":" disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id})),settings.klass.footer)},DatePicker.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:(prefix=Picker.klasses().picker+"__")+"table",header:prefix+"header",navPrev:prefix+"nav--prev",navNext:prefix+"nav--next",navDisabled:prefix+"nav--disabled",month:prefix+"month",year:prefix+"year",selectMonth:prefix+"select--month",selectYear:prefix+"select--year",weekdays:prefix+"weekday",day:prefix+"day",disabled:prefix+"day--disabled",selected:prefix+"day--selected",highlighted:prefix+"day--highlighted",now:prefix+"day--today",infocus:prefix+"day--infocus",outfocus:prefix+"day--outfocus",footer:prefix+"footer",buttonClear:prefix+"button--clear",buttonToday:prefix+"button--today",buttonClose:prefix+"button--close"}},Picker.extend("pickadate",DatePicker)}),function(factory){"function"==typeof define&&define.amd?define("picker.time",["picker","jquery"],factory):"object"==typeof exports?module.exports=factory(require("./picker.js"),require("jquery")):factory(Picker,jQuery)}(function(Picker,$){var prefix,_=Picker._;function TimePicker(picker,settings){var collectionDisabled,clock=this,elementValue=picker.$node[0].value,elementDataValue=picker.$node.data("value"),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format;clock.settings=settings,clock.$node=picker.$node,clock.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},clock.item={},clock.item.clear=null,clock.item.interval=settings.interval||30,clock.item.disable=(settings.disable||[]).slice(0),clock.item.enable=-(!0===(collectionDisabled=clock.item.disable)[0]?collectionDisabled.shift():-1),clock.set("min",settings.min).set("max",settings.max).set("now"),valueString?clock.set("select",valueString,{format:formatString}):clock.set("select",null).set("highlight",clock.item.now),clock.key={40:1,38:-1,39:1,37:-1,go:function(timeChange){clock.set("highlight",clock.item.highlight.pick+timeChange*clock.item.interval,{interval:timeChange*clock.item.interval}),this.render()}},picker.on("render",function(){var $pickerHolder=picker.$root.children(),$viewset=$pickerHolder.find("."+settings.klass.viewset),vendors=function(prop){return["webkit","moz","ms","o",""].map(function(vendor){return(vendor?"-"+vendor+"-":"")+prop})},animations=function($el,state){vendors("transform").map(function(prop){$el.css(prop,state)}),vendors("transition").map(function(prop){$el.css(prop,state)})};$viewset.length&&(animations($pickerHolder,"none"),$pickerHolder[0].scrollTop=~~$viewset.position().top-2*$viewset[0].clientHeight,animations($pickerHolder,""))},1).on("open",function(){picker.$root.find("button").attr("disabled",!1)},1).on("close",function(){picker.$root.find("button").attr("disabled",!0)},1)}TimePicker.prototype.set=function(type,value,options){var clock=this,clockItem=clock.item;return null===value?("clear"==type&&(type="select"),clockItem[type]=value):(clockItem["enable"==type?"disable":"flip"==type?"enable":type]=clock.queue[type].split(" ").map(function(method){return value=clock[method](type,value,options)}).pop(),"select"==type?clock.set("highlight",clockItem.select,options):"highlight"==type?clock.set("view",clockItem.highlight,options):"interval"==type?clock.set("min",clockItem.min,options).set("max",clockItem.max,options):type.match(/^(flip|min|max|disable|enable)$/)&&(clockItem.select&&clock.disabled(clockItem.select)&&clock.set("select",value,options),clockItem.highlight&&clock.disabled(clockItem.highlight)&&clock.set("highlight",value,options),"min"==type&&clock.set("max",clockItem.max,options))),clock},TimePicker.prototype.get=function(type){return this.item[type]},TimePicker.prototype.create=function(type,value,options){return value=void 0===value?type:value,_.isDate(value)&&(value=[value.getHours(),value.getMinutes()]),$.isPlainObject(value)&&_.isInteger(value.pick)?value=value.pick:$.isArray(value)?value=60*+value[0]+ +value[1]:_.isInteger(value)||(value=this.now(type,value,options)),"max"==type&&value<this.item.min.pick&&(value+=1440),"min"!=type&&"max"!=type&&(value-this.item.min.pick)%this.item.interval!=0&&(value+=this.item.interval),{hour:~~(24+(value=this.normalize(type,value,options))/60)%24,mins:(60+value%60)%60,time:(1440+value)%1440,pick:value%1440}},TimePicker.prototype.createRange=function(from,to){var clock=this,createTime=function(time){return!0===time||$.isArray(time)||_.isDate(time)?clock.create(time):time};return _.isInteger(from)||(from=createTime(from)),_.isInteger(to)||(to=createTime(to)),_.isInteger(from)&&$.isPlainObject(to)?from=[to.hour,to.mins+from*clock.settings.interval]:_.isInteger(to)&&$.isPlainObject(from)&&(to=[from.hour,from.mins+to*clock.settings.interval]),{from:createTime(from),to:createTime(to)}},TimePicker.prototype.withinRange=function(range,timeUnit){return range=this.createRange(range.from,range.to),timeUnit.pick>=range.from.pick&&timeUnit.pick<=range.to.pick},TimePicker.prototype.overlapRanges=function(one,two){return one=this.createRange(one.from,one.to),two=this.createRange(two.from,two.to),this.withinRange(one,two.from)||this.withinRange(one,two.to)||this.withinRange(two,one.from)||this.withinRange(two,one.to)},TimePicker.prototype.now=function(type,value){var isBelowInterval,interval=this.item.interval,date=new Date,nowMinutes=60*date.getHours()+date.getMinutes();return nowMinutes-=nowMinutes%interval,isBelowInterval=value<0&&interval*value+nowMinutes<=-interval,nowMinutes+="min"==type&&isBelowInterval?0:interval,_.isInteger(value)&&(nowMinutes+=interval*(isBelowInterval&&"max"!=type?value+1:value)),nowMinutes},TimePicker.prototype.normalize=function(type,value){var interval=this.item.interval,minTime=this.item.min&&this.item.min.pick||0;return value-="min"==type?0:(value-minTime)%interval},TimePicker.prototype.measure=function(type,value,options){return value||(value="min"==type?[0,0]:[23,59]),"string"==typeof value?value=this.parse(type,value):!0===value||_.isInteger(value)?value=this.now(type,value,options):$.isPlainObject(value)&&_.isInteger(value.pick)&&(value=this.normalize(type,value.pick,options)),value},TimePicker.prototype.validate=function(type,timeObject,options){var interval=options&&options.interval?options.interval:this.item.interval;return this.disabled(timeObject)&&(timeObject=this.shift(timeObject,interval)),timeObject=this.scope(timeObject),this.disabled(timeObject)&&(timeObject=this.shift(timeObject,-1*interval)),timeObject},TimePicker.prototype.disabled=function(timeToVerify){var clock=this,isDisabledMatch=clock.item.disable.filter(function(timeToDisable){return _.isInteger(timeToDisable)?timeToVerify.hour==timeToDisable:$.isArray(timeToDisable)||_.isDate(timeToDisable)?timeToVerify.pick==clock.create(timeToDisable).pick:$.isPlainObject(timeToDisable)?clock.withinRange(timeToDisable,timeToVerify):void 0});return isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(timeToDisable){return $.isArray(timeToDisable)&&"inverted"==timeToDisable[2]||$.isPlainObject(timeToDisable)&&timeToDisable.inverted}).length,-1===clock.item.enable?!isDisabledMatch:isDisabledMatch||timeToVerify.pick<clock.item.min.pick||timeToVerify.pick>clock.item.max.pick},TimePicker.prototype.shift=function(timeObject,interval){var minLimit=this.item.min.pick,maxLimit=this.item.max.pick;for(interval=interval||this.item.interval;this.disabled(timeObject)&&!((timeObject=this.create(timeObject.pick+=interval)).pick<=minLimit||timeObject.pick>=maxLimit););return timeObject},TimePicker.prototype.scope=function(timeObject){var minLimit=this.item.min.pick,maxLimit=this.item.max.pick;return this.create(timeObject.pick>maxLimit?maxLimit:timeObject.pick<minLimit?minLimit:timeObject)},TimePicker.prototype.parse=function(type,value,options){var hour,minutes,isPM,item,parseValue,clock=this,parsingObject={};if(!value||"string"!=typeof value)return value;for(item in options&&options.format||((options=options||{}).format=clock.settings.format),clock.formats.toArray(options.format).map(function(label){var substring,formattingLabel=clock.formats[label],formatLength=formattingLabel?_.trigger(formattingLabel,clock,[value,parsingObject]):label.replace(/^!/,"").length;formattingLabel&&(substring=value.substr(0,formatLength),parsingObject[label]=substring.match(/^\d+$/)?+substring:substring),value=value.substr(formatLength)}),parsingObject)parseValue=parsingObject[item],_.isInteger(parseValue)?item.match(/^(h|hh)$/i)?(hour=parseValue,"h"!=item&&"hh"!=item||(hour%=12)):"i"==item&&(minutes=parseValue):item.match(/^a$/i)&&parseValue.match(/^p/i)&&("h"in parsingObject||"hh"in parsingObject)&&(isPM=!0);return 60*(isPM?hour+12:hour)+minutes},TimePicker.prototype.formats={h:function(string,timeObject){return string?_.digits(string):timeObject.hour%12||12},hh:function(string,timeObject){return string?2:_.lead(timeObject.hour%12||12)},H:function(string,timeObject){return string?_.digits(string):""+timeObject.hour%24},HH:function(string,timeObject){return string?_.digits(string):_.lead(timeObject.hour%24)},i:function(string,timeObject){return string?2:_.lead(timeObject.mins)},a:function(string,timeObject){return string?4:timeObject.time%1440<720?"a.m.":"p.m."},A:function(string,timeObject){return string?2:timeObject.time%1440<720?"AM":"PM"},toArray:function(formatString){return formatString.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(formatString,itemObject){var clock=this;return clock.formats.toArray(formatString).map(function(label){return _.trigger(clock.formats[label],clock,[0,itemObject])||label.replace(/^!/,"")}).join("")}},TimePicker.prototype.isTimeExact=function(one,two){return _.isInteger(one)&&_.isInteger(two)||"boolean"==typeof one&&"boolean"==typeof two?one===two:(_.isDate(one)||$.isArray(one))&&(_.isDate(two)||$.isArray(two))?this.create(one).pick===this.create(two).pick:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&(this.isTimeExact(one.from,two.from)&&this.isTimeExact(one.to,two.to))},TimePicker.prototype.isTimeOverlap=function(one,two){return _.isInteger(one)&&(_.isDate(two)||$.isArray(two))?one===this.create(two).hour:_.isInteger(two)&&(_.isDate(one)||$.isArray(one))?two===this.create(one).hour:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&this.overlapRanges(one,two)},TimePicker.prototype.flipEnable=function(val){var itemObject=this.item;itemObject.enable=val||(-1==itemObject.enable?1:-1)},TimePicker.prototype.deactivate=function(type,timesToDisable){var clock=this,disabledItems=clock.item.disable.slice(0);return"flip"==timesToDisable?clock.flipEnable():!1===timesToDisable?(clock.flipEnable(1),disabledItems=[]):!0===timesToDisable?(clock.flipEnable(-1),disabledItems=[]):timesToDisable.map(function(unitToDisable){for(var matchFound,index=0;index<disabledItems.length;index+=1)if(clock.isTimeExact(unitToDisable,disabledItems[index])){matchFound=!0;break}matchFound||(_.isInteger(unitToDisable)||_.isDate(unitToDisable)||$.isArray(unitToDisable)||$.isPlainObject(unitToDisable)&&unitToDisable.from&&unitToDisable.to)&&disabledItems.push(unitToDisable)}),disabledItems},TimePicker.prototype.activate=function(type,timesToEnable){var clock=this,disabledItems=clock.item.disable,disabledItemsCount=disabledItems.length;return"flip"==timesToEnable?clock.flipEnable():!0===timesToEnable?(clock.flipEnable(1),disabledItems=[]):!1===timesToEnable?(clock.flipEnable(-1),disabledItems=[]):timesToEnable.map(function(unitToEnable){var matchFound,disabledUnit,index,isRangeMatched;for(index=0;index<disabledItemsCount;index+=1){if(disabledUnit=disabledItems[index],clock.isTimeExact(disabledUnit,unitToEnable)){matchFound=disabledItems[index]=null,isRangeMatched=!0;break}if(clock.isTimeOverlap(disabledUnit,unitToEnable)){$.isPlainObject(unitToEnable)?(unitToEnable.inverted=!0,matchFound=unitToEnable):$.isArray(unitToEnable)?(matchFound=unitToEnable)[2]||matchFound.push("inverted"):_.isDate(unitToEnable)&&(matchFound=[unitToEnable.getFullYear(),unitToEnable.getMonth(),unitToEnable.getDate(),"inverted"]);break}}if(matchFound)for(index=0;index<disabledItemsCount;index+=1)if(clock.isTimeExact(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}if(isRangeMatched)for(index=0;index<disabledItemsCount;index+=1)if(clock.isTimeOverlap(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}matchFound&&disabledItems.push(matchFound)}),disabledItems.filter(function(val){return null!=val})},TimePicker.prototype.i=function(type,value){return _.isInteger(value)&&0<value?value:this.item.interval},TimePicker.prototype.nodes=function(isOpen){var clock=this,settings=clock.settings,selectedObject=clock.item.select,highlightedObject=clock.item.highlight,viewsetObject=clock.item.view,disabledCollection=clock.item.disable;return _.node("ul",_.group({min:clock.item.min.pick,max:clock.item.max.pick,i:clock.item.interval,node:"li",item:function(loopedTime){var klasses,timeMinutes=(loopedTime=clock.create(loopedTime)).pick,isSelected=selectedObject&&selectedObject.pick==timeMinutes,isHighlighted=highlightedObject&&highlightedObject.pick==timeMinutes,isDisabled=disabledCollection&&clock.disabled(loopedTime),formattedTime=_.trigger(clock.formats.toString,clock,[settings.format,loopedTime]);return[_.trigger(clock.formats.toString,clock,[_.trigger(settings.formatLabel,clock,[loopedTime])||settings.format,loopedTime]),(klasses=[settings.klass.listItem],isSelected&&klasses.push(settings.klass.selected),isHighlighted&&klasses.push(settings.klass.highlighted),viewsetObject&&viewsetObject.pick==timeMinutes&&klasses.push(settings.klass.viewset),isDisabled&&klasses.push(settings.klass.disabled),klasses.join(" ")),"data-pick="+loopedTime.pick+" "+_.ariaAttr({role:"option",label:formattedTime,selected:!(!isSelected||clock.$node.val()!==formattedTime)||null,activedescendant:!!isHighlighted||null,disabled:!!isDisabled||null})]}})+_.node("li",_.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disabled")+" "+_.ariaAttr({controls:clock.$node[0].id})),"",_.ariaAttr({role:"presentation"})),settings.klass.list,_.ariaAttr({role:"listbox",controls:clock.$node[0].id}))},TimePicker.defaults={clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:(prefix=Picker.klasses().picker)+" "+prefix+"--time",holder:prefix+"__holder",list:prefix+"__list",listItem:prefix+"__list-item",disabled:prefix+"__list-item--disabled",selected:prefix+"__list-item--selected",highlighted:prefix+"__list-item--highlighted",viewset:prefix+"__list-item--viewset",now:prefix+"__list-item--now",buttonClear:prefix+"__button--clear"}},Picker.extend("pickatime",TimePicker)}),define("mockup-patterns-pickadate",["jquery","pat-base","mockup-utils","translate","picker","picker.date","picker.time","mockup-patterns-select2"],function($,Base,utils,_t){"use strict";return Base.extend({name:"pickadate",trigger:".pat-pickadate",parser:"mockup",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0,formatSubmit:"yyyy-mm-dd",format:"yyyy-mm-dd",labelMonthNext:_t("Next month"),labelMonthPrev:_t("Previous month"),labelMonthSelect:_t("Select a month"),labelYearSelect:_t("Select a year"),clear:!1,close:!1,today:!1},time:{clear:!1},today:_t("Today"),clear:_t("Clear"),timezone:null,autoSetTimeOnDateChange:"+[0,0]",classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classTimezoneName:"pattern-pickadate-timezone",classTimezoneWrapperName:"pattern-pickadate-timezone-wrapper",classClearName:"pattern-pickadate-clear",classNowName:"pattern-pickadate-now",placeholderDate:_t("Enter date..."),placeholderTime:_t("Enter time..."),placeholderTimezone:_t("Enter timezone...")},parseTimeOffset:function(timeOffset){var op=void 0;0===timeOffset.indexOf("+")?(op="+",timeOffset=timeOffset.split("+")[1]):0===timeOffset.indexOf("-")&&(op="-",timeOffset=timeOffset.split("-")[1]);try{timeOffset=JSON.parse(timeOffset)}catch(e){timeOffset=void 0}if(!1===timeOffset)return!1;if(!0===timeOffset||!0!==Array.isArray(timeOffset))return[0,0];var hours=parseInt(timeOffset[0],10)||0,mins=parseInt(timeOffset[1],10)||0;if("+"===op||"-"===op){var offset=new Date,curHours=offset.getHours(),curMins=offset.getMinutes();"+"===op?(23<(hours=curHours+hours)&&(hours=23),59<(mins=curMins+mins)&&(mins=59)):"-"===op&&((hours=curHours-hours)<0&&(hours=0),(mins=curMins-mins)<0&&(mins=0))}return[hours,mins]},init:function(){var self=this,value=self.$el.val().split(" "),dateValue=value[0]||"",timeValue=value[1]||"";if(!1===utils.bool(self.options.date)&&(self.options.date=!1),!1===utils.bool(self.options.time)&&(self.options.time=!1),self.options.autoSetTimeOnDateChange=self.parseTimeOffset(self.options.autoSetTimeOnDateChange),!1===self.options.date&&(timeValue=value[0]),self.$el.hide(),self.$wrapper=$("<div/>").addClass(self.options.classWrapperName).insertAfter(self.$el),!1!==self.options.date&&(self.$date=$('<input type="text"/>').attr("placeholder",self.options.placeholderDate).attr("data-value",dateValue).addClass(self.options.classDateName).appendTo($("<div/>").addClass(self.options.classDateWrapperName).appendTo(self.$wrapper)).pickadate($.extend(!0,{},self.options.date,{onSet:function(e){void 0!==e.select&&(self.$date.attr("data-value",e.select),!1!==self.options.autoSetTimeOnDateChange&&self.$time&&(self.$time.pickatime("picker").get("select")||self.$time.pickatime("picker").set("select",self.options.autoSetTimeOnDateChange)),!1!==self.options.time&&""===self.$time.attr("data-value")||self.updateValue.call(self)),e.hasOwnProperty("clear")&&(self.$el.val(""),self.$date.attr("data-value",""))}}))),!1!==self.options.time&&(self.options.time.formatSubmit="HH:i",self.$time=$('<input type="text"/>').attr("placeholder",self.options.placeholderTime).attr("data-value",timeValue).addClass(self.options.classTimeName).appendTo($("<div/>").addClass(self.options.classTimeWrapperName).appendTo(self.$wrapper)).pickatime($.extend(!0,{},self.options.time,{onSet:function(e){void 0!==e.select&&(self.$time.attr("data-value",e.select),!1!==self.options.date&&""===self.$date.attr("data-value")||self.updateValue.call(self)),e.hasOwnProperty("clear")&&(self.$el.val(""),self.$time.attr("data-value",""))}})),"string"==typeof timeValue&&"00"===timeValue.substring(0,2)&&(self.$time.pickatime("picker").set("select",timeValue.split(":")),self.$time.attr("data-value",timeValue))),!1!==self.options.date&&!1!==self.options.time&&self.options.timezone&&(self.$separator=$("<span/>").addClass(self.options.classSeparatorName).html(" "===self.options.separator?"&nbsp;":self.options.separator).appendTo(self.$wrapper)),null!==self.options.timezone){self.$timezone=$('<input type="text"/>').addClass(self.options.classTimezoneName).appendTo($("<div/>").addClass(self.options.classTimezoneWrapperName).appendTo(self.$wrapper)).patternSelect2($.extend(!0,{placeholder:self.options.placeholderTimezone,width:"10em"},self.options.timezone,{multiple:!1})).on("change",function(e){void 0!==e.val&&(self.$timezone.attr("data-value",e.val),!1!==self.options.date&&""===self.$date.attr("data-value")||!1!==self.options.time&&""===self.$time.attr("data-value")||self.updateValue.call(self))});var isInList,defaultTimezone=self.options.timezone.default;if(defaultTimezone)self.options.timezone.data.some(function(obj){return isInList=obj.text===self.options.timezone.default}),isInList&&(self.$timezone.attr("data-value",defaultTimezone),self.$timezone.parent().find(".select2-chosen").text(defaultTimezone));1===self.options.timezone.data.length&&(self.$timezone.attr("data-value",self.options.timezone.data[0].text),self.$timezone.parent().find(".select2-chosen").text(self.options.timezone.data[0].text),self.$timezone.select2("enable",!1))}utils.bool(self.options.today)&&(self.$now=$('<button type="button" class="btn btn-xs btn-info" title="'+self.options.today+'"><span class="glyphicon glyphicon-time"></span></button>').addClass(self.options.classNowName).on("click",function(e){e.preventDefault();var now=new Date;self.$date&&self.$date.data("pickadate").set("select",now),self.$time&&self.$time.data("pickatime").set("select",now),self.emit("updated")}).appendTo(self.$wrapper)),utils.bool(self.options.clear)&&(self.$clear=$('<button type="button" class="btn btn-xs btn-danger" title="'+self.options.clear+'"><span class="glyphicon glyphicon-trash"></span></button>').addClass(self.options.classClearName).on("click",function(e){e.preventDefault(),self.$date&&self.$date.data("pickadate").clear(),self.$time&&self.$time.data("pickatime").clear(),self.emit("updated")}).appendTo(self.$wrapper))},updateValue:function(){var value="";if(!1!==this.options.date){var date=this.$date.data("pickadate").component,dateValue=this.$date.data("pickadate").get("select"),formatDate=date.formats.toString;dateValue&&(value+=formatDate.apply(date,[this.options.date.formatSubmit,dateValue]))}if(!1!==this.options.date&&!1!==this.options.time&&(value+=" "),!1!==this.options.time){var time=this.$time.data("pickatime").component,timeValue=this.$time.data("pickatime").get("select"),formatTime=time.formats.toString;timeValue&&(value+=formatTime.apply(time,["HH:i",timeValue]))}if(null!==this.options.timezone){var timezone=" "+this.$timezone.attr("data-value");timezone&&(value+=timezone)}this.$el.val(value),this.emit("updated")}})}),define("text!mockup-patterns-relateditems-url/templates/breadcrumb.xml",[],function(){return'<span class="separator">/<span>\n<a href="<%- path %>" class="crumb"><%- text %></a>\n'}),define("text!mockup-patterns-relateditems-url/templates/favorite.xml",[],function(){return'<li><a href="<%- path %>" class="fav" aria-labelledby="blip"><%- title %></a></li>\n'}),define("text!mockup-patterns-relateditems-url/templates/recentlyused.xml",[],function(){return'<div class="pattern-relateditems-recentlyused">\n  <a class="pattern-relateditems-recentlyused-select" data-uid="<%- UID %>">\n    <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon "><br><% } %>\n    <span class="pattern-relateditems-recentlyused-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n    <span class="pattern-relateditems-recentlyused-path"><%- path %></span>\n  </a>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/result.xml",[],function(){return'<div class="pattern-relateditems-result<% if (oneLevelUp) { %> one-level-up<% } %>">\n  <span class="pattern-relateditems-buttons">\n  <% if (is_folderish) { %>\n    <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="<%- open_folder %>"></a>\n  <% } %>\n  </span>\n  <a class="pattern-relateditems-result-select<% if (selectable) { %> selectable<% } else if (browsing && is_folderish) { %> pattern-relateditems-result-browse<% } %><% if (oneLevelUp) { %> one-level-up<% } %>" data-path="<%- path %>">\n    <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon "><br><% } %>\n    <span class="pattern-relateditems-result-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n    <span class="pattern-relateditems-result-path"><%- path %></span>\n  </a>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/selection.xml",[],function(){return'<span class="pattern-relateditems-item">\n  <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon"><br><% } %>\n  <span class="pattern-relateditems-item-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n  <span class="pattern-relateditems-item-path"><%- path %></span>\n</span>\n'}),define("text!mockup-patterns-relateditems-url/templates/toolbar.xml",[],function(){return'<% if (mode!==\'auto\') { %>\n<div class="btn-group mode-selector" role="group">\n  <button type="button" class="mode search btn <% if (mode==\'search\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- searchModeText %></button>\n  <button type="button" class="mode browse btn <% if (mode==\'browse\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- browseModeText %></button>\n</div>\n<% } %>\n<div class="path-wrapper">\n  <span class="pattern-relateditems-path-label"><%- searchText %></span>\n  <a class="crumb" href="/"><span class="glyphicon glyphicon-home"/></a>\n  <%= items %>\n</div>\n<div class="controls pull-right">\n\n  <% if (recentlyUsedItems) { %>\n  <div class="recentlyUsed dropdown pull-right">\n    <button type="button" class="recentlyUsed dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-time"/>\n      <%- recentlyUsedText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= recentlyUsedItems %>\n    </ul>\n  </div>\n  <% } %>\n\n  <% if (favorites.length > 0) { %>\n  <div class="favorites dropdown pull-right">\n    <button type="button" class="favorites dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-star"/>\n      <%- favText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= favItems %>\n    </ul>\n  </div>\n  <% } %>\n</div>\n'}),define("mockup-patterns-relateditems",["jquery","underscore","pat-base","mockup-patterns-select2","mockup-ui-url/views/button","mockup-utils","pat-registry","translate","text!mockup-patterns-relateditems-url/templates/breadcrumb.xml","text!mockup-patterns-relateditems-url/templates/favorite.xml","text!mockup-patterns-relateditems-url/templates/recentlyused.xml","text!mockup-patterns-relateditems-url/templates/result.xml","text!mockup-patterns-relateditems-url/templates/selection.xml","text!mockup-patterns-relateditems-url/templates/toolbar.xml","bootstrap-dropdown"],function($,_,Base,Select2,ButtonView,utils,registry,_t,BreadcrumbTemplate,FavoriteTemplate,RecentlyUsedTemplate,ResultTemplate,SelectionTemplate,ToolbarTemplate){"use strict";return Base.extend({name:"relateditems",trigger:".pat-relateditems",parser:"mockup",currentPath:void 0,selectedUIDs:[],openAfterInit:void 0,defaults:{vocabularyUrl:null,attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],basePath:"",pageSize:10,browsing:void 0,closeOnSelect:!0,contextPath:void 0,dropdownCssClass:"pattern-relateditems-dropdown",favorites:[],recentlyUsed:!1,recentlyUsedMaxItems:20,recentlyUsedKey:"relateditems_recentlyused",maximumSelectionSize:-1,minimumInputLength:0,mode:"auto",orderable:!0,pathOperator:"plone.app.querystring.operation.string.path",rootPath:"/",rootUrl:"",scanSelection:!1,selectableTypes:null,separator:",",sortOn:null,sortOrder:"ascending",tokenSeparators:[","," "],upload:!1,uploadAllowView:void 0,width:"100%",breadcrumbTemplate:BreadcrumbTemplate,breadcrumbTemplateSelector:null,favoriteTemplate:FavoriteTemplate,favoriteTemplateSelector:null,recentlyusedTemplate:RecentlyUsedTemplate,recentlyusedTemplateSelector:null,resultTemplate:ResultTemplate,resultTemplateSelector:null,selectionTemplate:SelectionTemplate,selectionTemplateSelector:null,toolbarTemplate:ToolbarTemplate,toolbarTemplateSelector:null,multiple:!0},recentlyUsed:function(filterSelectable){var ret=utils.storage.get(this.options.recentlyUsedKey)||[];ret=ret.slice(ret.length-1e3,ret.length),filterSelectable&&ret.filter(this.isSelectable.bind(this));var max=parseInt(this.options.recentlyUsedMaxItems,10);return max&&(ret=ret.slice(ret.length-max,ret.length)),ret},applyTemplate:function(tpl,item){var template;this.options[tpl+"TemplateSelector"]&&(template=$(this.options[tpl+"TemplateSelector"]).html())||(template=this.options[tpl+"Template"]);var options=$.extend(!0,{},this.options,item,{browsing:this.browsing,open_folder:_t("Open folder")});return options._item=item,_.template(template)(options)},setAjax:function(){var ajax={url:this.options.vocabularyUrl,dataType:"JSON",quietMillis:500,data:function(term,page){var criterias=[];term&&(term="*"+term+"*",criterias.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:term})),!this.browsing&&this.options.selectableTypes&&criterias.push({i:"portal_type",o:"plone.app.querystring.operation.selection.any",v:this.options.selectableTypes}),criterias.push({i:"path",o:this.options.pathOperator,v:this.options.rootPath+this.currentPath+(this.browsing?"::1":"")});var sort_on=this.options.sortOn,sort_order=sort_on?this.options.sortOrder:null;return this.browsing&&null===sort_on&&(sort_on="getObjPositionInParent",sort_order="ascending"),{query:JSON.stringify({criteria:criterias,sort_on:sort_on,sort_order:sort_order}),attributes:JSON.stringify(this.options.attributes),batch:JSON.stringify({page:page||1,size:this.options.pageSize})}}.bind(this),results:function(data,page){var more=page*this.options.pageSize<data.total,results=data.results;this.selectedUIDs=(this.$el.select2("data")||[]).map(function(el){return el.UID}),results=results.filter(function(item){return!!(this.browsing&&item.is_folderish||this.isSelectable(item)&&-1==this.selectedUIDs.indexOf(item.UID))}.bind(this));var path=this.currentPath.split("/");return 1===page&&this.browsing&&1<path.length&&"/"!==this.currentPath&&(results=[{oneLevelUp:!0,Title:_t("One level up"),path:path.slice(0,path.length-1).join("/")||"/",is_folderish:!0,selectable:!1}].concat(results)),{results:results,more:more}}.bind(this)};this.options.ajax=ajax},renderToolbar:function(){var html,self=this,paths=self.currentPath.split("/"),itemPath="",itemsHtml="";_.each(paths,function(node){if(""!==node){var item={};item.path=itemPath=itemPath+"/"+node,item.text=node,itemsHtml+=self.applyTemplate("breadcrumb",item)}});var favoritesHtml="";_.each(self.options.favorites,function(item){var item_copy=_.clone(item);item_copy.path=item_copy.path.substr(self.options.rootPath.length)||"/",favoritesHtml+=self.applyTemplate("favorite",item_copy)});var recentlyUsedHtml="";if(self.options.recentlyUsed){var recentlyUsed=self.recentlyUsed(!0);_.each(recentlyUsed.reverse(),function(item){recentlyUsedHtml+=self.applyTemplate("recentlyused",item)})}function initUploadView(UploadView,disabled){var uploadButtonId="upload-"+utils.generateId(),uploadButton=new ButtonView({id:uploadButtonId,title:_t("Upload"),tooltip:_t("Upload files"),icon:"upload"});disabled&&uploadButton.disable(),$(".controls",self.$toolbar).prepend(uploadButton.render().el),self.uploadView=new UploadView({triggerView:uploadButton,app:self}),$("#btn-"+uploadButtonId,self.$toolbar).append(self.uploadView.render().el)}html=self.applyTemplate("toolbar",{items:itemsHtml,favItems:favoritesHtml,favText:_t("Favorites"),searchText:_t("Current path:"),searchModeText:_t("Search"),browseModeText:_t("Browse"),recentlyUsedItems:recentlyUsedHtml,recentlyUsedText:_t("Recently Used")}),self.$toolbar.html(html),$(".dropdown-toggle",self.$toolbar).dropdown(),$("button.mode.search",self.$toolbar).on("click",function(e){e.preventDefault(),self.browsing?($("button.mode.search",self.$toolbar).toggleClass("btn-primary btn-default"),$("button.mode.browse",self.$toolbar).toggleClass("btn-primary btn-default"),self.browsing=!1,0<self.$el.select2("data").length&&(self.openAfterInit=!0),self.openAfterInit||(self.$el.select2("close"),self.$el.select2("open"))):(self.$el.select2("close"),self.$el.select2("open"))}),$("button.mode.browse",self.$toolbar).on("click",function(e){e.preventDefault(),self.browsing?(self.$el.select2("close"),self.$el.select2("open")):($("button.mode.search",self.$toolbar).toggleClass("btn-primary btn-default"),$("button.mode.browse",self.$toolbar).toggleClass("btn-primary btn-default"),self.browsing=!0,0<self.$el.select2("data").length&&(self.openAfterInit=!0),self.openAfterInit||(self.$el.select2("close"),self.$el.select2("open")))}),$("a.crumb",self.$toolbar).on("click",function(e){e.preventDefault(),self.browseTo($(this).attr("href"))}),$("a.fav",self.$toolbar).on("click",function(e){e.preventDefault(),self.browseTo($(this).attr("href"))}),self.options.recentlyUsed&&$(".pattern-relateditems-recentlyused-select",self.$toolbar).on("click",function(event){event.preventDefault();var uid=$(this).data("uid"),item=self.recentlyUsed().filter(function(it){return it.UID===uid});if(0<item.length&&(item=item[0],self.selectItem(item),0<self.options.maximumSelectionSize&&self.$el.select2("data").length>=self.options.maximumSelectionSize))return}),self.options.upload&&utils.featureSupport.dragAndDrop()&&utils.featureSupport.fileApi()&&require(["mockup-patterns-relateditems-upload"],function(UploadView){self.options.uploadAllowView?$.ajax({url:self.options.uploadAllowView,dataType:"JSON",data:{path:self.options.rootPath+self.currentPath},type:"GET",success:function(result){initUploadView(UploadView,!result.allowUpload)}}):initUploadView(UploadView)})},browseTo:function(path){this.emit("before-browse"),this.currentPath=path,this.$el.select2("close"),this.renderToolbar(),this.$el.select2("open"),this.emit("after-browse")},selectItem:function(item){this.emit("selecting");var data=this.$el.select2("data");if(data.push(item),this.$el.select2("data",data,!0),this.options.recentlyUsed){var recentlyUsed=this.recentlyUsed(),alreadyPresent=recentlyUsed.filter(function(it){return it.UID===item.UID});0<alreadyPresent.length&&recentlyUsed.splice(recentlyUsed.indexOf(alreadyPresent[0]),1),recentlyUsed.push(item),utils.storage.set(this.options.recentlyUsedKey,recentlyUsed)}this.emit("selected")},deselectItem:function(item){this.emit("deselecting");var data=this.$el.select2("data");_.each(data,function(obj,i){obj.UID===item.UID&&data.splice(i,1)}),this.$el.select2("data",data,!0),this.emit("deselected")},isSelectable:function(item){return!1!==item.selectable&&(null===this.options.selectableTypes||-1<_.indexOf(this.options.selectableTypes,item.portal_type))},init:function(){var self=this;self.browsing="search"!==self.options.mode,self.options.rootPath=self.options.rootPath.replace(/\/$/,""),self.currentPath=self.options.basePath.substr(self.options.rootPath.length)||"/",self.setAjax(),self.$el.wrap('<div class="pattern-relateditems-container" />'),self.$container=self.$el.parents(".pattern-relateditems-container"),self.$container.width(self.options.width),Select2.prototype.initializeValues.call(self),Select2.prototype.initializeTags.call(self),self.options.formatSelection=function(item){item=$.extend(!0,{Title:"",getIcon:"",getURL:"",path:"",portal_type:"",review_state:""},item);var $selection=$(self.applyTemplate("selection",item));if(self.options.scanSelection&&registry.scan($selection),1==self.options.maximumSelectionSize){var itemPath=item.path,path_split=itemPath.split("/");itemPath=(path_split=path_split.slice(0,-1)).join("/"),self.currentPath=itemPath,self.renderToolbar()}return $selection},Select2.prototype.initializeOrdering.call(self),self.options.formatResult=function(item){item.selectable=self.isSelectable(item),item=$.extend(!0,{Title:"",getIcon:"",getURL:"",is_folderish:!1,oneLevelUp:!1,path:"",portal_type:"",review_state:"",selectable:!1},item),-1!=self.selectedUIDs.indexOf(item.UID)&&(item.selectable=!1);var result=$(self.applyTemplate("result",item));return $(".pattern-relateditems-result-select",result).on("click",function(event){if(event.preventDefault(),$(this).is(".selectable")){var $parent=$(this).parents(".pattern-relateditems-result");if($parent.is(".pattern-relateditems-active"))$parent.removeClass("pattern-relateditems-active"),self.deselectItem(item);else{if(0<self.options.maximumSelectionSize)self.$el.select2("data").length>=self.options.maximumSelectionSize&&self.$el.select2("close");self.selectItem(item),$parent.addClass("pattern-relateditems-active"),self.options.closeOnSelect&&self.$el.select2("close")}}}),$(".pattern-relateditems-result-browse",result).on("click",function(event){event.preventDefault(),event.stopPropagation();var path=$(this).data("path");self.browseTo(path)}),$(result)},self.options.initSelection=function(element,callback){var value=$(element).val();if(""!==value){var ids=value.split(self.options.separator);new utils.QueryHelper($.extend(!0,{},self.options,{pattern:self})).search("UID","plone.app.querystring.operation.list.contains",ids,function(data){var results=data.results.reduce(function(prev,item){return prev[item.UID]=item,prev},{});try{callback(ids.map(function(uid){return results[uid]}).filter(function(item){return void 0!==item}))}catch(e){console.log(data)}self.openAfterInit&&(self.$el.select2("open"),self.openAfterInit=void 0)},!1)}},self.options.tokenizer=function(input){"auto"===this.options.mode&&(this.browsing=!input)}.bind(this),self.options.id=function(item){return item.UID},Select2.prototype.initializeSelect2.call(self),self.$toolbar=$('<div class="toolbar ui-offset-parent" />'),self.$container.prepend(self.$toolbar),self.$el.on("select2-selecting",function(event){event.preventDefault()}),self.renderToolbar()}})}),define("mockup-patterns-querystring",["jquery","pat-base","mockup-patterns-select2","mockup-patterns-pickadate","mockup-patterns-relateditems","select2","translate","underscore"],function($,Base,Select2,PickADate,relatedItems,undefined,_t,_){"use strict";var Criteria=function(){this.init.apply(this,arguments)};return Criteria.prototype={defaults:{indexWidth:"20em",remove:"",classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear",classDepthName:"querystring-criteria-depth"},init:function($el,options,indexes,index,operator,value,baseUrl,patternDateOptions,patternAjaxSelectOptions,patternRelateditemsOptions){var self=this;self.options=$.extend(!0,{},self.defaults,options),self.indexes=indexes,self.indexGroups={},self.baseUrl=baseUrl,self.advanced=!1,self.initial=value,self.$wrapper=$("<div/>").addClass(self.options.classWrapperName).appendTo($el),self.patternDateOptions=patternDateOptions||{},self.patternAjaxSelectOptions=patternAjaxSelectOptions||{},self.patternRelateditemsOptions=patternRelateditemsOptions||{},self.patternAjaxSelectOptions=$.extend({width:"250px"},self.patternAjaxSelectOptions),self.patternRelateditemsOptions=$.extend({vocabularyUrl:self.baseUrl+"@@getVocabulary?name=plone.app.vocabularies.Catalog&field=relatedItems",width:"400px"},self.patternRelateditemsOptions),self.patternRelateditemsOptions.maximumSelectionSize=1,self.$remove=$("<div>"+self.options.remove+"</div>").addClass(self.options.classRemoveName).appendTo(self.$wrapper).on("click",function(e){self.remove()}),self.$index=$("<select><option></option></select>").attr("placeholder",_t("Select criteria")),$.each(self.indexes,function(value,options){options.enabled&&(self.indexGroups[options.group]||(self.indexGroups[options.group]=$("<optgroup/>").attr("label",options.group).appendTo(self.$index)),self.indexGroups[options.group].append($("<option/>").attr("value",value).html(options.title)))}),self.$wrapper.append($("<div/>").addClass(self.options.classIndexName).append(self.$index)),self.$index.patternSelect2({width:self.options.indexWidth,placeholder:_t("Select criteria")}).on("change",function(e){self.removeValue(),self.createOperator(e.val),self.createClear(),self.trigger("index-changed")}),void 0!==index&&(self.$index.select2("val",index),self.createOperator(index,operator,value),self.createClear()),self.trigger("create-criteria")},appendOperators:function(index){var self=this;self.$operator=$("<select/>"),self.indexes[index]&&_.each(self.indexes[index].operations,function(value){var options=self.indexes[index].operators[value];$("<option/>").attr("value",value).html(options.title).appendTo(self.$operator)}),self.$wrapper.append($("<div/>").addClass(self.options.classOperatorName).append(self.$operator)),self.$operator.patternSelect2({width:"10em"}).on("change",function(e){self.createValue(index),self.createClear(),self.trigger("operator-changed")})},convertPathOperators:function(oval){return this.advanced?oval:oval=oval.replace("advanced","relativePath").replace("path","relativePath")},createPathOperators:function(){if(this.advanced)this.resetPathOperators();else{var newOperator="plone.app.querystring.operation.string.advanced";void 0===this.indexes.path.operators[newOperator]&&(this.indexes.path.operations.push(newOperator),this.indexes.path.operators[newOperator]={title:"Advanced",widget:"AdvancedPathWidget",description:"Enter a custom path string",operation:"plone.app.querystring.queryparser._relativePath"}),$.each(this.indexes.path.operators,function(key,value){var options=value;0<key.indexOf("absolute")?options.title="Custom":0<key.indexOf("relative")?options.title="Parent (../)":0<key.indexOf("advanced")?options.title="Advanced Mode":(options.title="Current (./)",options.widget="RelativePathWidget")})}},resetPathOperators:function(){$.each(this.indexes.path.operators,function(key,value){var options=value;0<key.indexOf("absolute")?options.title="Absolute Path":0<key.indexOf("relative")?options.title="Relative Path":0<key.indexOf("advanced")?options.title="Simple Mode":(options.title="Navigation Path",options.widget="ReferenceWidget")})},createOperator:function(index,operator,value){this.removeOperator(),this.createPathOperators(),"path"===index&&value&&".::1"!==value&&"..::1"!==value&&!value.match(/^[0-9a-f]{32}::-?[0-9]+$/)&&(this.advanced=!0,this.resetPathOperators()),this.appendOperators(index),void 0===operator&&(operator=this.$operator.select2("val")),this.$operator.select2("val",operator),this.createValue(index,value),this.trigger("create-operator")},createValue:function(index,value){var self=this,widget=self.indexes[index].operators[self.$operator.val()].widget,$wrapper=$("<div/>").addClass(self.options.classValueName).appendTo(self.$wrapper);self.removeValue();if("StringWidget"===widget)self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).val(value).appendTo($wrapper).change(function(){self.trigger("value-changed")});else if("DateWidget"===widget)self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).attr("data-pat-pickadate",JSON.stringify(self.patternDateOptions)).val(value).appendTo($wrapper).patternPickadate().on("updated.pickadate.patterns",function(){self.trigger("value-changed")});else if("DateRangeWidget"===widget){var startwrap=$("<span/>").appendTo($wrapper),val1="",val2="";value&&(val1=value[0]?value[0]:"",val2=value[1]?value[1]:"");var startdt=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).addClass(self.options.classValueName+"-"+widget+"-start").attr("data-pat-pickadate",JSON.stringify(self.patternDateOptions)).val(val1).appendTo(startwrap).patternPickadate().on("updated.pickadate.patterns",function(){self.trigger("value-changed")});$wrapper.append($("<span/>").html(_t("to")).addClass(self.options.classBetweenDtName));var endwrap=$("<span/>").appendTo($wrapper),enddt=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).addClass(self.options.classValueName+"-"+widget+"-end").attr("data-pat-pickadate",JSON.stringify(self.patternDateOptions)).val(val2).appendTo(endwrap).patternPickadate().on("updated.pickadate.patterns",function(){self.trigger("value-changed")});self.$value=[startdt,enddt]}else if("RelativeDateWidget"===widget)self.$value=$('<input type="text"/>').after($("<span/>").html(_t("days"))).addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).change(function(){self.trigger("value-changed")});else if("AdvancedPathWidget"===widget)self.advanced?self.advanced=!1:self.advanced=!0,self.createPathOperators(),self.removeOperator(),self.appendOperators(index),self.createValue(index);else if("RelativePathWidget"===widget)self.advanced?self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).val(value).change(function(){self.trigger("value-changed")}):(value?".::1"===value&&self.$operator.select2("val","plone.app.querystring.operation.string.path"):(value=".::1",0<self.$operator.val().indexOf("relativePath")&&(value="..::1")),self.$value=$('<input type="hidden"/>').addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).val(value));else if("ReferenceWidget"===widget)if(self.advanced)self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).val(value).appendTo($wrapper).change(function(){self.trigger("value-changed")});else{var pathAndDepth=["",-1];void 0!==value&&(pathAndDepth=value.split("::")),self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).val(pathAndDepth[0]).patternRelateditems(self.patternRelateditemsOptions).change(function(){self.trigger("value-changed")}),self.$value.parent().after(function(selected){for(var select="<div class='depth-select-box'><label for='depth-select'>Depth</label><select name='depth-select' class='"+self.options.classDepthName+"'><option value='-1' selected='selected'>Unlimited</option>",i=0;i<=10;i+=1)select+="<option value="+i+" ",""+i===selected&&(select+="selected='selected' "),select+=">"+i+"</option>";return $(select+="</select></div>").change(function(){self.trigger("depth-changed")})}(pathAndDepth[1])),self.$value.parents("."+self.options.classValueName).addClass("break-line")}else"MultipleSelectionWidget"===widget&&(self.$value=$("<select/>").prop("multiple",!0).addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).change(function(){self.trigger("value-changed")}),self.indexes[index]&&$.each(self.indexes[index].values,function(value,options){$("<option/>").attr("value",value).html(options.title).appendTo(self.$value)}),self.$value.patternSelect2(self.patternAjaxSelectOptions));if(void 0!==value&&void 0!==self.$value)if($.isArray(self.$value))$.each(value,function(i,v){self.$value[i].select2("val",v)});else{var trimmedValue=value;"string"==typeof value&&"RelativePathWidget"!==widget&&(trimmedValue=value.replace(/::-?[0-9]+/,"")),self.$value.select2("val",trimmedValue)}self.trigger("create-value")},createClear:function(){this.removeClear(),this.$clear=$("<div/>").addClass(this.options.classClearName).appendTo(this.$wrapper)},remove:function(){this.trigger("remove"),this.$remove.remove(),this.$index.parent().remove(),this.removeOperator(),this.removeValue(),this.removeClear(),this.$wrapper.remove()},removeClear:function(){this.trigger("remove-clear"),this.$clear&&this.$clear.remove()},removeOperator:function(){this.trigger("remove-operator"),this.$operator&&this.$operator.parent().remove()},removeValue:function(){this.trigger("remove-value"),this.$value&&($.isArray(this.$value)?this.$value[0].parents(".querystring-criteria-value").remove():this.$value.parents(".querystring-criteria-value").remove())},buildQueryPart:function(){var ival=this.$index.select2("val");if(""===ival)return"";var istr="query.i:records="+ival;if(void 0===this.$operator)return"";var oval=this.$operator.val();if("path"===ival){if(0<oval.indexOf("advanced"))return"";oval=this.convertPathOperators(oval)}var ostr="query.o:records="+oval,vstrbase="query.v:records=",vstr=[];if(void 0===this.$value)vstr.push(vstrbase);else if($.isArray(this.$value))$.each(this.$value,function(i,v){vstr.push("query.v:records:list="+$(this).val())});else if($.isArray(this.$value.val()))$.each(this.$value.val(),function(i,v){vstr.push("query.v:records:list="+v)});else{var str=vstrbase+this.$value.val();"path"===ival&&""!==this.$value.val()?str+=this.getDepthString():void 0!==this.initial&&(str=vstrbase+this.initial,delete this.initial),vstr.push(str)}return istr+"&"+ostr+"&"+vstr.join("&")},getJSONListStr:function(){var ival=this.$index.select2("val");if(""===ival)return"";if(void 0===this.$operator)return"";var oval=this.$operator.val();if("path"===ival){if(0<oval.indexOf("advanced"))return"";oval=this.convertPathOperators(oval)}var vval,varr=[];if($.isArray(this.$value))$.each(this.$value,function(i,v){varr.push($(this).val())});else if(void 0!==this.$value){var value=this.$value.val();if("path"===ival&&value){var depth=this.getDepthString();depth&&(value+=depth)}varr.push(value)}return vval=1<varr.length?'["'+varr.join('","')+'"]':1===varr.length?JSON.stringify(varr[0]):'""',void 0!==this.indexes[ival].operators[oval]?'{"i":"'+ival+'", "o":"'+oval+'", "v":'+vval+"}":void 0},getDepthString:function(){var out="",depth=$("."+this.options.classDepthName).val();return""!==depth&&void 0!==depth&&(out+="::"+depth),out},trigger:function(name){this.$wrapper.trigger(name+"-criteria.querystring.patterns",[this])},on:function(name,callback){this.$wrapper.on(name+"-criteria.querystring.patterns",callback)}},Base.extend({name:"querystring",trigger:".pat-querystring",parser:"mockup",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",patternDateOptions:{},patternAjaxSelectOptions:{},patternRelateditemsOptions:{},classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:function(){var self=this;self.$el.hide(),self.$wrapper=$("<div/>"),self.$el.after(self.$wrapper),self.initialized=!1,self.options.indexOptionsUrl?$.ajax({url:self.options.indexOptionsUrl,success:function(data){self.options.indexes=data.indexes,self.options.sortable_indexes=data.sortable_indexes,self._init()},error:function(xhr){}}):self._init()},_init:function(){var self=this;self.$criteriaWrapper=$("<div/>").addClass(self.options.classWrapperName).appendTo(self.$wrapper),self.$sortWrapper=$("<div/>").addClass(self.options.classSortWrapperName).appendTo(self.$wrapper),"false"===self.options.showPreviews&&(self.options.showPreviews=!1),self.options.showPreviews&&(self.$previewWrapper=$("<div/>").addClass(self.options.classPreviewWrapperName).appendTo(self.$wrapper),$("<div/>").addClass(self.options.classPreviewTitleName).html(_t("Preview")).appendTo(self.$previewWrapper),$("<div/>").addClass(self.options.classPreviewDescriptionName).html(_t("Preview of at most 10 items")).appendTo(self.$previewWrapper)),self.criterias=[],self.$el.val()&&$.each(JSON.parse(self.$el.val()),function(i,item){self.createCriteria(item.i,item.o,item.v)}),self.createCriteria(),self.createSort(),self.options.showPreviews&&self.refreshPreviewEvent(),self.$el.trigger("initialized"),self.initialized=!0},createCriteria:function(index,operator,value){var self=this,baseUrl=self.options.indexOptionsUrl.replace(/(@@.*)/g,""),criteria=new Criteria(self.$criteriaWrapper,self.options.criteria,self.options.indexes,index,operator,value,baseUrl,self.options.patternDateOptions,self.options.patternAjaxSelectOptions,self.options.patternRelateditemsOptions);criteria.on("remove",function(e){self.criterias[self.criterias.length-1]===criteria&&self.createCriteria()}),criteria.on("index-changed",function(e){self.criterias[self.criterias.length-1]===criteria&&self.createCriteria()});var _doupdates=function(){self.refreshPreviewEvent(),self.updateValue()},_updateTimeout=-1,doupdates=function(){clearTimeout(_updateTimeout),_updateTimeout=setTimeout(_doupdates,100)};criteria.on("remove",function(e,criteria){-1!==self.criterias.indexOf(criteria)&&self.criterias.splice(self.criterias.indexOf(criteria),1),doupdates()}),criteria.on("remove-clear",doupdates),criteria.on("remove-operator",doupdates),criteria.on("remove-value",doupdates),criteria.on("index-changed",doupdates),criteria.on("operator-changed",doupdates),criteria.on("create-criteria",doupdates),criteria.on("create-operator",doupdates),criteria.on("create-value",doupdates),criteria.on("value-changed",doupdates),criteria.on("depth-changed",doupdates),self.criterias.push(criteria)},createSort:function(){var self=this,existingSortOn=$('[id$="-sort_on"]').filter('[id^="formfield-"]'),existingSortOrder=$('[id$="-sort_reversed"]').filter('[id^="formfield-"]');for(var key in $("<span/>").addClass(self.options.classSortLabelName).html(_t("Sort on")).appendTo(self.$sortWrapper),self.$sortOn=$("<select/>").attr("name","sort_on").appendTo(self.$sortWrapper).change(function(){self.refreshPreviewEvent.call(self),$('[id$="sort_on"]',existingSortOn).val($(this).val())}),self.$sortOn.append($('<option value="">No sorting</option>')),self.options.sortable_indexes)self.$sortOn.append($("<option/>").attr("value",key).html(self.options.indexes[key].title));if(self.$sortOn.patternSelect2({width:"150px"}),self.$sortOrder=$('<input type="checkbox" />').attr("name","sort_reversed:boolean").change(function(){self.refreshPreviewEvent.call(self),$(this).prop("checked")?$('.option input[type="checkbox"]',existingSortOrder).prop("checked",!0):$('.option input[type="checkbox"]',existingSortOrder).prop("checked",!1)}),$("<span/>").addClass(self.options.classSortReverseName).appendTo(self.$sortWrapper).append(self.$sortOrder).append($("<span/>").html(_t("Reversed Order")).addClass(self.options.classSortReverseLabelName)),1<=existingSortOn.length&&1<=existingSortOrder.length){var reversed=$('.option input[type="checkbox"]',existingSortOrder).prop("checked"),sortOn=$('[id$="-sort_on"]',existingSortOn).val();reversed&&self.$sortOrder.prop("checked",!0),self.$sortOn.select2("val",sortOn),$(existingSortOn).hide(),$(existingSortOrder).hide()}},refreshPreviewEvent:function(value){var self=this;if(self.options.showPreviews){void 0!==self._previewXhr&&self._previewXhr.abort(),void 0!==self.$previewPane&&self.$previewPane.remove();var query=[];$.each(self.criterias,function(i,criteria){var querypart=criteria.buildQueryPart();""!==querypart&&query.push(querypart)}),self.$previewPane=$("<div/>").addClass(self.options.classPreviewName).appendTo(self.$previewWrapper),query.length<=0?$("<div/>").addClass(self.options.classPreviewCountWrapperName).html("No results to preview").prependTo(self.$previewPane):(query.push("sort_on="+self.$sortOn.val()),self.$sortOrder.prop("checked")&&query.push("sort_order=reverse"),self._previewXhr=$.get(self.options.previewURL+"?"+query.join("&")).done(function(data,stat){$("<div/>").addClass(self.options.classPreviewResultsWrapperName).html(data).appendTo(self.$previewPane)}))}},updateValue:function(){var criteriastrs=[];$.each(this.criterias,function(i,criteria){var jsonstr=criteria.getJSONListStr();""!==jsonstr&&criteriastrs.push(jsonstr)});this.$el.val();var val="["+criteriastrs.join(",")+"]";this.$el.val(val),this.$el.trigger("change")}})}),define("mockup-patterns-structure-url/js/views/textfilter",["jquery","underscore","mockup-ui-url/views/base","mockup-ui-url/views/button","mockup-ui-url/views/popover","mockup-patterns-querystring","translate"],function($,_,BaseView,ButtonView,PopoverView,QueryString,_t){"use strict";return BaseView.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:_.template('<div class="input-group"><input type="text" class="form-control search-query" placeholder="<%- _t("Filter") %>"><span class="input-group-btn"></span></div>'),popoverContent:_.template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,initialize:function(options){BaseView.prototype.initialize.apply(this,[options]),this.app=this.options.app},render:function(){this.$el.html(this.template({_t:_t})),this.button=new ButtonView({tooltip:_t("Query"),icon:"search"}),this.popover=new PopoverView({triggerView:this.button,id:"structure-query",title:_.template(_t("Query")),content:this.popoverContent,placement:"left"}),this.$(".input-group-btn").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new QueryString(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1});var self=this;return self.queryString.$el.on("change",function(){self.timeoutId&&clearTimeout(self.timeoutId),self.timeoutId=setTimeout(function(){var criterias=$.parseJSON(self.$queryString.val());self.app.additionalCriterias=criterias,self.app.collection.currentPage=1,self.app.collection.pager()},this.keyupDelay)}),self.queryString.$el.on("initialized",function(){self.queryString.$sortOn.on("change",function(){self.app.sort_on=self.queryString.$sortOn.val(),self.app.collection.currentPage=1,self.app.collection.pager()}),self.queryString.$sortOrder.change(function(){self.queryString.$sortOrder[0].checked?self.app.sort_order="reverse":self.app.sort_order="ascending",self.app.collection.currentPage=1,self.app.collection.pager()})}),this},filter:function(event){var self=this;self.timeoutId&&clearTimeout(self.timeoutId),self.timeoutId=setTimeout(function(){self.term=$(event.currentTarget).val(),self.app.collection.currentPage=1,self.app.collection.pager(),self.term||self.app.setStatus()},this.keyupDelay)}})}),function(factory){"function"==typeof define&&define.amd?define("dropzone",["jquery"],factory):factory(jQuery)}(function(jQuery){var module={exports:{}};return function(){var Dropzone,Emitter,camelize,contentLoaded,detectVerticalSquash,drawImageIOSFix,noop,without,__slice=[].slice,__hasProp={}.hasOwnProperty;noop=function(){},Emitter=function(){function Emitter(){}return Emitter.prototype.addEventListener=Emitter.prototype.on,Emitter.prototype.on=function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this},Emitter.prototype.emit=function(){var args,callbacks,event,_i,_len;if(event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],this._callbacks=this._callbacks||{},callbacks=this._callbacks[event])for(_i=0,_len=callbacks.length;_i<_len;_i++)callbacks[_i].apply(this,args);return this},Emitter.prototype.removeListener=Emitter.prototype.off,Emitter.prototype.removeAllListeners=Emitter.prototype.off,Emitter.prototype.removeEventListener=Emitter.prototype.off,Emitter.prototype.off=function(event,fn){var callbacks,i,_i,_len;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(callbacks=this._callbacks[event]))return this;if(1===arguments.length)return delete this._callbacks[event],this;for(i=_i=0,_len=callbacks.length;_i<_len;i=++_i)if(callbacks[i]===fn){callbacks.splice(i,1);break}return this},Emitter}(),(Dropzone=function(_super){var extend,resolveOption;function Dropzone(element,options){var elementOptions,fallback,_ref;if(this.element=element,this.version=Dropzone.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(Dropzone.instances.push(this),this.element.dropzone=this,elementOptions=null!=(_ref=Dropzone.optionsForElement(this.element))?_ref:{},this.options=extend({},this.defaultOptions,elementOptions,null!=options?options:{}),this.options.forceFallback||!Dropzone.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(fallback=this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=Dropzone.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=Dropzone.getElements(this.options.clickable,"clickable")),this.init()}return function(child,parent){for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(Dropzone,Emitter),Dropzone.prototype.Emitter=Emitter,Dropzone.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],Dropzone.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(file,done){return done()},init:function(){return noop},forceFallback:!1,fallback:function(){var child,messageElement,span,_i,_len,_ref;for(this.element.className=this.element.className+" dz-browser-not-supported",_i=0,_len=(_ref=this.element.getElementsByTagName("div")).length;_i<_len;_i++)child=_ref[_i],/(^| )dz-message($| )/.test(child.className)&&((messageElement=child).className="dz-message");return messageElement||(messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement)),(span=messageElement.getElementsByTagName("span")[0])&&(null!=span.textContent?span.textContent=this.options.dictFallbackMessage:null!=span.innerText&&(span.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(file){var info,srcRatio,trgRatio;return info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height,info.optWidth=this.options.thumbnailWidth,info.optHeight=this.options.thumbnailHeight,null==info.optWidth&&null==info.optHeight?(info.optWidth=info.srcWidth,info.optHeight=info.srcHeight):null==info.optWidth?info.optWidth=srcRatio*info.optHeight:null==info.optHeight&&(info.optHeight=1/srcRatio*info.optWidth),trgRatio=info.optWidth/info.optHeight,file.height<info.optHeight||file.width<info.optWidth?(info.trgHeight=info.srcHeight,info.trgWidth=info.srcWidth):trgRatio<srcRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio),info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:noop,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:noop,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var removeFileEvent,removeLink,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results,_this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement),_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-name]")).length;_i<_len;_i++)_ref[_i].textContent=this._renameFilename(file.name);for(_j=0,_len1=(_ref1=file.previewElement.querySelectorAll("[data-dz-size]")).length;_j<_len1;_j++)_ref1[_j].innerHTML=this.filesize(file.size);for(this.options.addRemoveLinks&&(file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),file.previewElement.appendChild(file._removeLink)),_this=this,removeFileEvent=function(e){return e.preventDefault(),e.stopPropagation(),file.status===Dropzone.UPLOADING?Dropzone.confirm(_this.options.dictCancelUploadConfirmation,function(){return _this.removeFile(file)}):_this.options.dictRemoveFileConfirmation?Dropzone.confirm(_this.options.dictRemoveFileConfirmation,function(){return _this.removeFile(file)}):_this.removeFile(file)},_results=[],_k=0,_len2=(_ref2=file.previewElement.querySelectorAll("[data-dz-remove]")).length;_k<_len2;_k++)removeLink=_ref2[_k],_results.push(removeLink.addEventListener("click",removeFileEvent));return _results}},removedfile:function(file){var _ref;return file.previewElement&&null!=(_ref=file.previewElement)&&_ref.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){var thumbnailElement,_i,_len,_ref;if(file.previewElement){for(file.previewElement.classList.remove("dz-file-preview"),_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;_i<_len;_i++)(thumbnailElement=_ref[_i]).alt=file.name,thumbnailElement.src=dataUrl;return setTimeout(function(){return file.previewElement.classList.add("dz-image-preview")},1)}},error:function(file,message){var node,_i,_len,_ref,_results;if(file.previewElement){for(file.previewElement.classList.add("dz-error"),"String"!=typeof message&&message.error&&(message=message.error),_results=[],_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-errormessage]")).length;_i<_len;_i++)node=_ref[_i],_results.push(node.textContent=message);return _results}},errormultiple:noop,processing:function(file){if(file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink))return file._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:noop,uploadprogress:function(file,progress,bytesSent){var node,_i,_len,_ref,_results;if(file.previewElement){for(_results=[],_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;_i<_len;_i++)"PROGRESS"===(node=_ref[_i]).nodeName?_results.push(node.value=progress):_results.push(node.style.width=progress+"%");return _results}},totaluploadprogress:noop,sending:noop,sendingmultiple:noop,success:function(file){if(file.previewElement)return file.previewElement.classList.add("dz-success")},successmultiple:noop,canceled:function(file){return this.emit("error",file,"Upload canceled.")},canceledmultiple:noop,complete:function(file){if(file._removeLink&&(file._removeLink.textContent=this.options.dictRemoveFile),file.previewElement)return file.previewElement.classList.add("dz-complete")},completemultiple:noop,maxfilesexceeded:noop,maxfilesreached:noop,queuecomplete:noop,addedfiles:noop,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},extend=function(){var key,object,objects,target,val,_i,_len;for(target=arguments[0],_i=0,_len=(objects=2<=arguments.length?__slice.call(arguments,1):[]).length;_i<_len;_i++)for(key in object=objects[_i])val=object[key],target[key]=val;return target},Dropzone.prototype.getAcceptedFiles=function(){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).accepted&&_results.push(file);return _results},Dropzone.prototype.getRejectedFiles=function(){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).accepted||_results.push(file);return _results},Dropzone.prototype.getFilesWithStatus=function(status){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).status===status&&_results.push(file);return _results},Dropzone.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(Dropzone.QUEUED)},Dropzone.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(Dropzone.UPLOADING)},Dropzone.prototype.getAddedFiles=function(){return this.getFilesWithStatus(Dropzone.ADDED)},Dropzone.prototype.getActiveFiles=function(){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).status!==Dropzone.UPLOADING&&file.status!==Dropzone.QUEUED||_results.push(file);return _results},Dropzone.prototype.init=function(){var eventName,noPropagation,setupHiddenFileInput,_i,_len,_ref,_ref1,_this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(_this=this,(setupHiddenFileInput=function(){return _this.hiddenFileInput&&_this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput),_this.hiddenFileInput=document.createElement("input"),_this.hiddenFileInput.setAttribute("type","file"),(null==_this.options.maxFiles||1<_this.options.maxFiles)&&_this.hiddenFileInput.setAttribute("multiple","multiple"),_this.hiddenFileInput.className="dz-hidden-input",null!=_this.options.acceptedFiles&&_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles),null!=_this.options.capture&&_this.hiddenFileInput.setAttribute("capture",_this.options.capture),_this.hiddenFileInput.style.visibility="hidden",_this.hiddenFileInput.style.position="absolute",_this.hiddenFileInput.style.top="0",_this.hiddenFileInput.style.left="0",_this.hiddenFileInput.style.height="0",_this.hiddenFileInput.style.width="0",document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput),_this.hiddenFileInput.addEventListener("change",function(){var file,files,_i,_len;if((files=_this.hiddenFileInput.files).length)for(_i=0,_len=files.length;_i<_len;_i++)file=files[_i],_this.addFile(file);return _this.emit("addedfiles",files),setupHiddenFileInput()})})()),this.URL=null!=(_ref=window.URL)?_ref:window.webkitURL,_i=0,_len=(_ref1=this.events).length;_i<_len;_i++)eventName=_ref1[_i],this.on(eventName,this.options[eventName]);return this.on("uploadprogress",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this)),this.on("canceled",function(_this){return function(file){return _this.emit("complete",file)}}(this)),this.on("complete",function(_this){return function(file){if(0===_this.getAddedFiles().length&&0===_this.getUploadingFiles().length&&0===_this.getQueuedFiles().length)return setTimeout(function(){return _this.emit("queuecomplete")},0)}}(this)),noPropagation=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(_this){return function(e){return _this.emit("dragstart",e)}}(this),dragenter:function(_this){return function(e){return noPropagation(e),_this.emit("dragenter",e)}}(this),dragover:function(_this){return function(e){var efct;try{efct=e.dataTransfer.effectAllowed}catch(_error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this.emit("dragover",e)}}(this),dragleave:function(_this){return function(e){return _this.emit("dragleave",e)}}(this),drop:function(_this){return function(e){return noPropagation(e),_this.drop(e)}}(this),dragend:function(_this){return function(e){return _this.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(_this){return function(clickableElement){return _this.listeners.push({element:clickableElement,events:{click:function(evt){return(clickableElement!==_this.element||evt.target===_this.element||Dropzone.elementInside(evt.target,_this.element.querySelector(".dz-message")))&&_this.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},Dropzone.prototype.destroy=function(){var _ref;return this.disable(),this.removeAllFiles(!0),(null!=(_ref=this.hiddenFileInput)?_ref.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)},Dropzone.prototype.updateTotalUploadProgress=function(){var file,totalBytes,totalBytesSent,totalUploadProgress,_i,_len,_ref;if(totalBytes=totalBytesSent=0,this.getActiveFiles().length){for(_i=0,_len=(_ref=this.getActiveFiles()).length;_i<_len;_i++)totalBytesSent+=(file=_ref[_i]).upload.bytesSent,totalBytes+=file.upload.total;totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)},Dropzone.prototype._getParamName=function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")},Dropzone.prototype._renameFilename=function(name){return"function"!=typeof this.options.renameFilename?name:this.options.renameFilename(name)},Dropzone.prototype.getFallbackForm=function(){var existingFallback,fields,fieldsString,form;return(existingFallback=this.getExistingFallback())?existingFallback:(fieldsString='<div class="dz-fallback">',this.options.dictFallbackText&&(fieldsString+="<p>"+this.options.dictFallbackText+"</p>"),fieldsString+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',fields=Dropzone.createElement(fieldsString),"FORM"!==this.element.tagName?(form=Dropzone.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(fields):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields)},Dropzone.prototype.getExistingFallback=function(){var fallback,getFallback,tagName,_i,_len,_ref;for(getFallback=function(elements){var el,_i,_len;for(_i=0,_len=elements.length;_i<_len;_i++)if(el=elements[_i],/(^| )fallback($| )/.test(el.className))return el},_i=0,_len=(_ref=["div","form"]).length;_i<_len;_i++)if(tagName=_ref[_i],fallback=getFallback(this.element.getElementsByTagName(tagName)))return fallback},Dropzone.prototype.setupEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.listeners).length;_i<_len;_i++)elementListeners=_ref[_i],_results.push(function(){var _ref1,_results1;for(event in _results1=[],_ref1=elementListeners.events)listener=_ref1[event],_results1.push(elementListeners.element.addEventListener(event,listener,!1));return _results1}());return _results},Dropzone.prototype.removeEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.listeners).length;_i<_len;_i++)elementListeners=_ref[_i],_results.push(function(){var _ref1,_results1;for(event in _results1=[],_ref1=elementListeners.events)listener=_ref1[event],_results1.push(elementListeners.element.removeEventListener(event,listener,!1));return _results1}());return _results},Dropzone.prototype.disable=function(){var file,_i,_len,_ref,_results;for(this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")}),this.removeEventListeners(),_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)file=_ref[_i],_results.push(this.cancelUpload(file));return _results},Dropzone.prototype.enable=function(){return this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")}),this.setupEventListeners()},Dropzone.prototype.filesize=function(size){var i,selectedSize,selectedUnit,unit,units,_i,_len;if(selectedUnit="b",(selectedSize=0)<size){for(i=_i=0,_len=(units=["TB","GB","MB","KB","b"]).length;_i<_len;i=++_i)if(unit=units[i],Math.pow(this.options.filesizeBase,4-i)/10<=size){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}selectedSize=Math.round(10*selectedSize)/10}return"<strong>"+selectedSize+"</strong> "+selectedUnit},Dropzone.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},Dropzone.prototype.drop=function(e){var files,items;e.dataTransfer&&(this.emit("drop",e),files=e.dataTransfer.files,this.emit("addedfiles",files),files.length&&((items=e.dataTransfer.items)&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)))},Dropzone.prototype.paste=function(e){var items,_ref;if(null!=(null!=e&&null!=(_ref=e.clipboardData)?_ref.items:void 0))return this.emit("paste",e),(items=e.clipboardData.items).length?this._addFilesFromItems(items):void 0},Dropzone.prototype.handleFiles=function(files){var file,_i,_len,_results;for(_results=[],_i=0,_len=files.length;_i<_len;_i++)file=files[_i],_results.push(this.addFile(file));return _results},Dropzone.prototype._addFilesFromItems=function(items){var entry,item,_i,_len,_results;for(_results=[],_i=0,_len=items.length;_i<_len;_i++)null!=(item=items[_i]).webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?_results.push(this.addFile(item.getAsFile())):entry.isDirectory?_results.push(this._addFilesFromDirectory(entry,entry.name)):_results.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?_results.push(this.addFile(item.getAsFile())):_results.push(void 0);return _results},Dropzone.prototype._addFilesFromDirectory=function(directory,path){var dirReader,errorHandler,readEntries,_this;return dirReader=directory.createReader(),errorHandler=function(error){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(error):void 0},_this=this,(readEntries=function(){return dirReader.readEntries(function(entries){var entry,_i,_len;if(0<entries.length){for(_i=0,_len=entries.length;_i<_len;_i++)(entry=entries[_i]).isFile?entry.file(function(file){if(!_this.options.ignoreHiddenFiles||"."!==file.name.substring(0,1))return file.fullPath=path+"/"+file.name,_this.addFile(file)}):entry.isDirectory&&_this._addFilesFromDirectory(entry,path+"/"+entry.name);readEntries()}return null},errorHandler)})()},Dropzone.prototype.accept=function(file,done){return file.size>1024*this.options.maxFilesize*1024?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)},Dropzone.prototype.addFile=function(file){return file.upload={progress:0,total:file.size,bytesSent:0},this.files.push(file),file.status=Dropzone.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,(_this=this,function(error){return error?(file.accepted=!1,_this._errorProcessing([file],error)):(file.accepted=!0,_this.options.autoQueue&&_this.enqueueFile(file)),_this._updateMaxFilesReachedClass()}));var _this},Dropzone.prototype.enqueueFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)file=files[_i],this.enqueueFile(file);return null},Dropzone.prototype.enqueueFile=function(file){if(file.status!==Dropzone.ADDED||!0!==file.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(file.status=Dropzone.QUEUED,this.options.autoProcessQueue)return setTimeout((_this=this,function(){return _this.processQueue()}),0);var _this},Dropzone.prototype._thumbnailQueue=[],Dropzone.prototype._processingThumbnail=!1,Dropzone.prototype._enqueueThumbnail=function(file){if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(file),setTimeout((_this=this,function(){return _this._processThumbnailQueue()}),0);var _this},Dropzone.prototype._processThumbnailQueue=function(){var _this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),(_this=this,function(){return _this._processingThumbnail=!1,_this._processThumbnailQueue()}))},Dropzone.prototype.removeFile=function(file){if(file.status===Dropzone.UPLOADING&&this.cancelUpload(file),this.files=without(this.files,file),this.emit("removedfile",file),0===this.files.length)return this.emit("reset")},Dropzone.prototype.removeAllFiles=function(cancelIfNecessary){var file,_i,_len,_ref;for(null==cancelIfNecessary&&(cancelIfNecessary=!1),_i=0,_len=(_ref=this.files.slice()).length;_i<_len;_i++)((file=_ref[_i]).status!==Dropzone.UPLOADING||cancelIfNecessary)&&this.removeFile(file);return null},Dropzone.prototype.createThumbnail=function(file,callback){var fileReader,_this;return(fileReader=new FileReader).onload=(_this=this,function(){return"image/svg+xml"===file.type?(_this.emit("thumbnail",file,fileReader.result),void(null!=callback&&callback())):_this.createThumbnailFromUrl(file,fileReader.result,callback)}),fileReader.readAsDataURL(file)},Dropzone.prototype.createThumbnailFromUrl=function(file,imageUrl,callback,crossOrigin){var img,_this;return img=document.createElement("img"),crossOrigin&&(img.crossOrigin=crossOrigin),img.onload=(_this=this,function(){var canvas,ctx,resizeInfo,thumbnail,_ref,_ref1,_ref2,_ref3;if(file.width=img.width,file.height=img.height,null==(resizeInfo=_this.options.resize.call(_this,file)).trgWidth&&(resizeInfo.trgWidth=resizeInfo.optWidth),null==resizeInfo.trgHeight&&(resizeInfo.trgHeight=resizeInfo.optHeight),ctx=(canvas=document.createElement("canvas")).getContext("2d"),canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,drawImageIOSFix(ctx,img,null!=(_ref=resizeInfo.srcX)?_ref:0,null!=(_ref1=resizeInfo.srcY)?_ref1:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=(_ref2=resizeInfo.trgX)?_ref2:0,null!=(_ref3=resizeInfo.trgY)?_ref3:0,resizeInfo.trgWidth,resizeInfo.trgHeight),thumbnail=canvas.toDataURL("image/png"),_this.emit("thumbnail",file,thumbnail),null!=callback)return callback()}),null!=callback&&(img.onerror=callback),img.src=imageUrl},Dropzone.prototype.processQueue=function(){var i,parallelUploads,processingLength,queuedFiles;if(!((parallelUploads=this.options.parallelUploads)<=(i=processingLength=this.getUploadingFiles().length))&&0<(queuedFiles=this.getQueuedFiles()).length){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;i<parallelUploads;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}},Dropzone.prototype.processFile=function(file){return this.processFiles([file])},Dropzone.prototype.processFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).processing=!0,file.status=Dropzone.UPLOADING,this.emit("processing",file);return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)},Dropzone.prototype._getFilesWithXhr=function(xhr){var file;return function(){var _i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).xhr===xhr&&_results.push(file);return _results}.call(this)},Dropzone.prototype.cancelUpload=function(file){var groupedFile,groupedFiles,_i,_j,_len,_len1,_ref;if(file.status===Dropzone.UPLOADING){for(_i=0,_len=(groupedFiles=this._getFilesWithXhr(file.xhr)).length;_i<_len;_i++)(groupedFile=groupedFiles[_i]).status=Dropzone.CANCELED;for(file.xhr.abort(),_j=0,_len1=groupedFiles.length;_j<_len1;_j++)groupedFile=groupedFiles[_j],this.emit("canceled",groupedFile);this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else(_ref=file.status)!==Dropzone.ADDED&&_ref!==Dropzone.QUEUED||(file.status=Dropzone.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));if(this.options.autoProcessQueue)return this.processQueue()},resolveOption=function(){var args,option;return option=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],"function"==typeof option?option.apply(this,args):option},Dropzone.prototype.uploadFile=function(file){return this.uploadFiles([file])},Dropzone.prototype.uploadFiles=function(files){var file,formData,handleError,headerName,headerValue,headers,i,input,inputName,inputType,key,method,option,response,updateProgress,url,value,xhr,_i,_j,_k,_l,_len,_len1,_len2,_len3,_m,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_this;for(xhr=new XMLHttpRequest,_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).xhr=xhr;for(headerName in method=resolveOption(this.options.method,files),url=resolveOption(this.options.url,files),xhr.open(method,url,!0),xhr.withCredentials=!!this.options.withCredentials,response=null,handleError=function(){var _j,_len1,_results;for(_results=[],_j=0,_len1=files.length;_j<_len1;_j++)file=files[_j],_results.push(_this._errorProcessing(files,response||_this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr));return _results},updateProgress=function(_this){return function(e){var allFilesFinished,progress,_j,_k,_l,_len1,_len2,_len3,_results;if(null!=e)for(progress=100*e.loaded/e.total,_j=0,_len1=files.length;_j<_len1;_j++)(file=files[_j]).upload={progress:progress,total:e.total,bytesSent:e.loaded};else{for(allFilesFinished=!0,progress=100,_k=0,_len2=files.length;_k<_len2;_k++)100===(file=files[_k]).upload.progress&&file.upload.bytesSent===file.upload.total||(allFilesFinished=!1),file.upload.progress=progress,file.upload.bytesSent=file.upload.total;if(allFilesFinished)return}for(_results=[],_l=0,_len3=files.length;_l<_len3;_l++)file=files[_l],_results.push(_this.emit("uploadprogress",file,progress,file.upload.bytesSent));return _results}}(_this=this),xhr.onload=function(_this){return function(e){var _ref;if(files[0].status!==Dropzone.CANCELED&&4===xhr.readyState){if(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json"))try{response=JSON.parse(response)}catch(_error){e=_error,response="Invalid JSON response from server."}return updateProgress(),200<=(_ref=xhr.status)&&_ref<300?_this._finished(files,response,e):handleError()}}}(this),xhr.onerror=function(){if(files[0].status!==Dropzone.CANCELED)return handleError()},(null!=(_ref=xhr.upload)?_ref:xhr).onprogress=updateProgress,headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&extend(headers,this.options.headers),headers)(headerValue=headers[headerName])&&xhr.setRequestHeader(headerName,headerValue);if(formData=new FormData,this.options.params)for(key in _ref1=this.options.params)value=_ref1[key],formData.append(key,value);for(_j=0,_len1=files.length;_j<_len1;_j++)file=files[_j],this.emit("sending",file,xhr,formData);if(this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),"FORM"===this.element.tagName)for(_k=0,_len2=(_ref2=this.element.querySelectorAll("input, textarea, select, button")).length;_k<_len2;_k++)if(inputName=(input=_ref2[_k]).getAttribute("name"),inputType=input.getAttribute("type"),"SELECT"===input.tagName&&input.hasAttribute("multiple"))for(_l=0,_len3=(_ref3=input.options).length;_l<_len3;_l++)(option=_ref3[_l]).selected&&formData.append(inputName,option.value);else(!inputType||"checkbox"!==(_ref4=inputType.toLowerCase())&&"radio"!==_ref4||input.checked)&&formData.append(inputName,input.value);for(i=_m=0,_ref5=files.length-1;0<=_ref5?_m<=_ref5:_ref5<=_m;i=0<=_ref5?++_m:--_m)formData.append(this._getParamName(i),files[i],this._renameFilename(files[i].name));return this.submitRequest(xhr,formData,files)},Dropzone.prototype.submitRequest=function(xhr,formData,files){return xhr.send(formData)},Dropzone.prototype._finished=function(files,responseText,e){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).status=Dropzone.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file);if(this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()},Dropzone.prototype._errorProcessing=function(files,message,xhr){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).status=Dropzone.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file);if(this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()},Dropzone}()).version="4.3.0",Dropzone.options={},Dropzone.optionsForElement=function(element){return element.getAttribute("id")?Dropzone.options[camelize(element.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var checkElements,dropzone,dropzones,_i,_len,_results;for(document.querySelectorAll?dropzones=document.querySelectorAll(".dropzone"):(dropzones=[],(checkElements=function(elements){var el,_i,_len,_results;for(_results=[],_i=0,_len=elements.length;_i<_len;_i++)el=elements[_i],/(^| )dropzone($| )/.test(el.className)?_results.push(dropzones.push(el)):_results.push(void 0);return _results})(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))),_results=[],_i=0,_len=dropzones.length;_i<_len;_i++)dropzone=dropzones[_i],!1!==Dropzone.optionsForElement(dropzone)?_results.push(new Dropzone(dropzone)):_results.push(void 0);return _results},Dropzone.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],Dropzone.isBrowserSupported=function(){var capableBrowser,_i,_len,_ref;if(capableBrowser=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(_i=0,_len=(_ref=Dropzone.blacklistedBrowsers).length;_i<_len;_i++)_ref[_i].test(navigator.userAgent)&&(capableBrowser=!1);else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},without=function(list,rejectedItem){var item,_i,_len,_results;for(_results=[],_i=0,_len=list.length;_i<_len;_i++)(item=list[_i])!==rejectedItem&&_results.push(item);return _results},camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})},Dropzone.createElement=function(string){var div;return(div=document.createElement("div")).innerHTML=string,div.childNodes[0]},Dropzone.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},Dropzone.getElement=function(el,name){var element;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");return element},Dropzone.getElements=function(els,name){var el,elements,_i,_j,_len,_len1,_ref;if(els instanceof Array){elements=[];try{for(_i=0,_len=els.length;_i<_len;_i++)el=els[_i],elements.push(this.getElement(el,name))}catch(_error){_error,elements=null}}else if("string"==typeof els)for(elements=[],_j=0,_len1=(_ref=document.querySelectorAll(els)).length;_j<_len1;_j++)el=_ref[_j],elements.push(el);else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return elements},Dropzone.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},Dropzone.isValidFile=function(file,acceptedFiles){var baseMimeType,mimeType,validType,_i,_len;if(!acceptedFiles)return!0;for(acceptedFiles=acceptedFiles.split(","),baseMimeType=(mimeType=file.type).replace(/\/.*$/,""),_i=0,_len=acceptedFiles.length;_i<_len;_i++)if("."===(validType=(validType=acceptedFiles[_i]).trim()).charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0;return!1},null!=jQuery&&(jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}),null!=module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success",detectVerticalSquash=function(img){var canvas,ctx,data,ey,ih,py,ratio,sy;for(img.naturalWidth,ih=img.naturalHeight,(canvas=document.createElement("canvas")).width=1,canvas.height=ih,(ctx=canvas.getContext("2d")).drawImage(img,0,0),data=ctx.getImageData(0,0,1,ih).data,sy=0,py=ey=ih;sy<py;)0===data[4*(py-1)+3]?ey=py:sy=py,py=ey+sy>>1;return 0===(ratio=py/ih)?1:ratio},drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio;return vertSquashRatio=detectVerticalSquash(img),ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},contentLoaded=function(win,fn){var add,doc,done,init,poll,pre,rem,root,top;if(top=!(done=!1),doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0},poll=function(){try{root.doScroll("left")}catch(_error){return _error,void setTimeout(poll,50)}return init("poll")},"complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(_error){}top&&poll()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}},Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction)}.call(this),module.exports}),define("text!mockup-patterns-upload-url/templates/upload.xml",[],function(){return'<div class="upload-container upload-multiple">\n    <h2 class="title"><%- _t("Upload here") %></h2>\n    <p class="help">\n        <%- _t(\'Drag and drop files from your computer onto the area below or click the Browse button.\') %>\n    </p>\n    <div class="upload-area">\n        <div class="fallback">\n            <input name="file" type="file" multiple />\n        </div>\n        <div class="dz-message"><p><%-_t("Drop files here...")%></p></div>\n        <div class="row browse-select">\n            <div class="col-md-9">\n                <input\n                    id="fakeUploadFile"\n                    placeholder="<%- _t("Choose File") %>"\n                    disabled\n                    />\n            </div>\n            <div class="col-md-3">\n                <button\n                    type="button"\n                    class="btn btn-primary browse">\n                    <%- _t("Browse") %>\n                </button>\n            </div>\n        </div>\n        <div class="upload-queue">\n            <div class="previews">\n            </div>\n            <div class="controls">\n                <% if (allowPathSelection) { %>\n                <div class="path">\n                    <label><%- _t("Upload to...") %></label>\n                    <p class="form-help">\n                        <%- _t("Select another destination folder or leave blank to add files to the current location.") %>\n                    </p>\n                    <input\n                        type="text"\n                        name="location"\n                        />\n                </div>\n                <% } %>\n                <div class="actions row">\n                    <div class="col-md-9">\n                        <div class="progress progress-striped active">\n                            <div class="progress-bar progress-bar-success"\n                                 role="progressbar"\n                                 aria-valuenow="0"\n                                 aria-valuemin="0"\n                                 aria-valuemax="100"\n                                 style="width: 0%">\n                                <span class="sr-only">40% Complete (success)</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-3 align-right">\n                        <button\n                            type="button"\n                            class="btn btn-primary upload-all">\n                            <%- _t("Upload") %>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!mockup-patterns-upload-url/templates/preview.xml",[],function(){return'<div class="row item form-inline">\n    <div class="col-md-1 action">\n        <button\n            type="button"\n            class="btn btn-danger btn-xs remove-item"\n            data-dz-remove=""\n            href="javascript:undefined;">\n            <span class="glyphicon glyphicon-remove"></span>\n        </button>\n    </div>\n    <div class="col-md-8 title">\n        <div class="dz-preview">\n          <div class="dz-details">\n            <div class="dz-filename"><span data-dz-name></span></div>\n          </div>\n          <div class="dz-error-message"><span data-dz-errormessage></span></div>\n        </div>\n        <div class="dz-progress">\n            <span class="dz-upload" data-dz-uploadprogress></span>\n        </div>\n    </div>\n    <div class="col-md-3 info">\n        <div class="dz-size" data-dz-size></div>\n        <img data-dz-thumbnail />\n    </div>\n</div>\n'}),define("mockup-patterns-upload",["jquery","underscore","pat-base","mockup-patterns-relateditems","dropzone","text!mockup-patterns-upload-url/templates/upload.xml","text!mockup-patterns-upload-url/templates/preview.xml","mockup-utils","translate"],function($,_,Base,RelatedItems,Dropzone,UploadTemplate,PreviewTemplate,utils,_t){"use strict";return Dropzone.autoDiscover=!1,Base.extend({name:"upload",trigger:".pat-upload",parser:"mockup",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,allowPathSelection:void 0,relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,selectableTypes:["Folder"]}},init:function(){var self=this,template=UploadTemplate;void 0===self.options.allowPathSelection&&(self.options.allowPathSelection=self.options.baseUrl&&self.options.relativePath),$(document).bind("paste",function(e){var items=e.originalEvent.clipboardData.items;if(items)for(var i=0;i<items.length;i++)if(-1!==items[i].type.indexOf("image")){var blob=items[i].getAsFile();self.dropzone.addFile(blob)}}),self.currentPath=self.options.currentPath,self.currentFile=0,template=_.template(template)({_t:_t,allowPathSelection:self.options.allowPathSelection}),self.$el.addClass(self.options.className),self.$el.append(template),self.$progress=$(".progress-bar-success",self.$el),self.options.showTitle||self.$el.find("h2.title").hide(),self.options.ajaxUpload||($(".fallback",this.$el).remove(),this.$el.hasClass(".upload-container")?this.$el.addClass("no-ajax-upload"):this.$el.closest(".upload-container").addClass("no-ajax-upload")),self.options.wrap&&(self.$el.wrap(self.options.wrapperTemplate),self.$el=self.$el.parent()),self.options.allowPathSelection?(self.$pathInput=$('input[name="location"]',self.$el),self.relatedItems=self.setupRelatedItems(self.$pathInput)):($('input[name="location"]',self.$el).parent().remove(),self.relatedItems=null),self.$dropzone=$(".upload-area",self.$el),$("div.browse-select button.browse",self.$el).click(function(e){e.preventDefault(),e.stopPropagation(),(!self.options.maxFiles||self.dropzone.files.length<self.options.maxFiles)&&self.dropzone.hiddenFileInput.click()});var dzoneOptions=this.getDzoneOptions();try{self.dropzone=new Dropzone(self.$dropzone[0],dzoneOptions)}catch(e){throw window.DEBUG&&console.log(e),e}self.dropzone.on("maxfilesreached",function(){self.showHideControls()}),self.dropzone.on("addedfile",function(){self.showHideControls()}),self.dropzone.on("removedfile",function(){self.showHideControls()}),self.dropzone.on("success",function(e,response){var data;try{data=$.parseJSON(response)}catch(ex){data=response}self.$el.trigger("uploadAllCompleted",{data:data,path_uid:self.$pathInput?self.$pathInput.val():null})}),self.options.autoCleanResults&&self.dropzone.on("complete",function(file){file.status===Dropzone.SUCCESS&&setTimeout(function(){$(file.previewElement).fadeOut()},3e3)}),self.dropzone.on("complete",function(file){file.status===Dropzone.SUCCESS&&1===self.dropzone.files.length&&self.showHideControls()}),self.dropzone.on("error",function(file,response,xmlhr){void 0!==xmlhr&&403!==xmlhr.status&&$(".dz-error-message span",file.previewElement).html(_t("The file transfer failed"))}),self.dropzone.on("totaluploadprogress",function(pct){pct=(100*(self.currentFile-1)+pct)/(100*self.dropzone.files.length)*100,self.$progress.attr("aria-valuenow",pct).css("width",pct+"%")}),$(".upload-all",self.$el).click(function(e){e.preventDefault(),e.stopPropagation(),self.processUpload({finished:function(){self.$progress.attr("aria-valuenow",0).css("width","0%")}})}),self.options.clipboardfile&&self.dropzone.addFile(self.options.clipboardfile)},showHideControls:function(){var self=this;self._showHideTimeout&&clearTimeout(self._showHideTimeout),self._showHideTimeout=setTimeout(function(){self._showHideControls()},50)},_showHideControls:function(){var $controls=$(".controls",this.$el),$browse=$(".browse-select",this.$el),$input=$(".dz-hidden-input");if(this.options.maxFiles&&(this.dropzone.files.length<this.options.maxFiles?($browse.show(),$input.prop("disabled",!1)):($browse.hide(),$input.prop("disabled",!0))),0<this.dropzone.files.length){$controls.fadeIn("slow");var file=this.dropzone.files[0];$(".dz-error-message span",file.previewElement).html("")}else $controls.fadeOut("slow")},pathJoin:function(){var parts=[];return _.each(arguments,function(part){part&&("/"===part[0]&&(part=part.substring(1)),"/"===part[part.length-1]&&(part=part.substring(0,part.length-1)),parts.push(part))}),parts.join("/")},getUrl:function(){var url=this.options.url;if(!url)if(this.options.baseUrl&&this.options.relativePath)"/"!==(url=this.options.baseUrl)[url.length-1]&&(url+="/"),url+=this.pathJoin(this.currentPath,this.options.relativePath);else{var $form=this.$el.parents("form");url=0<$form.length?$form.attr("action"):window.location.href}return url},getDzoneOptions:function(){this.options.clickable=!0;var options=$.extend({},this.options);if(options.url=this.getUrl(),options.headers={"X-CSRF-TOKEN":utils.getAuthenticator()},options.uploadMultiple=!1,delete options.wrap,delete options.wrapperTemplate,delete options.resultTemplate,delete options.autoCleanResults,delete options.fileaddedClassName,delete options.useTus,this.options.previewsContainer){var $preview=this.$el.find(this.options.previewsContainer);0<$preview.length&&(options.previewsContainer=$preview[0])}return options.autoProcessQueue=!1,options.previewTemplate=PreviewTemplate,options},processUpload:function(options){options||(options={});var self=this,processing=!1,useTus=self.options.useTus,fileaddedClassName=self.options.fileaddedClassName,finished=options.finished;self.currentFile=0,function process(){processing=!0,0===self.dropzone.files.length&&(processing=!1);var file=self.dropzone.files[0];if(processing&&file.status===Dropzone.ERROR&&(file.status=Dropzone.QUEUED,processing=!1),!processing)return self.$el.removeClass(fileaddedClassName),void(void 0!==finished&&"function"==typeof finished&&finished());-1!==[Dropzone.SUCCESS,Dropzone.CANCELED].indexOf(file.status)?(self.dropzone.removeFile(file),process()):(file.status!==Dropzone.UPLOADING&&(useTus&&window.tus?self.handleTusUpload(file):(self.currentFile+=1,self.dropzone.processFile(file))),setTimeout(process,100))}()},handleTusUpload:function(file){var self=this;$(file.previewElement);file.status=Dropzone.UPLOADING,window.tus.upload(file,{endpoint:self.dropzone.options.url,headers:{FILENAME:file.name,"X-CSRF-TOKEN":utils.getAuthenticator()},chunkSize:5242880}).fail(function(){window.DEBUG&&console.alert(_t("Error uploading with TUS resumable uploads")),file.status=Dropzone.ERROR}).progress(function(e,bytesUploaded,bytesTotal){var percentage=bytesUploaded/bytesTotal*100;self.$progress.attr("aria-valuenow",percentage).css("width",percentage+"%"),self.$progress.html(_t("uploading...")+"<br />"+self.formatBytes(bytesUploaded)+" / "+self.formatBytes(bytesTotal))}).done(function(url,file){file.status=Dropzone.SUCCESS,self.dropzone.emit("success",file),self.dropzone.emit("complete",file)})},formatBytes:function(bytes){var kb=Math.round(bytes/1024);if(kb<1024)return kb+" KiB";var mb=Math.round(kb/1024);return mb<1024?mb+" MB":Math.round(mb/1024)+" GB"},setPath:function(path){this.currentPath=path,this.options.url=null,this.options.url=this.dropzone.options.url=this.getUrl()},setupRelatedItems:function($input){var self=this,options=self.options.relatedItems;options.upload=!1,self.options.initialFolder&&$input.attr("value",self.options.initialFolder);var ri=new RelatedItems($input,options);return ri.$el.on("change",function(){var result=$(this).select2("data"),path=null;0<result.length&&(path=result[0].path),self.setPath(path)}),ri}})}),define("mockup-patterns-structure-url/js/views/upload",["underscore","mockup-ui-url/views/popover","mockup-patterns-upload"],function(_,PopoverView,Upload){"use strict";return PopoverView.extend({className:"popover upload",title:_.template('<%- _t("Upload files") %>'),content:_.template('<input type="text" name="upload" style="display:none" /><div class="uploadify-me"></div>'),initialize:function(options){var self=this;self.app=options.app,PopoverView.prototype.initialize.apply(self,[options]),self.currentPathData=null,$("body").on("context-info-loaded",function(event,data){self.currentPathData=data})},render:function(){var self=this;PopoverView.prototype.render.call(this);var options=self.app.options.upload;return options.success=function(){self.app.collection.pager()},options.currentPath=self.app.getCurrentPath(),options.allowPathSelection=!1,self.upload=new Upload(self.$(".uploadify-me").addClass("pat-upload"),options),this},toggle:function(button,e){PopoverView.prototype.toggle.apply(this,[button,e]);if(this.opened){var currentPath=this.app.getCurrentPath();this.currentPathData&&currentPath!==this.upload.currentPath&&this.upload.setPath(currentPath)}}})}),function(root){define("backbone.paginator",["backbone"],function(){return function(){return Backbone.Paginator=function(Backbone,_,$){"use strict";var bbVer=_.map(Backbone.VERSION.split("."),function(digit){return parseInt(digit,10)}),Paginator={version:"<%= pkg.version %>"};Paginator.clientPager=Backbone.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var options=_.defaults(this.paginator_ui,this.defaults_ui);_.defaults(this,options)},addModel:function(model){this.origModels.push(model)},removeModel:function(model){var index=_.indexOf(this.origModels,model);this.origModels.splice(index,1)},sync:function(method,model,options){var self=this;this.setDefaults();var queryAttributes={};_.each(_.result(self,"server_api"),function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryAttributes[key]=value});var queryOptions=_.clone(self.paginator_core);_.each(queryOptions,function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryOptions[key]=value}),queryOptions=_.defaults(queryOptions,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),queryOptions=_.extend(queryOptions,{data:decodeURIComponent($.param(queryAttributes)),processData:!1,url:_.result(queryOptions,"url")},options);var promiseSuccessFormat=!(0===bbVer[0]&&9===bbVer[1]&&10===bbVer[2]),success=queryOptions.success;queryOptions.success=function(resp,status,xhr){success&&(promiseSuccessFormat?success(resp,status,xhr):success(model,resp,queryOptions)),model&&model.trigger&&model.trigger("sync",model,resp,queryOptions)};var error=queryOptions.error;queryOptions.error=function(xhr){error&&error(model,xhr,queryOptions),model&&model.trigger&&model.trigger("error",model,xhr,queryOptions)};var xhr=queryOptions.xhr=Backbone.ajax(queryOptions);return model&&model.trigger&&model.trigger("request",model,xhr,queryOptions),xhr},nextPage:function(options){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(options))},previousPage:function(options){1<this.currentPage&&(this.currentPage=--this.currentPage,this.pager(options))},goTo:function(page,options){void 0!==page&&(this.currentPage=parseInt(page,10),this.pager(options))},howManyPer:function(perPage){if(void 0!==perPage){var lastPerPage=this.perPage;this.perPage=parseInt(perPage,10),this.currentPage=Math.ceil((lastPerPage*(this.currentPage-1)+1)/perPage),this.pager()}},setSort:function(column,direction){void 0!==column&&void 0!==direction&&(this.lastSortColumn=this.sortColumn,this.sortColumn=column,this.sortDirection=direction,this.pager(),this.info())},setFieldFilter:function(fieldFilterRules){_.isEmpty(fieldFilterRules)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=""):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=fieldFilterRules),this.pager(),this.info()},doFakeFieldFilter:function(rules){if(!_.isEmpty(rules)){var testModels=this.origModels;return void 0===testModels&&(testModels=this.models),testModels=this._fieldFilter(testModels,rules),""!==this.filterExpression&&(testModels=this._filter(testModels,this.filterFields,this.filterExpression)),testModels.length}},setFilter:function(fields,filter){void 0!==fields&&void 0!==filter&&(this.filterFields=fields,this.lastFilterExpression=this.filterExpression,this.filterExpression=filter,this.pager(),this.info())},doFakeFilter:function(fields,filter){if(void 0!==fields&&void 0!==filter){var testModels=this.origModels;return void 0===testModels&&(testModels=this.models),_.isEmpty(this.fieldFilterRules)||(testModels=this._fieldFilter(testModels,this.fieldFilterRules)),(testModels=this._filter(testModels,fields,filter)).length}},pager:function(options){var disp=this.perPage,start=(this.currentPage-1)*disp,stop=start+disp;void 0===this.origModels&&(this.origModels=this.models),this.models=this.origModels.slice(),""!==this.sortColumn&&(this.models=this._sort(this.models,this.sortColumn,this.sortDirection)),_.isEmpty(this.fieldFilterRules)||(this.models=this._fieldFilter(this.models,this.fieldFilterRules)),""!==this.filterExpression&&(this.models=this._filter(this.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&_.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(stop=(start=0)+disp,this.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),this.sortedAndFilteredModels=this.models.slice(),this.info(),this.reset(this.models.slice(start,stop)),_.result(options,"success")},_sort:function(models,sort,direction){return models=models.sort(function(a,b){var ac=a.get(sort),bc=b.get(sort);if(_.isUndefined(ac)||_.isUndefined(bc)||null===ac||null===bc)return 0;if(ac=ac.toString().toLowerCase(),bc=bc.toString().toLowerCase(),"desc"===direction)if(!ac.match(/[^\-\d\.]/)&&ac.match(/-?[\d\.]+/)&&!bc.match(/[^\-\d\.]/)&&bc.match(/-?[\d\.]+/)){if(ac-0<bc-0)return 1;if(bc-0<ac-0)return-1}else{if(ac<bc)return 1;if(bc<ac)return-1}else if(!ac.match(/[^\-\d\.]/)&&ac.match(/-?[\d\.]+/)&&!bc.match(/[^\-\d\.]/)&&bc.match(/-?[\d\.]+/)){if(ac-0<bc-0)return-1;if(bc-0<ac-0)return 1}else{if(ac<bc)return-1;if(bc<ac)return 1}if(a.cid&&b.cid){var aId=a.cid,bId=b.cid;if(aId<bId)return-1;if(bId<aId)return 1}return 0})},_fieldFilter:function(models,rules){if(_.isEmpty(rules))return models;var filteredModels=[];return _.each(models,function(model){var should_push=!0;_.each(rules,function(rule){if(!should_push)return!1;(should_push=!1,"function"===rule.type)?_.wrap(rule.value,function(func){return func(model.get(rule.field))})()&&(should_push=!0):"required"===rule.type?_.isEmpty(model.get(rule.field).toString())||(should_push=!0):"min"===rule.type?!_.isNaN(Number(model.get(rule.field)))&&!_.isNaN(Number(rule.value))&&Number(model.get(rule.field))>=Number(rule.value)&&(should_push=!0):"max"===rule.type?!_.isNaN(Number(model.get(rule.field)))&&!_.isNaN(Number(rule.value))&&Number(model.get(rule.field))<=Number(rule.value)&&(should_push=!0):"range"===rule.type?!_.isNaN(Number(model.get(rule.field)))&&_.isObject(rule.value)&&!_.isNaN(Number(rule.value.min))&&!_.isNaN(Number(rule.value.max))&&Number(model.get(rule.field))>=Number(rule.value.min)&&Number(model.get(rule.field))<=Number(rule.value.max)&&(should_push=!0):"minLength"===rule.type?model.get(rule.field).toString().length>=rule.value&&(should_push=!0):"maxLength"===rule.type?model.get(rule.field).toString().length<=rule.value&&(should_push=!0):"rangeLength"===rule.type?_.isObject(rule.value)&&!_.isNaN(Number(rule.value.min))&&!_.isNaN(Number(rule.value.max))&&model.get(rule.field).toString().length>=rule.value.min&&model.get(rule.field).toString().length<=rule.value.max&&(should_push=!0):"oneOf"===rule.type?_.isArray(rule.value)&&_.include(rule.value,model.get(rule.field))&&(should_push=!0):"equalTo"===rule.type?rule.value===model.get(rule.field)&&(should_push=!0):"containsAllOf"===rule.type?_.isArray(rule.value)&&_.isArray(model.get(rule.field))&&_.intersection(rule.value,model.get(rule.field)).length===rule.value.length&&(should_push=!0):"pattern"===rule.type?model.get(rule.field).toString().match(rule.value)&&(should_push=!0):should_push=!1}),should_push&&filteredModels.push(model)}),filteredModels},_filter:function(models,fields,filter){var self=this,obj_fields={};if(_.isString(fields)?obj_fields[fields]={cmp_method:"regexp"}:_.isArray(fields)?_.each(fields,function(field){obj_fields[field]={cmp_method:"regexp"}}):_.each(fields,function(cmp_opts,field){obj_fields[field]=_.defaults(cmp_opts,{cmp_method:"regexp"})}),fields=obj_fields,_.has(Backbone.Paginator,"removeDiacritics")&&self.useDiacriticsPlugin&&(filter=Backbone.Paginator.removeDiacritics(filter)),""===filter||!_.isString(filter))return models;var words=_.map(filter.match(/\w+/gi),function(element){return element.toLowerCase()}),pattern="("+_.uniq(words).join("|")+")",regexp=new RegExp(pattern,"igm"),filteredModels=[];return _.each(models,function(model){var matchesPerModel=[];_.each(fields,function(cmp_opts,field){var value=model.get(field);if(value){var matchesPerField=[];if(value=_.has(Backbone.Paginator,"removeDiacritics")&&self.useDiacriticsPlugin?Backbone.Paginator.removeDiacritics(value.toString()):value.toString(),"levenshtein"===cmp_opts.cmp_method&&_.has(Backbone.Paginator,"levenshtein")&&self.useLevenshteinPlugin){var distance=Backbone.Paginator.levenshtein(value,filter);_.defaults(cmp_opts,{max_distance:0}),distance<=cmp_opts.max_distance&&(matchesPerField=_.uniq(words))}else matchesPerField=value.match(regexp);matchesPerField=_.map(matchesPerField,function(match){return match.toString().toLowerCase()}),_.each(matchesPerField,function(match){matchesPerModel.push(match)})}}),matchesPerModel=_.uniq(_.without(matchesPerModel,"")),_.isEmpty(_.difference(words,matchesPerModel))&&filteredModels.push(model)}),filteredModels},info:function(){var info={},totalRecords=this.sortedAndFilteredModels?this.sortedAndFilteredModels.length:this.length,totalPages=Math.ceil(totalRecords/this.perPage);return info={totalUnfilteredRecords:this.origModels.length,totalRecords:totalRecords,currentPage:this.currentPage,perPage:this.perPage,totalPages:totalPages,lastPage:totalPages,previous:!1,next:!1,startRecord:0===totalRecords?0:(this.currentPage-1)*this.perPage+1,endRecord:Math.min(totalRecords,this.currentPage*this.perPage)},1<this.currentPage&&(info.previous=this.currentPage-1),this.currentPage<info.totalPages&&(info.next=this.currentPage+1),info.pageSet=this.setPagination(info),this.information=info},setPagination:function(info){var pages=[],i=0,l=0,ADJACENTx2=2*this.pagesInRange,LASTPAGE=Math.ceil(info.totalRecords/info.perPage);if(1<LASTPAGE)if(LASTPAGE<=1+ADJACENTx2)for(i=1,l=LASTPAGE;i<=l;i++)pages.push(i);else if(info.currentPage<=this.pagesInRange+1)for(i=1,l=2+ADJACENTx2;i<l;i++)pages.push(i);else if(LASTPAGE-this.pagesInRange>info.currentPage&&info.currentPage>this.pagesInRange)for(i=info.currentPage-this.pagesInRange;i<=info.currentPage+this.pagesInRange;i++)pages.push(i);else for(i=LASTPAGE-ADJACENTx2;i<=LASTPAGE;i++)pages.push(i);return pages},bootstrap:function(options){return _.extend(this,options),this.goTo(1),this.info(),this}}),Paginator.clientPager.prototype.prevPage=Paginator.clientPager.prototype.previousPage;var reject=function(){var response=new $.Deferred;return response.reject(),response.promise()};return Paginator.requestPager=Backbone.Collection.extend({sync:function(method,model,options){var self=this;self.setDefaults();var queryAttributes={};_.each(_.result(self,"server_api"),function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryAttributes[key]=value});var queryOptions=_.clone(self.paginator_core);_.each(queryOptions,function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryOptions[key]=value}),queryOptions=_.defaults(queryOptions,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),options.data?options.data=decodeURIComponent($.param(_.extend(queryAttributes,options.data))):options.data=decodeURIComponent($.param(queryAttributes)),queryOptions=_.extend(queryOptions,{data:decodeURIComponent($.param(queryAttributes)),processData:!1,url:_.result(queryOptions,"url")},options);var promiseSuccessFormat=!(0===bbVer[0]&&9===bbVer[1]&&10===bbVer[2]),success=queryOptions.success;queryOptions.success=function(resp,status,xhr){success&&(promiseSuccessFormat?success(resp,status,xhr):success(model,resp,queryOptions)),bbVer[0]<1&&model&&model.trigger&&model.trigger("sync",model,resp,queryOptions)};var error=queryOptions.error;queryOptions.error=function(xhr){error&&error(xhr),model&&model.trigger&&model.trigger("error",model,xhr,queryOptions)};var xhr=queryOptions.xhr=Backbone.ajax(queryOptions);return model&&model.trigger&&model.trigger("request",model,xhr,queryOptions),xhr},setDefaults:function(){var self=this;_.defaults(self.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),_.each(self.paginator_ui,function(value,key){_.isUndefined(self[key])&&(self[key]=self.paginator_ui[key])})},requestNextPage:function(options){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(options)):reject()},requestPreviousPage:function(options){return void 0!==this.currentPage?(this.currentPage-=1,this.pager(options)):reject()},updateOrder:function(column,options){return void 0!==column?(this.sortField=column,this.pager(options)):reject()},goTo:function(page,options){return void 0!==page?(this.currentPage=parseInt(page,10),this.pager(options)):reject()},howManyPer:function(count,options){return void 0!==count?(this.currentPage=this.firstPage,this.perPage=count,this.pager(options)):reject()},info:function(){var info={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return 1<this.currentPage&&(info.previous=this.currentPage-1),this.currentPage<info.totalPages&&(info.next=this.currentPage+1),info.hasNext=info.next,info.hasPrevious=info.next,info.pageSet=this.setPagination(info),this.information=info},setPagination:function(info){var pages=[],i=0,l=0,ADJACENTx2=2*this.pagesInRange,LASTPAGE=Math.ceil(info.totalRecords/info.perPage);if(1<LASTPAGE)if(LASTPAGE<=1+ADJACENTx2)for(i=1,l=LASTPAGE;i<=l;i++)pages.push(i);else if(info.currentPage<=this.pagesInRange+1)for(i=1,l=2+ADJACENTx2;i<l;i++)pages.push(i);else if(LASTPAGE-this.pagesInRange>info.currentPage&&info.currentPage>this.pagesInRange)for(i=info.currentPage-this.pagesInRange;i<=info.currentPage+this.pagesInRange;i++)pages.push(i);else for(i=LASTPAGE-ADJACENTx2;i<=LASTPAGE;i++)pages.push(i);return pages},pager:function(options){return _.isObject(options)||(options={}),this.fetch(options)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(options){return _.extend(this,options),this.setDefaults(),this.info(),this}}),Paginator.requestPager.prototype.nextPage=Paginator.requestPager.prototype.requestNextPage,Paginator.requestPager.prototype.prevPage=Paginator.requestPager.prototype.requestPreviousPage,Paginator}(Backbone,_,jQuery),window.Backbone.Paginator}.apply(root,arguments)})}(this),define("mockup-patterns-structure-url/js/collections/result",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","backbone.paginator"],function($,_,Backbone,Result,Utils){"use strict";return Backbone.Paginator.requestPager.extend({model:Result,initialize:function(models,options){this.options=options,this.view=options.view,this.url=options.url,this.queryHelper=Utils.QueryHelper($.extend(!0,{},this.view.options,{attributes:this.view.options.queryHelperAttributes})),this.queryParser=function(options){void 0===options&&(options={});var term=null;this.view.toolbar&&(term=this.view.toolbar.get("filter").term);var sortOn=this.view.sort_on,sortOrder=this.view.sort_order;return sortOn||(sortOn="getObjPositionInParent"),JSON.stringify({criteria:this.queryHelper.getCriterias(term,$.extend({},options,{additionalCriterias:this.view.additionalCriterias})),sort_on:sortOn,sort_order:sortOrder})},"#/"===window.location.hash.substring(0,2)&&(this.queryHelper.currentPath=window.location.hash.substring(1)),Backbone.Paginator.requestPager.prototype.initialize.apply(this,[models,options])},getCurrentPath:function(){return this.queryHelper.getCurrentPath()},setCurrentPath:function(path){this.queryHelper.currentPath=path},pager:function(){this.trigger("pager"),Backbone.Paginator.requestPager.prototype.pager.apply(this,[])},paginator_core:{type:"GET",dataType:"json",url:function(){return this.url}},paginator_ui:{firstPage:1,currentPage:1,perPage:15},server_api:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.perPage,JSON.stringify(this.queryHelper.getBatch(this.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parse:function(response,baseSortIdx){void 0===baseSortIdx&&(baseSortIdx=0),this.totalRecords=response.total;var results=response.results;return _.each(results,function(item,idx){item._sort=idx}),results},comparator:"_sort"})}),define("mockup-patterns-structure-url/js/collections/selected",["backbone","mockup-patterns-structure-url/js/models/result"],function(Backbone,Result){"use strict";return Backbone.Collection.extend({model:Result,removeResult:function(model){return this.removeByUID(model.uid())},removeByUID:function(uid){var found=this.getByUID(uid);return found&&this.remove(found),found},getByUID:function(uid){return this.findWhere({UID:uid})}})}),function(factory){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery)}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function read(s,converter){var value=config.raw?s:function(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(void 0!==value&&!$.isFunction(value)){if("number"==typeof(options=$.extend({},config.defaults,options)).expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",function(value){return encode(config.json?JSON.stringify(value):String(value))}(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var s,result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=(s=parts.shift(),config.raw?s:decodeURIComponent(s)),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0!==$.cookie(key)&&($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),define("mockup-patterns-structure-url/js/views/app",["jquery","underscore","mockup-ui-url/views/toolbar","mockup-ui-url/views/buttongroup","mockup-ui-url/views/button","mockup-ui-url/views/base","mockup-patterns-structure-url/js/views/table","mockup-patterns-structure-url/js/views/selectionwell","mockup-patterns-structure-url/js/views/generic-popover","mockup-patterns-structure-url/js/views/rearrange","mockup-patterns-structure-url/js/views/selectionbutton","mockup-patterns-structure-url/js/views/paging","mockup-patterns-structure-url/js/views/columns","mockup-patterns-structure-url/js/views/textfilter","mockup-patterns-structure-url/js/views/upload","mockup-patterns-structure-url/js/collections/result","mockup-patterns-structure-url/js/collections/selected","mockup-utils","translate","pat-logger","jquery.cookie"],function($,_,Toolbar,ButtonGroup,ButtonView,BaseView,TableView,SelectionWellView,GenericPopover,RearrangeView,SelectionButtonView,PagingView,ColumnsView,TextFilterView,UploadView,_ResultCollection,SelectedCollection,utils,_t,logger){"use strict";var log=logger.getLogger("pat-structure");return BaseView.extend({tagName:"div",status:{type:"none",text:"",label:""},sort_on:"getObjPositionInParent",sort_order:"ascending",additionalCriterias:[],cookieSettingPrefix:"_fc_",pasteAllowed:function(){return!!$.cookie("__cp")},initialize:function(options){var self=this;BaseView.prototype.initialize.apply(self,[options]),self.loading=new utils.Loading,self.loading.show(),$(document).click(function(e){var $el=$(e.target);if($el.is(":visible")&&"hidden"!==$el.css("visibility")&&"0"!==$el.css("opacity")&&!$el.is("a")&&!$el.parent().is("a")){var $popover=$(".popover:visible");if(0<$popover.length&&!$.contains($popover[0],$el[0])){var popover=$popover.data("component");popover&&popover.hide()}}});var ResultCollection=require(options.collectionConstructor);self.collection=new ResultCollection([],{view:self,url:self.options.collectionUrl}),self.setAllCookieSettings(),self.selectedCollection=new SelectedCollection,self.tableView=new TableView({app:self}),self.pagingView=new PagingView({app:self}),self.setupButtons(),self.wellView=new SelectionWellView({collection:self.selectedCollection,triggerView:self.toolbar.get("selected-items"),app:self,id:"structure-well"}),self.toolbar.get("selected-items").disable(),self.buttons.disable();var timeout=0;self.selectedCollection.on("add remove reset",function(){clearTimeout(timeout),timeout=setTimeout(function(){self.updateButtons()},100)},self),self.collection.on("sync",function(){self.contextInfoUrl&&$.ajax({url:self.getAjaxUrl(self.contextInfoUrl),dataType:"json",success:function(data){$("body").trigger("context-info-loaded",[data])},error:function(response){404===response.status&&log.info("context info url not found")}}),self.loading.hide()}),self.collection.on("pager",function(){if(self.loading.show(),self.updateButtons(),window.history&&window.history.pushState)if(self.doNotPushState)self.doNotPushState=!1;else{var url,path=self.getCurrentPath();if("/"===path&&(path=""),self.options.pushStateUrl)url=self.options.pushStateUrl.replace("/{path}","{path}").replace("{path}",path),window.history.pushState(null,null,url);else self.options.urlStructure&&(url=self.options.urlStructure.base+path+self.options.urlStructure.appended,window.history.pushState(null,null,url));self.options.traverseView&&(path=""),$("body").trigger("structure-url-changed",[path])}}),(self.options.pushStateUrl||self.options.urlStructure)&&utils.featureSupport.history()&&($(window).bind("popstate",function(){var base,appended,url=utils.getWindow().location.href;if(-1!==url.indexOf("?")&&(url=url.split("?")[0]),-1!==url.indexOf("#")&&(url=url.split("#")[0]),self.options.pushStateUrl){var tmp=self.options.pushStateUrl.split("{path}");base=tmp[0],appended=tmp[1]}else base=self.options.urlStructure.base,appended=self.options.urlStructure.appended;var path=url.substring(base.length);path.substring(path.length-appended.length)===appended&&(path=path.substring(0,path.length-appended.length)),path||(path="/"),self.setCurrentPath(path),$("body").trigger("structure-url-changed",[path]),self.doNotPushState=!0,self.collection.goTo(self.collection.information.firstPage)}),$(document).bind("keyup keydown",function(e){self.keyEvent=e})),self.togglePasteBtn()},updateButtons:function(){this.selectedCollection.length?(this.toolbar.get("selected-items").enable(),this.buttons.enable()):(this.toolbar.get("selected-items").disable(),this.buttons.disable()),this.togglePasteBtn()},togglePasteBtn:function(){_.find(this.buttons.items,function(btn){return"paste"===btn.id})&&(this.pasteAllowed()?this.buttons.get("paste").enable():this.buttons.get("paste").disable())},inQueryMode:function(){if(this.toolbar&&this.toolbar.get("filter").term)return!0;return 0<this.additionalCriterias.length||(!(!this.sort_on||"getObjPositionInParent"===this.sort_on)||"ascending"!==this.sort_order)},getSelectedUids:function(collection){void 0===collection&&(collection=this.selectedCollection);var uids=[];return collection.each(function(item){uids.push(item.uid())}),uids},getCurrentPath:function(){return this.collection.getCurrentPath()},setCurrentPath:function(path){this.collection.setCurrentPath(path)},getAjaxUrl:function(url){return url.replace("{path}",this.getCurrentPath())},buttonClickEvent:function(button){var self=this,data=null,callback=null;if(button.url){if(self.loading.show(),1<arguments.length){var arg1=arguments[1];arg1.preventDefault||(data=arg1)}if(2<arguments.length){var arg2=arguments[2];"function"==typeof arg2&&(callback=arg2)}null===data&&(data={}),void 0===data.selection&&(data.selection=JSON.stringify(self.getSelectedUids())),data._authenticator=utils.getAuthenticator(),void 0===data.folder&&(data.folder=self.getCurrentPath());var url=self.getAjaxUrl(button.url);$.ajax({url:url,type:"POST",data:data,success:function(data){self.ajaxSuccessResponse.apply(self,[data,callback]),self.loading.hide()},error:function(response){self.ajaxErrorResponse.apply(self,[response,url]),self.loading.hide()}},self)}},ajaxSuccessResponse:function(data,callback){this.selectedCollection.reset(),"success"===data.status&&this.collection.reset(),data.msg&&this.setStatus(data.msg,data.status||"warning"),null!=callback&&callback(data),this.collection.pager()},ajaxErrorResponse:function(response,url){404===response.status?window.alert(_t("operation url ${url} is not valid",{url:url})):window.alert(_t("there was an error performing the action"))},setupButtons:function(){var self=this,items=[],columnsBtn=new ButtonView({id:"attribute-columns",tooltip:_t("Configure displayed columns"),icon:"th"});if(self.columnsView=new ColumnsView({app:self,triggerView:columnsBtn,id:"structure-columns"}),items.push(columnsBtn),items.push(new SelectionButtonView({title:_t("Selected"),id:"selected-items",tooltip:_t("Manage selection"),collection:this.selectedCollection})),self.options.rearrange){var rearrangeButton=new ButtonView({id:"rearrange",title:_t("Rearrange"),icon:"sort-by-attributes",tooltip:_t("Rearrange folder contents"),url:self.options.rearrange.url});self.rearrangeView=new RearrangeView({triggerView:rearrangeButton,app:self,id:"structure-rearrange"}),items.push(rearrangeButton)}if(self.options.upload&&utils.featureSupport.dragAndDrop()&&utils.featureSupport.fileApi()){var uploadButton=new ButtonView({id:"upload",title:_t("Upload"),tooltip:_t("Upload files"),icon:"upload"});self.uploadView=new UploadView({triggerView:uploadButton,app:self}),items.push(uploadButton)}var buttons=[];_.each(self.options.buttons,function(buttonOptions){try{var button=new ButtonView(buttonOptions);if(buttons.push(button),button.form){buttonOptions.triggerView=button,buttonOptions.app=self;var view=new GenericPopover(buttonOptions);self.$el.append(view.el)}else button.on("button:click",self.buttonClickEvent,self)}catch(err){log.error("Error initializing button "+buttonOptions.title+" "+err)}}),self.buttons=new ButtonGroup({items:buttons,id:"mainbuttons",app:self}),items.push(self.buttons),items.push(new TextFilterView({id:"filter",app:this})),this.toolbar=new Toolbar({items:items})},moveItem:function(id,delta,subsetIds){var self=this;$.ajax({url:this.getAjaxUrl(this.options.moveUrl),type:"POST",data:{delta:delta,id:id,_authenticator:utils.getAuthenticator(),subsetIds:JSON.stringify(subsetIds)},dataType:"json",success:function(data){data.msg?self.setStatus(data.msg):"success"!==data.status&&self.setStatus({text:"error moving item",type:"error"}),self.collection.pager()},error:function(){self.setStatus({text:"error moving item",type:"error"})}})},setStatus:function(msg,type,btn){this.status.type=msg?"string"==typeof msg?(this.status.text=msg,this.status.label="",type||"warning"):(this.status.label=msg.label||"",this.status.text=msg.text,msg.type||"warning"):(this.status.text="",this.status.label="","none");var $status=this.$(".status");if(0<$status.length){$status[0].className="alert alert-"+this.status.type+" status";var $text=$("<span></span>");$text.text(this.status.text);var $label=$("<strong></strong>");$label.text(this.status.label),$status.empty().append($label).append($text),btn&&$status.append(btn)}},render:function(){return this.$el.append(this.toolbar.render().el),this.$el.append(this.wellView.render().el),this.$el.append(this.columnsView.render().el),this.rearrangeView&&this.$el.append(this.rearrangeView.render().el),this.uploadView&&this.$el.append(this.uploadView.render().el),this.$el.append(this.tableView.render().el),this.$el.append(this.pagingView.render().el),null!==this.options.backdropSelector?$(this.options.backdropSelector).addClass("ui-backdrop-element"):this.$el.addClass("ui-backdrop-element"),this},getCookieSetting:function(name,_default){var val;void 0===_default&&(_default=null);try{val=$.cookie(this.cookieSettingPrefix+name),val=$.parseJSON(val).value}catch(e){return _default}return null==val?_default:val},setCookieSetting:function(name,val){$.cookie(this.cookieSettingPrefix+name,JSON.stringify({value:val}))},setAllCookieSettings:function(){this.activeColumns=this.getCookieSetting(this.activeColumnsCookie,this.activeColumns);var perPage=this.getCookieSetting("perPage",15);"string"==typeof perPage&&(perPage=parseInt(perPage)),this.collection.howManyPer(perPage)}})}),define("mockup-patterns-structure",["jquery","underscore","pat-base","mockup-patterns-structure-url/js/views/app"],function($,_,Base,AppView){"use strict";return Base.extend({name:"structure",trigger:".pat-structure",parser:"mockup",defaults:{urlStructure:null,vocabularyUrl:null,indexOptionsUrl:null,contextInfoUrl:null,setDefaultPageUrl:null,menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",backdropSelector:".plone-modal",activeColumnsCookie:"activeColumns",attributes:null,_default_attributes:["CreationDate","EffectiveDate","ExpirationDate","exclude_from_nav","getIcon","getMimeIcon","getObjSize","getURL","id","is_folderish","last_comment_date","ModificationDate","path","portal_type","review_state","Subject","Title","total_comments","UID"],activeColumns:null,_default_activeColumns:["ModificationDate","EffectiveDate","review_state"],availableColumns:null,_default_availableColumns:{id:"ID",ModificationDate:"Last modified",EffectiveDate:"Published",ExpirationDate:"Expiration",CreationDate:"Created",review_state:"Review state",Subject:"Tags",portal_type:"Type",is_folderish:"Folder",exclude_from_nav:"Excluded from navigation",getObjSize:"Object Size",last_comment_date:"Last comment date",total_comments:"Total comments"},tableRowItemAction:null,_default_tableRowItemAction:{folder:["mockup-patterns-structure-url/js/navigation","folderClicked"],other:[]},typeToViewAction:null,_default_typeToViewAction:{File:"/view",Image:"/view",Blob:"/view"},collectionConstructor:"mockup-patterns-structure-url/js/collections/result",momentFormat:"L LT",rearrange:{properties:{id:"ID",sortable_title:"Title"},url:"/rearrange"},moveUrl:null,buttons:null,_default_buttons:[{tooltip:"Cut",title:"Cut",url:"/cut"},{tooltip:"Copy",title:"Copy",url:"/copy"},{tooltip:"Paste",title:"Paste",url:"/paste"},{tooltip:"Delete",title:"Delete",url:"/delete",context:"danger",icon:"trash"},{tooltip:"Workflow",title:"Workflow",url:"/workflow"},{tooltip:"Tags",title:"Tags",url:"/tags"},{tooltip:"Properties",title:"Properties",url:"/properties"},{tooltip:"Rename",title:"Rename",url:"/rename"}],datatables_options:{},upload:{uploadMultiple:!0,showTitle:!0}},init:function(){var self=this;_.each(["attributes","activeColumns","availableColumns","buttons","typeToViewAction"],function(idx){null===self.options[idx]&&(self.options[idx]=self.options["_default_"+idx])});_.each(["tableRowItemAction"],function(idx){var old=self.options[idx];self.options[idx]=$.extend(!1,self.options["_default_"+idx],old)}),self.browsing=!0,self.options.collectionUrl=self.options.vocabularyUrl,(self.options.pattern=self).options.queryHelperAttributes=self.options.attributes,delete self.options.attributes,self.view=new AppView(self.options),self.$el.append(self.view.render().$el)}})}),window.jQuery&&define("jquery",[],function(){"use strict";return window.jQuery}),define("mockup-bundles-structure",["jquery","mockup-patterns-datatables","mockup-patterns-modal","mockup-patterns-structure"],function($){"use strict";return $(document).ready(function(){var $structure=$(".pat-structure");if(1===$structure.length){var $container=$structure.parents("#content");0===$container.length&&($container=$structure.parent().parent());var modal=$container.patPloneModal({position:"middle top",width:"95%",title:"Folder Contents",backdropOptions:{closeOnEsc:!1,closeOnClick:!1}}).data("pattern-plone-modal");modal.show(),modal.$modal.find("a.close").on("destroy.plone-modal.patterns",function(){var url,$base=$("base");url=0===$base.length?window.location.href.replace("@@folder_contents","").replace("folder_contents",""):$base.attr("href"),window.location=url})}}),{}}),require(["mockup-bundles-structure"]);
//# sourceMappingURL=++resource++wildcard.foldercontents-structure.min.js.map