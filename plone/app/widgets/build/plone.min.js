var requirejs,require,define;!function(global){var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.2.0",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;function commentReplace(match,multi,multiText,singlePrefix){return singlePrefix||""}function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){var i;if(ary)for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}function eachReverse(ary,func){var i;if(ary)for(i=ary.length-1;-1<i&&(!ary[i]||!func(ary[i],i,ary));i-=1);}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(!deepStringMixin||"object"!=typeof value||!value||isArray(value)||isFunction(value)||value instanceof RegExp?target[prop]=value:(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)))}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),(context=getOwn(contexts,contextName))||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick="undefined"!=typeof setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config,moduleName,url){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser)return(node=req.createNode(config,moduleName,url)).setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,config.onNodeCreated&&config.onNodeCreated(node,config,moduleName,url),currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{setTimeout(function(){},0),importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head||(head=script.parentNode),dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(mainScript=(src=mainScript.split("/")).pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript())&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")]),context?(context.defQueue.push([name,deps,callback]),context.defQueueMap[name]=!0):globalDefQueue.push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}function newContext(contextName){var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;function normalize(name,baseName,applyMap){var mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"];if(name&&(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),function(ary){var i,part;for(i=0;i<ary.length;i++)if("."===(part=ary[i]))ary.splice(i,1),i-=1;else if(".."===part){if(0===i||1===i&&".."===ary[2]||".."===ary[i-1])continue;0<i&&(ary.splice(i-1,2),i-=2)}}(name),name=name.join("/")),applyMap&&map&&(baseParts||starMap)){outerLoop:for(i=(nameParts=name.split("/")).length;0<i;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;0<j;j-=1)if((mapValue=getOwn(map,baseParts.slice(0,j).join("/")))&&(mapValue=getOwn(mapValue,nameSegment))){foundMap=mapValue,foundI=i;break outerLoop}!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return getOwn(config.pkgs,name)||name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName)return scriptNode.parentNode.removeChild(scriptNode),!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&1<pathConfig.length)return pathConfig.shift(),context.require.undef(id),context.makeRequire(null,{skipMap:!0})([id]),!0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return-1<index&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),prefix=(nameParts=splitPrefix(name))[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):-1===name.indexOf("!")?normalize(name,parentName,applyMap):name:(prefix=(nameParts=splitPrefix(normalizedName=normalize(name,parentName,applyMap)))[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!(suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1)),url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap)).error&&"error"===name?fn(mod.error):mod.on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(each(globalDefQueue,function(queueItem){var id=queueItem[0];"string"==typeof id&&(context.defQueueMap[id]=!0),defQueue.push(queueItem)}),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function checkLoaded(){var err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?stillLoading=usingPathFallback=!0:(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return(err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads)).contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){!function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}context.defQueueMap={}}return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine)return mod.exports?defined[mod.map.id]=mod.exports:mod.exports=defined[mod.map.id]={}},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}},(Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0}).prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;if(!this.shim)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&void 0===exports&&((cjsModule=this.module)?exports=cjsModule.exports:this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;if(this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad)){var resLoadMaps=[];each(this.depMaps,function(depMap){resLoadMaps.push(depMap.normalizedMap||depMap)}),req.onResourceLoad(context,this.map,resLoadMaps)}cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(context.defQueueMap,id)||this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),on(normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),"defined",bind(this,function(value){this.map.normalizedMap=normalizedMap,this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),void((normalizedMod=getOwn(registry,normalizedMap.id))&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):bundleId?(this.map.url=context.nameToUrl(bundleId),void this.load()):((load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})})).error=bind(this,function(err){this.inited=!0,(this.error=err).requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){(enabledRegistry[this.map.id]=this).enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.undefed||(this.defineDep(i,depExports),this.check())})),this.errback?on(depMap,"error",bind(this,this.errback)):this.events.error&&on(depMap,"error",bind(this,function(err){this.emit("error",err)}))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},(context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,defQueueMap:{},Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){if(cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/"),"string"==typeof cfg.urlArgs){var urlArgs=cfg.urlArgs;cfg.urlArgs=function(id,url){return(-1===url.indexOf("?")?"?":"&")+urlArgs}}var shim=config.shim,objs={paths:!0,bundles:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?(config[prop]||(config[prop]={}),mixin(config[prop],value,!0,!0)):config[prop]=value}),cfg.bundles&&eachProp(cfg.bundles,function(value,prop){each(value,function(v){v!==prop&&(bundlesMap[v]=prop)})}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&each(cfg.packages,function(pkgObj){var name;name=(pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj).name,pkgObj.location&&(config.paths[name]=pkgObj.location),config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id,null,!0))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){return function(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(id=makeModuleMap(deps,relMap,!1,!0).id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),(requireMod=getModule(makeModuleMap(null,relMap))).skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0];return-1!==index&&(!("."===segment||".."===segment)||1<index)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);mod.undefed=!0,removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],eachReverse(defQueue,function(args,i){args[0]===id&&defQueue.splice(i,1)}),delete context.defQueueMap[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){getOwn(registry,depMap.id)&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(context.defQueueMap={},mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain&&(moduleName=pkgMain),bundleId=getOwn(bundlesMap,moduleName))return context.nameToUrl(bundleId,ext,skipExt);if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,i=(syms=moduleName.split("/")).length;0<i;i-=1)if(parentPath=getOwn(paths,syms.slice(0,i).join("/"))){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}url=syms.join("/"),url=("/"===(url+=ext||(/^data\:|^blob\:|\?/.test(url)||skipExt?"":".js")).charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs&&!/^blob\:/.test(url)?url+config.urlArgs(moduleName,url):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){var parents=[];return eachProp(registry,function(value,key){0!==key.indexOf("_@r")&&each(value.depMaps,function(depMap){if(depMap.id===data.id)return parents.push(key),!0})}),onError(makeError("scripterror",'Script error for "'+data.id+(parents.length?'", needed by: '+parents.join(", "):'"'),evt,[data.id]))}}}).require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState||eachReverse(scripts(),function(script){if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript}}(this),define("node_modules/requirejs/require.js",function(){}),function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){var deletedIds=[],slice=deletedIds.slice,concat=deletedIds.concat,push=deletedIds.push,indexOf=deletedIds.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};function isArraylike(obj){var length="length"in obj&&obj.length,type=jQuery.type(obj);return"function"!==type&&!jQuery.isWindow(obj)&&(!(1!==obj.nodeType||!length)||("array"===type||0===length||"number"==typeof length&&0<length&&length-1 in obj))}jQuery.fn=jQuery.prototype={jquery:"1.11.3",constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(0<=j&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:deletedIds.sort,splice:deletedIds.splice},jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);i<length;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],target!==(copy=options[name])&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(clone=copyIsArray?(copyIsArray=!1,src&&jQuery.isArray(src)?src:[]):src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+("1.11.3"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&0<=obj-parseFloat(obj)+1},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(support.ownLast)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return void 0===key||hasOwn.call(obj,key)},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;i<length&&!1!==callback.apply(obj[i],args);i++);else for(i in obj)if(!1===callback.apply(obj[i],args))break}else if(isArray)for(;i<length&&!1!==callback.call(obj[i],i,obj[i]);i++);else for(i in obj)if(!1===callback.call(obj[i],i,obj[i]))break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);for(len=arr.length,i=i?i<0?Math.max(0,len+i):i:0;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;j<len;)first[i++]=second[j++];if(len!=len)for(;void 0!==second[j];)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,invert){for(var matches=[],i=0,length=elems.length,callbackExpect=!invert;i<length;i++)!callback(elems[i],i)!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,ret=[];if(isArraylike(elems))for(;i<length;i++)null!=(value=callback(elems[i],i,arg))&&ret.push(value);else for(i in elems)null!=(value=callback(elems[i],i,arg))&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;if("string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn))return args=slice.call(arguments,2),(proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))}).guid=fn.guid=fn.guid||jQuery.guid++,proxy},now:function(){return+new Date},support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;i<len;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),results=results||[],nodeType=(context=context||document).nodeType,"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&documentIsHTML){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=1!==nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];return function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||1<<31)-(~a.sourceIndex||1<<31);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(docElem=(document=doc).documentElement,(parent=doc.defaultView)&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),documentIsHTML=!isXML(doc),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=void 0!==elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return void 0!==context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"!==tag)return results;for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\f]' msallowcapture=''><option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&-1<result.indexOf(check):"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?-1<(" "+result.replace(rwhitespace," ")+" ").indexOf(check):"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&0<=diff/first}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}}).pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if((oldCache=(outerCache=elem[expando]||(elem[expando]={}))[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if((outerCache[dir]=newCache)[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(temp=postFinder?indexOf(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf(checkContext,elem)},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)(cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);(cached=compilerCache(selector,function(elementMatchers,setMatchers){var bySet=0<setMatchers.length,byElement=0<elementMatchers.length,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}(elementMatchers,setMatchers))).selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(2<(tokens=match[0]=match[0].slice(0)).length&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML)return elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){if(!isXML&&"input"===elem.nodeName.toLowerCase())return elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;if(!isXML)return!0===elem[name]?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return 0<=jQuery.inArray(elem,qualifier)!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;i<len;i++)jQuery.find(selector,self[i],ret);return(ret=this.pushStack(1<len?jQuery.unique(ret):ret)).selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,document=window.document,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"!=typeof selector)return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?void 0!==rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this));if(!(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&3<=selector.length?[null,selector,null]:rquickExpr.exec(selector))||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if((elem=document.getElementById(match[2]))&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}).prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};function sibling(cur,dir){for(;(cur=cur[dir])&&1!==cur.nodeType;);return cur}jQuery.extend({dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(void 0===until||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}}),jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;i<l;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?-1<pos.index(cur):1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(1<matched.length?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),1<this.length&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}});var readyList,rnotwhite=/\S+/g,optionsCache={};function detach(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))}function completed(){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())}jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||function(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingIndex<firingLength;firingIndex++)if(!1===list[firingIndex].apply(data[0],data[1])&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;-1<(index=jQuery.inArray(arg,list,index));)list.splice(index,1),firing&&(index<=firingLength&&firingLength--,index<=firingIndex&&firingIndex--)}),this},has:function(fn){return fn?-1<jQuery.inArray(fn,list):!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=[context,(args=args||[]).slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=1<arguments.length?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(1<length)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);i<length;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}}),jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(!0===wait?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);(jQuery.isReady=!0)!==wait&&0<--jQuery.readyWait||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready")))}}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)};var i,strundefined="undefined";for(i in jQuery(support))break;support.ownLast="0"!==i,support.inlineBlockNeedsLayout=!1,jQuery(function(){var val,div,body,container;(body=document.getElementsByTagName("body")[0])&&body.style&&(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",support.inlineBlockNeedsLayout=val=3===div.offsetWidth,val&&(body.style.zoom=1)),body.removeChild(container))}),function(){var div=document.createElement("div");if(null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}div=null}(),jQuery.acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return(1===nodeType||9===nodeType)&&(!noData||!0!==noData&&elem.getAttribute("classid")===noData)};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){if(void 0===data&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if("string"==typeof(data=elem.getAttribute(name))){try{data="true"===data||"false"!==data&&("null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data)}catch(e){}jQuery.data(elem,key,data)}else data=void 0}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||void 0!==data||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),"object"!=typeof name&&"function"!=typeof name||(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),void 0!==data&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?null==(ret=thisCache[name])&&(ret=thisCache[jQuery.camelCase(name)]):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){i=(name=jQuery.isArray(name)?name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?[name]:(name=jQuery.camelCase(name))in thisCache?[name]:name.split(" ")).length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}jQuery.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return!!(elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando])&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0!==key)return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):1<arguments.length?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):void 0;if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(i=attrs.length;i--;)attrs[i]&&0===(name=attrs[i].name).indexOf("data-")&&dataAttr(elem,name=jQuery.camelCase(name.slice(5)),data[name]);jQuery._data(elem,"parsedAttrs",!0)}return data},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;if(elem)return type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type);"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)(tmp=jQuery._data(elements[i],type+"queueHooks"))&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key))for(i in chainable=!0,key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw);else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(fn=raw?(fn.call(elems,value),null):(bulk=fn,function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;i<length;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},rcheckableType=/^(?:checkbox|radio)$/i;!function(){var input=document.createElement("input"),div=document.createElement("div"),fragment=document.createDocumentFragment();if(div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,input.type="checkbox",input.checked=!0,fragment.appendChild(input),support.appendChecked=input.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,fragment.appendChild(div),div.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,support.noCloneEvent=!0,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click()),null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}}(),function(){var i,eventName,div=document.createElement("div");for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,(support[i+"Bubbles"]=eventName in window)||(div.setAttribute(eventName,"t"),support[i+"Bubbles"]=!1===div.attributes[eventName].expando);div=null}();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handler=(handleObjIn=handler).handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||((eventHandle=elemData.handle=function(e){return typeof jQuery===strundefined||e&&jQuery.event.triggered===e.type?void 0:jQuery.event.dispatch.apply(eventHandle.elem,arguments)}).elem=elem),t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||((handlers=events[type]=[]).delegateCount=0,special.setup&&!1!==special.setup.call(elem,data,namespaces,eventHandle)||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(t=(types=(types||"").match(rnotwhite)||[""]).length;t--;)if(type=origType=(tmp=rtypenamespace.exec(types[t])||[])[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},handlers=events[type=(selector?special.delegateType:special.bindType)||type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&!1!==special.teardown.call(elem,namespaces,elemData.handle)||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(0<=type.indexOf(".")&&(type=(namespaces=type.split(".")).shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,(event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event)).isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||!1!==special.trigger.apply(elem,data))){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=1<i?bubbleType:special.bindType||type,(handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"))&&handle.apply(cur,data),(handle=ontype&&cur[ontype])&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),!1===event.result&&event.preventDefault());if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||!1===special._default.apply(eventPath.pop(),data))&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){(tmp=elem[ontype])&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue,args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if((args[0]=event).delegateTarget=this,!special.preDispatch||!1!==special.preDispatch.call(this,event)){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)event.namespace_re&&!event.namespace_re.test(handleObj.namespace)||(event.handleObj=handleObj,event.data=handleObj.data,void 0!==(ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args))&&!1===(event.result=ret)&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(!0!==cur.disabled||"click"!==event.type)){for(matches=[],i=0;i<delegateCount;i++)void 0===matches[sel=(handleObj=handlers[i]).selector+" "]&&(matches[sel]=handleObj.needsContext?0<=jQuery(sel,this).index(cur):jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)event[prop=copy[i]]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(doc=(eventDoc=event.target.ownerDocument||document).documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&!1===src.returnValue?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,related=event.relatedTarget,handleObj=event.handleObj;return related&&(related===this||jQuery.contains(this,related))||(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.submitBubbles||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:void 0;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),support.changeBubbles||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1;jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type)return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);attaches||doc.addEventListener(orig,handler,!0),jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;attaches?jQuery._data(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),jQuery._removeData(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){for(type in"string"!=typeof selector&&(data=data||selector,selector=void 0),types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),!1===fn)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,(fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)}).guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"!=typeof types)return!1!==selector&&"function"!=typeof selector||(fn=selector,selector=void 0),!1===fn&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)});for(type in types)this.off(type,selector,types[type]);return this},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem)return jQuery.event.trigger(type,data,elem,!0)}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},fragmentDiv=createSafeFragment(document).appendChild(document.createElement("div"));function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==strundefined?context.querySelectorAll(tag||"*"):void 0;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events)for(type in delete curData.handle,curData.events={},events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i]);curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!support.noCloneEvent&&dest[jQuery.expando]){for(e in(data=jQuery._data(dest)).events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:"input"!==nodeName&&"textarea"!==nodeName||(dest.defaultValue=src.defaultValue)}}wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(support.noCloneEvent&&support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return 0<(destElements=getAll(clone,"script")).length&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;i<l;i++)if((elem=elems[i])||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!support.tbody)for(j=(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild)&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(data=(id=elem[internalKey])&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,deletedIds.push(id))}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||manipulationTarget(this,elem).appendChild(elem)})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null!=dataAndEvents&&dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):void 0;if("string"==typeof value&&!rnoInnerhtml.test(value)&&(support.htmlSerialize||!rnoshimcache.test(value))&&(support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)1===(elem=this[i]||{}).nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||1<l&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(first=(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this)).firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(hasScripts=(scripts=jQuery.map(getAll(fragment,"script"),disableScript)).length;i<l;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;i<hasScripts;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;i<=last;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,shrinkWrapBlocksVal,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||("none"!==(display=actualDisplay(nodeName,doc))&&display||((doc=((iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement))[0].contentWindow||iframe[0].contentDocument).document).write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}support.shrinkWrapBlocks=function(){return null!=shrinkWrapBlocksVal?shrinkWrapBlocksVal:(shrinkWrapBlocksVal=!1,(body=document.getElementsByTagName("body")[0])&&body.style?(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",div.appendChild(document.createElement("div")).style.width="5px",shrinkWrapBlocksVal=3!==div.offsetWidth),body.removeChild(container),shrinkWrapBlocksVal):void 0);var div,body,container};var getStyles,curCSS,rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),rposition=/^(top|right|bottom|left)$/;function addGetHookIf(conditionFn,hookFn){return{get:function(){var condition=conditionFn();if(null!=condition){if(!condition)return(this.get=hookFn).apply(this,arguments);delete this.get}}}}window.getComputedStyle?(getStyles=function(elem){return elem.ownerDocument.defaultView.opener?elem.ownerDocument.defaultView.getComputedStyle(elem,null):window.getComputedStyle(elem,null)},curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return ret=(computed=computed||getStyles(elem))?computed.getPropertyValue(name)||computed[name]:void 0,computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0===ret?ret:ret+""}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;return null==(ret=(computed=computed||getStyles(elem))?computed[name]:void 0)&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,(rsLeft=(rs=elem.runtimeStyle)&&rs.left)&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),void 0===ret?ret:ret+""||"auto"}),function(){var div,style,a,pixelPositionVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal;function computeStyleTests(){var div,body,container,contents;(body=document.getElementsByTagName("body")[0])&&body.style&&(div=document.createElement("div"),(container=document.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",pixelPositionVal=boxSizingReliableVal=!1,reliableMarginRightVal=!0,window.getComputedStyle&&(pixelPositionVal="1%"!==(window.getComputedStyle(div,null)||{}).top,boxSizingReliableVal="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,(contents=div.appendChild(document.createElement("div"))).style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",contents.style.marginRight=contents.style.width="0",div.style.width="1px",reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents,null)||{}).marginRight),div.removeChild(contents)),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(contents=div.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(reliableHiddenOffsetsVal=0===contents[0].offsetHeight)&&(contents[0].style.display="",contents[1].style.display="none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight),body.removeChild(container))}(div=document.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(style=(a=div.getElementsByTagName("a")[0])&&a.style)&&(style.cssText="float:left;opacity:.5",support.opacity="0.5"===style.opacity,support.cssFloat=!!style.cssFloat,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,support.boxSizing=""===style.boxSizing||""===style.MozBoxSizing||""===style.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==reliableHiddenOffsetsVal&&computeStyleTests(),reliableHiddenOffsetsVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computeStyleTests(),boxSizingReliableVal},pixelPosition:function(){return null==pixelPositionVal&&computeStyleTests(),pixelPositionVal},reliableMarginRight:function(){return null==reliableMarginRightVal&&computeStyleTests(),reliableMarginRightVal}}))}(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];for(name in ret=callback.apply(elem,args||[]),options)elem.style[name]=old[name];return ret};var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if((name=cssPrefixes[i]+capName)in style)return name;return origName}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;index<length;index++)(elem=elements[index]).style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;index<length;index++)(elem=elements[index]).style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;i<4;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(val<=0||null==val){if(((val=curCSS(elem,name,styles))<0||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];if("string"===(type=typeof value)&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null!=value&&value==value&&("number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),!(hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),(hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName])&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),!0===extra||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(0,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";((style.zoom=1)<=value||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed)return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;i<len;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,1<arguments.length)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),((jQuery.Tween=Tween).prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}}).init.prototype=Tween.prototype,(Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""))&&"auto"!==result?result:0:tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}}).scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,input,div,select,a,opt,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[function(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(null==(hooks=jQuery._queueHooks(elem,"fx")).unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})}));1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),"inline"===("none"===display?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display)&&"none"===jQuery.css(elem,"float")&&(support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block"));opts.overflow&&(style.overflow="hidden",support.shrinkWrapBlocks()||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else for(prop in dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;for(prop in jQuery._removeData(elem,"fxshow"),orig)jQuery.style(elem,prop,orig[prop])}),orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit)for(unit=unit||start[3],parts=parts||[],start=+target||1;start/=scale=scale||".5",jQuery.style(tween.elem,prop,start+unit),scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations;);return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;i<4;i+=2-includeWidth)attrs["margin"+(which=cssExpand[i])]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;index<length;index++)if(tween=collection[index].call(animation,prop,value))return tween}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),percent=1-(remaining/animation.duration||0),index=0,length=animation.tweens.length;index<length;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),percent<1&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;index<length;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(!function(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(easing=specialEasing[name=jQuery.camelCase(index)],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),(hooks=jQuery.cssHooks[name])&&"expand"in hooks)for(index in value=hooks.expand(value),delete props[name],value)index in props||(props[index]=value[index],specialEasing[index]=easing);else specialEasing[name]=easing}(props,animation.opts.specialEasing);index<length;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){for(var prop,index=0,length=(props=jQuery.isFunction(props)?(callback=props,["*"]):props.split(" ")).length;index<length;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,null!=opt.queue&&!0!==opt.queue||(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||!1===optall.queue?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&!1!==type&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));!dequeue&&gotoEnd||jQuery.dequeue(this,type)})},finish:function(type){return!1!==type&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;index<length;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)(timer=timers[i])()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx&&jQuery.fx.speeds[time]||time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},(div=document.createElement("div")).setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],opt=(select=document.createElement("select")).appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px",support.getSetAttribute="t"!==div.className,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,select.disabled=!0,support.optDisabled=!opt.disabled,(input=document.createElement("input")).setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value;var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];return arguments.length?(isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(null==(val=isFunction?value.call(this,i,jQuery(this).val()):value)?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),(hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()])&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))})):elem?(hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()])&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:"string"==typeof(ret=elem.value)?ret.replace(rreturn,""):null==ret?"":ret:void 0}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;i<max;i++)if(((option=options[i]).selected||i===index)&&(support.optDisabled?!option.disabled:null===option.getAttribute("disabled"))&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],0<=jQuery.inArray(jQuery.valHooks.option.get(option),values))try{option.selected=optionSet=!0}catch(_){option.scrollHeight}else option.selected=!1;return optionSet||(elem.selectedIndex=-1),options}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value))return elem.checked=0<=jQuery.inArray(jQuery(elem).val(),value)}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,1<arguments.length)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:null==(ret=jQuery.find.attr(elem,name))?void 0:ret:null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return!1===value?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}:function(elem,name,isXML){if(!isXML)return elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){if(!jQuery.nodeName(elem,"input"))return nodeHook&&nodeHook.set(elem,value,name);elem.defaultValue=value}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name))return value}},attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;if(!isXML)return(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);if(ret&&ret.specified)return ret.value},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""!==value&&value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){if(""===value)return elem.setAttribute(name,"auto"),value}}})),support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||void 0},set:function(elem,value){return elem.style.cssText=value+""}});var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,1<arguments.length)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=void 0,delete this[name]}catch(e){}})}}),jQuery.extend({propFix:{for:"htmlFor",class:"className"},prop:function(elem,name,value){var ret,hooks,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return(1!==nType||!jQuery.isXMLDoc(elem))&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),support.enctype||(jQuery.propFix.enctype="encoding");var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];i<len;i++)if(cur=1===(elem=this[i]).nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;0<=cur.indexOf(" "+clazz+" ");)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else type!==strundefined&&"boolean"!==type||(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||!1===value?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;i<l;i++)if(1===this[i].nodeType&&0<=(" "+this[i].className+" ").replace(rclass," ").indexOf(className))return!0;return!1}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return 0<arguments.length?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/,rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)},jQuery.parseXML=function(data){var xml;if(!data||"string"!=typeof data)return null;try{window.DOMParser?xml=(new DOMParser).parseFromString(data,"text/xml"):((xml=new ActiveXObject("Microsoft.XMLDOM")).async="false",xml.loadXML(data))}catch(e){xml=void 0}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){(ajaxLocation=document.createElement("a")).href="",ajaxLocation=ajaxLocation.href}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType.charAt(0)?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){"object"==typeof url&&(options=url,url=void 0),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(state<2)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;for(i in(fireGlobals=jQuery.event&&s.global)&&0==jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),!1===s.cache&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&!1!==s.contentType||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]),s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(!1===s.beforeSend.call(callbackContext,jqXHR,s)||2===state))return jqXHR.abort();for(i in strAbort="abort",{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&0<s.timeout&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}else done(-1,"No Transport");function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=0<status?4:0,isSuccess=200<=status&&status<300||304===status,responses&&(response=function(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}(s,jqXHR,responses)),response=function(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(!(conv=converters[prev+" "+current]||converters["* "+current]))for(conv2 in converters)if((tmp=conv2.split(" "))[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){!0===conv?conv=converters[conv2]:!0!==converters[conv2]&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(!0!==conv)if(conv&&s.throws)response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&((modified=jqXHR.getResponseHeader("Last-Modified"))&&(jQuery.lastModified[cacheURL]=modified),(modified=jqXHR.getResponseHeader("etag"))&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,isSuccess=!(error=response.error))):(error=statusText,!status&&statusText||(statusText="error",status<0&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets()&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}window.attachEvent&&window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key](void 0,!0)}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,(xhrSupported=support.ajax=!!xhrSupported)&&jQuery.ajaxTransport(function(options){var callback;if(!options.crossDomain||support.cors)return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];for(i in options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest"),headers)void 0!==headers[i]&&xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null),callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||4===xhr.readyState))if(delete xhrCallbacks[id],callback=void 0,xhr.onreadystatechange=jQuery.noop,isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!options.isLocal||options.crossDomain?1223===status&&(status=204):status=responses.text?200:404}responses&&complete(status,statusText,responses,xhr.getAllResponseHeaders())},options.async?4===xhr.readyState?setTimeout(callback):xhr.onreadystatechange=xhrCallbacks[id]=callback:callback()},abort:function(){callback&&callback(void 0,!0)}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){(script=document.createElement("script")).async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=!1!==s.jsonp&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||"jsonp"===s.dataTypes[0])return callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):!1!==s.jsonp&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return 0<=off&&(selector=jQuery.trim(url.slice(off,url.length)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),0<self.length&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType&&(elem.defaultView||elem.parentWindow)}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),curLeft=("absolute"===position||"fixed"===position)&&-1<jQuery.inArray("auto",[curCSSTop,curCSSLeft])?(curTop=(curPosition=curElem.position()).top,curPosition.left):(curTop=parseFloat(curCSSTop)||0,parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;return doc?(docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box):void 0},position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(void 0===val)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed)return computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(!0===margin||!0===value?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery}),function(){var root=this,previousUnderscore=root._,ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype,push=ArrayProto.push,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind,nativeCreate=Object.create,Ctor=function(){},_=function(obj){return obj instanceof _?obj:this instanceof _?void(this._wrapped=obj):new _(obj)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):root._=_,_.VERSION="1.8.3";var optimizeCb=function(func,context,argCount){if(void 0===context)return func;switch(null==argCount?3:argCount){case 1:return function(value){return func.call(context,value)};case 2:return function(value,other){return func.call(context,value,other)};case 3:return function(value,index,collection){return func.call(context,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(context,accumulator,value,index,collection)}}return function(){return func.apply(context,arguments)}},cb=function(value,context,argCount){return null==value?_.identity:_.isFunction(value)?optimizeCb(value,context,argCount):_.isObject(value)?_.matcher(value):_.property(value)};_.iteratee=function(value,context){return cb(value,context,1/0)};var createAssigner=function(keysFunc,undefinedOnly){return function(obj){var length=arguments.length;if(length<2||null==obj)return obj;for(var index=1;index<length;index++)for(var source=arguments[index],keys=keysFunc(source),l=keys.length,i=0;i<l;i++){var key=keys[i];undefinedOnly&&void 0!==obj[key]||(obj[key]=source[key])}return obj}},baseCreate=function(prototype){if(!_.isObject(prototype))return{};if(nativeCreate)return nativeCreate(prototype);Ctor.prototype=prototype;var result=new Ctor;return Ctor.prototype=null,result},property=function(key){return function(obj){return null==obj?void 0:obj[key]}},MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(collection){var length=getLength(collection);return"number"==typeof length&&0<=length&&length<=MAX_ARRAY_INDEX};function createReduce(dir){return function(obj,iteratee,memo,context){iteratee=optimizeCb(iteratee,context,4);var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0<dir?0:length-1;return arguments.length<3&&(memo=obj[keys?keys[index]:index],index+=dir),function(obj,iteratee,memo,keys,index,length){for(;0<=index&&index<length;index+=dir){var currentKey=keys?keys[index]:index;memo=iteratee(memo,obj[currentKey],currentKey,obj)}return memo}(obj,iteratee,memo,keys,index,length)}}_.each=_.forEach=function(obj,iteratee,context){var i,length;if(iteratee=optimizeCb(iteratee,context),isArrayLike(obj))for(i=0,length=obj.length;i<length;i++)iteratee(obj[i],i,obj);else{var keys=_.keys(obj);for(i=0,length=keys.length;i<length;i++)iteratee(obj[keys[i]],keys[i],obj)}return obj},_.map=_.collect=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,results=Array(length),index=0;index<length;index++){var currentKey=keys?keys[index]:index;results[index]=iteratee(obj[currentKey],currentKey,obj)}return results},_.reduce=_.foldl=_.inject=createReduce(1),_.reduceRight=_.foldr=createReduce(-1),_.find=_.detect=function(obj,predicate,context){var key;if(void 0!==(key=isArrayLike(obj)?_.findIndex(obj,predicate,context):_.findKey(obj,predicate,context))&&-1!==key)return obj[key]},_.filter=_.select=function(obj,predicate,context){var results=[];return predicate=cb(predicate,context),_.each(obj,function(value,index,list){predicate(value,index,list)&&results.push(value)}),results},_.reject=function(obj,predicate,context){return _.filter(obj,_.negate(cb(predicate)),context)},_.every=_.all=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(!predicate(obj[currentKey],currentKey,obj))return!1}return!0},_.some=_.any=function(obj,predicate,context){predicate=cb(predicate,context);for(var keys=!isArrayLike(obj)&&_.keys(obj),length=(keys||obj).length,index=0;index<length;index++){var currentKey=keys?keys[index]:index;if(predicate(obj[currentKey],currentKey,obj))return!0}return!1},_.contains=_.includes=_.include=function(obj,item,fromIndex,guard){return isArrayLike(obj)||(obj=_.values(obj)),("number"!=typeof fromIndex||guard)&&(fromIndex=0),0<=_.indexOf(obj,item,fromIndex)},_.invoke=function(obj,method){var args=slice.call(arguments,2),isFunc=_.isFunction(method);return _.map(obj,function(value){var func=isFunc?method:value[method];return null==func?func:func.apply(value,args)})},_.pluck=function(obj,key){return _.map(obj,_.property(key))},_.where=function(obj,attrs){return _.filter(obj,_.matcher(attrs))},_.findWhere=function(obj,attrs){return _.find(obj,_.matcher(attrs))},_.max=function(obj,iteratee,context){var value,computed,result=-1/0,lastComputed=-1/0;if(null==iteratee&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)value=obj[i],result<value&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){computed=iteratee(value,index,list),(lastComputed<computed||computed===-1/0&&result===-1/0)&&(result=value,lastComputed=computed)});return result},_.min=function(obj,iteratee,context){var value,computed,result=1/0,lastComputed=1/0;if(null==iteratee&&null!=obj)for(var i=0,length=(obj=isArrayLike(obj)?obj:_.values(obj)).length;i<length;i++)(value=obj[i])<result&&(result=value);else iteratee=cb(iteratee,context),_.each(obj,function(value,index,list){((computed=iteratee(value,index,list))<lastComputed||computed===1/0&&result===1/0)&&(result=value,lastComputed=computed)});return result},_.shuffle=function(obj){for(var rand,set=isArrayLike(obj)?obj:_.values(obj),length=set.length,shuffled=Array(length),index=0;index<length;index++)(rand=_.random(0,index))!==index&&(shuffled[index]=shuffled[rand]),shuffled[rand]=set[index];return shuffled},_.sample=function(obj,n,guard){return null==n||guard?(isArrayLike(obj)||(obj=_.values(obj)),obj[_.random(obj.length-1)]):_.shuffle(obj).slice(0,Math.max(0,n))},_.sortBy=function(obj,iteratee,context){return iteratee=cb(iteratee,context),_.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iteratee(value,index,list)}}).sort(function(left,right){var a=left.criteria,b=right.criteria;if(a!==b){if(b<a||void 0===a)return 1;if(a<b||void 0===b)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,iteratee,context){var result={};return iteratee=cb(iteratee,context),_.each(obj,function(value,index){var key=iteratee(value,index,obj);behavior(result,value,key)}),result}};_.groupBy=group(function(result,value,key){_.has(result,key)?result[key].push(value):result[key]=[value]}),_.indexBy=group(function(result,value,key){result[key]=value}),_.countBy=group(function(result,value,key){_.has(result,key)?result[key]++:result[key]=1}),_.toArray=function(obj){return obj?_.isArray(obj)?slice.call(obj):isArrayLike(obj)?_.map(obj,_.identity):_.values(obj):[]},_.size=function(obj){return null==obj?0:isArrayLike(obj)?obj.length:_.keys(obj).length},_.partition=function(obj,predicate,context){predicate=cb(predicate,context);var pass=[],fail=[];return _.each(obj,function(value,key,obj){(predicate(value,key,obj)?pass:fail).push(value)}),[pass,fail]},_.first=_.head=_.take=function(array,n,guard){if(null!=array)return null==n||guard?array[0]:_.initial(array,array.length-n)},_.initial=function(array,n,guard){return slice.call(array,0,Math.max(0,array.length-(null==n||guard?1:n)))},_.last=function(array,n,guard){if(null!=array)return null==n||guard?array[array.length-1]:_.rest(array,Math.max(0,array.length-n))},_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,null==n||guard?1:n)},_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,strict,startIndex){for(var output=[],idx=0,i=startIndex||0,length=getLength(input);i<length;i++){var value=input[i];if(isArrayLike(value)&&(_.isArray(value)||_.isArguments(value))){shallow||(value=flatten(value,shallow,strict));var j=0,len=value.length;for(output.length+=len;j<len;)output[idx++]=value[j++]}else strict||(output[idx++]=value)}return output};function createPredicateIndexFinder(dir){return function(array,predicate,context){predicate=cb(predicate,context);for(var length=getLength(array),index=0<dir?0:length-1;0<=index&&index<length;index+=dir)if(predicate(array[index],index,array))return index;return-1}}function createIndexFinder(dir,predicateFind,sortedIndex){return function(array,item,idx){var i=0,length=getLength(array);if("number"==typeof idx)0<dir?i=0<=idx?idx:Math.max(idx+length,i):length=0<=idx?Math.min(idx+1,length):idx+length+1;else if(sortedIndex&&idx&&length)return array[idx=sortedIndex(array,item)]===item?idx:-1;if(item!=item)return 0<=(idx=predicateFind(slice.call(array,i,length),_.isNaN))?idx+i:-1;for(idx=0<dir?i:length-1;0<=idx&&idx<length;idx+=dir)if(array[idx]===item)return idx;return-1}}_.flatten=function(array,shallow){return flatten(array,shallow,!1)},_.without=function(array){return _.difference(array,slice.call(arguments,1))},_.uniq=_.unique=function(array,isSorted,iteratee,context){_.isBoolean(isSorted)||(context=iteratee,iteratee=isSorted,isSorted=!1),null!=iteratee&&(iteratee=cb(iteratee,context));for(var result=[],seen=[],i=0,length=getLength(array);i<length;i++){var value=array[i],computed=iteratee?iteratee(value,i,array):value;isSorted?(i&&seen===computed||result.push(value),seen=computed):iteratee?_.contains(seen,computed)||(seen.push(computed),result.push(value)):_.contains(result,value)||result.push(value)}return result},_.union=function(){return _.uniq(flatten(arguments,!0,!0))},_.intersection=function(array){for(var result=[],argsLength=arguments.length,i=0,length=getLength(array);i<length;i++){var item=array[i];if(!_.contains(result,item)){for(var j=1;j<argsLength&&_.contains(arguments[j],item);j++);j===argsLength&&result.push(item)}}return result},_.difference=function(array){var rest=flatten(arguments,!0,!0,1);return _.filter(array,function(value){return!_.contains(rest,value)})},_.zip=function(){return _.unzip(arguments)},_.unzip=function(array){for(var length=array&&_.max(array,getLength).length||0,result=Array(length),index=0;index<length;index++)result[index]=_.pluck(array,index);return result},_.object=function(list,values){for(var result={},i=0,length=getLength(list);i<length;i++)values?result[list[i]]=values[i]:result[list[i][0]]=list[i][1];return result},_.findIndex=createPredicateIndexFinder(1),_.findLastIndex=createPredicateIndexFinder(-1),_.sortedIndex=function(array,obj,iteratee,context){for(var value=(iteratee=cb(iteratee,context,1))(obj),low=0,high=getLength(array);low<high;){var mid=Math.floor((low+high)/2);iteratee(array[mid])<value?low=mid+1:high=mid}return low},_.indexOf=createIndexFinder(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFinder(-1,_.findLastIndex),_.range=function(start,stop,step){null==stop&&(stop=start||0,start=0),step=step||1;for(var length=Math.max(Math.ceil((stop-start)/step),0),range=Array(length),idx=0;idx<length;idx++,start+=step)range[idx]=start;return range};var executeBound=function(sourceFunc,boundFunc,context,callingContext,args){if(!(callingContext instanceof boundFunc))return sourceFunc.apply(context,args);var self=baseCreate(sourceFunc.prototype),result=sourceFunc.apply(self,args);return _.isObject(result)?result:self};_.bind=function(func,context){if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError("Bind must be called on a function");var args=slice.call(arguments,2),bound=function(){return executeBound(func,bound,context,this,args.concat(slice.call(arguments)))};return bound},_.partial=function(func){var boundArgs=slice.call(arguments,1),bound=function(){for(var position=0,length=boundArgs.length,args=Array(length),i=0;i<length;i++)args[i]=boundArgs[i]===_?arguments[position++]:boundArgs[i];for(;position<arguments.length;)args.push(arguments[position++]);return executeBound(func,bound,this,this,args)};return bound},_.bindAll=function(obj){var i,key,length=arguments.length;if(length<=1)throw new Error("bindAll must be passed function names");for(i=1;i<length;i++)obj[key=arguments[i]]=_.bind(obj[key],obj);return obj},_.memoize=function(func,hasher){var memoize=function(key){var cache=memoize.cache,address=""+(hasher?hasher.apply(this,arguments):key);return _.has(cache,address)||(cache[address]=func.apply(this,arguments)),cache[address]};return memoize.cache={},memoize},_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)},_.defer=_.partial(_.delay,_,1),_.throttle=function(func,wait,options){var context,args,result,timeout=null,previous=0;options||(options={});var later=function(){previous=!1===options.leading?0:_.now(),timeout=null,result=func.apply(context,args),timeout||(context=args=null)};return function(){var now=_.now();previous||!1!==options.leading||(previous=now);var remaining=wait-(now-previous);return context=this,args=arguments,remaining<=0||wait<remaining?(timeout&&(clearTimeout(timeout),timeout=null),previous=now,result=func.apply(context,args),timeout||(context=args=null)):timeout||!1===options.trailing||(timeout=setTimeout(later,remaining)),result}},_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=_.now()-timestamp;last<wait&&0<=last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),timeout||(context=args=null)))};return function(){context=this,args=arguments,timestamp=_.now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},_.wrap=function(func,wrapper){return _.partial(wrapper,func)},_.negate=function(predicate){return function(){return!predicate.apply(this,arguments)}},_.compose=function(){var args=arguments,start=args.length-1;return function(){for(var i=start,result=args[start].apply(this,arguments);i--;)result=args[i].call(this,result);return result}},_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}},_.before=function(times,func){var memo;return function(){return 0<--times&&(memo=func.apply(this,arguments)),times<=1&&(func=null),memo}},_.once=_.partial(_.before,2);var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(obj,keys){var nonEnumIdx=nonEnumerableProps.length,constructor=obj.constructor,proto=_.isFunction(constructor)&&constructor.prototype||ObjProto,prop="constructor";for(_.has(obj,prop)&&!_.contains(keys,prop)&&keys.push(prop);nonEnumIdx--;)(prop=nonEnumerableProps[nonEnumIdx])in obj&&obj[prop]!==proto[prop]&&!_.contains(keys,prop)&&keys.push(prop)}_.keys=function(obj){if(!_.isObject(obj))return[];if(nativeKeys)return nativeKeys(obj);var keys=[];for(var key in obj)_.has(obj,key)&&keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.allKeys=function(obj){if(!_.isObject(obj))return[];var keys=[];for(var key in obj)keys.push(key);return hasEnumBug&&collectNonEnumProps(obj,keys),keys},_.values=function(obj){for(var keys=_.keys(obj),length=keys.length,values=Array(length),i=0;i<length;i++)values[i]=obj[keys[i]];return values},_.mapObject=function(obj,iteratee,context){iteratee=cb(iteratee,context);for(var currentKey,keys=_.keys(obj),length=keys.length,results={},index=0;index<length;index++)results[currentKey=keys[index]]=iteratee(obj[currentKey],currentKey,obj);return results},_.pairs=function(obj){for(var keys=_.keys(obj),length=keys.length,pairs=Array(length),i=0;i<length;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs},_.invert=function(obj){for(var result={},keys=_.keys(obj),i=0,length=keys.length;i<length;i++)result[obj[keys[i]]]=keys[i];return result},_.functions=_.methods=function(obj){var names=[];for(var key in obj)_.isFunction(obj[key])&&names.push(key);return names.sort()},_.extend=createAssigner(_.allKeys),_.extendOwn=_.assign=createAssigner(_.keys),_.findKey=function(obj,predicate,context){predicate=cb(predicate,context);for(var key,keys=_.keys(obj),i=0,length=keys.length;i<length;i++)if(predicate(obj[key=keys[i]],key,obj))return key},_.pick=function(object,oiteratee,context){var iteratee,keys,result={},obj=object;if(null==obj)return result;_.isFunction(oiteratee)?(keys=_.allKeys(obj),iteratee=optimizeCb(oiteratee,context)):(keys=flatten(arguments,!1,!1,1),iteratee=function(value,key,obj){return key in obj},obj=Object(obj));for(var i=0,length=keys.length;i<length;i++){var key=keys[i],value=obj[key];iteratee(value,key,obj)&&(result[key]=value)}return result},_.omit=function(obj,iteratee,context){if(_.isFunction(iteratee))iteratee=_.negate(iteratee);else{var keys=_.map(flatten(arguments,!1,!1,1),String);iteratee=function(value,key){return!_.contains(keys,key)}}return _.pick(obj,iteratee,context)},_.defaults=createAssigner(_.allKeys,!0),_.create=function(prototype,props){var result=baseCreate(prototype);return props&&_.extendOwn(result,props),result},_.clone=function(obj){return _.isObject(obj)?_.isArray(obj)?obj.slice():_.extend({},obj):obj},_.tap=function(obj,interceptor){return interceptor(obj),obj},_.isMatch=function(object,attrs){var keys=_.keys(attrs),length=keys.length;if(null==object)return!length;for(var obj=Object(object),i=0;i<length;i++){var key=keys[i];if(attrs[key]!==obj[key]||!(key in obj))return!1}return!0};var eq=function(a,b,aStack,bStack){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof _&&(a=a._wrapped),b instanceof _&&(b=b._wrapped);var className=toString.call(a);if(className!==toString.call(b))return!1;switch(className){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!=+a?+b!=+b:0==+a?1/+a==1/b:+a==+b;case"[object Date]":case"[object Boolean]":return+a==+b}var areArrays="[object Array]"===className;if(!areArrays){if("object"!=typeof a||"object"!=typeof b)return!1;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)&&"constructor"in a&&"constructor"in b)return!1}bStack=bStack||[];for(var length=(aStack=aStack||[]).length;length--;)if(aStack[length]===a)return bStack[length]===b;if(aStack.push(a),bStack.push(b),areArrays){if((length=a.length)!==b.length)return!1;for(;length--;)if(!eq(a[length],b[length],aStack,bStack))return!1}else{var key,keys=_.keys(a);if(length=keys.length,_.keys(b).length!==length)return!1;for(;length--;)if(key=keys[length],!_.has(b,key)||!eq(a[key],b[key],aStack,bStack))return!1}return aStack.pop(),bStack.pop(),!0};_.isEqual=function(a,b){return eq(a,b)},_.isEmpty=function(obj){return null==obj||(isArrayLike(obj)&&(_.isArray(obj)||_.isString(obj)||_.isArguments(obj))?0===obj.length:0===_.keys(obj).length)},_.isElement=function(obj){return!(!obj||1!==obj.nodeType)},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isObject=function(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj},_.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(name){_["is"+name]=function(obj){return toString.call(obj)==="[object "+name+"]"}}),_.isArguments(arguments)||(_.isArguments=function(obj){return _.has(obj,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(_.isFunction=function(obj){return"function"==typeof obj||!1}),_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))},_.isNaN=function(obj){return _.isNumber(obj)&&obj!==+obj},_.isBoolean=function(obj){return!0===obj||!1===obj||"[object Boolean]"===toString.call(obj)},_.isNull=function(obj){return null===obj},_.isUndefined=function(obj){return void 0===obj},_.has=function(obj,key){return null!=obj&&hasOwnProperty.call(obj,key)},_.noConflict=function(){return root._=previousUnderscore,this},_.identity=function(value){return value},_.constant=function(value){return function(){return value}},_.noop=function(){},_.property=property,_.propertyOf=function(obj){return null==obj?function(){}:function(key){return obj[key]}},_.matcher=_.matches=function(attrs){return attrs=_.extendOwn({},attrs),function(obj){return _.isMatch(obj,attrs)}},_.times=function(n,iteratee,context){var accum=Array(Math.max(0,n));iteratee=optimizeCb(iteratee,context,1);for(var i=0;i<n;i++)accum[i]=iteratee(i);return accum},_.random=function(min,max){return null==max&&(max=min,min=0),min+Math.floor(Math.random()*(max-min+1))},_.now=Date.now||function(){return(new Date).getTime()};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_.invert(escapeMap),createEscaper=function(map){var escaper=function(match){return map[match]},source="(?:"+_.keys(map).join("|")+")",testRegexp=RegExp(source),replaceRegexp=RegExp(source,"g");return function(string){return string=null==string?"":""+string,testRegexp.test(string)?string.replace(replaceRegexp,escaper):string}};_.escape=createEscaper(escapeMap),_.unescape=createEscaper(unescapeMap),_.result=function(object,property,fallback){var value=null==object?void 0:object[property];return void 0===value&&(value=fallback),_.isFunction(value)?value.call(object):value};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escaper=/\\|'|\r|\n|\u2028|\u2029/g,escapeChar=function(match){return"\\"+escapes[match]};_.template=function(text,settings,oldSettings){!settings&&oldSettings&&(settings=oldSettings),settings=_.defaults({},settings,_.templateSettings);var matcher=RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g"),index=0,source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){return source+=text.slice(index,offset).replace(escaper,escapeChar),index=offset+match.length,escape?source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'":interpolate?source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'":evaluate&&(source+="';\n"+evaluate+"\n__p+='"),match}),source+="';\n",settings.variable||(source="with(obj||{}){\n"+source+"}\n"),source="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{var render=new Function(settings.variable||"obj","_",source)}catch(e){throw e.source=source,e}var template=function(data){return render.call(this,data,_)},argument=settings.variable||"obj";return template.source="function("+argument+"){\n"+source+"}",template},_.chain=function(obj){var instance=_(obj);return instance._chain=!0,instance};var result=function(instance,obj){return instance._chain?_(obj).chain():obj};_.mixin=function(obj){_.each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];return push.apply(args,arguments),result(this,func.apply(_,args))}})},_.mixin(_),_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;return method.apply(obj,arguments),"shift"!==name&&"splice"!==name||0!==obj.length||delete obj[0],result(this,obj)}}),_.each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result(this,method.apply(this._wrapped,arguments))}}),_.prototype.value=function(){return this._wrapped},_.prototype.valueOf=_.prototype.toJSON=_.prototype.value,_.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return _})}.call(this),function(){var root,writer;Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound});var Level={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function IEConsoleWriter(){}function ConsoleWriter(){}function Logger(name,parent){this._loggers={},this.name=name||"",this._parent=parent||null,parent||(this._enabled=!0,this._level=Level.WARN)}function setWriter(w){writer=w}IEConsoleWriter.prototype={output:function(log_name,level,messages){if(void 0!==window.console&&void 0!==console.log){log_name&&messages.unshift(log_name+":");var level_name,message=messages.join(" ");if(void 0===typeof console.info)level_name=level<=Level.DEBUG?"DEBUG":level<=Level.INFO?"INFO":level<=Level.WARN?"WARN":level<=Level.ERROR?"ERROR":"FATAL",console.log("["+level_name+"] "+message);else level<=Level.DEBUG?(message="[DEBUG] "+message,console.log(message)):level<=Level.INFO?console.info(message):level<=Level.WARN?console.warn(message):console.error(message)}}},ConsoleWriter.prototype={output:function(log_name,level,messages){log_name&&messages.unshift(log_name+":"),level<=Level.DEBUG?(messages.unshift("[DEBUG]"),console.log.apply(console,messages)):level<=Level.INFO?console.info.apply(console,messages):level<=Level.WARN?console.warn.apply(console,messages):console.error.apply(console,messages)}},Logger.prototype={getLogger:function(name){for(var path=name.split("."),root=this,route=this.name?[this.name]:[];path.length;){var entry=path.shift();route.push(entry),entry in root._loggers||(root._loggers[entry]=new Logger(route.join("."),root)),root=root._loggers[entry]}return root},_getFlag:function(flag){var context=this;for(flag="_"+flag;null!==context;){if(void 0!==context[flag])return context[flag];context=context._parent}return null},setEnabled:function(state){this._enabled=!!state},isEnabled:function(){this._getFlag("enabled")},setLevel:function(level){"number"==typeof level?this._level=level:"string"==typeof level&&(level=level.toUpperCase())in Level&&(this._level=Level[level])},getLevel:function(){return this._getFlag("level")},log:function(level,messages){!messages.length||!this._getFlag("enabled")||level<this._getFlag("level")||(messages=Array.prototype.slice.call(messages),writer.output(this.name,level,messages))},debug:function(){this.log(Level.DEBUG,arguments)},info:function(){this.log(Level.INFO,arguments)},warn:function(){this.log(Level.WARN,arguments)},error:function(){this.log(Level.ERROR,arguments)},fatal:function(){this.log(Level.FATAL,arguments)}},window.console&&window.console.log&&"function"==typeof window.console.log.apply?setWriter(new ConsoleWriter):setWriter(new IEConsoleWriter),root=new Logger;for(var match,logconfig=/loglevel(|-[^=]+)=([^&]+)/g;null!==(match=logconfig.exec(window.location.search));){(""===match[1]?root:root.getLogger(match[1].slice(1))).setLevel(match[2].toUpperCase())}var api={Level:Level,getLogger:root.getLogger.bind(root),setEnabled:root.setEnabled.bind(root),isEnabled:root.isEnabled.bind(root),setLevel:root.setLevel.bind(root),getLevel:root.getLevel.bind(root),debug:root.debug.bind(root),info:root.info.bind(root),warn:root.warn.bind(root),error:root.error.bind(root),fatal:root.fatal.bind(root),getWriter:function(){return writer},setWriter:setWriter};"function"==typeof define?define("logging",[],function(){return api}):window.logging=api}(),define("pat-logger",["logging"],function(logging){return logging.getLogger("patterns")}),function(factory){"function"==typeof define&&define.amd?define("jquery.browser",["jquery"],function($){return factory($)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=factory(require("jquery")):factory(window.jQuery)}(function(jQuery){"use strict";function uaMatch(ua){void 0===ua&&(ua=window.navigator.userAgent),ua=ua.toLowerCase();var match=/(edge)\/([\w.]+)/.exec(ua)||/(opr)[\/]([\w.]+)/.exec(ua)||/(chrome)[ \/]([\w.]+)/.exec(ua)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||0<=ua.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[],platform_match=/(ipad)/.exec(ua)||/(ipod)/.exec(ua)||/(iphone)/.exec(ua)||/(kindle)/.exec(ua)||/(silk)/.exec(ua)||/(android)/.exec(ua)||/(windows phone)/.exec(ua)||/(win)/.exec(ua)||/(mac)/.exec(ua)||/(linux)/.exec(ua)||/(cros)/.exec(ua)||/(playbook)/.exec(ua)||/(bb)/.exec(ua)||/(blackberry)/.exec(ua)||[],browser={},matched={browser:match[5]||match[3]||match[1]||"",version:match[2]||match[4]||"0",versionNumber:match[4]||match[2]||"0",platform:platform_match[0]||""};if(matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version,browser.versionNumber=parseInt(matched.versionNumber,10)),matched.platform&&(browser[matched.platform]=!0),(browser.android||browser.bb||browser.blackberry||browser.ipad||browser.iphone||browser.ipod||browser.kindle||browser.playbook||browser.silk||browser["windows phone"])&&(browser.mobile=!0),(browser.cros||browser.mac||browser.linux||browser.win)&&(browser.desktop=!0),(browser.chrome||browser.opr||browser.safari)&&(browser.webkit=!0),browser.rv||browser.edge){matched.browser="msie",browser.msie=!0}if(browser.safari&&browser.blackberry){matched.browser="blackberry",browser.blackberry=!0}if(browser.safari&&browser.playbook){matched.browser="playbook",browser.playbook=!0}if(browser.bb){var bb="blackberry";browser[matched.browser=bb]=!0}if(browser.opr){matched.browser="opera",browser.opera=!0}if(browser.safari&&browser.android){matched.browser="android",browser.android=!0}if(browser.safari&&browser.kindle){matched.browser="kindle",browser.kindle=!0}if(browser.safari&&browser.silk){matched.browser="silk",browser.silk=!0}return browser.name=matched.browser,browser.platform=matched.platform,browser}return window.jQBrowser=uaMatch(window.navigator.userAgent),window.jQBrowser.uaMatch=uaMatch,jQuery&&(jQuery.browser=window.jQBrowser),window.jQBrowser}),define("pat-utils",["jquery","jquery.browser","underscore"],function($){$.fn.safeClone=function(){var $clone=this.clone();return void 0!==$.browser.msie&&$clone.findInclusive(":input[placeholder]").each(function(i,item){var $item=$(item);$item.attr("placeholder")===$item.val()&&$item.val("")}),$clone},Array.prototype.forEach||(Array.prototype.forEach=function(callback,thisArg){var T,k;if(null===this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("function"!=typeof callback)throw new TypeError(callback+" is not a function");for(1<arguments.length&&(T=thisArg),k=0;k<len;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}});function isObject(obj){var type=typeof obj;return"function"===type||"object"===type&&!!obj}var transitions={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}};return isElementInViewport=function(el,partial,offset){if(el===[])return!1;el instanceof $&&(el=el[0]);var rec=el.getBoundingClientRect(),rec_values=[rec.top,rec.bottom,rec.left,rec.right];return!_.every(rec_values,function(v){if(0===v)return!0})&&(partial?(void 0===offset&&(offset=0),rec.top<=0+offset&&rec.bottom>=0+offset):0<=rec.top&&0<=rec.left&&rec.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rec.right<=(window.innerWidth||document.documentElement.clientWidth))},{jqueryPlugin:function(pattern){return function(method,options){return 0===this.length?this:("object"==typeof method&&(options=method,method=void 0),"function"==typeof pattern?function(pattern,method,options){return this.each(function(){var pat,$el=$(this);if(pat=pattern.init($el,options),method){if(void 0===pat[method])return $.error("Method "+method+" does not exist on jQuery."+pattern.name),!1;if("_"===method.charAt(0))return $.error("Method "+method+" is private on jQuery."+pattern.name),!1;pat[method].apply(pat,[options])}}),this}.call(this,pattern,method,options):function(pattern,method,options){var $this=this;if(method){if(pattern[method])return pattern[method].apply($this,[$this].concat([options]));$.error("Method "+method+" does not exist on jQuery."+pattern.name)}else pattern.init.apply($this,[$this].concat([options]));return $this}.call(this,pattern,method,options))}},debounce:function(func,wait){var timeout;return function(){var context=this,args=arguments;clearTimeout(timeout),timeout=setTimeout(function(){timeout=null,func.apply(context,args)},wait)}},escapeRegExp:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:isObject,extend:function(obj){if(!isObject(obj))return obj;for(var source,prop,i=1,length=arguments.length;i<length;i++)for(prop in source=arguments[i])hasOwnProperty.call(source,prop)&&(obj[prop]=source[prop]);return obj},rebaseURL:function(base,url){return-1!==url.indexOf("://")||"/"===url[0]?url:base.slice(0,base.lastIndexOf("/")+1)+url},findLabel:function(input){for(var $label,label=input.parentNode;label&&11!==label.nodeType;label=label.parentNode)if("LABEL"===label.tagName)return label;return input.id&&($label=$('label[for="'+input.id+'"]')),$label&&0===$label.length&&input.form&&($label=$('label[for="'+input.name+'"]',input.form)),$label&&$label.length?$label[0]:null},elementInViewport:function(el){var rect=el.getBoundingClientRect(),docEl=document.documentElement,vWidth=window.innerWidth||docEl.clientWidth,vHeight=window.innerHeight||docEl.clientHeight;return!(rect.right<0||rect.bottom<0||rect.left>vWidth||rect.top>vHeight)},removeWildcardClass:function($targets,classes){if(-1===classes.indexOf("*"))$targets.removeClass(classes);else{var matcher=classes.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&");matcher=matcher.replace(/[*]/g,".*"),matcher=new RegExp("^"+matcher+"$"),$targets.filter("[class]").each(function(){for(var $this=$(this),classes=$this.attr("class").split(/\s+/),ok=[],i=0;i<classes.length;i++)matcher.test(classes[i])||ok.push(classes[i]);ok.length?$this.attr("class",ok.join(" ")):$this.removeAttr("class")})}},hideOrShow:function($slave,visible,options,pattern_name){var duration="css"===options.transition||"none"===options.transition?null:options.effect.duration;$slave.removeClass("visible hidden in-progress");var onComplete=function(){$slave.removeClass("in-progress").addClass(visible?"visible":"hidden").trigger("pat-update",{pattern:pattern_name,transition:"complete"})};if(duration){var t=transitions[options.transition];$slave.addClass("in-progress").trigger("pat-update",{pattern:pattern_name,transition:"start"}),$slave[visible?t.show:t.hide]({duration:duration,easing:options.effect.easing,complete:onComplete})}else"css"!==options.transition&&$slave[visible?"show":"hide"](),onComplete()},addURLQueryParameter:function(fullURL,param,value){var val=new RegExp("(\\?|\\&)"+param+"=.*?(?=(&|$))"),parts=fullURL.toString().split("#"),url=parts[0],hash=parts[1],newURL=url;return newURL=val.test(url)?url.replace(val,"$1"+param+"="+value):/\?.+$/.test(url)?url+"&"+param+"="+value:url+"?"+param+"="+value,hash&&(newURL+="#"+hash),newURL},removeDuplicateObjects:function(objs){return _.reduce(objs,function(list,next_obj){var is_duplicate=!1;return _.each(list,function(obj){is_duplicate=_.keys(obj).length===_.keys(next_obj).length&&!_.chain(obj).omit(function(v,k){return this[k]===v}.bind(next_obj)).keys().value().length}),is_duplicate||list.push(next_obj),list},[])},mergeStack:function(stack,length){for(var results=[],i=0;i<length;i++)results.push({});return _.each(stack,function(frame){for(var frame_length=frame.length-1,x=0;x<length;x++)results[x]=$.extend(results[x]||{},frame[frame_length<x?frame_length:x])}),results},isElementInViewport:isElementInViewport}}),define("pat-compat",[],function(){var _hasOwnProperty,hasDontEnumBug,dontEnums,dontEnumsLength;Array.prototype.every||(Array.prototype.every=function(fun){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var thisp=arguments[1],i=0;i<len;i++)if(i in t&&!fun.call(thisp,t[i],i,t))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(fun){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var res=[],thisp=arguments[1],i=0;i<len;i++)if(i in t){var val=t[i];fun.call(thisp,val,i,t)&&res.push(val)}return res}),Array.prototype.forEach||(Array.prototype.forEach=function(callback,thisArg){var T,k;if(null===this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("[object Function]"!=={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),k=0;k<len;){var kValue;k in O&&(kValue=O[k],callback.call(T,kValue,k,O)),k++}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(0<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*Math.floor(Math.abs(n)))),len<=n)return-1;for(var k=0<=n?n:Math.max(len-Math.abs(n),0);k<len;k++)if(k in t&&t[k]===searchElement)return k;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(searchElement){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=len;1<arguments.length&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(0<n||-1)*Math.floor(Math.abs(n))));for(var k=0<=n?Math.min(n,len-1):len-Math.abs(n);0<=k;k--)if(k in t&&t[k]===searchElement)return k;return-1}),Array.prototype.map||(Array.prototype.map=function(callback,thisArg){var T,A,k;if(null===this)throw new TypeError(" this is null or not defined");var O=Object(this),len=O.length>>>0;if("[object Function]"!=={}.toString.call(callback))throw new TypeError(callback+" is not a function");for(thisArg&&(T=thisArg),A=new Array(len),k=0;k<len;){var kValue,mappedValue;k in O&&(kValue=O[k],mappedValue=callback.call(T,kValue,k,O),A[k]=mappedValue),k++}return A}),Array.prototype.reduce||(Array.prototype.reduce=function(accumulator){if(null==this)throw new TypeError("Object is null or undefined");var curr,i=0,l=this.length>>0;if("function"!=typeof accumulator)throw new TypeError("First argument is not callable");if(arguments.length<2){if(0===l)throw new TypeError("Array length is 0 and no second argument");curr=this[0],i=1}else curr=arguments[1];for(;i<l;)i in this&&(curr=accumulator.call(void 0,curr,this[i],i,this)),++i;return curr}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(callbackfn){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof callbackfn)throw new TypeError;if(0===len&&1===arguments.length)throw new TypeError;var accumulator,k=len-1;if(2<=arguments.length)accumulator=arguments[1];else for(;;){if(k in this){accumulator=this[k--];break}if(--k<0)throw new TypeError}for(;0<=k;)k in t&&(accumulator=callbackfn.call(void 0,accumulator,t[k],k,t)),k--;return accumulator}),Array.prototype.some||(Array.prototype.some=function(fun){"use strict";if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var thisp=arguments[1],i=0;i<len;i++)if(i in t&&fun.call(thisp,t[i],i,t))return!0;return!1}),Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind||(Function.prototype.bind=function(oThis){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP&&oThis?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)))};return fNOP.prototype=this.prototype,fBound.prototype=new fNOP,fBound}),Object.keys||(Object.keys=(_hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnumsLength=(dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(obj){if("object"!=typeof obj&&"function"!=typeof obj||null===obj)throw new TypeError("Object.keys called on non-object");var result=[];for(var prop in obj)_hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(var i=0;i<dontEnumsLength;i++)_hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}))}),define("pat-jquery-ext",["jquery"],function($){var methods={init:function(options){var settings={time:3,initialTime:8,exceptionAreas:[]};return this.each(function(){var $this=$(this);$this.data("timeout")||(options&&$.extend(settings,options),$this.data("timeout",{lastEvent:new Date,trueTime:settings.time,time:settings.initialTime,untouched:!0,inExceptionArea:!1}),$this.bind("mouseover.timeout",methods.mouseMoved),$this.bind("mouseenter.timeout",methods.mouseMoved),$(settings.exceptionAreas).each(function(){$this.find(this).live("mouseover.timeout",{parent:$this},methods.enteredException).live("mouseleave.timeout",{parent:$this},methods.leftException)}),0<settings.initialTime?$this.timeout("startTimer"):$this.addClass("timeout"))})},enteredException:function(event){var data=event.data.parent.data("timeout");data.inExceptionArea=!0,event.data.parent.data("timeout",data),event.data.parent.trigger("mouseover")},leftException:function(event){var data=event.data.parent.data("timeout");data.inExceptionArea=!1,event.data.parent.data("timeout",data)},destroy:function(){return this.each(function(){var $this=$(this),data=$this.data("timeout");$(window).unbind(".timeout"),data.timeout.remove(),$this.removeData("timeout")})},mouseMoved:function(){var $this=$(this),data=$this.data("timeout");$this.hasClass("timeout")?($this.removeClass("timeout"),$this.timeout("startTimer")):data.untouched&&(data.untouched=!1,data.time=data.trueTime),data.lastEvent=new Date,$this.data("timeout",data)},startTimer:function(){var $this=$(this),data=$this.data("timeout"),fn=function(){var data=$this.data("timeout");if(data&&data.lastEvent)if(data.inExceptionArea)setTimeout(fn,Math.floor(1e3*data.time));else{var now=new Date,diff=Math.floor(1e3*data.time)-(now-data.lastEvent);0<diff?setTimeout(fn,diff+100):$this.addClass("timeout")}};setTimeout(fn,Math.floor(1e3*data.time))}};$.fn.timeout=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.timeout"):methods.init.apply(this,arguments)},$.extend($.expr[":"],{scrollable:function(element){return"scroll"===$(element).css("overflow")||"scroll"===$(element).css("overflowX")||"scroll"===$(element).css("overflowY")||(element.clientHeight<element.scrollHeight&&(-1!==$.inArray($(element).css("overflowY"),["scroll","auto"])||-1!==$.inArray($(element).css("overflow"),["scroll","auto"]))||element.clientWidth<element.scrollWidth&&(-1!==$.inArray($(element).css("overflowX"),["scroll","auto"])||-1!==$.inArray($(element).css("overflow"),["scroll","auto"])))}}),$.fn.makeVisibleInScroll=function(parent_id){var absoluteParent=null;return"string"==typeof parent_id?absoluteParent=$("#"+parent_id):parent_id&&(absoluteParent=$(parent_id)),this.each(function(){var parent,$this=$(this);parent=absoluteParent||(0<(parent=$this.parents(":scrollable")).length?$(parent[0]):$(window));var elemTop=$this.position().top,elemBottom=$this.height()+elemTop,viewTop=parent.scrollTop(),viewBottom=parent.height()+viewTop;elemTop<viewTop?parent.scrollTop(elemTop):elemBottom>viewBottom-parent.height()/2&&parent.scrollTop(elemTop-(parent.height()-$this.height())/2)})},$.fn.setPositionAbsolute=function(element,offsettop,offsetleft){return this.each(function(){var $this=$(this),thiswidth=$(this).width(),pos=element.offset(),width=element.width(),height=element.height(),setleft=pos.left+width-thiswidth+offsetleft,settop=pos.top+height+offsettop;$this.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:setleft+"px",top:settop+"px",width:thiswidth}),$this.remove().appendTo("body").show()})},$.fn.positionAncestor=function(selector){var left=0,top=0;return this.each(function(){var $ancestor=$(this).closest(selector);if($ancestor.length&&"static"!==$ancestor.css("position")){var $child=$(this),childMarginEdgeLeft=$child.offset().left-parseInt($child.css("marginLeft"),10),childMarginEdgeTop=$child.offset().top-parseInt($child.css("marginTop"),10),ancestorPaddingEdgeLeft=$ancestor.offset().left+parseInt($ancestor.css("borderLeftWidth"),10),ancestorPaddingEdgeTop=$ancestor.offset().top+parseInt($ancestor.css("borderTopWidth"),10);return left=childMarginEdgeLeft-ancestorPaddingEdgeLeft,top=childMarginEdgeTop-ancestorPaddingEdgeTop,!1}}),{left:left,top:top}},String.prototype.startsWith=function(str){return null!==this.match("^"+str)},String.prototype.endsWith=function(str){return null!==this.match(str+"$")},$.simplePlaceholder={placeholder_class:null,hide_placeholder:function(){var $this=$(this);$this.val()===$this.attr("placeholder")&&$this.val("").removeClass($.simplePlaceholder.placeholder_class)},show_placeholder:function(){var $this=$(this);""===$this.val()&&$this.val($this.attr("placeholder")).addClass($.simplePlaceholder.placeholder_class)},prevent_placeholder_submit:function(){return $(this).find(".simple-placeholder").each(function(){var $this=$(this);$this.val()===$this.attr("placeholder")&&$this.val("")}),!0}},$.fn.simplePlaceholder=function(options){if(void 0===document.createElement("input").placeholder){var config={placeholder_class:"placeholding"};options&&$.extend(config,options),$.simplePlaceholder.placeholder_class=config.placeholder_class,this.each(function(){var $this=$(this);$this.focus($.simplePlaceholder.hide_placeholder),$this.blur($.simplePlaceholder.show_placeholder),""===$this.val()&&($this.val($this.attr("placeholder")),$this.addClass($.simplePlaceholder.placeholder_class)),$this.addClass("simple-placeholder"),$(this.form).submit($.simplePlaceholder.prevent_placeholder_submit)})}return this},$.fn.findInclusive=function(selector){return this.find("*").addBack().filter(selector)},$.fn.slideIn=function(speed,easing,callback){return this.animate({width:"show"},speed,easing,callback)},$.fn.slideOut=function(speed,easing,callback){return this.animate({width:"hide"},speed,easing,callback)},$.expr[":"].Contains=function(a,i,m){return 0<=$(a).text().toUpperCase().indexOf(m[3].toUpperCase())},$.fn.scopedFind=function(selector){return selector.startsWith("#")?$(selector):this.find(selector)}}),define("pat-registry",["jquery","underscore","pat-logger","pat-utils","pat-compat","pat-jquery-ext"],function($,_,logger,utils){for(var match,log=logger.getLogger("registry"),disable_re=/patterns-disable=([^&]+)/g,dont_catch_re=/patterns-dont-catch/g,dont_catch=!1,disabled={};null!==(match=disable_re.exec(window.location.search));)disabled[match[1]]=!0,log.info("Pattern disabled via url config:",match[1]);for(;null!==(match=dont_catch_re.exec(window.location.search));)dont_catch=!0,log.info("I will not catch init exceptions");var registry={patterns:{},initialized:!1,init:function(){$(document).ready(function(){log.info("loaded: "+Object.keys(registry.patterns).sort().join(", ")),registry.scan(document.body),registry.initialized=!0,log.info("finished initial scan.")})},clear:function(){this.patterns={}},transformPattern:function(name,content){if(disabled[name])log.debug("Skipping disabled pattern:",name);else{var pattern=registry.patterns[name];if(pattern.transform)try{pattern.transform($(content))}catch(e){if(dont_catch)throw e;log.error("Transform error for pattern"+name,e)}}},initPattern:function(name,el,trigger){var $el=$(el),pattern=registry.patterns[name];if(pattern.init&&(plog=logger.getLogger("pat."+name),$el.is(pattern.trigger))){plog.debug("Initialising:",$el);try{pattern.init($el,null,trigger),plog.debug("done.")}catch(e){if(dont_catch)throw e;plog.error("Caught error:",e)}}},orderPatterns:function(patterns){return _.contains(patterns,"validation")&&_.contains(patterns,"inject")&&(patterns.splice(patterns.indexOf("validation"),1),patterns.unshift("validation")),patterns},scan:function(content,patterns,trigger){var selectors=[];(patterns=this.orderPatterns(patterns||Object.keys(registry.patterns))).forEach(_.partial(this.transformPattern,_,content)),patterns=_.each(patterns,function(name){var pattern=registry.patterns[name];pattern.trigger&&selectors.unshift(pattern.trigger)}),$(content).findInclusive(selectors.join(",")).filter(function(){return 0===$(this).parents("pre").length}).filter(":not(.cant-touch-this)").toArray().reduceRight(function(acc,el){patterns.forEach(_.partial(this.initPattern,_,el,trigger))}.bind(this),null),$("body").addClass("patterns-loaded")},register:function(pattern,name){var plugin_name;return(name=name||pattern.name)?registry.patterns[name]?(log.error("Already have a pattern called: "+name),!1):((registry.patterns[name]=pattern).jquery_plugin&&(plugin_name=("pat-"+name).replace(/-([a-zA-Z])/g,function(match,p1){return p1.toUpperCase()}),$.fn[plugin_name]=utils.jqueryPlugin(pattern),$.fn[plugin_name.replace(/^pat/,"pattern")]=$.fn[plugin_name]),log.debug("Registered pattern:",name,pattern),registry.initialized&&registry.scan(document.body,[name]),!0):(log.error("Pattern lacks a name:",pattern),!1)}};return registry}),define("pat-mockup-parser",["jquery"],function($){"use strict";return{getOptions:function getOptions($el,patternName,options){options=options||{},0===$el.length||$.nodeName($el[0],"body")||(options=getOptions($el.parent(),patternName,options));var elOptions={};if(0!==$el.length&&(elOptions=$el.data("pat-"+patternName))&&"string"==typeof elOptions){var tmpOptions={};$.each(elOptions.split(";"),function(i,item){(item=item.split(":")).reverse();var key=item.pop();key=key.replace(/^\s+|\s+$/g,""),item.reverse();var value=item.join(":");value=value.replace(/^\s+|\s+$/g,""),tmpOptions[key]=value}),elOptions=tmpOptions}return $.extend(!0,{},options,elOptions)}}}),define("pat-base",["jquery","pat-registry","pat-mockup-parser","pat-logger"],function($,Registry,mockupParser,logger){"use strict";var log=logger.getLogger("Patternslib Base"),initBasePattern=function($el,options,trigger){var name=this.prototype.name,log=logger.getLogger("pat."+name),pattern=$el.data("pattern-"+name);if(void 0===pattern&&Registry.patterns[name]){try{options="mockup"===this.prototype.parser?mockupParser.getOptions($el,name,options):options,pattern=new Registry.patterns[name]($el,options,trigger)}catch(e){log.error("Failed while initializing '"+name+"' pattern.",e)}$el.data("pattern-"+name,pattern)}return pattern},Base=function($el,options,trigger){this.$el=$el,this.options=$.extend(!0,{},this.defaults||{},options||{}),this.init($el,options,trigger),this.emit("init")};return Base.prototype={constructor:Base,on:function(eventName,eventCallback){this.$el.on(eventName+"."+this.name+".patterns",eventCallback)},emit:function(eventName,args){void 0===args&&(args=[]),this.$el.trigger(eventName+"."+this.name+".patterns",args)}},Base.extend=function(patternProps){var child,parent=this;if(!patternProps)throw new Error("Pattern configuration properties required when calling Base.extend");(child=patternProps.hasOwnProperty("constructor")?patternProps.constructor:function(){parent.apply(this,arguments)}).extend=Base.extend,child.init=initBasePattern,child.jquery_plugin=!0,child.trigger=patternProps.trigger;var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,$.extend(!0,child.prototype,patternProps),child.__super__=parent.prototype,patternProps.name?patternProps.trigger?Registry.register(child,patternProps.name):log.warn("The pattern '"+patternProps.name+"' does not have a trigger attribute, it will not be registered."):log.warn("This pattern without a name attribute will not be registered!"),child},Base}),define("mockup-utils",["jquery"],function($){"use strict";var Loading=function(options){var self=this;self.className="plone-loader";return options||(options={}),self.options=$.extend({},{backdrop:null,zIndex:10005},options),self.init=function(){self.$el=$("."+self.className),0===self.$el.length&&(self.$el=$("<div><div></div></div>"),self.$el.addClass(self.className).hide().appendTo("body"))},self.show=function(closable){self.init(),self.$el.show();var zIndex=self.options.zIndex;"function"==typeof zIndex?zIndex=Math.max(zIndex(),10005):(zIndex=10005,$(".plone-modal-wrapper,.plone-modal-backdrop").each(function(){zIndex=Math.max(zIndex,$(this).css("zIndex")||10005)}),zIndex+=1),self.$el.css("zIndex",zIndex),void 0===closable&&(closable=!0),self.options.backdrop&&(self.options.backdrop.closeOnClick=closable,self.options.backdrop.closeOnEsc=closable,self.options.backdrop.init(),self.options.backdrop.show())},self.hide=function(){self.init(),self.$el.hide()},self},generateId=function(prefix){return void 0===prefix&&(prefix="id"),prefix+Math.floor(65536*(1+Math.random())).toString(16).substring(1)},storage={get:function(name){if(window.localStorage){var val=window.localStorage[name];return"string"==typeof val?JSON.parse(val):void 0}},set:function(name,val){window.localStorage&&(window.localStorage[name]=JSON.stringify(val))}};return{bool:function(val){return"string"==typeof val&&(val=$.trim(val).toLowerCase()),-1===["false",!1,"0",0,"",void 0,null].indexOf(val)},escapeHTML:function(val){return $("<div/>").text(val).html()},removeHTML:function(val){return val.replace(/<[^>]+>/gi,"")},featureSupport:{dragAndDrop:function(){return"draggable"in document.createElement("span")},fileApi:function(){return"undefined"!=typeof FileReader},history:function(){return!(!window.history||!window.history.pushState)}},generateId:generateId,getAuthenticator:function(){var $el=$('input[name="_authenticator"]');return 0===$el.length?0<($el=$('a[href*="_authenticator"]')).length?$el.attr("href").split("_authenticator=")[1]:"":$el.val()},getWindow:function(){var win=window;return win.parent!==window&&(win=win.parent),win},Loading:Loading,loading:new Loading,parseBodyTag:function(txt){return $(/<body[^>]*>[^]*<\/body>/im.exec(txt)[0].replace("<body","<div").replace("</body>","</div>")).eq(0).html()},QueryHelper:function(options){var self=this;return self.options=$.extend({},{pattern:null,vocabularyUrl:null,searchParam:"SearchableText",pathOperator:"plone.app.querystring.operation.string.path",attributes:["UID","Title","Description","getURL","portal_type"],batchSize:10,baseCriteria:[],sort_on:"is_folderish",sort_order:"reverse",pathDepth:1},options),self.pattern=self.options.pattern,void 0!==self.pattern&&null!==self.pattern||(self.pattern={browsing:!1,basePath:"/"}),self.options.url&&!self.options.vocabularyUrl?self.options.vocabularyUrl=self.options.url:self.pattern.vocabularyUrl&&(self.options.vocabularyUrl=self.pattern.vocabularyUrl),self.valid=Boolean(self.options.vocabularyUrl),self.getBatch=function(page){return{page:page||1,size:self.options.batchSize}},self.getCurrentPath=function(){var currentPath,pattern=self.pattern;"function"==typeof(currentPath=self.currentPath?self.currentPath:pattern.currentPath)&&(currentPath=currentPath());var path=currentPath;return path||(path=pattern.basePath?pattern.basePath:pattern.options.basePath?pattern.options.basePath:"/"),path},self.getCriterias=function(term,searchOptions){void 0===searchOptions&&(searchOptions={});var criterias=[];return(searchOptions=$.extend({},{useBaseCriteria:!0,additionalCriterias:[]},searchOptions)).useBaseCriteria&&(criterias=self.options.baseCriteria.slice(0)),term&&(term+="*",criterias.push({i:self.options.searchParam,o:"plone.app.querystring.operation.string.contains",v:term})),searchOptions.searchPath?criterias.push({i:"path",o:self.options.pathOperator,v:searchOptions.searchPath+"::"+self.options.pathDepth}):self.pattern.browsing&&criterias.push({i:"path",o:self.options.pathOperator,v:self.getCurrentPath()+"::"+self.options.pathDepth}),criterias=criterias.concat(searchOptions.additionalCriterias)},self.getQueryData=function(term,page){var data={query:JSON.stringify({criteria:self.getCriterias(term),sort_on:self.options.sort_on,sort_order:self.options.sort_order}),attributes:JSON.stringify(self.options.attributes)};return page&&(data.batch=JSON.stringify(self.getBatch(page))),data},self.getUrl=function(){var url=self.options.vocabularyUrl;return-1===url.indexOf("?")?url+="?":url+="&",url+$.param(self.getQueryData())},self.selectAjax=function(){return{url:self.options.vocabularyUrl,dataType:"JSON",quietMillis:100,data:function(term,page){return self.getQueryData(term,page)},results:function(data,page){var more=10*page<data.total;return{results:data.results,more:more}}}},self.search=function(term,operation,value,callback,useBaseCriteria,type){void 0===useBaseCriteria&&(useBaseCriteria=!0),void 0===type&&(type="GET");var criteria=[];useBaseCriteria&&(criteria=self.options.baseCriteria.slice(0)),criteria.push({i:term,o:operation,v:value});var data={query:JSON.stringify({criteria:criteria}),attributes:JSON.stringify(self.options.attributes)};$.ajax({url:self.options.vocabularyUrl,dataType:"JSON",data:data,type:type,success:callback})},self},setId:function($el,prefix){void 0===prefix&&(prefix="id");var id=$el.attr("id");return id=void 0===id?generateId(prefix):id.replace(/\./g,"-"),$el.attr("id",id),id},storage:storage}}),function(root){define("select2",["jquery"],function(){return function(){var $;void 0===($=jQuery).fn.each2&&$.extend($.fn,{each2:function(c){for(var j=$([0]),i=-1,l=this.length;++i<l&&(j.context=j[0]=this[i])&&!1!==c.call(j[0],i,j););return this}}),function($,undefined){"use strict";if(window.Select2===undefined){var AbstractSelect2,SingleSelect2,MultiSelect2,nextUid,sizer,$document,scrollBarDimensions,counter,lastMousePosition={x:0,y:0},KEY={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(k){switch(k=k.which?k.which:k){case KEY.LEFT:case KEY.RIGHT:case KEY.UP:case KEY.DOWN:return!0}return!1},isControl:function(e){switch(e.which){case KEY.SHIFT:case KEY.CTRL:case KEY.ALT:return!0}return!!e.metaKey},isFunctionKey:function(k){return 112<=(k=k.which?k.which:k)&&k<=123}},DIACRITICS={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};$document=$(document),counter=1,nextUid=function(){return counter++},SingleSelect2=clazz(AbstractSelect2=clazz(Object,{bind:function(func){var self=this;return function(){func.apply(self,arguments)}},init:function(opts){var results,search;this.opts=opts=this.prepareOpts(opts),this.id=opts.id,opts.element.data("select2")!==undefined&&null!==opts.element.data("select2")&&opts.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=$(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(opts.element.attr("id")||"autogen"+nextUid()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",opts.element.attr("title")),this.body=$(document.body),syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",opts.element.attr("style")),this.container.css(evaluate(opts.containerCss,this.opts.element)),this.container.addClass(evaluate(opts.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",killEvent),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(evaluate(opts.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",killEvent),this.results=results=this.container.find(".select2-results"),this.search=search=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",killEvent),this.results.on("mousemove",function(e){var lastpos=lastMousePosition;lastpos!==undefined&&lastpos.x===e.pageX&&lastpos.y===e.pageY||$(e.target).trigger("mousemove-filtered",e)}),this.dropdown.on("mousemove-filtered",".select2-results",this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",".select2-results",this.bind(function(event){this._touchEvent=!0,this.highlightUnderEvent(event)})),this.dropdown.on("touchmove",".select2-results",this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",".select2-results",this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(event){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),function(threshold,element){var notify=debounce(threshold,function(e){element.trigger("scroll-debounced",e)});element.on("scroll",function(e){0<=indexOf(e.target,element.get())&&notify(e)})}(80,this.results),this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded)),$(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),$(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),$.fn.mousewheel&&results.mousewheel(function(e,delta,deltaX,deltaY){var top=results.scrollTop();0<deltaY&&top-deltaY<=0?(results.scrollTop(0),killEvent(e)):deltaY<0&&results.get(0).scrollHeight-results.scrollTop()+deltaY<=results.height()&&(results.scrollTop(results.get(0).scrollHeight-results.height()),killEvent(e))}),installKeyUpChangeEvent(search),search.on("keyup-change input paste",this.bind(this.updateResults)),search.on("focus",function(){search.addClass("select2-focused")}),search.on("blur",function(){search.removeClass("select2-focused")}),this.dropdown.on("mouseup",".select2-results",this.bind(function(e){0<$(e.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.lastSearchTerm=undefined,$.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==opts.maximumInputLength&&this.search.attr("maxlength",opts.maximumInputLength);var disabled=opts.element.prop("disabled");disabled===undefined&&(disabled=!1),this.enable(!disabled);var readonly=opts.element.prop("readonly");readonly===undefined&&(readonly=!1),this.readonly(readonly),scrollBarDimensions=scrollBarDimensions||function(){var $template=$("<div class='select2-measure-scrollbar'></div>");$template.appendTo(document.body);var dim={width:$template.width()-$template[0].clientWidth,height:$template.height()-$template[0].clientHeight};return $template.remove(),dim}(),this.autofocus=opts.element.prop("autofocus"),opts.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",opts.searchInputPlaceholder)},destroy:function(){var element=this.opts.element,select2=element.data("select2"),self=this;this.close(),element.length&&element[0].detachEvent&&self._sync&&element.each(function(){self._sync&&this.detachEvent("onpropertychange",self._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,select2!==undefined&&(select2.container.remove(),select2.liveRegion.remove(),select2.dropdown.remove(),element.removeData("select2").off(".select2"),element.is("input[type='hidden']")?element.css("display",""):(element.show().prop("autofocus",this.autofocus||!1),this.elementTabIndex?element.attr({tabindex:this.elementTabIndex}):element.removeAttr("tabindex"),element.show())),cleanupJQueryElements.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(element){return element.is("option")?{id:element.prop("value"),text:element.text(),element:element.get(),css:element.attr("class"),disabled:element.prop("disabled"),locked:equal(element.attr("locked"),"locked")||equal(element.data("locked"),!0)}:element.is("optgroup")?{text:element.attr("label"),children:[],element:element.get(),css:element.attr("class")}:void 0},prepareOpts:function(opts){var element,select,idKey,ajaxUrl,self=this;if("select"===(element=opts.element).get(0).tagName.toLowerCase()&&(this.select=select=opts.element),select&&$.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in opts)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),opts.debug=opts.debug||$.fn.select2.defaults.debug,opts.debug&&console&&console.warn&&(null!=opts.id&&console.warn("Select2: The `id` option has been removed in Select2 4.0.0, consider renaming your `id` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=opts.text&&console.warn("Select2: The `text` option has been removed in Select2 4.0.0, consider renaming your `text` property or mapping the property before your data makes it to Select2. You can read more at https://select2.github.io/announcements-4.0.html#changed-id"),null!=opts.sortResults&&console.warn("Select2: the `sortResults` option has been renamed to `sorter` in Select2 4.0.0. "),null!=opts.selectOnBlur&&console.warn("Select2: The `selectOnBlur` option has been renamed to `selectOnClose` in Select2 4.0.0."),null!=opts.ajax&&null!=opts.ajax.results&&console.warn("Select2: The `ajax.results` option has been renamed to `ajax.processResults` in Select2 4.0.0."),null!=opts.formatNoResults&&console.warn("Select2: The `formatNoResults` option has been renamed to `language.noResults` in Select2 4.0.0."),null!=opts.formatSearching&&console.warn("Select2: The `formatSearching` option has been renamed to `language.searching` in Select2 4.0.0."),null!=opts.formatInputTooShort&&console.warn("Select2: The `formatInputTooShort` option has been renamed to `language.inputTooShort` in Select2 4.0.0."),null!=opts.formatInputTooLong&&console.warn("Select2: The `formatInputTooLong` option has been renamed to `language.inputTooLong` in Select2 4.0.0."),null!=opts.formatLoading&&console.warn("Select2: The `formatLoading` option has been renamed to `language.loadingMore` in Select2 4.0.0."),null!=opts.formatSelectionTooBig&&console.warn("Select2: The `formatSelectionTooBig` option has been renamed to `language.maximumSelected` in Select2 4.0.0."),opts.element.data("select2Tags")&&console.warn("Select2: The `data-select2-tags` attribute has been renamed to `data-tags` in Select2 4.0.0.")),null!=opts.element.data("tags")){var elemTags=opts.element.data("tags");$.isArray(elemTags)||(elemTags=[]),opts.element.data("select2Tags",elemTags)}if(null!=opts.sorter&&(opts.sortResults=opts.sorter),null!=opts.selectOnClose&&(opts.selectOnBlur=opts.selectOnClose),null!=opts.ajax&&$.isFunction(opts.ajax.processResults)&&(opts.ajax.results=opts.ajax.processResults),null!=opts.language){var lang=opts.language;$.isFunction(lang.noMatches)&&(opts.formatNoMatches=lang.noMatches),$.isFunction(lang.searching)&&(opts.formatSearching=lang.searching),$.isFunction(lang.inputTooShort)&&(opts.formatInputTooShort=lang.inputTooShort),$.isFunction(lang.inputTooLong)&&(opts.formatInputTooLong=lang.inputTooLong),$.isFunction(lang.loadingMore)&&(opts.formatLoading=lang.loadingMore),$.isFunction(lang.maximumSelected)&&(opts.formatSelectionTooBig=lang.maximumSelected)}if("function"!=typeof(opts=$.extend({},{populateResults:function(container,results,query){var populate,id=this.opts.id,liveRegion=this.liveRegion;(populate=function(results,container,depth){var i,l,result,selectable,disabled,compound,node,label,innerContainer,formatted,nodes=[];for(i=0,l=(results=opts.sortResults(results,container,query)).length;i<l;i+=1)selectable=!(disabled=!0===(result=results[i]).disabled)&&id(result)!==undefined,compound=result.children&&0<result.children.length,(node=$("<li></li>")).addClass("select2-results-dept-"+depth),node.addClass("select2-result"),node.addClass(selectable?"select2-result-selectable":"select2-result-unselectable"),disabled&&node.addClass("select2-disabled"),compound&&node.addClass("select2-result-with-children"),node.addClass(self.opts.formatResultCssClass(result)),node.attr("role","presentation"),(label=$(document.createElement("div"))).addClass("select2-result-label"),label.attr("id","select2-result-label-"+nextUid()),label.attr("role","option"),(formatted=opts.formatResult(result,label,query,self.opts.escapeMarkup))!==undefined&&(label.html(formatted),node.append(label)),compound&&((innerContainer=$("<ul></ul>")).addClass("select2-result-sub"),populate(result.children,innerContainer,depth+1),node.append(innerContainer)),node.data("select2-data",result),nodes.push(node[0]);container.append(nodes),liveRegion.text(opts.formatMatches(results.length))})(results,container,0)}},$.fn.select2.defaults,opts)).id&&(idKey=opts.id,opts.id=function(e){return e[idKey]}),$.isArray(opts.element.data("select2Tags"))){if("tags"in opts)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+opts.element.attr("id");opts.tags=opts.element.data("select2Tags")}if(select?(opts.query=this.bind(function(query){var children,placeholderOption,process,data={results:[],more:!1},term=query.term;process=function(element,collection){var group;element.is("option")?query.matcher(term,element.text(),element)&&collection.push(self.optionToData(element)):element.is("optgroup")&&(group=self.optionToData(element),element.children().each2(function(i,elm){process(elm,group.children)}),0<group.children.length&&collection.push(group))},children=element.children(),this.getPlaceholder()!==undefined&&0<children.length&&(placeholderOption=this.getPlaceholderOption())&&(children=children.not(placeholderOption)),children.each2(function(i,elm){process(elm,data.results)}),query.callback(data)}),opts.id=function(e){return e.id}):"query"in opts||("ajax"in opts?((ajaxUrl=opts.element.data("ajax-url"))&&0<ajaxUrl.length&&(opts.ajax.url=ajaxUrl),opts.query=ajax.call(opts.element,opts.ajax)):"data"in opts?opts.query=local(opts.data):"tags"in opts&&(opts.query=tags(opts.tags),opts.createSearchChoice===undefined&&(opts.createSearchChoice=function(term){return{id:$.trim(term),text:$.trim(term)}}),opts.initSelection===undefined&&(opts.initSelection=function(element,callback){var data=[];$(splitVal(element.val(),opts.separator,opts.transformVal)).each(function(){var obj={id:this,text:this},tags=opts.tags;$.isFunction(tags)&&(tags=tags()),$(tags).each(function(){if(equal(this.id,obj.id))return obj=this,!1}),data.push(obj)}),callback(data)}))),"function"!=typeof opts.query)throw"query function not defined for Select2 "+opts.element.attr("id");if("top"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.unshift(item)};else if("bottom"===opts.createSearchChoicePosition)opts.createSearchChoicePosition=function(list,item){list.push(item)};else if("function"!=typeof opts.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return opts},monitorSource:function(){var observer,el=this.opts.element,self=this;el.on("change.select2",this.bind(function(e){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()})),this._sync=this.bind(function(){var disabled=el.prop("disabled");disabled===undefined&&(disabled=!1),this.enable(!disabled);var readonly=el.prop("readonly");readonly===undefined&&(readonly=!1),this.readonly(readonly),this.container&&(syncCssClasses(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(evaluate(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(syncCssClasses(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(evaluate(this.opts.dropdownCssClass,this.opts.element)))}),el.length&&el[0].attachEvent&&el.each(function(){this.attachEvent("onpropertychange",self._sync)}),(observer=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver)!==undefined&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new observer(function(mutations){$.each(mutations,self._sync)}),this.propertyObserver.observe(el.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(data){var evt=$.Event("select2-selecting",{val:this.id(data),object:data,choice:data});return this.opts.element.trigger(evt),!evt.isDefaultPrevented()},triggerChange:function(details){details=details||{},details=$.extend({},details,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(details),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var enabled=this._enabled&&!this._readonly,disabled=!enabled;return enabled!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",disabled),this.close(),this.enabledInterface=enabled,!0)},enable:function(enabled){enabled===undefined&&(enabled=!0),this._enabled!==enabled&&(this._enabled=enabled,this.opts.element.prop("disabled",!enabled),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(enabled){enabled===undefined&&(enabled=!1),this._readonly!==enabled&&(this._readonly=enabled,this.opts.element.prop("readonly",enabled),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var bodyOffset,above,changeDirection,css,resultsListNode,$dropdown=this.dropdown,container=this.container,offset=container.offset(),height=container.outerHeight(!1),width=container.outerWidth(!1),dropHeight=$dropdown.outerHeight(!1),$window=$(window),windowWidth=$window.width(),windowHeight=$window.height(),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,dropTop=offset.top+height,dropLeft=offset.left,enoughRoomBelow=dropTop+dropHeight<=viewportBottom,enoughRoomAbove=offset.top-dropHeight>=$window.scrollTop(),dropWidth=$dropdown.outerWidth(!1);$dropdown.hasClass("select2-drop-above")?(above=!0,!enoughRoomAbove&&enoughRoomBelow&&(above=!(changeDirection=!0))):(above=!1,!enoughRoomBelow&&enoughRoomAbove&&(above=changeDirection=!0)),changeDirection&&($dropdown.hide(),offset=this.container.offset(),height=this.container.outerHeight(!1),width=this.container.outerWidth(!1),dropHeight=$dropdown.outerHeight(!1),viewPortRight=$window.scrollLeft()+windowWidth,viewportBottom=$window.scrollTop()+windowHeight,dropTop=offset.top+height,dropLeft=offset.left,dropWidth=$dropdown.outerWidth(!1),$dropdown.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(resultsListNode=$(".select2-results",$dropdown)[0],$dropdown.addClass("select2-drop-auto-width"),$dropdown.css("width",""),width<(dropWidth=$dropdown.outerWidth(!1)+(resultsListNode.scrollHeight===resultsListNode.clientHeight?0:scrollBarDimensions.width))?width=dropWidth:dropWidth=width,dropHeight=$dropdown.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(dropTop-=(bodyOffset=this.body.offset()).top,dropLeft-=bodyOffset.left),!(dropLeft+dropWidth<=viewPortRight)&&offset.left+viewPortRight+container.outerWidth(!1)>dropWidth&&(dropLeft=offset.left+this.container.outerWidth(!1)-dropWidth),css={left:dropLeft,width:width},above?(this.container.addClass("select2-drop-above"),$dropdown.addClass("select2-drop-above"),dropHeight=$dropdown.outerHeight(!1),css.top=offset.top-dropHeight,css.bottom="auto"):(css.top=dropTop,css.bottom="auto",this.container.removeClass("select2-drop-above"),$dropdown.removeClass("select2-drop-above")),css=$.extend(css,evaluate(this.opts.dropdownCss,this.opts.element)),$dropdown.css(css)},shouldOpen:function(){var event;return!this.opened()&&(!1!==this._enabled&&!0!==this._readonly&&(event=$.Event("select2-opening"),this.opts.element.trigger(event),!event.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),$document.on("mousemove.select2Event",function(e){lastMousePosition.x=e.pageX,lastMousePosition.y=e.pageY}),!0)},opening:function(){var mask,cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),0===(mask=$("#select2-drop-mask")).length&&((mask=$(document.createElement("div"))).attr("id","select2-drop-mask").attr("class","select2-drop-mask"),mask.hide(),mask.appendTo(this.body),mask.on("mousedown touchstart click",function(e){reinsertElement(mask);var self,dropdown=$("#select2-drop");0<dropdown.length&&((self=dropdown.data("select2")).opts.selectOnBlur&&self.selectHighlighted({noFocus:!0}),self.close(),e.preventDefault(),e.stopPropagation())})),this.dropdown.prev()[0]!==mask[0]&&this.dropdown.before(mask),$("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),mask.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var that=this;this.container.parents().add(window).each(function(){$(this).on(resize+" "+scroll+" "+orient,function(e){that.opened()&&that.positionDropdown()})})},close:function(){if(this.opened()){var cid=this.containerEventName,scroll="scroll."+cid,resize="resize."+cid,orient="orientationchange."+cid;this.container.parents().add(window).each(function(){$(this).off(scroll).off(resize).off(orient)}),this.clearDropdownAlignmentPreference(),$("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),$document.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.search.removeAttr("aria-activedescendant"),this.opts.element.trigger($.Event("select2-close"))}},externalSearch:function(term){this.open(),this.search.val(term),this.updateResults(!1)},clearSearch:function(){},prefillNextSearchTerm:function(){if(""!==this.search.val())return!1;var nextSearchTerm=this.opts.nextSearchTerm(this.data(),this.lastSearchTerm);return nextSearchTerm!==undefined&&(this.search.val(nextSearchTerm),this.search.select(),!0)},getMaximumSelectionSize:function(){return evaluate(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var children,index,child,hb,rb,y,more,topOffset,results=this.results;(index=this.highlight())<0||(0!=index?(children=this.findHighlightableChoices().find(".select2-result-label"),hb=(topOffset=((child=$(children[index])).offset()||{}).top||0)+child.outerHeight(!0),index===children.length-1&&0<(more=results.find("li.select2-more-results")).length&&(hb=more.offset().top+more.outerHeight(!0)),(rb=results.offset().top+results.outerHeight(!1))<hb&&results.scrollTop(results.scrollTop()+(hb-rb)),(y=topOffset-results.offset().top)<0&&"none"!=child.css("display")&&results.scrollTop(results.scrollTop()+y)):results.scrollTop(0))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(delta){for(var choices=this.findHighlightableChoices(),index=this.highlight();-1<index&&index<choices.length;){var choice=$(choices[index+=delta]);if(choice.hasClass("select2-result-selectable")&&!choice.hasClass("select2-disabled")&&!choice.hasClass("select2-selected")){this.highlight(index);break}}},highlight:function(index){var choice,data,choices=this.findHighlightableChoices();if(0===arguments.length)return indexOf(choices.filter(".select2-highlighted")[0],choices.get());index>=choices.length&&(index=choices.length-1),index<0&&(index=0),this.removeHighlight(),(choice=$(choices[index])).addClass("select2-highlighted"),this.search.attr("aria-activedescendant",choice.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(choice.text()),(data=choice.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(data),choice:data})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(event){var el=$(event.target).closest(".select2-result-selectable");if(0<el.length&&!el.is(".select2-highlighted")){var choices=this.findHighlightableChoices();this.highlight(choices.index(el))}else 0==el.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var results=this.results,more=results.find("li.select2-more-results"),page=this.resultsPage+1,self=this,term=this.search.val(),context=this.context;0!==more.length&&more.offset().top-results.offset().top-results.height()<=this.opts.loadMorePadding&&(more.addClass("select2-active"),this.opts.query({element:this.opts.element,term:term,page:page,context:context,matcher:this.opts.matcher,callback:this.bind(function(data){self.opened()&&(self.opts.populateResults.call(this,results,data.results,{term:term,page:page,context:context}),self.postprocessResults(data,!1,!1),!0===data.more?(more.detach().appendTo(results).html(self.opts.escapeMarkup(evaluate(self.opts.formatLoadMore,self.opts.element,page+1))),window.setTimeout(function(){self.loadMoreIfNeeded()},10)):more.remove(),self.positionDropdown(),self.resultsPage=page,self.context=data.context,this.opts.element.trigger({type:"select2-loaded",items:data}))})}))},tokenize:function(){},updateResults:function(initial){var data,input,queryNumber,search=this.search,results=this.results,opts=this.opts,self=this,term=search.val(),lastTerm=$.data(this.container,"select2-last-term");if((!0===initial||!lastTerm||!equal(term,lastTerm))&&($.data(this.container,"select2-last-term",term),!0===initial||!1!==this.showSearchInput&&this.opened())){queryNumber=++this.queryCount;var maxSelSize=this.getMaximumSelectionSize();if(!(1<=maxSelSize&&(data=this.data(),$.isArray(data)&&data.length>=maxSelSize&&checkFormatter(opts.formatSelectionTooBig,"formatSelectionTooBig"))))return search.val().length<opts.minimumInputLength?(checkFormatter(opts.formatInputTooShort,"formatInputTooShort")?render("<li class='select2-no-results'>"+evaluate(opts.formatInputTooShort,opts.element,search.val(),opts.minimumInputLength)+"</li>"):render(""),void(initial&&this.showSearch&&this.showSearch(!0))):void(opts.maximumInputLength&&search.val().length>opts.maximumInputLength?checkFormatter(opts.formatInputTooLong,"formatInputTooLong")?render("<li class='select2-no-results'>"+evaluate(opts.formatInputTooLong,opts.element,search.val(),opts.maximumInputLength)+"</li>"):render(""):(opts.formatSearching&&0===this.findHighlightableChoices().length&&render("<li class='select2-searching'>"+evaluate(opts.formatSearching,opts.element)+"</li>"),search.addClass("select2-active"),this.removeHighlight(),(input=this.tokenize())!=undefined&&null!=input&&search.val(input),this.resultsPage=1,opts.query({element:opts.element,term:search.val(),page:this.resultsPage,context:null,matcher:opts.matcher,callback:this.bind(function(data){var def;if(queryNumber==this.queryCount)if(this.opened())if(data.hasError!==undefined&&checkFormatter(opts.formatAjaxError,"formatAjaxError"))render("<li class='select2-ajax-error'>"+evaluate(opts.formatAjaxError,opts.element,data.jqXHR,data.textStatus,data.errorThrown)+"</li>");else{if(this.context=data.context===undefined?null:data.context,this.opts.createSearchChoice&&""!==search.val()&&(def=this.opts.createSearchChoice.call(self,search.val(),data.results))!==undefined&&null!==def&&self.id(def)!==undefined&&null!==self.id(def)&&0===$(data.results).filter(function(){return equal(self.id(this),self.id(def))}).length&&this.opts.createSearchChoicePosition(data.results,def),0===data.results.length&&checkFormatter(opts.formatNoMatches,"formatNoMatches"))return render("<li class='select2-no-results'>"+evaluate(opts.formatNoMatches,opts.element,search.val())+"</li>"),void(this.showSearch&&this.showSearch(search.val()));results.empty(),self.opts.populateResults.call(this,results,data.results,{term:search.val(),page:this.resultsPage,context:null}),!0===data.more&&checkFormatter(opts.formatLoadMore,"formatLoadMore")&&(results.append("<li class='select2-more-results'>"+opts.escapeMarkup(evaluate(opts.formatLoadMore,opts.element,this.resultsPage))+"</li>"),window.setTimeout(function(){self.loadMoreIfNeeded()},10)),this.postprocessResults(data,initial),postRender(),this.opts.element.trigger({type:"select2-loaded",items:data})}else this.search.removeClass("select2-active")})})));render("<li class='select2-selection-limit'>"+evaluate(opts.formatSelectionTooBig,opts.element,maxSelSize)+"</li>")}function postRender(){search.removeClass("select2-active"),self.positionDropdown(),results.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?self.liveRegion.text(results.text()):self.liveRegion.text(self.opts.formatMatches(results.find('.select2-result-selectable:not(".select2-selected")').length))}function render(html){results.html(html),postRender()}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){var $el;($el=this.search)[0]!==document.activeElement&&window.setTimeout(function(){var range,el=$el[0],pos=$el.val().length;$el.focus(),(0<el.offsetWidth||0<el.offsetHeight)&&el===document.activeElement&&(el.setSelectionRange?el.setSelectionRange(pos,pos):el.createTextRange&&((range=el.createTextRange()).collapse(!1),range.select()))},0)},selectHighlighted:function(options){if(this._touchMoved)this.clearTouchMoved();else{var index=this.highlight(),data=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");data?(this.highlight(index),this.onSelect(data,options)):options&&options.noFocus&&this.close()}},getPlaceholder:function(){var placeholderOption;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((placeholderOption=this.getPlaceholderOption())!==undefined?placeholderOption.text():undefined)},getPlaceholderOption:function(){if(this.select){var firstOption=this.select.children("option").first();if(this.opts.placeholderOption!==undefined)return"first"===this.opts.placeholderOption&&firstOption||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===$.trim(firstOption.text())&&""===firstOption.val())return firstOption}},initContainerWidth:function(){var width=function(){var style,attrs,matches,i,l;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"!==this.opts.width&&"resolve"!==this.opts.width)return $.isFunction(this.opts.width)?this.opts.width():this.opts.width;if("string"==typeof(style=this.opts.element.attr("style")))for(i=0,l=(attrs=style.split(";")).length;i<l;i+=1)if(null!==(matches=attrs[i].replace(/\s/g,"").match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&1<=matches.length)return matches[1];return"resolve"===this.opts.width?0<(style=this.opts.element.css("width")).indexOf("%")?style:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px":null}.call(this);null!==width&&this.container.css("width",width)}}),{createContainer:function(){return $(document.createElement("div")).attr({class:"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""))},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var el,range,len;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0),this.parent.opening.apply(this,arguments),!1!==this.showSearchInput&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),(el=this.search.get(0)).createTextRange?((range=el.createTextRange()).collapse(!1),range.select()):el.setSelectionRange&&(len=this.search.val().length,el.setSelectionRange(len,len))),this.prefillNextSearchTerm(),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){$("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),cleanupJQueryElements.call(this,"selection","focusser")},initContainer:function(){var selection,elementLabel,container=this.container,dropdown=this.dropdown,idSuffix=nextUid();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=selection=container.find(".select2-choice"),this.focusser=container.find(".select2-focusser"),selection.find(".select2-chosen").attr("id","select2-chosen-"+idSuffix),this.focusser.attr("aria-labelledby","select2-chosen-"+idSuffix),this.results.attr("id","select2-results-"+idSuffix),this.search.attr("aria-owns","select2-results-"+idSuffix),this.focusser.attr("id","s2id_autogen"+idSuffix),elementLabel=$("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.focusser.prev().text(elementLabel.text()).attr("for",this.focusser.attr("id"));var originalTitle=this.opts.element.attr("title");this.opts.element.attr("title",originalTitle||elementLabel.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text($("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode)if(e.which!==KEY.PAGE_UP&&e.which!==KEY.PAGE_DOWN)switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return void this.selectHighlighted({noFocus:!0});case KEY.ESC:return this.cancel(e),void killEvent(e)}else killEvent(e)})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.results&&1<this.results.length&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.ESC){if(!1!==this.opts.openOnEnter||e.which!==KEY.ENTER){if(e.which==KEY.DOWN||e.which==KEY.UP||e.which==KEY.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void killEvent(e)}return e.which==KEY.DELETE||e.which==KEY.BACKSPACE?(this.opts.allowClear&&this.clear(),void killEvent(e)):void 0}killEvent(e)}})),installKeyUpChangeEvent(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(0<=this.opts.minimumResultsForSearch){if(e.stopPropagation(),this.opened())return;this.open()}})),selection.on("mousedown touchstart","abbr",this.bind(function(e){var event;this.isInterfaceEnabled()&&(this.clear(),(event=e).preventDefault(),event.stopImmediatePropagation(),this.close(),this.selection&&this.selection.focus())})),selection.on("mousedown touchstart",this.bind(function(e){reinsertElement(selection),this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),killEvent(e)})),dropdown.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),selection.on("focus",this.bind(function(e){killEvent(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger($.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(triggerChange){var data=this.selection.data("select2-data");if(data){var evt=$.Event("select2-clearing");if(this.opts.element.trigger(evt),evt.isDefaultPrevented())return;var placeholderOption=this.getPlaceholderOption();this.opts.element.val(placeholderOption?placeholderOption.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==triggerChange&&(this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data}),this.triggerChange({removed:data}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var self=this;this.opts.initSelection.call(null,this.opts.element,function(selected){selected!==undefined&&null!==selected&&(self.updateSelection(selected),self.close(),self.setPlaceholder(),self.lastSearchTerm=self.search.val())})}},isPlaceholderOptionSelected:function(){var placeholderOption;return this.getPlaceholder()!==undefined&&((placeholderOption=this.getPlaceholderOption())!==undefined&&placeholderOption.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===undefined||null===this.opts.element.val())},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var selected=element.find("option").filter(function(){return this.selected&&!this.disabled});callback(self.optionToData(selected))}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var id=element.val(),match=null;opts.query({matcher:function(term,text,el){var is_match=equal(id,opts.id(el));return is_match&&(match=el),is_match},callback:$.isFunction(callback)?function(){callback(match)}:$.noop})}),opts},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===undefined?undefined:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var placeholder=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&placeholder!==undefined){if(this.select&&this.getPlaceholderOption()===undefined)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(placeholder)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(data,initial,noHighlightUpdate){var selected=0,self=this;if(this.findHighlightableChoices().each2(function(i,elm){if(equal(self.id(elm.data("select2-data")),self.opts.element.val()))return selected=i,!1}),!1!==noHighlightUpdate&&(!0===initial&&0<=selected?this.highlight(selected):this.highlight(0)),!0===initial){var min=this.opts.minimumResultsForSearch;0<=min&&this.showSearch(function countResults(results){var count=0;return $.each(results,function(i,item){item.children?count+=countResults(item.children):count++}),count}(data.results)>=min)}},showSearch:function(showSearchInput){this.showSearchInput!==showSearchInput&&(this.showSearchInput=showSearchInput,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!showSearchInput),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!showSearchInput),$(this.dropdown,this.container).toggleClass("select2-with-searchbox",showSearchInput))},onSelect:function(data,options){if(this.triggerSelect(data)){var old=this.opts.element.val(),oldData=this.data();this.opts.element.val(this.id(data)),this.updateSelection(data),this.opts.element.trigger({type:"select2-selected",val:this.id(data),choice:data}),this.lastSearchTerm=this.search.val(),this.close(),options&&options.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),equal(old,this.id(data))||this.triggerChange({added:data,removed:oldData})}},updateSelection:function(data){var formatted,cssClass,container=this.selection.find(".select2-chosen");this.selection.data("select2-data",data),container.empty(),null!==data&&(formatted=this.opts.formatSelection(data,container,this.opts.escapeMarkup)),formatted!==undefined&&container.append(formatted),(cssClass=this.opts.formatSelectionCssClass(data,container))!==undefined&&container.addClass(cssClass),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==undefined&&this.container.addClass("select2-allowclear")},val:function(){var val,triggerChange=!1,data=null,self=this,oldData=this.data();if(0===arguments.length)return this.opts.element.val();if(val=arguments[0],1<arguments.length&&(triggerChange=arguments[1],this.opts.debug&&console&&console.warn&&console.warn('Select2: The second option to `select2("val")` is not supported in Select2 4.0.0. The `change` event will always be triggered in 4.0.0.')),this.select)this.opts.debug&&console&&console.warn&&console.warn('Select2: Setting the value on a <select> using `select2("val")` is no longer supported in 4.0.0. You can use the `.val(newValue).trigger("change")` method provided by jQuery instead.'),this.select.val(val).find("option").filter(function(){return this.selected}).each2(function(i,elm){return data=self.optionToData(elm),!1}),this.updateSelection(data),this.setPlaceholder(),triggerChange&&this.triggerChange({added:data,removed:oldData});else{if(!val&&0!==val)return void this.clear(triggerChange);if(this.opts.initSelection===undefined)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(val),this.opts.initSelection(this.opts.element,function(data){self.opts.element.val(data?self.id(data):""),self.updateSelection(data),self.setPlaceholder(),triggerChange&&self.triggerChange({added:data,removed:oldData})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(value){var data,triggerChange=!1;if(0===arguments.length)return(data=this.selection.data("select2-data"))==undefined&&(data=null),data;this.opts.debug&&console&&console.warn&&console.warn('Select2: The `select2("data")` method can no longer set selected values in 4.0.0, consider using the `.val()` method instead.'),1<arguments.length&&(triggerChange=arguments[1]),value?(data=this.data(),this.opts.element.val(value?this.id(value):""),this.updateSelection(value),triggerChange&&this.triggerChange({added:value,removed:data})):this.clear(triggerChange)}}),MultiSelect2=clazz(AbstractSelect2,{createContainer:function(){return $(document.createElement("div")).attr({class:"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var opts=this.parent.prepareOpts.apply(this,arguments),self=this;return"select"===opts.element.get(0).tagName.toLowerCase()?opts.initSelection=function(element,callback){var data=[];element.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(i,elm){data.push(self.optionToData(elm))}),callback(data)}:"data"in opts&&(opts.initSelection=opts.initSelection||function(element,callback){var ids=splitVal(element.val(),opts.separator,opts.transformVal),matches=[];opts.query({matcher:function(term,text,el){var is_match=$.grep(ids,function(id){return equal(id,opts.id(el))}).length;return is_match&&matches.push(el),is_match},callback:$.isFunction(callback)?function(){for(var ordered=[],i=0;i<ids.length;i++)for(var id=ids[i],j=0;j<matches.length;j++){var match=matches[j];if(equal(id,opts.id(match))){ordered.push(match),matches.splice(j,1);break}}callback(ordered)}:$.noop})}),opts},selectChoice:function(choice){var selected=this.container.find(".select2-search-choice-focus");selected.length&&choice&&choice[0]==selected[0]||(selected.length&&this.opts.element.trigger("choice-deselected",selected),selected.removeClass("select2-search-choice-focus"),choice&&choice.length&&(this.close(),choice.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",choice)))},destroy:function(){$("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),cleanupJQueryElements.call(this,"searchContainer","selection")},initContainer:function(){var selection,selector=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=selection=this.container.find(selector);var _this=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){_this.search[0].focus(),_this.selectChoice($(this))}),this.search.attr("id","s2id_autogen"+nextUid()),this.search.prev().text($("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.on("focus.select2",this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var selected=selection.find(".select2-search-choice-focus"),prev=selected.prev(".select2-search-choice:not(.select2-locked)"),next=selected.next(".select2-search-choice:not(.select2-locked)"),pos=function(el){var offset=0,length=0;if("selectionStart"in(el=$(el)[0]))offset=el.selectionStart,length=el.selectionEnd-offset;else if("selection"in document){el.focus();var sel=document.selection.createRange();length=document.selection.createRange().text.length,sel.moveStart("character",-el.value.length),offset=sel.text.length-length}return{offset:offset,length:length}}(this.search);if(selected.length&&(e.which==KEY.LEFT||e.which==KEY.RIGHT||e.which==KEY.BACKSPACE||e.which==KEY.DELETE||e.which==KEY.ENTER)){var selectedChoice=selected;return e.which==KEY.LEFT&&prev.length?selectedChoice=prev:e.which==KEY.RIGHT?selectedChoice=next.length?next:null:e.which===KEY.BACKSPACE?this.unselect(selected.first())&&(this.search.width(10),selectedChoice=prev.length?prev:next):e.which==KEY.DELETE?this.unselect(selected.first())&&(this.search.width(10),selectedChoice=next.length?next:null):e.which==KEY.ENTER&&(selectedChoice=null),this.selectChoice(selectedChoice),killEvent(e),void(selectedChoice&&selectedChoice.length||this.open())}if((e.which===KEY.BACKSPACE&&1==this.keydowns||e.which==KEY.LEFT)&&0==pos.offset&&!pos.length)return this.selectChoice(selection.find(".select2-search-choice:not(.select2-locked)").last()),void killEvent(e);if(this.selectChoice(null),this.opened())switch(e.which){case KEY.UP:case KEY.DOWN:return this.moveHighlight(e.which===KEY.UP?-1:1),void killEvent(e);case KEY.ENTER:return this.selectHighlighted(),void killEvent(e);case KEY.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case KEY.ESC:return this.cancel(e),void killEvent(e)}if(e.which!==KEY.TAB&&!KEY.isControl(e)&&!KEY.isFunctionKey(e)&&e.which!==KEY.BACKSPACE&&e.which!==KEY.ESC){if(e.which===KEY.ENTER){if(!1===this.opts.openOnEnter)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),e.which!==KEY.PAGE_UP&&e.which!==KEY.PAGE_DOWN||killEvent(e),e.which===KEY.ENTER&&killEvent(e)}}})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger($.Event("select2-blur"))})),this.container.on("click",selector,this.bind(function(e){this.isInterfaceEnabled()&&(0<$(e.target).closest(".select2-search-choice").length||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",selector,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger($.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var self=this;this.opts.initSelection.call(null,this.opts.element,function(data){data!==undefined&&null!==data&&(self.updateSelection(data),self.close(),self.clearSearch())})}},clearSearch:function(){var placeholder=this.getPlaceholder(),maxWidth=this.getMaxSearchWidth();placeholder!==undefined&&0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(placeholder).addClass("select2-default"),this.search.width(0<maxWidth?maxWidth:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.prefillNextSearchTerm(),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger($.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(data){var ids={},filtered=[],self=this;$(data).each(function(){self.id(this)in ids||(ids[self.id(this)]=0,filtered.push(this))}),this.selection.find(".select2-search-choice").remove(),this.addSelectedChoice(filtered),self.postprocessResults()},tokenize:function(){var input=this.search.val();null!=(input=this.opts.tokenizer.call(this,input,this.data(),this.bind(this.onSelect),this.opts))&&input!=undefined&&(this.search.val(input),0<input.length&&this.open())},onSelect:function(data,options){this.triggerSelect(data)&&""!==data.text&&(this.addSelectedChoice(data),this.opts.element.trigger({type:"selected",val:this.id(data),choice:data}),this.lastSearchTerm=this.search.val(),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(data,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.prefillNextSearchTerm()&&this.updateResults(),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:data}),options&&options.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(data){var val=this.getVal(),self=this;$(data).each(function(){val.push(self.createChoice(this))}),this.setVal(val)},createChoice:function(data){var formatted,cssClass,enableChoice=!data.locked,enabledItem=$("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),disabledItem=$("<li class='select2-search-choice select2-locked'><div></div></li>"),choice=enableChoice?enabledItem:disabledItem,id=this.id(data);return(formatted=this.opts.formatSelection(data,choice.find("div"),this.opts.escapeMarkup))!=undefined&&choice.find("div").replaceWith($("<div></div>").html(formatted)),(cssClass=this.opts.formatSelectionCssClass(data,choice.find("div")))!=undefined&&choice.addClass(cssClass),enableChoice&&choice.find(".select2-search-choice-close").on("mousedown",killEvent).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect($(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),killEvent(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),choice.data("select2-data",data),choice.insertBefore(this.searchContainer),id},unselect:function(selected){var data,index,val=this.getVal();if(0===(selected=selected.closest(".select2-search-choice")).length)throw"Invalid argument: "+selected+". Must be .select2-search-choice";if(data=selected.data("select2-data")){var evt=$.Event("select2-removing");if(evt.val=this.id(data),evt.choice=data,this.opts.element.trigger(evt),evt.isDefaultPrevented())return!1;for(;0<=(index=indexOf(this.id(data),val));)val.splice(index,1),this.setVal(val),this.select&&this.postprocessResults();return selected.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(data),choice:data}),this.triggerChange({removed:data}),!0}},postprocessResults:function(data,initial,noHighlightUpdate){var val=this.getVal(),choices=this.results.find(".select2-result"),compound=this.results.find(".select2-result-with-children"),self=this;choices.each2(function(i,choice){0<=indexOf(self.id(choice.data("select2-data")),val)&&(choice.addClass("select2-selected"),choice.find(".select2-result-selectable").addClass("select2-selected"))}),compound.each2(function(i,choice){choice.is(".select2-result-selectable")||0!==choice.find(".select2-result-selectable:not(.select2-selected)").length||choice.addClass("select2-selected")}),-1==this.highlight()&&!1!==noHighlightUpdate&&!0===this.opts.closeOnSelect&&self.highlight(0),!this.opts.createSearchChoice&&0<!choices.filter(".select2-result:not(.select2-selected)").length&&(!data||data&&!data.more&&0===this.results.find(".select2-no-results").length)&&checkFormatter(self.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+evaluate(self.opts.formatNoMatches,self.opts.element,self.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-getSideBorderPadding(this.search)},resizeSearch:function(){var minimumWidth,left,maxWidth,searchWidth,sideBorderPadding=getSideBorderPadding(this.search);minimumWidth=function(e){if(!sizer){var style=e[0].currentStyle||window.getComputedStyle(e[0],null);(sizer=$(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:style.fontSize,fontFamily:style.fontFamily,fontStyle:style.fontStyle,fontWeight:style.fontWeight,letterSpacing:style.letterSpacing,textTransform:style.textTransform,whiteSpace:"nowrap"})).attr("class","select2-sizer"),$(document.body).append(sizer)}return sizer.text(e.val()),sizer.width()}(this.search)+10,left=this.search.offset().left,(searchWidth=(maxWidth=this.selection.width())-(left-this.selection.offset().left)-sideBorderPadding)<minimumWidth&&(searchWidth=maxWidth-sideBorderPadding),searchWidth<40&&(searchWidth=maxWidth-sideBorderPadding),searchWidth<=0&&(searchWidth=minimumWidth),this.search.width(Math.floor(searchWidth))},getVal:function(){var val;return this.select?null===(val=this.select.val())?[]:val:splitVal(val=this.opts.element.val(),this.opts.separator,this.opts.transformVal)},setVal:function(val){if(this.select)this.select.val(val);else{var unique=[],valMap={};$(val).each(function(){this in valMap||(unique.push(this),valMap[this]=0)}),this.opts.element.val(0===unique.length?"":unique.join(this.opts.separator))}},buildChangeDetails:function(old,current){current=current.slice(0),old=old.slice(0);for(var i=0;i<current.length;i++)for(var j=0;j<old.length;j++)if(equal(this.opts.id(current[i]),this.opts.id(old[j]))){current.splice(i,1),i--,old.splice(j,1);break}return{added:current,removed:old}},val:function(val,triggerChange){var oldData,self=this;if(0===arguments.length)return this.getVal();if((oldData=this.data()).length||(oldData=[]),!val&&0!==val)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(triggerChange&&this.triggerChange({added:this.data(),removed:oldData}));if(this.setVal(val),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),triggerChange&&this.triggerChange(this.buildChangeDetails(oldData,this.data()));else{if(this.opts.initSelection===undefined)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(data){var ids=$.map(data,self.id);self.setVal(ids),self.updateSelection(data),self.clearSearch(),triggerChange&&self.triggerChange(self.buildChangeDetails(oldData,self.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var val=[],self=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){val.push(self.opts.id($(this).data("select2-data")))}),this.setVal(val),this.triggerChange()},data:function(values,triggerChange){var ids,old,self=this;if(0===arguments.length)return this.selection.children(".select2-search-choice").map(function(){return $(this).data("select2-data")}).get();old=this.data(),values||(values=[]),ids=$.map(values,function(e){return self.opts.id(e)}),this.setVal(ids),this.updateSelection(values),this.clearSearch(),triggerChange&&this.triggerChange(this.buildChangeDetails(old,this.data()))}}),$.fn.select2=function(){var opts,select2,method,value,multiple,args=Array.prototype.slice.call(arguments,0),allowedMethods=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],valueMethods=["opened","isFocused","container","dropdown"],propertyMethods=["val","data"],methodsMap={search:"externalSearch"};return this.each(function(){if(0===args.length||"object"==typeof args[0])(opts=0===args.length?{}:$.extend({},args[0])).element=$(this),"select"===opts.element.get(0).tagName.toLowerCase()?multiple=opts.element.prop("multiple"):(multiple=opts.multiple||!1,"tags"in opts&&(opts.multiple=multiple=!0)),(select2=multiple?new window.Select2.class.multi:new window.Select2.class.single).init(opts);else{if("string"!=typeof args[0])throw"Invalid arguments to select2 plugin: "+args;if(indexOf(args[0],allowedMethods)<0)throw"Unknown method: "+args[0];if(value=undefined,(select2=$(this).data("select2"))===undefined)return;if(method=args[0],value="container"===method?select2.container:"dropdown"===method?select2.dropdown:(methodsMap[method]&&(method=methodsMap[method]),select2[method].apply(select2,args.slice(1))),0<=indexOf(args[0],valueMethods)||0<=indexOf(args[0],propertyMethods)&&1==args.length)return!1}}),value===undefined?this:value},$.fn.select2.defaults={debug:!1,width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(result,container,query,escapeMarkup){var markup=[];return markMatch(this.text(result),query.term,markup,escapeMarkup),markup.join("")},transformVal:function(val){return $.trim(val)},formatSelection:function(data,container,escapeMarkup){return data?escapeMarkup(this.text(data)):undefined},sortResults:function(results,container,query){return results},formatResultCssClass:function(data){return data.css},formatSelectionCssClass:function(data,container){return undefined},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==undefined?null:e.id},text:function(e){return e&&this.data&&this.data.text?$.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(term,text){return 0<=stripDiacritics(""+text).toUpperCase().indexOf(stripDiacritics(""+term).toUpperCase())},separator:",",tokenSeparators:[],tokenizer:function(input,selection,selectCallback,opts){var token,index,i,l,separator,original=input,dupe=!1;if(!opts.createSearchChoice||!opts.tokenSeparators||opts.tokenSeparators.length<1)return undefined;for(;;){for(index=-1,i=0,l=opts.tokenSeparators.length;i<l&&(separator=opts.tokenSeparators[i],!(0<=(index=input.indexOf(separator))));i++);if(index<0)break;if(token=input.substring(0,index),input=input.substring(index+separator.length),0<token.length&&(token=opts.createSearchChoice.call(this,token,selection))!==undefined&&null!==token&&opts.id(token)!==undefined&&null!==opts.id(token)){for(dupe=!1,i=0,l=selection.length;i<l;i++)if(equal(opts.id(token),opts.id(selection[i]))){dupe=!0;break}dupe||selectCallback(token)}}return original!==input?input:void 0},escapeMarkup:defaultEscapeMarkup,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(c){return c},adaptDropdownCssClass:function(c){return null},nextSearchTerm:function(selectedObject,currentSearchTerm){return undefined},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(instance){return!("ontouchstart"in window||0<navigator.msMaxTouchPoints)||!(instance.opts.minimumResultsForSearch<0)}},$.fn.select2.locales=[],$.fn.select2.locales.en={formatMatches:function(matches){return 1===matches?"One result is available, press enter to select it.":matches+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(jqXHR,textStatus,errorThrown){return"Loading failed"},formatInputTooShort:function(input,min){var n=min-input.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(input,max){var n=input.length-max;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(limit){return"You can only select "+limit+" item"+(1==limit?"":"s")},formatLoadMore:function(pageNumber){return"Loading more results…"},formatSearching:function(){return"Searching…"}},$.extend($.fn.select2.defaults,$.fn.select2.locales.en),$.fn.select2.ajaxDefaults={transport:$.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:ajax,local:local,tags:tags},util:{debounce:debounce,markMatch:markMatch,escapeMarkup:defaultEscapeMarkup,stripDiacritics:stripDiacritics},class:{abstract:AbstractSelect2,single:SingleSelect2,multi:MultiSelect2}}}function reinsertElement(element){var placeholder=$(document.createTextNode(""));element.before(placeholder),placeholder.before(element),placeholder.remove()}function stripDiacritics(str){return str.replace(/[^\u0000-\u007E]/g,function(a){return DIACRITICS[a]||a})}function indexOf(value,array){for(var i=0,l=array.length;i<l;i+=1)if(equal(value,array[i]))return i;return-1}function equal(a,b){return a===b||a!==undefined&&b!==undefined&&(null!==a&&null!==b&&(a.constructor===String?a+""==b+"":b.constructor===String&&b+""==a+""))}function splitVal(string,separator,transform){var val,i,l;if(null===string||string.length<1)return[];for(i=0,l=(val=string.split(separator)).length;i<l;i+=1)val[i]=transform(val[i]);return val}function getSideBorderPadding(element){return element.outerWidth(!1)-element.width()}function installKeyUpChangeEvent(element){var key="keyup-change-value";element.on("keydown",function(){$.data(element,key)===undefined&&$.data(element,key,element.val())}),element.on("keyup",function(){var val=$.data(element,key);val!==undefined&&element.val()!==val&&($.removeData(element,key),element.trigger("keyup-change"))})}function debounce(quietMillis,fn,ctx){var timeout;return ctx=ctx||undefined,function(){var args=arguments;window.clearTimeout(timeout),timeout=window.setTimeout(function(){fn.apply(ctx,args)},quietMillis)}}function killEvent(event){event.preventDefault(),event.stopPropagation()}function syncCssClasses(dest,src,adapter){var classes,adapted,replacements=[];(classes=$.trim(dest.attr("class")))&&$((classes=""+classes).split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&replacements.push(this)}),(classes=$.trim(src.attr("class")))&&$((classes=""+classes).split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(adapted=adapter(this))&&replacements.push(adapted)}),dest.attr("class",replacements.join(" "))}function markMatch(text,term,markup,escapeMarkup){var match=stripDiacritics(text.toUpperCase()).indexOf(stripDiacritics(term.toUpperCase())),tl=term.length;match<0?markup.push(escapeMarkup(text)):(markup.push(escapeMarkup(text.substring(0,match))),markup.push("<span class='select2-match'>"),markup.push(escapeMarkup(text.substring(match,match+tl))),markup.push("</span>"),markup.push(escapeMarkup(text.substring(match+tl,text.length))))}function defaultEscapeMarkup(markup){var replace_map={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(markup).replace(/[&<>"'\/\\]/g,function(match){return replace_map[match]})}function ajax(options){var timeout,handler=null,quietMillis=options.quietMillis||100,ajaxUrl=options.url,self=this;return function(query){window.clearTimeout(timeout),timeout=window.setTimeout(function(){var data=options.data,url=ajaxUrl,transport=options.transport||$.fn.select2.ajaxDefaults.transport,deprecated={type:options.type||"GET",cache:options.cache||!1,jsonpCallback:options.jsonpCallback||undefined,dataType:options.dataType||"json"},params=$.extend({},$.fn.select2.ajaxDefaults.params,deprecated);data=data?data.call(self,query.term,query.page,query.context):null,url="function"==typeof url?url.call(self,query.term,query.page,query.context):url,handler&&"function"==typeof handler.abort&&handler.abort(),options.params&&($.isFunction(options.params)?$.extend(params,options.params.call(self)):$.extend(params,options.params)),$.extend(params,{url:url,dataType:options.dataType,data:data,success:function(data){var results=options.results(data,query.page,query);query.callback(results)},error:function(jqXHR,textStatus,errorThrown){var results={hasError:!0,jqXHR:jqXHR,textStatus:textStatus,errorThrown:errorThrown};query.callback(results)}}),handler=transport.call(self,params)},quietMillis)}}function local(options){var dataText,tmp,data=options,text=function(item){return""+item.text};$.isArray(data)&&(data={results:tmp=data}),!1===$.isFunction(data)&&(tmp=data,data=function(){return tmp});var dataItem=data();return dataItem.text&&(text=dataItem.text,$.isFunction(text)||(dataText=dataItem.text,text=function(item){return item[dataText]})),function(query){var process,t=query.term,filtered={results:[]};""!==t?(process=function(datum,collection){var group,attr;if((datum=datum[0]).children){for(attr in group={},datum)datum.hasOwnProperty(attr)&&(group[attr]=datum[attr]);group.children=[],$(datum.children).each2(function(i,childDatum){process(childDatum,group.children)}),(group.children.length||query.matcher(t,text(group),datum))&&collection.push(group)}else query.matcher(t,text(datum),datum)&&collection.push(datum)},$(data().results).each2(function(i,datum){process(datum,filtered.results)}),query.callback(filtered)):query.callback(data())}}function tags(data){var isFunc=$.isFunction(data);return function(query){var t=query.term,filtered={results:[]},result=isFunc?data(query):data;$.isArray(result)&&($(result).each(function(){var isObject=this.text!==undefined,text=isObject?this.text:this;(""===t||query.matcher(t,text))&&filtered.results.push(isObject?this:{id:this,text:this})}),query.callback(filtered))}}function checkFormatter(formatter,formatterName){if($.isFunction(formatter))return!0;if(!formatter)return!1;if("string"==typeof formatter)return!0;throw new Error(formatterName+" must be a string, function, or falsy value")}function evaluate(val,context){if($.isFunction(val)){var args=Array.prototype.slice.call(arguments,2);return val.apply(context,args)}return val}function cleanupJQueryElements(){var self=this;$.each(arguments,function(i,element){self[element].remove(),self[element]=null})}function clazz(SuperClass,methods){var constructor=function(){};return((constructor.prototype=new SuperClass).constructor=constructor).prototype.parent=SuperClass.prototype,constructor.prototype=$.extend(constructor.prototype,methods),constructor}}(jQuery)}.apply(root,arguments)})}(this),function(root){define("jquery.event.drag",["jquery"],function(){return function(){!function($){$.fn.drag=function(str,arg,opts){var type="string"==typeof str?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;return 0!==type.indexOf("drag")&&(type="drag"+type),opts=(str==fn?arg:opts)||{},fn?this.bind(type,opts,fn):this.trigger(type)};var $event=$.event,$special=$event.special,drag=$special.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(obj){var data=$.data(this,drag.datakey),opts=obj.data||{};data.related+=1,$.each(drag.defaults,function(key,def){void 0!==opts[key]&&(data[key]=opts[key])})},remove:function(){$.data(this,drag.datakey).related-=1},setup:function(){if(!$.data(this,drag.datakey)){var data=$.extend({related:0},drag.defaults);$.data(this,drag.datakey,data),$event.add(this,"touchstart mousedown",drag.init,data),this.attachEvent&&this.attachEvent("ondragstart",drag.dontstart)}},teardown:function(){($.data(this,drag.datakey)||{}).related||($.removeData(this,drag.datakey),$event.remove(this,"touchstart mousedown",drag.init),drag.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",drag.dontstart))},init:function(event){if(!drag.touched){var results,dd=event.data;if(!(0!=event.which&&0<dd.which&&event.which!=dd.which)&&!$(event.target).is(dd.not)&&(!dd.handle||$(event.target).closest(dd.handle,event.currentTarget).length)&&(drag.touched="touchstart"==event.type?this:null,dd.propagates=1,dd.mousedown=this,dd.interactions=[drag.interaction(this,dd)],dd.target=event.target,dd.pageX=event.pageX,dd.pageY=event.pageY,dd.dragging=null,results=drag.hijack(event,"draginit",dd),dd.propagates))return(results=drag.flatten(results))&&results.length&&(dd.interactions=[],$.each(results,function(){dd.interactions.push(drag.interaction(this,dd))})),dd.propagates=dd.interactions.length,!1!==dd.drop&&$special.drop&&$special.drop.handler(event,dd),drag.textselect(!1),drag.touched?$event.add(drag.touched,"touchmove touchend",drag.handler,dd):$event.add(document,"mousemove mouseup",drag.handler,dd),!(!drag.touched||dd.live)&&void 0}},interaction:function(elem,dd){var offset=$(elem)[dd.relative?"position":"offset"]()||{top:0,left:0};return{drag:elem,callback:new drag.callback,droppable:[],offset:offset}},handler:function(event){var dd=event.data;switch(event.type){case!dd.dragging&&"touchmove":event.preventDefault();case!dd.dragging&&"mousemove":if(Math.pow(event.pageX-dd.pageX,2)+Math.pow(event.pageY-dd.pageY,2)<Math.pow(dd.distance,2))break;event.target=dd.target,drag.hijack(event,"dragstart",dd),dd.propagates&&(dd.dragging=!0);case"touchmove":event.preventDefault();case"mousemove":if(dd.dragging){if(drag.hijack(event,"drag",dd),dd.propagates){!1!==dd.drop&&$special.drop&&$special.drop.handler(event,dd);break}event.type="mouseup"}case"touchend":case"mouseup":default:drag.touched?$event.remove(drag.touched,"touchmove touchend",drag.handler):$event.remove(document,"mousemove mouseup",drag.handler),dd.dragging&&(!1!==dd.drop&&$special.drop&&$special.drop.handler(event,dd),drag.hijack(event,"dragend",dd)),drag.textselect(!0),!1===dd.click&&dd.dragging&&$.data(dd.mousedown,"suppress.click",(new Date).getTime()+5),dd.dragging=drag.touched=!1}},hijack:function(event,type,dd,x,elem){if(dd){var result,ia,callback,orig={event:event.originalEvent,type:event.type},mode=type.indexOf("drop")?"drag":"drop",i=x||0,len=isNaN(x)?dd.interactions.length:x;event.type=type,event.originalEvent=null,dd.results=[];do{if(ia=dd.interactions[i]){if("dragend"!==type&&ia.cancelled)continue;callback=drag.properties(event,dd,ia),ia.results=[],$(elem||ia[mode]||dd.droppable).each(function(p,subject){if(callback.target=subject,!(event.isPropagationStopped=function(){return!1})===(result=subject?$event.dispatch.call(subject,event,callback):null)?("drag"==mode&&(ia.cancelled=!0,dd.propagates-=1),"drop"==type&&(ia[mode][p]=null)):"dropinit"==type&&ia.droppable.push(drag.element(result)||subject),"dragstart"==type&&(ia.proxy=$(drag.element(result)||ia.drag)[0]),ia.results.push(result),delete event.result,"dropinit"!==type)return result}),dd.results[i]=drag.flatten(ia.results),"dropinit"==type&&(ia.droppable=drag.flatten(ia.droppable)),"dragstart"!=type||ia.cancelled||callback.update()}}while(++i<len);return event.type=orig.type,event.originalEvent=orig.event,drag.flatten(dd.results)}},properties:function(event,dd,ia){var obj=ia.callback;return obj.drag=ia.drag,obj.proxy=ia.proxy||ia.drag,obj.startX=dd.pageX,obj.startY=dd.pageY,obj.deltaX=event.pageX-dd.pageX,obj.deltaY=event.pageY-dd.pageY,obj.originalX=ia.offset.left,obj.originalY=ia.offset.top,obj.offsetX=obj.originalX+obj.deltaX,obj.offsetY=obj.originalY+obj.deltaY,obj.drop=drag.flatten((ia.drop||[]).slice()),obj.available=drag.flatten((ia.droppable||[]).slice()),obj},element:function(arg){if(arg&&(arg.jquery||1==arg.nodeType))return arg},flatten:function(arr){return $.map(arr,function(member){return member&&member.jquery?$.makeArray(member):member&&member.length?drag.flatten(member):member})},textselect:function(bool){$(document)[bool?"unbind":"bind"]("selectstart",drag.dontstart).css("MozUserSelect",bool?"":"none"),document.unselectable=bool?"off":"on"},dontstart:function(){return!1},callback:function(){}};drag.callback.prototype={update:function(){$special.drop&&this.available.length&&$.each(this.available,function(i){$special.drop.locate(this,i)})}};var $dispatch=$event.dispatch;$event.dispatch=function(event){if(!(0<$.data(this,"suppress."+event.type)-(new Date).getTime()))return $dispatch.apply(this,arguments);$.removeData(this,"suppress."+event.type)};var touchHooks=$event.fixHooks.touchstart=$event.fixHooks.touchmove=$event.fixHooks.touchend=$event.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(event,orig){if(orig){var touched=orig.touches&&orig.touches[0]||orig.changedTouches&&orig.changedTouches[0]||null;touched&&$.each(touchHooks.props,function(i,prop){event[prop]=touched[prop]})}return event}}}(jQuery)}.apply(root,arguments)})}(this),function(root){define("jquery.event.drop",["jquery"],function(){return function(){return function($){$.fn.drop=function(str,arg,opts){var type="string"==typeof str?str:"",fn=$.isFunction(str)?str:$.isFunction(arg)?arg:null;return 0!==type.indexOf("drop")&&(type="drop"+type),opts=(str==fn?arg:opts)||{},fn?this.bind(type,opts,fn):this.trigger(type)},$.drop=function(opts){opts=opts||{},drop.multi=!0===opts.multi?1/0:!1===opts.multi?1:isNaN(opts.multi)?drop.multi:opts.multi,drop.delay=opts.delay||drop.delay,drop.tolerance=$.isFunction(opts.tolerance)?opts.tolerance:null===opts.tolerance?null:drop.tolerance,drop.mode=opts.mode||drop.mode||"intersect"};var $special=$.event.special,drop=$.event.special.drop={multi:1,delay:20,mode:"overlap",targets:[],datakey:"dropdata",noBubble:!0,add:function(obj){$.data(this,drop.datakey).related+=1},remove:function(){$.data(this,drop.datakey).related-=1},setup:function(){if(!$.data(this,drop.datakey)){$.data(this,drop.datakey,{related:0,active:[],anyactive:0,winner:0,location:{}}),drop.targets.push(this)}},teardown:function(){if(!($.data(this,drop.datakey)||{}).related){$.removeData(this,drop.datakey);var element=this;drop.targets=$.grep(drop.targets,function(target){return target!==element})}},handler:function(event,dd){var $targets;if(dd)switch(event.type){case"mousedown":case"touchstart":$targets=$(drop.targets),"string"==typeof dd.drop&&($targets=$targets.filter(dd.drop)),$targets.each(function(){var data=$.data(this,drop.datakey);data.active=[],data.anyactive=0,data.winner=0}),dd.droppable=$targets,$special.drag.hijack(event,"dropinit",dd);break;case"mousemove":case"touchmove":drop.event=event,drop.timer||drop.tolerate(dd);break;case"mouseup":case"touchend":drop.timer=clearTimeout(drop.timer),dd.propagates&&($special.drag.hijack(event,"drop",dd),$special.drag.hijack(event,"dropend",dd))}},locate:function(elem,index){var data=$.data(elem,drop.datakey),$elem=$(elem),posi=$elem.offset()||{},height=$elem.outerHeight(),width=$elem.outerWidth(),location={elem:elem,width:width,height:height,top:posi.top,left:posi.left,right:posi.left+width,bottom:posi.top+height};return data&&(data.location=location,data.index=index,data.elem=elem),location},contains:function(target,test){return(test[0]||test.left)>=target.left&&(test[0]||test.right)<=target.right&&(test[1]||test.top)>=target.top&&(test[1]||test.bottom)<=target.bottom},modes:{intersect:function(event,proxy,target){return this.contains(target,[event.pageX,event.pageY])?1e9:this.modes.overlap.apply(this,arguments)},overlap:function(event,proxy,target){return Math.max(0,Math.min(target.bottom,proxy.bottom)-Math.max(target.top,proxy.top))*Math.max(0,Math.min(target.right,proxy.right)-Math.max(target.left,proxy.left))},fit:function(event,proxy,target){return this.contains(target,proxy)?1:0},middle:function(event,proxy,target){return this.contains(target,[proxy.left+.5*proxy.width,proxy.top+.5*proxy.height])?1:0}},sort:function(a,b){return b.winner-a.winner||a.index-b.index},tolerate:function(dd){var i,drp,drg,data,arr,len,elem,ia,x=0,end=dd.interactions.length,xy=[drop.event.pageX,drop.event.pageY],tolerance=drop.tolerance||drop.modes[drop.mode];do{if(ia=dd.interactions[x]){if(!ia)return;ia.drop=[],arr=[],len=ia.droppable.length,tolerance&&(drg=drop.locate(ia.proxy)),i=0;do{if(elem=ia.droppable[i]){if(!(drp=(data=$.data(elem,drop.datakey)).location))continue;data.winner=tolerance?tolerance.call(drop,drop.event,drg,drp):drop.contains(drp,xy)?1:0,arr.push(data)}}while(++i<len);for(arr.sort(drop.sort),i=0;(data=arr[i])&&(data.winner&&ia.drop.length<drop.multi?(data.active[x]||data.anyactive||(!1!==$special.drag.hijack(drop.event,"dropstart",dd,x,data.elem)[0]?(data.active[x]=1,data.anyactive+=1):data.winner=0),data.winner&&ia.drop.push(data.elem)):data.active[x]&&1==data.anyactive&&($special.drag.hijack(drop.event,"dropend",dd,x,data.elem),data.active[x]=0,data.anyactive-=1)),++i<len;);}}while(++x<end);drop.last&&xy[0]==drop.last.pageX&&xy[1]==drop.last.pageY?delete drop.timer:drop.timer=setTimeout(function(){drop.tolerate(dd)},drop.delay),drop.last=drop.event}};$special.dropinit=$special.dropstart=$special.dropend=drop}(jQuery),$.drop}.apply(root,arguments)})}(this),define("mockup-patterns-select2",["jquery","pat-base","mockup-utils","select2","jquery.event.drag","jquery.event.drop"],function($,Base,utils){"use strict";return Base.extend({name:"select2",trigger:".pat-select2",parser:"mockup",defaults:{separator:","},initializeValues:function(){var self=this;self.options.initialValues&&(self.options.id=function(term){return term.id},self.options.initSelection=function($el,callback){var data=[],value=$el.val(),seldefaults=self.options.initialValues;"string"==typeof self.options.initialValues&&""!==self.options.initialValues&&("{"===self.options.initialValues[0]?seldefaults=JSON.parse(self.options.initialValues):(seldefaults={},$(self.options.initialValues.split(self.options.separator)).each(function(){var selection=this.split(":"),id=$.trim(selection[0]),text=$.trim(selection[1]);seldefaults[id]=text}))),$(value.split(self.options.separator)).each(function(){var text=this;seldefaults[this]&&(text=seldefaults[this]),data.push({id:utils.removeHTML(this),text:utils.removeHTML(text)})}),callback(data)})},initializeTags:function(){this.options.tags&&"string"==typeof this.options.tags&&("["===this.options.tags.substr(0,1)?this.options.tags=JSON.parse(this.options.tags):this.options.tags=this.options.tags.split(this.options.separator)),this.options.tags&&!this.options.allowNewItems&&(this.options.data=$.map(this.options.tags,function(value,i){return{id:value,text:value}}),this.options.multiple=!0,delete this.options.tags)},initializeOrdering:function(){var self=this;if(self.options.orderable){var formatSelection=function(data,$container){return data?data.text:void 0};self.options.formatSelection&&(formatSelection=self.options.formatSelection),self.options.formatSelection=function(data,$container){return $container.parents("li").drag("start",function(e,dd){return $(this).addClass("select2-choice-dragging"),self.$el.select2("onSortStart"),$.drop({tolerance:function(event,proxy,target){var test=event.pageY>target.top+target.height/2;return $.data(target.elem,"drop+reorder",test?"insertAfter":"insertBefore"),this.contains(target,[event.pageX,event.pageY])}}),$(this).clone().addClass("dragging").css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(e,dd){$(dd.proxy).css({top:dd.offsetY,left:dd.offsetX});var drop=dd.drop[0],method=$.data(drop||{},"drop+reorder");!drop||drop==dd.current&&method==dd.method||($(this)[method](drop),dd.current=drop,dd.method=method,dd.update())}).drag("end",function(e,dd){$(this).removeClass("select2-choice-dragging"),self.$el.select2("onSortEnd"),$(dd.proxy).remove()}).drop("init",function(e,dd){return this!=dd.drag}),formatSelection(data,$container)}}},initializeSelect2:function(){this.options.formatResultCssClass=function(ob){if(ob.id)return"select2-option-"+ob.id.toLowerCase().replace(/[ \:\)\(\[\]\{\}\_\+\=\&\*\%\#]/g,"-")},this.$el.select2(this.options),this.$select2=this.$el.parent().find(".select2-container"),this.$el.parent().off("close.plone-modal.patterns"),this.options.orderable&&this.$select2.addClass("select2-orderable")},init:function(){var self=this;if(self.options.allowNewItems=!self.options.hasOwnProperty("allowNewItems")||JSON.parse(self.options.allowNewItems),self.options.ajax||self.options.vocabularyUrl){self.options.vocabularyUrl&&(self.options.multiple=void 0===self.options.multiple||self.options.multiple,self.options.ajax=self.options.ajax||{},self.options.ajax.url=self.options.vocabularyUrl,self.options.initSelection=function($el,callback){var data=[],value=$el.val();$(value.split(self.options.separator)).each(function(){var val=utils.removeHTML(this);data.push({id:val,text:val})}),callback(data)});var queryTerm="";self.options.ajax=$.extend({quietMillis:300,data:function(term,page){return{query:queryTerm=term,page_limit:10,page:page}},results:function(data,page){var results=data.results;if(self.options.vocabularyUrl){var dataIds=[];$.each(data.results,function(i,item){dataIds.push(item.id)}),results=[];var haveResult=""===queryTerm||0<=$.inArray(queryTerm,dataIds);self.options.allowNewItems&&!haveResult&&(queryTerm=utils.removeHTML(queryTerm),results.push({id:queryTerm,text:queryTerm})),$.each(data.results,function(i,item){results.push(item)})}return{results:results}}},self.options.ajax)}else if(self.options.multiple&&self.$el.is("select")){var vals=self.$el.val()||[],options=$.map(self.$el.find("option"),function(o){return{text:$(o).html(),id:o.value}}),$hidden=$('<input type="hidden" />');$hidden.val(vals.join(self.options.separator)),$hidden.attr("class",self.$el.attr("class")),$hidden.attr("name",self.$el.attr("name")),$hidden.attr("id",self.$el.attr("id")),self.$orig=self.$el,self.$el.replaceWith($hidden),self.$el=$hidden,self.options.data=options}self.initializeValues(),self.initializeTags(),self.initializeOrdering(),self.initializeSelect2()}})}),define("mockup-i18n",["jquery"],function($){"use strict";return function(){var self=this;self.baseUrl=$("body").attr("data-i18ncatalogurl"),self.baseUrl||(self.baseUrl="/plonejsi18n"),self.currentLanguage=$("html").attr("lang")||"en",1<self.currentLanguage.split("-").length&&(self.currentLanguage=self.currentLanguage.split("-")[0]+"_"+self.currentLanguage.split("-")[1].toUpperCase()),self.storage=null,self.catalogs={},self.ttl=864e5,Date.now||(Date.now=function(){return(new Date).valueOf()});try{"localStorage"in window&&null!==window.localStorage&&"JSON"in window&&null!==window.JSON&&(self.storage=window.localStorage)}catch(e){}self.configure=function(config){for(var key in config)self[key]=config[key]},self._setCatalog=function(domain,language,catalog){domain in self.catalogs||(self.catalogs[domain]={}),self.catalogs[domain][language]=catalog},self._storeCatalog=function(domain,language,catalog){var key=domain+"-"+language;null!==self.storage&&null!==catalog&&(self.storage.setItem(key,JSON.stringify(catalog)),self.storage.setItem(key+"-updated",Date.now()))},self.getUrl=function(domain,language){return self.baseUrl+"?domain="+domain+"&language="+language},self.loadCatalog=function(domain,language){if(void 0===language&&(language=self.currentLanguage),null!==self.storage){var key=domain+"-"+language;if(key in self.storage&&Date.now()-parseInt(self.storage.getItem(key+"-updated"),10)<self.ttl){var catalog=JSON.parse(self.storage.getItem(key));return void self._setCatalog(domain,language,catalog)}}$.getJSON(self.getUrl(domain,language),function(catalog){null!==catalog&&(self._setCatalog(domain,language,catalog),self._storeCatalog(domain,language,catalog))})},self.MessageFactory=function(domain,language){return language=language||self.currentLanguage,function(msgid,keywords){var msgstr,regexp,keyword;if(msgstr=domain in self.catalogs&&language in self.catalogs[domain]&&msgid in self.catalogs[domain][language]?self.catalogs[domain][language][msgid]:msgid,keywords)for(keyword in keywords)keywords.hasOwnProperty(keyword)&&(regexp=new RegExp("\\$\\{"+keyword+"\\}","g"),msgstr=msgstr.replace(regexp,keywords[keyword]));return msgstr}}}}),define("translate",["mockup-i18n"],function(I18N){"use strict";var _t=null;return function(msgid,keywords){if(null===_t){var i18n=new I18N;i18n.loadCatalog("widgets"),_t=i18n.MessageFactory("widgets")}return _t(msgid,keywords)}}),function(factory){"function"==typeof define&&define.amd?define("picker",["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):this.Picker=factory(jQuery)}(function($){var $window=$(window),$document=$(document),$html=$(document.documentElement),supportsTransitions=null!=document.documentElement.style.transition;function PickerConstructor(ELEMENT,NAME,COMPONENT,OPTIONS){if(!ELEMENT)return PickerConstructor;var IS_DEFAULT_THEME=!1,STATE={id:ELEMENT.id||"P"+Math.abs(~~(Math.random()*new Date))},SETTINGS=COMPONENT?$.extend(!0,{},COMPONENT.defaults,OPTIONS):OPTIONS||{},CLASSES=$.extend({},PickerConstructor.klasses(),SETTINGS.klass),$ELEMENT=$(ELEMENT),PickerInstance=function(){return this.start()},P=PickerInstance.prototype={constructor:PickerInstance,$node:$ELEMENT,start:function(){return STATE&&STATE.start?P:(STATE.methods={},STATE.start=!0,STATE.open=!1,STATE.type=ELEMENT.type,ELEMENT.autofocus=ELEMENT==getActiveElement(),ELEMENT.readOnly=!SETTINGS.editable,ELEMENT.id=ELEMENT.id||STATE.id,"text"!=ELEMENT.type&&(ELEMENT.type="text"),P.component=new COMPONENT(P,SETTINGS),P.$root=$('<div class="'+CLASSES.picker+'" id="'+ELEMENT.id+'_root" />'),aria(P.$root[0],"hidden",!0),P.$holder=$(createWrappedComponent()).appendTo(P.$root),prepareElementHolder(),SETTINGS.formatSubmit&&function(){var name;!0===SETTINGS.hiddenName?(name=ELEMENT.name,ELEMENT.name=""):name=(name=["string"==typeof SETTINGS.hiddenPrefix?SETTINGS.hiddenPrefix:"","string"==typeof SETTINGS.hiddenSuffix?SETTINGS.hiddenSuffix:"_submit"])[0]+ELEMENT.name+name[1];P._hidden=$('<input type=hidden name="'+name+'"'+($ELEMENT.data("value")||ELEMENT.value?' value="'+P.get("select",SETTINGS.formatSubmit)+'"':"")+">")[0],$ELEMENT.on("change."+STATE.id,function(){P._hidden.value=ELEMENT.value?P.get("select",SETTINGS.formatSubmit):""})}(),function(){$ELEMENT.data(NAME,P).addClass(CLASSES.input).val($ELEMENT.data("value")?P.get("select",SETTINGS.format):ELEMENT.value),SETTINGS.editable||$ELEMENT.on("focus."+STATE.id+" click."+STATE.id,function(event){event.preventDefault(),P.open()}).on("keydown."+STATE.id,handleKeydownEvent);aria(ELEMENT,{haspopup:!0,expanded:!1,readonly:!1,owns:ELEMENT.id+"_root"})}(),SETTINGS.containerHidden?$(SETTINGS.containerHidden).append(P._hidden):$ELEMENT.after(P._hidden),SETTINGS.container?$(SETTINGS.container).append(P.$root):$ELEMENT.after(P.$root),P.on({start:P.component.onStart,render:P.component.onRender,stop:P.component.onStop,open:P.component.onOpen,close:P.component.onClose,set:P.component.onSet}).on({start:SETTINGS.onStart,render:SETTINGS.onRender,stop:SETTINGS.onStop,open:SETTINGS.onOpen,close:SETTINGS.onClose,set:SETTINGS.onSet}),IS_DEFAULT_THEME=function(element){var theme;element.currentStyle?theme=element.currentStyle.position:window.getComputedStyle&&(theme=getComputedStyle(element).position);return"fixed"==theme}(P.$holder[0]),ELEMENT.autofocus&&P.open(),P.trigger("start").trigger("render"))},render:function(entireComponent){return entireComponent?(P.$holder=$(createWrappedComponent()),prepareElementHolder(),P.$root.html(P.$holder)):P.$root.find("."+CLASSES.box).html(P.component.nodes(STATE.open)),P.trigger("render")},stop:function(){return STATE.start&&(P.close(),P._hidden&&P._hidden.parentNode.removeChild(P._hidden),P.$root.remove(),$ELEMENT.removeClass(CLASSES.input).removeData(NAME),setTimeout(function(){$ELEMENT.off("."+STATE.id)},0),ELEMENT.type=STATE.type,ELEMENT.readOnly=!1,P.trigger("stop"),STATE.methods={},STATE.start=!1),P},open:function(dontGiveFocus){return STATE.open?P:($ELEMENT.addClass(CLASSES.active),aria(ELEMENT,"expanded",!0),setTimeout(function(){P.$root.addClass(CLASSES.opened),aria(P.$root[0],"hidden",!1)},0),!1!==dontGiveFocus&&(STATE.open=!0,IS_DEFAULT_THEME&&$html.css("overflow","hidden").css("padding-right","+="+getScrollbarWidth()),IS_DEFAULT_THEME&&supportsTransitions?P.$holder.find("."+CLASSES.frame).one("transitionend",function(){P.$holder[0].focus()}):P.$holder[0].focus(),$document.on("click."+STATE.id+" focusin."+STATE.id,function(event){var target=event.target;target!=ELEMENT&&target!=document&&3!=event.which&&P.close(target===P.$holder[0])}).on("keydown."+STATE.id,function(event){var keycode=event.keyCode,keycodeToMove=P.component.key[keycode],target=event.target;27==keycode?P.close(!0):target!=P.$holder[0]||!keycodeToMove&&13!=keycode?$.contains(P.$root[0],target)&&13==keycode&&(event.preventDefault(),target.click()):(event.preventDefault(),keycodeToMove?PickerConstructor._.trigger(P.component.key.go,P,[PickerConstructor._.trigger(keycodeToMove)]):P.$root.find("."+CLASSES.highlighted).hasClass(CLASSES.disabled)||(P.set("select",P.component.item.highlight),SETTINGS.closeOnSelect&&P.close(!0)))})),P.trigger("open"))},close:function(giveFocus){return giveFocus&&(SETTINGS.editable?ELEMENT.focus():(P.$holder.off("focus.toOpen").focus(),setTimeout(function(){P.$holder.on("focus.toOpen",handleFocusToOpenEvent)},0))),$ELEMENT.removeClass(CLASSES.active),aria(ELEMENT,"expanded",!1),setTimeout(function(){P.$root.removeClass(CLASSES.opened+" "+CLASSES.focused),aria(P.$root[0],"hidden",!0)},0),STATE.open?(STATE.open=!1,IS_DEFAULT_THEME&&$html.css("overflow","").css("padding-right","-="+getScrollbarWidth()),$document.off("."+STATE.id),P.trigger("close")):P},clear:function(options){return P.set("clear",null,options)},set:function(thing,value,options){var thingItem,thingValue,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(options=thingIsObject&&$.isPlainObject(value)?value:options||{},thing){for(thingItem in thingIsObject||(thingObject[thing]=value),thingObject)thingValue=thingObject[thingItem],thingItem in P.component.item&&(void 0===thingValue&&(thingValue=null),P.component.set(thingItem,thingValue,options)),"select"!=thingItem&&"clear"!=thingItem||$ELEMENT.val("clear"==thingItem?"":P.get(thingItem,SETTINGS.format)).trigger("change");P.render()}return options.muted?P:P.trigger("set",thingObject)},get:function(thing,format){if(null!=STATE[thing=thing||"value"])return STATE[thing];if("valueSubmit"==thing){if(P._hidden)return P._hidden.value;thing="value"}if("value"==thing)return ELEMENT.value;if(thing in P.component.item){if("string"!=typeof format)return P.component.get(thing);var thingValue=P.component.get(thing);return thingValue?PickerConstructor._.trigger(P.component.formats.toString,P.component,[format,thingValue]):""}},on:function(thing,method,internal){var thingName,thingMethod,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{};if(thing)for(thingName in thingIsObject||(thingObject[thing]=method),thingObject)thingMethod=thingObject[thingName],internal&&(thingName="_"+thingName),STATE.methods[thingName]=STATE.methods[thingName]||[],STATE.methods[thingName].push(thingMethod);return P},off:function(){var i,thingName,names=arguments;for(i=0,namesCount=names.length;i<namesCount;i+=1)(thingName=names[i])in STATE.methods&&delete STATE.methods[thingName];return P},trigger:function(name,data){var _trigger=function(name){var methodList=STATE.methods[name];methodList&&methodList.map(function(method){PickerConstructor._.trigger(method,P,[data])})};return _trigger("_"+name),_trigger(name),P}};function createWrappedComponent(){return PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",PickerConstructor._.node("div",P.component.nodes(STATE.open),CLASSES.box),CLASSES.wrap),CLASSES.frame),CLASSES.holder,'tabindex="-1"')}function prepareElementHolder(){P.$holder.on({keydown:handleKeydownEvent,"focus.toOpen":handleFocusToOpenEvent,blur:function(){$ELEMENT.removeClass(CLASSES.target)},focusin:function(event){P.$root.removeClass(CLASSES.focused),event.stopPropagation()},"mousedown click":function(event){var target=event.target;target!=P.$holder[0]&&(event.stopPropagation(),"mousedown"!=event.type||$(target).is("input, select, textarea, button, option")||(event.preventDefault(),P.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var $target=$(this),targetData=$target.data(),targetDisabled=$target.hasClass(CLASSES.navDisabled)||$target.hasClass(CLASSES.disabled),activeElement=getActiveElement();activeElement=activeElement&&(activeElement.type||activeElement.href),(targetDisabled||activeElement&&!$.contains(P.$root[0],activeElement))&&P.$holder[0].focus(),!targetDisabled&&targetData.nav?P.set("highlight",P.component.item.highlight,{nav:targetData.nav}):!targetDisabled&&"pick"in targetData?(P.set("select",targetData.pick),SETTINGS.closeOnSelect&&P.close(!0)):targetData.clear?(P.clear(),SETTINGS.closeOnClear&&P.close(!0)):targetData.close&&P.close(!0)})}function handleFocusToOpenEvent(event){event.stopPropagation(),$ELEMENT.addClass(CLASSES.target),P.$root.addClass(CLASSES.focused),P.open()}function handleKeydownEvent(event){var keycode=event.keyCode,isKeycodeDelete=/^(8|46)$/.test(keycode);if(27==keycode)return P.close(!0),!1;(32==keycode||isKeycodeDelete||!STATE.open&&P.component.key[keycode])&&(event.preventDefault(),event.stopPropagation(),isKeycodeDelete?P.clear().close():P.open())}return new PickerInstance}function getScrollbarWidth(){if($html.height()<=$window.height())return 0;var $outer=$('<div style="visibility:hidden;width:100px" />').appendTo("body"),widthWithoutScroll=$outer[0].offsetWidth;$outer.css("overflow","scroll");var widthWithScroll=$('<div style="width:100%" />').appendTo($outer)[0].offsetWidth;return $outer.remove(),widthWithoutScroll-widthWithScroll}function aria(element,attribute,value){if($.isPlainObject(attribute))for(var key in attribute)ariaSet(element,key,attribute[key]);else ariaSet(element,attribute,value)}function ariaSet(element,attribute,value){element.setAttribute(("role"==attribute?"":"aria-")+attribute,value)}function getActiveElement(){try{return document.activeElement}catch(err){}}return PickerConstructor.klasses=function(prefix){return{picker:prefix=prefix||"picker",opened:prefix+"--opened",focused:prefix+"--focused",input:prefix+"__input",active:prefix+"__input--active",target:prefix+"__input--target",holder:prefix+"__holder",frame:prefix+"__frame",wrap:prefix+"__wrap",box:prefix+"__box"}},PickerConstructor._={group:function(groupObject){for(var loopObjectScope,nodesList="",counter=PickerConstructor._.trigger(groupObject.min,groupObject);counter<=PickerConstructor._.trigger(groupObject.max,groupObject,[counter]);counter+=groupObject.i)loopObjectScope=PickerConstructor._.trigger(groupObject.item,groupObject,[counter]),nodesList+=PickerConstructor._.node(groupObject.node,loopObjectScope[0],loopObjectScope[1],loopObjectScope[2]);return nodesList},node:function(wrapper,item,klass,attribute){return item?"<"+wrapper+(klass=klass?' class="'+klass+'"':"")+(attribute=attribute?" "+attribute:"")+">"+(item=$.isArray(item)?item.join(""):item)+"</"+wrapper+">":""},lead:function(number){return(number<10?"0":"")+number},trigger:function(callback,scope,args){return"function"==typeof callback?callback.apply(scope,args||[]):callback},digits:function(string){return/\d/.test(string[1])?2:1},isDate:function(value){return-1<{}.toString.call(value).indexOf("Date")&&this.isInteger(value.getDate())},isInteger:function(value){return-1<{}.toString.call(value).indexOf("Number")&&value%1==0},ariaAttr:function(attribute,data){$.isPlainObject(attribute)||(attribute={attribute:data});for(var key in data="",attribute){var attr=("role"==key?"":"aria-")+key,attrVal=attribute[key];data+=null==attrVal?"":attr+'="'+attribute[key]+'"'}return data}},PickerConstructor.extend=function(name,Component){$.fn[name]=function(options,action){var componentData=this.data(name);return"picker"==options?componentData:componentData&&"string"==typeof options?PickerConstructor._.trigger(componentData[options],componentData,[action]):this.each(function(){$(this).data(name)||new PickerConstructor(this,name,Component,options)})},$.fn[name].defaults=Component.defaults},PickerConstructor}),function(factory){"function"==typeof define&&define.amd?define("picker.date",["picker","jquery"],factory):"object"==typeof exports?module.exports=factory(require("./picker.js"),require("jquery")):factory(Picker,jQuery)}(function(Picker,$){var prefix,_=Picker._;function DatePicker(picker,settings){var collectionDisabled,calendar=this,element=picker.$node[0],elementValue=element.value,elementDataValue=picker.$node.data("value"),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format,isRTL=function(){return element.currentStyle?"rtl"==element.currentStyle.direction:"rtl"==getComputedStyle(picker.$root[0]).direction};calendar.settings=settings,calendar.$node=picker.$node,calendar.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},calendar.item={},calendar.item.clear=null,calendar.item.disable=(settings.disable||[]).slice(0),calendar.item.enable=-(!0===(collectionDisabled=calendar.item.disable)[0]?collectionDisabled.shift():-1),calendar.set("min",settings.min).set("max",settings.max).set("now"),valueString?calendar.set("select",valueString,{format:formatString,defaultValue:!0}):calendar.set("select",null).set("highlight",calendar.item.now),calendar.key={40:7,38:-7,39:function(){return isRTL()?-1:1},37:function(){return isRTL()?1:-1},go:function(timeChange){var highlightedObject=calendar.item.highlight,targetDate=new Date(highlightedObject.year,highlightedObject.month,highlightedObject.date+timeChange);calendar.set("highlight",targetDate,{interval:timeChange}),this.render()}},picker.on("render",function(){picker.$root.find("."+settings.klass.selectMonth).on("change",function(){var value=this.value;value&&(picker.set("highlight",[picker.get("view").year,value,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectMonth).trigger("focus"))}),picker.$root.find("."+settings.klass.selectYear).on("change",function(){var value=this.value;value&&(picker.set("highlight",[value,picker.get("view").month,picker.get("highlight").date]),picker.$root.find("."+settings.klass.selectYear).trigger("focus"))})},1).on("open",function(){var includeToday="";calendar.disabled(calendar.get("now"))&&(includeToday=":not(."+settings.klass.buttonToday+")"),picker.$root.find("button"+includeToday+", select").attr("disabled",!1)},1).on("close",function(){picker.$root.find("button, select").attr("disabled",!0)},1)}DatePicker.prototype.set=function(type,value,options){var calendar=this,calendarItem=calendar.item;return null===value?("clear"==type&&(type="select"),calendarItem[type]=value):(calendarItem["enable"==type?"disable":"flip"==type?"enable":type]=calendar.queue[type].split(" ").map(function(method){return value=calendar[method](type,value,options)}).pop(),"select"==type?calendar.set("highlight",calendarItem.select,options):"highlight"==type?calendar.set("view",calendarItem.highlight,options):type.match(/^(flip|min|max|disable|enable)$/)&&(calendarItem.select&&calendar.disabled(calendarItem.select)&&calendar.set("select",calendarItem.select,options),calendarItem.highlight&&calendar.disabled(calendarItem.highlight)&&calendar.set("highlight",calendarItem.highlight,options))),calendar},DatePicker.prototype.get=function(type){return this.item[type]},DatePicker.prototype.create=function(type,value,options){var isInfiniteValue;return(value=void 0===value?type:value)==-1/0||value==1/0?isInfiniteValue=value:value=$.isPlainObject(value)&&_.isInteger(value.pick)?value.obj:$.isArray(value)?(value=new Date(value[0],value[1],value[2]),_.isDate(value)?value:this.create().obj):_.isInteger(value)||_.isDate(value)?this.normalize(new Date(value),options):this.now(type,value,options),{year:isInfiniteValue||value.getFullYear(),month:isInfiniteValue||value.getMonth(),date:isInfiniteValue||value.getDate(),day:isInfiniteValue||value.getDay(),obj:isInfiniteValue||value,pick:isInfiniteValue||value.getTime()}},DatePicker.prototype.createRange=function(from,to){var calendar=this,createDate=function(date){return!0===date||$.isArray(date)||_.isDate(date)?calendar.create(date):date};return _.isInteger(from)||(from=createDate(from)),_.isInteger(to)||(to=createDate(to)),_.isInteger(from)&&$.isPlainObject(to)?from=[to.year,to.month,to.date+from]:_.isInteger(to)&&$.isPlainObject(from)&&(to=[from.year,from.month,from.date+to]),{from:createDate(from),to:createDate(to)}},DatePicker.prototype.withinRange=function(range,dateUnit){return range=this.createRange(range.from,range.to),dateUnit.pick>=range.from.pick&&dateUnit.pick<=range.to.pick},DatePicker.prototype.overlapRanges=function(one,two){return one=this.createRange(one.from,one.to),two=this.createRange(two.from,two.to),this.withinRange(one,two.from)||this.withinRange(one,two.to)||this.withinRange(two,one.from)||this.withinRange(two,one.to)},DatePicker.prototype.now=function(type,value,options){return value=new Date,options&&options.rel&&value.setDate(value.getDate()+options.rel),this.normalize(value,options)},DatePicker.prototype.navigate=function(type,value,options){var targetDateObject,targetYear,targetMonth,targetDate,isTargetArray=$.isArray(value),isTargetObject=$.isPlainObject(value),viewsetObject=this.item.view;if(isTargetArray||isTargetObject){for(targetDate=isTargetObject?(targetYear=value.year,targetMonth=value.month,value.date):(targetYear=+value[0],targetMonth=+value[1],+value[2]),options&&options.nav&&viewsetObject&&viewsetObject.month!==targetMonth&&(targetYear=viewsetObject.year,targetMonth=viewsetObject.month),targetYear=(targetDateObject=new Date(targetYear,targetMonth+(options&&options.nav?options.nav:0),1)).getFullYear(),targetMonth=targetDateObject.getMonth();new Date(targetYear,targetMonth,targetDate).getMonth()!==targetMonth;)targetDate-=1;value=[targetYear,targetMonth,targetDate]}return value},DatePicker.prototype.normalize=function(value){return value.setHours(0,0,0,0),value},DatePicker.prototype.measure=function(type,value){return value?"string"==typeof value?value=this.parse(type,value):_.isInteger(value)&&(value=this.now(type,value,{rel:value})):value="min"==type?-1/0:1/0,value},DatePicker.prototype.viewset=function(type,dateObject){return this.create([dateObject.year,dateObject.month,1])},DatePicker.prototype.validate=function(type,dateObject,options){var hasEnabledBeforeTarget,hasEnabledAfterTarget,reachedMin,reachedMax,calendar=this,originalDateObject=dateObject,interval=options&&options.interval?options.interval:1,isFlippedBase=-1===calendar.item.enable,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,hasEnabledWeekdays=isFlippedBase&&calendar.item.disable.filter(function(value){if($.isArray(value)){var dateTime=calendar.create(value).pick;dateTime<dateObject.pick?hasEnabledBeforeTarget=!0:dateTime>dateObject.pick&&(hasEnabledAfterTarget=!0)}return _.isInteger(value)}).length;if((!options||!options.nav&&!options.defaultValue)&&(!isFlippedBase&&calendar.disabled(dateObject)||isFlippedBase&&calendar.disabled(dateObject)&&(hasEnabledWeekdays||hasEnabledBeforeTarget||hasEnabledAfterTarget)||!isFlippedBase&&(dateObject.pick<=minLimitObject.pick||dateObject.pick>=maxLimitObject.pick)))for(isFlippedBase&&!hasEnabledWeekdays&&(!hasEnabledAfterTarget&&0<interval||!hasEnabledBeforeTarget&&interval<0)&&(interval*=-1);calendar.disabled(dateObject)&&(1<Math.abs(interval)&&(dateObject.month<originalDateObject.month||dateObject.month>originalDateObject.month)&&(dateObject=originalDateObject,interval=0<interval?1:-1),dateObject.pick<=minLimitObject.pick?(reachedMin=!0,interval=1,dateObject=calendar.create([minLimitObject.year,minLimitObject.month,minLimitObject.date+(dateObject.pick===minLimitObject.pick?0:-1)])):dateObject.pick>=maxLimitObject.pick&&(reachedMax=!0,interval=-1,dateObject=calendar.create([maxLimitObject.year,maxLimitObject.month,maxLimitObject.date+(dateObject.pick===maxLimitObject.pick?0:1)])),!reachedMin||!reachedMax);)dateObject=calendar.create([dateObject.year,dateObject.month,dateObject.date+interval]);return dateObject},DatePicker.prototype.disabled=function(dateToVerify){var calendar=this,isDisabledMatch=calendar.item.disable.filter(function(dateToDisable){return _.isInteger(dateToDisable)?dateToVerify.day===(calendar.settings.firstDay?dateToDisable:dateToDisable-1)%7:$.isArray(dateToDisable)||_.isDate(dateToDisable)?dateToVerify.pick===calendar.create(dateToDisable).pick:$.isPlainObject(dateToDisable)?calendar.withinRange(dateToDisable,dateToVerify):void 0});return isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(dateToDisable){return $.isArray(dateToDisable)&&"inverted"==dateToDisable[3]||$.isPlainObject(dateToDisable)&&dateToDisable.inverted}).length,-1===calendar.item.enable?!isDisabledMatch:isDisabledMatch||dateToVerify.pick<calendar.item.min.pick||dateToVerify.pick>calendar.item.max.pick},DatePicker.prototype.parse=function(type,value,options){var calendar=this,parsingObject={};return value&&"string"==typeof value?(options&&options.format||((options=options||{}).format=calendar.settings.format),calendar.formats.toArray(options.format).map(function(label){var formattingLabel=calendar.formats[label],formatLength=formattingLabel?_.trigger(formattingLabel,calendar,[value,parsingObject]):label.replace(/^!/,"").length;formattingLabel&&(parsingObject[label]=value.substr(0,formatLength)),value=value.substr(formatLength)}),[parsingObject.yyyy||parsingObject.yy,+(parsingObject.mm||parsingObject.m)-1,parsingObject.dd||parsingObject.d]):value},DatePicker.prototype.formats=function(){function getWordLengthFromCollection(string,collection,dateObject){var word=string.match(/[^\x00-\x7F]+|\w+/)[0];return dateObject.mm||dateObject.m||(dateObject.m=collection.indexOf(word)+1),word.length}function getFirstWordLength(string){return string.match(/\w+/)[0].length}return{d:function(string,dateObject){return string?_.digits(string):dateObject.date},dd:function(string,dateObject){return string?2:_.lead(dateObject.date)},ddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysShort[dateObject.day]},dddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysFull[dateObject.day]},m:function(string,dateObject){return string?_.digits(string):dateObject.month+1},mm:function(string,dateObject){return string?2:_.lead(dateObject.month+1)},mmm:function(string,dateObject){var collection=this.settings.monthsShort;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},mmmm:function(string,dateObject){var collection=this.settings.monthsFull;return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},yy:function(string,dateObject){return string?2:(""+dateObject.year).slice(2)},yyyy:function(string,dateObject){return string?4:dateObject.year},toArray:function(formatString){return formatString.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(formatString,itemObject){var calendar=this;return calendar.formats.toArray(formatString).map(function(label){return _.trigger(calendar.formats[label],calendar,[0,itemObject])||label.replace(/^!/,"")}).join("")}}}(),DatePicker.prototype.isDateExact=function(one,two){return _.isInteger(one)&&_.isInteger(two)||"boolean"==typeof one&&"boolean"==typeof two?one===two:(_.isDate(one)||$.isArray(one))&&(_.isDate(two)||$.isArray(two))?this.create(one).pick===this.create(two).pick:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&(this.isDateExact(one.from,two.from)&&this.isDateExact(one.to,two.to))},DatePicker.prototype.isDateOverlap=function(one,two){var firstDay=this.settings.firstDay?1:0;return _.isInteger(one)&&(_.isDate(two)||$.isArray(two))?(one=one%7+firstDay)===this.create(two).day+1:_.isInteger(two)&&(_.isDate(one)||$.isArray(one))?(two=two%7+firstDay)===this.create(one).day+1:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&this.overlapRanges(one,two)},DatePicker.prototype.flipEnable=function(val){var itemObject=this.item;itemObject.enable=val||(-1==itemObject.enable?1:-1)},DatePicker.prototype.deactivate=function(type,datesToDisable){var calendar=this,disabledItems=calendar.item.disable.slice(0);return"flip"==datesToDisable?calendar.flipEnable():!1===datesToDisable?(calendar.flipEnable(1),disabledItems=[]):!0===datesToDisable?(calendar.flipEnable(-1),disabledItems=[]):datesToDisable.map(function(unitToDisable){for(var matchFound,index=0;index<disabledItems.length;index+=1)if(calendar.isDateExact(unitToDisable,disabledItems[index])){matchFound=!0;break}matchFound||(_.isInteger(unitToDisable)||_.isDate(unitToDisable)||$.isArray(unitToDisable)||$.isPlainObject(unitToDisable)&&unitToDisable.from&&unitToDisable.to)&&disabledItems.push(unitToDisable)}),disabledItems},DatePicker.prototype.activate=function(type,datesToEnable){var calendar=this,disabledItems=calendar.item.disable,disabledItemsCount=disabledItems.length;return"flip"==datesToEnable?calendar.flipEnable():!0===datesToEnable?(calendar.flipEnable(1),disabledItems=[]):!1===datesToEnable?(calendar.flipEnable(-1),disabledItems=[]):datesToEnable.map(function(unitToEnable){var matchFound,disabledUnit,index,isExactRange;for(index=0;index<disabledItemsCount;index+=1){if(disabledUnit=disabledItems[index],calendar.isDateExact(disabledUnit,unitToEnable)){matchFound=disabledItems[index]=null,isExactRange=!0;break}if(calendar.isDateOverlap(disabledUnit,unitToEnable)){$.isPlainObject(unitToEnable)?(unitToEnable.inverted=!0,matchFound=unitToEnable):$.isArray(unitToEnable)?(matchFound=unitToEnable)[3]||matchFound.push("inverted"):_.isDate(unitToEnable)&&(matchFound=[unitToEnable.getFullYear(),unitToEnable.getMonth(),unitToEnable.getDate(),"inverted"]);break}}if(matchFound)for(index=0;index<disabledItemsCount;index+=1)if(calendar.isDateExact(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}if(isExactRange)for(index=0;index<disabledItemsCount;index+=1)if(calendar.isDateOverlap(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}matchFound&&disabledItems.push(matchFound)}),disabledItems.filter(function(val){return null!=val})},DatePicker.prototype.nodes=function(isOpen){var collection,fullCollection,calendar=this,settings=calendar.settings,calendarItem=calendar.item,nowObject=calendarItem.now,selectedObject=calendarItem.select,highlightedObject=calendarItem.highlight,viewsetObject=calendarItem.view,disabledCollection=calendarItem.disable,minLimitObject=calendarItem.min,maxLimitObject=calendarItem.max,tableHead=(collection=(settings.showWeekdaysFull?settings.weekdaysFull:settings.weekdaysShort).slice(0),fullCollection=settings.weekdaysFull.slice(0),settings.firstDay&&(collection.push(collection.shift()),fullCollection.push(fullCollection.shift())),_.node("thead",_.node("tr",_.group({min:0,max:6,i:1,node:"th",item:function(counter){return[collection[counter],settings.klass.weekdays,'scope=col title="'+fullCollection[counter]+'"']}})))),createMonthNav=function(next){return _.node("div"," ",settings.klass["nav"+(next?"Next":"Prev")]+(next&&viewsetObject.year>=maxLimitObject.year&&viewsetObject.month>=maxLimitObject.month||!next&&viewsetObject.year<=minLimitObject.year&&viewsetObject.month<=minLimitObject.month?" "+settings.klass.navDisabled:""),"data-nav="+(next||-1)+" "+_.ariaAttr({role:"button",controls:calendar.$node[0].id+"_table"})+' title="'+(next?settings.labelMonthNext:settings.labelMonthPrev)+'"')},createMonthLabel=function(){var monthsCollection=settings.showMonthsShort?settings.monthsShort:settings.monthsFull;return settings.selectMonths?_.node("select",_.group({min:0,max:11,i:1,node:"option",item:function(loopedMonth){return[monthsCollection[loopedMonth],0,"value="+loopedMonth+(viewsetObject.month==loopedMonth?" selected":"")+(viewsetObject.year==minLimitObject.year&&loopedMonth<minLimitObject.month||viewsetObject.year==maxLimitObject.year&&loopedMonth>maxLimitObject.month?" disabled":"")]}}),settings.klass.selectMonth,(isOpen?"":"disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id+"_table"})+' title="'+settings.labelMonthSelect+'"'):_.node("div",monthsCollection[viewsetObject.month],settings.klass.month)},createYearLabel=function(){var focusedYear=viewsetObject.year,numberYears=!0===settings.selectYears?5:~~(settings.selectYears/2);if(numberYears){var minYear=minLimitObject.year,maxYear=maxLimitObject.year,lowestYear=focusedYear-numberYears,highestYear=focusedYear+numberYears;if(lowestYear<minYear&&(highestYear+=minYear-lowestYear,lowestYear=minYear),maxYear<highestYear){var availableYears=lowestYear-minYear,neededYears=highestYear-maxYear;lowestYear-=neededYears<availableYears?neededYears:availableYears,highestYear=maxYear}return _.node("select",_.group({min:lowestYear,max:highestYear,i:1,node:"option",item:function(loopedYear){return[loopedYear,0,"value="+loopedYear+(focusedYear==loopedYear?" selected":"")]}}),settings.klass.selectYear,(isOpen?"":"disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id+"_table"})+' title="'+settings.labelYearSelect+'"')}return _.node("div",focusedYear,settings.klass.year)};return _.node("div",(settings.selectYears?createYearLabel()+createMonthLabel():createMonthLabel()+createYearLabel())+createMonthNav()+createMonthNav(1),settings.klass.header)+_.node("table",tableHead+_.node("tbody",_.group({min:0,max:5,i:1,node:"tr",item:function(rowCounter){var shiftDateBy=settings.firstDay&&0===calendar.create([viewsetObject.year,viewsetObject.month,1]).day?-7:0;return[_.group({min:7*rowCounter-viewsetObject.day+shiftDateBy+1,max:function(){return this.min+7-1},i:1,node:"td",item:function(targetDate){targetDate=calendar.create([viewsetObject.year,viewsetObject.month,targetDate+(settings.firstDay?1:0)]);var klasses,isSelected=selectedObject&&selectedObject.pick==targetDate.pick,isHighlighted=highlightedObject&&highlightedObject.pick==targetDate.pick,isDisabled=disabledCollection&&calendar.disabled(targetDate)||targetDate.pick<minLimitObject.pick||targetDate.pick>maxLimitObject.pick,formattedDate=_.trigger(calendar.formats.toString,calendar,[settings.format,targetDate]);return[_.node("div",targetDate.date,(klasses=[settings.klass.day],klasses.push(viewsetObject.month==targetDate.month?settings.klass.infocus:settings.klass.outfocus),nowObject.pick==targetDate.pick&&klasses.push(settings.klass.now),isSelected&&klasses.push(settings.klass.selected),isHighlighted&&klasses.push(settings.klass.highlighted),isDisabled&&klasses.push(settings.klass.disabled),klasses.join(" ")),"data-pick="+targetDate.pick+" "+_.ariaAttr({role:"gridcell",label:formattedDate,selected:!(!isSelected||calendar.$node.val()!==formattedDate)||null,activedescendant:!!isHighlighted||null,disabled:!!isDisabled||null})),"",_.ariaAttr({role:"presentation"})]}})]}})),settings.klass.table,'id="'+calendar.$node[0].id+'_table" '+_.ariaAttr({role:"grid",controls:calendar.$node[0].id,readonly:!0}))+_.node("div",_.node("button",settings.today,settings.klass.buttonToday,"type=button data-pick="+nowObject.pick+(isOpen&&!calendar.disabled(nowObject)?"":" disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id}))+_.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id}))+_.node("button",settings.close,settings.klass.buttonClose,"type=button data-close=true "+(isOpen?"":" disabled")+" "+_.ariaAttr({controls:calendar.$node[0].id})),settings.klass.footer)},DatePicker.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:(prefix=Picker.klasses().picker+"__")+"table",header:prefix+"header",navPrev:prefix+"nav--prev",navNext:prefix+"nav--next",navDisabled:prefix+"nav--disabled",month:prefix+"month",year:prefix+"year",selectMonth:prefix+"select--month",selectYear:prefix+"select--year",weekdays:prefix+"weekday",day:prefix+"day",disabled:prefix+"day--disabled",selected:prefix+"day--selected",highlighted:prefix+"day--highlighted",now:prefix+"day--today",infocus:prefix+"day--infocus",outfocus:prefix+"day--outfocus",footer:prefix+"footer",buttonClear:prefix+"button--clear",buttonToday:prefix+"button--today",buttonClose:prefix+"button--close"}},Picker.extend("pickadate",DatePicker)}),function(factory){"function"==typeof define&&define.amd?define("picker.time",["picker","jquery"],factory):"object"==typeof exports?module.exports=factory(require("./picker.js"),require("jquery")):factory(Picker,jQuery)}(function(Picker,$){var prefix,_=Picker._;function TimePicker(picker,settings){var collectionDisabled,clock=this,elementValue=picker.$node[0].value,elementDataValue=picker.$node.data("value"),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format;clock.settings=settings,clock.$node=picker.$node,clock.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},clock.item={},clock.item.clear=null,clock.item.interval=settings.interval||30,clock.item.disable=(settings.disable||[]).slice(0),clock.item.enable=-(!0===(collectionDisabled=clock.item.disable)[0]?collectionDisabled.shift():-1),clock.set("min",settings.min).set("max",settings.max).set("now"),valueString?clock.set("select",valueString,{format:formatString}):clock.set("select",null).set("highlight",clock.item.now),clock.key={40:1,38:-1,39:1,37:-1,go:function(timeChange){clock.set("highlight",clock.item.highlight.pick+timeChange*clock.item.interval,{interval:timeChange*clock.item.interval}),this.render()}},picker.on("render",function(){var $pickerHolder=picker.$root.children(),$viewset=$pickerHolder.find("."+settings.klass.viewset),vendors=function(prop){return["webkit","moz","ms","o",""].map(function(vendor){return(vendor?"-"+vendor+"-":"")+prop})},animations=function($el,state){vendors("transform").map(function(prop){$el.css(prop,state)}),vendors("transition").map(function(prop){$el.css(prop,state)})};$viewset.length&&(animations($pickerHolder,"none"),$pickerHolder[0].scrollTop=~~$viewset.position().top-2*$viewset[0].clientHeight,animations($pickerHolder,""))},1).on("open",function(){picker.$root.find("button").attr("disabled",!1)},1).on("close",function(){picker.$root.find("button").attr("disabled",!0)},1)}TimePicker.prototype.set=function(type,value,options){var clock=this,clockItem=clock.item;return null===value?("clear"==type&&(type="select"),clockItem[type]=value):(clockItem["enable"==type?"disable":"flip"==type?"enable":type]=clock.queue[type].split(" ").map(function(method){return value=clock[method](type,value,options)}).pop(),"select"==type?clock.set("highlight",clockItem.select,options):"highlight"==type?clock.set("view",clockItem.highlight,options):"interval"==type?clock.set("min",clockItem.min,options).set("max",clockItem.max,options):type.match(/^(flip|min|max|disable|enable)$/)&&(clockItem.select&&clock.disabled(clockItem.select)&&clock.set("select",value,options),clockItem.highlight&&clock.disabled(clockItem.highlight)&&clock.set("highlight",value,options),"min"==type&&clock.set("max",clockItem.max,options))),clock},TimePicker.prototype.get=function(type){return this.item[type]},TimePicker.prototype.create=function(type,value,options){return value=void 0===value?type:value,_.isDate(value)&&(value=[value.getHours(),value.getMinutes()]),$.isPlainObject(value)&&_.isInteger(value.pick)?value=value.pick:$.isArray(value)?value=60*+value[0]+ +value[1]:_.isInteger(value)||(value=this.now(type,value,options)),"max"==type&&value<this.item.min.pick&&(value+=1440),"min"!=type&&"max"!=type&&(value-this.item.min.pick)%this.item.interval!=0&&(value+=this.item.interval),{hour:~~(24+(value=this.normalize(type,value,options))/60)%24,mins:(60+value%60)%60,time:(1440+value)%1440,pick:value%1440}},TimePicker.prototype.createRange=function(from,to){var clock=this,createTime=function(time){return!0===time||$.isArray(time)||_.isDate(time)?clock.create(time):time};return _.isInteger(from)||(from=createTime(from)),_.isInteger(to)||(to=createTime(to)),_.isInteger(from)&&$.isPlainObject(to)?from=[to.hour,to.mins+from*clock.settings.interval]:_.isInteger(to)&&$.isPlainObject(from)&&(to=[from.hour,from.mins+to*clock.settings.interval]),{from:createTime(from),to:createTime(to)}},TimePicker.prototype.withinRange=function(range,timeUnit){return range=this.createRange(range.from,range.to),timeUnit.pick>=range.from.pick&&timeUnit.pick<=range.to.pick},TimePicker.prototype.overlapRanges=function(one,two){return one=this.createRange(one.from,one.to),two=this.createRange(two.from,two.to),this.withinRange(one,two.from)||this.withinRange(one,two.to)||this.withinRange(two,one.from)||this.withinRange(two,one.to)},TimePicker.prototype.now=function(type,value){var isBelowInterval,interval=this.item.interval,date=new Date,nowMinutes=60*date.getHours()+date.getMinutes();return nowMinutes-=nowMinutes%interval,isBelowInterval=value<0&&interval*value+nowMinutes<=-interval,nowMinutes+="min"==type&&isBelowInterval?0:interval,_.isInteger(value)&&(nowMinutes+=interval*(isBelowInterval&&"max"!=type?value+1:value)),nowMinutes},TimePicker.prototype.normalize=function(type,value){var interval=this.item.interval,minTime=this.item.min&&this.item.min.pick||0;return value-="min"==type?0:(value-minTime)%interval},TimePicker.prototype.measure=function(type,value,options){return value||(value="min"==type?[0,0]:[23,59]),"string"==typeof value?value=this.parse(type,value):!0===value||_.isInteger(value)?value=this.now(type,value,options):$.isPlainObject(value)&&_.isInteger(value.pick)&&(value=this.normalize(type,value.pick,options)),value},TimePicker.prototype.validate=function(type,timeObject,options){var interval=options&&options.interval?options.interval:this.item.interval;return this.disabled(timeObject)&&(timeObject=this.shift(timeObject,interval)),timeObject=this.scope(timeObject),this.disabled(timeObject)&&(timeObject=this.shift(timeObject,-1*interval)),timeObject},TimePicker.prototype.disabled=function(timeToVerify){var clock=this,isDisabledMatch=clock.item.disable.filter(function(timeToDisable){return _.isInteger(timeToDisable)?timeToVerify.hour==timeToDisable:$.isArray(timeToDisable)||_.isDate(timeToDisable)?timeToVerify.pick==clock.create(timeToDisable).pick:$.isPlainObject(timeToDisable)?clock.withinRange(timeToDisable,timeToVerify):void 0});return isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(timeToDisable){return $.isArray(timeToDisable)&&"inverted"==timeToDisable[2]||$.isPlainObject(timeToDisable)&&timeToDisable.inverted}).length,-1===clock.item.enable?!isDisabledMatch:isDisabledMatch||timeToVerify.pick<clock.item.min.pick||timeToVerify.pick>clock.item.max.pick},TimePicker.prototype.shift=function(timeObject,interval){var minLimit=this.item.min.pick,maxLimit=this.item.max.pick;for(interval=interval||this.item.interval;this.disabled(timeObject)&&!((timeObject=this.create(timeObject.pick+=interval)).pick<=minLimit||timeObject.pick>=maxLimit););return timeObject},TimePicker.prototype.scope=function(timeObject){var minLimit=this.item.min.pick,maxLimit=this.item.max.pick;return this.create(timeObject.pick>maxLimit?maxLimit:timeObject.pick<minLimit?minLimit:timeObject)},TimePicker.prototype.parse=function(type,value,options){var hour,minutes,isPM,item,parseValue,clock=this,parsingObject={};if(!value||"string"!=typeof value)return value;for(item in options&&options.format||((options=options||{}).format=clock.settings.format),clock.formats.toArray(options.format).map(function(label){var substring,formattingLabel=clock.formats[label],formatLength=formattingLabel?_.trigger(formattingLabel,clock,[value,parsingObject]):label.replace(/^!/,"").length;formattingLabel&&(substring=value.substr(0,formatLength),parsingObject[label]=substring.match(/^\d+$/)?+substring:substring),value=value.substr(formatLength)}),parsingObject)parseValue=parsingObject[item],_.isInteger(parseValue)?item.match(/^(h|hh)$/i)?(hour=parseValue,"h"!=item&&"hh"!=item||(hour%=12)):"i"==item&&(minutes=parseValue):item.match(/^a$/i)&&parseValue.match(/^p/i)&&("h"in parsingObject||"hh"in parsingObject)&&(isPM=!0);return 60*(isPM?hour+12:hour)+minutes},TimePicker.prototype.formats={h:function(string,timeObject){return string?_.digits(string):timeObject.hour%12||12},hh:function(string,timeObject){return string?2:_.lead(timeObject.hour%12||12)},H:function(string,timeObject){return string?_.digits(string):""+timeObject.hour%24},HH:function(string,timeObject){return string?_.digits(string):_.lead(timeObject.hour%24)},i:function(string,timeObject){return string?2:_.lead(timeObject.mins)},a:function(string,timeObject){return string?4:timeObject.time%1440<720?"a.m.":"p.m."},A:function(string,timeObject){return string?2:timeObject.time%1440<720?"AM":"PM"},toArray:function(formatString){return formatString.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(formatString,itemObject){var clock=this;return clock.formats.toArray(formatString).map(function(label){return _.trigger(clock.formats[label],clock,[0,itemObject])||label.replace(/^!/,"")}).join("")}},TimePicker.prototype.isTimeExact=function(one,two){return _.isInteger(one)&&_.isInteger(two)||"boolean"==typeof one&&"boolean"==typeof two?one===two:(_.isDate(one)||$.isArray(one))&&(_.isDate(two)||$.isArray(two))?this.create(one).pick===this.create(two).pick:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&(this.isTimeExact(one.from,two.from)&&this.isTimeExact(one.to,two.to))},TimePicker.prototype.isTimeOverlap=function(one,two){return _.isInteger(one)&&(_.isDate(two)||$.isArray(two))?one===this.create(two).hour:_.isInteger(two)&&(_.isDate(one)||$.isArray(one))?two===this.create(one).hour:!(!$.isPlainObject(one)||!$.isPlainObject(two))&&this.overlapRanges(one,two)},TimePicker.prototype.flipEnable=function(val){var itemObject=this.item;itemObject.enable=val||(-1==itemObject.enable?1:-1)},TimePicker.prototype.deactivate=function(type,timesToDisable){var clock=this,disabledItems=clock.item.disable.slice(0);return"flip"==timesToDisable?clock.flipEnable():!1===timesToDisable?(clock.flipEnable(1),disabledItems=[]):!0===timesToDisable?(clock.flipEnable(-1),disabledItems=[]):timesToDisable.map(function(unitToDisable){for(var matchFound,index=0;index<disabledItems.length;index+=1)if(clock.isTimeExact(unitToDisable,disabledItems[index])){matchFound=!0;break}matchFound||(_.isInteger(unitToDisable)||_.isDate(unitToDisable)||$.isArray(unitToDisable)||$.isPlainObject(unitToDisable)&&unitToDisable.from&&unitToDisable.to)&&disabledItems.push(unitToDisable)}),disabledItems},TimePicker.prototype.activate=function(type,timesToEnable){var clock=this,disabledItems=clock.item.disable,disabledItemsCount=disabledItems.length;return"flip"==timesToEnable?clock.flipEnable():!0===timesToEnable?(clock.flipEnable(1),disabledItems=[]):!1===timesToEnable?(clock.flipEnable(-1),disabledItems=[]):timesToEnable.map(function(unitToEnable){var matchFound,disabledUnit,index,isRangeMatched;for(index=0;index<disabledItemsCount;index+=1){if(disabledUnit=disabledItems[index],clock.isTimeExact(disabledUnit,unitToEnable)){matchFound=disabledItems[index]=null,isRangeMatched=!0;break}if(clock.isTimeOverlap(disabledUnit,unitToEnable)){$.isPlainObject(unitToEnable)?(unitToEnable.inverted=!0,matchFound=unitToEnable):$.isArray(unitToEnable)?(matchFound=unitToEnable)[2]||matchFound.push("inverted"):_.isDate(unitToEnable)&&(matchFound=[unitToEnable.getFullYear(),unitToEnable.getMonth(),unitToEnable.getDate(),"inverted"]);break}}if(matchFound)for(index=0;index<disabledItemsCount;index+=1)if(clock.isTimeExact(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}if(isRangeMatched)for(index=0;index<disabledItemsCount;index+=1)if(clock.isTimeOverlap(disabledItems[index],unitToEnable)){disabledItems[index]=null;break}matchFound&&disabledItems.push(matchFound)}),disabledItems.filter(function(val){return null!=val})},TimePicker.prototype.i=function(type,value){return _.isInteger(value)&&0<value?value:this.item.interval},TimePicker.prototype.nodes=function(isOpen){var clock=this,settings=clock.settings,selectedObject=clock.item.select,highlightedObject=clock.item.highlight,viewsetObject=clock.item.view,disabledCollection=clock.item.disable;return _.node("ul",_.group({min:clock.item.min.pick,max:clock.item.max.pick,i:clock.item.interval,node:"li",item:function(loopedTime){var klasses,timeMinutes=(loopedTime=clock.create(loopedTime)).pick,isSelected=selectedObject&&selectedObject.pick==timeMinutes,isHighlighted=highlightedObject&&highlightedObject.pick==timeMinutes,isDisabled=disabledCollection&&clock.disabled(loopedTime),formattedTime=_.trigger(clock.formats.toString,clock,[settings.format,loopedTime]);return[_.trigger(clock.formats.toString,clock,[_.trigger(settings.formatLabel,clock,[loopedTime])||settings.format,loopedTime]),(klasses=[settings.klass.listItem],isSelected&&klasses.push(settings.klass.selected),isHighlighted&&klasses.push(settings.klass.highlighted),viewsetObject&&viewsetObject.pick==timeMinutes&&klasses.push(settings.klass.viewset),isDisabled&&klasses.push(settings.klass.disabled),klasses.join(" ")),"data-pick="+loopedTime.pick+" "+_.ariaAttr({role:"option",label:formattedTime,selected:!(!isSelected||clock.$node.val()!==formattedTime)||null,activedescendant:!!isHighlighted||null,disabled:!!isDisabled||null})]}})+_.node("li",_.node("button",settings.clear,settings.klass.buttonClear,"type=button data-clear=1"+(isOpen?"":" disabled")+" "+_.ariaAttr({controls:clock.$node[0].id})),"",_.ariaAttr({role:"presentation"})),settings.klass.list,_.ariaAttr({role:"listbox",controls:clock.$node[0].id}))},TimePicker.defaults={clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:(prefix=Picker.klasses().picker)+" "+prefix+"--time",holder:prefix+"__holder",list:prefix+"__list",listItem:prefix+"__list-item",disabled:prefix+"__list-item--disabled",selected:prefix+"__list-item--selected",highlighted:prefix+"__list-item--highlighted",viewset:prefix+"__list-item--viewset",now:prefix+"__list-item--now",buttonClear:prefix+"__button--clear"}},Picker.extend("pickatime",TimePicker)}),define("mockup-patterns-pickadate",["jquery","pat-base","mockup-utils","translate","picker","picker.date","picker.time","mockup-patterns-select2"],function($,Base,utils,_t){"use strict";return Base.extend({name:"pickadate",trigger:".pat-pickadate",parser:"mockup",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0,formatSubmit:"yyyy-mm-dd",format:"yyyy-mm-dd",labelMonthNext:_t("Next month"),labelMonthPrev:_t("Previous month"),labelMonthSelect:_t("Select a month"),labelYearSelect:_t("Select a year"),clear:!1,close:!1,today:!1},time:{clear:!1},today:_t("Today"),clear:_t("Clear"),timezone:null,autoSetTimeOnDateChange:"+[0,0]",classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classTimezoneName:"pattern-pickadate-timezone",classTimezoneWrapperName:"pattern-pickadate-timezone-wrapper",classClearName:"pattern-pickadate-clear",classNowName:"pattern-pickadate-now",placeholderDate:_t("Enter date..."),placeholderTime:_t("Enter time..."),placeholderTimezone:_t("Enter timezone...")},parseTimeOffset:function(timeOffset){var op=void 0;0===timeOffset.indexOf("+")?(op="+",timeOffset=timeOffset.split("+")[1]):0===timeOffset.indexOf("-")&&(op="-",timeOffset=timeOffset.split("-")[1]);try{timeOffset=JSON.parse(timeOffset)}catch(e){timeOffset=void 0}if(!1===timeOffset)return!1;if(!0===timeOffset||!0!==Array.isArray(timeOffset))return[0,0];var hours=parseInt(timeOffset[0],10)||0,mins=parseInt(timeOffset[1],10)||0;if("+"===op||"-"===op){var offset=new Date,curHours=offset.getHours(),curMins=offset.getMinutes();"+"===op?(23<(hours=curHours+hours)&&(hours=23),59<(mins=curMins+mins)&&(mins=59)):"-"===op&&((hours=curHours-hours)<0&&(hours=0),(mins=curMins-mins)<0&&(mins=0))}return[hours,mins]},init:function(){var self=this,value=self.$el.val().split(" "),dateValue=value[0]||"",timeValue=value[1]||"";if(!1===utils.bool(self.options.date)&&(self.options.date=!1),!1===utils.bool(self.options.time)&&(self.options.time=!1),self.options.autoSetTimeOnDateChange=self.parseTimeOffset(self.options.autoSetTimeOnDateChange),!1===self.options.date&&(timeValue=value[0]),self.$el.hide(),self.$wrapper=$("<div/>").addClass(self.options.classWrapperName).insertAfter(self.$el),!1!==self.options.date&&(self.$date=$('<input type="text"/>').attr("placeholder",self.options.placeholderDate).attr("data-value",dateValue).addClass(self.options.classDateName).appendTo($("<div/>").addClass(self.options.classDateWrapperName).appendTo(self.$wrapper)).pickadate($.extend(!0,{},self.options.date,{onSet:function(e){void 0!==e.select&&(self.$date.attr("data-value",e.select),!1!==self.options.autoSetTimeOnDateChange&&self.$time&&(self.$time.pickatime("picker").get("select")||self.$time.pickatime("picker").set("select",self.options.autoSetTimeOnDateChange)),!1!==self.options.time&&""===self.$time.attr("data-value")||self.updateValue.call(self)),e.hasOwnProperty("clear")&&(self.$el.val(""),self.$date.attr("data-value",""))}}))),!1!==self.options.time&&(self.options.time.formatSubmit="HH:i",self.$time=$('<input type="text"/>').attr("placeholder",self.options.placeholderTime).attr("data-value",timeValue).addClass(self.options.classTimeName).appendTo($("<div/>").addClass(self.options.classTimeWrapperName).appendTo(self.$wrapper)).pickatime($.extend(!0,{},self.options.time,{onSet:function(e){void 0!==e.select&&(self.$time.attr("data-value",e.select),!1!==self.options.date&&""===self.$date.attr("data-value")||self.updateValue.call(self)),e.hasOwnProperty("clear")&&(self.$el.val(""),self.$time.attr("data-value",""))}})),"string"==typeof timeValue&&"00"===timeValue.substring(0,2)&&(self.$time.pickatime("picker").set("select",timeValue.split(":")),self.$time.attr("data-value",timeValue))),!1!==self.options.date&&!1!==self.options.time&&self.options.timezone&&(self.$separator=$("<span/>").addClass(self.options.classSeparatorName).html(" "===self.options.separator?"&nbsp;":self.options.separator).appendTo(self.$wrapper)),null!==self.options.timezone){self.$timezone=$('<input type="text"/>').addClass(self.options.classTimezoneName).appendTo($("<div/>").addClass(self.options.classTimezoneWrapperName).appendTo(self.$wrapper)).patternSelect2($.extend(!0,{placeholder:self.options.placeholderTimezone,width:"10em"},self.options.timezone,{multiple:!1})).on("change",function(e){void 0!==e.val&&(self.$timezone.attr("data-value",e.val),!1!==self.options.date&&""===self.$date.attr("data-value")||!1!==self.options.time&&""===self.$time.attr("data-value")||self.updateValue.call(self))});var isInList,defaultTimezone=self.options.timezone.default;if(defaultTimezone)self.options.timezone.data.some(function(obj){return isInList=obj.text===self.options.timezone.default}),isInList&&(self.$timezone.attr("data-value",defaultTimezone),self.$timezone.parent().find(".select2-chosen").text(defaultTimezone));1===self.options.timezone.data.length&&(self.$timezone.attr("data-value",self.options.timezone.data[0].text),self.$timezone.parent().find(".select2-chosen").text(self.options.timezone.data[0].text),self.$timezone.select2("enable",!1))}utils.bool(self.options.today)&&(self.$now=$('<button type="button" class="btn btn-xs btn-info" title="'+self.options.today+'"><span class="glyphicon glyphicon-time"></span></button>').addClass(self.options.classNowName).on("click",function(e){e.preventDefault();var now=new Date;self.$date&&self.$date.data("pickadate").set("select",now),self.$time&&self.$time.data("pickatime").set("select",now),self.emit("updated")}).appendTo(self.$wrapper)),utils.bool(self.options.clear)&&(self.$clear=$('<button type="button" class="btn btn-xs btn-danger" title="'+self.options.clear+'"><span class="glyphicon glyphicon-trash"></span></button>').addClass(self.options.classClearName).on("click",function(e){e.preventDefault(),self.$date&&self.$date.data("pickadate").clear(),self.$time&&self.$time.data("pickatime").clear(),self.emit("updated")}).appendTo(self.$wrapper))},updateValue:function(){var value="";if(!1!==this.options.date){var date=this.$date.data("pickadate").component,dateValue=this.$date.data("pickadate").get("select"),formatDate=date.formats.toString;dateValue&&(value+=formatDate.apply(date,[this.options.date.formatSubmit,dateValue]))}if(!1!==this.options.date&&!1!==this.options.time&&(value+=" "),!1!==this.options.time){var time=this.$time.data("pickatime").component,timeValue=this.$time.data("pickatime").get("select"),formatTime=time.formats.toString;timeValue&&(value+=formatTime.apply(time,["HH:i",timeValue]))}if(null!==this.options.timezone){var timezone=" "+this.$timezone.attr("data-value");timezone&&(value+=timezone)}this.$el.val(value),this.emit("updated")}})}),function(root,factory){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(_,$,exports){root.Backbone=factory(root,exports,_,$)});else if("undefined"!=typeof exports){var _=require("underscore");factory(root,exports,_)}else root.Backbone=factory(root,{},root._,root.jQuery||root.Zepto||root.ender||root.$)}(this,function(root,Backbone,_,$){var previousBackbone=root.Backbone,array=[],slice=array.slice;Backbone.VERSION="1.1.2",Backbone.$=$,Backbone.noConflict=function(){return root.Backbone=previousBackbone,this},Backbone.emulateHTTP=!1,Backbone.emulateJSON=!1;var Events=Backbone.Events={on:function(name,callback,context){return eventsApi(this,"on",name,[callback,context])&&callback&&(this._events||(this._events={}),(this._events[name]||(this._events[name]=[])).push({callback:callback,context:context,ctx:context||this})),this},once:function(name,callback,context){if(!eventsApi(this,"once",name,[callback,context])||!callback)return this;var self=this,once=_.once(function(){self.off(name,once),callback.apply(this,arguments)});return once._callback=callback,this.on(name,once,context)},off:function(name,callback,context){var retain,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;if(!name&&!callback&&!context)return this._events=void 0,this;for(i=0,l=(names=name?[name]:_.keys(this._events)).length;i<l;i++)if(name=names[i],events=this._events[name]){if(this._events[name]=retain=[],callback||context)for(j=0,k=events.length;j<k;j++)ev=events[j],(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)&&retain.push(ev);retain.length||delete this._events[name]}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,"trigger",name,args))return this;var events=this._events[name],allEvents=this._events.all;return events&&triggerEvents(events,args),allEvents&&triggerEvents(allEvents,arguments),this},stopListening:function(obj,name,callback){var listeningTo=this._listeningTo;if(!listeningTo)return this;var remove=!name&&!callback;for(var id in callback||"object"!=typeof name||(callback=this),obj&&((listeningTo={})[obj._listenId]=obj),listeningTo)(obj=listeningTo[id]).off(name,callback,this),(remove||_.isEmpty(obj._events))&&delete this._listeningTo[id];return this}},eventSplitter=/\s+/,eventsApi=function(obj,action,name,rest){if(!name)return!0;if("object"==typeof name){for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));return!1}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;i<l;i++)obj[action].apply(obj,[names[i]].concat(rest));return!1}return!0},triggerEvents=function(events,args){var ev,i=-1,l=events.length,a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx);return;case 1:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1);return;case 2:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2);return;case 3:for(;++i<l;)(ev=events[i]).callback.call(ev.ctx,a1,a2,a3);return;default:for(;++i<l;)(ev=events[i]).callback.apply(ev.ctx,args);return}};_.each({listenTo:"on",listenToOnce:"once"},function(implementation,method){Events[method]=function(obj,name,callback){var listeningTo=this._listeningTo||(this._listeningTo={});return callback||"object"!=typeof name||(callback=this),(listeningTo[obj._listenId||(obj._listenId=_.uniqueId("l"))]=obj)[implementation](name,callback,this),this}}),Events.bind=Events.on,Events.unbind=Events.off,_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var attrs=attributes||{};options||(options={}),this.cid=_.uniqueId("c"),this.attributes={},options.collection&&(this.collection=options.collection),options.parse&&(attrs=this.parse(attrs,options)||{}),attrs=_.defaults({},attrs,_.result(this,"defaults")),this.set(attrs,options),this.changed={},this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},has:function(attr){return null!=this.get(attr)},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(null==key)return this;if("object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options||(options={}),!this._validate(attrs,options))return!1;for(attr in unset=options.unset,silent=options.silent,changes=[],changing=this._changing,this._changing=!0,changing||(this._previousAttributes=_.clone(this.attributes),this.changed={}),current=this.attributes,prev=this._previousAttributes,this.idAttribute in attrs&&(this.id=attrs[this.idAttribute]),attrs)val=attrs[attr],_.isEqual(current[attr],val)||changes.push(attr),_.isEqual(prev[attr],val)?delete this.changed[attr]:this.changed[attr]=val,unset?delete current[attr]:current[attr]=val;if(!silent){changes.length&&(this._pending=options);for(var i=0,l=changes.length;i<l;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)for(;this._pending;)options=this._pending,this._pending=!1,this.trigger("change",this,options);return this._pending=!1,this._changing=!1,this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:!0}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:!0}))},hasChanged:function(attr){return null==attr?!_.isEmpty(this.changed):_.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return!!this.hasChanged()&&_.clone(this.changed);var val,changed=!1,old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff)_.isEqual(old[attr],val=diff[attr])||((changed||(changed={}))[attr]=val);return changed},previous:function(attr){return null!=attr&&this._previousAttributes?this._previousAttributes[attr]:null},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){void 0===(options=options?_.clone(options):{}).parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){if(!model.set(model.parse(resp,options),options))return!1;success&&success(model,resp,options),model.trigger("sync",model,resp,options)},wrapError(this,options),this.sync("read",this,options)},save:function(key,val,options){var attrs,method,xhr,attributes=this.attributes;if(null==key||"object"==typeof key?(attrs=key,options=val):(attrs={})[key]=val,options=_.extend({validate:!0},options),attrs&&!options.wait){if(!this.set(attrs,options))return!1}else if(!this._validate(attrs,options))return!1;attrs&&options.wait&&(this.attributes=_.extend({},attributes,attrs)),void 0===options.parse&&(options.parse=!0);var model=this,success=options.success;return options.success=function(resp){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait&&(serverAttrs=_.extend(attrs||{},serverAttrs)),_.isObject(serverAttrs)&&!model.set(serverAttrs,options))return!1;success&&success(model,resp,options),model.trigger("sync",model,resp,options)},wrapError(this,options),"patch"===(method=this.isNew()?"create":options.patch?"patch":"update")&&(options.attrs=attrs),xhr=this.sync(method,this,options),attrs&&options.wait&&(this.attributes=attributes),xhr},destroy:function(options){options=options?_.clone(options):{};var model=this,success=options.success,destroy=function(){model.trigger("destroy",model,model.collection,options)};if(options.success=function(resp){(options.wait||model.isNew())&&destroy(),success&&success(model,resp,options),model.isNew()||model.trigger("sync",model,resp,options)},this.isNew())return options.success(),!1;wrapError(this,options);var xhr=this.sync("delete",this,options);return options.wait||destroy(),xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();return this.isNew()?base:base.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(options){return this._validate({},_.extend(options||{},{validate:!0}))},_validate:function(attrs,options){if(!options.validate||!this.validate)return!0;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;return!error||(this.trigger("invalid",this,error,_.extend(options,{validationError:error})),!1)}});_.each(["keys","values","pairs","invert","pick","omit"],function(method){Model.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.attributes),_[method].apply(_,args)}});var Collection=Backbone.Collection=function(models,options){options||(options={}),options.model&&(this.model=options.model),void 0!==options.comparator&&(this.comparator=options.comparator),this._reset(),this.initialize.apply(this,arguments),models&&this.reset(models,_.extend({silent:!0},options))},setOptions={add:!0,remove:!0,merge:!0},addOptions={add:!0,remove:!1};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){return this.set(models,_.extend({merge:!1},options,addOptions))},remove:function(models,options){var i,l,index,model,singular=!_.isArray(models);for(options||(options={}),i=0,l=(models=singular?[models]:_.clone(models)).length;i<l;i++)(model=models[i]=this.get(models[i]))&&(delete this._byId[model.id],delete this._byId[model.cid],index=this.indexOf(model),this.models.splice(index,1),this.length--,options.silent||(options.index=index,model.trigger("remove",model,this,options)),this._removeReference(model,options));return singular?models[0]:models},set:function(models,options){(options=_.defaults({},options,setOptions)).parse&&(models=this.parse(models,options));var i,l,id,model,attrs,existing,sort,singular=!_.isArray(models);models=singular?models?[models]:[]:_.clone(models);var at=options.at,targetModel=this.model,sortable=this.comparator&&null==at&&!1!==options.sort,sortAttr=_.isString(this.comparator)?this.comparator:null,toAdd=[],toRemove=[],modelMap={},add=options.add,merge=options.merge,remove=options.remove,order=!(sortable||!add||!remove)&&[];for(i=0,l=models.length;i<l;i++){if(id=(attrs=models[i]||{})instanceof Model?model=attrs:attrs[targetModel.prototype.idAttribute||"id"],existing=this.get(id))remove&&(modelMap[existing.cid]=!0),merge&&(attrs=attrs===model?model.attributes:attrs,options.parse&&(attrs=existing.parse(attrs,options)),existing.set(attrs,options),sortable&&!sort&&existing.hasChanged(sortAttr)&&(sort=!0)),models[i]=existing;else if(add){if(!(model=models[i]=this._prepareModel(attrs,options)))continue;toAdd.push(model),this._addReference(model,options)}model=existing||model,!order||!model.isNew()&&modelMap[model.id]||order.push(model),modelMap[model.id]=!0}if(remove){for(i=0,l=this.length;i<l;++i)modelMap[(model=this.models[i]).cid]||toRemove.push(model);toRemove.length&&this.remove(toRemove,options)}if(toAdd.length||order&&order.length)if(sortable&&(sort=!0),this.length+=toAdd.length,null!=at)for(i=0,l=toAdd.length;i<l;i++)this.models.splice(at+i,0,toAdd[i]);else{order&&(this.models.length=0);var orderedModels=order||toAdd;for(i=0,l=orderedModels.length;i<l;i++)this.models.push(orderedModels[i])}if(sort&&this.sort({silent:!0}),!options.silent){for(i=0,l=toAdd.length;i<l;i++)(model=toAdd[i]).trigger("add",model,this,options);(sort||order&&order.length)&&this.trigger("sort",this,options)}return singular?models[0]:models},reset:function(models,options){options||(options={});for(var i=0,l=this.models.length;i<l;i++)this._removeReference(this.models[i],options);return options.previousModels=this.models,this._reset(),models=this.add(models,_.extend({silent:!0},options)),options.silent||this.trigger("reset",this,options),models},push:function(model,options){return this.add(model,_.extend({at:this.length},options))},pop:function(options){var model=this.at(this.length-1);return this.remove(model,options),model},unshift:function(model,options){return this.add(model,_.extend({at:0},options))},shift:function(options){var model=this.at(0);return this.remove(model,options),model},slice:function(){return slice.apply(this.models,arguments)},get:function(obj){if(null!=obj)return this._byId[obj]||this._byId[obj.id]||this._byId[obj.cid]},at:function(index){return this.models[index]},where:function(attrs,first){return _.isEmpty(attrs)?first?void 0:[]:this[first?"find":"filter"](function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return!1;return!0})},findWhere:function(attrs){return this.where(attrs,!0)},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return options||(options={}),_.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(_.bind(this.comparator,this)),options.silent||this.trigger("sort",this,options),this},pluck:function(attr){return _.invoke(this.models,"get",attr)},fetch:function(options){void 0===(options=options?_.clone(options):{}).parse&&(options.parse=!0);var success=options.success,collection=this;return options.success=function(resp){var method=options.reset?"reset":"set";collection[method](resp,options),success&&success(collection,resp,options),collection.trigger("sync",collection,resp,options)},wrapError(this,options),this.sync("read",this,options)},create:function(model,options){if(options=options?_.clone(options):{},!(model=this._prepareModel(model,options)))return!1;options.wait||this.add(model,options);var collection=this,success=options.success;return options.success=function(model,resp){options.wait&&collection.add(model,options),success&&success(model,resp,options)},model.save(null,options),model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model)return attrs;var model=new(((options=options?_.clone(options):{}).collection=this).model)(attrs,options);return model.validationError?(this.trigger("invalid",this,model.validationError,options),!1):model},_addReference:function(model,options){null!=(this._byId[model.cid]=model).id&&(this._byId[model.id]=model),model.collection||(model.collection=this),model.on("all",this._onModelEvent,this)},_removeReference:function(model,options){this===model.collection&&delete model.collection,model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,options){("add"!==event&&"remove"!==event||collection===this)&&("destroy"===event&&this.remove(model,options),model&&event==="change:"+model.idAttribute&&(delete this._byId[model.previous(model.idAttribute)],null!=model.id&&(this._byId[model.id]=model)),this.trigger.apply(this,arguments))}});_.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);return args.unshift(this.models),_[method].apply(_,args)}});_.each(["groupBy","countBy","sortBy","indexBy"],function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var View=Backbone.View=function(options){this.cid=_.uniqueId("view"),options||(options={}),_.extend(this,_.pick(options,viewOptions)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},delegateEventSplitter=/^(\S+)\s*(.*)$/,viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(element,delegate){return this.$el&&this.undelegateEvents(),this.$el=element instanceof Backbone.$?element:Backbone.$(element),this.el=this.$el[0],!1!==delegate&&this.delegateEvents(),this},delegateEvents:function(events){if(!events&&!(events=_.result(this,"events")))return this;for(var key in this.undelegateEvents(),events){var method=events[key];if(_.isFunction(method)||(method=this[events[key]]),method){var match=key.match(delegateEventSplitter),eventName=match[1],selector=match[2];method=_.bind(method,this),eventName+=".delegateEvents"+this.cid,""===selector?this.$el.on(eventName,method):this.$el.on(eventName,selector,method)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(_.result(this,"el"),!1);else{var attrs=_.extend({},_.result(this,"attributes"));this.id&&(attrs.id=_.result(this,"id")),this.className&&(attrs.class=_.result(this,"className"));var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,!1)}}}),Backbone.sync=function(method,model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(options.url||(params.url=_.result(model,"url")||urlError()),null!=options.data||!model||"create"!==method&&"update"!==method&&"patch"!==method||(params.contentType="application/json",params.data=JSON.stringify(options.attrs||model.toJSON(options))),options.emulateJSON&&(params.contentType="application/x-www-form-urlencoded",params.data=params.data?{model:params.data}:{}),options.emulateHTTP&&("PUT"===type||"DELETE"===type||"PATCH"===type)){params.type="POST",options.emulateJSON&&(params.data._method=type);var beforeSend=options.beforeSend;options.beforeSend=function(xhr){if(xhr.setRequestHeader("X-HTTP-Method-Override",type),beforeSend)return beforeSend.apply(this,arguments)}}"GET"===params.type||options.emulateJSON||(params.processData=!1),"PATCH"===params.type&&noXhrPatch&&(params.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var xhr=options.xhr=Backbone.ajax(_.extend(params,options));return model.trigger("request",model,xhr,options),xhr};var noXhrPatch=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),methodMap={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var Router=Backbone.Router=function(options){options||(options={}),options.routes&&(this.routes=options.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},optionalParam=/\((.*?)\)/g,namedParam=/(\(\?)?:\w+/g,splatParam=/\*\w+/g,escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){_.isRegExp(route)||(route=this._routeToRegExp(route)),_.isFunction(name)&&(callback=name,name=""),callback||(callback=this[name]);var router=this;return Backbone.history.route(route,function(fragment){var args=router._extractParameters(route,fragment);router.execute(callback,args),router.trigger.apply(router,["route:"+name].concat(args)),router.trigger("route",name,args),Backbone.history.trigger("route",router,name,args)}),this},execute:function(callback,args){callback&&callback.apply(this,args)},navigate:function(fragment,options){return Backbone.history.navigate(fragment,options),this},_bindRoutes:function(){if(this.routes){this.routes=_.result(this,"routes");for(var route,routes=_.keys(this.routes);null!=(route=routes.pop());)this.route(route,this.routes[route])}},_routeToRegExp:function(route){return route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/?]+)"}).replace(splatParam,"([^?]*?)"),new RegExp("^"+route+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(route,fragment){var params=route.exec(fragment).slice(1);return _.map(params,function(param,i){return i===params.length-1?param||null:param?decodeURIComponent(param):null})}});var History=Backbone.History=function(){this.handlers=[],_.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},routeStripper=/^[#\/]|\s+$/g,rootStripper=/^\/+|\/+$/g,isExplorer=/msie [\w.]+/,trailingSlash=/\/$/,pathStripper=/#.*$/;History.started=!1,_.extend(History.prototype,Events,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(window){var match=(window||this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(null==fragment)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=decodeURI(this.location.pathname+this.location.search);var root=this.root.replace(trailingSlash,"");fragment.indexOf(root)||(fragment=fragment.slice(root.length))}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");History.started=!0,this.options=_.extend({root:"/"},this.options,options),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment(),docMode=document.documentMode,oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);if(this.root=("/"+this.root+"/").replace(rootStripper,"/"),oldIE&&this._wantsHashChange){var frame=Backbone.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=frame.hide().appendTo("body")[0].contentWindow,this.navigate(fragment)}this._hasPushState?Backbone.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!oldIE?Backbone.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=fragment;var loc=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&loc.hash&&(this.fragment=this.getHash().replace(routeStripper,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),History.started=!1},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe&&(current=this.getFragment(this.getHash(this.iframe))),current===this.fragment)return!1;this.iframe&&this.navigate(current),this.loadUrl()},loadUrl:function(fragment){return fragment=this.fragment=this.getFragment(fragment),_.any(this.handlers,function(handler){if(handler.route.test(fragment))return handler.callback(fragment),!0})},navigate:function(fragment,options){if(!History.started)return!1;options&&!0!==options||(options={trigger:!!options});var url=this.root+(fragment=this.getFragment(fragment||""));if(fragment=fragment.replace(pathStripper,""),this.fragment!==fragment){if(""===(this.fragment=fragment)&&"/"!==url&&(url=url.slice(0,-1)),this._hasPushState)this.history[options.replace?"replaceState":"pushState"]({},document.title,url);else{if(!this._wantsHashChange)return this.location.assign(url);this._updateHash(this.location,fragment,options.replace),this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))&&(options.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,fragment,options.replace))}return options.trigger?this.loadUrl(fragment):void 0}},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}}),Backbone.history=new History;Model.extend=Collection.extend=Router.extend=View.extend=History.extend=function(protoProps,staticProps){var child,parent=this;child=protoProps&&_.has(protoProps,"constructor")?protoProps.constructor:function(){return parent.apply(this,arguments)},_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};return Surrogate.prototype=parent.prototype,child.prototype=new Surrogate,protoProps&&_.extend(child.prototype,protoProps),child.__super__=parent.prototype,child};var urlError=function(){throw new Error('A "url" property or function must be specified')},wrapError=function(model,options){var error=options.error;options.error=function(resp){error&&error(model,resp,options),model.trigger("error",model,resp,options)}};return Backbone}),define("mockup-ui-url/views/base",["jquery","underscore","backbone","translate"],function($,_,Backbone,_t){"use strict";return Backbone.View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(options){for(var key in this.options=options,this.options)this[key]=this.options[key];this.options._t=_t},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){if(null!==this.template){var data=$.extend({_t:_t},this.options,this.serializedModel()),template=this.template;"string"==typeof template&&(template=_.template(template)),this.$el.html(template(data))}},propagateEvent:function(eventName){if(0<eventName.indexOf(":")){var eventId=eventName.split(":")[0];if(""!==this.eventPrefix&&(eventId===this.eventPrefix||eventId===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(name){var args=[].slice.call(arguments,0);""!==this.eventPrefix&&(args[0]=this.eventPrefix+":"+name,Backbone.View.prototype.trigger.apply(this,args),this.id&&(args[0]=this.eventPrefix+"."+this.id+":"+name,Backbone.View.prototype.trigger.apply(this,args)))}})}),define("mockup-patterns-tooltip",["jquery","pat-base"],function($,Base,undefined){"use strict";var bootstrapTooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};return bootstrapTooltip.VERSION="3.2.0",bootstrapTooltip.DEFAULTS={animation:!0,placement:"auto",selector:!1,template:'<div class="tooltip mockup-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!0,container:!1,viewport:{selector:"body",padding:0}},bootstrapTooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},bootstrapTooltip.prototype.getDefaults=function(){return bootstrapTooltip.DEFAULTS},bootstrapTooltip.prototype.getOptions=function(options){return(options=$.extend({},this.getDefaults(),this.$element.data(),options)).delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},bootstrapTooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},bootstrapTooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="in",!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)},bootstrapTooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),clearTimeout(self.timeout),self.hoverState="out",!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)},bootstrapTooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,$parent=this.$element.parent(),parentDim=this.getPosition($parent);placement="bottom"==placement&&pos.top+pos.height+actualHeight-parentDim.scroll>parentDim.height?"top":"top"==placement&&pos.top-parentDim.scroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentDim.width?"left":"left"==placement&&pos.left-actualWidth<parentDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){that.$element.trigger("shown.bs."+that.type),that.hoverState=null};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(150):complete()}},bootstrapTooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var arrowDelta=delta.left?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowPosition=delta.left?"left":"top",arrowOffsetPosition=delta.left?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],arrowPosition)},bootstrapTooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},bootstrapTooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},bootstrapTooltip.prototype.hide=function(){var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.trigger("hidden.bs."+that.type)}if(this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),!e.isDefaultPrevented())return $tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(150):complete(),this.hoverState=null,this},bootstrapTooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},bootstrapTooltip.prototype.hasContent=function(){return this.getTitle()},bootstrapTooltip.prototype.getPosition=function($element){var el=($element=$element||this.$element)[0],isBody="BODY"==el.tagName;return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():null,{scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop(),width:isBody?$(window).width():$element.outerWidth(),height:isBody?$(window).height():$element.outerHeight()},isBody?{top:0,left:0}:$element.offset())},bootstrapTooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},bootstrapTooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.width&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},bootstrapTooltip.prototype.getTitle=function(){var $e=this.$element,o=this.options;return $e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},bootstrapTooltip.prototype.getUID=function(prefix){for(;prefix+=~~(1e6*Math.random()),document.getElementById(prefix););return prefix},bootstrapTooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},bootstrapTooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},bootstrapTooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},bootstrapTooltip.prototype.enable=function(){this.enabled=!0},bootstrapTooltip.prototype.disable=function(){this.enabled=!1},bootstrapTooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},bootstrapTooltip.prototype.toggle=function(e){var self=this;e&&((self=$(e.currentTarget).data("bs."+this.type))||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),self.tip().hasClass("in")?self.leave(self):self.enter(self)},bootstrapTooltip.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)},Base.extend({name:"tooltip",trigger:".pat-tooltip",parser:"mockup",defaults:{html:!1,placement:"top"},init:function(){"true"===this.options.html?this.options.html=!0:this.options.html=!1,this.data=new bootstrapTooltip(this.$el[0],this.options)}})}),define("mockup-ui-url/views/button",["underscore","mockup-ui-url/views/base","mockup-patterns-tooltip"],function(_,BaseView,Tooltip){"use strict";return BaseView.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"default",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:'<% if (icon) { %><span class="glyphicon glyphicon-<%= icon %>"></span><% } %> <%= title %>',events:{click:"handleClick"},initialize:function(options){if(!options.id){var title=options.title||"";options.id=""!==title?title.toLowerCase().replace(" ","-"):this.cid}BaseView.prototype.initialize.apply(this,[options]),this.on("render",function(){if(this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),_.each(this.extraClasses,function(klass){this.$el.addClass(klass)}),null!==this.tooltip){this.$el.attr("title",this.tooltip);new Tooltip(this.$el);this.$el.on("hidden",function(e){"hidden"===e.type&&e.stopPropagation()})}},this)},handleClick:function(e){e.preventDefault(),this.$el.prop("disabled")||this.uiEventTrigger("click",this,e)},serializedModel:function(){return _.extend({icon:"",title:""},this.options)},disable:function(){this.$el.prop("disabled",!0)},enable:function(){this.$el.prop("disabled",!1)}})}),define("text",["module"],function(module){"use strict";var text,fs,Cc,Ci,xpcIsWindows,progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation="undefined"!=typeof location&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||void 0),buildMap={},masterConfig=module.config&&module.config()||{};function useDefault(value,defaultValue){return void 0===value||""===value?defaultValue:value}return text={version:"2.0.15",strip:function(content){if(content){var matches=(content=content.replace(xmlRegExp,"")).match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var xhr,i,progId;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(i=0;i<3;i+=1){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var modName,ext,temp,strip=!1,index=name.lastIndexOf("."),isRelative=0===name.indexOf("./")||0===name.indexOf("../");return-1!==index&&(!isRelative||1<index)?(modName=name.substring(0,index),ext=name.substring(index+1)):modName=name,-1!==(index=(temp=ext||modName).indexOf("!"))&&(strip="strip"===temp.substring(index+1),temp=temp.substring(0,index),ext?ext=temp:modName=temp),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var uProtocol,uHostName,uPort,match=text.xdRegExp.exec(url);return!match||(uProtocol=match[2],uPort=(uHostName=(uHostName=match[3]).split(":"))[1],uHostName=uHostName[0],(!uProtocol||uProtocol===protocol)&&(!uHostName||uHostName.toLowerCase()===hostname.toLowerCase())&&(!uPort&&!uHostName||function(protocol1,port1,protocol2,port2){if(port1===port2)return!0;if(protocol1===protocol2){if("http"===protocol1)return useDefault(port1,"80")===useDefault(port2,"80");if("https"===protocol1)return useDefault(port1,"443")===useDefault(port2,"443")}return!1}(uProtocol,uPort,protocol,port)))},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config&&config.isBuild&&!config.inlineText)onLoad();else{masterConfig.isBuild=config&&config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+(parsed.ext?"."+parsed.ext:""),url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;0!==url.indexOf("empty:")?!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)}):onLoad()}},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),extPart=parsed.ext?"."+parsed.ext:"",nonStripName=parsed.moduleName+extPart,fileName=req.toUrl(parsed.moduleName+extPart)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},"node"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(fs=require.nodeRequire("fs"),text.get=function(url,callback,errback){try{var file=fs.readFileSync(url,"utf8");"\ufeff"===file[0]&&(file=file.substring(1)),callback(file)}catch(e){errback&&errback(e)}}):"xhr"===masterConfig.env||!masterConfig.env&&text.createXhr()?text.get=function(url,callback,errback,headers){var header,xhr=text.createXhr();if(xhr.open("GET",url,!0),headers)for(header in headers)headers.hasOwnProperty(header)&&xhr.setRequestHeader(header.toLowerCase(),headers[header]);masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;4===xhr.readyState&&(399<(status=xhr.status||0)&&status<600?((err=new Error(url+" HTTP status: "+status)).xhr=xhr,errback&&errback(err)):callback(xhr.responseText),masterConfig.onXhrComplete&&masterConfig.onXhrComplete(xhr,url))},xhr.send(null)}:"rhino"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?text.get=function(url,callback){var stringBuffer,line,file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),"utf-8")),content="";try{for(stringBuffer=new java.lang.StringBuffer,(line=input.readLine())&&line.length()&&65279===line.charAt(0)&&(line=line.substring(1)),null!==line&&stringBuffer.append(line);null!==(line=input.readLine());)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)}:("xpconnect"===masterConfig.env||!masterConfig.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(Cc=Components.classes,Ci=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),xpcIsWindows="@mozilla.org/windows-registry-key;1"in Cc,text.get=function(url,callback){var inStream,convertStream,fileObj,readData={};xpcIsWindows&&(url=url.replace(/\//g,"\\")),fileObj=new FileUtils.File(url);try{(inStream=Cc["@mozilla.org/network/file-input-stream;1"].createInstance(Ci.nsIFileInputStream)).init(fileObj,1,0,!1),(convertStream=Cc["@mozilla.org/intl/converter-input-stream;1"].createInstance(Ci.nsIConverterInputStream)).init(inStream,"utf-8",inStream.available(),Ci.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),convertStream.readString(inStream.available(),readData),convertStream.close(),inStream.close(),callback(readData.value)}catch(e){throw new Error((fileObj&&fileObj.path||"")+": "+e)}}),text}),define("text!mockup-patterns-relateditems-url/templates/breadcrumb.xml",[],function(){return'<span class="separator">/<span>\n<a href="<%- path %>" class="crumb"><%- text %></a>\n'}),define("text!mockup-patterns-relateditems-url/templates/favorite.xml",[],function(){return'<li><a href="<%- path %>" class="fav" aria-labelledby="blip"><%- title %></a></li>\n'}),define("text!mockup-patterns-relateditems-url/templates/recentlyused.xml",[],function(){return'<div class="pattern-relateditems-recentlyused">\n  <a class="pattern-relateditems-recentlyused-select" data-uid="<%- UID %>">\n    <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon "><br><% } %>\n    <span class="pattern-relateditems-recentlyused-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n    <span class="pattern-relateditems-recentlyused-path"><%- path %></span>\n  </a>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/result.xml",[],function(){return'<div class="pattern-relateditems-result<% if (oneLevelUp) { %> one-level-up<% } %>">\n  <span class="pattern-relateditems-buttons">\n  <% if (is_folderish) { %>\n    <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="<%- open_folder %>"></a>\n  <% } %>\n  </span>\n  <a class="pattern-relateditems-result-select<% if (selectable) { %> selectable<% } else if (browsing && is_folderish) { %> pattern-relateditems-result-browse<% } %><% if (oneLevelUp) { %> one-level-up<% } %>" data-path="<%- path %>">\n    <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon "><br><% } %>\n    <span class="pattern-relateditems-result-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n    <span class="pattern-relateditems-result-path"><%- path %></span>\n  </a>\n</div>\n'}),define("text!mockup-patterns-relateditems-url/templates/selection.xml",[],function(){return'<span class="pattern-relateditems-item">\n  <% if (getURL && (getIcon || portal_type === "Image")) { %><img src="<%- getURL %>/@@images/image/icon"><br><% } %>\n  <span class="pattern-relateditems-item-title<%- portal_type ? \' contenttype-\' + portal_type.toLowerCase() : \'\' %><%- review_state ? \' state-\' + review_state : \'\' %>" title="<%- portal_type %>"><%- Title %></span>\n  <span class="pattern-relateditems-item-path"><%- path %></span>\n</span>\n'}),define("text!mockup-patterns-relateditems-url/templates/toolbar.xml",[],function(){return'<% if (mode!==\'auto\') { %>\n<div class="btn-group mode-selector" role="group">\n  <button type="button" class="mode search btn <% if (mode==\'search\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- searchModeText %></button>\n  <button type="button" class="mode browse btn <% if (mode==\'browse\') { %>btn-primary<% } else {%>btn-default<% } %>"><%- browseModeText %></button>\n</div>\n<% } %>\n<div class="path-wrapper">\n  <span class="pattern-relateditems-path-label"><%- searchText %></span>\n  <a class="crumb" href="/"><span class="glyphicon glyphicon-home"/></a>\n  <%= items %>\n</div>\n<div class="controls pull-right">\n\n  <% if (recentlyUsedItems) { %>\n  <div class="recentlyUsed dropdown pull-right">\n    <button type="button" class="recentlyUsed dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-time"/>\n      <%- recentlyUsedText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= recentlyUsedItems %>\n    </ul>\n  </div>\n  <% } %>\n\n  <% if (favorites.length > 0) { %>\n  <div class="favorites dropdown pull-right">\n    <button type="button" class="favorites dropdown-toggle btn btn-primary" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n      <span class="glyphicon glyphicon-star"/>\n      <%- favText %>\n      <span class="caret"/>\n    </button>\n    <ul class="dropdown-menu">\n      <%= favItems %>\n    </ul>\n  </div>\n  <% } %>\n</div>\n'}),function(root){define("bootstrap-dropdown",["jquery"],function(){return function(){return function($){"use strict";var toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};function getParent($this){var selector=$this.attr("data-target");selector||(selector=(selector=$this.attr("href"))&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){e&&3===e.which||($(".dropdown-backdrop").remove(),$(toggle).each(function(){var $this=$(this),$parent=getParent($this),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target)||($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||($this.attr("aria-expanded","false"),$parent.removeClass("open").trigger($.Event("hidden.bs.dropdown",relatedTarget)))))}))}Dropdown.VERSION="3.3.6",Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open").trigger($.Event("shown.bs.dropdown",relatedTarget))}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive&&27!=e.which||isActive&&27==e.which)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var $items=$parent.find(".dropdown-menu li:not(.disabled):visible a");if($items.length){var index=$items.index(e.target);38==e.which&&0<index&&index--,40==e.which&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})},$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery),window.jQuery.fn.dropdown.Constructor}.apply(root,arguments)})}(this),define("mockup-patterns-relateditems",["jquery","underscore","pat-base","mockup-patterns-select2","mockup-ui-url/views/button","mockup-utils","pat-registry","translate","text!mockup-patterns-relateditems-url/templates/breadcrumb.xml","text!mockup-patterns-relateditems-url/templates/favorite.xml","text!mockup-patterns-relateditems-url/templates/recentlyused.xml","text!mockup-patterns-relateditems-url/templates/result.xml","text!mockup-patterns-relateditems-url/templates/selection.xml","text!mockup-patterns-relateditems-url/templates/toolbar.xml","bootstrap-dropdown"],function($,_,Base,Select2,ButtonView,utils,registry,_t,BreadcrumbTemplate,FavoriteTemplate,RecentlyUsedTemplate,ResultTemplate,SelectionTemplate,ToolbarTemplate){"use strict";return Base.extend({name:"relateditems",trigger:".pat-relateditems",parser:"mockup",currentPath:void 0,selectedUIDs:[],openAfterInit:void 0,defaults:{vocabularyUrl:null,attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],basePath:"",pageSize:10,browsing:void 0,closeOnSelect:!0,contextPath:void 0,dropdownCssClass:"pattern-relateditems-dropdown",favorites:[],recentlyUsed:!1,recentlyUsedMaxItems:20,recentlyUsedKey:"relateditems_recentlyused",maximumSelectionSize:-1,minimumInputLength:0,mode:"auto",orderable:!0,pathOperator:"plone.app.querystring.operation.string.path",rootPath:"/",rootUrl:"",scanSelection:!1,selectableTypes:null,separator:",",sortOn:null,sortOrder:"ascending",tokenSeparators:[","," "],upload:!1,uploadAllowView:void 0,width:"100%",breadcrumbTemplate:BreadcrumbTemplate,breadcrumbTemplateSelector:null,favoriteTemplate:FavoriteTemplate,favoriteTemplateSelector:null,recentlyusedTemplate:RecentlyUsedTemplate,recentlyusedTemplateSelector:null,resultTemplate:ResultTemplate,resultTemplateSelector:null,selectionTemplate:SelectionTemplate,selectionTemplateSelector:null,toolbarTemplate:ToolbarTemplate,toolbarTemplateSelector:null,multiple:!0},recentlyUsed:function(filterSelectable){var ret=utils.storage.get(this.options.recentlyUsedKey)||[];ret=ret.slice(ret.length-1e3,ret.length),filterSelectable&&ret.filter(this.isSelectable.bind(this));var max=parseInt(this.options.recentlyUsedMaxItems,10);return max&&(ret=ret.slice(ret.length-max,ret.length)),ret},applyTemplate:function(tpl,item){var template;this.options[tpl+"TemplateSelector"]&&(template=$(this.options[tpl+"TemplateSelector"]).html())||(template=this.options[tpl+"Template"]);var options=$.extend(!0,{},this.options,item,{browsing:this.browsing,open_folder:_t("Open folder")});return options._item=item,_.template(template)(options)},setAjax:function(){var ajax={url:this.options.vocabularyUrl,dataType:"JSON",quietMillis:500,data:function(term,page){var criterias=[];term&&(term="*"+term+"*",criterias.push({i:"SearchableText",o:"plone.app.querystring.operation.string.contains",v:term})),!this.browsing&&this.options.selectableTypes&&criterias.push({i:"portal_type",o:"plone.app.querystring.operation.selection.any",v:this.options.selectableTypes}),criterias.push({i:"path",o:this.options.pathOperator,v:this.options.rootPath+this.currentPath+(this.browsing?"::1":"")});var sort_on=this.options.sortOn,sort_order=sort_on?this.options.sortOrder:null;return this.browsing&&null===sort_on&&(sort_on="getObjPositionInParent",sort_order="ascending"),{query:JSON.stringify({criteria:criterias,sort_on:sort_on,sort_order:sort_order}),attributes:JSON.stringify(this.options.attributes),batch:JSON.stringify({page:page||1,size:this.options.pageSize})}}.bind(this),results:function(data,page){var more=page*this.options.pageSize<data.total,results=data.results;this.selectedUIDs=(this.$el.select2("data")||[]).map(function(el){return el.UID}),results=results.filter(function(item){return!!(this.browsing&&item.is_folderish||this.isSelectable(item)&&-1==this.selectedUIDs.indexOf(item.UID))}.bind(this));var path=this.currentPath.split("/");return 1===page&&this.browsing&&1<path.length&&"/"!==this.currentPath&&(results=[{oneLevelUp:!0,Title:_t("One level up"),path:path.slice(0,path.length-1).join("/")||"/",is_folderish:!0,selectable:!1}].concat(results)),{results:results,more:more}}.bind(this)};this.options.ajax=ajax},renderToolbar:function(){var html,self=this,paths=self.currentPath.split("/"),itemPath="",itemsHtml="";_.each(paths,function(node){if(""!==node){var item={};item.path=itemPath=itemPath+"/"+node,item.text=node,itemsHtml+=self.applyTemplate("breadcrumb",item)}});var favoritesHtml="";_.each(self.options.favorites,function(item){var item_copy=_.clone(item);item_copy.path=item_copy.path.substr(self.options.rootPath.length)||"/",favoritesHtml+=self.applyTemplate("favorite",item_copy)});var recentlyUsedHtml="";if(self.options.recentlyUsed){var recentlyUsed=self.recentlyUsed(!0);_.each(recentlyUsed.reverse(),function(item){recentlyUsedHtml+=self.applyTemplate("recentlyused",item)})}function initUploadView(UploadView,disabled){var uploadButtonId="upload-"+utils.generateId(),uploadButton=new ButtonView({id:uploadButtonId,title:_t("Upload"),tooltip:_t("Upload files"),icon:"upload"});disabled&&uploadButton.disable(),$(".controls",self.$toolbar).prepend(uploadButton.render().el),self.uploadView=new UploadView({triggerView:uploadButton,app:self}),$("#btn-"+uploadButtonId,self.$toolbar).append(self.uploadView.render().el)}html=self.applyTemplate("toolbar",{items:itemsHtml,favItems:favoritesHtml,favText:_t("Favorites"),searchText:_t("Current path:"),searchModeText:_t("Search"),browseModeText:_t("Browse"),recentlyUsedItems:recentlyUsedHtml,recentlyUsedText:_t("Recently Used")}),self.$toolbar.html(html),$(".dropdown-toggle",self.$toolbar).dropdown(),$("button.mode.search",self.$toolbar).on("click",function(e){e.preventDefault(),self.browsing?($("button.mode.search",self.$toolbar).toggleClass("btn-primary btn-default"),$("button.mode.browse",self.$toolbar).toggleClass("btn-primary btn-default"),self.browsing=!1,0<self.$el.select2("data").length&&(self.openAfterInit=!0),self.openAfterInit||(self.$el.select2("close"),self.$el.select2("open"))):(self.$el.select2("close"),self.$el.select2("open"))}),$("button.mode.browse",self.$toolbar).on("click",function(e){e.preventDefault(),self.browsing?(self.$el.select2("close"),self.$el.select2("open")):($("button.mode.search",self.$toolbar).toggleClass("btn-primary btn-default"),$("button.mode.browse",self.$toolbar).toggleClass("btn-primary btn-default"),self.browsing=!0,0<self.$el.select2("data").length&&(self.openAfterInit=!0),self.openAfterInit||(self.$el.select2("close"),self.$el.select2("open")))}),$("a.crumb",self.$toolbar).on("click",function(e){e.preventDefault(),self.browseTo($(this).attr("href"))}),$("a.fav",self.$toolbar).on("click",function(e){e.preventDefault(),self.browseTo($(this).attr("href"))}),self.options.recentlyUsed&&$(".pattern-relateditems-recentlyused-select",self.$toolbar).on("click",function(event){event.preventDefault();var uid=$(this).data("uid"),item=self.recentlyUsed().filter(function(it){return it.UID===uid});if(0<item.length&&(item=item[0],self.selectItem(item),0<self.options.maximumSelectionSize&&self.$el.select2("data").length>=self.options.maximumSelectionSize))return}),self.options.upload&&utils.featureSupport.dragAndDrop()&&utils.featureSupport.fileApi()&&require(["mockup-patterns-relateditems-upload"],function(UploadView){self.options.uploadAllowView?$.ajax({url:self.options.uploadAllowView,dataType:"JSON",data:{path:self.options.rootPath+self.currentPath},type:"GET",success:function(result){initUploadView(UploadView,!result.allowUpload)}}):initUploadView(UploadView)})},browseTo:function(path){this.emit("before-browse"),this.currentPath=path,this.$el.select2("close"),this.renderToolbar(),this.$el.select2("open"),this.emit("after-browse")},selectItem:function(item){this.emit("selecting");var data=this.$el.select2("data");if(data.push(item),this.$el.select2("data",data,!0),this.options.recentlyUsed){var recentlyUsed=this.recentlyUsed(),alreadyPresent=recentlyUsed.filter(function(it){return it.UID===item.UID});0<alreadyPresent.length&&recentlyUsed.splice(recentlyUsed.indexOf(alreadyPresent[0]),1),recentlyUsed.push(item),utils.storage.set(this.options.recentlyUsedKey,recentlyUsed)}this.emit("selected")},deselectItem:function(item){this.emit("deselecting");var data=this.$el.select2("data");_.each(data,function(obj,i){obj.UID===item.UID&&data.splice(i,1)}),this.$el.select2("data",data,!0),this.emit("deselected")},isSelectable:function(item){return!1!==item.selectable&&(null===this.options.selectableTypes||-1<_.indexOf(this.options.selectableTypes,item.portal_type))},init:function(){var self=this;self.browsing="search"!==self.options.mode,self.options.rootPath=self.options.rootPath.replace(/\/$/,""),self.currentPath=self.options.basePath.substr(self.options.rootPath.length)||"/",self.setAjax(),self.$el.wrap('<div class="pattern-relateditems-container" />'),self.$container=self.$el.parents(".pattern-relateditems-container"),self.$container.width(self.options.width),Select2.prototype.initializeValues.call(self),Select2.prototype.initializeTags.call(self),self.options.formatSelection=function(item){item=$.extend(!0,{Title:"",getIcon:"",getURL:"",path:"",portal_type:"",review_state:""},item);var $selection=$(self.applyTemplate("selection",item));if(self.options.scanSelection&&registry.scan($selection),1==self.options.maximumSelectionSize){var itemPath=item.path,path_split=itemPath.split("/");itemPath=(path_split=path_split.slice(0,-1)).join("/"),self.currentPath=itemPath,self.renderToolbar()}return $selection},Select2.prototype.initializeOrdering.call(self),self.options.formatResult=function(item){item.selectable=self.isSelectable(item),item=$.extend(!0,{Title:"",getIcon:"",getURL:"",is_folderish:!1,oneLevelUp:!1,path:"",portal_type:"",review_state:"",selectable:!1},item),-1!=self.selectedUIDs.indexOf(item.UID)&&(item.selectable=!1);var result=$(self.applyTemplate("result",item));return $(".pattern-relateditems-result-select",result).on("click",function(event){if(event.preventDefault(),$(this).is(".selectable")){var $parent=$(this).parents(".pattern-relateditems-result");if($parent.is(".pattern-relateditems-active"))$parent.removeClass("pattern-relateditems-active"),self.deselectItem(item);else{if(0<self.options.maximumSelectionSize)self.$el.select2("data").length>=self.options.maximumSelectionSize&&self.$el.select2("close");self.selectItem(item),$parent.addClass("pattern-relateditems-active"),self.options.closeOnSelect&&self.$el.select2("close")}}}),$(".pattern-relateditems-result-browse",result).on("click",function(event){event.preventDefault(),event.stopPropagation();var path=$(this).data("path");self.browseTo(path)}),$(result)},self.options.initSelection=function(element,callback){var value=$(element).val();if(""!==value){var ids=value.split(self.options.separator);new utils.QueryHelper($.extend(!0,{},self.options,{pattern:self})).search("UID","plone.app.querystring.operation.list.contains",ids,function(data){var results=data.results.reduce(function(prev,item){return prev[item.UID]=item,prev},{});try{callback(ids.map(function(uid){return results[uid]}).filter(function(item){return void 0!==item}))}catch(e){console.log(data)}self.openAfterInit&&(self.$el.select2("open"),self.openAfterInit=void 0)},!1)}},self.options.tokenizer=function(input){"auto"===this.options.mode&&(this.browsing=!input)}.bind(this),self.options.id=function(item){return item.UID},Select2.prototype.initializeSelect2.call(self),self.$toolbar=$('<div class="toolbar ui-offset-parent" />'),self.$container.prepend(self.$toolbar),self.$el.on("select2-selecting",function(event){event.preventDefault()}),self.renderToolbar()}})}),define("mockup-patterns-querystring",["jquery","pat-base","mockup-patterns-select2","mockup-patterns-pickadate","mockup-patterns-relateditems","select2","translate","underscore"],function($,Base,Select2,PickADate,relatedItems,undefined,_t,_){"use strict";var Criteria=function(){this.init.apply(this,arguments)};return Criteria.prototype={defaults:{indexWidth:"20em",remove:"",classBetweenDtName:"querystring-criteria-betweendt",classWrapperName:"querystring-criteria-wrapper",classIndexName:"querystring-criteria-index",classOperatorName:"querystring-criteria-operator",classValueName:"querystring-criteria-value",classRemoveName:"querystring-criteria-remove",classResultsName:"querystring-criteria-results",classClearName:"querystring-criteria-clear",classDepthName:"querystring-criteria-depth"},init:function($el,options,indexes,index,operator,value,baseUrl,patternDateOptions,patternAjaxSelectOptions,patternRelateditemsOptions){var self=this;self.options=$.extend(!0,{},self.defaults,options),self.indexes=indexes,self.indexGroups={},self.baseUrl=baseUrl,self.advanced=!1,self.initial=value,self.$wrapper=$("<div/>").addClass(self.options.classWrapperName).appendTo($el),self.patternDateOptions=patternDateOptions||{},self.patternAjaxSelectOptions=patternAjaxSelectOptions||{},self.patternRelateditemsOptions=patternRelateditemsOptions||{},self.patternAjaxSelectOptions=$.extend({width:"250px"},self.patternAjaxSelectOptions),self.patternRelateditemsOptions=$.extend({vocabularyUrl:self.baseUrl+"@@getVocabulary?name=plone.app.vocabularies.Catalog&field=relatedItems",width:"400px"},self.patternRelateditemsOptions),self.patternRelateditemsOptions.maximumSelectionSize=1,self.$remove=$("<div>"+self.options.remove+"</div>").addClass(self.options.classRemoveName).appendTo(self.$wrapper).on("click",function(e){self.remove()}),self.$index=$("<select><option></option></select>").attr("placeholder",_t("Select criteria")),$.each(self.indexes,function(value,options){options.enabled&&(self.indexGroups[options.group]||(self.indexGroups[options.group]=$("<optgroup/>").attr("label",options.group).appendTo(self.$index)),self.indexGroups[options.group].append($("<option/>").attr("value",value).html(options.title)))}),self.$wrapper.append($("<div/>").addClass(self.options.classIndexName).append(self.$index)),self.$index.patternSelect2({width:self.options.indexWidth,placeholder:_t("Select criteria")}).on("change",function(e){self.removeValue(),self.createOperator(e.val),self.createClear(),self.trigger("index-changed")}),void 0!==index&&(self.$index.select2("val",index),self.createOperator(index,operator,value),self.createClear()),self.trigger("create-criteria")},appendOperators:function(index){var self=this;self.$operator=$("<select/>"),self.indexes[index]&&_.each(self.indexes[index].operations,function(value){var options=self.indexes[index].operators[value];$("<option/>").attr("value",value).html(options.title).appendTo(self.$operator)}),self.$wrapper.append($("<div/>").addClass(self.options.classOperatorName).append(self.$operator)),self.$operator.patternSelect2({width:"10em"}).on("change",function(e){self.createValue(index),self.createClear(),self.trigger("operator-changed")})},convertPathOperators:function(oval){return this.advanced?oval:oval=oval.replace("advanced","relativePath").replace("path","relativePath")},createPathOperators:function(){if(this.advanced)this.resetPathOperators();else{var newOperator="plone.app.querystring.operation.string.advanced";void 0===this.indexes.path.operators[newOperator]&&(this.indexes.path.operations.push(newOperator),this.indexes.path.operators[newOperator]={title:"Advanced",widget:"AdvancedPathWidget",description:"Enter a custom path string",operation:"plone.app.querystring.queryparser._relativePath"}),$.each(this.indexes.path.operators,function(key,value){var options=value;0<key.indexOf("absolute")?options.title="Custom":0<key.indexOf("relative")?options.title="Parent (../)":0<key.indexOf("advanced")?options.title="Advanced Mode":(options.title="Current (./)",options.widget="RelativePathWidget")})}},resetPathOperators:function(){$.each(this.indexes.path.operators,function(key,value){var options=value;0<key.indexOf("absolute")?options.title="Absolute Path":0<key.indexOf("relative")?options.title="Relative Path":0<key.indexOf("advanced")?options.title="Simple Mode":(options.title="Navigation Path",options.widget="ReferenceWidget")})},createOperator:function(index,operator,value){this.removeOperator(),this.createPathOperators(),"path"===index&&value&&".::1"!==value&&"..::1"!==value&&!value.match(/^[0-9a-f]{32}::-?[0-9]+$/)&&(this.advanced=!0,this.resetPathOperators()),this.appendOperators(index),void 0===operator&&(operator=this.$operator.select2("val")),this.$operator.select2("val",operator),this.createValue(index,value),this.trigger("create-operator")},createValue:function(index,value){var self=this,widget=self.indexes[index].operators[self.$operator.val()].widget,$wrapper=$("<div/>").addClass(self.options.classValueName).appendTo(self.$wrapper);self.removeValue();if("StringWidget"===widget)self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).val(value).appendTo($wrapper).change(function(){self.trigger("value-changed")});else if("DateWidget"===widget)self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).attr("data-pat-pickadate",JSON.stringify(self.patternDateOptions)).val(value).appendTo($wrapper).patternPickadate().on("updated.pickadate.patterns",function(){self.trigger("value-changed")});else if("DateRangeWidget"===widget){var startwrap=$("<span/>").appendTo($wrapper),val1="",val2="";value&&(val1=value[0]?value[0]:"",val2=value[1]?value[1]:"");var startdt=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).addClass(self.options.classValueName+"-"+widget+"-start").attr("data-pat-pickadate",JSON.stringify(self.patternDateOptions)).val(val1).appendTo(startwrap).patternPickadate().on("updated.pickadate.patterns",function(){self.trigger("value-changed")});$wrapper.append($("<span/>").html(_t("to")).addClass(self.options.classBetweenDtName));var endwrap=$("<span/>").appendTo($wrapper),enddt=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).addClass(self.options.classValueName+"-"+widget+"-end").attr("data-pat-pickadate",JSON.stringify(self.patternDateOptions)).val(val2).appendTo(endwrap).patternPickadate().on("updated.pickadate.patterns",function(){self.trigger("value-changed")});self.$value=[startdt,enddt]}else if("RelativeDateWidget"===widget)self.$value=$('<input type="text"/>').after($("<span/>").html(_t("days"))).addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).change(function(){self.trigger("value-changed")});else if("AdvancedPathWidget"===widget)self.advanced?self.advanced=!1:self.advanced=!0,self.createPathOperators(),self.removeOperator(),self.appendOperators(index),self.createValue(index);else if("RelativePathWidget"===widget)self.advanced?self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).val(value).change(function(){self.trigger("value-changed")}):(value?".::1"===value&&self.$operator.select2("val","plone.app.querystring.operation.string.path"):(value=".::1",0<self.$operator.val().indexOf("relativePath")&&(value="..::1")),self.$value=$('<input type="hidden"/>').addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).val(value));else if("ReferenceWidget"===widget)if(self.advanced)self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).val(value).appendTo($wrapper).change(function(){self.trigger("value-changed")});else{var pathAndDepth=["",-1];void 0!==value&&(pathAndDepth=value.split("::")),self.$value=$('<input type="text"/>').addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).val(pathAndDepth[0]).patternRelateditems(self.patternRelateditemsOptions).change(function(){self.trigger("value-changed")}),self.$value.parent().after(function(selected){for(var select="<div class='depth-select-box'><label for='depth-select'>Depth</label><select name='depth-select' class='"+self.options.classDepthName+"'><option value='-1' selected='selected'>Unlimited</option>",i=0;i<=10;i+=1)select+="<option value="+i+" ",""+i===selected&&(select+="selected='selected' "),select+=">"+i+"</option>";return $(select+="</select></div>").change(function(){self.trigger("depth-changed")})}(pathAndDepth[1])),self.$value.parents("."+self.options.classValueName).addClass("break-line")}else"MultipleSelectionWidget"===widget&&(self.$value=$("<select/>").prop("multiple",!0).addClass(self.options.classValueName+"-"+widget).appendTo($wrapper).change(function(){self.trigger("value-changed")}),self.indexes[index]&&$.each(self.indexes[index].values,function(value,options){$("<option/>").attr("value",value).html(options.title).appendTo(self.$value)}),self.$value.patternSelect2(self.patternAjaxSelectOptions));if(void 0!==value&&void 0!==self.$value)if($.isArray(self.$value))$.each(value,function(i,v){self.$value[i].select2("val",v)});else{var trimmedValue=value;"string"==typeof value&&"RelativePathWidget"!==widget&&(trimmedValue=value.replace(/::-?[0-9]+/,"")),self.$value.select2("val",trimmedValue)}self.trigger("create-value")},createClear:function(){this.removeClear(),this.$clear=$("<div/>").addClass(this.options.classClearName).appendTo(this.$wrapper)},remove:function(){this.trigger("remove"),this.$remove.remove(),this.$index.parent().remove(),this.removeOperator(),this.removeValue(),this.removeClear(),this.$wrapper.remove()},removeClear:function(){this.trigger("remove-clear"),this.$clear&&this.$clear.remove()},removeOperator:function(){this.trigger("remove-operator"),this.$operator&&this.$operator.parent().remove()},removeValue:function(){this.trigger("remove-value"),this.$value&&($.isArray(this.$value)?this.$value[0].parents(".querystring-criteria-value").remove():this.$value.parents(".querystring-criteria-value").remove())},buildQueryPart:function(){var ival=this.$index.select2("val");if(""===ival)return"";var istr="query.i:records="+ival;if(void 0===this.$operator)return"";var oval=this.$operator.val();if("path"===ival){if(0<oval.indexOf("advanced"))return"";oval=this.convertPathOperators(oval)}var ostr="query.o:records="+oval,vstrbase="query.v:records=",vstr=[];if(void 0===this.$value)vstr.push(vstrbase);else if($.isArray(this.$value))$.each(this.$value,function(i,v){vstr.push("query.v:records:list="+$(this).val())});else if($.isArray(this.$value.val()))$.each(this.$value.val(),function(i,v){vstr.push("query.v:records:list="+v)});else{var str=vstrbase+this.$value.val();"path"===ival&&""!==this.$value.val()?str+=this.getDepthString():void 0!==this.initial&&(str=vstrbase+this.initial,delete this.initial),vstr.push(str)}return istr+"&"+ostr+"&"+vstr.join("&")},getJSONListStr:function(){var ival=this.$index.select2("val");if(""===ival)return"";if(void 0===this.$operator)return"";var oval=this.$operator.val();if("path"===ival){if(0<oval.indexOf("advanced"))return"";oval=this.convertPathOperators(oval)}var vval,varr=[];if($.isArray(this.$value))$.each(this.$value,function(i,v){varr.push($(this).val())});else if(void 0!==this.$value){var value=this.$value.val();if("path"===ival&&value){var depth=this.getDepthString();depth&&(value+=depth)}varr.push(value)}return vval=1<varr.length?'["'+varr.join('","')+'"]':1===varr.length?JSON.stringify(varr[0]):'""',void 0!==this.indexes[ival].operators[oval]?'{"i":"'+ival+'", "o":"'+oval+'", "v":'+vval+"}":void 0},getDepthString:function(){var out="",depth=$("."+this.options.classDepthName).val();return""!==depth&&void 0!==depth&&(out+="::"+depth),out},trigger:function(name){this.$wrapper.trigger(name+"-criteria.querystring.patterns",[this])},on:function(name,callback){this.$wrapper.on(name+"-criteria.querystring.patterns",callback)}},Base.extend({name:"querystring",trigger:".pat-querystring",parser:"mockup",defaults:{indexes:[],classWrapperName:"querystring-wrapper",criteria:{},indexOptionsUrl:null,previewURL:"portal_factory/@@querybuilder_html_results",previewCountURL:"portal_factory/@@querybuildernumberofresults",patternDateOptions:{},patternAjaxSelectOptions:{},patternRelateditemsOptions:{},classSortLabelName:"querystring-sort-label",classSortReverseName:"querystring-sortreverse",classSortReverseLabelName:"querystring-sortreverse-label",classPreviewCountWrapperName:"querystring-previewcount-wrapper",classPreviewResultsWrapperName:"querystring-previewresults-wrapper",classPreviewWrapperName:"querystring-preview-wrapper",classPreviewName:"querystring-preview",classPreviewTitleName:"querystring-preview-title",classPreviewDescriptionName:"querystring-preview-description",classSortWrapperName:"querystring-sort-wrapper",showPreviews:!0},init:function(){var self=this;self.$el.hide(),self.$wrapper=$("<div/>"),self.$el.after(self.$wrapper),self.initialized=!1,self.options.indexOptionsUrl?$.ajax({url:self.options.indexOptionsUrl,success:function(data){self.options.indexes=data.indexes,self.options.sortable_indexes=data.sortable_indexes,self._init()},error:function(xhr){}}):self._init()},_init:function(){var self=this;self.$criteriaWrapper=$("<div/>").addClass(self.options.classWrapperName).appendTo(self.$wrapper),self.$sortWrapper=$("<div/>").addClass(self.options.classSortWrapperName).appendTo(self.$wrapper),"false"===self.options.showPreviews&&(self.options.showPreviews=!1),self.options.showPreviews&&(self.$previewWrapper=$("<div/>").addClass(self.options.classPreviewWrapperName).appendTo(self.$wrapper),$("<div/>").addClass(self.options.classPreviewTitleName).html(_t("Preview")).appendTo(self.$previewWrapper),$("<div/>").addClass(self.options.classPreviewDescriptionName).html(_t("Preview of at most 10 items")).appendTo(self.$previewWrapper)),self.criterias=[],self.$el.val()&&$.each(JSON.parse(self.$el.val()),function(i,item){self.createCriteria(item.i,item.o,item.v)}),self.createCriteria(),self.createSort(),self.options.showPreviews&&self.refreshPreviewEvent(),self.$el.trigger("initialized"),self.initialized=!0},createCriteria:function(index,operator,value){var self=this,baseUrl=self.options.indexOptionsUrl.replace(/(@@.*)/g,""),criteria=new Criteria(self.$criteriaWrapper,self.options.criteria,self.options.indexes,index,operator,value,baseUrl,self.options.patternDateOptions,self.options.patternAjaxSelectOptions,self.options.patternRelateditemsOptions);criteria.on("remove",function(e){self.criterias[self.criterias.length-1]===criteria&&self.createCriteria()}),criteria.on("index-changed",function(e){self.criterias[self.criterias.length-1]===criteria&&self.createCriteria()});var _doupdates=function(){self.refreshPreviewEvent(),self.updateValue()},_updateTimeout=-1,doupdates=function(){clearTimeout(_updateTimeout),_updateTimeout=setTimeout(_doupdates,100)};criteria.on("remove",function(e,criteria){-1!==self.criterias.indexOf(criteria)&&self.criterias.splice(self.criterias.indexOf(criteria),1),doupdates()}),criteria.on("remove-clear",doupdates),criteria.on("remove-operator",doupdates),criteria.on("remove-value",doupdates),criteria.on("index-changed",doupdates),criteria.on("operator-changed",doupdates),criteria.on("create-criteria",doupdates),criteria.on("create-operator",doupdates),criteria.on("create-value",doupdates),criteria.on("value-changed",doupdates),criteria.on("depth-changed",doupdates),self.criterias.push(criteria)},createSort:function(){var self=this,existingSortOn=$('[id$="-sort_on"]').filter('[id^="formfield-"]'),existingSortOrder=$('[id$="-sort_reversed"]').filter('[id^="formfield-"]');for(var key in $("<span/>").addClass(self.options.classSortLabelName).html(_t("Sort on")).appendTo(self.$sortWrapper),self.$sortOn=$("<select/>").attr("name","sort_on").appendTo(self.$sortWrapper).change(function(){self.refreshPreviewEvent.call(self),$('[id$="sort_on"]',existingSortOn).val($(this).val())}),self.$sortOn.append($('<option value="">No sorting</option>')),self.options.sortable_indexes)self.$sortOn.append($("<option/>").attr("value",key).html(self.options.indexes[key].title));if(self.$sortOn.patternSelect2({width:"150px"}),self.$sortOrder=$('<input type="checkbox" />').attr("name","sort_reversed:boolean").change(function(){self.refreshPreviewEvent.call(self),$(this).prop("checked")?$('.option input[type="checkbox"]',existingSortOrder).prop("checked",!0):$('.option input[type="checkbox"]',existingSortOrder).prop("checked",!1)}),$("<span/>").addClass(self.options.classSortReverseName).appendTo(self.$sortWrapper).append(self.$sortOrder).append($("<span/>").html(_t("Reversed Order")).addClass(self.options.classSortReverseLabelName)),1<=existingSortOn.length&&1<=existingSortOrder.length){var reversed=$('.option input[type="checkbox"]',existingSortOrder).prop("checked"),sortOn=$('[id$="-sort_on"]',existingSortOn).val();reversed&&self.$sortOrder.prop("checked",!0),self.$sortOn.select2("val",sortOn),$(existingSortOn).hide(),$(existingSortOrder).hide()}},refreshPreviewEvent:function(value){var self=this;if(self.options.showPreviews){void 0!==self._previewXhr&&self._previewXhr.abort(),void 0!==self.$previewPane&&self.$previewPane.remove();var query=[];$.each(self.criterias,function(i,criteria){var querypart=criteria.buildQueryPart();""!==querypart&&query.push(querypart)}),self.$previewPane=$("<div/>").addClass(self.options.classPreviewName).appendTo(self.$previewWrapper),query.length<=0?$("<div/>").addClass(self.options.classPreviewCountWrapperName).html("No results to preview").prependTo(self.$previewPane):(query.push("sort_on="+self.$sortOn.val()),self.$sortOrder.prop("checked")&&query.push("sort_order=reverse"),self._previewXhr=$.get(self.options.previewURL+"?"+query.join("&")).done(function(data,stat){$("<div/>").addClass(self.options.classPreviewResultsWrapperName).html(data).appendTo(self.$previewPane)}))}},updateValue:function(){var criteriastrs=[];$.each(this.criterias,function(i,criteria){var jsonstr=criteria.getJSONListStr();""!==jsonstr&&criteriastrs.push(jsonstr)});this.$el.val();var val="["+criteriastrs.join(",")+"]";this.$el.val(val),this.$el.trigger("change")}})}),function(root){define("tinymce",[],function(){return function(){return function(){"use strict";var pIndexOf,webkit,ie,ie11,ie12,gecko,mac,iDevice,android,fileApi,phone,tablet,windowsPhone,constant=function(value){return function(){return value}},never=constant(!1),always=constant(!0),$_eqpqvr6jh8lyw3s={noop:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i]},noarg:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return f()}},compose:function(fa,fb){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return fa(fb.apply(null,arguments))}},constant:constant,identity:function(x){return x},tripleEquals:function(a,b){return a===b},curry:function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}},not:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return!f.apply(null,arguments)}},die:function(msg){return function(){throw new Error(msg)}},apply:function(f){return f()},call:function(f){f()},never:never,always:always},never$1=$_eqpqvr6jh8lyw3s.never,always$1=$_eqpqvr6jh8lyw3s.always,none=function(){return NONE},NONE=function(){var eq=function(o){return o.isNone()},call=function(thunk){return thunk()},id=function(n){return n},me={fold:function(n,s){return n()},is:never$1,isSome:never$1,isNone:always$1,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},or:id,orThunk:call,map:none,ap:none,each:function(){},bind:none,flatten:none,exists:never$1,forall:always$1,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:$_eqpqvr6jh8lyw3s.constant("none()")};return Object.freeze&&Object.freeze(me),me}(),some=function(a){var constant_a=function(){return a},self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always$1,isNone:never$1,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},ap:function(optfab){return optfab.fold(none,function(fab){return some(fab(a))})},each:function(f){f(a)},bind:bind,flatten:constant_a,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never$1,function(b){return elementEq(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Option={some:some,none:none,from:function(value){return null==value?NONE:some(value)}},isType=function(type){return function(value){return function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t}(value)===type}},$_dp4g6d7jh8lyw3y={isString:isType("string"),isObject:isType("object"),isArray:isType("array"),isNull:isType("null"),isBoolean:isType("boolean"),isUndefined:isType("undefined"),isFunction:isType("function"),isNumber:isType("number")},rawIndexOf=void 0===(pIndexOf=Array.prototype.indexOf)?function(xs,x){return slowIndexOf(xs,x)}:function(xs,x){return pIndexOf.call(xs,x)},contains=function(xs,x){return-1<rawIndexOf(xs,x)},map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i,xs)}return r},each=function(xs,f){for(var i=0,len=xs.length;i<len;i++)f(xs[i],i,xs)},eachr=function(xs,f){for(var i=xs.length-1;0<=i;i--)f(xs[i],i,xs)},filter=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i,xs)&&r.push(x)}return r},findIndex=function(xs,pred){for(var i=0,len=xs.length;i<len;i++)if(pred(xs[i],i,xs))return Option.some(i);return Option.none()},slowIndexOf=function(xs,x){for(var i=0,len=xs.length;i<len;++i)if(xs[i]===x)return i;return-1},push=Array.prototype.push,flatten=function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!Array.prototype.isPrototypeOf(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);push.apply(r,xs[i])}return r},forall=function(xs,pred){for(var i=0,len=xs.length;i<len;++i)if(!0!==pred(xs[i],i,xs))return!1;return!0},slice=Array.prototype.slice,from$1=$_dp4g6d7jh8lyw3y.isFunction(Array.from)?Array.from:function(x){return slice.call(x)},$_5wjzy24jh8lyw2t={map:map,each:each,eachr:eachr,partition:function(xs,pred){for(var pass=[],fail=[],i=0,len=xs.length;i<len;i++){var x=xs[i];(pred(x,i,xs)?pass:fail).push(x)}return{pass:pass,fail:fail}},filter:filter,groupBy:function(xs,f){if(0===xs.length)return[];for(var wasType=f(xs[0]),r=[],group=[],i=0,len=xs.length;i<len;i++){var x=xs[i],type=f(x);type!==wasType&&(r.push(group),group=[]),wasType=type,group.push(x)}return 0!==group.length&&r.push(group),r},indexOf:function(xs,x){var r=rawIndexOf(xs,x);return-1===r?Option.none():Option.some(r)},foldr:function(xs,f,acc){return eachr(xs,function(x){acc=f(acc,x)}),acc},foldl:function(xs,f,acc){return each(xs,function(x){acc=f(acc,x)}),acc},find:function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i,xs))return Option.some(x)}return Option.none()},findIndex:findIndex,flatten:flatten,bind:function(xs,f){var output=map(xs,f);return flatten(output)},forall:forall,exists:function(xs,pred){return findIndex(xs,pred).isSome()},contains:contains,equal:function(a1,a2){return a1.length===a2.length&&forall(a1,function(x,i){return x===a2[i]})},reverse:function(xs){var r=slice.call(xs,0);return r.reverse(),r},chunk:function(array,size){for(var r=[],i=0;i<array.length;i+=size){var s=array.slice(i,i+size);r.push(s)}return r},difference:function(a1,a2){return filter(a1,function(x){return!contains(a2,x)})},mapToObject:function(xs,f){for(var r={},i=0,len=xs.length;i<len;i++){var x=xs[i];r[String(x)]=f(x,i)}return r},pure:function(x){return[x]},sort:function(xs,comparator){var copy=slice.call(xs,0);return copy.sort(comparator),copy},range:function(num,f){for(var r=[],i=0;i<num;i++)r.push(f(i));return r},head:function(xs){return 0===xs.length?Option.none():Option.some(xs[0])},last:function(xs){return 0===xs.length?Option.none():Option.some(xs[xs.length-1])},from:from$1},global="undefined"!=typeof window?window:Function("return this;")(),path=function(parts,scope){for(var o=null!=scope?scope:global,i=0;i<parts.length&&null!=o;++i)o=o[parts[i]];return o},$_br50dmdjh8lyw6o_resolve=function(p,scope){var parts=p.split(".");return path(parts,scope)},$_99xmy7cjh8lyw6k={getOrDie:function(name,scope){var actual=function(name,scope){return $_br50dmdjh8lyw6o_resolve(name,scope)}(name,scope);if(null==actual)throw name+" not available on this browser";return actual}},url=function(){return $_99xmy7cjh8lyw6k.getOrDie("URL")},$_ge0pt0bjh8lyw6g={createObjectURL:function(blob){return url().createObjectURL(blob)},revokeObjectURL:function(u){url().revokeObjectURL(u)}},nav=navigator,userAgent=nav.userAgent,matchMediaQuery=function(query){return"matchMedia"in window&&matchMedia(query).matches};android=/Android/.test(userAgent),ie=(ie=!(webkit=/WebKit/.test(userAgent))&&/MSIE/gi.test(userAgent)&&/Explorer/gi.test(nav.appName))&&/MSIE (\w+)\./.exec(userAgent)[1],ie11=-1!==userAgent.indexOf("Trident/")&&(-1!==userAgent.indexOf("rv:")||-1!==nav.appName.indexOf("Netscape"))&&11,ie12=-1!==userAgent.indexOf("Edge/")&&!ie&&!ie11&&12,ie=ie||ie11||ie12,gecko=!webkit&&!ie11&&/Gecko/.test(userAgent),mac=-1!==userAgent.indexOf("Mac"),iDevice=/(iPad|iPhone)/.test(userAgent),fileApi="FormData"in window&&"FileReader"in window&&"URL"in window&&!!$_ge0pt0bjh8lyw6g.createObjectURL,phone=matchMediaQuery("only screen and (max-device-width: 480px)")&&(android||iDevice),tablet=matchMediaQuery("only screen and (min-width: 800px)")&&(android||iDevice),windowsPhone=-1!==userAgent.indexOf("Windows Phone"),ie12&&(webkit=!1);var requestAnimationFramePromise,i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document$1,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,contains$1,$_9bpim8ajh8lyw68={opera:!1,webkit:webkit,ie:ie,gecko:gecko,mac:mac,iOS:iDevice,android:android,contentEditable:!iDevice||fileApi||534<=parseInt(userAgent.match(/AppleWebKit\/(\d*)/)[1],10),transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!==ie,range:window.getSelection&&"Range"in window,documentMode:ie&&!ie12?document.documentMode||7:10,fileApi:fileApi,ceFalse:!1===ie||8<ie,cacheSuffix:null,container:null,overrideViewPort:null,experimentalShadowDom:!1,canHaveCSP:!1===ie||11<ie,desktop:!phone&&!tablet,windowsPhone:windowsPhone},promiseObj=window.Promise?window.Promise:function(){function bind(fn,thisArg){return function(){fn.apply(thisArg,arguments)}}var isArray=Array.isArray||function(value){return"[object Array]"===Object.prototype.toString.call(value)},Promise=function(fn){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof fn)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],doResolve(fn,bind(resolve,this),bind(reject,this))},asap=Promise.immediateFn||"function"==typeof setImmediate&&setImmediate||function(fn){setTimeout(fn,1)};function handle(deferred){var me=this;null!==this._state?asap(function(){var cb=me._state?deferred.onFulfilled:deferred.onRejected;if(null!==cb){var ret;try{ret=cb(me._value)}catch(e){return void deferred.reject(e)}deferred.resolve(ret)}else(me._state?deferred.resolve:deferred.reject)(me._value)}):this._deferreds.push(deferred)}function resolve(newValue){try{if(newValue===this)throw new TypeError("A promise cannot be resolved with itself.");if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if("function"==typeof then)return void doResolve(bind(then,newValue),bind(resolve,this),bind(reject,this))}this._state=!0,this._value=newValue,finale.call(this)}catch(e){reject.call(this,e)}}function reject(newValue){this._state=!1,this._value=newValue,finale.call(this)}function finale(){for(var i=0,len=this._deferreds.length;i<len;i++)handle.call(this,this._deferreds[i]);this._deferreds=null}function Handler(onFulfilled,onRejected,resolve,reject){this.onFulfilled="function"==typeof onFulfilled?onFulfilled:null,this.onRejected="function"==typeof onRejected?onRejected:null,this.resolve=resolve,this.reject=reject}function doResolve(fn,onFulfilled,onRejected){var done=!1;try{fn(function(value){done||(done=!0,onFulfilled(value))},function(reason){done||(done=!0,onRejected(reason))})}catch(ex){if(done)return;done=!0,onRejected(ex)}}return Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var me=this;return new Promise(function(resolve,reject){handle.call(me,new Handler(onFulfilled,onRejected,resolve,reject))})},Promise.all=function(){var args=Array.prototype.slice.call(1===arguments.length&&isArray(arguments[0])?arguments[0]:arguments);return new Promise(function(resolve,reject){if(0===args.length)return resolve([]);var remaining=args.length;function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}for(var i=0;i<args.length;i++)res(i,args[i])})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise.race=function(values){return new Promise(function(resolve,reject){for(var i=0,len=values.length;i<len;i++)values[i].then(resolve,reject)})},Promise}(),wrappedSetTimeout=function(callback,time){return"number"!=typeof time&&(time=0),setTimeout(callback,time)},wrappedSetInterval=function(callback,time){return"number"!=typeof time&&(time=1),setInterval(callback,time)},debounce=function(callback,time){var timer,func;return(func=function(){var args=arguments;clearTimeout(timer),timer=wrappedSetTimeout(function(){callback.apply(this,args)},time)}).stop=function(){clearTimeout(timer)},func},$_8sy3pfhjh8lyw95={requestAnimationFrame:function(callback,element){requestAnimationFramePromise?requestAnimationFramePromise.then(callback):requestAnimationFramePromise=new promiseObj(function(resolve){element||(element=document.body),function(callback,element){var i,requestAnimationFrameFunc=window.requestAnimationFrame,vendors=["ms","moz","webkit"];for(i=0;i<vendors.length&&!requestAnimationFrameFunc;i++)requestAnimationFrameFunc=window[vendors[i]+"RequestAnimationFrame"];requestAnimationFrameFunc||(requestAnimationFrameFunc=function(callback){window.setTimeout(callback,0)}),requestAnimationFrameFunc(callback,element)}(resolve,element)}).then(callback)},setTimeout:wrappedSetTimeout,setInterval:wrappedSetInterval,setEditorTimeout:function(editor,callback,time){return wrappedSetTimeout(function(){editor.removed||callback()},time)},setEditorInterval:function(editor,callback,time){var timer;return timer=wrappedSetInterval(function(){editor.removed?clearInterval(timer):callback()},time)},debounce:debounce,throttle:debounce,clearInterval:function(id){return clearInterval(id)},clearTimeout:function(id){return clearTimeout(id)}},mouseEventRe=/^(?:mouse|contextmenu)|click/,deprecated={keyLocation:1,layerX:1,layerY:1,returnValue:1,webkitMovementX:1,webkitMovementY:1,keyIdentifier:1},returnFalse=function(){return!1},returnTrue=function(){return!0},addEvent=function(target,name,callback,capture){target.addEventListener?target.addEventListener(name,callback,capture||!1):target.attachEvent&&target.attachEvent("on"+name,callback)},removeEvent=function(target,name,callback,capture){target.removeEventListener?target.removeEventListener(name,callback,capture||!1):target.detachEvent&&target.detachEvent("on"+name,callback)},fix=function(originalEvent,data){var name,event=data||{};for(name in originalEvent)deprecated[name]||(event[name]=originalEvent[name]);if(event.target||(event.target=event.srcElement||document),$_9bpim8ajh8lyw68.experimentalShadowDom&&(event.target=function(event,defaultTarget){var path,target=defaultTarget;return(path=event.path)&&0<path.length&&(target=path[0]),event.composedPath&&(path=event.composedPath())&&0<path.length&&(target=path[0]),target}(originalEvent,event.target)),originalEvent&&mouseEventRe.test(originalEvent.type)&&void 0===originalEvent.pageX&&void 0!==originalEvent.clientX){var eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body;event.pageX=originalEvent.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=originalEvent.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}return event.preventDefault=function(){event.isDefaultPrevented=returnTrue,originalEvent&&(originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=!1)},event.stopPropagation=function(){event.isPropagationStopped=returnTrue,originalEvent&&(originalEvent.stopPropagation?originalEvent.stopPropagation():originalEvent.cancelBubble=!0)},!(event.stopImmediatePropagation=function(){event.isImmediatePropagationStopped=returnTrue,event.stopPropagation()})===function(event){return event.isDefaultPrevented===returnTrue||event.isDefaultPrevented===returnFalse}(event)&&(event.isDefaultPrevented=returnFalse,event.isPropagationStopped=returnFalse,event.isImmediatePropagationStopped=returnFalse),void 0===event.metaKey&&(event.metaKey=!1),event},bindOnReady=function(win,callback,eventUtils){var doc=win.document,event={type:"ready"};if(eventUtils.domLoaded)callback(event);else{var isDocReady=function(){return"complete"===doc.readyState||"interactive"===doc.readyState&&doc.body},readyHandler=function(){eventUtils.domLoaded||(eventUtils.domLoaded=!0,callback(event))},waitForDomLoaded=function(){isDocReady()&&(removeEvent(doc,"readystatechange",waitForDomLoaded),readyHandler())},tryScroll=function(){try{doc.documentElement.doScroll("left")}catch(ex){return void $_8sy3pfhjh8lyw95.setTimeout(tryScroll)}readyHandler()};!doc.addEventListener||$_9bpim8ajh8lyw68.ie&&$_9bpim8ajh8lyw68.ie<11?(addEvent(doc,"readystatechange",waitForDomLoaded),doc.documentElement.doScroll&&win.self===win.top&&tryScroll()):isDocReady()?readyHandler():addEvent(win,"DOMContentLoaded",readyHandler),addEvent(win,"load",readyHandler)}},EventUtils=function(){var count,expando,hasFocusIn,hasMouseEnterLeave,mouseEnterLeave,self=this,events={};expando="mce-data-"+(+new Date).toString(32),hasMouseEnterLeave="onmouseenter"in document.documentElement,hasFocusIn="onfocusin"in document.documentElement,mouseEnterLeave={mouseenter:"mouseover",mouseleave:"mouseout"},count=1,self.domLoaded=!1,self.events=events;var executeHandlers=function(evt,id){var callbackList,i,l,callback,container=events[id];if(callbackList=container&&container[evt.type])for(i=0,l=callbackList.length;i<l;i++)if((callback=callbackList[i])&&!1===callback.func.call(callback.scope,evt)&&evt.preventDefault(),evt.isImmediatePropagationStopped())return};self.bind=function(target,names,callback,scope){var id,callbackList,i,name,fakeName,nativeHandler,capture,win=window,defaultNativeHandler=function(evt){executeHandlers(fix(evt||win.event),id)};if(target&&3!==target.nodeType&&8!==target.nodeType){for(target[expando]?id=target[expando]:(id=count++,target[expando]=id,events[id]={}),scope=scope||target,i=(names=names.split(" ")).length;i--;)nativeHandler=defaultNativeHandler,fakeName=capture=!1,"DOMContentLoaded"===(name=names[i])&&(name="ready"),self.domLoaded&&"ready"===name&&"complete"===target.readyState?callback.call(scope,fix({type:name})):(hasMouseEnterLeave||(fakeName=mouseEnterLeave[name])&&(nativeHandler=function(evt){var current,related;if(current=evt.currentTarget,(related=evt.relatedTarget)&&current.contains)related=current.contains(related);else for(;related&&related!==current;)related=related.parentNode;related||((evt=fix(evt||win.event)).type="mouseout"===evt.type?"mouseleave":"mouseenter",evt.target=current,executeHandlers(evt,id))}),hasFocusIn||"focusin"!==name&&"focusout"!==name||(capture=!0,fakeName="focusin"===name?"focus":"blur",nativeHandler=function(evt){(evt=fix(evt||win.event)).type="focus"===evt.type?"focusin":"focusout",executeHandlers(evt,id)}),(callbackList=events[id][name])?"ready"===name&&self.domLoaded?callback({type:name}):callbackList.push({func:callback,scope:scope}):(events[id][name]=callbackList=[{func:callback,scope:scope}],callbackList.fakeName=fakeName,callbackList.capture=capture,callbackList.nativeHandler=nativeHandler,"ready"===name?bindOnReady(target,nativeHandler,self):addEvent(target,fakeName||name,nativeHandler,capture)));return target=callbackList=0,callback}},self.unbind=function(target,names,callback){var id,callbackList,i,ci,name,eventMap;if(!target||3===target.nodeType||8===target.nodeType)return self;if(id=target[expando]){if(eventMap=events[id],names){for(i=(names=names.split(" ")).length;i--;)if(callbackList=eventMap[name=names[i]]){if(callback)for(ci=callbackList.length;ci--;)if(callbackList[ci].func===callback){var nativeHandler=callbackList.nativeHandler,fakeName=callbackList.fakeName,capture=callbackList.capture;(callbackList=callbackList.slice(0,ci).concat(callbackList.slice(ci+1))).nativeHandler=nativeHandler,callbackList.fakeName=fakeName,callbackList.capture=capture,eventMap[name]=callbackList}callback&&0!==callbackList.length||(delete eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture))}}else{for(name in eventMap)callbackList=eventMap[name],removeEvent(target,callbackList.fakeName||name,callbackList.nativeHandler,callbackList.capture);eventMap={}}for(name in eventMap)return self;delete events[id];try{delete target[expando]}catch(ex){target[expando]=null}}return self},self.fire=function(target,name,args){var id;if(!target||3===target.nodeType||8===target.nodeType)return self;for((args=fix(null,args)).type=name,args.target=target;(id=target[expando])&&executeHandlers(args,id),(target=target.parentNode||target.ownerDocument||target.defaultView||target.parentWindow)&&!args.isPropagationStopped(););return self},self.clean=function(target){var i,children,unbind=self.unbind;if(!target||3===target.nodeType||8===target.nodeType)return self;if(target[expando]&&unbind(target),target.getElementsByTagName||(target=target.document),target&&target.getElementsByTagName)for(unbind(target),i=(children=target.getElementsByTagName("*")).length;i--;)(target=children[i])[expando]&&unbind(target);return self},self.destroy=function(){events={}},self.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}};EventUtils.Event=new EventUtils,EventUtils.Event.bind(window,"ready",function(){});var expando="sizzle"+-new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push$1=arr.push,slice$1=arr.slice,indexOf$1=arr.indexOf||function(elem){for(var i=0,len=this.length;i<len;i++)if(this[i]===elem)return i;return-1},whitespace="[\\x20\\t\\r\\n\\f]",identifier="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",attributes="\\["+whitespace+"*("+identifier+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+identifier+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+identifier+")"),CLASS:new RegExp("^\\.("+identifier+")"),TAG:new RegExp("^("+identifier+"|[*])"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!=high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)};try{push$1.apply(arr=slice$1.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push$1={apply:arr.length?function(target,els){push_native.apply(target,slice$1.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}var Sizzle=function(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document$1&&setDocument(context),results=results||[],!selector||"string"!=typeof selector)return results;if(1!==(nodeType=(context=context||document$1).nodeType)&&9!==nodeType)return[];if(documentIsHTML&&!seed){if(match=rquickExpr.exec(selector))if(m=match[1]){if(9===nodeType){if(!(elem=context.getElementById(m))||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains$1(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push$1.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push$1.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=9===nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push$1.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)};function createCache(){var keys=[];return function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}}function markFunction(fn){return fn[expando]=!0,fn}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||1<<31)-(~a.sourceIndex||1<<31);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){return"input"===elem.nodeName.toLowerCase()&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&void 0!==context.getElementsByTagName&&context}for(i in support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return!!documentElement&&"HTML"!==documentElement.nodeName},setDocument=Sizzle.setDocument=function(node){var hasCompare,doc=node?node.ownerDocument||node:preferredDoc,parent=doc.defaultView;return doc!==document$1&&9===doc.nodeType&&doc.documentElement?(docElem=(document$1=doc).documentElement,documentIsHTML=!isXML(doc),parent&&parent!==function(win){try{return win.top}catch(ex){}return null}(parent)&&(parent.addEventListener?parent.addEventListener("unload",function(){setDocument()},!1):parent.attachEvent&&parent.attachEvent("onunload",function(){setDocument()})),support.attributes=!0,support.getElementsByTagName=!0,support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=!0,Expr.find.ID=function(id,context){if(void 0!==context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}},Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(void 0!==context.getElementsByTagName)return context.getElementsByTagName(tag)}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"!==tag)return results;for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML)return context.getElementsByClassName(className)},rbuggyMatches=[],rbuggyQSA=[],support.disconnectedMatch=!0,rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains$1=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare||(1&(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1)||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains$1(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains$1(preferredDoc,b)?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf$1.call(sortInput,a)-indexOf$1.call(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document$1},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document$1&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr)))try{var ret=(void 0).call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return 0<Sizzle(expr,document$1,null,[elem]).length},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document$1&&setDocument(context),contains$1(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document$1&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},(Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||void 0!==elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:!operator||(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&-1<result.indexOf(check):"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?-1<(" "+result+" ").indexOf(check):"|="===operator&&(result===check||result.slice(0,check.length+1)===check+"-"))}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(nodeIndex=(cache=(outerCache=parent[expando]||(parent[expando]={}))[type]||[])[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return(diff-=last)===first||diff%first==0&&0<=diff/first}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):1<fn.length?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)seed[idx=indexOf$1.call(seed,matched[i])]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),!results.pop()}}),has:markFunction(function(selector){return function(elem){return 0<Sizzle(selector,elem).length}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return-1<(elem.textContent||elem.innerText||getText(elem)).indexOf(text)}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return(elemLang=elemLang.toLowerCase())===lang||0===elemLang.indexOf(lang+"-")}while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document$1.activeElement&&(!document$1.hasFocus||document$1.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return!1===elem.disabled},disabled:function(elem){return!0===elem.disabled},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,!0===elem.selected},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;0<=--i;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}}).pseudos.nth=Expr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";i<len;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if((oldCache=(outerCache=elem[expando]||(elem[expando]={}))[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if((outerCache[dir]=newCache)[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return 1<matchers.length?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;i<len;i++)(elem=unmatched[i])&&(filter&&!filter(elem,context,xml)||(newUnmatched.push(elem),mapped&&map.push(i)));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||function(selector,contexts,results){for(var i=0,len=contexts.length;i<len;i++)Sizzle(selector,contexts[i],results);return results}(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&-1<(temp=postFinder?indexOf$1.call(seed,elem):preMap[i])&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push$1.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return-1<indexOf$1.call(checkContext,elem)},implicitRelative,!0),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if((matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches))[expando]){for(j=++i;j<len&&!Expr.relative[tokens[j].type];j++);return setMatcher(1<i&&elementMatcher(matchers),1<i&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){for(type in matched&&!(match=rcomma.exec(soFar))||(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length)),Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)(cached=matcherFromTokens(match[i]))[expando]?setMatchers.push(cached):elementMatchers.push(cached);(cached=compilerCache(selector,function(elementMatchers,setMatchers){var bySet=0<setMatchers.length,byElement=0<elementMatchers.length,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document$1&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(0<matchedCount)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push$1.apply(results,setMatched),outermost&&!seed&&0<setMatched.length&&1<matchedCount+setMatchers.length&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}(elementMatchers,setMatchers))).selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(2<(tokens=match[0]=match[0].slice(0)).length&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(!(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0]))return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),!(selector=seed.length&&toSelector(tokens)))return push$1.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=!0;var isArray=Array.isArray,each$1=function(o,cb,s){var n,l;if(!o)return 0;if(s=s||o,void 0!==o.length){for(n=0,l=o.length;n<l;n++)if(!1===cb.call(s,o[n],n,o))return 0}else for(n in o)if(o.hasOwnProperty(n)&&!1===cb.call(s,o[n],n,o))return 0;return 1},findIndex$1=function(array,predicate,thisArg){var i,l;for(i=0,l=array.length;i<l;i++)if(predicate.call(thisArg,array[i],i,array))return i;return-1},$_9tjm51ljh8lywbq={isArray:isArray,toArray:function(obj){var i,l,array=obj;if(!isArray(obj))for(array=[],i=0,l=obj.length;i<l;i++)array[i]=obj[i];return array},each:each$1,map:function(array,callback){var out=[];return each$1(array,function(item,index){out.push(callback(item,index,array))}),out},filter:function(a,f){var o=[];return each$1(a,function(v,index){f&&!f(v,index,a)||o.push(v)}),o},indexOf:function(a,v){var i,l;if(a)for(i=0,l=a.length;i<l;i++)if(a[i]===v)return i;return-1},reduce:function(collection,iteratee,accumulator,thisArg){var i=0;for(arguments.length<3&&(accumulator=collection[0]);i<collection.length;i++)accumulator=iteratee.call(thisArg,accumulator,collection[i],i);return accumulator},findIndex:findIndex$1,find:function(array,predicate,thisArg){var idx=findIndex$1(array,predicate,thisArg);if(-1!==idx)return array[idx]},last:function(collection){return collection[collection.length-1]}},whiteSpaceRegExp=/^\s*|\s*$/g,trim=function(str){return null==str?"":(""+str).replace(whiteSpaceRegExp,"")},is=function(obj,type){return type?!("array"!==type||!$_9tjm51ljh8lywbq.isArray(obj))||typeof obj===type:void 0!==obj},walk=function(o,f,n,s){s=s||this,o&&(n&&(o=o[n]),$_9tjm51ljh8lywbq.each(o,function(o,i){if(!1===f.call(s,o,i,n))return!1;walk(o,f,n,s)}))},$_ahowuxkjh8lywbj={trim:trim,isArray:$_9tjm51ljh8lywbq.isArray,is:is,toArray:$_9tjm51ljh8lywbq.toArray,makeMap:function(items,delim,map){var i;for(delim=delim||",","string"==typeof(items=items||[])&&(items=items.split(delim)),map=map||{},i=items.length;i--;)map[items[i]]={};return map},each:$_9tjm51ljh8lywbq.each,map:$_9tjm51ljh8lywbq.map,grep:$_9tjm51ljh8lywbq.filter,inArray:$_9tjm51ljh8lywbq.indexOf,hasOwn:function(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)},extend:function(obj,ext){for(var i,l,name,x=[],_i=2;_i<arguments.length;_i++)x[_i-2]=arguments[_i];var value,args=arguments;for(i=1,l=args.length;i<l;i++)for(name in ext=args[i])ext.hasOwnProperty(name)&&void 0!==(value=ext[name])&&(obj[name]=value);return obj},create:function(s,p,root){var sp,ns,cn,scn,c,de=0;if(s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s),cn=s[3].match(/(^|\.)(\w+)$/i)[2],!(ns=this.createNS(s[3].replace(/\.\w+$/,""),root))[cn]){if("static"===s[2])return ns[cn]=p,void(this.onCreate&&this.onCreate(s[2],s[3],ns[cn]));p[cn]||(p[cn]=function(){},de=1),ns[cn]=p[cn],this.extend(ns[cn].prototype,p),s[5]&&(sp=this.resolve(s[5]).prototype,scn=s[5].match(/\.(\w+)$/i)[1],c=ns[cn],ns[cn]=de?function(){return sp[scn].apply(this,arguments)}:function(){return this.parent=sp[scn],c.apply(this,arguments)},ns[cn].prototype[cn]=ns[cn],this.each(sp,function(f,n){ns[cn].prototype[n]=sp[n]}),this.each(p,function(f,n){sp[n]?ns[cn].prototype[n]=function(){return this.parent=sp[n],f.apply(this,arguments)}:n!==cn&&(ns[cn].prototype[n]=f)})),this.each(p.static,function(f,n){ns[cn][n]=f})}},walk:walk,createNS:function(n,o){var i,v;for(o=o||window,n=n.split("."),i=0;i<n.length;i++)o[v=n[i]]||(o[v]={}),o=o[v];return o},resolve:function(n,o){var i,l;for(o=o||window,i=0,l=(n=n.split(".")).length;i<l&&(o=o[n[i]]);i++);return o},explode:function(s,d){return!s||is(s,"array")?s:$_9tjm51ljh8lywbq.map(s.split(d||","),trim)},_addCacheSuffix:function(url){var cacheSuffix=$_9bpim8ajh8lyw68.cacheSuffix;return cacheSuffix&&(url+=(-1===url.indexOf("?")?"?":"&")+cacheSuffix),url}},doc=document,push$2=Array.prototype.push,slice$2=Array.prototype.slice,rquickExpr$1=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Event=EventUtils.Event,skipUniques=$_ahowuxkjh8lywbj.makeMap("children,contents,next,prev"),isDefined=function(obj){return void 0!==obj},isString=function(obj){return"string"==typeof obj},createFragment=function(html,fragDoc){var frag,node,container;for(container=(fragDoc=fragDoc||doc).createElement("div"),frag=fragDoc.createDocumentFragment(),container.innerHTML=html;node=container.firstChild;)frag.appendChild(node);return frag},domManipulate=function(targetNodes,sourceItem,callback,reverse){var i;if(isString(sourceItem))sourceItem=createFragment(sourceItem,getElementDocument(targetNodes[0]));else if(sourceItem.length&&!sourceItem.nodeType){if(sourceItem=DomQuery.makeArray(sourceItem),reverse)for(i=sourceItem.length-1;0<=i;i--)domManipulate(targetNodes,sourceItem[i],callback,reverse);else for(i=0;i<sourceItem.length;i++)domManipulate(targetNodes,sourceItem[i],callback,reverse);return targetNodes}if(sourceItem.nodeType)for(i=targetNodes.length;i--;)callback.call(targetNodes[i],sourceItem);return targetNodes},hasClass=function(node,className){return node&&className&&-1!==(" "+node.className+" ").indexOf(" "+className+" ")},wrap=function(elements,wrapper,all){var lastParent,newWrapper;return wrapper=DomQuery(wrapper)[0],elements.each(function(){all&&lastParent===this.parentNode||(lastParent=this.parentNode,newWrapper=wrapper.cloneNode(!1),this.parentNode.insertBefore(newWrapper,this)),newWrapper.appendChild(this)}),elements},numericCssMap=$_ahowuxkjh8lywbj.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),booleanMap=$_ahowuxkjh8lywbj.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),propFix={for:"htmlFor",class:"className",readonly:"readOnly"},cssFix={float:"cssFloat"},attrHooks={},cssHooks={},DomQuery=function(selector,context){return new DomQuery.fn.init(selector,context)},whiteSpaceRegExp$1=/^\s*|\s*$/g,trim$1=function(str){return null==str?"":(""+str).replace(whiteSpaceRegExp$1,"")},each$2=function(obj,callback){var length,key,i,value;if(obj)if(void 0===(length=obj.length)){for(key in obj)if(obj.hasOwnProperty(key)&&(value=obj[key],!1===callback.call(value,key,value)))break}else for(i=0;i<length&&(value=obj[i],!1!==callback.call(value,i,value));i++);return obj},grep=function(array,callback){var out=[];return each$2(array,function(i,item){callback(item,i)&&out.push(item)}),out},getElementDocument=function(element){return element?9===element.nodeType?element:element.ownerDocument:doc};DomQuery.fn=DomQuery.prototype={constructor:DomQuery,selector:"",context:null,length:0,init:function(selector,context){var match,node;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if(context&&context.nodeType)this.context=context;else{if(context)return DomQuery(selector).attr(context);this.context=context=document}if(isString(selector)){if(!(match="<"===(this.selector=selector).charAt(0)&&">"===selector.charAt(selector.length-1)&&3<=selector.length?[null,selector,null]:rquickExpr$1.exec(selector)))return DomQuery(context).find(selector);if(match[1])for(node=createFragment(selector,getElementDocument(context)).firstChild;node;)push$2.call(this,node),node=node.nextSibling;else{if(!(node=getElementDocument(context).getElementById(match[2])))return this;if(node.id!==match[2])return this.find(selector);this.length=1,this[0]=node}}else this.add(selector,!1);return this},toArray:function(){return $_ahowuxkjh8lywbj.toArray(this)},add:function(items,sort){var nodes,i;if(isString(items))return this.add(DomQuery(items));if(!1!==sort)for(nodes=DomQuery.unique(this.toArray().concat(DomQuery.makeArray(items))),this.length=nodes.length,i=0;i<nodes.length;i++)this[i]=nodes[i];else push$2.apply(this,DomQuery.makeArray(items));return this},attr:function(name,value){var hook,self=this;if("object"==typeof name)each$2(name,function(name,value){self.attr(name,value)});else{if(!isDefined(value)){if(self[0]&&1===self[0].nodeType){if((hook=attrHooks[name])&&hook.get)return hook.get(self[0],name);if(booleanMap[name])return self.prop(name)?name:void 0;null===(value=self[0].getAttribute(name,2))&&(value=void 0)}return value}this.each(function(){var hook;if(1===this.nodeType){if((hook=attrHooks[name])&&hook.set)return void hook.set(this,value);null===value?this.removeAttribute(name,2):this.setAttribute(name,value,2)}})}return self},removeAttr:function(name){return this.attr(name,null)},prop:function(name,value){var self=this;if("object"==typeof(name=propFix[name]||name))each$2(name,function(name,value){self.prop(name,value)});else{if(!isDefined(value))return self[0]&&self[0].nodeType&&name in self[0]?self[0][name]:value;this.each(function(){1===this.nodeType&&(this[name]=value)})}return self},css:function(name,value){var elm,hook,self=this,camel=function(name){return name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()})},dashed=function(name){return name.replace(/[A-Z]/g,function(a){return"-"+a})};if("object"==typeof name)each$2(name,function(name,value){self.css(name,value)});else if(isDefined(value))name=camel(name),"number"!=typeof value||numericCssMap[name]||(value=value.toString()+"px"),self.each(function(){var style=this.style;if((hook=cssHooks[name])&&hook.set)hook.set(this,value);else{try{this.style[cssFix[name]||name]=value}catch(ex){}null!==value&&""!==value||(style.removeProperty?style.removeProperty(dashed(name)):style.removeAttribute(name))}});else{if(elm=self[0],(hook=cssHooks[name])&&hook.get)return hook.get(elm);if(!elm.ownerDocument.defaultView)return elm.currentStyle?elm.currentStyle[camel(name)]:"";try{return elm.ownerDocument.defaultView.getComputedStyle(elm,null).getPropertyValue(dashed(name))}catch(ex){return}}return self},remove:function(){for(var node,i=this.length;i--;)node=this[i],Event.clean(node),node.parentNode&&node.parentNode.removeChild(node);return this},empty:function(){for(var node,i=this.length;i--;)for(node=this[i];node.firstChild;)node.removeChild(node.firstChild);return this},html:function(value){var i,self=this;if(isDefined(value)){i=self.length;try{for(;i--;)self[i].innerHTML=value}catch(ex){DomQuery(self[i]).empty().append(value)}return self}return self[0]?self[0].innerHTML:""},text:function(value){var i;if(isDefined(value)){for(i=this.length;i--;)"innerText"in this[i]?this[i].innerText=value:this[0].textContent=value;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(node)})},prepend:function(){return domManipulate(this,arguments,function(node){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(node,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?domManipulate(this,arguments,function(node){this.parentNode.insertBefore(node,this)}):this},after:function(){return this[0]&&this[0].parentNode?domManipulate(this,arguments,function(node){this.parentNode.insertBefore(node,this.nextSibling)},!0):this},appendTo:function(val){return DomQuery(val).append(this),this},prependTo:function(val){return DomQuery(val).prepend(this),this},replaceWith:function(content){return this.before(content).remove()},wrap:function(content){return wrap(this,content)},wrapAll:function(content){return wrap(this,content,!0)},wrapInner:function(content){return this.each(function(){DomQuery(this).contents().wrapAll(content)}),this},unwrap:function(){return this.parent().each(function(){DomQuery(this).replaceWith(this.childNodes)})},clone:function(){var result=[];return this.each(function(){result.push(this.cloneNode(!0))}),DomQuery(result)},addClass:function(className){return this.toggleClass(className,!0)},removeClass:function(className){return this.toggleClass(className,!1)},toggleClass:function(className,state){var self=this;return"string"!=typeof className||(-1!==className.indexOf(" ")?each$2(className.split(" "),function(){self.toggleClass(this,state)}):self.each(function(index,node){var existingClassName,classState;(classState=hasClass(node,className))!==state&&(existingClassName=node.className,classState?node.className=trim$1((" "+existingClassName+" ").replace(" "+className+" "," ")):node.className+=existingClassName?" "+className:className)})),self},hasClass:function(className){return hasClass(this[0],className)},each:function(callback){return each$2(this,callback)},on:function(name,callback){return this.each(function(){Event.bind(this,name,callback)})},off:function(name,callback){return this.each(function(){Event.unbind(this,name,callback)})},trigger:function(name){return this.each(function(){"object"==typeof name?Event.fire(this,name.type,name):Event.fire(this,name)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new DomQuery(slice$2.apply(this,arguments))},eq:function(index){return-1===index?this.slice(index):this.slice(index,+index+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(selector){var i,l,ret=[];for(i=0,l=this.length;i<l;i++)DomQuery.find(selector,this[i],ret);return DomQuery(ret)},filter:function(selector){return DomQuery("function"==typeof selector?grep(this.toArray(),function(item,i){return selector(i,item)}):DomQuery.filter(selector,this.toArray()))},closest:function(selector){var result=[];return selector instanceof DomQuery&&(selector=selector[0]),this.each(function(i,node){for(;node;){if("string"==typeof selector&&DomQuery(node).is(selector)){result.push(node);break}if(node===selector){result.push(node);break}node=node.parentNode}}),DomQuery(result)},offset:function(offset){var elm,doc,docElm,pos,x=0,y=0;return offset?this.css(offset):((elm=this[0])&&(docElm=(doc=elm.ownerDocument).documentElement,elm.getBoundingClientRect&&(x=(pos=elm.getBoundingClientRect()).left+(docElm.scrollLeft||doc.body.scrollLeft)-docElm.clientLeft,y=pos.top+(docElm.scrollTop||doc.body.scrollTop)-docElm.clientTop)),{left:x,top:y})},push:push$2,sort:[].sort,splice:[].splice},$_ahowuxkjh8lywbj.extend(DomQuery,{extend:$_ahowuxkjh8lywbj.extend,makeArray:function(object){return(obj=object)&&obj===obj.window||object.nodeType?[object]:$_ahowuxkjh8lywbj.toArray(object);var obj},inArray:function(item,array){var i;if(array.indexOf)return array.indexOf(item);for(i=array.length;i--;)if(array[i]===item)return i;return-1},isArray:$_ahowuxkjh8lywbj.isArray,each:each$2,trim:trim$1,grep:grep,find:Sizzle,expr:Sizzle.selectors,unique:Sizzle.uniqueSort,text:Sizzle.getText,contains:Sizzle.contains,filter:function(expr,elems,not){var i=elems.length;for(not&&(expr=":not("+expr+")");i--;)1!==elems[i].nodeType&&elems.splice(i,1);return elems=1===elems.length?DomQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:DomQuery.find.matches(expr,elems)}});var dir=function(el,prop,until){var matched=[],cur=el[prop];for("string"!=typeof until&&until instanceof DomQuery&&(until=until[0]);cur&&9!==cur.nodeType;){if(void 0!==until){if(cur===until)break;if("string"==typeof until&&DomQuery(cur).is(until))break}1===cur.nodeType&&matched.push(cur),cur=cur[prop]}return matched},sibling=function(node,siblingName,nodeType,until){var result=[];for(until instanceof DomQuery&&(until=until[0]);node;node=node[siblingName])if(!nodeType||node.nodeType===nodeType){if(void 0!==until){if(node===until)break;if("string"==typeof until&&DomQuery(node).is(until))break}result.push(node)}return result},firstSibling=function(node,siblingName,nodeType){for(node=node[siblingName];node;node=node[siblingName])if(node.nodeType===nodeType)return node;return null};each$2({parent:function(node){var parent=node.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(node){return dir(node,"parentNode")},next:function(node){return firstSibling(node,"nextSibling",1)},prev:function(node){return firstSibling(node,"previousSibling",1)},children:function(node){return sibling(node.firstChild,"nextSibling",1)},contents:function(node){return $_ahowuxkjh8lywbj.toArray(("iframe"===node.nodeName?node.contentDocument||node.contentWindow.document:node).childNodes)}},function(name,fn){DomQuery.fn[name]=function(selector){var result=[];return this.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),1<this.length&&(skipUniques[name]||(result=DomQuery.unique(result)),0===name.indexOf("parents")&&(result=result.reverse())),result=DomQuery(result),selector?result.filter(selector):result}}),each$2({parentsUntil:function(node,until){return dir(node,"parentNode",until)},nextUntil:function(node,until){return sibling(node,"nextSibling",1,until).slice(1)},prevUntil:function(node,until){return sibling(node,"previousSibling",1,until).slice(1)}},function(name,fn){DomQuery.fn[name]=function(selector,filter){var result=[];return this.each(function(){var nodes=fn.call(result,this,selector,result);nodes&&(DomQuery.isArray(nodes)?result.push.apply(result,nodes):result.push(nodes))}),1<this.length&&(result=DomQuery.unique(result),0!==name.indexOf("parents")&&"prevUntil"!==name||(result=result.reverse())),result=DomQuery(result),filter?result.filter(filter):result}}),DomQuery.fn.is=function(selector){return!!selector&&0<this.filter(selector).length},DomQuery.fn.init.prototype=DomQuery.fn,DomQuery.overrideDefaults=function(callback){var defaults,sub=function(selector,context){return defaults=defaults||callback(),0===arguments.length&&(selector=defaults.element),context||(context=defaults.context),new sub.fn.init(selector,context)};return DomQuery.extend(sub,this),sub};var appendHooks=function(targetHooks,prop,hooks){each$2(hooks,function(name,func){targetHooks[name]=targetHooks[name]||{},targetHooks[name][prop]=func})};$_9bpim8ajh8lyw68.ie&&$_9bpim8ajh8lyw68.ie<8&&(appendHooks(attrHooks,"get",{maxlength:function(elm){var value=elm.maxLength;if(2147483647!==value)return value},size:function(elm){var value=elm.size;if(20!==value)return value},class:function(elm){return elm.className},style:function(elm){var value=elm.style.cssText;if(0!==value.length)return value}}),appendHooks(attrHooks,"set",{class:function(elm,value){elm.className=value},style:function(elm,value){elm.style.cssText=value}})),$_9bpim8ajh8lyw68.ie&&$_9bpim8ajh8lyw68.ie<9&&(cssFix.float="styleFloat",appendHooks(cssHooks,"set",{opacity:function(elm,value){var style=elm.style;null===value||""===value?style.removeAttribute("filter"):(style.zoom=1,style.filter="alpha(opacity="+100*value+")")}})),DomQuery.attrHooks=attrHooks,DomQuery.cssHooks=cssHooks;var fastKeys,$_bbi2igojh8lywc9_cached=function(f){var r,called=!1;return function(){return called||(called=!0,r=f.apply(null,arguments)),r}},unknown=function(){return nu(0,0)},nu=function(major,minor){return{major:major,minor:minor}},$_a84zfnrjh8lywch={nu:nu,detect:function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown():function(regexes,agent){var r=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}}(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu(group(1),group(2))}(versionRegexes,cleanedAgent)},unknown:unknown},isBrowser=function(name,current){return function(){return current===name}},nu$1=function(info){var current=info.current;return{current:current,version:info.version,isEdge:isBrowser("Edge",current),isChrome:isBrowser("Chrome",current),isIE:isBrowser("IE",current),isOpera:isBrowser("Opera",current),isFirefox:isBrowser("Firefox",current),isSafari:isBrowser("Safari",current)}},$_dckbfzqjh8lywcd={unknown:function(){return nu$1({current:void 0,version:$_a84zfnrjh8lywch.unknown()})},nu:nu$1,edge:$_eqpqvr6jh8lyw3s.constant("Edge"),chrome:$_eqpqvr6jh8lyw3s.constant("Chrome"),ie:$_eqpqvr6jh8lyw3s.constant("IE"),opera:$_eqpqvr6jh8lyw3s.constant("Opera"),firefox:$_eqpqvr6jh8lyw3s.constant("Firefox"),safari:$_eqpqvr6jh8lyw3s.constant("Safari")},isOS=function(name,current){return function(){return current===name}},nu$2=function(info){var current=info.current;return{current:current,version:info.version,isWindows:isOS("Windows",current),isiOS:isOS("iOS",current),isAndroid:isOS("Android",current),isOSX:isOS("OSX",current),isLinux:isOS("Linux",current),isSolaris:isOS("Solaris",current),isFreeBSD:isOS("FreeBSD",current)}},$_dixfehsjh8lywcw={unknown:function(){return nu$2({current:void 0,version:$_a84zfnrjh8lywch.unknown()})},nu:nu$2,windows:$_eqpqvr6jh8lyw3s.constant("Windows"),ios:$_eqpqvr6jh8lyw3s.constant("iOS"),android:$_eqpqvr6jh8lyw3s.constant("Android"),linux:$_eqpqvr6jh8lyw3s.constant("Linux"),osx:$_eqpqvr6jh8lyw3s.constant("OSX"),solaris:$_eqpqvr6jh8lyw3s.constant("Solaris"),freebsd:$_eqpqvr6jh8lyw3s.constant("FreeBSD")},detect$1=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return $_5wjzy24jh8lyw2t.find(candidates,function(candidate){return candidate.search(agent)})},$_deu818ujh8lywd4_detectBrowser=function(browsers,userAgent){return detect$1(browsers,userAgent).map(function(browser){var version=$_a84zfnrjh8lywch.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version}})},$_deu818ujh8lywd4_detectOs=function(oses,userAgent){return detect$1(oses,userAgent).map(function(os){var version=$_a84zfnrjh8lywch.detect(os.versionRegexes,userAgent);return{current:os.name,version:version}})},$_4w196awjh8lywdj_contains=function(str,substr){return-1!==str.indexOf(substr)},$_4w196awjh8lywdj_trim=function(str){return str.replace(/^\s+|\s+$/g,"")},normalVersionRegex=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(target){return function(uastring){return $_4w196awjh8lywdj_contains(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return $_4w196awjh8lywdj_contains(uastring,"edge/")&&$_4w196awjh8lywdj_contains(uastring,"chrome")&&$_4w196awjh8lywdj_contains(uastring,"safari")&&$_4w196awjh8lywdj_contains(uastring,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,normalVersionRegex],search:function(uastring){return $_4w196awjh8lywdj_contains(uastring,"chrome")&&!$_4w196awjh8lywdj_contains(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_4w196awjh8lywdj_contains(uastring,"msie")||$_4w196awjh8lywdj_contains(uastring,"trident")}},{name:"Opera",versionRegexes:[normalVersionRegex,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return($_4w196awjh8lywdj_contains(uastring,"safari")||$_4w196awjh8lywdj_contains(uastring,"mobile/"))&&$_4w196awjh8lywdj_contains(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return $_4w196awjh8lywdj_contains(uastring,"iphone")||$_4w196awjh8lywdj_contains(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]}],$_8gakxrvjh8lywdb={browsers:$_eqpqvr6jh8lyw3s.constant(browsers),oses:$_eqpqvr6jh8lyw3s.constant(oses)},$_3cj09epjh8lywcb_detect=function(userAgent){var browsers=$_8gakxrvjh8lywdb.browsers(),oses=$_8gakxrvjh8lywdb.oses(),browser=$_deu818ujh8lywd4_detectBrowser(browsers,userAgent).fold($_dckbfzqjh8lywcd.unknown,$_dckbfzqjh8lywcd.nu),os=$_deu818ujh8lywd4_detectOs(oses,userAgent).fold($_dixfehsjh8lywcw.unknown,$_dixfehsjh8lywcw.nu),deviceType=function(os,browser,userAgent){var isiPad=os.isiOS()&&!0===/ipad/i.test(userAgent),isiPhone=os.isiOS()&&!isiPad,isAndroid3=os.isAndroid()&&3===os.version.major,isAndroid4=os.isAndroid()&&4===os.version.major,isTablet=isiPad||isAndroid3||isAndroid4&&!0===/mobile/i.test(userAgent),isTouch=os.isiOS()||os.isAndroid(),isPhone=isTouch&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&!1===/safari/i.test(userAgent);return{isiPad:$_eqpqvr6jh8lyw3s.constant(isiPad),isiPhone:$_eqpqvr6jh8lyw3s.constant(isiPhone),isTablet:$_eqpqvr6jh8lyw3s.constant(isTablet),isPhone:$_eqpqvr6jh8lyw3s.constant(isPhone),isTouch:$_eqpqvr6jh8lyw3s.constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:$_eqpqvr6jh8lyw3s.constant(iOSwebview)}}(os,browser,userAgent);return{browser:browser,os:os,deviceType:deviceType}},$_9hkktfnjh8lywc6={detect:$_bbi2igojh8lywc9_cached(function(){var userAgent=navigator.userAgent;return $_3cj09epjh8lywcb_detect(userAgent)})},fromDom=function(node){if(null==node)throw new Error("Node cannot be null or undefined");return{dom:$_eqpqvr6jh8lyw3s.constant(node)}},$_cgttw3zjh8lywdq={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||1<div.childNodes.length)throw console.error("HTML does not have a single root node",html),"HTML must have a single root node";return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom:fromDom,fromPoint:function(doc,x,y){return Option.from(doc.dom().elementFromPoint(x,y)).map(fromDom)}},$_2ctxk11jh8lywdy_COMMENT=8,$_2ctxk11jh8lywdy_DOCUMENT=9,$_2ctxk11jh8lywdy_ELEMENT=1,$_2ctxk11jh8lywdy_TEXT=3,name$1=function(element){return element.dom().nodeName.toLowerCase()},type=function(element){return element.dom().nodeType},isType$1=function(t){return function(element){return type(element)===t}},isElement=isType$1($_2ctxk11jh8lywdy_ELEMENT),isText=isType$1($_2ctxk11jh8lywdy_TEXT),isDocument=isType$1($_2ctxk11jh8lywdy_DOCUMENT),$_7j1jt210jh8lywdx={name:name$1,type:type,value:function(element){return element.dom().nodeValue},isElement:isElement,isText:isText,isDocument:isDocument,isComment:function(element){return type(element)===$_2ctxk11jh8lywdy_COMMENT||"#comment"===name$1(element)}},keys=void 0===(fastKeys=Object.keys)?function(o){var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(i);return r}:fastKeys,each$3=function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i,obj)}},tupleMap=function(obj,f){var r={};return each$3(obj,function(x,i){var tuple=f(x,i,obj);r[tuple.k]=tuple.v}),r},mapToArray=function(obj,f){var r=[];return each$3(obj,function(value,name){r.push(f(value,name))}),r},values=function(obj){return mapToArray(obj,function(v){return v})},$_g63v2c13jh8lywej={bifilter:function(obj,pred){var t={},f={};return each$3(obj,function(x,i){(pred(x,i)?t:f)[i]=x}),{t:t,f:f}},each:each$3,map:function(obj,f){return tupleMap(obj,function(x,i,obj){return{k:i,v:f(x,i,obj)}})},mapToArray:mapToArray,tupleMap:tupleMap,find:function(obj,pred){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k],x=obj[i];if(pred(x,i,obj))return Option.some(x)}return Option.none()},keys:keys,values:values,size:function(obj){return values(obj).length}},rawSet=function(dom,key,value){if(!($_dp4g6d7jh8lyw3y.isString(value)||$_dp4g6d7jh8lyw3y.isBoolean(value)||$_dp4g6d7jh8lyw3y.isNumber(value)))throw console.error("Invalid call to Attr.set. Key ",key,":: Value ",value,":: Element ",dom),new Error("Attribute value was not simple");dom.setAttribute(key,value+"")},set=function(element,key,value){rawSet(element.dom(),key,value)},get=function(element,key){var v=element.dom().getAttribute(key);return null===v?void 0:v},has=function(element,key){var dom=element.dom();return!(!dom||!dom.hasAttribute)&&dom.hasAttribute(key)},$_3da62i14jh8lyweo={clone:function(element){return $_5wjzy24jh8lyw2t.foldl(element.dom().attributes,function(acc,attr){return acc[attr.name]=attr.value,acc},{})},set:set,setAll:function(element,attrs){var dom=element.dom();$_g63v2c13jh8lywej.each(attrs,function(v,k){rawSet(dom,k,v)})},get:get,has:has,remove:function(element,key){element.dom().removeAttribute(key)},hasNone:function(element){var attrs=element.dom().attributes;return null==attrs||0===attrs.length},transfer:function(source,destination,attrs){$_7j1jt210jh8lywdx.isElement(source)&&$_7j1jt210jh8lywdx.isElement(destination)&&$_5wjzy24jh8lyw2t.each(attrs,function(attr){!function(source,destination,attr){has(source,attr)&&!has(destination,attr)&&set(destination,attr,get(source,attr))}(source,destination,attr)})}},body=$_bbi2igojh8lywc9_cached(function(){return getBody($_cgttw3zjh8lywdq.fromDom(document))}),getBody=function(doc){var body=doc.dom().body;if(null==body)throw"Body is not available yet";return $_cgttw3zjh8lywdq.fromDom(body)},$_boa99a15jh8lywey={body:body,getBody:getBody,inBody:function(element){var dom=$_7j1jt210jh8lywdx.isText(element)?element.dom().parentNode:element.dom();return null!=dom&&dom.ownerDocument.body.contains(dom)}},$_fjd24o16jh8lywfc_isSupported=function(dom){return void 0!==dom.style},internalSet=function(dom,property,value){if(!$_dp4g6d7jh8lyw3y.isString(value))throw console.error("Invalid call to CSS.set. Property ",property,":: Value ",value,":: Element ",dom),new Error("CSS value must be a string: "+value);$_fjd24o16jh8lywfc_isSupported(dom)&&dom.style.setProperty(property,value)},getUnsafeProperty=function(dom,property){return $_fjd24o16jh8lywfc_isSupported(dom)?dom.style.getPropertyValue(property):""},getRaw=function(element,property){var dom=element.dom(),raw=getUnsafeProperty(dom,property);return Option.from(raw).filter(function(r){return 0<r.length})},$_36knnd12jh8lywe1_setAll=function(element,css){var dom=element.dom();$_g63v2c13jh8lywej.each(css,function(v,k){internalSet(dom,k,v)})},$_36knnd12jh8lywe1_get=function(element,property){var dom=element.dom(),r=window.getComputedStyle(dom).getPropertyValue(property),v=""!==r||$_boa99a15jh8lywey.inBody(element)?r:getUnsafeProperty(dom,property);return null===v?void 0:v},$_36knnd12jh8lywe1_getRaw=getRaw,sort$1=function(arr){return arr.slice(0).sort()},$_8ab5mm1bjh8lywg2_reqMessage=function(required,keys){throw new Error("All required keys ("+sort$1(required).join(", ")+") were not specified. Specified keys were: "+sort$1(keys).join(", ")+".")},$_8ab5mm1bjh8lywg2_unsuppMessage=function(unsupported){throw new Error("Unsupported keys for object: "+sort$1(unsupported).join(", "))},$_8ab5mm1bjh8lywg2_validateStrArr=function(label,array){if(!$_dp4g6d7jh8lyw3y.isArray(array))throw new Error("The "+label+" fields must be an array. Was: "+array+".");$_5wjzy24jh8lyw2t.each(array,function(a){if(!$_dp4g6d7jh8lyw3y.isString(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},$_8ab5mm1bjh8lywg2_checkDupes=function(everything){var sorted=sort$1(everything);$_5wjzy24jh8lyw2t.find(sorted,function(s,i){return i<sorted.length-1&&s===sorted[i+1]}).each(function(d){throw new Error("The field: "+d+" occurs more than once in the combined fields: ["+sorted.join(", ")+"].")})},$_4jz0ce18jh8lywft={immutable:function(){for(var fields=[],_i=0;_i<arguments.length;_i++)fields[_i]=arguments[_i];return function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];if(fields.length!==values.length)throw new Error('Wrong number of arguments to struct. Expected "['+fields.length+']", got '+values.length+" arguments");var struct={};return $_5wjzy24jh8lyw2t.each(fields,function(name,i){struct[name]=$_eqpqvr6jh8lyw3s.constant(values[i])}),struct}},immutableBag:function(required,optional){var everything=required.concat(optional);if(0===everything.length)throw new Error("You must specify at least one required or optional field.");return $_8ab5mm1bjh8lywg2_validateStrArr("required",required),$_8ab5mm1bjh8lywg2_validateStrArr("optional",optional),$_8ab5mm1bjh8lywg2_checkDupes(everything),function(obj){var keys=$_g63v2c13jh8lywej.keys(obj);$_5wjzy24jh8lyw2t.forall(required,function(req){return $_5wjzy24jh8lyw2t.contains(keys,req)})||$_8ab5mm1bjh8lywg2_reqMessage(required,keys);var unsupported=$_5wjzy24jh8lyw2t.filter(keys,function(key){return!$_5wjzy24jh8lyw2t.contains(everything,key)});0<unsupported.length&&$_8ab5mm1bjh8lywg2_unsuppMessage(unsupported);var r={};return $_5wjzy24jh8lyw2t.each(required,function(req){r[req]=$_eqpqvr6jh8lyw3s.constant(obj[req])}),$_5wjzy24jh8lyw2t.each(optional,function(opt){r[opt]=$_eqpqvr6jh8lyw3s.constant(Object.prototype.hasOwnProperty.call(obj,opt)?Option.some(obj[opt]):Option.none())}),r}}},$_42xx4d1cjh8lywg4_toArray=function(target,f){for(var r=[],recurse=function(e){return r.push(e),f(e)},cur=f(target);(cur=cur.bind(recurse)).isSome(););return r},node=function(){return $_99xmy7cjh8lyw6k.getOrDie("Node")},compareDocumentPosition=function(a,b,match){return 0!=(a.compareDocumentPosition(b)&match)},$_1zkvjk1ejh8lywgg_documentPositionContainedBy=function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_CONTAINED_BY)},ELEMENT=$_2ctxk11jh8lywdy_ELEMENT,DOCUMENT=$_2ctxk11jh8lywdy_DOCUMENT,bypassSelector=function(dom){return dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT||0===dom.childElementCount},$_5h4ipt1fjh8lywgi={all:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?[]:$_5wjzy24jh8lyw2t.map(base.querySelectorAll(selector),$_cgttw3zjh8lywdq.fromDom)},is:function(element,selector){var elem=element.dom();if(elem.nodeType!==ELEMENT)return!1;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},one:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?Option.none():Option.from(base.querySelector(selector)).map($_cgttw3zjh8lywdq.fromDom)}},eq=function(e1,e2){return e1.dom()===e2.dom()},contains$3=$_9hkktfnjh8lywc6.detect().browser.isIE()?function(e1,e2){return $_1zkvjk1ejh8lywgg_documentPositionContainedBy(e1.dom(),e2.dom())}:function(e1,e2){var d1=e1.dom(),d2=e2.dom();return d1!==d2&&d1.contains(d2)},$_5f6gpb1djh8lywg5={eq:eq,isEqualNode:function(e1,e2){return e1.dom().isEqualNode(e2.dom())},member:function(element,elements){return $_5wjzy24jh8lyw2t.exists(elements,$_eqpqvr6jh8lyw3s.curry(eq,element))},contains:contains$3,is:$_5h4ipt1fjh8lywgi.is},owner=function(element){return $_cgttw3zjh8lywdq.fromDom(element.dom().ownerDocument)},parent=function(element){var dom=element.dom();return Option.from(dom.parentNode).map($_cgttw3zjh8lywdq.fromDom)},prevSibling=function(element){var dom=element.dom();return Option.from(dom.previousSibling).map($_cgttw3zjh8lywdq.fromDom)},nextSibling=function(element){var dom=element.dom();return Option.from(dom.nextSibling).map($_cgttw3zjh8lywdq.fromDom)},children=function(element){var dom=element.dom();return $_5wjzy24jh8lyw2t.map(dom.childNodes,$_cgttw3zjh8lywdq.fromDom)},child=function(element,index){var children=element.dom().childNodes;return Option.from(children[index]).map($_cgttw3zjh8lywdq.fromDom)},spot=$_4jz0ce18jh8lywft.immutable("element","offset"),$_a43q0i17jh8lywfe={owner:owner,defaultView:function(element){var defaultView=element.dom().ownerDocument.defaultView;return $_cgttw3zjh8lywdq.fromDom(defaultView)},documentElement:function(element){var doc=owner(element);return $_cgttw3zjh8lywdq.fromDom(doc.dom().documentElement)},parent:parent,findIndex:function(element){return parent(element).bind(function(p){var kin=children(p);return $_5wjzy24jh8lyw2t.findIndex(kin,function(elem){return $_5f6gpb1djh8lywg5.eq(element,elem)})})},parents:function(element,isRoot){for(var stop=$_dp4g6d7jh8lyw3y.isFunction(isRoot)?isRoot:$_eqpqvr6jh8lyw3s.constant(!1),dom=element.dom(),ret=[];null!==dom.parentNode&&void 0!==dom.parentNode;){var rawParent=dom.parentNode,parent=$_cgttw3zjh8lywdq.fromDom(rawParent);if(ret.push(parent),!0===stop(parent))break;dom=rawParent}return ret},siblings:function(element){return parent(element).map(children).map(function(elements){return $_5wjzy24jh8lyw2t.filter(elements,function(x){return!$_5f6gpb1djh8lywg5.eq(element,x)})}).getOr([])},prevSibling:prevSibling,offsetParent:function(element){var dom=element.dom();return Option.from(dom.offsetParent).map($_cgttw3zjh8lywdq.fromDom)},prevSiblings:function(element){return $_5wjzy24jh8lyw2t.reverse($_42xx4d1cjh8lywg4_toArray(element,prevSibling))},nextSibling:nextSibling,nextSiblings:function(element){return $_42xx4d1cjh8lywg4_toArray(element,nextSibling)},children:children,child:child,firstChild:function(element){return child(element,0)},lastChild:function(element){return child(element,element.dom().childNodes.length-1)},childNodesCount:function(element){return element.dom().childNodes.length},hasChildNodes:function(element){return element.dom().hasChildNodes()},leaf:function(element,offset){var cs=children(element);return 0<cs.length&&offset<cs.length?spot(cs[offset],0):spot(element,offset)}},browser$1=$_9hkktfnjh8lywc6.detect().browser,firstElement=function(nodes){return $_5wjzy24jh8lyw2t.find(nodes,$_7j1jt210jh8lywdx.isElement)},$_6pe7rlmjh8lywbu={getPos:function(body,elm,rootElm){var offsetParent,pos,x=0,y=0,doc=body.ownerDocument;if(rootElm=rootElm||body,elm){if(rootElm===body&&elm.getBoundingClientRect&&"static"===$_36knnd12jh8lywe1_get($_cgttw3zjh8lywdq.fromDom(body),"position"))return{x:x=(pos=elm.getBoundingClientRect()).left+(doc.documentElement.scrollLeft||body.scrollLeft)-doc.documentElement.clientLeft,y:y=pos.top+(doc.documentElement.scrollTop||body.scrollTop)-doc.documentElement.clientTop};for(offsetParent=elm;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;for(offsetParent=elm.parentNode;offsetParent&&offsetParent!==rootElm&&offsetParent.nodeType;)x-=offsetParent.scrollLeft||0,y-=offsetParent.scrollTop||0,offsetParent=offsetParent.parentNode;y+=function(elm){return browser$1.isFirefox()&&"table"===$_7j1jt210jh8lywdx.name(elm)?firstElement($_a43q0i17jh8lywfe.children(elm)).filter(function(elm){return"caption"===$_7j1jt210jh8lywdx.name(elm)}).bind(function(caption){return firstElement($_a43q0i17jh8lywfe.nextSiblings(caption)).map(function(body){var bodyTop=body.dom().offsetTop,captionTop=caption.dom().offsetTop,captionHeight=caption.dom().offsetHeight;return bodyTop<=captionTop?-captionHeight:0})}).getOr(0):0}($_cgttw3zjh8lywdq.fromDom(elm))}return{x:x,y:y}}},nu$3=function(baseFn){var data=Option.none(),callbacks=[],get=function(nCallback){isReady()?call(nCallback):callbacks.push(nCallback)},isReady=function(){return data.isSome()},run=function(cbs){$_5wjzy24jh8lyw2t.each(cbs,call)},call=function(cb){data.each(function(x){setTimeout(function(){cb(x)},0)})};return baseFn(function(x){data=Option.some(x),run(callbacks),callbacks=[]}),{get:get,map:function(f){return nu$3(function(nCallback){get(function(data){nCallback(f(data))})})},isReady:isReady}},LazyValue={nu:nu$3,pure:function(a){return nu$3(function(callback){callback(a)})}},$_fhsj121jjh8lywh5_bounce=function(f){return function(){var args=Array.prototype.slice.call(arguments),me=this;setTimeout(function(){f.apply(me,args)},0)}},nu$4=function(baseFn){var get=function(callback){baseFn($_fhsj121jjh8lywh5_bounce(callback))};return{map:function(fab){return nu$4(function(callback){get(function(a){var value=fab(a);callback(value)})})},bind:function(aFutureB){return nu$4(function(callback){get(function(a){aFutureB(a).get(callback)})})},anonBind:function(futureB){return nu$4(function(callback){get(function(a){futureB.get(callback)})})},toLazy:function(){return LazyValue.nu(get)},get:get}},Future={nu:nu$4,pure:function(a){return nu$4(function(callback){callback(a)})}},$_8nbwrm1ljh8lywh8_par=function(asyncValues,nu){return nu(function(callback){var r=[],count=0;0===asyncValues.length?callback([]):$_5wjzy24jh8lyw2t.each(asyncValues,function(asyncValue,i){asyncValue.get(function(i){return function(value){r[i]=value,++count>=asyncValues.length&&callback(r)}}(i))})})},par$1=function(futures){return $_8nbwrm1ljh8lywh8_par(futures,Future.nu)},$_5lpsz51kjh8lywh6={par:par$1,mapM:function(array,fn){var futures=$_5wjzy24jh8lyw2t.map(array,fn);return par$1(futures)},compose:function(f,g){return function(a){return g(a).bind(f)}}},value$1=function(o){return{is:function(v){return o===v},isValue:$_eqpqvr6jh8lyw3s.always,isError:$_eqpqvr6jh8lyw3s.never,getOr:$_eqpqvr6jh8lyw3s.constant(o),getOrThunk:$_eqpqvr6jh8lyw3s.constant(o),getOrDie:$_eqpqvr6jh8lyw3s.constant(o),or:function(opt){return value$1(o)},orThunk:function(f){return value$1(o)},fold:function(_,onValue){return onValue(o)},map:function(f){return value$1(f(o))},each:function(f){f(o)},bind:function(f){return f(o)},exists:function(f){return f(o)},forall:function(f){return f(o)},toOption:function(){return Option.some(o)}}},error=function(message){return{is:$_eqpqvr6jh8lyw3s.never,isValue:$_eqpqvr6jh8lyw3s.never,isError:$_eqpqvr6jh8lyw3s.always,getOr:$_eqpqvr6jh8lyw3s.identity,getOrThunk:function(f){return f()},getOrDie:function(){return $_eqpqvr6jh8lyw3s.die(String(message))()},or:function(opt){return opt},orThunk:function(f){return f()},fold:function(onError,_){return onError(message)},map:function(f){return error(message)},each:$_eqpqvr6jh8lyw3s.noop,bind:function(f){return error(message)},exists:$_eqpqvr6jh8lyw3s.never,forall:$_eqpqvr6jh8lyw3s.always,toOption:Option.none}},Result={value:value$1,error:error};function TreeWalker(startNode,rootNode){var node=startNode,findSibling=function(node,startName,siblingName,shallow){var sibling,parent;if(node){if(!shallow&&node[startName])return node[startName];if(node!==rootNode){if(sibling=node[siblingName])return sibling;for(parent=node.parentNode;parent&&parent!==rootNode;parent=parent.parentNode)if(sibling=parent[siblingName])return sibling}}};this.current=function(){return node},this.next=function(shallow){return node=findSibling(node,"firstChild","nextSibling",shallow)},this.prev=function(shallow){return node=findSibling(node,"lastChild","previousSibling",shallow)},this.prev2=function(shallow){return node=function(node,startName,siblingName,shallow){var sibling,parent,child;if(node){if(sibling=node[siblingName],rootNode&&sibling===rootNode)return;if(sibling){if(!shallow)for(child=sibling[startName];child;child=child[startName])if(!child[startName])return child;return sibling}if((parent=node.parentNode)&&parent!==rootNode)return parent}}(node,"lastChild","previousSibling",shallow)}}var namedEntities,baseEntities,reverseEntities,lazyLookup=function(items){var lookup;return function(node){return(lookup=lookup||$_5wjzy24jh8lyw2t.mapToObject(items,$_eqpqvr6jh8lyw3s.constant(!0))).hasOwnProperty($_7j1jt210jh8lywdx.name(node))}},isHeading=lazyLookup(["h1","h2","h3","h4","h5","h6"]),isBlock=lazyLookup(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),isInline=function(node){return $_7j1jt210jh8lywdx.isElement(node)&&!isBlock(node)},isBr=function(node){return $_7j1jt210jh8lywdx.isElement(node)&&"br"===$_7j1jt210jh8lywdx.name(node)},isTextBlock=lazyLookup(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),isList=lazyLookup(["ul","ol","dl"]),isListItem=lazyLookup(["li","dd","dt"]),isVoid=lazyLookup(["area","base","basefont","br","col","frame","hr","img","input","isindex","link","meta","param","embed","source","wbr","track"]),isTableSection=lazyLookup(["thead","tbody","tfoot"]),isTableCell=lazyLookup(["td","th"]),isWsPreserveElement=lazyLookup(["pre","script","textarea","style"]),isNodeType=function(type){return function(node){return!!node&&node.nodeType===type}},isElement$1=isNodeType(1),matchNodeNames=function(names){var items=names.toLowerCase().split(" ");return function(node){var i,name;if(node&&node.nodeType)for(name=node.nodeName.toLowerCase(),i=0;i<items.length;i++)if(name===items[i])return!0;return!1}},hasContentEditableState=function(value){return function(node){if(isElement$1(node)){if(node.contentEditable===value)return!0;if(node.getAttribute("data-mce-contenteditable")===value)return!0}return!1}},isText$1=isNodeType(3),isComment$1=isNodeType(8),isDocument$1=isNodeType(9),isBr$1=matchNodeNames("br"),isContentEditableTrue=hasContentEditableState("true"),isContentEditableFalse=hasContentEditableState("false"),$_5oonaz1qjh8lywhz={isText:isText$1,isElement:isElement$1,isComment:isComment$1,isDocument:isDocument$1,isBr:isBr$1,isContentEditableTrue:isContentEditableTrue,isContentEditableFalse:isContentEditableFalse,matchNodeNames:matchNodeNames,hasPropValue:function(propName,propValue){return function(node){return isElement$1(node)&&node[propName]===propValue}},hasAttribute:function(attrName,attrValue){return function(node){return isElement$1(node)&&node.hasAttribute(attrName)}},hasAttributeValue:function(attrName,attrValue){return function(node){return isElement$1(node)&&node.getAttribute(attrName)===attrValue}},matchStyleValues:function(name,values){var items=values.toLowerCase().split(" ");return function(node){var i;if(isElement$1(node))for(i=0;i<items.length;i++){var computed=node.ownerDocument.defaultView.getComputedStyle(node,null);if((computed?computed.getPropertyValue(name):null)===items[i])return!0}return!1}},isBogus:function(node){return isElement$1(node)&&node.hasAttribute("data-mce-bogus")},isBogusAll:function(node){return isElement$1(node)&&"all"===node.getAttribute("data-mce-bogus")},isTable:function(node){return isElement$1(node)&&"TABLE"===node.tagName}},isBookmarkNode=function(node){return node&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")},trimNode=function(dom,node){var i,children=node.childNodes;if(!$_5oonaz1qjh8lywhz.isElement(node)||!isBookmarkNode(node)){for(i=children.length-1;0<=i;i--)trimNode(dom,children[i]);if(!1===$_5oonaz1qjh8lywhz.isDocument(node)){if($_5oonaz1qjh8lywhz.isText(node)&&0<node.nodeValue.length){var trimmedLength=$_ahowuxkjh8lywbj.trim(node.nodeValue).length;if(dom.isBlock(node.parentNode)||0<trimmedLength)return;if(0===trimmedLength&&function(node){var previousIsSpan=node.previousSibling&&"SPAN"===node.previousSibling.nodeName,nextIsSpan=node.nextSibling&&"SPAN"===node.nextSibling.nodeName;return previousIsSpan&&nextIsSpan}(node))return}else if($_5oonaz1qjh8lywhz.isElement(node)&&(1===(children=node.childNodes).length&&isBookmarkNode(children[0])&&node.parentNode.insertBefore(children[0],node),children.length||isVoid($_cgttw3zjh8lywdq.fromDom(node))))return;dom.remove(node)}return node}},$_cm6fub1ojh8lywhl={trimNode:trimNode},makeMap$1=$_ahowuxkjh8lywbj.makeMap,attrsCharsRegExp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,textCharsRegExp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rawCharsRegExp=/[<>&\"\']/g,entityRegExp=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,asciiMap={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};baseEntities={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},reverseEntities={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};var buildEntitiesLookup=function(items,radix){var i,chr,entity,lookup={};if(items){for(items=items.split(","),radix=radix||10,i=0;i<items.length;i+=2)chr=String.fromCharCode(parseInt(items[i],radix)),baseEntities[chr]||(entity="&"+items[i+1]+";",lookup[chr]=entity,lookup[entity]=chr);return lookup}};namedEntities=buildEntitiesLookup("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var encodeRaw=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeNumeric=function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return 1<chr.length?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":baseEntities[chr]||"&#"+chr.charCodeAt(0)+";"})},encodeNamed=function(text,attr,entities){return entities=entities||namedEntities,text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return baseEntities[chr]||entities[chr]||chr})},$_gex7a11rjh8lywi4={encodeRaw:encodeRaw,encodeAllRaw:function(text){return(""+text).replace(rawCharsRegExp,function(chr){return baseEntities[chr]||chr})},encodeNumeric:encodeNumeric,encodeNamed:encodeNamed,getEncodeFunc:function(name,entities){var entitiesMap=buildEntitiesLookup(entities)||namedEntities,nameMap=makeMap$1(name.replace(/\+/g,","));return nameMap.named&&nameMap.numeric?function(text,attr){return text.replace(attr?attrsCharsRegExp:textCharsRegExp,function(chr){return void 0!==baseEntities[chr]?baseEntities[chr]:void 0!==entitiesMap[chr]?entitiesMap[chr]:1<chr.length?"&#"+(1024*(chr.charCodeAt(0)-55296)+(chr.charCodeAt(1)-56320)+65536)+";":"&#"+chr.charCodeAt(0)+";"})}:nameMap.named?entities?function(text,attr){return encodeNamed(text,attr,entitiesMap)}:encodeNamed:nameMap.numeric?encodeNumeric:encodeRaw},decode:function(text){return text.replace(entityRegExp,function(all,numeric){return numeric?65535<(numeric="x"===numeric.charAt(0).toLowerCase()?parseInt(numeric.substr(1),16):parseInt(numeric,10))?(numeric-=65536,String.fromCharCode(55296+(numeric>>10),56320+(1023&numeric))):asciiMap[numeric]||String.fromCharCode(numeric):reverseEntities[all]||namedEntities[all]||(text=all,(elm=$_cgttw3zjh8lywdq.fromTag("div").dom()).innerHTML=text,elm.textContent||elm.innerText||text);var text,elm})}},mapCache={},dummyObj={},makeMap$2=$_ahowuxkjh8lywbj.makeMap,each$4=$_ahowuxkjh8lywbj.each,extend$1=$_ahowuxkjh8lywbj.extend,explode$1=$_ahowuxkjh8lywbj.explode,inArray$1=$_ahowuxkjh8lywbj.inArray,split=function(items,delim){return(items=$_ahowuxkjh8lywbj.trim(items))?items.split(delim||" "):[]},compileSchema=function(type){var globalAttributes,blockContent,phrasingContent,flowContent,html4BlockContent,html4PhrasingContent,schema={},add=function(name,attributes,children){var ni,attributesOrder,element,arrayToMap=function(array,obj){var i,l,map={};for(i=0,l=array.length;i<l;i++)map[array[i]]=obj||{};return map};for(attributes=attributes||"","string"==typeof(children=children||[])&&(children=split(children)),ni=(name=split(name)).length;ni--;)element={attributes:arrayToMap(attributesOrder=split([globalAttributes,attributes].join(" "))),attributesOrder:attributesOrder,children:arrayToMap(children,dummyObj)},schema[name[ni]]=element},addAttrs=function(name,attributes){var ni,schemaItem,i,l;for(ni=(name=split(name)).length,attributes=split(attributes);ni--;)for(schemaItem=schema[name[ni]],i=0,l=attributes.length;i<l;i++)schemaItem.attributes[attributes[i]]={},schemaItem.attributesOrder.push(attributes[i])};return mapCache[type]?mapCache[type]:(globalAttributes="id accesskey class dir lang style tabindex title role",blockContent="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",phrasingContent="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==type&&(globalAttributes+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",blockContent+=" article aside details dialog figure header footer hgroup section nav",phrasingContent+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==type&&(globalAttributes+=" xml:lang",phrasingContent=[phrasingContent,html4PhrasingContent="acronym applet basefont big font strike tt"].join(" "),each$4(split(html4PhrasingContent),function(name){add(name,"",phrasingContent)}),blockContent=[blockContent,html4BlockContent="center dir isindex noframes"].join(" "),flowContent=[blockContent,phrasingContent].join(" "),each$4(split(html4BlockContent),function(name){add(name,"",flowContent)})),flowContent=flowContent||[blockContent,phrasingContent].join(" "),add("html","manifest","head body"),add("head","","base command link meta noscript script style title"),add("title hr noscript br"),add("base","href target"),add("link","href rel media hreflang type sizes hreflang"),add("meta","name http-equiv content charset"),add("style","media type scoped"),add("script","src async defer type charset"),add("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",flowContent),add("address dt dd div caption","",flowContent),add("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",phrasingContent),add("blockquote","cite",flowContent),add("ol","reversed start type","li"),add("ul","","li"),add("li","value",flowContent),add("dl","","dt dd"),add("a","href target rel media hreflang type",phrasingContent),add("q","cite",phrasingContent),add("ins del","cite datetime",flowContent),add("img","src sizes srcset alt usemap ismap width height"),add("iframe","src name width height",flowContent),add("embed","src type width height"),add("object","data type typemustmatch name usemap form width height",[flowContent,"param"].join(" ")),add("param","name value"),add("map","name",[flowContent,"area"].join(" ")),add("area","alt coords shape href target rel media hreflang type"),add("table","border","caption colgroup thead tfoot tbody tr"+("html4"===type?" col":"")),add("colgroup","span","col"),add("col","span"),add("tbody thead tfoot","","tr"),add("tr","","td th"),add("td","colspan rowspan headers",flowContent),add("th","colspan rowspan headers scope abbr",flowContent),add("form","accept-charset action autocomplete enctype method name novalidate target",flowContent),add("fieldset","disabled form name",[flowContent,"legend"].join(" ")),add("label","form for",phrasingContent),add("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),add("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===type?flowContent:phrasingContent),add("select","disabled form multiple name required size","option optgroup"),add("optgroup","disabled label","option"),add("option","disabled label selected value"),add("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),add("menu","type label",[flowContent,"li"].join(" ")),add("noscript","",flowContent),"html4"!==type&&(add("wbr"),add("ruby","",[phrasingContent,"rt rp"].join(" ")),add("figcaption","",flowContent),add("mark rt rp summary bdi","",phrasingContent),add("canvas","width height",flowContent),add("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[flowContent,"track source"].join(" ")),add("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[flowContent,"track source"].join(" ")),add("picture","","img source"),add("source","src srcset type media sizes"),add("track","kind src srclang label default"),add("datalist","",[phrasingContent,"option"].join(" ")),add("article section nav aside header footer","",flowContent),add("hgroup","","h1 h2 h3 h4 h5 h6"),add("figure","",[flowContent,"figcaption"].join(" ")),add("time","datetime",phrasingContent),add("dialog","open",flowContent),add("command","type label icon disabled checked radiogroup command"),add("output","for form name",phrasingContent),add("progress","value max",phrasingContent),add("meter","value min max low high optimum",phrasingContent),add("details","open",[flowContent,"summary"].join(" ")),add("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==type&&(addAttrs("script","language xml:space"),addAttrs("style","xml:space"),addAttrs("object","declare classid code codebase codetype archive standby align border hspace vspace"),addAttrs("embed","align name hspace vspace"),addAttrs("param","valuetype type"),addAttrs("a","charset name rev shape coords"),addAttrs("br","clear"),addAttrs("applet","codebase archive code object alt name width height align hspace vspace"),addAttrs("img","name longdesc align border hspace vspace"),addAttrs("iframe","longdesc frameborder marginwidth marginheight scrolling align"),addAttrs("font basefont","size color face"),addAttrs("input","usemap align"),addAttrs("select","onchange"),addAttrs("textarea"),addAttrs("h1 h2 h3 h4 h5 h6 div p legend caption","align"),addAttrs("ul","type compact"),addAttrs("li","type"),addAttrs("ol dl menu dir","compact"),addAttrs("pre","width xml:space"),addAttrs("hr","align noshade size width"),addAttrs("isindex","prompt"),addAttrs("table","summary width frame rules cellspacing cellpadding align bgcolor"),addAttrs("col","width align char charoff valign"),addAttrs("colgroup","width align char charoff valign"),addAttrs("thead","align char charoff valign"),addAttrs("tr","align char charoff valign bgcolor"),addAttrs("th","axis align char charoff valign nowrap bgcolor width height"),addAttrs("form","accept"),addAttrs("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),addAttrs("tfoot","align char charoff valign"),addAttrs("tbody","align char charoff valign"),addAttrs("area","nohref"),addAttrs("body","background bgcolor text link vlink alink")),"html4"!==type&&(addAttrs("input button select textarea","autofocus"),addAttrs("input textarea","placeholder"),addAttrs("a","download"),addAttrs("link script img","crossorigin"),addAttrs("iframe","sandbox seamless allowfullscreen")),each$4(split("a form meter progress dfn"),function(name){schema[name]&&delete schema[name].children[name]}),delete schema.caption.children.table,delete schema.script,mapCache[type]=schema)},compileElementMap=function(value,mode){var styles;return value&&(styles={},"string"==typeof value&&(value={"*":value}),each$4(value,function(value,key){styles[key]=styles[key.toUpperCase()]="map"===mode?makeMap$2(value,/[, ]/):explode$1(value,/[, ]/)})),styles};function Schema(settings){var validStyles,invalidStyles,schemaItems,whiteSpaceElementsMap,selfClosingElementsMap,shortEndedElementsMap,boolAttrMap,validClasses,blockElementsMap,nonEmptyElementsMap,moveCaretBeforeOnEnterElementsMap,textBlockElementsMap,textInlineElementsMap,elements={},children={},patternElements=[],customElementsMap={},specialElements={},createLookupTable=function(option,defaultValue,extendWith){var value=settings[option];return value?value=makeMap$2(value,/[, ]/,makeMap$2(value.toUpperCase(),/[, ]/)):(value=mapCache[option])||(value=makeMap$2(defaultValue," ",makeMap$2(defaultValue.toUpperCase()," ")),value=extend$1(value,extendWith),mapCache[option]=value),value};schemaItems=compileSchema((settings=settings||{}).schema),!1===settings.verify_html&&(settings.valid_elements="*[*]"),validStyles=compileElementMap(settings.valid_styles),invalidStyles=compileElementMap(settings.invalid_styles,"map"),validClasses=compileElementMap(settings.valid_classes,"map"),whiteSpaceElementsMap=createLookupTable("whitespace_elements","pre script noscript style textarea video audio iframe object code"),selfClosingElementsMap=createLookupTable("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),shortEndedElementsMap=createLookupTable("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),boolAttrMap=createLookupTable("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),nonEmptyElementsMap=createLookupTable("non_empty_elements","td th iframe video audio object script pre code",shortEndedElementsMap),moveCaretBeforeOnEnterElementsMap=createLookupTable("move_caret_before_on_enter_elements","table",nonEmptyElementsMap),textBlockElementsMap=createLookupTable("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),blockElementsMap=createLookupTable("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",textBlockElementsMap),textInlineElementsMap=createLookupTable("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),each$4((settings.special||"script noscript noframes noembed title style textarea xmp").split(" "),function(name){specialElements[name]=new RegExp("</"+name+"[^>]*>","gi")});var patternToRegExp=function(str){return new RegExp("^"+str.replace(/([?+*])/g,".$1")+"$")},addValidElements=function(validElements){var ei,el,ai,al,matches,element,attr,attrData,elementName,attrName,attrType,attributes,attributesOrder,prefix,outputName,globalAttributes,globalAttributesOrder,key,value,elementRuleRegExp=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,attrRuleRegExp=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,hasPatternsRegExp=/[*?+]/;if(validElements)for(validElements=split(validElements,","),elements["@"]&&(globalAttributes=elements["@"].attributes,globalAttributesOrder=elements["@"].attributesOrder),ei=0,el=validElements.length;ei<el;ei++)if(matches=elementRuleRegExp.exec(validElements[ei])){if(prefix=matches[1],elementName=matches[2],outputName=matches[3],attrData=matches[5],element={attributes:attributes={},attributesOrder:attributesOrder=[]},"#"===prefix&&(element.paddEmpty=!0),"-"===prefix&&(element.removeEmpty=!0),"!"===matches[4]&&(element.removeEmptyAttrs=!0),globalAttributes){for(key in globalAttributes)attributes[key]=globalAttributes[key];attributesOrder.push.apply(attributesOrder,globalAttributesOrder)}if(attrData)for(ai=0,al=(attrData=split(attrData,"|")).length;ai<al;ai++)if(matches=attrRuleRegExp.exec(attrData[ai])){if(attr={},attrType=matches[1],attrName=matches[2].replace(/[\\:]:/g,":"),prefix=matches[3],value=matches[4],"!"===attrType&&(element.attributesRequired=element.attributesRequired||[],element.attributesRequired.push(attrName),attr.required=!0),"-"===attrType){delete attributes[attrName],attributesOrder.splice(inArray$1(attributesOrder,attrName),1);continue}prefix&&("="===prefix&&(element.attributesDefault=element.attributesDefault||[],element.attributesDefault.push({name:attrName,value:value}),attr.defaultValue=value),":"===prefix&&(element.attributesForced=element.attributesForced||[],element.attributesForced.push({name:attrName,value:value}),attr.forcedValue=value),"<"===prefix&&(attr.validValues=makeMap$2(value,"?"))),hasPatternsRegExp.test(attrName)?(element.attributePatterns=element.attributePatterns||[],attr.pattern=patternToRegExp(attrName),element.attributePatterns.push(attr)):(attributes[attrName]||attributesOrder.push(attrName),attributes[attrName]=attr)}globalAttributes||"@"!==elementName||(globalAttributes=attributes,globalAttributesOrder=attributesOrder),outputName&&(element.outputName=elementName,elements[outputName]=element),hasPatternsRegExp.test(elementName)?(element.pattern=patternToRegExp(elementName),patternElements.push(element)):elements[elementName]=element}},setValidElements=function(validElements){elements={},patternElements=[],addValidElements(validElements),each$4(schemaItems,function(element,name){children[name]=element.children})},addCustomElements=function(customElements){var customElementRegExp=/^(~)?(.+)$/;customElements&&(mapCache.text_block_elements=mapCache.block_elements=null,each$4(split(customElements,","),function(rule){var matches=customElementRegExp.exec(rule),inline="~"===matches[1],cloneName=inline?"span":"div",name=matches[2];if(children[name]=children[cloneName],customElementsMap[name]=cloneName,inline||(blockElementsMap[name.toUpperCase()]={},blockElementsMap[name]={}),!elements[name]){var customRule=elements[cloneName];delete(customRule=extend$1({},customRule)).removeEmptyAttrs,delete customRule.removeEmpty,elements[name]=customRule}each$4(children,function(element,elmName){element[cloneName]&&(children[elmName]=element=extend$1({},children[elmName]),element[name]=element[cloneName])})}))},addValidChildren=function(validChildren){var childRuleRegExp=/^([+\-]?)(\w+)\[([^\]]+)\]$/;mapCache[settings.schema]=null,validChildren&&each$4(split(validChildren,","),function(rule){var parent,prefix,matches=childRuleRegExp.exec(rule);matches&&(prefix=matches[1],parent=prefix?children[matches[2]]:children[matches[2]]={"#comment":{}},parent=children[matches[2]],each$4(split(matches[3],"|"),function(child){"-"===prefix?delete parent[child]:parent[child]={}}))})},getElementRule=function(name){var i,element=elements[name];if(element)return element;for(i=patternElements.length;i--;)if((element=patternElements[i]).pattern.test(name))return element};return settings.valid_elements?setValidElements(settings.valid_elements):(each$4(schemaItems,function(element,name){elements[name]={attributes:element.attributes,attributesOrder:element.attributesOrder},children[name]=element.children}),"html5"!==settings.schema&&each$4(split("strong/b em/i"),function(item){item=split(item,"/"),elements[item[1]].outputName=item[0]}),each$4(split("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(name){elements[name]&&(elements[name].removeEmpty=!0)}),each$4(split("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(name){elements[name].paddEmpty=!0}),each$4(split("span"),function(name){elements[name].removeEmptyAttrs=!0})),addCustomElements(settings.custom_elements),addValidChildren(settings.valid_children),addValidElements(settings.extended_valid_elements),addValidChildren("+ol[ul|ol],+ul[ul|ol]"),each$4({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(parents,item){elements[item]&&(elements[item].parentsRequired=split(parents))}),settings.invalid_elements&&each$4(explode$1(settings.invalid_elements),function(item){elements[item]&&delete elements[item]}),getElementRule("span")||addValidElements("span[!data-mce-type|*]"),{children:children,elements:elements,getValidStyles:function(){return validStyles},getValidClasses:function(){return validClasses},getBlockElements:function(){return blockElementsMap},getInvalidStyles:function(){return invalidStyles},getShortEndedElements:function(){return shortEndedElementsMap},getTextBlockElements:function(){return textBlockElementsMap},getTextInlineElements:function(){return textInlineElementsMap},getBoolAttrs:function(){return boolAttrMap},getElementRule:getElementRule,getSelfClosingElements:function(){return selfClosingElementsMap},getNonEmptyElements:function(){return nonEmptyElementsMap},getMoveCaretBeforeOnEnterElements:function(){return moveCaretBeforeOnEnterElementsMap},getWhiteSpaceElements:function(){return whiteSpaceElementsMap},getSpecialElements:function(){return specialElements},isValidChild:function(name,child){var parent=children[name.toLowerCase()];return!(!parent||!parent[child.toLowerCase()])},isValid:function(name,attr){var attrPatterns,i,rule=getElementRule(name);if(rule){if(!attr)return!0;if(rule.attributes[attr])return!0;if(attrPatterns=rule.attributePatterns)for(i=attrPatterns.length;i--;)if(attrPatterns[i].pattern.test(name))return!0}return!1},getCustomElements:function(){return customElementsMap},addValidElements:addValidElements,setValidElements:setValidElements,addCustomElements:addCustomElements,addValidChildren:addValidChildren}}var toHex=function(match,r,g,b){var hex=function(val){return 1<(val=parseInt(val,10).toString(16)).length?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)};function Styles(settings,schema){var i,encodingItems,validStyles,invalidStyles,rgbRegExp=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,urlOrStrRegExp=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,styleRegExp=/\s*([^:]+):\s*([^;]+);?/g,trimRightRegExp=/\s+$/,encodingLookup={};for(settings=settings||{},schema&&(validStyles=schema.getValidStyles(),invalidStyles=schema.getInvalidStyles()),encodingItems="\\\" \\' \\; \\: ; : \ufeff".split(" "),i=0;i<encodingItems.length;i++)encodingLookup[encodingItems[i]]="\ufeff"+i,encodingLookup["\ufeff"+i]=encodingItems[i];return{toHex:function(color){return color.replace(rgbRegExp,toHex)},parse:function(css){var matches,name,value,isEncoded,target,a,b,c,styles={},urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope||this,compress=function(prefix,suffix,noJoin){var top,right,bottom,left;if((top=styles[prefix+"-top"+suffix])&&(right=styles[prefix+"-right"+suffix])&&(bottom=styles[prefix+"-bottom"+suffix])&&(left=styles[prefix+"-left"+suffix])){var box=[top,right,bottom,left];for(i=box.length-1;i--&&box[i]===box[i+1];);-1<i&&noJoin||(styles[prefix+suffix]=-1===i?box[0]:box.join(" "),delete styles[prefix+"-top"+suffix],delete styles[prefix+"-right"+suffix],delete styles[prefix+"-bottom"+suffix],delete styles[prefix+"-left"+suffix])}},canCompress=function(key){var i,value=styles[key];if(value){for(i=(value=value.split(" ")).length;i--;)if(value[i]!==value[0])return!1;return styles[key]=value[0],!0}},encode=function(str){return isEncoded=!0,encodingLookup[str]},decode=function(str,keepSlashes){return isEncoded&&(str=str.replace(/\uFEFF[0-9]/g,function(str){return encodingLookup[str]})),keepSlashes||(str=str.replace(/\\([\'\";:])/g,"$1")),str},decodeSingleHexSequence=function(escSeq){return String.fromCharCode(parseInt(escSeq.slice(1),16))},decodeHexSequences=function(value){return value.replace(/\\[0-9a-f]+/gi,decodeSingleHexSequence)},processUrl=function(match,url,url2,url3,str,str2){if(str=str||str2)return"'"+(str=decode(str)).replace(/\'/g,"\\'")+"'";if(url=decode(url||url2||url3),!settings.allow_script_urls){var scriptUrl=url.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(scriptUrl))return"";if(!settings.allow_svg_data_urls&&/^data:image\/svg/i.test(scriptUrl))return""}return urlConverter&&(url=urlConverter.call(urlConverterScope,url,"style")),"url('"+url.replace(/\'/g,"\\'")+"')"};if(css){for(css=(css=css.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,encode).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(str){return str.replace(/[;:]/g,encode)});matches=styleRegExp.exec(css);)if(styleRegExp.lastIndex=matches.index+matches[0].length,name=matches[1].replace(trimRightRegExp,"").toLowerCase(),value=matches[2].replace(trimRightRegExp,""),name&&value){if(name=decodeHexSequences(name),value=decodeHexSequences(value),-1!==name.indexOf("\ufeff")||-1!==name.indexOf('"'))continue;if(!settings.allow_script_urls&&("behavior"===name||/expression\s*\(|\/\*|\*\//.test(value)))continue;"font-weight"===name&&"700"===value?value="bold":"color"!==name&&"background-color"!==name||(value=value.toLowerCase()),value=(value=value.replace(rgbRegExp,toHex)).replace(urlOrStrRegExp,processUrl),styles[name]=isEncoded?decode(value,!0):value}compress("border","",!0),compress("border","-width"),compress("border","-color"),compress("border","-style"),compress("padding",""),compress("margin",""),target="border",b="border-style",c="border-color",canCompress(a="border-width")&&canCompress(b)&&canCompress(c)&&(styles[target]=styles[a]+" "+styles[b]+" "+styles[c],delete styles[a],delete styles[b],delete styles[c]),"medium none"===styles.border&&delete styles.border,"none"===styles["border-image"]&&delete styles["border-image"]}return styles},serialize:function(styles,elementName){var name,value,css="",serializeStyles=function(name){var styleList,i,l,value;if(styleList=validStyles[name])for(i=0,l=styleList.length;i<l;i++)name=styleList[i],(value=styles[name])&&(css+=(0<css.length?" ":"")+name+": "+value+";")},isValid=function(name,elementName){var styleMap;return!((styleMap=invalidStyles["*"])&&styleMap[name]||(styleMap=invalidStyles[elementName])&&styleMap[name])};if(elementName&&validStyles)serializeStyles("*"),serializeStyles(elementName);else for(name in styles)!(value=styles[name])||invalidStyles&&!isValid(name,elementName)||(css+=(0<css.length?" ":"")+name+": "+value+";");return css}}}var each$5=$_ahowuxkjh8lywbj.each,grep$1=$_ahowuxkjh8lywbj.grep,isIE=$_9bpim8ajh8lyw68.ie,simpleSelectorRe=/^([a-z0-9],?)+$/i,whiteSpaceRegExp$2=/^[ \t\r\n]*$/,setupAttrHooks=function(styles,settings,getContext){var attrHooks={},keepValues=settings.keep_values,keepUrlHook={set:function($elm,value,name){settings.url_converter&&(value=settings.url_converter.call(settings.url_converter_scope||getContext(),value,name,$elm[0])),$elm.attr("data-mce-"+name,value).attr(name,value)},get:function($elm,name){return $elm.attr("data-mce-"+name)||$elm.attr(name)}};return attrHooks={style:{set:function($elm,value){null===value||"object"!=typeof value?(keepValues&&$elm.attr("data-mce-style",value),$elm.attr("style",value)):$elm.css(value)},get:function($elm){var value=$elm.attr("data-mce-style")||$elm.attr("style");return value=styles.serialize(styles.parse(value),$elm[0].nodeName)}}},keepValues&&(attrHooks.href=attrHooks.src=keepUrlHook),attrHooks},updateInternalStyleAttr=function(styles,$elm){var rawValue=$elm.attr("style"),value=styles.serialize(styles.parse(rawValue),$elm[0].nodeName);value||(value=null),$elm.attr("data-mce-style",value)},findNodeIndex=function(node,normalized){var lastNodeType,nodeType,idx=0;if(node)for(lastNodeType=node.nodeType,node=node.previousSibling;node;node=node.previousSibling)nodeType=node.nodeType,(!normalized||3!==nodeType||nodeType!==lastNodeType&&node.nodeValue.length)&&(idx++,lastNodeType=nodeType);return idx};function DOMUtils(doc,settings){var attrHooks,_this=this;void 0===settings&&(settings={});var addedStyles={},win=window,files={},counter=0,styleSheetLoader=function(document,settings){var maxLoadTime,idCount=0,loadedStates={};maxLoadTime=(settings=settings||{}).maxLoadTime||5e3;var appendToHead=function(node){document.getElementsByTagName("head")[0].appendChild(node)},load=function(url,loadedCallback,errorCallback){var link,style,startTime,state,passed=function(){for(var callbacks=state.passed,i=callbacks.length;i--;)callbacks[i]();state.status=2,state.passed=[],state.failed=[]},failed=function(){for(var callbacks=state.failed,i=callbacks.length;i--;)callbacks[i]();state.status=3,state.passed=[],state.failed=[]},wait=function(testCallback,waitCallback){testCallback()||((new Date).getTime()-startTime<maxLoadTime?$_8sy3pfhjh8lyw95.setTimeout(waitCallback):failed())},waitForWebKitLinkLoaded=function(){wait(function(){for(var styleSheet,owner,styleSheets=document.styleSheets,i=styleSheets.length;i--;)if((owner=(styleSheet=styleSheets[i]).ownerNode?styleSheet.ownerNode:styleSheet.owningElement)&&owner.id===link.id)return passed(),!0},waitForWebKitLinkLoaded)},waitForGeckoLinkLoaded=function(){wait(function(){try{var cssRules=style.sheet.cssRules;return passed(),!!cssRules}catch(ex){}},waitForGeckoLinkLoaded)};if(url=$_ahowuxkjh8lywbj._addCacheSuffix(url),loadedStates[url]?state=loadedStates[url]:(state={passed:[],failed:[]},loadedStates[url]=state),loadedCallback&&state.passed.push(loadedCallback),errorCallback&&state.failed.push(errorCallback),1!==state.status)if(2!==state.status)if(3!==state.status){if(state.status=1,(link=document.createElement("link")).rel="stylesheet",link.type="text/css",link.id="u"+idCount++,link.async=!1,link.defer=!1,startTime=(new Date).getTime(),"onload"in link&&!((webKitChunks=navigator.userAgent.match(/WebKit\/(\d*)/))&&parseInt(webKitChunks[1],10)<536))link.onload=waitForWebKitLinkLoaded,link.onerror=failed;else{if(0<navigator.userAgent.indexOf("Firefox"))return(style=document.createElement("style")).textContent='@import "'+url+'"',waitForGeckoLinkLoaded(),void appendToHead(style);waitForWebKitLinkLoaded()}var webKitChunks;appendToHead(link),link.href=url}else failed();else passed()},loadF=function(url){return Future.nu(function(resolve){load(url,$_eqpqvr6jh8lyw3s.compose(resolve,$_eqpqvr6jh8lyw3s.constant(Result.value(url))),$_eqpqvr6jh8lyw3s.compose(resolve,$_eqpqvr6jh8lyw3s.constant(Result.error(url))))})},unbox=function(result){return result.fold($_eqpqvr6jh8lyw3s.identity,$_eqpqvr6jh8lyw3s.identity)};return{load:load,loadAll:function(urls,success,failure){$_5lpsz51kjh8lywh6.par($_5wjzy24jh8lyw2t.map(urls,loadF)).get(function(result){var parts=$_5wjzy24jh8lyw2t.partition(result,function(r){return r.isValue()});0<parts.fail.length?failure(parts.fail.map(unbox)):success(parts.pass.map(unbox))})}}}(doc),boundEvents=[],schema=settings.schema?settings.schema:Schema({}),styles=Styles({url_converter:settings.url_converter,url_converter_scope:settings.url_converter_scope},settings.schema),events=settings.ownEvents?new EventUtils(settings.proxy):EventUtils.Event,blockElementsMap=schema.getBlockElements(),$=DomQuery.overrideDefaults(function(){return{context:doc,element:self.getRoot()}}),get=function(elm){if(elm&&doc&&"string"==typeof elm){var node=doc.getElementById(elm);return node&&node.id!==elm?doc.getElementsByName(elm)[1]:node}return elm},$$=function(elm){return"string"==typeof elm&&(elm=get(elm)),$(elm)},getAttrib=function(elm,name,defaultVal){var hook,value,$elm=$$(elm);return $elm.length&&(value=(hook=attrHooks[name])&&hook.get?hook.get($elm,name):$elm.attr(name)),void 0===value&&(value=defaultVal||""),value},getAttribs=function(elm){var node=get(elm);return node?node.attributes:[]},setAttrib=function(elm,name,value){var originalValue,hook;""===value&&(value=null);var $elm=$$(elm);originalValue=$elm.attr(name),$elm.length&&((hook=attrHooks[name])&&hook.set?hook.set($elm,value,name):$elm.attr(name,value),originalValue!==value&&settings.onSetAttrib&&settings.onSetAttrib({attrElm:$elm,attrName:name,attrValue:value}))},getRoot=function(){return settings.root_element||doc.body},getPos=function(elm,rootElm){return $_6pe7rlmjh8lywbu.getPos(doc.body,get(elm),rootElm)},getStyle=function(elm,name,computed){var $elm=$$(elm);return computed?$elm.css(name):("float"===(name=name.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}))&&(name=$_9bpim8ajh8lyw68.ie&&$_9bpim8ajh8lyw68.ie<12?"styleFloat":"cssFloat"),$elm[0]&&$elm[0].style?$elm[0].style[name]:void 0)},getSize=function(elm){var w,h;return elm=get(elm),w=getStyle(elm,"width"),h=getStyle(elm,"height"),-1===w.indexOf("px")&&(w=0),-1===h.indexOf("px")&&(h=0),{w:parseInt(w,10)||elm.offsetWidth||elm.clientWidth,h:parseInt(h,10)||elm.offsetHeight||elm.clientHeight}},is=function(elm,selector){var i;if(!elm)return!1;if(!Array.isArray(elm)){if("*"===selector)return 1===elm.nodeType;if(simpleSelectorRe.test(selector)){var selectors=selector.toLowerCase().split(/,/),elmName=elm.nodeName.toLowerCase();for(i=selectors.length-1;0<=i;i--)if(selectors[i]===elmName)return!0;return!1}if(elm.nodeType&&1!==elm.nodeType)return!1}var elms=Array.isArray(elm)?elm:[elm];return 0<Sizzle(selector,elms[0].ownerDocument||elms[0],null,elms).length},getParents=function(elm,selector,root,collect){var selectorVal,result=[],node=get(elm);for(collect=void 0===collect,root=root||("BODY"!==getRoot().nodeName?getRoot().parentNode:null),$_ahowuxkjh8lywbj.is(selector,"string")&&(selector="*"===(selectorVal=selector)?function(node){return 1===node.nodeType}:function(node){return is(node,selectorVal)});node&&node!==root&&node.nodeType&&9!==node.nodeType;){if(!selector||"function"==typeof selector&&selector(node)){if(!collect)return[node];result.push(node)}node=node.parentNode}return collect?result:null},_findSib=function(node,selector,name){var func=selector;if(node)for("string"==typeof selector&&(func=function(node){return is(node,selector)}),node=node[name];node;node=node[name])if("function"==typeof func&&func(node))return node;return null},run=function(elm,func,scope){var result,node="string"==typeof elm?get(elm):elm;if(!node)return!1;if($_ahowuxkjh8lywbj.isArray(node)&&(node.length||0===node.length))return result=[],each$5(node,function(elm,i){elm&&("string"==typeof elm&&(elm=get(elm)),result.push(func.call(scope,elm,i)))}),result;var context=scope||_this;return func.call(context,node)},setAttribs=function(elm,attrs){$$(elm).each(function(i,node){each$5(attrs,function(value,name){setAttrib(node,name,value)})})},setHTML=function(elm,html){var $elm=$$(elm);isIE?$elm.each(function(i,target){if(!1!==target.canHaveHTML){for(;target.firstChild;)target.removeChild(target.firstChild);try{target.innerHTML="<br>"+html,target.removeChild(target.firstChild)}catch(ex){DomQuery("<div></div>").html("<br>"+html).contents().slice(1).appendTo(target)}return html}}):$elm.html(html)},add=function(parentElm,name,attrs,html,create){return run(parentElm,function(parentElm){var newElm="string"==typeof name?doc.createElement(name):name;return setAttribs(newElm,attrs),html&&("string"!=typeof html&&html.nodeType?newElm.appendChild(html):"string"==typeof html&&setHTML(newElm,html)),create?newElm:parentElm.appendChild(newElm)})},create=function(name,attrs,html){return add(doc.createElement(name),name,attrs,html,!0)},decode=$_gex7a11rjh8lywi4.decode,encode=$_gex7a11rjh8lywi4.encodeAllRaw,remove=function(node,keepChildren){var $node=$$(node);return keepChildren?$node.each(function(){for(var child;child=this.firstChild;)3===child.nodeType&&0===child.data.length?this.removeChild(child):this.parentNode.insertBefore(child,this)}).remove():$node.remove(),1<$node.length?$node.toArray():$node[0]},toggleClass=function(elm,cls,state){$$(elm).toggleClass(cls,state).each(function(){""===this.className&&DomQuery(this).attr("class",null)})},replace=function(newElm,oldElm,keepChildren){return run(oldElm,function(oldElm){return $_ahowuxkjh8lywbj.is(oldElm,"array")&&(newElm=newElm.cloneNode(!0)),keepChildren&&each$5(grep$1(oldElm.childNodes),function(node){newElm.appendChild(node)}),oldElm.parentNode.replaceChild(newElm,oldElm)})},createRng=function(){return doc.createRange()},bind=function(target,name,func,scope){if($_ahowuxkjh8lywbj.isArray(target)){for(var i=target.length;i--;)target[i]=bind(target[i],name,func,scope);return target}return!settings.collect||target!==doc&&target!==win||boundEvents.push([target,name,func,scope]),events.bind(target,name,func,scope||self)},unbind=function(target,name,func){var i;if($_ahowuxkjh8lywbj.isArray(target)){for(i=target.length;i--;)target[i]=unbind(target[i],name,func);return target}if(boundEvents&&(target===doc||target===win))for(i=boundEvents.length;i--;){var item=boundEvents[i];target!==item[0]||name&&name!==item[1]||func&&func!==item[2]||events.unbind(item[0],item[1],item[2])}return events.unbind(target,name,func)},getContentEditable=function(node){if(node&&$_5oonaz1qjh8lywhz.isElement(node)){var contentEditable=node.getAttribute("data-mce-contenteditable");return contentEditable&&"inherit"!==contentEditable?contentEditable:"inherit"!==node.contentEditable?node.contentEditable:null}return null},self={doc:doc,settings:settings,win:win,files:files,stdMode:!0,boxModel:!0,styleSheetLoader:styleSheetLoader,boundEvents:boundEvents,styles:styles,schema:schema,events:events,isBlock:function(node){if("string"==typeof node)return!!blockElementsMap[node];if(node){var type=node.nodeType;if(type)return!(1!==type||!blockElementsMap[node.nodeName])}return!1},$:$,$$:$$,root:null,clone:function(node,deep){if(!isIE||1!==node.nodeType||deep)return node.cloneNode(deep);if(deep)return null;var clone_1=doc.createElement(node.nodeName);return each$5(getAttribs(node),function(attr){setAttrib(clone_1,attr.nodeName,getAttrib(node,attr.nodeName))}),clone_1},getRoot:getRoot,getViewPort:function(argWin){var actWin=argWin||win,doc=actWin.document,rootElm=doc.documentElement;return{x:actWin.pageXOffset||rootElm.scrollLeft,y:actWin.pageYOffset||rootElm.scrollTop,w:actWin.innerWidth||rootElm.clientWidth,h:actWin.innerHeight||rootElm.clientHeight}},getRect:function(elm){var pos,size;return elm=get(elm),pos=getPos(elm),size=getSize(elm),{x:pos.x,y:pos.y,w:size.w,h:size.h}},getSize:getSize,getParent:function(node,selector,root){var parents=getParents(node,selector,root,!1);return parents&&0<parents.length?parents[0]:null},getParents:getParents,get:get,getNext:function(node,selector){return _findSib(node,selector,"nextSibling")},getPrev:function(node,selector){return _findSib(node,selector,"previousSibling")},select:function(selector,scope){return Sizzle(selector,get(scope)||settings.root_element||doc,[])},is:is,add:add,create:create,createHTML:function(name,attrs,html){var key,outHtml="";for(key in outHtml+="<"+name,attrs)attrs.hasOwnProperty(key)&&null!==attrs[key]&&void 0!==attrs[key]&&(outHtml+=" "+key+'="'+encode(attrs[key])+'"');return void 0!==html?outHtml+">"+html+"</"+name+">":outHtml+" />"},createFragment:function(html){var node,container=doc.createElement("div"),frag=doc.createDocumentFragment();for(html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag},remove:remove,setStyle:function(elm,name,value){var $elm=$$(elm).css(name,value);settings.update_styles&&updateInternalStyleAttr(styles,$elm)},getStyle:getStyle,setStyles:function(elm,stylesArg){var $elm=$$(elm).css(stylesArg);settings.update_styles&&updateInternalStyleAttr(styles,$elm)},removeAllAttribs:function(e){return run(e,function(e){var i,attrs=e.attributes;for(i=attrs.length-1;0<=i;i--)e.removeAttributeNode(attrs.item(i))})},setAttrib:setAttrib,setAttribs:setAttribs,getAttrib:getAttrib,getPos:getPos,parseStyle:function(cssText){return styles.parse(cssText)},serializeStyle:function(stylesArg,name){return styles.serialize(stylesArg,name)},addStyle:function(cssText){var head,styleElm;if(self!==DOMUtils.DOM&&doc===document){if(addedStyles[cssText])return;addedStyles[cssText]=!0}(styleElm=doc.getElementById("mceDefaultStyles"))||((styleElm=doc.createElement("style")).id="mceDefaultStyles",styleElm.type="text/css",(head=doc.getElementsByTagName("head")[0]).firstChild?head.insertBefore(styleElm,head.firstChild):head.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=cssText:styleElm.appendChild(doc.createTextNode(cssText))},loadCSS:function(url){var head;self===DOMUtils.DOM||doc!==document?(url||(url=""),head=doc.getElementsByTagName("head")[0],each$5(url.split(","),function(url){var link;url=$_ahowuxkjh8lywbj._addCacheSuffix(url),files[url]||(files[url]=!0,link=create("link",{rel:"stylesheet",href:url}),head.appendChild(link))})):DOMUtils.DOM.loadCSS(url)},addClass:function(elm,cls){$$(elm).addClass(cls)},removeClass:function(elm,cls){toggleClass(elm,cls,!1)},hasClass:function(elm,cls){return $$(elm).hasClass(cls)},toggleClass:toggleClass,show:function(elm){$$(elm).show()},hide:function(elm){$$(elm).hide()},isHidden:function(elm){return"none"===$$(elm).css("display")},uniqueId:function(prefix){return(prefix||"mce_")+counter++},setHTML:setHTML,getOuterHTML:function(elm){var node="string"==typeof elm?get(elm):elm;return $_5oonaz1qjh8lywhz.isElement(node)?node.outerHTML:DomQuery("<div></div>").append(DomQuery(node).clone()).html()},setOuterHTML:function(elm,html){$$(elm).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=html)}catch(ex){}remove(DomQuery(this).html(html),!0)})},decode:decode,encode:encode,insertAfter:function(node,reference){var referenceNode=get(reference);return run(node,function(node){var parent,nextSibling;return parent=referenceNode.parentNode,(nextSibling=referenceNode.nextSibling)?parent.insertBefore(node,nextSibling):parent.appendChild(node),node})},replace:replace,rename:function(elm,name){var newElm;return elm.nodeName!==name.toUpperCase()&&(newElm=create(name),each$5(getAttribs(elm),function(attrNode){setAttrib(newElm,attrNode.nodeName,getAttrib(elm,attrNode.nodeName))}),replace(newElm,elm,!0)),newElm||elm},findCommonAncestor:function(a,b){for(var pe,ps=a;ps;){for(pe=b;pe&&ps!==pe;)pe=pe.parentNode;if(ps===pe)break;ps=ps.parentNode}return!ps&&a.ownerDocument?a.ownerDocument.documentElement:ps},toHex:function(rgbVal){return styles.toHex($_ahowuxkjh8lywbj.trim(rgbVal))},run:run,getAttribs:getAttribs,isEmpty:function(node,elements){var i,attributes,type,whitespace,walker,name,brCount=0;if(node=node.firstChild){walker=new TreeWalker(node,node.parentNode),elements=elements||(schema?schema.getNonEmptyElements():null),whitespace=schema?schema.getWhiteSpaceElements():{};do{if(type=node.nodeType,$_5oonaz1qjh8lywhz.isElement(node)){var bogusVal=node.getAttribute("data-mce-bogus");if(bogusVal){node=walker.next("all"===bogusVal);continue}if(name=node.nodeName.toLowerCase(),elements&&elements[name]){if("br"!==name)return!1;brCount++,node=walker.next();continue}for(i=(attributes=getAttribs(node)).length;i--;)if("name"===(name=attributes[i].nodeName)||"data-mce-bookmark"===name)return!1}if(8===type)return!1;if(3===type&&!whiteSpaceRegExp$2.test(node.nodeValue))return!1;if(3===type&&node.parentNode&&whitespace[node.parentNode.nodeName]&&whiteSpaceRegExp$2.test(node.nodeValue))return!1;node=walker.next()}while(node)}return brCount<=1},createRng:createRng,nodeIndex:findNodeIndex,split:function(parentElm,splitElm,replacementElm){var bef,aft,pa,r=createRng();if(parentElm&&splitElm)return r.setStart(parentElm.parentNode,findNodeIndex(parentElm)),r.setEnd(splitElm.parentNode,findNodeIndex(splitElm)),bef=r.extractContents(),(r=createRng()).setStart(splitElm.parentNode,findNodeIndex(splitElm)+1),r.setEnd(parentElm.parentNode,findNodeIndex(parentElm)+1),aft=r.extractContents(),(pa=parentElm.parentNode).insertBefore($_cm6fub1ojh8lywhl.trimNode(self,bef),parentElm),replacementElm?pa.insertBefore(replacementElm,parentElm):pa.insertBefore(splitElm,parentElm),pa.insertBefore($_cm6fub1ojh8lywhl.trimNode(self,aft),parentElm),remove(parentElm),replacementElm||splitElm},bind:bind,unbind:unbind,fire:function(target,name,evt){return events.fire(target,name,evt)},getContentEditable:getContentEditable,getContentEditableParent:function(node){for(var root=getRoot(),state=null;node&&node!==root&&null===(state=getContentEditable(node));node=node.parentNode);return state},destroy:function(){if(boundEvents)for(var i=boundEvents.length;i--;){var item=boundEvents[i];events.unbind(item[0],item[1],item[2])}Sizzle.setDocument&&Sizzle.setDocument()},isChildOf:function(node,parent){for(;node;){if(parent===node)return!0;node=node.parentNode}return!1},dumpRng:function(r){return"startContainer: "+r.startContainer.nodeName+", startOffset: "+r.startOffset+", endContainer: "+r.endContainer.nodeName+", endOffset: "+r.endOffset}};return attrHooks=setupAttrHooks(styles,settings,function(){return self}),self}!function(DOMUtils){DOMUtils.DOM=DOMUtils(document),DOMUtils.nodeIndex=findNodeIndex}(DOMUtils||(DOMUtils={}));var DOMUtils$1=DOMUtils,DOM=DOMUtils$1.DOM,each$6=$_ahowuxkjh8lywbj.each,grep$2=$_ahowuxkjh8lywbj.grep,isFunction=function(f){return"function"==typeof f},ScriptLoader=function(){var states={},queue=[],scriptLoadedCallbacks={},queueLoadedCallbacks=[],loading=0;this.isDone=function(url){return 2===states[url]},this.markDone=function(url){states[url]=2},this.add=this.load=function(url,success,scope,failure){void 0===states[url]&&(queue.push(url),states[url]=0),success&&(scriptLoadedCallbacks[url]||(scriptLoadedCallbacks[url]=[]),scriptLoadedCallbacks[url].push({success:success,failure:failure,scope:scope||this}))},this.remove=function(url){delete states[url],delete scriptLoadedCallbacks[url]},this.loadQueue=function(success,scope,failure){this.loadScripts(queue,success,scope,failure)},this.loadScripts=function(scripts,success,scope,failure){var loadScripts,failures=[],execCallbacks=function(name,url){each$6(scriptLoadedCallbacks[url],function(callback){isFunction(callback[name])&&callback[name].call(callback.scope)}),scriptLoadedCallbacks[url]=void 0};queueLoadedCallbacks.push({success:success,failure:failure,scope:scope||this}),(loadScripts=function(){var loadingScripts=grep$2(scripts);if(scripts.length=0,each$6(loadingScripts,function(url){2!==states[url]?3!==states[url]?1!==states[url]&&(states[url]=1,loading++,function(url,success,failure){var elm,id,dom=DOM,done=function(){dom.remove(id),elm&&(elm.onreadystatechange=elm.onload=elm=null),success()};id=dom.uniqueId(),(elm=document.createElement("script")).id=id,elm.type="text/javascript",elm.src=$_ahowuxkjh8lywbj._addCacheSuffix(url),"onreadystatechange"in elm?elm.onreadystatechange=function(){/loaded|complete/.test(elm.readyState)&&done()}:elm.onload=done,elm.onerror=function(){isFunction(failure)?failure():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+url)},(document.getElementsByTagName("head")[0]||document.body).appendChild(elm)}(url,function(){states[url]=2,loading--,execCallbacks("success",url),loadScripts()},function(){states[url]=3,loading--,failures.push(url),execCallbacks("failure",url),loadScripts()})):execCallbacks("failure",url):execCallbacks("success",url)}),!loading){var notifyCallbacks=queueLoadedCallbacks.slice(0);queueLoadedCallbacks.length=0,each$6(notifyCallbacks,function(callback){0===failures.length?isFunction(callback.success)&&callback.success.call(callback.scope):isFunction(callback.failure)&&callback.failure.call(callback.scope,failures)})}})()}};ScriptLoader.ScriptLoader=new ScriptLoader;var each$7=$_ahowuxkjh8lywbj.each;function AddOnManager(){var _this=this,items=[],urls={},lookup={},_listeners=[],dependencies=function(name){var result;return lookup[name]&&(result=lookup[name].dependencies),result||[]},createUrl=function(baseUrl,dep){return"object"==typeof dep?dep:"string"==typeof baseUrl?{prefix:"",resource:dep,suffix:""}:{prefix:baseUrl.prefix,resource:dep,suffix:baseUrl.suffix}},loadDependencies=function(addOnUrl,success,scope){var deps=dependencies(name);each$7(deps,function(dep){var newUrl=createUrl(addOnUrl,dep);load(newUrl.resource,newUrl,void 0,void 0)}),success&&(scope?success.call(scope):success.call(ScriptLoader))},load=function(name,addOnUrl,success,scope,failure){if(!urls[name]){var urlString="string"==typeof addOnUrl?addOnUrl:addOnUrl.prefix+addOnUrl.resource+addOnUrl.suffix;0!==urlString.indexOf("/")&&-1===urlString.indexOf("://")&&(urlString=AddOnManager.baseURL+"/"+urlString),urls[name]=urlString.substring(0,urlString.lastIndexOf("/")),lookup[name]?loadDependencies(addOnUrl,success,scope):ScriptLoader.ScriptLoader.add(urlString,function(){return loadDependencies(addOnUrl,success,scope)},scope,failure)}};return{items:items,urls:urls,lookup:lookup,_listeners:_listeners,get:function(name){if(lookup[name])return lookup[name].instance},dependencies:dependencies,requireLangPack:function(name,languages){var language=AddOnManager.language;if(language&&!1!==AddOnManager.languageLoad){if(languages)if(-1!==(languages=","+languages+",").indexOf(","+language.substr(0,2)+","))language=language.substr(0,2);else if(-1===languages.indexOf(","+language+","))return;ScriptLoader.ScriptLoader.add(urls[name]+"/langs/"+language+".js")}},add:function(id,addOn,dependencies){items.push(addOn),lookup[id]={instance:addOn,dependencies:dependencies};var result=$_5wjzy24jh8lyw2t.partition(_listeners,function(listener){return listener.name===id});return _listeners=result.fail,each$7(result.pass,function(listener){listener.callback()}),addOn},remove:function(name){delete urls[name],delete lookup[name]},createUrl:createUrl,addComponents:function(pluginName,scripts){var pluginUrl=_this.urls[pluginName];each$7(scripts,function(script){ScriptLoader.ScriptLoader.add(pluginUrl+"/"+script)})},load:load,waitFor:function(name,callback){lookup.hasOwnProperty(name)?callback():_listeners.push({name:name,callback:callback})}}}!function(AddOnManager){AddOnManager.PluginManager=AddOnManager(),AddOnManager.ThemeManager=AddOnManager()}(AddOnManager||(AddOnManager={}));var $_d383mr21jh8lywlv_isZwsp=function(chr){return"\ufeff"===chr},$_d383mr21jh8lywlv_ZWSP="\ufeff",$_d383mr21jh8lywlv_trim=function(text){return text.replace(new RegExp("\ufeff","g"),"")},isElement$2=$_5oonaz1qjh8lywhz.isElement,isText$2=$_5oonaz1qjh8lywhz.isText,isCaretContainerBlock=function(node){return isText$2(node)&&(node=node.parentNode),isElement$2(node)&&node.hasAttribute("data-mce-caret")},isCaretContainerInline=function(node){return isText$2(node)&&$_d383mr21jh8lywlv_isZwsp(node.data)},isCaretContainer=function(node){return isCaretContainerBlock(node)||isCaretContainerInline(node)},hasContent=function(node){return node.firstChild!==node.lastChild||!$_5oonaz1qjh8lywhz.isBr(node.firstChild)},isBeforeInline=function(pos){var container=pos.container();return pos&&$_5oonaz1qjh8lywhz.isText(container)&&container.data.charAt(pos.offset())===$_d383mr21jh8lywlv_ZWSP},isAfterInline=function(pos){var container=pos.container();return pos&&$_5oonaz1qjh8lywhz.isText(container)&&container.data.charAt(pos.offset()-1)===$_d383mr21jh8lywlv_ZWSP},insertBlock=function(blockName,node,before){var blockNode,parentNode,br;return(blockNode=node.ownerDocument.createElement(blockName)).setAttribute("data-mce-caret",before?"before":"after"),blockNode.setAttribute("data-mce-bogus","all"),blockNode.appendChild(((br=document.createElement("br")).setAttribute("data-mce-bogus","1"),br)),parentNode=node.parentNode,before?parentNode.insertBefore(blockNode,node):node.nextSibling?parentNode.insertBefore(blockNode,node.nextSibling):parentNode.appendChild(blockNode),blockNode},startsWithCaretContainer=function(node){return isText$2(node)&&node.data[0]===$_d383mr21jh8lywlv_ZWSP},endsWithCaretContainer=function(node){return isText$2(node)&&node.data[node.data.length-1]===$_d383mr21jh8lywlv_ZWSP},showCaretContainerBlock=function(caretContainer){return caretContainer&&caretContainer.hasAttribute("data-mce-caret")?(brs=caretContainer.getElementsByTagName("br"),lastBr=brs[brs.length-1],$_5oonaz1qjh8lywhz.isBogus(lastBr)&&lastBr.parentNode.removeChild(lastBr),caretContainer.removeAttribute("data-mce-caret"),caretContainer.removeAttribute("data-mce-bogus"),caretContainer.removeAttribute("style"),caretContainer.removeAttribute("_moz_abspos"),caretContainer):null;var brs,lastBr},isContentEditableTrue$1=$_5oonaz1qjh8lywhz.isContentEditableTrue,isContentEditableFalse$1=$_5oonaz1qjh8lywhz.isContentEditableFalse,isBr$2=$_5oonaz1qjh8lywhz.isBr,isText$3=$_5oonaz1qjh8lywhz.isText,isInvalidTextElement=$_5oonaz1qjh8lywhz.matchNodeNames("script style textarea"),isAtomicInline=$_5oonaz1qjh8lywhz.matchNodeNames("img input textarea hr iframe video audio object"),isTable$1=$_5oonaz1qjh8lywhz.matchNodeNames("table"),isCaretContainer$1=isCaretContainer,isCaretCandidate=function(node){return!isCaretContainer$1(node)&&(isText$3(node)?!isInvalidTextElement(node.parentNode):isAtomicInline(node)||isBr$2(node)||isTable$1(node)||isNonUiContentEditableFalse(node))},isNonUiContentEditableFalse=function(node){return!1===function(node){return $_5oonaz1qjh8lywhz.isElement(node)&&"true"===node.getAttribute("unselectable")}(node)&&isContentEditableFalse$1(node)},isEditableCaretCandidate=function(node,root){return isCaretCandidate(node)&&function(node,root){for(node=node.parentNode;node&&node!==root;node=node.parentNode){if(isNonUiContentEditableFalse(node))return!1;if(isContentEditableTrue$1(node))return!0}return!0}(node,root)},round=Math.round,clone$1=function(rect){return rect?{left:round(rect.left),top:round(rect.top),bottom:round(rect.bottom),right:round(rect.right),width:round(rect.width),height:round(rect.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},collapse=function(rect,toStart){return(rect=clone$1(rect)).right=(toStart||(rect.left=rect.left+rect.width),rect.left),rect.width=0,rect},isValidOverflow=function(overflowY,rect1,rect2){return 0<=overflowY&&overflowY<=Math.min(rect1.height,rect2.height)/2},isAbove=function(rect1,rect2){return rect1.bottom-rect1.height/2<rect2.top||!(rect1.top>rect2.bottom)&&isValidOverflow(rect2.top-rect1.bottom,rect1,rect2)},isBelow=function(rect1,rect2){return rect1.top>rect2.bottom||!(rect1.bottom<rect2.top)&&isValidOverflow(rect2.bottom-rect1.top,rect1,rect2)},getSelectedNode=function(range){var startContainer=range.startContainer,startOffset=range.startOffset;return startContainer.hasChildNodes()&&range.endOffset===startOffset+1?startContainer.childNodes[startOffset]:null},getNode=function(container,offset){return 1===container.nodeType&&container.hasChildNodes()&&(offset>=container.childNodes.length&&(offset=container.childNodes.length-1),container=container.childNodes[offset]),container},extendingChars=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),isExtendingChar=function(ch){return"string"==typeof ch&&768<=ch.charCodeAt(0)&&extendingChars.test(ch)},slice$3=[].slice,curry$1=function(fn){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=slice$3.call(arguments);return args.length-1>=fn.length?fn.apply(this,args.slice(1)):function(){var tempArgs=args.concat([].slice.call(arguments));return curry$1.apply(this,tempArgs)}},$_8aqzj925jh8lywmj={constant:function(value){return function(){return value}},negate:function(predicate){return function(x){return!predicate(x)}},and:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(!args[i](x))return!1;return!0}},or:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];var args=slice$3.call(arguments);return function(x){for(var i=0;i<args.length;i++)if(args[i](x))return!0;return!1}},curry:curry$1,compose:function(f,g){return function(x){return f(g(x))}},noop:function(){}},$_b8twwq26jh8lywmm_liftN=function(arr,f){for(var r=[],i=0;i<arr.length;i++){var x=arr[i];if(!x.isSome())return Option.none();r.push(x.getOrDie())}return Option.some(f.apply(null,r))},isElement$3=$_5oonaz1qjh8lywhz.isElement,isCaretCandidate$1=isCaretCandidate,isBlock$1=$_5oonaz1qjh8lywhz.matchStyleValues("display","block table"),isFloated=$_5oonaz1qjh8lywhz.matchStyleValues("float","left right"),isValidElementCaretCandidate=$_8aqzj925jh8lywmj.and(isElement$3,isCaretCandidate$1,$_8aqzj925jh8lywmj.negate(isFloated)),isNotPre=$_8aqzj925jh8lywmj.negate($_5oonaz1qjh8lywhz.matchStyleValues("white-space","pre pre-line pre-wrap")),isText$4=$_5oonaz1qjh8lywhz.isText,isBr$3=$_5oonaz1qjh8lywhz.isBr,nodeIndex=DOMUtils$1.nodeIndex,resolveIndex=getNode,createRange=function(doc){return"createRange"in doc?doc.createRange():DOMUtils$1.DOM.createRng()},isWhiteSpace=function(chr){return chr&&/[\r\n\t ]/.test(chr)},isRange=function(rng){return!!rng.setStart&&!!rng.setEnd},isHiddenWhiteSpaceRange=function(range){var text,container=range.startContainer,offset=range.startOffset;return!!(isWhiteSpace(range.toString())&&isNotPre(container.parentNode)&&$_5oonaz1qjh8lywhz.isText(container)&&(text=container.data,isWhiteSpace(text[offset-1])||isWhiteSpace(text[offset+1])))},isZeroRect=function(r){return 0===r.left&&0===r.right&&0===r.top&&0===r.bottom},getBoundingClientRect=function(item){var clientRect,clientRects;return clientRect=0<(clientRects=item.getClientRects()).length?clone$1(clientRects[0]):clone$1(item.getBoundingClientRect()),!isRange(item)&&isBr$3(item)&&isZeroRect(clientRect)?function(brNode){var clientRect,doc=brNode.ownerDocument,rng=createRange(doc),nbsp=doc.createTextNode(" "),parentNode=brNode.parentNode;return parentNode.insertBefore(nbsp,brNode),rng.setStart(nbsp,0),rng.setEnd(nbsp,1),clientRect=clone$1(rng.getBoundingClientRect()),parentNode.removeChild(nbsp),clientRect}(item):isZeroRect(clientRect)&&isRange(item)?function(rng){var sc=rng.startContainer,ec=rng.endContainer,so=rng.startOffset,eo=rng.endOffset;if(sc===ec&&$_5oonaz1qjh8lywhz.isText(ec)&&0===so&&1===eo){var newRng=rng.cloneRange();return newRng.setEndAfter(ec),getBoundingClientRect(newRng)}return null}(item):clientRect},collapseAndInflateWidth=function(clientRect,toStart){var newClientRect=collapse(clientRect,toStart);return newClientRect.width=1,newClientRect.right=newClientRect.left+1,newClientRect},getCaretPositionClientRects=function(caretPosition){var beforeNode,node,clientRects=[],addUniqueAndValidRect=function(clientRect){var rect1,rect2;0!==clientRect.height&&(0<clientRects.length&&(rect1=clientRect,rect2=clientRects[clientRects.length-1],rect1.left===rect2.left&&rect1.top===rect2.top&&rect1.bottom===rect2.bottom&&rect1.right===rect2.right)||clientRects.push(clientRect))},addCharacterOffset=function(container,offset){var range=createRange(container.ownerDocument);if(offset<container.data.length){if(isExtendingChar(container.data[offset]))return clientRects;if(isExtendingChar(container.data[offset-1])&&(range.setStart(container,offset),range.setEnd(container,offset+1),!isHiddenWhiteSpaceRange(range)))return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1)),clientRects}0<offset&&(range.setStart(container,offset-1),range.setEnd(container,offset),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!1))),offset<container.data.length&&(range.setStart(container,offset),range.setEnd(container,offset+1),isHiddenWhiteSpaceRange(range)||addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range),!0)))};if(isText$4(caretPosition.container()))return addCharacterOffset(caretPosition.container(),caretPosition.offset()),clientRects;if(isElement$3(caretPosition.container()))if(caretPosition.isAtEnd())node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$4(node)&&addCharacterOffset(node,node.data.length),isValidElementCaretCandidate(node)&&!isBr$3(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1));else{if(node=resolveIndex(caretPosition.container(),caretPosition.offset()),isText$4(node)&&addCharacterOffset(node,0),isValidElementCaretCandidate(node)&&caretPosition.isAtEnd())return addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!1)),clientRects;beforeNode=resolveIndex(caretPosition.container(),caretPosition.offset()-1),isValidElementCaretCandidate(beforeNode)&&!isBr$3(beforeNode)&&(isBlock$1(beforeNode)||isBlock$1(node)||!isValidElementCaretCandidate(node))&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode),!1)),isValidElementCaretCandidate(node)&&addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node),!0))}return clientRects};function CaretPosition(container,offset,clientRects){var getClientRects=function(){return clientRects||(clientRects=getCaretPositionClientRects(CaretPosition(container,offset))),clientRects};return{container:$_8aqzj925jh8lywmj.constant(container),offset:$_8aqzj925jh8lywmj.constant(offset),toRange:function(){var range;return(range=createRange(container.ownerDocument)).setStart(container,offset),range.setEnd(container,offset),range},getClientRects:getClientRects,isVisible:function(){return 0<getClientRects().length},isAtStart:function(){return isText$4(container),0===offset},isAtEnd:function(){return isText$4(container)?offset>=container.data.length:offset>=container.childNodes.length},isEqual:function(caretPosition){return caretPosition&&container===caretPosition.container()&&offset===caretPosition.offset()},getNode:function(before){return resolveIndex(container,before?offset-1:offset)}}}!function(CaretPosition){CaretPosition.fromRangeStart=function(range){return CaretPosition(range.startContainer,range.startOffset)},CaretPosition.fromRangeEnd=function(range){return CaretPosition(range.endContainer,range.endOffset)},CaretPosition.after=function(node){return CaretPosition(node.parentNode,nodeIndex(node)+1)},CaretPosition.before=function(node){return CaretPosition(node.parentNode,nodeIndex(node))},CaretPosition.isAbove=function(pos1,pos2){return $_b8twwq26jh8lywmm_liftN([$_5wjzy24jh8lyw2t.head(pos2.getClientRects()),$_5wjzy24jh8lyw2t.last(pos1.getClientRects())],isAbove).getOr(!1)},CaretPosition.isBelow=function(pos1,pos2){return $_b8twwq26jh8lywmm_liftN([$_5wjzy24jh8lyw2t.last(pos2.getClientRects()),$_5wjzy24jh8lyw2t.head(pos1.getClientRects())],isBelow).getOr(!1)},CaretPosition.isAtStart=function(pos){return!!pos&&pos.isAtStart()},CaretPosition.isAtEnd=function(pos){return!!pos&&pos.isAtEnd()},CaretPosition.isTextPosition=function(pos){return!!pos&&$_5oonaz1qjh8lywhz.isText(pos.container())},CaretPosition.isElementPosition=function(pos){return!1===CaretPosition.isTextPosition(pos)}}(CaretPosition||(CaretPosition={}));var BreakType,CaretPosition$1=CaretPosition,isElement$4=$_5oonaz1qjh8lywhz.isElement,isText$5=$_5oonaz1qjh8lywhz.isText,removeNode=function(node){var parentNode=node.parentNode;parentNode&&parentNode.removeChild(node)},setNodeValue=function(node,text){0===text.length?removeNode(node):node.nodeValue=text},trimCount=function(text){var trimmedText=$_d383mr21jh8lywlv_trim(text);return{count:text.length-trimmedText.length,text:trimmedText}},removeUnchanged=function(caretContainer,pos){return remove$2(caretContainer),pos},removeTextCaretContainer=function(caretContainer,pos){return isText$5(caretContainer)&&pos.container()===caretContainer?function(caretContainer,pos){var before=trimCount(caretContainer.data.substr(0,pos.offset())),after=trimCount(caretContainer.data.substr(pos.offset())),text=before.text+after.text;return 0<text.length?(setNodeValue(caretContainer,text),CaretPosition$1(caretContainer,pos.offset()-before.count)):pos}(caretContainer,pos):removeUnchanged(caretContainer,pos)},removeElementCaretContainer=function(caretContainer,pos){return pos.container()===caretContainer.parentNode?function(caretContainer,pos){var parentNode=pos.container(),newPosition=$_5wjzy24jh8lyw2t.indexOf($_5wjzy24jh8lyw2t.from(parentNode.childNodes),caretContainer).map(function(index){return index<pos.offset()?CaretPosition$1(parentNode,pos.offset()-1):pos}).getOr(pos);return remove$2(caretContainer),newPosition}(caretContainer,pos):removeUnchanged(caretContainer,pos)},remove$2=function(caretContainerNode){if(isElement$4(caretContainerNode)&&isCaretContainer(caretContainerNode)&&(hasContent(caretContainerNode)?caretContainerNode.removeAttribute("data-mce-caret"):removeNode(caretContainerNode)),isText$5(caretContainerNode)){var text=$_d383mr21jh8lywlv_trim(function(node){try{return node.nodeValue}catch(ex){return""}}(caretContainerNode));setNodeValue(caretContainerNode,text)}},$_9nl16f2ajh8lywne={removeAndReposition:function(container,pos){return CaretPosition$1.isTextPosition(pos)?removeTextCaretContainer(container,pos):removeElementCaretContainer(container,pos)},remove:remove$2},isBeforeOrStart=function(position){return CaretPosition$1.isTextPosition(position)?0===position.offset():isCaretCandidate(position.getNode())},isAfterOrEnd=function(position){if(CaretPosition$1.isTextPosition(position)){var container=position.container();return position.offset()===container.data.length}return isCaretCandidate(position.getNode(!0))},isBeforeAfterSameElement=function(from,to){return!CaretPosition$1.isTextPosition(from)&&!CaretPosition$1.isTextPosition(to)&&from.getNode()===to.getNode(!0)},shouldSkipPosition=function(forward,from,to){return forward?!isBeforeAfterSameElement(from,to)&&(position=from,!(!CaretPosition$1.isTextPosition(position)&&$_5oonaz1qjh8lywhz.isBr(position.getNode())))&&isAfterOrEnd(from)&&isBeforeOrStart(to):!isBeforeAfterSameElement(to,from)&&isBeforeOrStart(from)&&isAfterOrEnd(to);var position},fromPosition=function(forward,root,pos){var walker=CaretWalker(root);return Option.from(forward?walker.next(pos):walker.prev(pos))},positionIn=function(forward,element){var node,startNode=forward?element.firstChild:element.lastChild;return $_5oonaz1qjh8lywhz.isText(startNode)?Option.some(CaretPosition$1(startNode,forward?0:startNode.data.length)):startNode?isCaretCandidate(startNode)?Option.some(forward?CaretPosition$1.before(startNode):(node=startNode,$_5oonaz1qjh8lywhz.isBr(node)?CaretPosition$1.before(node):CaretPosition$1.after(node))):function(forward,root,start){var position=forward?CaretPosition$1.before(start):CaretPosition$1.after(start);return fromPosition(forward,root,position)}(forward,element,startNode):Option.none()},$_9kvypj2cjh8lywnz={fromPosition:fromPosition,nextPosition:$_eqpqvr6jh8lyw3s.curry(fromPosition,!0),prevPosition:$_eqpqvr6jh8lyw3s.curry(fromPosition,!1),navigate:function(forward,root,from){return fromPosition(forward,root,from).bind(function(to){return isInSameBlock(from,to,root)&&shouldSkipPosition(forward,from,to)?fromPosition(forward,root,to):Option.some(to)})},positionIn:positionIn,firstPositionIn:$_eqpqvr6jh8lyw3s.curry(positionIn,!0),lastPositionIn:$_eqpqvr6jh8lyw3s.curry(positionIn,!1)},isContentEditableTrue$2=$_5oonaz1qjh8lywhz.isContentEditableTrue,isContentEditableFalse$2=$_5oonaz1qjh8lywhz.isContentEditableFalse,showCaret=function(direction,editor,node,before,scrollIntoView){return editor._selectionOverrides.showCaret(direction,node,before,scrollIntoView)},selectNode=function(editor,node){return editor.fire("BeforeObjectSelected",{target:node}).isDefaultPrevented()?null:function(node){var rng=node.ownerDocument.createRange();return rng.selectNode(node),rng}(node)},renderCaretAtRange=function(editor,range,scrollIntoView){var normalizedRange=normalizeRange(1,editor.getBody(),range),caretPosition=CaretPosition$1.fromRangeStart(normalizedRange),caretPositionNode=caretPosition.getNode();if(isContentEditableFalse$2(caretPositionNode))return showCaret(1,editor,caretPositionNode,!caretPosition.isAtEnd(),!1);var caretPositionBeforeNode=caretPosition.getNode(!0);if(isContentEditableFalse$2(caretPositionBeforeNode))return showCaret(1,editor,caretPositionBeforeNode,!1,!1);var ceRoot=editor.dom.getParent(caretPosition.getNode(),function(node){return isContentEditableFalse$2(node)||isContentEditableTrue$2(node)});return isContentEditableFalse$2(ceRoot)?showCaret(1,editor,ceRoot,!1,scrollIntoView):null},renderRangeCaret=function(editor,range,scrollIntoView){if(!range||!range.collapsed)return range;var caretRange=renderCaretAtRange(editor,range,scrollIntoView);return caretRange||range};!function(BreakType){BreakType[BreakType.Br=0]="Br",BreakType[BreakType.Block=1]="Block",BreakType[BreakType.Wrap=2]="Wrap",BreakType[BreakType.Eol=3]="Eol"}(BreakType||(BreakType={}));var HDirection,flip=function(direction,positions){return direction===HDirection.Backwards?positions.reverse():positions},walk$1=function(direction,caretWalker,pos){return direction===HDirection.Forwards?caretWalker.next(pos):caretWalker.prev(pos)},getBreakType=function(scope,direction,currentPos,nextPos){return $_5oonaz1qjh8lywhz.isBr(nextPos.getNode(direction===HDirection.Forwards))?BreakType.Br:!1===isInSameBlock(currentPos,nextPos)?BreakType.Block:BreakType.Wrap},getPositionsUntil=function(predicate,direction,scope,start){for(var nextPos,caretWalker=CaretWalker(scope),currentPos=start,positions=[];currentPos&&(nextPos=walk$1(direction,caretWalker,currentPos));){if($_5oonaz1qjh8lywhz.isBr(nextPos.getNode(!1)))return direction===HDirection.Forwards?{positions:flip(direction,positions).concat([nextPos]),breakType:BreakType.Br,breakAt:Option.some(nextPos)}:{positions:flip(direction,positions),breakType:BreakType.Br,breakAt:Option.some(nextPos)};if(nextPos.isVisible()){if(predicate(currentPos,nextPos)){var breakType=getBreakType(0,direction,currentPos,nextPos);return{positions:flip(direction,positions),breakType:breakType,breakAt:Option.some(nextPos)}}positions.push(nextPos),currentPos=nextPos}else currentPos=nextPos}return{positions:flip(direction,positions),breakType:BreakType.Eol,breakAt:Option.none()}},getAdjacentLinePositions=function(direction,getPositionsUntilBreak,scope,start){return getPositionsUntilBreak(scope,start).breakAt.map(function(pos){var positions=getPositionsUntilBreak(scope,pos).positions;return direction===HDirection.Backwards?positions.concat(pos):[pos].concat(positions)}).getOr([])},findClosestHorizontalPositionFromPoint=function(positions,x){return $_5wjzy24jh8lyw2t.foldl(positions,function(acc,newPos){return acc.fold(function(){return Option.some(newPos)},function(lastPos){return $_b8twwq26jh8lywmm_liftN([$_5wjzy24jh8lyw2t.head(lastPos.getClientRects()),$_5wjzy24jh8lyw2t.head(newPos.getClientRects())],function(lastRect,newRect){var lastDist=Math.abs(x-lastRect.left);return Math.abs(x-newRect.left)<=lastDist?newPos:lastPos}).or(acc)})},Option.none())},findClosestHorizontalPosition=function(positions,pos){return $_5wjzy24jh8lyw2t.head(pos.getClientRects()).bind(function(targetRect){return findClosestHorizontalPositionFromPoint(positions,targetRect.left)})},getPositionsUntilPreviousLine=$_eqpqvr6jh8lyw3s.curry(getPositionsUntil,CaretPosition.isAbove,-1),getPositionsUntilNextLine=$_eqpqvr6jh8lyw3s.curry(getPositionsUntil,CaretPosition.isBelow,1),getPositionsAbove=$_eqpqvr6jh8lyw3s.curry(getAdjacentLinePositions,-1,getPositionsUntilPreviousLine),getPositionsBelow=$_eqpqvr6jh8lyw3s.curry(getAdjacentLinePositions,1,getPositionsUntilNextLine),$_eebxu2gjh8lywp3_descendants=function(scope,selector){return $_5h4ipt1fjh8lywgi.all(selector,scope)},getClosestCell=function(getYAxisValue,isTargetCorner,table,x,y){var cells=$_eebxu2gjh8lywp3_descendants($_cgttw3zjh8lywdq.fromDom(table),"td,th").map(function(e){return e.dom()});return function(corners,x,y){return $_5wjzy24jh8lyw2t.foldl(corners,function(acc,newCorner){return acc.fold(function(){return Option.some(newCorner)},function(oldCorner){var oldDist=Math.sqrt(Math.abs(oldCorner.x-x)+Math.abs(oldCorner.y-y)),newDist=Math.sqrt(Math.abs(newCorner.x-x)+Math.abs(newCorner.y-y));return Option.some(newDist<oldDist?newCorner:oldCorner)})},Option.none())}($_5wjzy24jh8lyw2t.filter(function(getYAxisValue,tds){return $_5wjzy24jh8lyw2t.bind(tds,function(td){var rect=function(rect,delta){return{left:rect.left-delta,top:rect.top-delta,right:rect.right+2*delta,bottom:rect.bottom+2*delta,width:rect.width+delta,height:rect.height+delta}}(td.getBoundingClientRect(),-1);return[{x:rect.left,y:getYAxisValue(rect),cell:td},{x:rect.right,y:getYAxisValue(rect),cell:td}]})}(getYAxisValue,cells),function(corner){return isTargetCorner(corner,y)}),x,y).map(function(corner){return corner.cell})},getClosestCellAbove=$_eqpqvr6jh8lyw3s.curry(getClosestCell,function(rect){return rect.bottom},function(corner,y){return corner.y<y}),getClosestCellBelow=$_eqpqvr6jh8lyw3s.curry(getClosestCell,function(rect){return rect.top},function(corner,y){return corner.y>y}),findClosestPositionInAboveCell=function(table,pos){return $_5wjzy24jh8lyw2t.head(pos.getClientRects()).bind(function(rect){return getClosestCellAbove(table,rect.left,rect.top)}).bind(function(cell){return findClosestHorizontalPosition((scope=cell,$_9kvypj2cjh8lywnz.lastPositionIn(scope).map(function(pos){return getPositionsUntilPreviousLine(scope,pos).positions.concat(pos)}).getOr([])),pos);var scope})},findClosestPositionInBelowCell=function(table,pos){return $_5wjzy24jh8lyw2t.last(pos.getClientRects()).bind(function(rect){return getClosestCellBelow(table,rect.left,rect.top)}).bind(function(cell){return findClosestHorizontalPosition((scope=cell,$_9kvypj2cjh8lywnz.firstPositionIn(scope).map(function(pos){return[pos].concat(getPositionsUntilNextLine(scope,pos).positions)}).getOr([])),pos);var scope})},getPos$1=function(elm){for(var x=0,y=0,offsetParent=elm;offsetParent&&offsetParent.nodeType;)x+=offsetParent.offsetLeft||0,y+=offsetParent.offsetTop||0,offsetParent=offsetParent.offsetParent;return{x:x,y:y}},$_cosk3k2ijh8lywpa_scrollElementIntoView=function(editor,elm,alignToTop){var y,viewPort,viewPortY,viewPortH,dom=editor.dom,root=dom.getRoot(),offsetY=0;if(!function(editor,elm,alignToTop){var scrollEvent={elm:elm,alignToTop:alignToTop};return editor.fire("scrollIntoView",scrollEvent),scrollEvent.isDefaultPrevented()}(editor,elm,alignToTop)&&$_5oonaz1qjh8lywhz.isElement(elm)){if(!1===alignToTop&&(offsetY=elm.offsetHeight),"BODY"!==root.nodeName){var scrollContainer=editor.selection.getScrollContainer();if(scrollContainer)return y=getPos$1(elm).y-getPos$1(scrollContainer).y+offsetY,viewPortH=scrollContainer.clientHeight,void((y<(viewPortY=scrollContainer.scrollTop)||viewPortY+viewPortH<y+25)&&(scrollContainer.scrollTop=y<viewPortY?y:y-viewPortH+25))}viewPort=dom.getViewPort(editor.getWin()),y=dom.getPos(elm).y+offsetY,viewPortY=viewPort.y,viewPortH=viewPort.h,(y<viewPort.y||viewPortY+viewPortH<y+25)&&editor.getWin().scrollTo(0,y<viewPortY?y:y-viewPortH+25)}},$_cosk3k2ijh8lywpa_scrollRangeIntoView=function(editor,rng){$_5wjzy24jh8lyw2t.head(CaretPosition.fromRangeStart(rng).getClientRects()).each(function(rngRect){var outer,inner,bodyRect=function(editor){if(editor.inline)return editor.getBody().getBoundingClientRect();var win=editor.getWin();return{left:0,right:win.innerWidth,top:0,bottom:win.innerHeight,width:win.innerWidth,height:win.innerHeight}}(editor),overflow={x:function(outer,inner){return inner.left>outer.left&&inner.right<outer.right?0:inner.left<outer.left?inner.left-outer.left:inner.right-outer.right}(outer=bodyRect,inner=rngRect),y:function(outer,inner){return inner.top>outer.top&&inner.bottom<outer.bottom?0:inner.top<outer.top?inner.top-outer.top:inner.bottom-outer.bottom}(outer,inner)};!function(editor,dx,dy){editor.inline?(editor.getBody().scrollLeft+=dx,editor.getBody().scrollTop+=dy):editor.getWin().scrollBy(dx,dy)}(editor,0!==overflow.x?0<overflow.x?overflow.x+4:overflow.x-4:0,0!==overflow.y?0<overflow.y?overflow.y+4:overflow.y-4:0)})},getBodySetting=function(editor,name,defaultValue){var value=editor.getParam(name,defaultValue);if(-1===value.indexOf("="))return value;var bodyObj=editor.getParam(name,"","hash");return bodyObj.hasOwnProperty(editor.id)?bodyObj[editor.id]:defaultValue},$_66vr6g2jjh8lywpf_getIframeAttrs=function(editor){return editor.getParam("iframe_attrs",{})},$_66vr6g2jjh8lywpf_getDocType=function(editor){return editor.getParam("doctype","<!DOCTYPE html>")},$_66vr6g2jjh8lywpf_getDocumentBaseUrl=function(editor){return editor.getParam("document_base_url","")},$_66vr6g2jjh8lywpf_getBodyId=function(editor){return getBodySetting(editor,"body_id","tinymce")},$_66vr6g2jjh8lywpf_getBodyClass=function(editor){return getBodySetting(editor,"body_class","")},$_66vr6g2jjh8lywpf_getContentSecurityPolicy=function(editor){return editor.getParam("content_security_policy","")},$_66vr6g2jjh8lywpf_shouldPutBrInPre=function(editor){return editor.getParam("br_in_pre",!0)},$_66vr6g2jjh8lywpf_getForcedRootBlock=function(editor){if(editor.getParam("force_p_newlines",!1))return"p";var block=editor.getParam("forced_root_block","p");return!1===block?"":block},$_66vr6g2jjh8lywpf_getForcedRootBlockAttrs=function(editor){return editor.getParam("forced_root_block_attrs",{})},$_66vr6g2jjh8lywpf_getBrNewLineSelector=function(editor){return editor.getParam("br_newline_selector",".mce-toc h2,figcaption,caption")},$_66vr6g2jjh8lywpf_getNoNewLineSelector=function(editor){return editor.getParam("no_newline_selector","")},$_66vr6g2jjh8lywpf_shouldKeepStyles=function(editor){return editor.getParam("keep_styles",!0)},$_66vr6g2jjh8lywpf_shouldEndContainerOnEmptyBlock=function(editor){return editor.getParam("end_container_on_empty_block",!1)},$_66vr6g2jjh8lywpf_getFontStyleValues=function(editor){return $_ahowuxkjh8lywbj.explode(editor.getParam("font_size_style_values",""))},$_66vr6g2jjh8lywpf_getFontSizeClasses=function(editor){return $_ahowuxkjh8lywbj.explode(editor.getParam("font_size_classes",""))},before=function(marker,element){$_a43q0i17jh8lywfe.parent(marker).each(function(v){v.dom().insertBefore(element.dom(),marker.dom())})},append=function(parent,element){parent.dom().appendChild(element.dom())},$_4m7u2e2kjh8lywpi={before:before,after:function(marker,element){$_a43q0i17jh8lywfe.nextSibling(marker).fold(function(){$_a43q0i17jh8lywfe.parent(marker).each(function(v){append(v,element)})},function(v){before(v,element)})},prepend:function(parent,element){$_a43q0i17jh8lywfe.firstChild(parent).fold(function(){append(parent,element)},function(v){parent.dom().insertBefore(element.dom(),v.dom())})},append:append,appendAt:function(parent,element,index){$_a43q0i17jh8lywfe.child(parent,index).fold(function(){append(parent,element)},function(v){before(v,element)})},wrap:function(element,wrapper){before(element,wrapper),append(wrapper,element)}},browser$2=$_9hkktfnjh8lywc6.detect().browser,isFakeCaretTableBrowser=function(){return browser$2.isIE()||browser$2.isEdge()||browser$2.isFirefox()},moveToRange=function(editor,rng){editor.selection.setRng(rng),$_cosk3k2ijh8lywpa_scrollRangeIntoView(editor,rng)},isAtTableCellLine=function(getPositionsUntil,scope,pos){var lineInfo=getPositionsUntil(scope,pos);return lineInfo.breakType===BreakType.Wrap&&0===lineInfo.positions.length?lineInfo.breakAt.map(function(breakPos){return getPositionsUntil(scope,breakPos).breakAt.isNone()}).getOr(!0):lineInfo.breakAt.isNone()},isAtFirstTableCellLine=$_8aqzj925jh8lywmj.curry(isAtTableCellLine,getPositionsUntilPreviousLine),isAtLastTableCellLine=$_8aqzj925jh8lywmj.curry(isAtTableCellLine,getPositionsUntilNextLine),navigateHorizontally=function(editor,forward,table,td){var rng=editor.selection.getRng(),direction=forward?1:-1;if(isFakeCaretTableBrowser()&&function(forward,rng,table){var caretPos=CaretPosition$1.fromRangeStart(rng);return $_9kvypj2cjh8lywnz.positionIn(!forward,table).map(function(pos){return pos.isEqual(caretPos)}).getOr(!1)}(forward,rng,table)){var newRng=showCaret(direction,editor,table,!forward,!0);return moveToRange(editor,newRng),!0}return!1},getTable=function(previous,pos){var node=pos.getNode(previous);return $_5oonaz1qjh8lywhz.isElement(node)&&"TABLE"===node.nodeName?Option.some(node):Option.none()},moveCaret=function(editor,down,pos){var table=getTable(!!down,pos),last=!1===down;table.fold(function(){return moveToRange(editor,pos.toRange())},function(table){return $_9kvypj2cjh8lywnz.positionIn(last,editor.getBody()).filter(function(lastPos){return lastPos.isEqual(pos)}).fold(function(){return moveToRange(editor,pos.toRange())},function(_){return function(down,editor,table,pos){var forcedRootBlock=$_66vr6g2jjh8lywpf_getForcedRootBlock(editor);forcedRootBlock?editor.undoManager.transact(function(){var element=$_cgttw3zjh8lywdq.fromTag(forcedRootBlock);$_3da62i14jh8lyweo.setAll(element,$_66vr6g2jjh8lywpf_getForcedRootBlockAttrs(editor)),$_4m7u2e2kjh8lywpi.append(element,$_cgttw3zjh8lywdq.fromTag("br")),down?$_4m7u2e2kjh8lywpi.after($_cgttw3zjh8lywdq.fromDom(table),element):$_4m7u2e2kjh8lywpi.before($_cgttw3zjh8lywdq.fromDom(table),element);var rng=editor.dom.createRng();rng.setStart(element.dom(),0),rng.setEnd(element.dom(),0),moveToRange(editor,rng)}):moveToRange(editor,pos.toRange())}(down,editor,table,pos)})})},navigateVertically=function(editor,down,table,td){var rng=editor.selection.getRng(),pos=CaretPosition$1.fromRangeStart(rng),root=editor.getBody();if(down||!isAtFirstTableCellLine(td,pos))return!(!down||!isAtLastTableCellLine(td,pos))&&(newPos=function(root,table,start){return findClosestPositionInBelowCell(table,start).orThunk(function(){return $_5wjzy24jh8lyw2t.head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsBelow(root,CaretPosition$1.after(table)),rect.left)})}).getOr(CaretPosition$1.after(table))}(root,table,pos),moveCaret(editor,down,newPos),!0);var newPos=function(root,table,start){return findClosestPositionInAboveCell(table,start).orThunk(function(){return $_5wjzy24jh8lyw2t.head(start.getClientRects()).bind(function(rect){return findClosestHorizontalPositionFromPoint(getPositionsAbove(root,CaretPosition$1.before(table)),rect.left)})}).getOr(CaretPosition$1.before(table))}(root,table,pos);return moveCaret(editor,down,newPos),!0},moveH=function(editor,forward){return function(){return Option.from(editor.dom.getParent(editor.selection.getNode(),"td,th")).bind(function(td){return Option.from(editor.dom.getParent(td,"table")).map(function(table){return navigateHorizontally(editor,forward,table)})}).getOr(!1)}},moveV=function(editor,forward){return function(){return Option.from(editor.dom.getParent(editor.selection.getNode(),"td,th")).bind(function(td){return Option.from(editor.dom.getParent(td,"table")).map(function(table){return navigateVertically(editor,forward,table,td)})}).getOr(!1)}},Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},isContentEditableFalse$3=$_5oonaz1qjh8lywhz.isContentEditableFalse,getAbsoluteClientRect=function(root,element,before){var docElm,scrollX,scrollY,margin,rootRect,clientRect=collapse(element.getBoundingClientRect(),before);return scrollY="BODY"===root.tagName?(docElm=root.ownerDocument.documentElement,scrollX=root.scrollLeft||docElm.scrollLeft,root.scrollTop||docElm.scrollTop):(rootRect=root.getBoundingClientRect(),scrollX=root.scrollLeft-rootRect.left,root.scrollTop-rootRect.top),clientRect.left+=scrollX,clientRect.right+=scrollX,clientRect.top+=scrollY,clientRect.bottom+=scrollY,clientRect.width=1,0<(margin=element.offsetWidth-element.clientWidth)&&(before&&(margin*=-1),clientRect.left+=margin,clientRect.right+=margin),clientRect},FakeCaret=function(root,isBlock,hasFocus){var cursorInterval,caretContainerNode,lastVisualCaret=Cell(Option.none()),hide=function(){!function(root){var contentEditableFalseNodes,node,sibling,i,data;for(contentEditableFalseNodes=DomQuery("*[contentEditable=false]",root),i=0;i<contentEditableFalseNodes.length;i++)sibling=(node=contentEditableFalseNodes[i]).previousSibling,endsWithCaretContainer(sibling)&&(1===(data=sibling.data).length?sibling.parentNode.removeChild(sibling):sibling.deleteData(data.length-1,1)),sibling=node.nextSibling,startsWithCaretContainer(sibling)&&(1===(data=sibling.data).length?sibling.parentNode.removeChild(sibling):sibling.deleteData(0,1))}(root),caretContainerNode&&($_9nl16f2ajh8lywne.remove(caretContainerNode),caretContainerNode=null),lastVisualCaret.get().each(function(caretState){DomQuery(caretState.caret).remove(),lastVisualCaret.set(Option.none())}),clearInterval(cursorInterval)},startBlink=function(){cursorInterval=$_8sy3pfhjh8lyw95.setInterval(function(){hasFocus()?DomQuery("div.mce-visual-caret",root).toggleClass("mce-visual-caret-hidden"):DomQuery("div.mce-visual-caret",root).addClass("mce-visual-caret-hidden")},500)};return{show:function(before,element){var clientRect,rng,node;if(hide(),node=element,$_5oonaz1qjh8lywhz.isElement(node)&&/^(TD|TH)$/i.test(node.tagName))return null;if(!isBlock(element))return caretContainerNode=function(node,before){var sibling,textNode,parentNode;if(textNode=node.ownerDocument.createTextNode($_d383mr21jh8lywlv_ZWSP),parentNode=node.parentNode,before){if(sibling=node.previousSibling,isText$2(sibling)){if(isCaretContainer(sibling))return sibling;if(endsWithCaretContainer(sibling))return sibling.splitText(sibling.data.length-1)}parentNode.insertBefore(textNode,node)}else{if(sibling=node.nextSibling,isText$2(sibling)){if(isCaretContainer(sibling))return sibling;if(startsWithCaretContainer(sibling))return sibling.splitText(1),sibling}node.nextSibling?parentNode.insertBefore(textNode,node.nextSibling):parentNode.appendChild(textNode)}return textNode}(element,before),rng=element.ownerDocument.createRange(),isContentEditableFalse$3(caretContainerNode.nextSibling)?(rng.setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0)):(rng.setStart(caretContainerNode,1),rng.setEnd(caretContainerNode,1)),rng;caretContainerNode=insertBlock("p",element,before),clientRect=getAbsoluteClientRect(root,element,before),DomQuery(caretContainerNode).css("top",clientRect.top);var caret=DomQuery('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(clientRect).appendTo(root)[0];return lastVisualCaret.set(Option.some({caret:caret,element:element,before:before})),lastVisualCaret.get().each(function(caretState){before&&DomQuery(caretState.caret).addClass("mce-visual-caret-before")}),startBlink(),(rng=element.ownerDocument.createRange()).setStart(caretContainerNode,0),rng.setEnd(caretContainerNode,0),rng},hide:hide,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){lastVisualCaret.get().each(function(caretState){var clientRect=getAbsoluteClientRect(root,caretState.element,caretState.before);DomQuery(caretState.caret).css(clientRect)})},destroy:function(){return $_8sy3pfhjh8lyw95.clearInterval(cursorInterval)}}},isFakeCaretTarget=function(node){return isContentEditableFalse$3(node)||$_5oonaz1qjh8lywhz.isTable(node)&&isFakeCaretTableBrowser()},isContentEditableFalse$4=$_5oonaz1qjh8lywhz.isContentEditableFalse,isBlockLike=$_5oonaz1qjh8lywhz.matchStyleValues("display","block table table-cell table-caption list-item"),isCaretContainer$2=isCaretContainer,isCaretContainerBlock$1=isCaretContainerBlock,curry$2=$_8aqzj925jh8lywmj.curry,isElement$5=$_5oonaz1qjh8lywhz.isElement,isCaretCandidate$2=isCaretCandidate,isForwards=function(direction){return 0<direction},isBackwards=function(direction){return direction<0},skipCaretContainers=function(walk,shallow){for(var node;node=walk(shallow);)if(!isCaretContainerBlock$1(node))return node;return null},findNode=function(node,direction,predicateFn,rootNode,shallow){var walker=new TreeWalker(node,rootNode);if(isBackwards(direction)){if((isContentEditableFalse$4(node)||isCaretContainerBlock$1(node))&&predicateFn(node=skipCaretContainers(walker.prev,!0)))return node;for(;node=skipCaretContainers(walker.prev,shallow);)if(predicateFn(node))return node}if(isForwards(direction)){if((isContentEditableFalse$4(node)||isCaretContainerBlock$1(node))&&predicateFn(node=skipCaretContainers(walker.next,!0)))return node;for(;node=skipCaretContainers(walker.next,shallow);)if(predicateFn(node))return node}return null},getParentBlock=function(node,rootNode){for(;node&&node!==rootNode;){if(isBlockLike(node))return node;node=node.parentNode}return null},isInSameBlock=function(caretPosition1,caretPosition2,rootNode){return getParentBlock(caretPosition1.container(),rootNode)===getParentBlock(caretPosition2.container(),rootNode)},getChildNodeAtRelativeOffset=function(relativeOffset,caretPosition){var container,offset;return caretPosition?(container=caretPosition.container(),offset=caretPosition.offset(),isElement$5(container)?container.childNodes[offset+relativeOffset]:null):null},beforeAfter=function(before,node){var range=node.ownerDocument.createRange();return before?(range.setStartBefore(node),range.setEndBefore(node)):(range.setStartAfter(node),range.setEndAfter(node)),range},isNodesInSameBlock=function(root,node1,node2){return getParentBlock(node1,root)===getParentBlock(node2,root)},lean=function(left,root,node){var sibling,siblingName;for(siblingName=left?"previousSibling":"nextSibling";node&&node!==root;){if(sibling=node[siblingName],isCaretContainer$2(sibling)&&(sibling=sibling[siblingName]),isContentEditableFalse$4(sibling)){if(isNodesInSameBlock(root,sibling,node))return sibling;break}if(isCaretCandidate$2(sibling))break;node=node.parentNode}return null},before$1=curry$2(beforeAfter,!0),after$1=curry$2(beforeAfter,!1),normalizeRange=function(direction,root,range){var node,container,offset,location,leanLeft=curry$2(lean,!0,root),leanRight=curry$2(lean,!1,root);if(container=range.startContainer,offset=range.startOffset,isCaretContainerBlock(container)){if(isElement$5(container)||(container=container.parentNode),"before"===(location=container.getAttribute("data-mce-caret"))&&(node=container.nextSibling,isFakeCaretTarget(node)))return before$1(node);if("after"===location&&(node=container.previousSibling,isFakeCaretTarget(node)))return after$1(node)}if(!range.collapsed)return range;if($_5oonaz1qjh8lywhz.isText(container)){if(isCaretContainer$2(container)){if(1===direction){if(node=leanRight(container))return before$1(node);if(node=leanLeft(container))return after$1(node)}if(-1===direction){if(node=leanLeft(container))return after$1(node);if(node=leanRight(container))return before$1(node)}return range}if(endsWithCaretContainer(container)&&offset>=container.data.length-1)return 1===direction&&(node=leanRight(container))?before$1(node):range;if(startsWithCaretContainer(container)&&offset<=1)return-1===direction&&(node=leanLeft(container))?after$1(node):range;if(offset===container.data.length)return(node=leanRight(container))?before$1(node):range;if(0===offset)return(node=leanLeft(container))?after$1(node):range}return range},isNextToContentEditableFalse=function(relativeOffset,caretPosition){var node=getChildNodeAtRelativeOffset(relativeOffset,caretPosition);return isContentEditableFalse$4(node)&&!$_5oonaz1qjh8lywhz.isBogusAll(node)},isNextToTable=function(relativeOffset,caretPosition){return $_5oonaz1qjh8lywhz.isTable(getChildNodeAtRelativeOffset(relativeOffset,caretPosition))},getRelativeCefElm=function(forward,caretPosition){return Option.from(getChildNodeAtRelativeOffset(forward?0:-1,caretPosition)).filter(isContentEditableFalse$4)},getNormalizedRangeEndPoint=function(direction,root,range){var normalizedRange=normalizeRange(direction,root,range);return-1===direction?CaretPosition.fromRangeStart(normalizedRange):CaretPosition.fromRangeEnd(normalizedRange)},isBeforeContentEditableFalse=curry$2(isNextToContentEditableFalse,0),isAfterContentEditableFalse=curry$2(isNextToContentEditableFalse,-1),isBeforeTable=curry$2(isNextToTable,0),isAfterTable=curry$2(isNextToTable,-1);!function(HDirection){HDirection[HDirection.Backwards=-1]="Backwards",HDirection[HDirection.Forwards=1]="Forwards"}(HDirection||(HDirection={}));var isContentEditableFalse$5=$_5oonaz1qjh8lywhz.isContentEditableFalse,isText$6=$_5oonaz1qjh8lywhz.isText,isElement$6=$_5oonaz1qjh8lywhz.isElement,isBr$4=$_5oonaz1qjh8lywhz.isBr,isCaretCandidate$3=isCaretCandidate,isAtomic$1=function(node){return isAtomicInline(node)||function(node){return!!isNonUiContentEditableFalse(node)&&!0!==$_9tjm51ljh8lywbq.reduce(node.getElementsByTagName("*"),function(result,elm){return result||isContentEditableTrue$1(elm)},!1)}(node)},isEditableCaretCandidate$1=isEditableCaretCandidate,nodeAtIndex=function(container,offset){return container.hasChildNodes()&&offset<container.childNodes.length?container.childNodes[offset]:null},getCaretCandidatePosition=function(direction,node){if(isForwards(direction)){if(isCaretCandidate$3(node.previousSibling)&&!isText$6(node.previousSibling))return CaretPosition$1.before(node);if(isText$6(node))return CaretPosition$1(node,0)}if(isBackwards(direction)){if(isCaretCandidate$3(node.nextSibling)&&!isText$6(node.nextSibling))return CaretPosition$1.after(node);if(isText$6(node))return CaretPosition$1(node,node.data.length)}return isBackwards(direction)?isBr$4(node)?CaretPosition$1.before(node):CaretPosition$1.after(node):CaretPosition$1.before(node)},findCaretPosition=function(direction,startPos,root){var node,nextNode,innerNode,rootContentEditableFalseElm,caretPosition;if(!isElement$6(root)||!startPos)return null;if(startPos.isEqual(CaretPosition$1.after(root))&&root.lastChild){if(caretPosition=CaretPosition$1.after(root.lastChild),isBackwards(direction)&&isCaretCandidate$3(root.lastChild)&&isElement$6(root.lastChild))return isBr$4(root.lastChild)?CaretPosition$1.before(root.lastChild):caretPosition}else caretPosition=startPos;var container=caretPosition.container(),offset=caretPosition.offset();if(isText$6(container)){if(isBackwards(direction)&&0<offset)return CaretPosition$1(container,--offset);if(isForwards(direction)&&offset<container.length)return CaretPosition$1(container,++offset);node=container}else{if(isBackwards(direction)&&0<offset&&(nextNode=nodeAtIndex(container,offset-1),isCaretCandidate$3(nextNode)))return!isAtomic$1(nextNode)&&(innerNode=findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$6(innerNode)?CaretPosition$1(innerNode,innerNode.data.length):CaretPosition$1.after(innerNode):isText$6(nextNode)?CaretPosition$1(nextNode,nextNode.data.length):CaretPosition$1.before(nextNode);if(isForwards(direction)&&offset<container.childNodes.length&&(nextNode=nodeAtIndex(container,offset),isCaretCandidate$3(nextNode)))return isBr$4(nextNode)&&root.lastChild===nextNode?null:function(node,root){var next;return!!$_5oonaz1qjh8lywhz.isBr(node)&&!!(next=findCaretPosition(1,CaretPosition$1.after(node),root))&&!isInSameBlock(CaretPosition$1.before(node),CaretPosition$1.before(next),root)}(nextNode,root)?findCaretPosition(direction,CaretPosition$1.after(nextNode),root):!isAtomic$1(nextNode)&&(innerNode=findNode(nextNode,direction,isEditableCaretCandidate$1,nextNode))?isText$6(innerNode)?CaretPosition$1(innerNode,0):CaretPosition$1.before(innerNode):isText$6(nextNode)?CaretPosition$1(nextNode,0):CaretPosition$1.after(nextNode);node=nextNode||caretPosition.getNode()}return(isForwards(direction)&&caretPosition.isAtEnd()||isBackwards(direction)&&caretPosition.isAtStart())&&(node=findNode(node,direction,$_8aqzj925jh8lywmj.constant(!0),root,!0),isEditableCaretCandidate$1(node,root))?getCaretCandidatePosition(direction,node):(nextNode=findNode(node,direction,isEditableCaretCandidate$1,root),!(rootContentEditableFalseElm=$_9tjm51ljh8lywbq.last($_9tjm51ljh8lywbq.filter(function(node,root){for(var parents=[];node&&node!==root;)parents.push(node),node=node.parentNode;return parents}(container,root),isContentEditableFalse$5)))||nextNode&&rootContentEditableFalseElm.contains(nextNode)?nextNode?getCaretCandidatePosition(direction,nextNode):null:caretPosition=isForwards(direction)?CaretPosition$1.after(rootContentEditableFalseElm):CaretPosition$1.before(rootContentEditableFalseElm))},CaretWalker=function(root){return{next:function(caretPosition){return findCaretPosition(HDirection.Forwards,caretPosition,root)},prev:function(caretPosition){return findCaretPosition(HDirection.Backwards,caretPosition,root)}}},listItems$1=function(elm){return $_ahowuxkjh8lywbj.grep(elm.childNodes,function(child){return"LI"===child.nodeName})},isListItemPadded=function(node){return node&&node.firstChild&&node.firstChild===node.lastChild&&function(node){return" "===node.data||$_5oonaz1qjh8lywhz.isBr(node)}(node.firstChild)},trimListItems=function(elms){return 0<elms.length&&(!(elm=elms[elms.length-1]).firstChild||isListItemPadded(elm))?elms.slice(0,-1):elms;var elm},getParentLi=function(dom,node){var parentBlock=dom.getParent(node,dom.isBlock);return parentBlock&&"LI"===parentBlock.nodeName?parentBlock:null},findLastOf=function(node,rootNode){var caretPos=CaretPosition$1.after(node),newCaretPos=CaretWalker(rootNode).prev(caretPos);return newCaretPos?newCaretPos.toRange():null},insertBefore=function(target,elms,rootNode){var parentElm=target.parentNode;return $_ahowuxkjh8lywbj.each(elms,function(elm){parentElm.insertBefore(elm,target)}),function(node,rootNode){var caretPos=CaretPosition$1.before(node),newCaretPos=CaretWalker(rootNode).next(caretPos);return newCaretPos?newCaretPos.toRange():null}(target,rootNode)},$_eajoh11xjh8lywl6_isListFragment=function(schema,fragment){var firstChild=fragment.firstChild,lastChild=fragment.lastChild;return firstChild&&"meta"===firstChild.name&&(firstChild=firstChild.next),lastChild&&"mce_marker"===lastChild.attr("id")&&(lastChild=lastChild.prev),function(schema,node){var nonEmptyElements=schema.getNonEmptyElements();return node&&(node.isEmpty(nonEmptyElements)||function(schema,node){return schema.getBlockElements()[node.name]&&function(node){return node.firstChild&&node.firstChild===node.lastChild}(node)&&function(node){return"br"===node.name||" "===node.value}(node.firstChild)}(schema,node))}(schema,lastChild)&&(lastChild=lastChild.prev),!(!firstChild||firstChild!==lastChild||"ul"!==firstChild.name&&"ol"!==firstChild.name)},$_eajoh11xjh8lywl6_insertAtCaret=function(serializer,dom,rng,fragment){var domFragment=function(dom,serializer,fragment){var html=serializer.serialize(fragment);return function(domFragment){var firstChild=domFragment.firstChild,lastChild=domFragment.lastChild;return firstChild&&"META"===firstChild.nodeName&&firstChild.parentNode.removeChild(firstChild),lastChild&&"mce_marker"===lastChild.id&&lastChild.parentNode.removeChild(lastChild),domFragment}(dom.createFragment(html))}(dom,serializer,fragment),liTarget=getParentLi(dom,rng.startContainer),liElms=trimListItems(listItems$1(domFragment.firstChild)),rootNode=dom.getRoot(),isAt=function(location){var caretPos=CaretPosition$1.fromRangeStart(rng),caretWalker=CaretWalker(dom.getRoot()),newPos=1===location?caretWalker.prev(caretPos):caretWalker.next(caretPos);return!newPos||getParentLi(dom,newPos.getNode())!==liTarget};return isAt(1)?insertBefore(liTarget,liElms,rootNode):isAt(2)?function(target,elms,rootNode,dom){return dom.insertAfter(elms.reverse(),target),findLastOf(elms[0],rootNode)}(liTarget,liElms,rootNode,dom):function(target,elms,rootNode,rng){var parts=function(parentNode,rng){var beforeRng=rng.cloneRange(),afterRng=rng.cloneRange();return beforeRng.setStartBefore(parentNode),afterRng.setEndAfter(parentNode),[beforeRng.cloneContents(),afterRng.cloneContents()]}(target,rng),parentElm=target.parentNode;return parentElm.insertBefore(parts[0],target),$_ahowuxkjh8lywbj.each(elms,function(li){parentElm.insertBefore(li,target)}),parentElm.insertBefore(parts[1],target),parentElm.removeChild(target),findLastOf(elms[elms.length-1],rootNode)}(liTarget,liElms,rootNode,rng)},$_eajoh11xjh8lywl6_isParentBlockLi=function(dom,node){return!!getParentLi(dom,node)},isText$7=$_5oonaz1qjh8lywhz.isText,isBogus$1=$_5oonaz1qjh8lywhz.isBogus,nodeIndex$1=DOMUtils$1.nodeIndex,normalizedParent=function(node){var parentNode=node.parentNode;return isBogus$1(parentNode)?normalizedParent(parentNode):parentNode},getChildNodes=function(node){return node?$_9tjm51ljh8lywbq.reduce(node.childNodes,function(result,node){return isBogus$1(node)&&"BR"!==node.nodeName?result=result.concat(getChildNodes(node)):result.push(node),result},[]):[]},equal$1=function(a){return function(b){return a===b}},createPathItem=function(node){return(isText$7(node)?"text()":node.nodeName.toLowerCase())+"["+function(node){var nodes,index,numTextFragments;return nodes=getChildNodes(normalizedParent(node)),index=$_9tjm51ljh8lywbq.findIndex(nodes,equal$1(node),node),nodes=nodes.slice(0,index+1),numTextFragments=$_9tjm51ljh8lywbq.reduce(nodes,function(result,node,i){return isText$7(node)&&isText$7(nodes[i-1])&&result++,result},0),nodes=$_9tjm51ljh8lywbq.filter(nodes,$_5oonaz1qjh8lywhz.matchNodeNames(node.nodeName)),(index=$_9tjm51ljh8lywbq.findIndex(nodes,equal$1(node),node))-numTextFragments}(node)+"]"},create$1=function(root,caretPosition){var container,offset,outputOffset,childNodes,parents,path=[];return container=caretPosition.container(),offset=caretPosition.offset(),isText$7(container)?outputOffset=function(node,offset){for(;(node=node.previousSibling)&&isText$7(node);)offset+=node.data.length;return offset}(container,offset):(offset>=(childNodes=container.childNodes).length?(outputOffset="after",offset=childNodes.length-1):outputOffset="before",container=childNodes[offset]),path.push(createPathItem(container)),parents=function(root,node,predicate){var parents=[];for(node=node.parentNode;!(node===root||predicate&&predicate(node));node=node.parentNode)parents.push(node);return parents}(root,container),parents=$_9tjm51ljh8lywbq.filter(parents,$_8aqzj925jh8lywmj.negate($_5oonaz1qjh8lywhz.isBogus)),(path=path.concat($_9tjm51ljh8lywbq.map(parents,function(node){return createPathItem(node)}))).reverse().join("/")+","+outputOffset},resolve$2=function(root,path){var parts,container,offset;return path?(path=(parts=path.split(","))[0].split("/"),offset=1<parts.length?parts[1]:"before",(container=$_9tjm51ljh8lywbq.reduce(path,function(result,value){return(value=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(value))?("text()"===value[1]&&(value[1]="#text"),node=result,name=value[1],index=parseInt(value[2],10),nodes=getChildNodes(node),nodes=$_9tjm51ljh8lywbq.filter(nodes,function(node,index){return!isText$7(node)||!isText$7(nodes[index-1])}),(nodes=$_9tjm51ljh8lywbq.filter(nodes,$_5oonaz1qjh8lywhz.matchNodeNames(name)))[index]):null;var node,name,index,nodes},root))?isText$7(container)?function(container,offset){for(var dataLen,node=container,targetOffset=0;isText$7(node);){if(dataLen=node.data.length,targetOffset<=offset&&offset<=targetOffset+dataLen){container=node,offset-=targetOffset;break}if(!isText$7(node.nextSibling)){container=node,offset=dataLen;break}targetOffset+=dataLen,node=node.nextSibling}return isText$7(container)&&offset>container.data.length&&(offset=container.data.length),CaretPosition$1(container,offset)}(container,parseInt(offset,10)):(offset="after"===offset?nodeIndex$1(container)+1:nodeIndex$1(container),CaretPosition$1(container.parentNode,offset)):null):null},isContentEditableFalse$6=$_5oonaz1qjh8lywhz.isContentEditableFalse,getPoint=function(dom,trim,normalized,rng,start){var childNodes,container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],point=[],after=0,root=dom.getRoot();for($_5oonaz1qjh8lywhz.isText(container)?point.push(normalized?function(trim,container,offset){var node,trimmedOffset;for(trimmedOffset=trim(container.data.slice(0,offset)).length,node=container.previousSibling;node&&$_5oonaz1qjh8lywhz.isText(node);node=node.previousSibling)trimmedOffset+=trim(node.data).length;return trimmedOffset}(trim,container,offset):offset):(offset>=(childNodes=container.childNodes).length&&childNodes.length&&(after=1,offset=Math.max(0,childNodes.length-1)),point.push(dom.nodeIndex(childNodes[offset],normalized)+after));container&&container!==root;container=container.parentNode)point.push(dom.nodeIndex(container,normalized));return point},trimEmptyTextNode=function(node){$_5oonaz1qjh8lywhz.isText(node)&&0===node.data.length&&node.parentNode.removeChild(node)},findIndex$3=function(dom,name,element){var count=0;return $_ahowuxkjh8lywbj.each(dom.select(name),function(node){if("all"!==node.getAttribute("data-mce-bogus"))return node!==element&&void count++}),count},moveEndPoint=function(rng,start){var container,offset,childNodes,prefix=start?"start":"end";container=rng[prefix+"Container"],offset=rng[prefix+"Offset"],$_5oonaz1qjh8lywhz.isElement(container)&&"TR"===container.nodeName&&(container=(childNodes=container.childNodes)[Math.min(start?offset:offset-1,childNodes.length-1)])&&(offset=start?0:container.childNodes.length,rng["set"+(start?"Start":"End")](container,offset))},normalizeTableCellSelection=function(rng){return moveEndPoint(rng,!0),moveEndPoint(rng,!1),rng},findSibling=function(node,offset){var sibling;if($_5oonaz1qjh8lywhz.isElement(node)&&(node=getNode(node,offset),isContentEditableFalse$6(node)))return node;if(isCaretContainer(node)){if($_5oonaz1qjh8lywhz.isText(node)&&isCaretContainerBlock(node)&&(node=node.parentNode),sibling=node.previousSibling,isContentEditableFalse$6(sibling))return sibling;if(sibling=node.nextSibling,isContentEditableFalse$6(sibling))return sibling}},getOffsetBookmark=function(trim,normalized,selection){var element=selection.getNode(),name=element?element.nodeName:null,rng=selection.getRng();if(isContentEditableFalse$6(element)||"IMG"===name)return{name:name,index:findIndex$3(selection.dom,name,element)};var sibling=function(rng){return findSibling(rng.startContainer,rng.startOffset)||findSibling(rng.endContainer,rng.endOffset)}(rng);return sibling?{name:name=sibling.tagName,index:findIndex$3(selection.dom,name,sibling)}:function(trim,selection,normalized,rng){var dom=selection.dom,bookmark={};return bookmark.start=getPoint(dom,trim,normalized,rng,!0),selection.isCollapsed()||(bookmark.end=getPoint(dom,trim,normalized,rng,!1)),bookmark}(trim,selection,normalized,rng)},createBookmarkSpan=function(dom,id,filled){var args={"data-mce-type":"bookmark",id:id,style:"overflow:hidden;line-height:0px"};return filled?dom.create("span",args,"&#xFEFF;"):dom.create("span",args)},getPersistentBookmark=function(selection,filled){var dom=selection.dom,rng=selection.getRng(),id=dom.uniqueId(),collapsed=selection.isCollapsed(),element=selection.getNode(),name=element.nodeName;if("IMG"===name)return{name:name,index:findIndex$3(dom,name,element)};var rng2=normalizeTableCellSelection(rng.cloneRange());if(!collapsed){rng2.collapse(!1);var endBookmarkNode=createBookmarkSpan(dom,id+"_end",filled);rng2.insertNode(endBookmarkNode),trimEmptyTextNode(endBookmarkNode.nextSibling)}(rng=normalizeTableCellSelection(rng)).collapse(!0);var startBookmarkNode=createBookmarkSpan(dom,id+"_start",filled);return rng.insertNode(startBookmarkNode),trimEmptyTextNode(startBookmarkNode.previousSibling),selection.moveToBookmark({id:id,keep:1}),{id:id}},$_8b82yg2ojh8lywpq={getBookmark:function(selection,type,normalized){return 2===type?getOffsetBookmark($_d383mr21jh8lywlv_trim,normalized,selection):3===type?function(selection){var rng=selection.getRng();return{start:create$1(selection.dom.getRoot(),CaretPosition$1.fromRangeStart(rng)),end:create$1(selection.dom.getRoot(),CaretPosition$1.fromRangeEnd(rng))}}(selection):type?function(selection){return{rng:selection.getRng()}}(selection):getPersistentBookmark(selection,!1)},getUndoBookmark:$_eqpqvr6jh8lyw3s.curry(getOffsetBookmark,$_eqpqvr6jh8lyw3s.identity,!0),getPersistentBookmark:getPersistentBookmark},isCaretNode=function(node){return $_5oonaz1qjh8lywhz.isElement(node)&&"_mce_caret"===node.id},getParentCaretContainer=function(body,node){for(;node&&node!==body;){if("_mce_caret"===node.id)return node;node=node.parentNode}return null},addBogus=function(dom,node){return!dom.isBlock(node)||node.innerHTML||$_9bpim8ajh8lyw68.ie||(node.innerHTML='<br data-mce-bogus="1" />'),node},tryFindRangePosition=function(node,rng){return $_9kvypj2cjh8lywnz.lastPositionIn(node).fold(function(){return!1},function(pos){return rng.setStart(pos.container(),pos.offset()),rng.setEnd(pos.container(),pos.offset()),!0})},padEmptyCaretContainer=function(root,node,rng){return!(!function(node){return!1===node.hasChildNodes()}(node)||!getParentCaretContainer(root,node)||(function(node,rng){var textNode=node.ownerDocument.createTextNode($_d383mr21jh8lywlv_ZWSP);node.appendChild(textNode),rng.setStart(textNode,0),rng.setEnd(textNode,0)}(node,rng),0))},setEndPoint=function(dom,start,bookmark,rng){var i,node,offset,children,point=bookmark[start?"start":"end"],root=dom.getRoot();if(point){for(offset=point[0],node=root,i=point.length-1;1<=i;i--){if(children=node.childNodes,padEmptyCaretContainer(root,node,rng))return!0;if(point[i]>children.length-1)return!!padEmptyCaretContainer(root,node,rng)||tryFindRangePosition(node,rng);node=children[point[i]]}3===node.nodeType&&(offset=Math.min(point[0],node.nodeValue.length)),1===node.nodeType&&(offset=Math.min(point[0],node.childNodes.length)),start?rng.setStart(node,offset):rng.setEnd(node,offset)}return!0},isValidTextNode=function(node){return $_5oonaz1qjh8lywhz.isText(node)&&0<node.data.length},restoreEndPoint=function(dom,suffix,bookmark){var node,idx,next,prev,container,offset,marker=dom.get(bookmark.id+"_"+suffix),keep=bookmark.keep;if(marker){if(node=marker.parentNode,idx="start"===suffix?keep?marker.hasChildNodes()?(node=marker.firstChild,1):isValidTextNode(marker.nextSibling)?(node=marker.nextSibling,0):isValidTextNode(marker.previousSibling)?(node=marker.previousSibling,marker.previousSibling.data.length):(node=marker.parentNode,dom.nodeIndex(marker)+1):dom.nodeIndex(marker):keep?marker.hasChildNodes()?(node=marker.firstChild,1):isValidTextNode(marker.previousSibling)?(node=marker.previousSibling,marker.previousSibling.data.length):(node=marker.parentNode,dom.nodeIndex(marker)):dom.nodeIndex(marker),container=node,offset=idx,!keep){for(prev=marker.previousSibling,next=marker.nextSibling,$_ahowuxkjh8lywbj.each($_ahowuxkjh8lywbj.grep(marker.childNodes),function(node){$_5oonaz1qjh8lywhz.isText(node)&&(node.nodeValue=node.nodeValue.replace(/\uFEFF/g,""))});marker=dom.get(bookmark.id+"_"+suffix);)dom.remove(marker,!0);prev&&next&&prev.nodeType===next.nodeType&&$_5oonaz1qjh8lywhz.isText(prev)&&!$_9bpim8ajh8lyw68.opera&&(idx=prev.nodeValue.length,prev.appendData(next.nodeValue),dom.remove(next),container=prev,offset=idx)}return Option.some(CaretPosition$1(container,offset))}return Option.none()},$_bncspc2qjh8lywq4_resolve=function(selection,bookmark){var dom=selection.dom;if(bookmark){if(function(bookmark){return $_ahowuxkjh8lywbj.isArray(bookmark.start)}(bookmark))return function(dom,bookmark){var rng=dom.createRng();return setEndPoint(dom,!0,bookmark,rng)&&setEndPoint(dom,!1,bookmark,rng)?Option.some(rng):Option.none()}(dom,bookmark);if(function(bookmark){return"string"==typeof bookmark.start}(bookmark))return Option.some(function(dom,bookmark){var rng,pos;return rng=dom.createRng(),pos=resolve$2(dom.getRoot(),bookmark.start),rng.setStart(pos.container(),pos.offset()),pos=resolve$2(dom.getRoot(),bookmark.end),rng.setEnd(pos.container(),pos.offset()),rng}(dom,bookmark));if(function(bookmark){return bookmark.hasOwnProperty("id")}(bookmark))return function(dom,bookmark){var o1,o2,startPos=restoreEndPoint(dom,"start",bookmark),endPos=restoreEndPoint(dom,"end",bookmark);return $_b8twwq26jh8lywmm_liftN([startPos,(o1=endPos,o2=startPos,o1.isSome()?o1:o2)],function(spos,epos){var rng=dom.createRng();return rng.setStart(addBogus(dom,spos.container()),spos.offset()),rng.setEnd(addBogus(dom,epos.container()),epos.offset()),rng})}(dom,bookmark);if(function(bookmark){return bookmark.hasOwnProperty("name")}(bookmark))return function(dom,bookmark){return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function(elm){var rng=dom.createRng();return rng.selectNode(elm),rng})}(dom,bookmark);if(function(bookmark){return bookmark.hasOwnProperty("rng")}(bookmark))return Option.some(bookmark.rng)}return Option.none()},$_eyp5ec2njh8lywpo_getBookmark=function(selection,type,normalized){return $_8b82yg2ojh8lywpq.getBookmark(selection,type,normalized)},$_eyp5ec2njh8lywpo_moveToBookmark=function(selection,bookmark){$_bncspc2qjh8lywq4_resolve(selection,bookmark).each(function(rng){selection.setRng(rng)})},$_eyp5ec2njh8lywpo_isBookmarkNode=function(node){return $_5oonaz1qjh8lywhz.isElement(node)&&"SPAN"===node.tagName&&"bookmark"===node.getAttribute("data-mce-type")},each$8=$_ahowuxkjh8lywbj.each,ElementUtils=function(dom){this.compare=function(node1,node2){if(node1.nodeName!==node2.nodeName)return!1;var getAttribs=function(node){var attribs={};return each$8(dom.getAttribs(node),function(attr){var name=attr.nodeName.toLowerCase();0!==name.indexOf("_")&&"style"!==name&&0!==name.indexOf("data-")&&(attribs[name]=dom.getAttrib(node,name))}),attribs},compareObjects=function(obj1,obj2){var value,name;for(name in obj1)if(obj1.hasOwnProperty(name)){if(void 0===(value=obj2[name]))return!1;if(obj1[name]!==value)return!1;delete obj2[name]}for(name in obj2)if(obj2.hasOwnProperty(name))return!1;return!0};return!(!compareObjects(getAttribs(node1),getAttribs(node2))||!compareObjects(dom.parseStyle(dom.getAttrib(node1,"style")),dom.parseStyle(dom.getAttrib(node2,"style")))||$_eyp5ec2njh8lywpo_isBookmarkNode(node1)||$_eyp5ec2njh8lywpo_isBookmarkNode(node2))}},$_9hl8mu2vjh8lywr4_before=function(marker,elements){$_5wjzy24jh8lyw2t.each(elements,function(x){$_4m7u2e2kjh8lywpi.before(marker,x)})},$_9hl8mu2vjh8lywr4_append=function(parent,elements){$_5wjzy24jh8lyw2t.each(elements,function(x){$_4m7u2e2kjh8lywpi.append(parent,x)})},remove$3=function(element){var dom=element.dom();null!==dom.parentNode&&dom.parentNode.removeChild(dom)},$_bfmuql2ujh8lywr1={empty:function(element){element.dom().textContent="",$_5wjzy24jh8lyw2t.each($_a43q0i17jh8lywfe.children(element),function(rogue){remove$3(rogue)})},remove:remove$3,unwrap:function(wrapper){var children=$_a43q0i17jh8lywfe.children(wrapper);0<children.length&&$_9hl8mu2vjh8lywr4_before(wrapper,children),remove$3(wrapper)}},api=function(is,name){var getOptionSafe=function(element){return is(element)?Option.from(element.dom().nodeValue):Option.none()},browser=$_9hkktfnjh8lywc6.detect().browser,getOption=browser.isIE()&&10===browser.version.major?function(element){try{return getOptionSafe(element)}catch(e){return Option.none()}}:getOptionSafe;return{get:function(element){if(!is(element))throw new Error("Can only get "+name+" value of a "+name+" node");return getOption(element).getOr("")},getOption:getOption,set:function(element,value){if(!is(element))throw new Error("Can only set raw "+name+" value of a "+name+" node");element.dom().nodeValue=value}}}($_7j1jt210jh8lywdx.isText,"text"),$_lh5l42wjh8lywr8_get=function(element){return api.get(element)},$_2bvsfb2tjh8lywqo_removeTrailingBr=function(elm){var allBrs=$_eebxu2gjh8lywp3_descendants(elm,"br"),brs=$_5wjzy24jh8lyw2t.filter(function(elm){for(var children=[],rawNode=elm.dom();rawNode;)children.push($_cgttw3zjh8lywdq.fromDom(rawNode)),rawNode=rawNode.lastChild;return children}(elm).slice(-1),isBr);allBrs.length===brs.length&&$_5wjzy24jh8lyw2t.each(brs,$_bfmuql2ujh8lywr1.remove)},$_2bvsfb2tjh8lywqo_fillWithPaddingBr=function(elm){$_bfmuql2ujh8lywr1.empty(elm),$_4m7u2e2kjh8lywpi.append(elm,$_cgttw3zjh8lywdq.fromHtml('<br data-mce-bogus="1">'))},$_2bvsfb2tjh8lywqo_trimBlockTrailingBr=function(elm){$_a43q0i17jh8lywfe.lastChild(elm).each(function(lastChild){$_a43q0i17jh8lywfe.prevSibling(lastChild).each(function(lastChildPrevSibling){isBlock(elm)&&isBr(lastChild)&&isBlock(lastChildPrevSibling)&&$_bfmuql2ujh8lywr1.remove(lastChild)})})},makeMap$3=$_ahowuxkjh8lywbj.makeMap;function Writer(settings){var indent,indentBefore,indentAfter,encode,htmlOutput,html=[];return indent=(settings=settings||{}).indent,indentBefore=makeMap$3(settings.indent_before||""),indentAfter=makeMap$3(settings.indent_after||""),encode=$_gex7a11rjh8lywi4.getEncodeFunc(settings.entity_encoding||"raw",settings.entities),htmlOutput="html"===settings.element_format,{start:function(name,attrs,empty){var i,l,attr,value;if(indent&&indentBefore[name]&&0<html.length&&0<(value=html[html.length-1]).length&&"\n"!==value&&html.push("\n"),html.push("<",name),attrs)for(i=0,l=attrs.length;i<l;i++)attr=attrs[i],html.push(" ",attr.name,'="',encode(attr.value,!0),'"');html[html.length]=!empty||htmlOutput?">":" />",empty&&indent&&indentAfter[name]&&0<html.length&&0<(value=html[html.length-1]).length&&"\n"!==value&&html.push("\n")},end:function(name){var value;html.push("</",name,">"),indent&&indentAfter[name]&&0<html.length&&0<(value=html[html.length-1]).length&&"\n"!==value&&html.push("\n")},text:function(text,raw){0<text.length&&(html[html.length]=raw?text:encode(text))},cdata:function(text){html.push("<![CDATA[",text,"]]>")},comment:function(text){html.push("\x3c!--",text,"--\x3e")},pi:function(name,text){text?html.push("<?",name," ",encode(text),"?>"):html.push("<?",name,"?>"),indent&&html.push("\n")},doctype:function(text){html.push("<!DOCTYPE",text,">",indent?"\n":"")},reset:function(){html.length=0},getContent:function(){return html.join("").replace(/\n$/,"")}}}function HtmlSerializer(settings,schema){void 0===schema&&(schema=Schema());var writer=Writer(settings);return(settings=settings||{}).validate=!("validate"in settings)||settings.validate,{serialize:function(node){var handlers,validate;validate=settings.validate,handlers={3:function(node){writer.text(node.value,node.raw)},8:function(node){writer.comment(node.value)},7:function(node){writer.pi(node.name,node.value)},10:function(node){writer.doctype(node.value)},4:function(node){writer.cdata(node.value)},11:function(node){if(node=node.firstChild)for(;walk(node),node=node.next;);}},writer.reset();var walk=function(node){var name,isEmpty,attrs,attrName,attrValue,sortedAttrs,i,l,elementRule,handler=handlers[node.type];if(handler)handler(node);else{if(name=node.name,isEmpty=node.shortEnded,attrs=node.attributes,validate&&attrs&&1<attrs.length&&((sortedAttrs=[]).map={},elementRule=schema.getElementRule(node.name))){for(i=0,l=elementRule.attributesOrder.length;i<l;i++)(attrName=elementRule.attributesOrder[i])in attrs.map&&(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));for(i=0,l=attrs.length;i<l;i++)(attrName=attrs[i].name)in sortedAttrs.map||(attrValue=attrs.map[attrName],sortedAttrs.map[attrName]=attrValue,sortedAttrs.push({name:attrName,value:attrValue}));attrs=sortedAttrs}if(writer.start(node.name,attrs,isEmpty),!isEmpty){if(node=node.firstChild)for(;walk(node),node=node.next;);writer.end(name)}}};return 1!==node.type||settings.inner?handlers[11](node):walk(node),writer.getContent()}}}var normalizeBlockSelectionRange=function(rng){var startPos=CaretPosition$1.fromRangeStart(rng),endPos=CaretPosition$1.fromRangeEnd(rng),rootNode=rng.commonAncestorContainer;return $_9kvypj2cjh8lywnz.fromPosition(!1,rootNode,endPos).map(function(newEndPos){return!isInSameBlock(startPos,endPos,rootNode)&&isInSameBlock(startPos,newEndPos,rootNode)?function(sc,so,ec,eo){var rng=document.createRange();return rng.setStart(sc,so),rng.setEnd(ec,eo),rng}(startPos.container(),startPos.offset(),newEndPos.container(),newEndPos.offset()):rng}).getOr(rng)},$_cnbluh30jh8lywrn_normalize=function(rng){return rng.collapsed?rng:normalizeBlockSelectionRange(rng)},isTableCell$2=$_5oonaz1qjh8lywhz.matchNodeNames("td th"),insertHtmlAtCaret=function(editor,value,details){var parser,serializer,parentNode,rootNode,fragment,args,marker,rng,node,node2,bookmarkHtml,merge,textInlineElements=editor.schema.getTextInlineElements(),selection=editor.selection,dom=editor.dom;if(/^ | $/.test(value)&&(value=function(html){var rng,container,offset;rng=selection.getRng(),container=rng.startContainer,offset=rng.startOffset;var hasSiblingText=function(siblingName){return container[siblingName]&&3===container[siblingName].nodeType};return 3===container.nodeType&&(0<offset?html=html.replace(/^&nbsp;/," "):hasSiblingText("previousSibling")||(html=html.replace(/^ /,"&nbsp;")),offset<container.length?html=html.replace(/&nbsp;(<br>|)$/," "):hasSiblingText("nextSibling")||(html=html.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),html}(value)),parser=editor.parser,merge=details.merge,serializer=HtmlSerializer({validate:editor.settings.validate},editor.schema),bookmarkHtml='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',args={content:value,format:"html",selection:!0,paste:details.paste},(args=editor.fire("BeforeSetContent",args)).isDefaultPrevented())editor.fire("SetContent",{content:args.content,format:"html",selection:!0,paste:details.paste});else{-1===(value=args.content).indexOf("{$caret}")&&(value+="{$caret}"),value=value.replace(/\{\$caret\}/,bookmarkHtml);var caretElement=(rng=selection.getRng()).startContainer||(rng.parentElement?rng.parentElement():null),body=editor.getBody();caretElement===body&&selection.isCollapsed()&&dom.isBlock(body.firstChild)&&function(node){return node&&!editor.schema.getShortEndedElements()[node.nodeName]}(body.firstChild)&&dom.isEmpty(body.firstChild)&&((rng=dom.createRng()).setStart(body.firstChild,0),rng.setEnd(body.firstChild,0),selection.setRng(rng)),selection.isCollapsed()||(editor.selection.setRng($_cnbluh30jh8lywrn_normalize(editor.selection.getRng())),editor.getDoc().execCommand("Delete",!1,null),function(){var rng,container,offset;container=(rng=selection.getRng()).startContainer,offset=rng.startOffset,3===container.nodeType&&rng.collapsed&&(" "===container.data[offset]?(container.deleteData(offset,1),/[\u00a0| ]$/.test(value)||(value+=" ")):" "===container.data[offset-1]&&(container.deleteData(offset-1,1),/[\u00a0| ]$/.test(value)||(value=" "+value)))}());var elm,parserArgs={context:(parentNode=selection.getNode()).nodeName.toLowerCase(),data:details.data,insert:!0};if(fragment=parser.parse(value,parserArgs),!0===details.paste&&$_eajoh11xjh8lywl6_isListFragment(editor.schema,fragment)&&$_eajoh11xjh8lywl6_isParentBlockLi(dom,parentNode))return rng=$_eajoh11xjh8lywl6_insertAtCaret(serializer,dom,editor.selection.getRng(),fragment),editor.selection.setRng(rng),void editor.fire("SetContent",args);if(function(fragment){for(var node=fragment;node=node.walk();)1===node.type&&node.attr("data-mce-fragment","1")}(fragment),"mce_marker"===(node=fragment.lastChild).attr("id"))for(node=(marker=node).prev;node;node=node.walk(!0))if(3===node.type||!dom.isBlock(node.name)){editor.schema.isValidChild(node.parent.name,"span")&&node.parent.insert(marker,node,"br"===node.name);break}if(editor._selectionOverrides.showBlockCaretContainer(parentNode),parserArgs.invalid){for(selection.setContent(bookmarkHtml),parentNode=selection.getNode(),rootNode=editor.getBody(),9===parentNode.nodeType?parentNode=node=rootNode:node=parentNode;node!==rootNode;)node=(parentNode=node).parentNode;value=parentNode===rootNode?rootNode.innerHTML:dom.getOuterHTML(parentNode),value=serializer.serialize(parser.parse(value.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return serializer.serialize(fragment)}))),parentNode===rootNode?dom.setHTML(rootNode,value):dom.setOuterHTML(parentNode,value)}else value=serializer.serialize(fragment),function(editor,value,parentNode){if("all"===parentNode.getAttribute("data-mce-bogus"))parentNode.parentNode.insertBefore(editor.dom.createFragment(value),parentNode);else{var node=parentNode.firstChild,node2=parentNode.lastChild;!node||node===node2&&"BR"===node.nodeName?editor.dom.setHTML(parentNode,value):editor.selection.setContent(value)}}(editor,value,parentNode);!function(){if(merge){var root_1=editor.getBody(),elementUtils_1=new ElementUtils(dom);$_ahowuxkjh8lywbj.each(dom.select("*[data-mce-fragment]"),function(node){for(var testNode=node.parentNode;testNode&&testNode!==root_1;testNode=testNode.parentNode)textInlineElements[node.nodeName.toLowerCase()]&&elementUtils_1.compare(testNode,node)&&dom.remove(node,!0)})}}(),function(marker){var parentEditableFalseElm,parentBlock,nextRng;if(marker){if(selection.scrollIntoView(marker),parentEditableFalseElm=function(node){for(var root=editor.getBody();node&&node!==root;node=node.parentNode)if("false"===editor.dom.getContentEditable(node))return node;return null}(marker))return dom.remove(marker),selection.select(parentEditableFalseElm);rng=dom.createRng(),(node=marker.previousSibling)&&3===node.nodeType?(rng.setStart(node,node.nodeValue.length),$_9bpim8ajh8lyw68.ie||(node2=marker.nextSibling)&&3===node2.nodeType&&(node.appendData(node2.data),node2.parentNode.removeChild(node2))):(rng.setStartBefore(marker),rng.setEndBefore(marker)),parentBlock=dom.getParent(marker,dom.isBlock),dom.remove(marker),parentBlock&&dom.isEmpty(parentBlock)&&(editor.$(parentBlock).empty(),rng.setStart(parentBlock,0),rng.setEnd(parentBlock,0),isTableCell$2(parentBlock)||function(node){return!!node.getAttribute("data-mce-fragment")}(parentBlock)||!(nextRng=function(rng){var caretPos=CaretPosition$1.fromRangeStart(rng);if(caretPos=CaretWalker(editor.getBody()).next(caretPos))return caretPos.toRange()}(rng))?dom.add(parentBlock,dom.create("br",{"data-mce-bogus":"1"})):(rng=nextRng,dom.remove(parentBlock))),selection.setRng(rng)}}(dom.get("mce_marker")),elm=editor.getBody(),$_ahowuxkjh8lywbj.each(elm.getElementsByTagName("*"),function(elm){elm.removeAttribute("data-mce-fragment")}),function(dom,elm){Option.from(dom.getParent(elm,"td,th")).map($_cgttw3zjh8lywdq.fromDom).each($_2bvsfb2tjh8lywqo_trimBlockTrailingBr)}(editor.dom,editor.selection.getStart()),editor.fire("SetContent",args),editor.addVisual()}},$_13xltl1wjh8lywkr_insertAtCaret=function(editor,value){var result=function(value){var details;return"string"!=typeof value?(details=$_ahowuxkjh8lywbj.extend({paste:value.paste,data:{paste:value.paste}},value),{content:value.content,details:details}):{content:value,details:{}}}(value);insertHtmlAtCaret(editor,result.content,result.details)};function ClosestOrAncestor(is,ancestor,scope,a,isRoot){return is(scope,a)?Option.some(scope):$_dp4g6d7jh8lyw3y.isFunction(isRoot)&&isRoot(scope)?Option.none():ancestor(scope,a,isRoot)}var ancestor=function(scope,predicate,isRoot){for(var element=scope.dom(),stop=$_dp4g6d7jh8lyw3y.isFunction(isRoot)?isRoot:$_eqpqvr6jh8lyw3s.constant(!1);element.parentNode;){element=element.parentNode;var el=$_cgttw3zjh8lywdq.fromDom(element);if(predicate(el))return Option.some(el);if(stop(el))break}return Option.none()},child$1=function(scope,predicate){return $_5wjzy24jh8lyw2t.find(scope.dom().childNodes,$_eqpqvr6jh8lyw3s.compose(predicate,$_cgttw3zjh8lywdq.fromDom)).map($_cgttw3zjh8lywdq.fromDom)},descendant=function(scope,predicate){var descend=function(element){for(var i=0;i<element.childNodes.length;i++){if(predicate($_cgttw3zjh8lywdq.fromDom(element.childNodes[i])))return Option.some($_cgttw3zjh8lywdq.fromDom(element.childNodes[i]));var res=descend(element.childNodes[i]);if(res.isSome())return res}return Option.none()};return descend(scope.dom())},$_6hl03835jh8lywsm={first:function(predicate){return descendant($_boa99a15jh8lywey.body(),predicate)},ancestor:ancestor,closest:function(scope,predicate,isRoot){return ClosestOrAncestor(function(scope){return predicate(scope)},ancestor,scope,predicate,isRoot)},sibling:function(scope,predicate){var element=scope.dom();return element.parentNode?child$1($_cgttw3zjh8lywdq.fromDom(element.parentNode),function(x){return!$_5f6gpb1djh8lywg5.eq(scope,x)&&predicate(x)}):Option.none()},child:child$1,descendant:descendant},sectionResult=$_4jz0ce18jh8lywft.immutable("sections","settings"),isTouch=$_9hkktfnjh8lywc6.detect().deviceType.isTouch(),mobilePlugins=["lists","autolink","autosave"],defaultMobileSettings={theme:"mobile"},normalizePlugins=function(plugins){var pluginNames=$_dp4g6d7jh8lyw3y.isArray(plugins)?plugins.join(" "):plugins,trimmedPlugins=$_5wjzy24jh8lyw2t.map($_dp4g6d7jh8lyw3y.isString(pluginNames)?pluginNames.split(" "):[],$_4w196awjh8lywdj_trim);return $_5wjzy24jh8lyw2t.filter(trimmedPlugins,function(item){return 0<item.length})},extractSections=function(keys,settings){var result=$_g63v2c13jh8lywej.bifilter(settings,function(value,key){return $_5wjzy24jh8lyw2t.contains(keys,key)});return sectionResult(result.t,result.f)},hasSection=function(sectionResult,name){return sectionResult.sections().hasOwnProperty(name)},processPlugins=function(isTouchDevice,sectionResult,defaultOverrideSettings,settings){var forcedPlugins=normalizePlugins(defaultOverrideSettings.forced_plugins),plugins=normalizePlugins(settings.plugins),combinedPlugins=function(forcedPlugins,plugins){return[].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins))}(forcedPlugins,isTouchDevice&&hasSection(sectionResult,"mobile")?function(plugins){return $_5wjzy24jh8lyw2t.filter(plugins,$_eqpqvr6jh8lyw3s.curry($_5wjzy24jh8lyw2t.contains,mobilePlugins))}(plugins):plugins);return $_ahowuxkjh8lywbj.extend(settings,{plugins:combinedPlugins.join(" ")})},combineSettings=function(isTouchDevice,defaultSettings,defaultOverrideSettings,settings){var sectionResult=extractSections(["mobile"],settings),extendedSettings=$_ahowuxkjh8lywbj.extend(defaultSettings,defaultOverrideSettings,sectionResult.settings(),function(isTouchDevice,sectionResult){var isInline=sectionResult.settings().inline;return isTouchDevice&&hasSection(sectionResult,"mobile")&&!isInline}(isTouchDevice,sectionResult)?function(sectionResult,name,defaults){var sections=sectionResult.sections(),sectionSettings=sections.hasOwnProperty(name)?sections[name]:{};return $_ahowuxkjh8lywbj.extend({},defaults,sectionSettings)}(sectionResult,"mobile",defaultMobileSettings):{},{validate:!0,content_editable:sectionResult.settings().inline,external_plugins:function(overrideSettings,settings){var userDefinedExternalPlugins=settings.external_plugins?settings.external_plugins:{};return overrideSettings&&overrideSettings.external_plugins?$_ahowuxkjh8lywbj.extend({},overrideSettings.external_plugins,userDefinedExternalPlugins):userDefinedExternalPlugins}(defaultOverrideSettings,sectionResult.settings())});return processPlugins(isTouchDevice,sectionResult,defaultOverrideSettings,extendedSettings)},getFiltered=function(predicate,editor,name){return Option.from(editor.settings[name]).filter(predicate)},getString=$_eqpqvr6jh8lyw3s.curry(getFiltered,$_dp4g6d7jh8lyw3y.isString),getParam=function(editor,name,defaultVal,type){var p,value=name in editor.settings?editor.settings[name]:defaultVal;return"hash"===type?function(value){var output={};return"string"==typeof value?$_5wjzy24jh8lyw2t.each(0<value.indexOf("=")?value.split(/[;,](?![^=;,]*(?:[;,]|$))/):value.split(","),function(val){var arr=val.split("=");1<arr.length?output[$_ahowuxkjh8lywbj.trim(arr[0])]=$_ahowuxkjh8lywbj.trim(arr[1]):output[$_ahowuxkjh8lywbj.trim(arr[0])]=$_ahowuxkjh8lywbj.trim(arr)}):output=value,output}(value):"string"===type?getFiltered($_dp4g6d7jh8lyw3y.isString,editor,name).getOr(defaultVal):"number"===type?getFiltered($_dp4g6d7jh8lyw3y.isNumber,editor,name).getOr(defaultVal):"boolean"===type?getFiltered($_dp4g6d7jh8lyw3y.isBoolean,editor,name).getOr(defaultVal):"object"===type?getFiltered($_dp4g6d7jh8lyw3y.isObject,editor,name).getOr(defaultVal):"array"===type?getFiltered($_dp4g6d7jh8lyw3y.isArray,editor,name).getOr(defaultVal):"string[]"===type?getFiltered((p=$_dp4g6d7jh8lyw3y.isString,function(a){return $_dp4g6d7jh8lyw3y.isArray(a)&&$_5wjzy24jh8lyw2t.forall(a,p)}),editor,name).getOr(defaultVal):"function"===type?getFiltered($_dp4g6d7jh8lyw3y.isFunction,editor,name).getOr(defaultVal):value},strongRtl=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,normalizePosition=function(forward,pos){var container=pos.container(),offset=pos.offset();return forward?isCaretContainerInline(container)?$_5oonaz1qjh8lywhz.isText(container.nextSibling)?CaretPosition$1(container.nextSibling,0):CaretPosition$1.after(container):isBeforeInline(pos)?CaretPosition$1(container,offset+1):pos:isCaretContainerInline(container)?$_5oonaz1qjh8lywhz.isText(container.previousSibling)?CaretPosition$1(container.previousSibling,container.previousSibling.data.length):CaretPosition$1.before(container):isAfterInline(pos)?CaretPosition$1(container,offset-1):pos},$_231v7s37jh8lywt3={isInlineTarget:function(editor,elm){var selector=getString(editor,"inline_boundaries_selector").getOr("a[href],code");return $_5h4ipt1fjh8lywgi.is($_cgttw3zjh8lywdq.fromDom(elm),selector)},findRootInline:function(isInlineTarget,rootNode,pos){var parents=function(isInlineTarget,rootNode,pos){return $_5wjzy24jh8lyw2t.filter(DOMUtils$1.DOM.getParents(pos.container(),"*",rootNode),isInlineTarget)}(isInlineTarget,rootNode,pos);return Option.from(parents[parents.length-1])},isRtl:function(element){return"rtl"===DOMUtils$1.DOM.getStyle(element,"direction",!0)||(text=element.textContent,strongRtl.test(text));var text},isAtZwsp:function(pos){return isBeforeInline(pos)||isAfterInline(pos)},normalizePosition:normalizePosition,normalizeForwards:$_eqpqvr6jh8lyw3s.curry(normalizePosition,!0),normalizeBackwards:$_eqpqvr6jh8lyw3s.curry(normalizePosition,!1),hasSameParentBlock:function(rootNode,node1,node2){var block1=getParentBlock(node1,rootNode),block2=getParentBlock(node2,rootNode);return block1&&block1===block2}},$_aj8isd34jh8lyws4_getParentBlock=function(rootNode,elm){return $_5f6gpb1djh8lywg5.contains(rootNode,elm)?$_6hl03835jh8lywsm.closest(elm,function(element){return isTextBlock(element)||isListItem(element)},function(rootNode){return function(elm){return $_5f6gpb1djh8lywg5.eq(rootNode,$_cgttw3zjh8lywdq.fromDom(elm.dom().parentNode))}}(rootNode)):Option.none()},$_aj8isd34jh8lyws4_paddEmptyBody=function(editor){editor.dom.isEmpty(editor.getBody())&&(editor.setContent(""),function(editor){var body=editor.getBody(),node=body.firstChild&&editor.dom.isBlock(body.firstChild)?body.firstChild:body;editor.selection.setCursorLocation(node,0)}(editor))},$_aj8isd34jh8lyws4_willDeleteLastPositionInElement=function(forward,fromPos,elm){return $_b8twwq26jh8lywmm_liftN([$_9kvypj2cjh8lywnz.firstPositionIn(elm),$_9kvypj2cjh8lywnz.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_231v7s37jh8lywt3.normalizePosition(!0,firstPos),normalizedLastPos=$_231v7s37jh8lywt3.normalizePosition(!1,lastPos),normalizedFromPos=$_231v7s37jh8lywt3.normalizePosition(!1,fromPos);return forward?$_9kvypj2cjh8lywnz.nextPosition(elm,normalizedFromPos).map(function(nextPos){return nextPos.isEqual(normalizedLastPos)&&fromPos.isEqual(normalizedFirstPos)}).getOr(!1):$_9kvypj2cjh8lywnz.prevPosition(elm,normalizedFromPos).map(function(prevPos){return prevPos.isEqual(normalizedFirstPos)&&fromPos.isEqual(normalizedLastPos)}).getOr(!1)}).getOr(!0)},ancestor$1=function(scope,selector,isRoot){return $_6hl03835jh8lywsm.ancestor(scope,function(e){return $_5h4ipt1fjh8lywgi.is(e,selector)},isRoot)},$_7sg18r3cjh8lywu1_ancestor=ancestor$1,$_7sg18r3cjh8lywu1_descendant=function(scope,selector){return $_5h4ipt1fjh8lywgi.one(selector,scope)},$_7sg18r3cjh8lywu1_closest=function(scope,selector,isRoot){return ClosestOrAncestor($_5h4ipt1fjh8lywgi.is,ancestor$1,scope,selector,isRoot)},$_8b29ae3bjh8lywu0_ancestor=function(scope,selector,isRoot){return $_7sg18r3cjh8lywu1_ancestor(scope,selector,isRoot).isSome()},isWhitespace=function(rootNode,node){return $_5oonaz1qjh8lywhz.isText(node)&&/^[ \t\r\n]*$/.test(node.data)&&!1===function(rootNode,node){var rootElement=$_cgttw3zjh8lywdq.fromDom(rootNode),startNode=$_cgttw3zjh8lywdq.fromDom(node);return $_8b29ae3bjh8lywu0_ancestor(startNode,"pre,code",$_eqpqvr6jh8lyw3s.curry($_5f6gpb1djh8lywg5.eq,rootElement))}(rootNode,node)},isContent=function(rootNode,node){return isCaretCandidate(node)&&!1===isWhitespace(rootNode,node)||function(node){return $_5oonaz1qjh8lywhz.isElement(node)&&"A"===node.nodeName&&node.hasAttribute("name")}(node)||isBookmark(node)},isBookmark=$_5oonaz1qjh8lywhz.hasAttribute("data-mce-bookmark"),isBogus$2=$_5oonaz1qjh8lywhz.hasAttribute("data-mce-bogus"),isBogusAll$1=$_5oonaz1qjh8lywhz.hasAttributeValue("data-mce-bogus","all"),$_b1urh33ajh8lywts_isEmpty=function(elm){return function(targetNode){var walker,node,brCount=0;if(isContent(targetNode,targetNode))return!1;if(!(node=targetNode.firstChild))return!0;walker=new TreeWalker(node,targetNode);do{if(isBogusAll$1(node))node=walker.next(!0);else if(isBogus$2(node))node=walker.next();else if($_5oonaz1qjh8lywhz.isBr(node))brCount++,node=walker.next();else{if(isContent(targetNode,node))return!1;node=walker.next()}}while(node);return brCount<=1}(elm.dom())},BlockPosition=$_4jz0ce18jh8lywft.immutable("block","position"),BlockBoundary=$_4jz0ce18jh8lywft.immutable("from","to"),getBlockPosition=function(rootNode,pos){var rootElm=$_cgttw3zjh8lywdq.fromDom(rootNode),containerElm=$_cgttw3zjh8lywdq.fromDom(pos.container());return $_aj8isd34jh8lyws4_getParentBlock(rootElm,containerElm).map(function(block){return BlockPosition(block,pos)})},readFromRange=function(rootNode,forward,rng){var fromBlockPos=getBlockPosition(rootNode,CaretPosition$1.fromRangeStart(rng)),toBlockPos=fromBlockPos.bind(function(blockPos){return $_9kvypj2cjh8lywnz.fromPosition(forward,rootNode,blockPos.position()).bind(function(to){return getBlockPosition(rootNode,to).map(function(blockPos){return function(rootNode,forward,blockPosition){return $_5oonaz1qjh8lywhz.isBr(blockPosition.position().getNode())&&!1===$_b1urh33ajh8lywts_isEmpty(blockPosition.block())?$_9kvypj2cjh8lywnz.positionIn(!1,blockPosition.block().dom()).bind(function(lastPositionInBlock){return lastPositionInBlock.isEqual(blockPosition.position())?$_9kvypj2cjh8lywnz.fromPosition(forward,rootNode,lastPositionInBlock).bind(function(to){return getBlockPosition(rootNode,to)}):Option.some(blockPosition)}).getOr(blockPosition):blockPosition}(rootNode,forward,blockPos)})})});return $_b8twwq26jh8lywmm_liftN([fromBlockPos,toBlockPos],BlockBoundary).filter(function(blockBoundary){return function(blockBoundary){return!1===$_5f6gpb1djh8lywg5.eq(blockBoundary.from().block(),blockBoundary.to().block())}(blockBoundary)&&function(blockBoundary){return $_a43q0i17jh8lywfe.parent(blockBoundary.from().block()).bind(function(parent1){return $_a43q0i17jh8lywfe.parent(blockBoundary.to().block()).filter(function(parent2){return $_5f6gpb1djh8lywg5.eq(parent1,parent2)})}).isSome()}(blockBoundary)&&function(blockBoundary){return!1===$_5oonaz1qjh8lywhz.isContentEditableFalse(blockBoundary.from().block())&&!1===$_5oonaz1qjh8lywhz.isContentEditableFalse(blockBoundary.to().block())}(blockBoundary)})},$_bmbex333jh8lywru_read=function(rootNode,forward,rng){return rng.collapsed?readFromRange(rootNode,forward,rng):Option.none()},parentsUntil$1=function(startNode,rootElm,predicate){return $_5f6gpb1djh8lywg5.contains(rootElm,startNode)?$_a43q0i17jh8lywfe.parents(startNode,function(elm){return predicate(elm)||$_5f6gpb1djh8lywg5.eq(elm,rootElm)}).slice(0,-1):[]},parents$1=function(startNode,rootElm){return parentsUntil$1(startNode,rootElm,$_eqpqvr6jh8lyw3s.constant(!1))},$_dyxtub3ejh8lywxq_parents=parents$1,$_dyxtub3ejh8lywxq_parentsAndSelf=function(startNode,rootElm){return[startNode].concat(parents$1(startNode,rootElm))},extractChildren=function(block){var children=function(block){var children=$_a43q0i17jh8lywfe.children(block);return $_5wjzy24jh8lyw2t.findIndex(children,isBlock).fold(function(){return children},function(index){return children.slice(0,index)})}(block);return $_5wjzy24jh8lyw2t.each(children,function(node){$_bfmuql2ujh8lywr1.remove(node)}),children},trimBr=function(first,block){$_9kvypj2cjh8lywnz.positionIn(first,block.dom()).each(function(position){var node=position.getNode();$_5oonaz1qjh8lywhz.isBr(node)&&$_bfmuql2ujh8lywr1.remove($_cgttw3zjh8lywdq.fromDom(node))})},removeEmptyRoot=function(rootNode,block){var parents=$_dyxtub3ejh8lywxq_parentsAndSelf(block,rootNode);return $_5wjzy24jh8lyw2t.find(parents.reverse(),$_b1urh33ajh8lywts_isEmpty).each($_bfmuql2ujh8lywr1.remove)},getInsertionPoint=function(fromBlock,toBlock){return $_5f6gpb1djh8lywg5.contains(toBlock,fromBlock)?$_a43q0i17jh8lywfe.parent(fromBlock).bind(function(parent){return $_5f6gpb1djh8lywg5.eq(parent,toBlock)?Option.some(fromBlock):function(toBlock,block){var parents=$_a43q0i17jh8lywfe.parents(block,function(elm){return $_5f6gpb1djh8lywg5.eq(elm,toBlock)});return Option.from(parents[parents.length-2])}(toBlock,fromBlock)}):Option.none()},mergeBlockInto=function(rootNode,fromBlock,toBlock){if($_b1urh33ajh8lywts_isEmpty(toBlock))return $_bfmuql2ujh8lywr1.remove(toBlock),$_b1urh33ajh8lywts_isEmpty(fromBlock)&&$_2bvsfb2tjh8lywqo_fillWithPaddingBr(fromBlock),$_9kvypj2cjh8lywnz.firstPositionIn(fromBlock.dom());trimBr(!0,fromBlock),trimBr(!1,toBlock);var children_1=extractChildren(fromBlock);return getInsertionPoint(fromBlock,toBlock).fold(function(){removeEmptyRoot(rootNode,fromBlock);var position=$_9kvypj2cjh8lywnz.lastPositionIn(toBlock.dom());return $_5wjzy24jh8lyw2t.each(children_1,function(node){$_4m7u2e2kjh8lywpi.append(toBlock,node)}),position},function(target){var position=$_9kvypj2cjh8lywnz.prevPosition(toBlock.dom(),CaretPosition$1.before(target.dom()));return $_5wjzy24jh8lyw2t.each(children_1,function(node){$_4m7u2e2kjh8lywpi.before(target,node)}),removeEmptyRoot(rootNode,fromBlock),position})},$_4yurvx3djh8lywu4_mergeBlocks=function(rootNode,forward,block1,block2){return forward?mergeBlockInto(rootNode,block2,block1):mergeBlockInto(rootNode,block1,block2)},$_5jmwsv32jh8lywrr_backspaceDelete=function(editor,forward){var position,rootNode=$_cgttw3zjh8lywdq.fromDom(editor.getBody());return(position=$_bmbex333jh8lywru_read(rootNode.dom(),forward,editor.selection.getRng()).bind(function(blockBoundary){return $_4yurvx3djh8lywu4_mergeBlocks(rootNode,forward,blockBoundary.from().block(),blockBoundary.to().block())})).each(function(pos){editor.selection.setRng(pos.toRange())}),position.isSome()},isRawNodeInTable=function(root,rawNode){var node=$_cgttw3zjh8lywdq.fromDom(rawNode),isRoot=$_eqpqvr6jh8lyw3s.curry($_5f6gpb1djh8lywg5.eq,root);return $_6hl03835jh8lywsm.ancestor(node,isTableCell,isRoot).isSome()},isEverythingSelected=function(root,rng){var noPrevious=$_9kvypj2cjh8lywnz.prevPosition(root.dom(),CaretPosition$1.fromRangeStart(rng)).isNone(),noNext=$_9kvypj2cjh8lywnz.nextPosition(root.dom(),CaretPosition$1.fromRangeEnd(rng)).isNone();return!function(root,rng){return isRawNodeInTable(root,rng.startContainer)||isRawNodeInTable(root,rng.endContainer)}(root,rng)&&noPrevious&&noNext},deleteRange=function(editor){var rootNode=$_cgttw3zjh8lywdq.fromDom(editor.getBody()),rng=editor.selection.getRng();return isEverythingSelected(rootNode,rng)?function(editor){return editor.setContent(""),editor.selection.setCursorLocation(),!0}(editor):function(rootNode,selection){var rng=selection.getRng();return $_b8twwq26jh8lywmm_liftN([$_aj8isd34jh8lyws4_getParentBlock(rootNode,$_cgttw3zjh8lywdq.fromDom(rng.startContainer)),$_aj8isd34jh8lyws4_getParentBlock(rootNode,$_cgttw3zjh8lywdq.fromDom(rng.endContainer))],function(block1,block2){return!1===$_5f6gpb1djh8lywg5.eq(block1,block2)&&(rng.deleteContents(),$_4yurvx3djh8lywu4_mergeBlocks(rootNode,!0,block1,block2).each(function(pos){selection.setRng(pos.toRange())}),!0)}).getOr(!1)}(rootNode,editor.selection)},$_lcy1p3fjh8lywxx_backspaceDelete=function(editor,forward){return!editor.selection.isCollapsed()&&deleteRange(editor)},$_1ml90g3ijh8lywyp_generate=function(cases){if(!$_dp4g6d7jh8lyw3y.isArray(cases))throw new Error("cases must be an array");if(0===cases.length)throw new Error("there must be at least one case");var constructors=[],adt={};return $_5wjzy24jh8lyw2t.each(cases,function(acase,count){var keys=$_g63v2c13jh8lywej.keys(acase);if(1!==keys.length)throw new Error("one and only one name per case");var key=keys[0],value=acase[key];if(void 0!==adt[key])throw new Error("duplicate key detected:"+key);if("cata"===key)throw new Error("cannot have a case named cata (sorry)");if(!$_dp4g6d7jh8lyw3y.isArray(value))throw new Error("case arguments must be an array");constructors.push(key),adt[key]=function(){var argLength=arguments.length;if(argLength!==value.length)throw new Error("Wrong number of arguments to case "+key+". Expected "+value.length+" ("+value+"), got "+argLength);for(var args=new Array(argLength),i=0;i<args.length;i++)args[i]=arguments[i];return{fold:function(){if(arguments.length!==cases.length)throw new Error("Wrong number of arguments to fold. Expected "+cases.length+", got "+arguments.length);return arguments[count].apply(null,args)},match:function(branches){var branchKeys=$_g63v2c13jh8lywej.keys(branches);if(constructors.length!==branchKeys.length)throw new Error("Wrong number of arguments to match. Expected: "+constructors.join(",")+"\nActual: "+branchKeys.join(","));if(!$_5wjzy24jh8lyw2t.forall(constructors,function(reqKey){return $_5wjzy24jh8lyw2t.contains(branchKeys,reqKey)}))throw new Error("Not all branches were specified when using match. Specified: "+branchKeys.join(", ")+"\nRequired: "+constructors.join(", "));return branches[key].apply(null,args)},log:function(label){console.log(label,{constructors:constructors,constructor:key,params:args})}}}}),adt},DeleteAction=$_1ml90g3ijh8lywyp_generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),deleteEmptyBlockOrMoveToCef=function(root,forward,from,to){var toCefElm=to.getNode(!1===forward);return $_aj8isd34jh8lyws4_getParentBlock($_cgttw3zjh8lywdq.fromDom(root),$_cgttw3zjh8lywdq.fromDom(from.getNode())).map(function(blockElm){return $_b1urh33ajh8lywts_isEmpty(blockElm)?DeleteAction.remove(blockElm.dom()):DeleteAction.moveToElement(toCefElm)}).orThunk(function(){return Option.some(DeleteAction.moveToElement(toCefElm))})},findCefPosition=function(root,forward,from){return $_9kvypj2cjh8lywnz.fromPosition(forward,root,from).bind(function(to){return node=to.getNode(),isTableCell($_cgttw3zjh8lywdq.fromDom(node))||isListItem($_cgttw3zjh8lywdq.fromDom(node))?Option.none():function(root,forward,from,to){var inSameBlock=function(elm){return isInline($_cgttw3zjh8lywdq.fromDom(elm))&&!isInSameBlock(from,to,root)};return getRelativeCefElm(!forward,from).fold(function(){return getRelativeCefElm(forward,to).fold($_eqpqvr6jh8lyw3s.constant(!1),inSameBlock)},inSameBlock)}(root,forward,from,to)?Option.none():forward&&$_5oonaz1qjh8lywhz.isContentEditableFalse(to.getNode())?deleteEmptyBlockOrMoveToCef(root,forward,from,to):!1===forward&&$_5oonaz1qjh8lywhz.isContentEditableFalse(to.getNode(!0))?deleteEmptyBlockOrMoveToCef(root,forward,from,to):forward&&isAfterContentEditableFalse(from)?Option.some(DeleteAction.moveToPosition(to)):!1===forward&&isBeforeContentEditableFalse(from)?Option.some(DeleteAction.moveToPosition(to)):Option.none();var node})},getContentEditableAction=function(root,forward,from){return function(forward,from){var elm=from.getNode(!1===forward),caretLocation=forward?"after":"before";return $_5oonaz1qjh8lywhz.isElement(elm)&&elm.getAttribute("data-mce-caret")===caretLocation}(forward,from)?function(forward,elm){return forward&&$_5oonaz1qjh8lywhz.isContentEditableFalse(elm.nextSibling)?Option.some(DeleteAction.moveToElement(elm.nextSibling)):!1===forward&&$_5oonaz1qjh8lywhz.isContentEditableFalse(elm.previousSibling)?Option.some(DeleteAction.moveToElement(elm.previousSibling)):Option.none()}(forward,from.getNode(!1===forward)).fold(function(){return findCefPosition(root,forward,from)},Option.some):findCefPosition(root,forward,from).bind(function(deleteAction){return function(root,from,deleteAction){return deleteAction.fold(function(elm){return Option.some(DeleteAction.remove(elm))},function(elm){return Option.some(DeleteAction.moveToElement(elm))},function(to){return isInSameBlock(from,to,root)?Option.none():Option.some(DeleteAction.moveToPosition(to))})}(root,from,deleteAction)})},reposition=function(elm,pos){return function(pos,elm){var container=pos.container(),offset=pos.offset();return!1===CaretPosition$1.isTextPosition(pos)&&container===elm.parentNode&&offset>CaretPosition$1.before(elm).offset()}(pos,elm)?CaretPosition$1(pos.container(),pos.offset()-1):pos},getPreviousSiblingCaretPosition=function(elm){return isCaretCandidate(elm.previousSibling)?Option.some((node=elm.previousSibling,$_5oonaz1qjh8lywhz.isText(node)?CaretPosition$1(node,node.data.length):CaretPosition$1.after(node))):elm.previousSibling?$_9kvypj2cjh8lywnz.lastPositionIn(elm.previousSibling):Option.none();var node},getNextSiblingCaretPosition=function(elm){return isCaretCandidate(elm.nextSibling)?Option.some((node=elm.nextSibling,$_5oonaz1qjh8lywhz.isText(node)?CaretPosition$1(node,0):CaretPosition$1.before(node))):elm.nextSibling?$_9kvypj2cjh8lywnz.firstPositionIn(elm.nextSibling):Option.none();var node},findCaretPositionBackwards=function(rootElement,elm){return getPreviousSiblingCaretPosition(elm).orThunk(function(){return getNextSiblingCaretPosition(elm)}).orThunk(function(){return function(rootElement,elm){var startPosition=CaretPosition$1.before(elm.previousSibling?elm.previousSibling:elm.parentNode);return $_9kvypj2cjh8lywnz.prevPosition(rootElement,startPosition).fold(function(){return $_9kvypj2cjh8lywnz.nextPosition(rootElement,CaretPosition$1.after(elm))},Option.some)}(rootElement,elm)})},findCaretPositionForward=function(rootElement,elm){return getNextSiblingCaretPosition(elm).orThunk(function(){return getPreviousSiblingCaretPosition(elm)}).orThunk(function(){return function(rootElement,elm){return $_9kvypj2cjh8lywnz.nextPosition(rootElement,CaretPosition$1.after(elm)).fold(function(){return $_9kvypj2cjh8lywnz.prevPosition(rootElement,CaretPosition$1.before(elm))},Option.some)}(rootElement,elm)})},findCaretPosOutsideElmAfterDelete=function(forward,rootElement,elm){return function(forward,rootElement,elm){return forward?findCaretPositionForward(rootElement,elm):findCaretPositionBackwards(rootElement,elm)}(forward,rootElement,elm).map($_eqpqvr6jh8lyw3s.curry(reposition,elm))},setSelection=function(editor,forward,pos){pos.fold(function(){editor.focus()},function(pos){editor.selection.setRng(pos.toRange(),forward)})},isBlock$2=function(editor,elm){return elm&&editor.schema.getBlockElements().hasOwnProperty($_7j1jt210jh8lywdx.name(elm))},paddEmptyBlock=function(elm){if($_b1urh33ajh8lywts_isEmpty(elm)){var br=$_cgttw3zjh8lywdq.fromHtml('<br data-mce-bogus="1">');return $_bfmuql2ujh8lywr1.empty(elm),$_4m7u2e2kjh8lywpi.append(elm,br),Option.some(CaretPosition$1.before(br.dom()))}return Option.none()},$_1al0sh3jjh8lywyv_deleteElement=function(editor,forward,elm){var rawNode,afterDeletePos=findCaretPosOutsideElmAfterDelete(forward,editor.getBody(),elm.dom()),parentBlock=$_6hl03835jh8lywsm.ancestor(elm,$_eqpqvr6jh8lyw3s.curry(isBlock$2,editor),(rawNode=editor.getBody(),function(elm){return elm.dom()===rawNode})),normalizedAfterDeletePos=function(elm,afterDeletePosOpt){return $_b8twwq26jh8lywmm_liftN([$_a43q0i17jh8lywfe.prevSibling(elm),$_a43q0i17jh8lywfe.nextSibling(elm),afterDeletePosOpt],function(prev,next,afterDeletePos){var offset,prevNode=prev.dom(),nextNode=next.dom();return $_5oonaz1qjh8lywhz.isText(prevNode)&&$_5oonaz1qjh8lywhz.isText(nextNode)?(offset=prevNode.data.length,prevNode.appendData(nextNode.data),$_bfmuql2ujh8lywr1.remove(next),$_bfmuql2ujh8lywr1.remove(elm),afterDeletePos.container()===nextNode?CaretPosition$1(prevNode,offset):afterDeletePos):($_bfmuql2ujh8lywr1.remove(elm),afterDeletePos)}).orThunk(function(){return $_bfmuql2ujh8lywr1.remove(elm),afterDeletePosOpt})}(elm,afterDeletePos);editor.dom.isEmpty(editor.getBody())?(editor.setContent(""),editor.selection.setCursorLocation()):parentBlock.bind(paddEmptyBlock).fold(function(){setSelection(editor,forward,normalizedAfterDeletePos)},function(paddPos){setSelection(editor,forward,Option.some(paddPos))})},backspaceDeleteCaret=function(editor,forward){return function(root,forward,rng){var normalizedRange=normalizeRange(forward?1:-1,root,rng),from=CaretPosition$1.fromRangeStart(normalizedRange);return!1===forward&&isAfterContentEditableFalse(from)?Option.some(DeleteAction.remove(from.getNode(!0))):forward&&isBeforeContentEditableFalse(from)?Option.some(DeleteAction.remove(from.getNode())):getContentEditableAction(root,forward,from)}(editor.getBody(),forward,editor.selection.getRng()).map(function(deleteAction){return deleteAction.fold(function(editor,forward){return function(element){return editor._selectionOverrides.hideFakeCaret(),$_1al0sh3jjh8lywyv_deleteElement(editor,forward,$_cgttw3zjh8lywdq.fromDom(element)),!0}}(editor,forward),function(editor,forward){return function(element){var pos=forward?CaretPosition$1.before(element):CaretPosition$1.after(element);return editor.selection.setRng(pos.toRange()),!0}}(editor,forward),function(editor){return function(pos){return editor.selection.setRng(pos.toRange()),!0}}(editor))}).getOr(!1)},backspaceDeleteRange=function(editor,forward){var rootElement,selectedElement=editor.selection.getNode();return!!$_5oonaz1qjh8lywhz.isContentEditableFalse(selectedElement)&&(rootElement=$_cgttw3zjh8lywdq.fromDom(editor.getBody()),$_5wjzy24jh8lyw2t.each($_eebxu2gjh8lywp3_descendants(rootElement,".mce-offscreen-selection"),$_bfmuql2ujh8lywr1.remove),$_1al0sh3jjh8lywyv_deleteElement(editor,forward,$_cgttw3zjh8lywdq.fromDom(editor.selection.getNode())),$_aj8isd34jh8lyws4_paddEmptyBody(editor),!0)},$_ar80r13gjh8lywy7_backspaceDelete=function(editor,forward){return editor.selection.isCollapsed()?backspaceDeleteCaret(editor,forward):backspaceDeleteRange(editor,forward)},$_ar80r13gjh8lywy7_paddEmptyElement=function(editor){var br,ceRoot=function(root,node){for(;node&&node!==root;){if($_5oonaz1qjh8lywhz.isContentEditableTrue(node)||$_5oonaz1qjh8lywhz.isContentEditableFalse(node))return node;node=node.parentNode}return null}(editor.getBody(),editor.selection.getNode());return $_5oonaz1qjh8lywhz.isContentEditableTrue(ceRoot)&&editor.dom.isBlock(ceRoot)&&editor.dom.isEmpty(ceRoot)&&(br=editor.dom.create("br",{"data-mce-bogus":"1"}),editor.dom.setHTML(ceRoot,""),ceRoot.appendChild(br),editor.selection.setRng(CaretPosition$1.before(br).toRange())),!0},isText$8=$_5oonaz1qjh8lywhz.isText,startsWithCaretContainer$1=function(node){return isText$8(node)&&node.data[0]===$_d383mr21jh8lywlv_ZWSP},endsWithCaretContainer$1=function(node){return isText$8(node)&&node.data[node.data.length-1]===$_d383mr21jh8lywlv_ZWSP},createZwsp=function(node){return node.ownerDocument.createTextNode($_d383mr21jh8lywlv_ZWSP)},insertInline$1=function(before,node){return before?function(node){if(isText$8(node.previousSibling))return endsWithCaretContainer$1(node.previousSibling)||node.previousSibling.appendData($_d383mr21jh8lywlv_ZWSP),node.previousSibling;if(isText$8(node))return startsWithCaretContainer$1(node)||node.insertData(0,$_d383mr21jh8lywlv_ZWSP),node;var newNode=createZwsp(node);return node.parentNode.insertBefore(newNode,node),newNode}(node):function(node){if(isText$8(node.nextSibling))return startsWithCaretContainer$1(node.nextSibling)||node.nextSibling.insertData(0,$_d383mr21jh8lywlv_ZWSP),node.nextSibling;if(isText$8(node))return endsWithCaretContainer$1(node)||node.appendData($_d383mr21jh8lywlv_ZWSP),node;var newNode=createZwsp(node);return node.nextSibling?node.parentNode.insertBefore(newNode,node.nextSibling):node.parentNode.appendChild(newNode),newNode}(node)},insertInlineBefore=$_eqpqvr6jh8lyw3s.curry(insertInline$1,!0),insertInlineAfter=$_eqpqvr6jh8lyw3s.curry(insertInline$1,!1),insertInlinePos=function(pos,before){return $_5oonaz1qjh8lywhz.isText(pos.container())?insertInline$1(before,pos.container()):insertInline$1(before,pos.getNode())},isPosCaretContainer=function(pos,caret){var caretNode=caret.get();return caretNode&&pos.container()===caretNode&&isCaretContainerInline(caretNode)},$_biul8i3ljh8lywzl_renderCaret=function(caret,location){return location.fold(function(element){$_9nl16f2ajh8lywne.remove(caret.get());var text=insertInlineBefore(element);return caret.set(text),Option.some(CaretPosition$1(text,text.length-1))},function(element){return $_9kvypj2cjh8lywnz.firstPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return CaretPosition$1(caret.get(),1);$_9nl16f2ajh8lywne.remove(caret.get());var text=insertInlinePos(pos,!0);return caret.set(text),CaretPosition$1(text,1)})},function(element){return $_9kvypj2cjh8lywnz.lastPositionIn(element).map(function(pos){if(isPosCaretContainer(pos,caret))return CaretPosition$1(caret.get(),caret.get().length-1);$_9nl16f2ajh8lywne.remove(caret.get());var text=insertInlinePos(pos,!1);return caret.set(text),CaretPosition$1(text,text.length-1)})},function(element){$_9nl16f2ajh8lywne.remove(caret.get());var text=insertInlineAfter(element);return caret.set(text),Option.some(CaretPosition$1(text,1))})},$_7r5om73ojh8lyx09_evaluateUntil=function(fns,args){for(var i=0;i<fns.length;i++){var result=fns[i].apply(null,args);if(result.isSome())return result}return Option.none()},Location=$_1ml90g3ijh8lywyp_generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),rescope=function(rootNode,node){var parentBlock=getParentBlock(node,rootNode);return parentBlock||rootNode},before$3=function(isInlineTarget,rootNode,pos){var nPos=$_231v7s37jh8lywt3.normalizeForwards(pos),scope=rescope(rootNode,nPos.container());return $_231v7s37jh8lywt3.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_9kvypj2cjh8lywnz.nextPosition(scope,nPos).bind($_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.before(inline)})},Option.none)},isNotInsideFormatCaretContainer=function(rootNode,elm){return null===getParentCaretContainer(rootNode,elm)},findInsideRootInline=function(isInlineTarget,rootNode,pos){return $_231v7s37jh8lywt3.findRootInline(isInlineTarget,rootNode,pos).filter($_eqpqvr6jh8lyw3s.curry(isNotInsideFormatCaretContainer,rootNode))},start=function(isInlineTarget,rootNode,pos){var nPos=$_231v7s37jh8lywt3.normalizeBackwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_9kvypj2cjh8lywnz.prevPosition(inline,nPos).isNone()?Option.some(Location.start(inline)):Option.none()})},end=function(isInlineTarget,rootNode,pos){var nPos=$_231v7s37jh8lywt3.normalizeForwards(pos);return findInsideRootInline(isInlineTarget,rootNode,nPos).bind(function(inline){return $_9kvypj2cjh8lywnz.nextPosition(inline,nPos).isNone()?Option.some(Location.end(inline)):Option.none()})},after$3=function(isInlineTarget,rootNode,pos){var nPos=$_231v7s37jh8lywt3.normalizeBackwards(pos),scope=rescope(rootNode,nPos.container());return $_231v7s37jh8lywt3.findRootInline(isInlineTarget,scope,nPos).fold(function(){return $_9kvypj2cjh8lywnz.prevPosition(scope,nPos).bind($_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.findRootInline,isInlineTarget,scope)).map(function(inline){return Location.after(inline)})},Option.none)},isValidLocation=function(location){return!1===$_231v7s37jh8lywt3.isRtl(getElement(location))},readLocation=function(isInlineTarget,rootNode,pos){return $_7r5om73ojh8lyx09_evaluateUntil([before$3,start,end,after$3],[isInlineTarget,rootNode,pos]).filter(isValidLocation)},getElement=function(location){return location.fold($_eqpqvr6jh8lyw3s.identity,$_eqpqvr6jh8lyw3s.identity,$_eqpqvr6jh8lyw3s.identity,$_eqpqvr6jh8lyw3s.identity)},getName=function(location){return location.fold($_eqpqvr6jh8lyw3s.constant("before"),$_eqpqvr6jh8lyw3s.constant("start"),$_eqpqvr6jh8lyw3s.constant("end"),$_eqpqvr6jh8lyw3s.constant("after"))},outside=function(location){return location.fold(Location.before,Location.before,Location.after,Location.after)},betweenInlines=function(forward,isInlineTarget,rootNode,from,to,location){return $_b8twwq26jh8lywmm_liftN([$_231v7s37jh8lywt3.findRootInline(isInlineTarget,rootNode,from),$_231v7s37jh8lywt3.findRootInline(isInlineTarget,rootNode,to)],function(fromInline,toInline){return fromInline!==toInline&&$_231v7s37jh8lywt3.hasSameParentBlock(rootNode,fromInline,toInline)?Location.after(forward?fromInline:toInline):location}).getOr(location)},skipNoMovement=function(fromLocation,toLocation){return fromLocation.fold($_eqpqvr6jh8lyw3s.constant(!0),function(fromLocation){return location2=toLocation,!(getName(location1=fromLocation)===getName(location2)&&getElement(location1)===getElement(location2));var location1,location2})},findLocationSimple=function(forward,location){return forward?location.fold($_eqpqvr6jh8lyw3s.compose(Option.some,Location.start),Option.none,$_eqpqvr6jh8lyw3s.compose(Option.some,Location.after),Option.none):location.fold(Option.none,$_eqpqvr6jh8lyw3s.compose(Option.some,Location.before),Option.none,$_eqpqvr6jh8lyw3s.compose(Option.some,Location.end))},findLocation=function(forward,isInlineTarget,rootNode,pos){var from=$_231v7s37jh8lywt3.normalizePosition(forward,pos),fromLocation=readLocation(isInlineTarget,rootNode,from);return readLocation(isInlineTarget,rootNode,from).bind($_eqpqvr6jh8lyw3s.curry(findLocationSimple,forward)).orThunk(function(){return function(forward,isInlineTarget,rootNode,fromLocation,pos){var from=$_231v7s37jh8lywt3.normalizePosition(forward,pos);return $_9kvypj2cjh8lywnz.fromPosition(forward,rootNode,from).map($_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.normalizePosition,forward)).fold(function(){return fromLocation.map(outside)},function(to){return readLocation(isInlineTarget,rootNode,to).map($_eqpqvr6jh8lyw3s.curry(betweenInlines,forward,isInlineTarget,rootNode,from,to)).filter($_eqpqvr6jh8lyw3s.curry(skipNoMovement,fromLocation))}).filter(isValidLocation)}(forward,isInlineTarget,rootNode,fromLocation,pos)})},$_6kjy7r3njh8lywzz_readLocation=readLocation,$_6kjy7r3njh8lywzz_findLocation=findLocation,$_6kjy7r3njh8lywzz_outside=($_eqpqvr6jh8lyw3s.curry(findLocation,!1),$_eqpqvr6jh8lyw3s.curry(findLocation,!0),outside),$_6kjy7r3njh8lywzz_inside=function(location){return location.fold(Location.start,Location.start,Location.end,Location.end)},hasSelectionModifyApi=function(editor){return $_dp4g6d7jh8lyw3y.isFunction(editor.selection.getSel().modify)},moveRel=function(forward,selection,pos){var delta=forward?1:-1;return selection.setRng(CaretPosition$1(pos.container(),pos.offset()+delta).toRange()),selection.getSel().modify("move",forward?"forward":"backward","word"),!0},$_d48vbn3qjh8lyx0k_moveByWord=function(forward,editor){var rng=editor.selection.getRng(),pos=forward?CaretPosition$1.fromRangeEnd(rng):CaretPosition$1.fromRangeStart(rng);return!!hasSelectionModifyApi(editor)&&(forward&&isBeforeInline(pos)?moveRel(!0,editor.selection,pos):!(forward||!isAfterInline(pos))&&moveRel(!1,editor.selection,pos))},setCaretPosition=function(editor,pos){var rng=editor.dom.createRng();rng.setStart(pos.container(),pos.offset()),rng.setEnd(pos.container(),pos.offset()),editor.selection.setRng(rng)},isFeatureEnabled=function(editor){return!1!==editor.settings.inline_boundaries},setSelected=function(state,elm){state?elm.setAttribute("data-mce-selected","inline-boundary"):elm.removeAttribute("data-mce-selected")},renderCaretLocation=function(editor,caret,location){return $_biul8i3ljh8lywzl_renderCaret(caret,location).map(function(pos){return setCaretPosition(editor,pos),location})},moveWord=function(forward,editor,caret){return function(){return!!isFeatureEnabled(editor)&&$_d48vbn3qjh8lyx0k_moveByWord(forward,editor)}},$_65xx7w3pjh8lyx0d={move:function(editor,caret,forward){return function(){return!!isFeatureEnabled(editor)&&function(editor,caret,forward){var rootNode=editor.getBody(),from=CaretPosition$1.fromRangeStart(editor.selection.getRng()),isInlineTarget=$_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.isInlineTarget,editor);return $_6kjy7r3njh8lywzz_findLocation(forward,isInlineTarget,rootNode,from).bind(function(location){return renderCaretLocation(editor,caret,location)})}(editor,caret,forward).isSome()}},moveNextWord:$_eqpqvr6jh8lyw3s.curry(moveWord,!0),movePrevWord:$_eqpqvr6jh8lyw3s.curry(moveWord,!1),setupSelectedState:function(editor){var caret=Cell(null),isInlineTarget=$_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.isInlineTarget,editor);return editor.on("NodeChange",function(e){isFeatureEnabled(editor)&&(function(isInlineTarget,dom,elms){var selectedInlines=$_5wjzy24jh8lyw2t.filter(dom.select('*[data-mce-selected="inline-boundary"]'),isInlineTarget),targetInlines=$_5wjzy24jh8lyw2t.filter(elms,isInlineTarget);$_5wjzy24jh8lyw2t.each($_5wjzy24jh8lyw2t.difference(selectedInlines,targetInlines),$_eqpqvr6jh8lyw3s.curry(setSelected,!1)),$_5wjzy24jh8lyw2t.each($_5wjzy24jh8lyw2t.difference(targetInlines,selectedInlines),$_eqpqvr6jh8lyw3s.curry(setSelected,!0))}(isInlineTarget,editor.dom,e.parents),function(editor,caret){if(editor.selection.isCollapsed()&&!0!==editor.composing&&caret.get()){var pos=CaretPosition$1.fromRangeStart(editor.selection.getRng());CaretPosition$1.isTextPosition(pos)&&!1===$_231v7s37jh8lywt3.isAtZwsp(pos)&&(setCaretPosition(editor,$_9nl16f2ajh8lywne.removeAndReposition(caret.get(),pos)),caret.set(null))}}(editor,caret),function(isInlineTarget,editor,caret,elms){if(editor.selection.isCollapsed()){var inlines=$_5wjzy24jh8lyw2t.filter(elms,isInlineTarget);$_5wjzy24jh8lyw2t.each(inlines,function(inline){var pos=CaretPosition$1.fromRangeStart(editor.selection.getRng());$_6kjy7r3njh8lywzz_readLocation(isInlineTarget,editor.getBody(),pos).bind(function(location){return renderCaretLocation(editor,caret,location)})})}}(isInlineTarget,editor,caret,e.parents))}),caret},setCaretPosition:setCaretPosition},setCaretLocation=function(editor,caret){return function(location){return $_biul8i3ljh8lywzl_renderCaret(caret,location).map(function(pos){return $_65xx7w3pjh8lyx0d.setCaretPosition(editor,pos),!0}).getOr(!1)}},deleteFromTo=function(editor,caret,from,to){var rootNode=editor.getBody(),isInlineTarget=$_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.isInlineTarget,editor);editor.undoManager.ignore(function(){editor.selection.setRng(function(from,to){var range=document.createRange();return range.setStart(from.container(),from.offset()),range.setEnd(to.container(),to.offset()),range}(from,to)),editor.execCommand("Delete"),$_6kjy7r3njh8lywzz_readLocation(isInlineTarget,rootNode,CaretPosition$1.fromRangeStart(editor.selection.getRng())).map($_6kjy7r3njh8lywzz_inside).map(setCaretLocation(editor,caret))}),editor.nodeChanged()},backspaceDeleteCollapsed=function(editor,caret,forward,from){var rootNode=function(rootNode,node){var parentBlock=getParentBlock(node,rootNode);return parentBlock||rootNode}(editor.getBody(),from.container()),isInlineTarget=$_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.isInlineTarget,editor),fromLocation=$_6kjy7r3njh8lywzz_readLocation(isInlineTarget,rootNode,from);return fromLocation.bind(function(location){return forward?location.fold($_eqpqvr6jh8lyw3s.constant(Option.some($_6kjy7r3njh8lywzz_inside(location))),Option.none,$_eqpqvr6jh8lyw3s.constant(Option.some($_6kjy7r3njh8lywzz_outside(location))),Option.none):location.fold(Option.none,$_eqpqvr6jh8lyw3s.constant(Option.some($_6kjy7r3njh8lywzz_outside(location))),Option.none,$_eqpqvr6jh8lyw3s.constant(Option.some($_6kjy7r3njh8lywzz_inside(location))))}).map(setCaretLocation(editor,caret)).getOrThunk(function(){var toPosition=$_9kvypj2cjh8lywnz.navigate(forward,rootNode,from),toLocation=toPosition.bind(function(pos){return $_6kjy7r3njh8lywzz_readLocation(isInlineTarget,rootNode,pos)});return fromLocation.isSome()&&toLocation.isSome()?$_231v7s37jh8lywt3.findRootInline(isInlineTarget,rootNode,from).map(function(elm){return!!function(elm){return $_b8twwq26jh8lywmm_liftN([$_9kvypj2cjh8lywnz.firstPositionIn(elm),$_9kvypj2cjh8lywnz.lastPositionIn(elm)],function(firstPos,lastPos){var normalizedFirstPos=$_231v7s37jh8lywt3.normalizePosition(!0,firstPos),normalizedLastPos=$_231v7s37jh8lywt3.normalizePosition(!1,lastPos);return $_9kvypj2cjh8lywnz.nextPosition(elm,normalizedFirstPos).map(function(pos){return pos.isEqual(normalizedLastPos)}).getOr(!0)}).getOr(!0)}(elm)&&($_1al0sh3jjh8lywyv_deleteElement(editor,forward,$_cgttw3zjh8lywdq.fromDom(elm)),!0)}).getOr(!1):toLocation.bind(function(_){return toPosition.map(function(to){return forward?deleteFromTo(editor,caret,from,to):deleteFromTo(editor,caret,to,from),!0})}).getOr(!1)})},$_ej9d8d3kjh8lywzc_backspaceDelete=function(editor,caret,forward){if(editor.selection.isCollapsed()&&function(editor){return!1!==editor.settings.inline_boundaries}(editor)){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return backspaceDeleteCollapsed(editor,caret,forward,from)}return!1},tableCellRng=$_4jz0ce18jh8lywft.immutable("start","end"),tableSelection=$_4jz0ce18jh8lywft.immutable("rng","table","cells"),deleteAction=$_1ml90g3ijh8lywyp_generate([{removeTable:["element"]},{emptyCells:["cells"]}]),getClosestCell$1=function(container,isRoot){return $_7sg18r3cjh8lywu1_closest($_cgttw3zjh8lywdq.fromDom(container),"td,th",isRoot)},getClosestTable=function(cell,isRoot){return $_7sg18r3cjh8lywu1_ancestor(cell,"table",isRoot)},isExpandedCellRng=function(cellRng){return!1===$_5f6gpb1djh8lywg5.eq(cellRng.start(),cellRng.end())},getTableFromCellRng=function(cellRng,isRoot){return getClosestTable(cellRng.start(),isRoot).bind(function(startParentTable){return getClosestTable(cellRng.end(),isRoot).bind(function(endParentTable){return $_5f6gpb1djh8lywg5.eq(startParentTable,endParentTable)?Option.some(startParentTable):Option.none()})})},getTableCells=function(table){return $_eebxu2gjh8lywp3_descendants(table,"td,th")},partialSelection=function(isRoot,rng){var startCell=getClosestCell$1(rng.startContainer,isRoot),endCell=getClosestCell$1(rng.endContainer,isRoot);return rng.collapsed?Option.none():$_b8twwq26jh8lywmm_liftN([startCell,endCell],tableCellRng).fold(function(){return startCell.fold(function(){return endCell.bind(function(endCell){return getClosestTable(endCell,isRoot).bind(function(table){return $_5wjzy24jh8lyw2t.head(getTableCells(table)).map(function(startCell){return tableCellRng(startCell,endCell)})})})},function(startCell){return getClosestTable(startCell,isRoot).bind(function(table){return $_5wjzy24jh8lyw2t.last(getTableCells(table)).map(function(endCell){return tableCellRng(startCell,endCell)})})})},function(cellRng){return isWithinSameTable(isRoot,cellRng)?Option.none():function(cellRng,isRoot){return getClosestTable(cellRng.start(),isRoot).bind(function(table){return $_5wjzy24jh8lyw2t.last(getTableCells(table)).map(function(endCell){return tableCellRng(cellRng.start(),endCell)})})}(cellRng,isRoot)})},isWithinSameTable=function(isRoot,cellRng){return getTableFromCellRng(cellRng,isRoot).isSome()},getTableSelectionFromRng=function(root,rng){var isRoot=function(root){return $_eqpqvr6jh8lyw3s.curry($_5f6gpb1djh8lywg5.eq,root)}(root);return function(rng,isRoot){var startCell=getClosestCell$1(rng.startContainer,isRoot),endCell=getClosestCell$1(rng.endContainer,isRoot);return $_b8twwq26jh8lywmm_liftN([startCell,endCell],tableCellRng).filter(isExpandedCellRng).filter(function(cellRng){return isWithinSameTable(isRoot,cellRng)}).orThunk(function(){return partialSelection(isRoot,rng)})}(rng,isRoot).bind(function(cellRng){return function(cellRng,isRoot){return getTableFromCellRng(cellRng,isRoot).map(function(table){return tableSelection(cellRng,table,getTableCells(table))})}(cellRng,isRoot)})},getCellIndex=function(cells,cell){return $_5wjzy24jh8lyw2t.findIndex(cells,function(x){return $_5f6gpb1djh8lywg5.eq(x,cell)})},getAction=function(tableSelection){return function(tableSelection){return $_b8twwq26jh8lywmm_liftN([getCellIndex(tableSelection.cells(),tableSelection.rng().start()),getCellIndex(tableSelection.cells(),tableSelection.rng().end())],function(startIndex,endIndex){return tableSelection.cells().slice(startIndex,endIndex+1)})}(tableSelection).map(function(selected){var cells=tableSelection.cells();return selected.length===cells.length?deleteAction.removeTable(tableSelection.table()):deleteAction.emptyCells(selected)})},$_g0m0zq3sjh8lyx10_getActionFromRange=function(root,rng){return getTableSelectionFromRng(root,rng).bind(getAction)},getRanges=function(selection){var ranges=[];if(selection)for(var i=0;i<selection.rangeCount;i++)ranges.push(selection.getRangeAt(i));return ranges},$_d1o8uj3ujh8lyx1u_getRanges=getRanges,$_d1o8uj3ujh8lyx1u_getSelectedNodes=function(ranges){return $_5wjzy24jh8lyw2t.bind(ranges,function(range){var node=getSelectedNode(range);return node?[$_cgttw3zjh8lywdq.fromDom(node)]:[]})},$_d1o8uj3ujh8lyx1u_hasMultipleRanges=function(selection){return 1<getRanges(selection).length},getCellsFromRanges=function(ranges){return $_5wjzy24jh8lyw2t.filter($_d1o8uj3ujh8lyx1u_getSelectedNodes(ranges),isTableCell)},getCellsFromElement=function(elm){return $_eebxu2gjh8lywp3_descendants(elm,"td[data-mce-selected],th[data-mce-selected]")},getCellsFromElementOrRanges=function(ranges,element){var selectedCells=getCellsFromElement(element),rangeCells=getCellsFromRanges(ranges);return 0<selectedCells.length?selectedCells:rangeCells},$_bwjtq63tjh8lyx1g_getCellsFromElementOrRanges=getCellsFromElementOrRanges,$_bwjtq63tjh8lyx1g_getCellsFromEditor=function(editor){return getCellsFromElementOrRanges($_d1o8uj3ujh8lyx1u_getRanges(editor.selection.getSel()),$_cgttw3zjh8lywdq.fromDom(editor.getBody()))},emptyCells=function(editor,cells){return $_5wjzy24jh8lyw2t.each(cells,$_2bvsfb2tjh8lywqo_fillWithPaddingBr),editor.selection.setCursorLocation(cells[0].dom(),0),!0},deleteTableElement=function(editor,table){return $_1al0sh3jjh8lywyv_deleteElement(editor,!1,table),!0},deleteTableRange=function(editor,rootElm,rng,startElm){return getParentCaption(rootElm,startElm).fold(function(){return function(editor,rootElm,rng){return $_g0m0zq3sjh8lyx10_getActionFromRange(rootElm,rng).map(function(action){return action.fold($_eqpqvr6jh8lyw3s.curry(deleteTableElement,editor),$_eqpqvr6jh8lyw3s.curry(emptyCells,editor))})}(editor,rootElm,rng)},function(caption){return function(editor,caption){return emptyElement(editor,caption)}(editor,caption)}).getOr(!1)},getParentCell=function(rootElm,elm){return $_5wjzy24jh8lyw2t.find($_dyxtub3ejh8lywxq_parentsAndSelf(elm,rootElm),isTableCell)},getParentCaption=function(rootElm,elm){return $_5wjzy24jh8lyw2t.find($_dyxtub3ejh8lywxq_parentsAndSelf(elm,rootElm),function(elm){return"caption"===$_7j1jt210jh8lywdx.name(elm)})},emptyElement=function(editor,elm){return $_2bvsfb2tjh8lywqo_fillWithPaddingBr(elm),editor.selection.setCursorLocation(elm.dom(),0),Option.some(!0)},deleteCaretInsideCaption=function(editor,rootElm,forward,fromCaption,from){return $_9kvypj2cjh8lywnz.navigate(forward,editor.getBody(),from).bind(function(to){return function(fromCaption,forward,from,to){return $_9kvypj2cjh8lywnz.firstPositionIn(fromCaption.dom()).bind(function(first){return $_9kvypj2cjh8lywnz.lastPositionIn(fromCaption.dom()).map(function(last){return forward?from.isEqual(first)&&to.isEqual(last):from.isEqual(last)&&to.isEqual(first)})}).getOr(!0)}(fromCaption,forward,from,to)?function(editor,elm){return emptyElement(editor,elm)}(editor,fromCaption):function(rootElm,fromCaption,to){return getParentCaption(rootElm,$_cgttw3zjh8lywdq.fromDom(to.getNode())).map(function(toCaption){return!1===$_5f6gpb1djh8lywg5.eq(toCaption,fromCaption)})}(rootElm,fromCaption,to)}).or(Option.some(!0))},deleteCaretCells=function(editor,forward,rootElm,startElm){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return getParentCell(rootElm,startElm).bind(function(fromCell){return $_b1urh33ajh8lywts_isEmpty(fromCell)?emptyElement(editor,fromCell):function(editor,rootElm,forward,fromCell,from){return $_9kvypj2cjh8lywnz.navigate(forward,editor.getBody(),from).bind(function(to){return getParentCell(rootElm,$_cgttw3zjh8lywdq.fromDom(to.getNode())).map(function(toCell){return!1===$_5f6gpb1djh8lywg5.eq(toCell,fromCell)})})}(editor,rootElm,forward,fromCell,from)})},deleteCaret=function(editor,forward,startElm){var rootElm=$_cgttw3zjh8lywdq.fromDom(editor.getBody());return getParentCaption(rootElm,startElm).fold(function(){return deleteCaretCells(editor,forward,rootElm,startElm)},function(fromCaption){return function(editor,forward,rootElm,fromCaption){var from=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_b1urh33ajh8lywts_isEmpty(fromCaption)?emptyElement(editor,fromCaption):deleteCaretInsideCaption(editor,rootElm,forward,fromCaption,from)}(editor,forward,rootElm,fromCaption)}).getOr(!1)},$_746feo3rjh8lyx0o_backspaceDelete=function(editor,forward){var startElm=$_cgttw3zjh8lywdq.fromDom(editor.selection.getStart(!0)),cells=$_bwjtq63tjh8lyx1g_getCellsFromEditor(editor);return editor.selection.isCollapsed()&&0===cells.length?deleteCaret(editor,forward,startElm):function(editor,startElm){var rootNode=$_cgttw3zjh8lywdq.fromDom(editor.getBody()),rng=editor.selection.getRng(),selectedCells=$_bwjtq63tjh8lyx1g_getCellsFromEditor(editor);return 0!==selectedCells.length?emptyCells(editor,selectedCells):deleteTableRange(editor,rootNode,rng,startElm)}(editor,startElm)},nativeCommand=function(editor,command){editor.getDoc().execCommand(command,!1,null)},$_fmagiy31jh8lywrp_deleteCommand=function(editor){$_ar80r13gjh8lywy7_backspaceDelete(editor,!1)||$_ej9d8d3kjh8lywzc_backspaceDelete(editor,!1)||$_5jmwsv32jh8lywrr_backspaceDelete(editor,!1)||$_746feo3rjh8lyx0o_backspaceDelete(editor)||$_lcy1p3fjh8lywxx_backspaceDelete(editor,!1)||(nativeCommand(editor,"Delete"),$_aj8isd34jh8lyws4_paddEmptyBody(editor))},$_fmagiy31jh8lywrp_forwardDeleteCommand=function(editor){$_ar80r13gjh8lywy7_backspaceDelete(editor,!0)||$_ej9d8d3kjh8lywzc_backspaceDelete(editor,!0)||$_5jmwsv32jh8lywrr_backspaceDelete(editor,!0)||$_746feo3rjh8lyx0o_backspaceDelete(editor)||$_lcy1p3fjh8lywxx_backspaceDelete(editor,!0)||nativeCommand(editor,"ForwardDelete")},getFontProp=function(propName){return function(rootElm,elm){return Option.from(elm).map($_cgttw3zjh8lywdq.fromDom).filter($_7j1jt210jh8lywdx.isElement).bind(function(element){return function(propName,rootElm,elm){var getProperty=function(elm){return $_36knnd12jh8lywe1_getRaw(elm,propName)};return $_6hl03835jh8lywsm.closest($_cgttw3zjh8lywdq.fromDom(elm),function(elm){return getProperty(elm).isSome()},function(elm){return $_5f6gpb1djh8lywg5.eq($_cgttw3zjh8lywdq.fromDom(rootElm),elm)}).bind(getProperty)}(propName,rootElm,element.dom()).or(function(propName,elm){return Option.from(DOMUtils$1.DOM.getStyle(elm,propName,!0))}(propName,element.dom()))}).getOr("")}},$_9wj7cv3wjh8lyx23={getFontSize:getFontProp("font-size"),getFontFamily:$_eqpqvr6jh8lyw3s.compose(function(fontFamily){return fontFamily.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},getFontProp("font-family")),toPt:function(fontSize,precision){return/[0-9.]+px$/.test(fontSize)?function(number,precision){var factor=Math.pow(10,precision);return Math.round(number*factor)/factor}(72*parseInt(fontSize,10)/96,precision||0)+"pt":fontSize}},findFirstCaretElement=function(editor){return $_9kvypj2cjh8lywnz.firstPositionIn(editor.getBody()).map(function(caret){var container=caret.container();return $_5oonaz1qjh8lywhz.isText(container)?container.parentNode:container})},getCaretElement=function(editor){return Option.from(editor.selection.getRng()).bind(function(rng){return function(rng,root){return rng.startContainer===root&&0===rng.startOffset}(rng,editor.getBody())?Option.none():Option.from(editor.selection.getStart(!0))})},fromFontSizeNumber=function(editor,value){if(/^[0-9\.]+$/.test(value)){var fontSizeNumber=parseInt(value,10);if(1<=fontSizeNumber&&fontSizeNumber<=7){var fontSizes=$_66vr6g2jjh8lywpf_getFontStyleValues(editor),fontClasses=$_66vr6g2jjh8lywpf_getFontSizeClasses(editor);return fontClasses?fontClasses[fontSizeNumber-1]||value:fontSizes[fontSizeNumber-1]||value}return value}return value},$_aayq8q3zjh8lyx2z_isEq=function(rng1,rng2){return rng1&&rng2&&rng1.startContainer===rng2.startContainer&&rng1.startOffset===rng2.startOffset&&rng1.endContainer===rng2.endContainer&&rng1.endOffset===rng2.endOffset},hasParent=function(node,rootNode,predicate){return null!==function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null}(node,rootNode,predicate)},hasParentWithName=function(node,rootNode,name){return hasParent(node,rootNode,function(node){return node.nodeName===name})},isTable$2=function(node){return node&&"TABLE"===node.nodeName},isTableCell$3=function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)},isCeFalseCaretContainer=function(node,rootNode){return isCaretContainer(node)&&!1===hasParent(node,rootNode,isCaretNode)},hasBrBeforeAfter=function(dom,node,left){for(var walker=new TreeWalker(node,dom.getParent(node.parentNode,dom.isBlock)||dom.getRoot());node=walker[left?"prev":"next"]();)if($_5oonaz1qjh8lywhz.isBr(node))return!0},findTextNodeRelative=function(dom,isAfterNode,collapsed,left,startNode){var walker,lastInlineElement,parentBlockContainer,node,body=dom.getRoot(),nonEmptyElementsMap=dom.schema.getNonEmptyElements();if(parentBlockContainer=dom.getParent(startNode.parentNode,dom.isBlock)||body,left&&$_5oonaz1qjh8lywhz.isBr(startNode)&&isAfterNode&&dom.isEmpty(parentBlockContainer))return Option.some(CaretPosition(startNode.parentNode,dom.nodeIndex(startNode)));for(walker=new TreeWalker(startNode,parentBlockContainer);node=walker[left?"prev":"next"]();){if("false"===dom.getContentEditableParent(node)||isCeFalseCaretContainer(node,body))return Option.none();if($_5oonaz1qjh8lywhz.isText(node)&&0<node.nodeValue.length)return!1===hasParentWithName(node,body,"A")?Option.some(CaretPosition(node,left?node.nodeValue.length:0)):Option.none();if(dom.isBlock(node)||nonEmptyElementsMap[node.nodeName.toLowerCase()])return Option.none();lastInlineElement=node}return collapsed&&lastInlineElement?Option.some(CaretPosition(lastInlineElement,0)):Option.none()},normalizeEndPoint=function(dom,collapsed,start,rng){var container,offset,walker,node,nonEmptyElementsMap,directionLeft,isAfterNode,body=dom.getRoot(),normalized=!1;if(container=rng[(start?"start":"end")+"Container"],offset=rng[(start?"start":"end")+"Offset"],isAfterNode=$_5oonaz1qjh8lywhz.isElement(container)&&offset===container.childNodes.length,nonEmptyElementsMap=dom.schema.getNonEmptyElements(),directionLeft=start,isCaretContainer(container))return Option.none();if($_5oonaz1qjh8lywhz.isElement(container)&&offset>container.childNodes.length-1&&(directionLeft=!1),$_5oonaz1qjh8lywhz.isDocument(container)&&(container=body,offset=0),container===body){if(directionLeft&&(node=container.childNodes[0<offset?offset-1:0])){if(isCaretContainer(node))return Option.none();if(nonEmptyElementsMap[node.nodeName]||isTable$2(node))return Option.none()}if(container.hasChildNodes()){if(offset=Math.min(!directionLeft&&0<offset?offset-1:offset,container.childNodes.length-1),container=container.childNodes[offset],offset=$_5oonaz1qjh8lywhz.isText(container)&&isAfterNode?container.data.length:0,!collapsed&&container===body.lastChild&&isTable$2(container))return Option.none();if(function(body,node){for(;node&&node!==body;){if($_5oonaz1qjh8lywhz.isContentEditableFalse(node))return!0;node=node.parentNode}return!1}(body,container)||isCaretContainer(container))return Option.none();if(container.hasChildNodes()&&!1===isTable$2(container)){walker=new TreeWalker(node=container,body);do{if($_5oonaz1qjh8lywhz.isContentEditableFalse(node)||isCaretContainer(node)){normalized=!1;break}if($_5oonaz1qjh8lywhz.isText(node)&&0<node.nodeValue.length){offset=directionLeft?0:node.nodeValue.length,container=node,normalized=!0;break}if(nonEmptyElementsMap[node.nodeName.toLowerCase()]&&!isTableCell$3(node)){offset=dom.nodeIndex(node),container=node.parentNode,directionLeft||offset++,normalized=!0;break}}while(node=directionLeft?walker.next():walker.prev())}}}return collapsed&&($_5oonaz1qjh8lywhz.isText(container)&&0===offset&&findTextNodeRelative(dom,isAfterNode,collapsed,!0,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),$_5oonaz1qjh8lywhz.isElement(container)&&((node=container.childNodes[offset])||(node=container.childNodes[offset-1]),!node||!$_5oonaz1qjh8lywhz.isBr(node)||function(node,name){return node.previousSibling&&node.previousSibling.nodeName===name}(node,"A")||hasBrBeforeAfter(dom,node,!1)||hasBrBeforeAfter(dom,node,!0)||findTextNodeRelative(dom,isAfterNode,collapsed,!0,node).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}))),directionLeft&&!collapsed&&$_5oonaz1qjh8lywhz.isText(container)&&offset===container.nodeValue.length&&findTextNodeRelative(dom,isAfterNode,collapsed,!1,container).each(function(pos){container=pos.container(),offset=pos.offset(),normalized=!0}),normalized?Option.some(CaretPosition(container,offset)):Option.none()},$_4v2pn63yjh8lyx2s_normalize=function(dom,rng){var collapsed=rng.collapsed,normRng=rng.cloneRange(),startPos=CaretPosition.fromRangeStart(rng);return normalizeEndPoint(dom,collapsed,!0,normRng).each(function(pos){collapsed&&CaretPosition.isAbove(startPos,pos)||normRng.setStart(pos.container(),pos.offset())}),collapsed||normalizeEndPoint(dom,collapsed,!1,normRng).each(function(pos){normRng.setEnd(pos.container(),pos.offset())}),collapsed&&normRng.collapse(!0),$_aayq8q3zjh8lyx2z_isEq(rng,normRng)?Option.none():Option.some(normRng)},scrollToBr=function(dom,selection,brElm){var marker=dom.create("span",{},"&nbsp;");brElm.parentNode.insertBefore(marker,brElm),selection.scrollIntoView(marker),dom.remove(marker)},moveSelectionToBr=function(dom,selection,brElm,extraBr){var rng=dom.createRng();extraBr?(rng.setStartBefore(brElm),rng.setEndBefore(brElm)):(rng.setStartAfter(brElm),rng.setEndAfter(brElm)),selection.setRng(rng)},insertBrAtCaret=function(editor,evt){var brElm,extraBr,selection=editor.selection,dom=editor.dom,rng=selection.getRng();$_4v2pn63yjh8lyx2s_normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)});var offset=rng.startOffset,container=rng.startContainer;if(1===container.nodeType&&container.hasChildNodes()){var isAfterLastNodeInContainer=offset>container.childNodes.length-1;container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&3===container.nodeType?container.nodeValue.length:0}var parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"",isControlKey=evt&&evt.ctrlKey;"LI"!==containerBlockName||isControlKey||(parentBlock=containerBlock),container&&3===container.nodeType&&offset>=container.nodeValue.length&&(function(schema,container,parentBlock){for(var node,walker=new TreeWalker(container,parentBlock),nonEmptyElementsMap=schema.getNonEmptyElements();node=walker.next();)if(nonEmptyElementsMap[node.nodeName.toLowerCase()]||0<node.length)return!0}(editor.schema,container,parentBlock)||(brElm=dom.create("br"),rng.insertNode(brElm),rng.setStartAfter(brElm),rng.setEndAfter(brElm),extraBr=!0)),brElm=dom.create("br"),rng.insertNode(brElm),scrollToBr(dom,selection,brElm),moveSelectionToBr(dom,selection,brElm,extraBr),editor.undoManager.add()},insertBrBefore=function(editor,inline){var br=$_cgttw3zjh8lywdq.fromTag("br");$_4m7u2e2kjh8lywpi.before($_cgttw3zjh8lywdq.fromDom(inline),br),editor.undoManager.add()},insertBrAfter=function(editor,inline){hasBrAfter(editor.getBody(),inline)||$_4m7u2e2kjh8lywpi.after($_cgttw3zjh8lywdq.fromDom(inline),$_cgttw3zjh8lywdq.fromTag("br"));var br=$_cgttw3zjh8lywdq.fromTag("br");$_4m7u2e2kjh8lywpi.after($_cgttw3zjh8lywdq.fromDom(inline),br),scrollToBr(editor.dom,editor.selection,br.dom()),moveSelectionToBr(editor.dom,editor.selection,br.dom(),!1),editor.undoManager.add()},hasBrAfter=function(rootNode,startNode){return pos=CaretPosition$1.after(startNode),!!$_5oonaz1qjh8lywhz.isBr(pos.getNode())||$_9kvypj2cjh8lywnz.nextPosition(rootNode,CaretPosition$1.after(startNode)).map(function(pos){return $_5oonaz1qjh8lywhz.isBr(pos.getNode())}).getOr(!1);var pos},isAnchorLink=function(elm){return elm&&"A"===elm.nodeName&&"href"in elm},isInsideAnchor=function(location){return location.fold($_eqpqvr6jh8lyw3s.constant(!1),isAnchorLink,isAnchorLink,$_eqpqvr6jh8lyw3s.constant(!1))},insertBrOutsideAnchor=function(editor,location){location.fold($_eqpqvr6jh8lyw3s.noop,$_eqpqvr6jh8lyw3s.curry(insertBrBefore,editor),$_eqpqvr6jh8lyw3s.curry(insertBrAfter,editor),$_eqpqvr6jh8lyw3s.noop)},$_cg4dz53xjh8lyx2g_insert=function(editor,evt){var anchorLocation=function(editor){var isInlineTarget=$_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.isInlineTarget,editor),position=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_6kjy7r3njh8lywzz_readLocation(isInlineTarget,editor.getBody(),position).filter(isInsideAnchor)}(editor);anchorLocation.isSome()?anchorLocation.each($_eqpqvr6jh8lyw3s.curry(insertBrOutsideAnchor,editor)):insertBrAtCaret(editor,evt)},adt=$_1ml90g3ijh8lywyp_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$_fn8a2o42jh8lyx3r_getStart=(adt.before,adt.on,adt.after,function(situ){return situ.fold($_eqpqvr6jh8lyw3s.identity,$_eqpqvr6jh8lyw3s.identity,$_eqpqvr6jh8lyw3s.identity)}),type$1=$_1ml90g3ijh8lywyp_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),range$1=$_4jz0ce18jh8lywft.immutable("start","soffset","finish","foffset"),$_bx4foa41jh8lyx3f={domRange:type$1.domRange,relative:type$1.relative,exact:type$1.exact,exactFromRange:function(simRange){return type$1.exact(simRange.start(),simRange.soffset(),simRange.finish(),simRange.foffset())},range:range$1,getWin:function(selection){var start=function(selection){return selection.match({domRange:function(rng){return $_cgttw3zjh8lywdq.fromDom(rng.startContainer)},relative:function(startSitu,finishSitu){return $_fn8a2o42jh8lyx3r_getStart(startSitu)},exact:function(start,soffset,finish,foffset){return start}})}(selection);return $_a43q0i17jh8lywfe.defaultView(start)}},browser$3=$_9hkktfnjh8lywc6.detect().browser,clamp=function(offset,element){var max=$_7j1jt210jh8lywdx.isText(element)?$_lh5l42wjh8lywr8_get(element).length:$_a43q0i17jh8lywfe.children(element).length+1;return max<offset?max:offset<0?0:offset},normalizeRng=function(rng){return $_bx4foa41jh8lyx3f.range(rng.start(),clamp(rng.soffset(),rng.start()),rng.finish(),clamp(rng.foffset(),rng.finish()))},isOrContains=function(root,elm){return $_5f6gpb1djh8lywg5.contains(root,elm)||$_5f6gpb1djh8lywg5.eq(root,elm)},isRngInRoot=function(root){return function(rng){return isOrContains(root,rng.start())&&isOrContains(root,rng.finish())}},shouldStore=function(editor){return!0===editor.inline||browser$3.isIE()},nativeRangeToSelectionRange=function(r){return $_bx4foa41jh8lyx3f.range($_cgttw3zjh8lywdq.fromDom(r.startContainer),r.startOffset,$_cgttw3zjh8lywdq.fromDom(r.endContainer),r.endOffset)},readRange=function(win){var selection=win.getSelection();return(selection&&0!==selection.rangeCount?Option.from(selection.getRangeAt(0)):Option.none()).map(nativeRangeToSelectionRange)},getBookmark$2=function(root){var win=$_a43q0i17jh8lywfe.defaultView(root);return readRange(win.dom()).filter(isRngInRoot(root))},validate=function(root,bookmark){return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng)},bookmarkToNativeRng=function(bookmark){var rng=document.createRange();try{return rng.setStart(bookmark.start().dom(),bookmark.soffset()),rng.setEnd(bookmark.finish().dom(),bookmark.foffset()),Option.some(rng)}catch(_){return Option.none()}},getRng=function(editor){return(editor.bookmark?editor.bookmark:Option.none()).bind($_eqpqvr6jh8lyw3s.curry(validate,$_cgttw3zjh8lywdq.fromDom(editor.getBody()))).bind(bookmarkToNativeRng)},$_eqs11m40jh8lyx31_store=function(editor){var newBookmark=shouldStore(editor)?getBookmark$2($_cgttw3zjh8lywdq.fromDom(editor.getBody())):Option.none();editor.bookmark=newBookmark.isSome()?newBookmark:editor.bookmark},$_eqs11m40jh8lyx31_restore=function(editor){getRng(editor).each(function(rng){editor.selection.setRng(rng)})},$_eqs11m40jh8lyx31_getRng=getRng,handle=function(editor,command){var settings=editor.settings,dom=editor.dom,selection=editor.selection,formatter=editor.formatter,indentUnit=/[a-z%]+$/i.exec(settings.indentation)[0],indentValue=parseInt(settings.indentation,10),useMargin=editor.getParam("indent_use_margin",!1);editor.queryCommandState("InsertUnorderedList")||editor.queryCommandState("InsertOrderedList")||(settings.forced_root_block||dom.getParent(selection.getNode(),dom.isBlock)||formatter.apply("div"),$_5wjzy24jh8lyw2t.each(selection.getSelectedBlocks(),function(element){return function(dom,command,useMargin,value,unit,element){if("false"!==dom.getContentEditable(element)&&"LI"!==element.nodeName){var indentStyleName=useMargin?"margin":"padding";if(indentStyleName="TABLE"===element.nodeName?"margin":indentStyleName,indentStyleName+="rtl"===dom.getStyle(element,"direction",!0)?"Right":"Left","outdent"===command){var styleValue=Math.max(0,parseInt(element.style[indentStyleName]||0,10)-value);dom.setStyle(element,indentStyleName,styleValue?styleValue+unit:"")}else styleValue=parseInt(element.style[indentStyleName]||0,10)+value+unit,dom.setStyle(element,indentStyleName,styleValue)}}(dom,command,useMargin,indentValue,indentUnit,element)}))},each$9=$_ahowuxkjh8lywbj.each,extend$2=$_ahowuxkjh8lywbj.extend,map$2=$_ahowuxkjh8lywbj.map,inArray$2=$_ahowuxkjh8lywbj.inArray;function EditorCommands(editor){var dom,selection,formatter,bookmark,commands={state:{},exec:{},value:{}},settings=editor.settings;editor.on("PreInit",function(){dom=editor.dom,selection=editor.selection,settings=editor.settings,formatter=editor.formatter});var queryCommandState=function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.state[command])return func(command);try{return editor.getDoc().queryCommandState(command)}catch(ex){}return!1}},addCommands=function(commandList,type){type=type||"exec",each$9(commandList,function(callback,command){each$9(command.toLowerCase().split(","),function(command){commands[type][command]=callback})})},addQueryValueHandler=function(command,callback,scope){command=command.toLowerCase(),commands.value[command]=function(){return callback.call(scope||editor)}};extend$2(this,{execCommand:function(command,ui,value,args){var func,customCommand,state=!1;if(!editor.removed){if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command)||args&&args.skip_focus?$_eqs11m40jh8lyx31_restore(editor):editor.focus(),(args=editor.fire("BeforeExecCommand",{command:command,ui:ui,value:value})).isDefaultPrevented())return!1;if(customCommand=command.toLowerCase(),func=commands.exec[customCommand])return func(customCommand,ui,value),editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;if(each$9(editor.plugins,function(p){if(p.execCommand&&p.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!(state=!0)}),state)return state;if(editor.theme&&editor.theme.execCommand&&editor.theme.execCommand(command,ui,value))return editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0;try{state=editor.getDoc().execCommand(command,ui,value)}catch(ex){}return!!state&&(editor.fire("ExecCommand",{command:command,ui:ui,value:value}),!0)}},queryCommandState:queryCommandState,queryCommandValue:function(command){var func;if(!editor.quirks.isHidden()&&!editor.removed){if(command=command.toLowerCase(),func=commands.value[command])return func(command);try{return editor.getDoc().queryCommandValue(command)}catch(ex){}}},queryCommandSupported:function(command){if(command=command.toLowerCase(),commands.exec[command])return!0;try{return editor.getDoc().queryCommandSupported(command)}catch(ex){}return!1},addCommands:addCommands,addCommand:function(command,callback,scope){command=command.toLowerCase(),commands.exec[command]=function(command,ui,value,args){return callback.call(scope||editor,ui,value,args)}},addQueryStateHandler:function(command,callback,scope){command=command.toLowerCase(),commands.state[command]=function(){return callback.call(scope||editor)}},addQueryValueHandler:addQueryValueHandler,hasCustomCommand:function(command){return command=command.toLowerCase(),!!commands.exec[command]}});var execNativeCommand=function(command,ui,value){return void 0===ui&&(ui=!1),void 0===value&&(value=null),editor.getDoc().execCommand(command,ui,value)},isFormatMatch=function(name){return formatter.match(name)},toggleFormat=function(name,value){formatter.toggle(name,value?{value:value}:void 0),editor.nodeChanged()},storeSelection=function(type){bookmark=selection.getBookmark(type)},restoreSelection=function(){selection.moveToBookmark(bookmark)};addCommands({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){editor.undoManager.add()},"Cut,Copy,Paste":function(command){var failed,doc=editor.getDoc();try{execNativeCommand(command)}catch(ex){failed=!0}if("paste"!==command||doc.queryCommandEnabled(command)||(failed=!0),failed||!doc.queryCommandSupported(command)){var msg=editor.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");$_9bpim8ajh8lyw68.mac&&(msg=msg.replace(/Ctrl\+/g,"⌘+")),editor.notificationManager.open({text:msg,type:"error"})}},unlink:function(){if(selection.isCollapsed()){var elm=editor.dom.getParent(editor.selection.getStart(),"a");elm&&editor.dom.remove(elm,!0)}else formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(command){var align=command.substring(7);"full"===align&&(align="justify"),each$9("left,center,right,justify".split(","),function(name){align!==name&&formatter.remove("align"+name)}),"none"!==align&&toggleFormat("align"+align)},"InsertUnorderedList,InsertOrderedList":function(command){var listElm,listParent;execNativeCommand(command),(listElm=dom.getParent(selection.getNode(),"ol,ul"))&&(listParent=listElm.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)&&(storeSelection(),dom.split(listParent,listElm),restoreSelection()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){toggleFormat(command)},"ForeColor,HiliteColor":function(command,ui,value){toggleFormat(command,value)},FontName:function(command,ui,value){!function(editor,value){editor.formatter.toggle("fontname",{value:fromFontSizeNumber(editor,value)}),editor.nodeChanged()}(editor,value)},FontSize:function(command,ui,value){!function(editor,value){editor.formatter.toggle("fontsize",{value:fromFontSizeNumber(editor,value)}),editor.nodeChanged()}(editor,value)},RemoveFormat:function(command){formatter.remove(command)},mceBlockQuote:function(){toggleFormat("blockquote")},FormatBlock:function(command,ui,value){return toggleFormat(value||"p")},mceCleanup:function(){var bookmark=selection.getBookmark();editor.setContent(editor.getContent()),selection.moveToBookmark(bookmark)},mceRemoveNode:function(command,ui,value){var node=value||selection.getNode();node!==editor.getBody()&&(storeSelection(),editor.dom.remove(node,!0),restoreSelection())},mceSelectNodeDepth:function(command,ui,value){var counter=0;dom.getParent(selection.getNode(),function(node){if(1===node.nodeType&&counter++===value)return selection.select(node),!1},editor.getBody())},mceSelectNode:function(command,ui,value){selection.select(value)},mceInsertContent:function(command,ui,value){$_13xltl1wjh8lywkr_insertAtCaret(editor,value)},mceInsertRawHTML:function(command,ui,value){var content=editor.getContent();selection.setContent("tiny_mce_marker"),editor.setContent(content.replace(/tiny_mce_marker/g,function(){return value}))},mceToggleFormat:function(command,ui,value){toggleFormat(value)},mceSetContent:function(command,ui,value){editor.setContent(value)},"Indent,Outdent":function(command){handle(editor,command)},mceRepaint:function(){},InsertHorizontalRule:function(){editor.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){editor.hasVisual=!editor.hasVisual,editor.addVisual()},mceReplaceContent:function(command,ui,value){editor.execCommand("mceInsertContent",!1,value.replace(/\{\$selection\}/g,selection.getContent({format:"text"})))},mceInsertLink:function(command,ui,value){var anchor;"string"==typeof value&&(value={href:value}),anchor=dom.getParent(selection.getNode(),"a"),value.href=value.href.replace(" ","%20"),anchor&&value.href||formatter.remove("link"),value.href&&formatter.apply("link",value,anchor)},selectAll:function(){var editingHost=dom.getParent(selection.getStart(),$_5oonaz1qjh8lywhz.isContentEditableTrue);if(editingHost){var rng=dom.createRng();rng.selectNodeContents(editingHost),selection.setRng(rng)}},delete:function(){$_fmagiy31jh8lywrp_deleteCommand(editor)},forwardDelete:function(){$_fmagiy31jh8lywrp_forwardDeleteCommand(editor)},mceNewDocument:function(){editor.setContent("")},InsertLineBreak:function(command,ui,value){return $_cg4dz53xjh8lyx2g_insert(editor,value),!0}});var alignStates=function(name){return function(){var nodes=selection.isCollapsed()?[dom.getParent(selection.getNode(),dom.isBlock)]:selection.getSelectedBlocks(),matches=map$2(nodes,function(node){return!!formatter.matchNode(node,name)});return-1!==inArray$2(matches,!0)}};addCommands({JustifyLeft:alignStates("alignleft"),JustifyCenter:alignStates("aligncenter"),JustifyRight:alignStates("alignright"),JustifyFull:alignStates("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(command){return isFormatMatch(command)},mceBlockQuote:function(){return isFormatMatch("blockquote")},Outdent:function(){var node;if(settings.inline_styles){if((node=dom.getParent(selection.getStart(),dom.isBlock))&&0<parseInt(node.style.paddingLeft,10))return!0;if((node=dom.getParent(selection.getEnd(),dom.isBlock))&&0<parseInt(node.style.paddingLeft,10))return!0}return queryCommandState("InsertUnorderedList")||queryCommandState("InsertOrderedList")||!settings.inline_styles&&!!dom.getParent(selection.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(command){var list=dom.getParent(selection.getNode(),"ul,ol");return list&&("insertunorderedlist"===command&&"UL"===list.tagName||"insertorderedlist"===command&&"OL"===list.tagName)}},"state"),addCommands({Undo:function(){editor.undoManager.undo()},Redo:function(){editor.undoManager.redo()}}),addQueryValueHandler("FontName",function(){return function(editor){return getCaretElement(editor).fold(function(){return findFirstCaretElement(editor).map(function(caretElement){return $_9wj7cv3wjh8lyx23.getFontFamily(editor.getBody(),caretElement)}).getOr("")},function(caretElement){return $_9wj7cv3wjh8lyx23.getFontFamily(editor.getBody(),caretElement)})}(editor)},this),addQueryValueHandler("FontSize",function(){return function(editor){return getCaretElement(editor).fold(function(){return findFirstCaretElement(editor).map(function(caretElement){return $_9wj7cv3wjh8lyx23.getFontSize(editor.getBody(),caretElement)}).getOr("")},function(caretElement){return $_9wj7cv3wjh8lyx23.getFontSize(editor.getBody(),caretElement)})}(editor)},this)}var nativeEvents=$_ahowuxkjh8lywbj.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend"," "),Dispatcher=function(settings){var scope,toggleEvent,self=this,bindings={},returnFalse=function(){return!1},returnTrue=function(){return!0};scope=(settings=settings||{}).scope||self,toggleEvent=settings.toggleEvent||returnFalse;var on=function(name,callback,prepend,extra){var handlers,names,i;if(!1===callback&&(callback=returnFalse),callback)for(callback={func:callback},extra&&$_ahowuxkjh8lywbj.extend(callback,extra),i=(names=name.toLowerCase().split(" ")).length;i--;)name=names[i],(handlers=bindings[name])||(handlers=bindings[name]=[],toggleEvent(name,!0)),prepend?handlers.unshift(callback):handlers.push(callback);return self},off=function(name,callback){var i,handlers,bindingName,names,hi;if(name)for(i=(names=name.toLowerCase().split(" ")).length;i--;){if(name=names[i],handlers=bindings[name],!name){for(bindingName in bindings)toggleEvent(bindingName,!1),delete bindings[bindingName];return self}if(handlers){if(callback)for(hi=handlers.length;hi--;)handlers[hi].func===callback&&(handlers=handlers.slice(0,hi).concat(handlers.slice(hi+1)),bindings[name]=handlers);else handlers.length=0;handlers.length||(toggleEvent(name,!1),delete bindings[name])}}else{for(name in bindings)toggleEvent(name,!1);bindings={}}return self};self.fire=function(name,args){var handlers,i,l,callback;if(name=name.toLowerCase(),(args=args||{}).type=name,args.target||(args.target=scope),args.preventDefault||(args.preventDefault=function(){args.isDefaultPrevented=returnTrue},args.stopPropagation=function(){args.isPropagationStopped=returnTrue},args.stopImmediatePropagation=function(){args.isImmediatePropagationStopped=returnTrue},args.isDefaultPrevented=returnFalse,args.isPropagationStopped=returnFalse,args.isImmediatePropagationStopped=returnFalse),settings.beforeFire&&settings.beforeFire(args),handlers=bindings[name])for(i=0,l=handlers.length;i<l;i++){if((callback=handlers[i]).once&&off(name,callback.func),args.isImmediatePropagationStopped())return args.stopPropagation(),args;if(!1===callback.func.call(scope,args))return args.preventDefault(),args}return args},self.on=on,self.off=off,self.once=function(name,callback,prepend){return on(name,callback,prepend,{once:!0})},self.has=function(name){return name=name.toLowerCase(),!(!bindings[name]||0===bindings[name].length)}};Dispatcher.isNative=function(name){return!!nativeEvents[name.toLowerCase()]};var customEventRootDelegates,getEventDispatcher=function(obj){return obj._eventDispatcher||(obj._eventDispatcher=new Dispatcher({scope:obj,toggleEvent:function(name,state){Dispatcher.isNative(name)&&obj.toggleNativeEvent&&obj.toggleNativeEvent(name,state)}})),obj._eventDispatcher},$_fuzxjg45jh8lyx45={fire:function(name,args,bubble){if(this.removed&&"remove"!==name)return args;if(args=getEventDispatcher(this).fire(name,args,bubble),!1!==bubble&&this.parent)for(var parent_1=this.parent();parent_1&&!args.isPropagationStopped();)parent_1.fire(name,args,!1),parent_1=parent_1.parent();return args},on:function(name,callback,prepend){return getEventDispatcher(this).on(name,callback,prepend)},off:function(name,callback){return getEventDispatcher(this).off(name,callback)},once:function(name,callback){return getEventDispatcher(this).once(name,callback)},hasEventListeners:function(name){return getEventDispatcher(this).has(name)}},read$2=function(element,attr){var value=$_3da62i14jh8lyweo.get(element,attr);return void 0===value||""===value?[]:value.split(" ")},$_5xj9rq4bjh8lyx4m_read=read$2,$_5xj9rq4bjh8lyx4m_add=function(element,attr,id){var nu=read$2(element,attr).concat([id]);$_3da62i14jh8lyweo.set(element,attr,nu.join(" "))},$_5xj9rq4bjh8lyx4m_remove=function(element,attr,id){var nu=$_5wjzy24jh8lyw2t.filter(read$2(element,attr),function(v){return v!==id});0<nu.length?$_3da62i14jh8lyweo.set(element,attr,nu.join(" ")):$_3da62i14jh8lyweo.remove(element,attr)},get$4=function(element){return $_5xj9rq4bjh8lyx4m_read(element,"class")},add$1=function(element,clazz){return $_5xj9rq4bjh8lyx4m_add(element,"class",clazz)},remove$5=function(element,clazz){return $_5xj9rq4bjh8lyx4m_remove(element,"class",clazz)},$_eprb6o4ajh8lyx4j_get=get$4,$_eprb6o4ajh8lyx4j_add=add$1,$_eprb6o4ajh8lyx4j_remove=remove$5,$_eprb6o4ajh8lyx4j_toggle=function(element,clazz){$_5wjzy24jh8lyw2t.contains(get$4(element),clazz)?remove$5(element,clazz):add$1(element,clazz)},$_eprb6o4ajh8lyx4j_supports=function(element){return void 0!==element.dom().classList},has$1=function(element,clazz){return $_eprb6o4ajh8lyx4j_supports(element)&&element.dom().classList.contains(clazz)},$_6hv60f48jh8lyx4g={add:function(element,clazz){$_eprb6o4ajh8lyx4j_supports(element)?element.dom().classList.add(clazz):$_eprb6o4ajh8lyx4j_add(element,clazz)},remove:function(element,clazz){$_eprb6o4ajh8lyx4j_supports(element)?element.dom().classList.remove(clazz):$_eprb6o4ajh8lyx4j_remove(element,clazz),function(element){0===($_eprb6o4ajh8lyx4j_supports(element)?element.dom().classList:$_eprb6o4ajh8lyx4j_get(element)).length&&$_3da62i14jh8lyweo.remove(element,"class")}(element)},toggle:function(element,clazz){return $_eprb6o4ajh8lyx4j_supports(element)?element.dom().classList.toggle(clazz):$_eprb6o4ajh8lyx4j_toggle(element,clazz)},toggler:function(element,clazz){var hasClasslist=$_eprb6o4ajh8lyx4j_supports(element),classList=element.dom().classList;return function(turnOff,turnOn,initial){var active=initial||!1,on=function(){turnOn(),active=!0},off=function(){turnOff(),active=!1};return{on:on,off:off,toggle:function(){(active?off:on)()},isOn:function(){return active}}}(function(){hasClasslist?classList.remove(clazz):$_eprb6o4ajh8lyx4j_remove(element,clazz)},function(){hasClasslist?classList.add(clazz):$_eprb6o4ajh8lyx4j_add(element,clazz)},has$1(element,clazz))},has:has$1},$_a4fgrn4cjh8lyx4q_firePreProcess=function(editor,args){return editor.fire("PreProcess",args)},$_a4fgrn4cjh8lyx4q_firePostProcess=function(editor,args){return editor.fire("PostProcess",args)},$_a4fgrn4cjh8lyx4q_fireRemove=function(editor){return editor.fire("remove")},$_a4fgrn4cjh8lyx4q_fireSwitchMode=function(editor,mode){return editor.fire("SwitchMode",{mode:mode})},$_a4fgrn4cjh8lyx4q_fireObjectResizeStart=function(editor,target,width,height){editor.fire("ObjectResizeStart",{target:target,width:width,height:height})},$_a4fgrn4cjh8lyx4q_fireObjectResized=function(editor,target,width,height){editor.fire("ObjectResized",{target:target,width:width,height:height})},setEditorCommandState=function(editor,cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},toggleReadOnly=function(editor,state){!function(elm,cls,state){$_6hv60f48jh8lyx4g.has(elm,cls)&&!1===state?$_6hv60f48jh8lyx4g.remove(elm,cls):state&&$_6hv60f48jh8lyx4g.add(elm,cls)}($_cgttw3zjh8lywdq.fromDom(editor.getBody()),"mce-content-readonly",state),state?(editor.selection.controlSelection.hideResizeRect(),editor.readonly=!0,editor.getBody().contentEditable="false"):(editor.readonly=!1,editor.getBody().contentEditable="true",setEditorCommandState(editor,"StyleWithCSS",!1),setEditorCommandState(editor,"enableInlineTableEditing",!1),setEditorCommandState(editor,"enableObjectResizing",!1),editor.focus(),editor.nodeChanged())},getMode=function(editor){return editor.readonly?"readonly":"design"},DOM$1=DOMUtils$1.DOM,getEventTarget=function(editor,eventName){return"selectionchange"===eventName?editor.getDoc():!editor.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)?editor.getDoc().documentElement:editor.settings.event_root?(editor.eventRoot||(editor.eventRoot=DOM$1.select(editor.settings.event_root)[0]),editor.eventRoot):editor.getBody()},fireEvent=function(editor,eventName,e){!function(editor){return!editor.hidden&&!editor.readonly}(editor)?function(editor){return!0===editor.readonly}(editor)&&e.preventDefault():editor.fire(eventName,e)},bindEventDelegate=function(editor,eventName){var eventRootElm,delegate;if(editor.delegates||(editor.delegates={}),!editor.delegates[eventName]&&!editor.removed)if(eventRootElm=getEventTarget(editor,eventName),editor.settings.event_root){if(customEventRootDelegates||(customEventRootDelegates={},editor.editorManager.on("removeEditor",function(){var name;if(!editor.editorManager.activeEditor&&customEventRootDelegates){for(name in customEventRootDelegates)editor.dom.unbind(getEventTarget(editor,name));customEventRootDelegates=null}})),customEventRootDelegates[eventName])return;delegate=function(e){for(var target=e.target,editors=editor.editorManager.get(),i=editors.length;i--;){var body=editors[i].getBody();(body===target||DOM$1.isChildOf(target,body))&&fireEvent(editors[i],eventName,e)}},customEventRootDelegates[eventName]=delegate,DOM$1.bind(eventRootElm,eventName,delegate)}else delegate=function(e){fireEvent(editor,eventName,e)},DOM$1.bind(eventRootElm,eventName,delegate),editor.delegates[eventName]=delegate},EditorObservable={bindPendingEventDelegates:function(){var self=this;$_ahowuxkjh8lywbj.each(self._pendingNativeEvents,function(name){bindEventDelegate(self,name)})},toggleNativeEvent:function(name,state){"focus"!==name&&"blur"!==name&&(state?this.initialized?bindEventDelegate(this,name):this._pendingNativeEvents?this._pendingNativeEvents.push(name):this._pendingNativeEvents=[name]:this.initialized&&(this.dom.unbind(getEventTarget(this,name),name,this.delegates[name]),delete this.delegates[name]))},unbindAllNativeEvents:function(){var name,body=this.getBody(),dom=this.dom;if(this.delegates){for(name in this.delegates)this.dom.unbind(getEventTarget(this,name),name,this.delegates[name]);delete this.delegates}!this.inline&&body&&dom&&(body.onload=null,dom.unbind(this.getWin()),dom.unbind(this.getDoc())),dom&&(dom.unbind(body),dom.unbind(this.getContainer()))}},EditorObservable$1=EditorObservable=$_ahowuxkjh8lywbj.extend({},$_fuzxjg45jh8lyx45,EditorObservable),each$10=$_ahowuxkjh8lywbj.each,explode$2=$_ahowuxkjh8lywbj.explode,keyCodeLookup={f9:120,f10:121,f11:122},modifierNames=$_ahowuxkjh8lywbj.makeMap("alt,ctrl,shift,meta,access");function Shortcuts(editor){var shortcuts={},pendingPatterns=[],parseShortcut=function(pattern){var id,key,shortcut={};for(key in each$10(explode$2(pattern,"+"),function(value){value in modifierNames?shortcut[value]=!0:/^[0-9]{2,}$/.test(value)?shortcut.keyCode=parseInt(value,10):(shortcut.charCode=value.charCodeAt(0),shortcut.keyCode=keyCodeLookup[value]||value.toUpperCase().charCodeAt(0))}),id=[shortcut.keyCode],modifierNames)shortcut[key]?id.push(key):shortcut[key]=!1;return shortcut.id=id.join(","),shortcut.access&&(shortcut.alt=!0,$_9bpim8ajh8lyw68.mac?shortcut.ctrl=!0:shortcut.shift=!0),shortcut.meta&&($_9bpim8ajh8lyw68.mac?shortcut.meta=!0:(shortcut.ctrl=!0,shortcut.meta=!1)),shortcut},createShortcut=function(pattern,desc,cmdFunc,scope){var shortcuts;return(shortcuts=$_ahowuxkjh8lywbj.map(explode$2(pattern,">"),parseShortcut))[shortcuts.length-1]=$_ahowuxkjh8lywbj.extend(shortcuts[shortcuts.length-1],{func:cmdFunc,scope:scope||editor}),$_ahowuxkjh8lywbj.extend(shortcuts[0],{desc:editor.translate(desc),subpatterns:shortcuts.slice(1)})},matchShortcut=function(e,shortcut){return!!shortcut&&shortcut.ctrl===e.ctrlKey&&shortcut.meta===e.metaKey&&shortcut.alt===e.altKey&&shortcut.shift===e.shiftKey&&!!(e.keyCode===shortcut.keyCode||e.charCode&&e.charCode===shortcut.charCode)&&(e.preventDefault(),!0)},executeShortcutAction=function(shortcut){return shortcut.func?shortcut.func.call(shortcut.scope):null};editor.on("keyup keypress keydown",function(e){!function(e){return e.altKey||e.ctrlKey||e.metaKey}(e)&&!function(e){return"keydown"===e.type&&112<=e.keyCode&&e.keyCode<=123}(e)||e.isDefaultPrevented()||(each$10(shortcuts,function(shortcut){if(matchShortcut(e,shortcut))return pendingPatterns=shortcut.subpatterns.slice(0),"keydown"===e.type&&executeShortcutAction(shortcut),!0}),matchShortcut(e,pendingPatterns[0])&&(1===pendingPatterns.length&&"keydown"===e.type&&executeShortcutAction(pendingPatterns[0]),pendingPatterns.shift()))}),this.add=function(pattern,desc,cmdFunc,scope){var cmd;return"string"==typeof(cmd=cmdFunc)?cmdFunc=function(){editor.execCommand(cmd,!1,null)}:$_ahowuxkjh8lywbj.isArray(cmd)&&(cmdFunc=function(){editor.execCommand(cmd[0],cmd[1],cmd[2])}),each$10(explode$2($_ahowuxkjh8lywbj.trim(pattern.toLowerCase())),function(pattern){var shortcut=createShortcut(pattern,desc,cmdFunc,scope);shortcuts[shortcut.id]=shortcut}),!0},this.remove=function(pattern){var shortcut=createShortcut(pattern);return!!shortcuts[shortcut.id]&&(delete shortcuts[shortcut.id],!0)}}var active=function(_doc){var doc=void 0!==_doc?_doc.dom():document;return Option.from(doc.activeElement).map($_cgttw3zjh8lywdq.fromDom)},$_717ku14fjh8lyx55_hasFocus=function(element){var doc=$_a43q0i17jh8lywfe.owner(element).dom();return element.dom()===doc.activeElement},$_717ku14fjh8lyx55_search=function(element){return active($_a43q0i17jh8lywfe.owner(element)).filter(function(e){return element.dom().contains(e.dom())})},getFocusInElement=function(root,rng){return function(rng){return rng.collapsed?Option.from(getNode(rng.startContainer,rng.startOffset)).map($_cgttw3zjh8lywdq.fromDom):Option.none()}(rng).bind(function(node){return isTableSection(node)?Option.some(node):!1===$_5f6gpb1djh8lywg5.contains(root,node)?Option.some(root):Option.none()})},normalizeSelection=function(editor,rng){getFocusInElement($_cgttw3zjh8lywdq.fromDom(editor.getBody()),rng).bind(function(elm){return $_9kvypj2cjh8lywnz.firstPositionIn(elm.dom())}).fold(function(){editor.selection.normalize()},function(caretPos){return editor.selection.setRng(caretPos.toRange())})},focusBody=function(body){if(body.setActive)try{body.setActive()}catch(ex){body.focus()}else body.focus()},hasInlineFocus=function(editor){var elm,rawBody=editor.getBody();return rawBody&&(elm=$_cgttw3zjh8lywdq.fromDom(rawBody),$_717ku14fjh8lyx55_hasFocus(elm)||$_717ku14fjh8lyx55_search(elm).isSome())},hasFocus$1=function(editor){return editor.inline?hasInlineFocus(editor):function(editor){return editor.iframeElement&&$_717ku14fjh8lyx55_hasFocus($_cgttw3zjh8lywdq.fromDom(editor.iframeElement))}(editor)},activateEditor=function(editor){return editor.editorManager.setActive(editor)},$_cnu79r4ejh8lyx4x_focus=function(editor,skipFocus){editor.removed||(skipFocus?activateEditor(editor):function(editor){var selection=editor.selection,contentEditable=editor.settings.content_editable,body=editor.getBody(),rng=selection.getRng();editor.quirks.refreshContentEditable();var contentEditableHost=function(editor,node){return editor.dom.getParent(node,function(node){return"true"===editor.dom.getContentEditable(node)})}(editor,selection.getNode());if(editor.$.contains(body,contentEditableHost))return focusBody(contentEditableHost),normalizeSelection(editor,rng),activateEditor(editor);void 0!==editor.bookmark&&!1===hasFocus$1(editor)&&$_eqs11m40jh8lyx31_getRng(editor).each(function(bookmarkRng){editor.selection.setRng(bookmarkRng),rng=bookmarkRng}),contentEditable||($_9bpim8ajh8lyw68.opera||focusBody(body),editor.getWin().focus()),($_9bpim8ajh8lyw68.gecko||contentEditable)&&(focusBody(body),normalizeSelection(editor,rng)),activateEditor(editor)}(editor))},$_cnu79r4ejh8lyx4x_hasFocus=hasFocus$1,getProp=function(propName,elm){return elm.dom()[propName]},getComputedSizeProp=function(propName,elm){return parseInt($_36knnd12jh8lywe1_get(elm,propName),10)},getClientWidth=$_eqpqvr6jh8lyw3s.curry(getProp,"clientWidth"),getClientHeight=$_eqpqvr6jh8lyw3s.curry(getProp,"clientHeight"),getMarginTop=$_eqpqvr6jh8lyw3s.curry(getComputedSizeProp,"margin-top"),getMarginLeft=$_eqpqvr6jh8lyw3s.curry(getComputedSizeProp,"margin-left"),$_7f1iw94jjh8lyx60_isXYInContentArea=function(editor,clientX,clientY){var bodyElm=$_cgttw3zjh8lywdq.fromDom(editor.getBody()),targetElm=editor.inline?bodyElm:$_a43q0i17jh8lywfe.documentElement(bodyElm),transposedPoint=function(inline,elm,clientX,clientY){var clientRect=function(elm){return elm.dom().getBoundingClientRect()}(elm);return{x:clientX-(inline?clientRect.left+elm.dom().clientLeft+getMarginLeft(elm):0),y:clientY-(inline?clientRect.top+elm.dom().clientTop+getMarginTop(elm):0)}}(editor.inline,targetElm,clientX,clientY);return function(bodyElm,clientX,clientY){var clientWidth=getClientWidth(bodyElm),clientHeight=getClientHeight(bodyElm);return 0<=clientX&&0<=clientY&&clientX<=clientWidth&&clientY<=clientHeight}(targetElm,transposedPoint.x,transposedPoint.y)},$_7f1iw94jjh8lyx60_isEditorAttachedToDom=function(editor){var node,rawContainer=editor.inline?editor.getBody():editor.getContentAreaContainer();return(node=rawContainer,Option.from(node).map($_cgttw3zjh8lywdq.fromDom)).map(function(container){return $_5f6gpb1djh8lywg5.contains($_a43q0i17jh8lywfe.owner(container),container)}).getOr(!1)};function NotificationManager(editor){var notifications=[],getImplementation=function(){var unimplemented,theme=editor.theme;return theme&&theme.getNotificationManagerImpl?theme.getNotificationManagerImpl():{open:unimplemented=function(){throw new Error("Theme did not provide a NotificationManager implementation.")},close:unimplemented,reposition:unimplemented,getArgs:unimplemented}},reposition=function(){0<notifications.length&&getImplementation().reposition(notifications)},closeNotification=function(notification){$_5wjzy24jh8lyw2t.findIndex(notifications,function(otherNotification){return otherNotification===notification}).each(function(index){notifications.splice(index,1)})},open=function(args){if(!editor.removed&&$_7f1iw94jjh8lyx60_isEditorAttachedToDom(editor))return $_5wjzy24jh8lyw2t.find(notifications,function(notification){return a=getImplementation().getArgs(notification),b=args,!(a.type!==b.type||a.text!==b.text||a.progressBar||a.timeout||b.progressBar||b.timeout);var a,b}).getOrThunk(function(){editor.editorManager.setActive(editor);var notification=getImplementation().open(args,function(){closeNotification(notification),reposition()});return function(notification){notifications.push(notification)}(notification),reposition(),notification})};return function(editor){editor.on("SkinLoaded",function(){var serviceMessage=editor.settings.service_message;serviceMessage&&open({text:serviceMessage,type:"warning",timeout:0,icon:""})}),editor.on("ResizeEditor ResizeWindow",function(){$_8sy3pfhjh8lyw95.requestAnimationFrame(reposition)}),editor.on("remove",function(){$_5wjzy24jh8lyw2t.each(notifications,function(notification){getImplementation().close(notification)})})}(editor),{open:open,close:function(){Option.from(notifications[0]).each(function(notification){getImplementation().close(notification),closeNotification(notification),reposition()})},getNotifications:function(){return notifications}}}function WindowManager(editor){var windows=[],getImplementation=function(){var unimplemented,theme=editor.theme;return theme&&theme.getWindowManagerImpl?theme.getWindowManagerImpl():{open:unimplemented=function(){throw new Error("Theme did not provide a WindowManager implementation.")},alert:unimplemented,confirm:unimplemented,close:unimplemented,getParams:unimplemented,setParams:unimplemented}},funcBind=function(scope,f){return function(){return f?f.apply(scope,arguments):void 0}},addWindow=function(win){windows.push(win),function(win){editor.fire("OpenWindow",{win:win})}(win)},closeWindow=function(win){$_5wjzy24jh8lyw2t.findIndex(windows,function(otherWindow){return otherWindow===win}).each(function(index){windows.splice(index,1),function(win){editor.fire("CloseWindow",{win:win})}(win),0===windows.length&&editor.focus()})},getTopWindow=function(){return Option.from(windows[windows.length-1])};return editor.on("remove",function(){$_5wjzy24jh8lyw2t.each(windows.slice(0),function(win){getImplementation().close(win)})}),{windows:windows,open:function(args,params){editor.editorManager.setActive(editor),$_eqs11m40jh8lyx31_store(editor);var win=getImplementation().open(args,params,closeWindow);return addWindow(win),win},alert:function(message,callback,scope){var win=getImplementation().alert(message,funcBind(scope||this,callback),closeWindow);addWindow(win)},confirm:function(message,callback,scope){var win=getImplementation().confirm(message,funcBind(scope||this,callback),closeWindow);addWindow(win)},close:function(){getTopWindow().each(function(win){getImplementation().close(win),closeWindow(win)})},getParams:function(){return getTopWindow().map(getImplementation().getParams).getOr(null)},setParams:function(params){getTopWindow().each(function(win){getImplementation().setParams(win,params)})},getWindows:function(){return windows}}}var PluginManager=AddOnManager.PluginManager,pluginUrlToMessage=function(editor,url){var plugin=function(targetUrl,suffix){for(var name_1 in PluginManager.urls)if(PluginManager.urls[name_1]+"/plugin"+suffix+".js"===targetUrl)return name_1;return null}(url,editor.suffix);return plugin?"Failed to load plugin: "+plugin+" from url "+url:"Failed to load plugin url: "+url},displayNotification=function(editor,message){editor.notificationManager.open({type:"error",text:message})},displayError=function(editor,message){editor._skinLoaded?displayNotification(editor,message):editor.on("SkinLoaded",function(){displayNotification(editor,message)})},$_5vy074njh8lyx6h_pluginLoadError=function(editor,url){displayError(editor,pluginUrlToMessage(editor,url))},$_5vy074njh8lyx6h_uploadError=function(editor,message){displayError(editor,"Failed to upload image: "+message)},$_5vy074njh8lyx6h_displayError=displayError,$_5vy074njh8lyx6h_initError=function(message){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var console=window.console;console&&(console.error?console.error.apply(console,arguments):console.log.apply(console,arguments))},PluginManager$1=AddOnManager.PluginManager,ThemeManager=AddOnManager.ThemeManager;function XMLHttpRequest(){return new($_99xmy7cjh8lyw6k.getOrDie("XMLHttpRequest"))}function Uploader(uploadStatus,settings){var pendingPromises={},defaultHandler=function(blobInfo,success,failure,progress){var xhr,formData;(xhr=new XMLHttpRequest).open("POST",settings.url),xhr.withCredentials=settings.credentials,xhr.upload.onprogress=function(e){progress(e.loaded/e.total*100)},xhr.onerror=function(){failure("Image upload failed due to a XHR Transport error. Code: "+xhr.status)},xhr.onload=function(){var json,path1,path2;xhr.status<200||300<=xhr.status?failure("HTTP Error: "+xhr.status):(json=JSON.parse(xhr.responseText))&&"string"==typeof json.location?success((path1=settings.basePath,path2=json.location,path1?path1.replace(/\/$/,"")+"/"+path2.replace(/^\//,""):path2)):failure("Invalid JSON: "+xhr.responseText)},(formData=new FormData).append("file",blobInfo.blob(),blobInfo.filename()),xhr.send(formData)},handlerSuccess=function(blobInfo,url){return{url:url,blobInfo:blobInfo,status:!0}},handlerFailure=function(blobInfo,error){return{url:"",blobInfo:blobInfo,status:!1,error:error}},resolvePending=function(blobUri,result){$_ahowuxkjh8lywbj.each(pendingPromises[blobUri],function(resolve){resolve(result)}),delete pendingPromises[blobUri]},uploadBlobs=function(blobInfos,openNotification){return blobInfos=$_ahowuxkjh8lywbj.grep(blobInfos,function(blobInfo){return!uploadStatus.isUploaded(blobInfo.blobUri())}),promiseObj.all($_ahowuxkjh8lywbj.map(blobInfos,function(blobInfo){return uploadStatus.isPending(blobInfo.blobUri())?function(blobInfo){var blobUri=blobInfo.blobUri();return new promiseObj(function(resolve){pendingPromises[blobUri]=pendingPromises[blobUri]||[],pendingPromises[blobUri].push(resolve)})}(blobInfo):function(blobInfo,handler,openNotification){return uploadStatus.markPending(blobInfo.blobUri()),new promiseObj(function(resolve){var notification;try{var closeNotification_1=function(){notification&&notification.close()};handler(blobInfo,function(url){closeNotification_1(),uploadStatus.markUploaded(blobInfo.blobUri(),url),resolvePending(blobInfo.blobUri(),handlerSuccess(blobInfo,url)),resolve(handlerSuccess(blobInfo,url))},function(error){closeNotification_1(),uploadStatus.removeFailed(blobInfo.blobUri()),resolvePending(blobInfo.blobUri(),handlerFailure(blobInfo,error)),resolve(handlerFailure(blobInfo,error))},function(percent){percent<0||100<percent||(notification||(notification=openNotification()),notification.progressBar.value(percent))})}catch(ex){resolve(handlerFailure(blobInfo,ex.message))}})}(blobInfo,settings.handler,openNotification)}))};return settings=$_ahowuxkjh8lywbj.extend({credentials:!1,handler:defaultHandler},settings),{upload:function(blobInfos,openNotification){return settings.url||settings.handler!==defaultHandler?uploadBlobs(blobInfos,openNotification):new promiseObj(function(resolve){resolve([])})}}}function Blob(parts,properties){return new($_99xmy7cjh8lyw6k.getOrDie("Blob"))(parts,properties)}function FileReader(){return new($_99xmy7cjh8lyw6k.getOrDie("FileReader"))}function Uint8Array(arr){return new($_99xmy7cjh8lyw6k.getOrDie("Uint8Array"))(arr)}var $_bfbm2n50jh8lyx88_atob=function(base64){return $_99xmy7cjh8lyw6k.getOrDie("atob")(base64)},parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),(matches=/data:([^;]+)/.exec(uri[0]))&&(type=matches[1]),{type:type,data:uri[1]}},$_ap7oid4wjh8lyx7y_uriToBlob=function(url){return 0===url.indexOf("blob:")?function(url){return new promiseObj(function(resolve,reject){var rejectWithError=function(){reject("Cannot convert "+url+" to Blob. Resource might not exist or is inaccessible.")};try{var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="blob",xhr.onload=function(){200===this.status?resolve(this.response):rejectWithError()},xhr.onerror=rejectWithError,xhr.send()}catch(ex){rejectWithError()}})}(url):0===url.indexOf("data:")?(uri=url,new promiseObj(function(resolve){var str,arr,i;uri=parseDataUri(uri);try{str=$_bfbm2n50jh8lyx88_atob(uri.data)}catch(e){return void resolve(new Blob([]))}for(arr=new Uint8Array(str.length),i=0;i<arr.length;i++)arr[i]=str.charCodeAt(i);resolve(new Blob([arr],{type:uri.type}))})):null;var uri},$_ap7oid4wjh8lyx7y_blobToDataUri=function(blob){return new promiseObj(function(resolve){var reader=new FileReader;reader.onloadend=function(){resolve(reader.result)},reader.readAsDataURL(blob)})},$_ap7oid4wjh8lyx7y_parseDataUri=parseDataUri,count=0,uniqueId=function(prefix){return(prefix||"blobid")+count++},imageToBlobInfo=function(blobCache,img,resolve,reject){var base64,blobInfo;0!==img.src.indexOf("blob:")?(base64=$_ap7oid4wjh8lyx7y_parseDataUri(img.src).data,(blobInfo=blobCache.findFirst(function(cachedBlobInfo){return cachedBlobInfo.base64()===base64}))?resolve({image:img,blobInfo:blobInfo}):$_ap7oid4wjh8lyx7y_uriToBlob(img.src).then(function(blob){blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})},function(err){reject(err)})):(blobInfo=blobCache.getByUri(img.src))?resolve({image:img,blobInfo:blobInfo}):$_ap7oid4wjh8lyx7y_uriToBlob(img.src).then(function(blob){$_ap7oid4wjh8lyx7y_blobToDataUri(blob).then(function(dataUri){base64=$_ap7oid4wjh8lyx7y_parseDataUri(dataUri).data,blobInfo=blobCache.create(uniqueId(),blob,base64),blobCache.add(blobInfo),resolve({image:img,blobInfo:blobInfo})})},function(err){reject(err)})},getAllImages=function(elm){return elm?elm.getElementsByTagName("img"):[]},count$1=0,$_co2y7g52jh8lyx8f={uuid:function(prefix){return prefix+count$1+++(rnd=function(){return Math.round(4294967295*Math.random()).toString(36)},"s"+(new Date).getTime().toString(36)+rnd()+rnd()+rnd());var rnd}};function EditorUpload(editor){var cache,constant,toBlobInfo,get,findFirst,uploader,imageScanner,blobUriStatuses,createStatus,hasBlobUri,blobCache=(cache=[],constant=$_8aqzj925jh8lywmj.constant,toBlobInfo=function(o){var id,name,mime;if(!o.blob||!o.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");return id=o.id||$_co2y7g52jh8lyx8f.uuid("blobid"),name=o.name||id,{id:constant(id),name:constant(name),filename:constant(name+"."+(mime=o.blob.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png"}[mime.toLowerCase()]||"dat")),blob:constant(o.blob),base64:constant(o.base64),blobUri:constant(o.blobUri||$_ge0pt0bjh8lyw6g.createObjectURL(o.blob)),uri:constant(o.uri)}},{create:function(o,blob,base64,filename){return toBlobInfo("object"==typeof o?o:{id:o,name:filename,blob:blob,base64:base64})},add:function(blobInfo){get(blobInfo.id())||cache.push(blobInfo)},get:get=function(id){return findFirst(function(cachedBlobInfo){return cachedBlobInfo.id()===id})},getByUri:function(blobUri){return findFirst(function(blobInfo){return blobInfo.blobUri()===blobUri})},findFirst:findFirst=function(predicate){return $_9tjm51ljh8lywbq.filter(cache,predicate)[0]},removeByUri:function(blobUri){cache=$_9tjm51ljh8lywbq.filter(cache,function(blobInfo){return blobInfo.blobUri()!==blobUri||($_ge0pt0bjh8lyw6g.revokeObjectURL(blobInfo.blobUri()),!1)})},destroy:function(){$_9tjm51ljh8lywbq.each(cache,function(cachedBlobInfo){$_ge0pt0bjh8lyw6g.revokeObjectURL(cachedBlobInfo.blobUri())}),cache=[]}}),settings=editor.settings,uploadStatus=(blobUriStatuses={},createStatus=function(status,resultUri){return{status:status,resultUri:resultUri}},{hasBlobUri:hasBlobUri=function(blobUri){return blobUri in blobUriStatuses},getResultUri:function(blobUri){var result=blobUriStatuses[blobUri];return result?result.resultUri:null},isPending:function(blobUri){return!!hasBlobUri(blobUri)&&1===blobUriStatuses[blobUri].status},isUploaded:function(blobUri){return!!hasBlobUri(blobUri)&&2===blobUriStatuses[blobUri].status},markPending:function(blobUri){blobUriStatuses[blobUri]=createStatus(1,null)},markUploaded:function(blobUri,resultUri){blobUriStatuses[blobUri]=createStatus(2,resultUri)},removeFailed:function(blobUri){delete blobUriStatuses[blobUri]},destroy:function(){blobUriStatuses={}}}),aliveGuard=function(callback){return function(result){return editor.selection?callback(result):[]}},replaceString=function(content,search,replace){for(var index=0;-1!==(index=content.indexOf(search,index))&&(content=content.substring(0,index)+replace+content.substr(index+search.length),index+=replace.length-search.length+1),-1!==index;);return content},replaceImageUrl=function(content,targetUrl,replacementUrl){return content=replaceString(content,'src="'+targetUrl+'"','src="'+replacementUrl+'"'),content=replaceString(content,'data-mce-src="'+targetUrl+'"','data-mce-src="'+replacementUrl+'"')},replaceUrlInUndoStack=function(targetUrl,replacementUrl){$_9tjm51ljh8lywbq.each(editor.undoManager.data,function(level){"fragmented"===level.type?level.fragments=$_9tjm51ljh8lywbq.map(level.fragments,function(fragment){return replaceImageUrl(fragment,targetUrl,replacementUrl)}):level.content=replaceImageUrl(level.content,targetUrl,replacementUrl)})},openNotification=function(){return editor.notificationManager.open({text:editor.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})},replaceImageUri=function(image,resultUri){blobCache.removeByUri(image.src),replaceUrlInUndoStack(image.src,resultUri),editor.$(image).attr({src:settings.images_reuse_filename?resultUri+"?"+(new Date).getTime():resultUri,"data-mce-src":editor.convertURL(resultUri,"src")})},uploadImages=function(callback){return uploader||(uploader=Uploader(uploadStatus,{url:settings.images_upload_url,basePath:settings.images_upload_base_path,credentials:settings.images_upload_credentials,handler:settings.images_upload_handler})),scanForImages().then(aliveGuard(function(imageInfos){var blobInfos;return blobInfos=$_9tjm51ljh8lywbq.map(imageInfos,function(imageInfo){return imageInfo.blobInfo}),uploader.upload(blobInfos,openNotification).then(aliveGuard(function(result){var filteredResult=$_9tjm51ljh8lywbq.map(result,function(uploadInfo,index){var image=imageInfos[index].image;return uploadInfo.status&&!1!==editor.settings.images_replace_blob_uris?replaceImageUri(image,uploadInfo.url):uploadInfo.error&&$_5vy074njh8lyx6h_uploadError(editor,uploadInfo.error),{element:image,status:uploadInfo.status}});return callback&&callback(filteredResult),filteredResult}))}))},uploadImagesAuto=function(callback){if(!1!==settings.automatic_uploads)return uploadImages(callback)},isValidDataUriImage=function(imgElm){return!settings.images_dataimg_filter||settings.images_dataimg_filter(imgElm)},scanForImages=function(){return imageScanner||(imageScanner=function(uploadStatus,blobCache){var cachedPromises={};return{findAll:function(elm,predicate){var images;predicate||(predicate=$_8aqzj925jh8lywmj.constant(!0)),images=$_9tjm51ljh8lywbq.filter(getAllImages(elm),function(img){var src=img.src;return!!$_9bpim8ajh8lyw68.fileApi&&!img.hasAttribute("data-mce-bogus")&&!img.hasAttribute("data-mce-placeholder")&&!(!src||src===$_9bpim8ajh8lyw68.transparentSrc)&&(0===src.indexOf("blob:")?!uploadStatus.isUploaded(src):0===src.indexOf("data:")&&predicate(img))});var promises=$_9tjm51ljh8lywbq.map(images,function(img){if(cachedPromises[img.src])return new promiseObj(function(resolve){cachedPromises[img.src].then(function(imageInfo){if("string"==typeof imageInfo)return imageInfo;resolve({image:img,blobInfo:imageInfo.blobInfo})})});var newPromise=new promiseObj(function(resolve,reject){imageToBlobInfo(blobCache,img,resolve,reject)}).then(function(result){return delete cachedPromises[result.image.src],result}).catch(function(error){return delete cachedPromises[img.src],error});return cachedPromises[img.src]=newPromise});return promiseObj.all(promises)}}}(uploadStatus,blobCache)),imageScanner.findAll(editor.getBody(),isValidDataUriImage).then(aliveGuard(function(result){return result=$_9tjm51ljh8lywbq.filter(result,function(resultItem){return"string"!=typeof resultItem||($_5vy074njh8lyx6h_displayError(editor,resultItem),!1)}),$_9tjm51ljh8lywbq.each(result,function(resultItem){replaceUrlInUndoStack(resultItem.image.src,resultItem.blobInfo.blobUri()),resultItem.image.src=resultItem.blobInfo.blobUri(),resultItem.image.removeAttribute("data-mce-src")}),result}))},replaceBlobUris=function(content){return content.replace(/src="(blob:[^"]+)"/g,function(match,blobUri){var resultUri=uploadStatus.getResultUri(blobUri);if(resultUri)return'src="'+resultUri+'"';var blobInfo=blobCache.getByUri(blobUri);return blobInfo||(blobInfo=$_9tjm51ljh8lywbq.reduce(editor.editorManager.get(),function(result,editor){return result||editor.editorUpload&&editor.editorUpload.blobCache.getByUri(blobUri)},null)),blobInfo?'src="data:'+blobInfo.blob().type+";base64,"+blobInfo.base64()+'"':match})};return editor.on("setContent",function(){!1!==editor.settings.automatic_uploads?uploadImagesAuto():scanForImages()}),editor.on("RawSaveContent",function(e){e.content=replaceBlobUris(e.content)}),editor.on("getContent",function(e){e.source_view||"raw"===e.format||(e.content=replaceBlobUris(e.content))}),editor.on("PostRender",function(){editor.parser.addNodeFilter("img",function(images){$_9tjm51ljh8lywbq.each(images,function(img){var src=img.attr("src");if(!blobCache.getByUri(src)){var resultUri=uploadStatus.getResultUri(src);resultUri&&img.attr("src",resultUri)}})})}),{blobCache:blobCache,uploadImages:uploadImages,uploadImagesAuto:uploadImagesAuto,scanForImages:scanForImages,destroy:function(){blobCache.destroy(),uploadStatus.destroy(),imageScanner=uploader=null}}}var isBlockElement=function(blockElements,node){return blockElements.hasOwnProperty(node.nodeName)},isValidTarget=function(blockElements,node){return!!$_5oonaz1qjh8lywhz.isText(node)||!!$_5oonaz1qjh8lywhz.isElement(node)&&!isBlockElement(blockElements,node)&&!$_eyp5ec2njh8lywpo_isBookmarkNode(node)},shouldRemoveTextNode=function(blockElements,node){if($_5oonaz1qjh8lywhz.isText(node)){if(0===node.nodeValue.length)return!0;if(/^\s+$/.test(node.nodeValue)&&(!node.nextSibling||isBlockElement(blockElements,node.nextSibling)))return!0}return!1},addRootBlocks=function(editor){var rng,startContainer,startOffset,endContainer,endOffset,rootBlockNode,tempNode,wrapped,restoreSelection,rootNodeName,forcedRootBlock,settings=editor.settings,dom=editor.dom,selection=editor.selection,schema=editor.schema,blockElements=schema.getBlockElements(),node=selection.getStart(),rootNode=editor.getBody();if(forcedRootBlock=settings.forced_root_block,node&&$_5oonaz1qjh8lywhz.isElement(node)&&forcedRootBlock&&(rootNodeName=rootNode.nodeName.toLowerCase(),schema.isValidChild(rootNodeName,forcedRootBlock.toLowerCase())&&!function(blockElements,root,node){return $_5wjzy24jh8lyw2t.exists($_dyxtub3ejh8lywxq_parents($_cgttw3zjh8lywdq.fromDom(node),$_cgttw3zjh8lywdq.fromDom(root)),function(elm){return isBlockElement(blockElements,elm.dom())})}(blockElements,rootNode,node))){for(startContainer=(rng=selection.getRng()).startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,restoreSelection=$_cnu79r4ejh8lyx4x_hasFocus(editor),node=rootNode.firstChild;node;)if(isValidTarget(blockElements,node)){if(shouldRemoveTextNode(blockElements,node)){node=(tempNode=node).nextSibling,dom.remove(tempNode);continue}rootBlockNode||(rootBlockNode=dom.create(forcedRootBlock,editor.settings.forced_root_block_attrs),node.parentNode.insertBefore(rootBlockNode,node),wrapped=!0),node=(tempNode=node).nextSibling,rootBlockNode.appendChild(tempNode)}else rootBlockNode=null,node=node.nextSibling;wrapped&&restoreSelection&&(rng.setStart(startContainer,startOffset),rng.setEnd(endContainer,endOffset),selection.setRng(rng),editor.nodeChanged())}},$_85z7kh54jh8lyx8j_setup=function(editor){editor.settings.forced_root_block&&editor.on("NodeChange",$_eqpqvr6jh8lyw3s.curry(addRootBlocks,editor))},getFirstChildren=function(node){return $_a43q0i17jh8lywfe.firstChild(node).fold($_eqpqvr6jh8lyw3s.constant([node]),function(child){return[node].concat(getFirstChildren(child))})},getLastChildren$1=function(node){return $_a43q0i17jh8lywfe.lastChild(node).fold($_eqpqvr6jh8lyw3s.constant([node]),function(child){return"br"===$_7j1jt210jh8lywdx.name(child)?$_a43q0i17jh8lywfe.prevSibling(child).map(function(sibling){return[node].concat(getLastChildren$1(sibling))}).getOr([]):[node].concat(getLastChildren$1(child))})},hasAllContentsSelected=function(elm,rng){return $_b8twwq26jh8lywmm_liftN([function(rng){var sc=rng.startContainer,so=rng.startOffset;return $_5oonaz1qjh8lywhz.isText(sc)?0===so?Option.some($_cgttw3zjh8lywdq.fromDom(sc)):Option.none():Option.from(sc.childNodes[so]).map($_cgttw3zjh8lywdq.fromDom)}(rng),function(rng){var ec=rng.endContainer,eo=rng.endOffset;return $_5oonaz1qjh8lywhz.isText(ec)?eo===ec.data.length?Option.some($_cgttw3zjh8lywdq.fromDom(ec)):Option.none():Option.from(ec.childNodes[eo-1]).map($_cgttw3zjh8lywdq.fromDom)}(rng)],function(startNode,endNode){var start=$_5wjzy24jh8lyw2t.find(getFirstChildren(elm),$_eqpqvr6jh8lyw3s.curry($_5f6gpb1djh8lywg5.eq,startNode)),end=$_5wjzy24jh8lyw2t.find(getLastChildren$1(elm),$_eqpqvr6jh8lyw3s.curry($_5f6gpb1djh8lywg5.eq,endNode));return start.isSome()&&end.isSome()}).getOr(!1)},moveEndPoint$1=function(dom,rng,node,start){var root=node,walker=new TreeWalker(node,root),nonEmptyElementsMap=dom.schema.getNonEmptyElements();do{if(3===node.nodeType&&0!==$_ahowuxkjh8lywbj.trim(node.nodeValue).length)return void(start?rng.setStart(node,0):rng.setEnd(node,node.nodeValue.length));if(nonEmptyElementsMap[node.nodeName]&&!/^(TD|TH)$/.test(node.nodeName))return void(start?rng.setStartBefore(node):"BR"===node.nodeName?rng.setEndBefore(node):rng.setEndAfter(node));if($_9bpim8ajh8lyw68.ie&&$_9bpim8ajh8lyw68.ie<11&&dom.isBlock(node)&&dom.isEmpty(node))return void(start?rng.setStart(node,0):rng.setEnd(node,0))}while(node=start?walker.next():walker.prev());"BODY"===root.nodeName&&(start?rng.setStart(root,0):rng.setEnd(root,root.childNodes.length))},hasAnyRanges=function(editor){var sel=editor.selection.getSel();return sel&&0<sel.rangeCount};function NodeChange(editor){var lastRng,lastPath=[];"onselectionchange"in editor.getDoc()||editor.on("NodeChange Click MouseUp KeyUp Focus",function(e){var nativeRng,fakeRng;fakeRng={startContainer:(nativeRng=editor.selection.getRng()).startContainer,startOffset:nativeRng.startOffset,endContainer:nativeRng.endContainer,endOffset:nativeRng.endOffset},"nodechange"!==e.type&&$_aayq8q3zjh8lyx2z_isEq(fakeRng,lastRng)||editor.fire("SelectionChange"),lastRng=fakeRng}),editor.on("contextmenu",function(){editor.fire("SelectionChange")}),editor.on("SelectionChange",function(){var startElm=editor.selection.getStart(!0);!startElm||!$_9bpim8ajh8lyw68.range&&editor.selection.isCollapsed()||hasAnyRanges(editor)&&!function(startElm){var i,currentPath;if((currentPath=editor.$(startElm).parentsUntil(editor.getBody()).add(startElm)).length===lastPath.length){for(i=currentPath.length;0<=i&&currentPath[i]===lastPath[i];i--);if(-1===i)return lastPath=currentPath,!0}return lastPath=currentPath,!1}(startElm)&&editor.dom.isChildOf(startElm,editor.getBody())&&editor.nodeChanged({selectionChange:!0})}),editor.on("MouseUp",function(e){!e.isDefaultPrevented()&&hasAnyRanges(editor)&&("IMG"===editor.selection.getNode().nodeName?$_8sy3pfhjh8lyw95.setEditorTimeout(editor,function(){editor.nodeChanged()}):editor.nodeChanged())}),this.nodeChanged=function(args){var node,parents,root,selection=editor.selection;editor.initialized&&selection&&!editor.settings.disable_nodechange&&!editor.readonly&&(root=editor.getBody(),(node=selection.getStart(!0)||root).ownerDocument===editor.getDoc()&&editor.dom.isChildOf(node,root)||(node=root),parents=[],editor.dom.getParent(node,function(node){if(node===root)return!0;parents.push(node)}),(args=args||{}).element=node,args.parents=parents,editor.fire("NodeChange",args))}}var VDirection,getAbsolutePosition=function(elm){var doc,docElem,win,clientRect;return clientRect=elm.getBoundingClientRect(),docElem=(doc=elm.ownerDocument).documentElement,win=doc.defaultView,{top:clientRect.top+win.pageYOffset-docElem.clientTop,left:clientRect.left+win.pageXOffset-docElem.clientLeft}},$_car16w59jh8lyxa8_calc=function(editor,event){return bodyPosition=function(editor){return editor.inline?getAbsolutePosition(editor.getBody()):{left:0,top:0}}(editor),scrollPosition=function(editor){var body=editor.getBody();return editor.inline?{left:body.scrollLeft,top:body.scrollTop}:{left:0,top:0}}(editor),{pageX:(mousePosition=function(editor,event){if(event.target.ownerDocument===editor.getDoc())return{left:event.pageX,top:event.pageY};var iframePosition=getAbsolutePosition(editor.getContentAreaContainer()),scrollPosition=function(editor){var body=editor.getBody(),docElm=editor.getDoc().documentElement,inlineScroll={left:body.scrollLeft,top:body.scrollTop},iframeScroll={left:body.scrollLeft||docElm.scrollLeft,top:body.scrollTop||docElm.scrollTop};return editor.inline?inlineScroll:iframeScroll}(editor);return{left:event.pageX-iframePosition.left+scrollPosition.left,top:event.pageY-iframePosition.top+scrollPosition.top}}(editor,event)).left-bodyPosition.left+scrollPosition.left,pageY:mousePosition.top-bodyPosition.top+scrollPosition.top};var bodyPosition,scrollPosition,mousePosition},isContentEditableFalse$7=$_5oonaz1qjh8lywhz.isContentEditableFalse,isContentEditableTrue$4=$_5oonaz1qjh8lywhz.isContentEditableTrue,removeElement=function(elm){elm&&elm.parentNode&&elm.parentNode.removeChild(elm)},start$1=function(state,editor){return function(e){if(function(e){return 0===e.button}(e)){var ceElm=$_9tjm51ljh8lywbq.find(editor.dom.getParents(e.target),$_8aqzj925jh8lywmj.or(isContentEditableFalse$7,isContentEditableTrue$4));if(rootElm=editor.getBody(),isContentEditableFalse$7(elm=ceElm)&&elm!==rootElm){var elmPos=editor.dom.getPos(ceElm),bodyElm=editor.getBody(),docElm=editor.getDoc().documentElement;state.element=ceElm,state.screenX=e.screenX,state.screenY=e.screenY,state.maxX=(editor.inline?bodyElm.scrollWidth:docElm.offsetWidth)-2,state.maxY=(editor.inline?bodyElm.scrollHeight:docElm.offsetHeight)-2,state.relX=e.pageX-elmPos.x,state.relY=e.pageY-elmPos.y,state.width=ceElm.offsetWidth,state.height=ceElm.offsetHeight,state.ghost=function(editor,elm,width,height){var clonedElm=elm.cloneNode(!0);editor.dom.setStyles(clonedElm,{width:width,height:height}),editor.dom.setAttrib(clonedElm,"data-mce-selected",null);var ghostElm=editor.dom.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return editor.dom.setStyles(ghostElm,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:width,height:height}),editor.dom.setStyles(clonedElm,{margin:0,boxSizing:"border-box"}),ghostElm.appendChild(clonedElm),ghostElm}(editor,ceElm,state.width,state.height)}}var rootElm,elm}},drop=function(state,editor){return function(e){if(state.dragging&&function(editor,targetElement,dragElement){return targetElement!==dragElement&&!editor.dom.isChildOf(targetElement,dragElement)&&!isContentEditableFalse$7(targetElement)}(editor,(selection=editor.selection,3===(startContainer=selection.getSel().getRangeAt(0).startContainer).nodeType?startContainer.parentNode:startContainer),state.element)){var targetClone_1=(elm=state.element,(cloneElm=elm.cloneNode(!0)).removeAttribute("data-mce-selected"),cloneElm),args=editor.fire("drop",{targetClone:targetClone_1,clientX:e.clientX,clientY:e.clientY});args.isDefaultPrevented()||(targetClone_1=args.targetClone,editor.undoManager.transact(function(){removeElement(state.element),editor.insertContent(editor.dom.getOuterHTML(targetClone_1)),editor._selectionOverrides.hideFakeCaret()}))}var elm,cloneElm,selection,startContainer;removeDragState(state)}},removeDragState=function(state){state.dragging=!1,state.element=null,removeElement(state.ghost)},bindFakeDragEvents=function(editor){var pageDom,dragStartHandler,dragHandler,dropHandler,dragEndHandler,rootDocument,state={};pageDom=DOMUtils$1.DOM,rootDocument=document,dragStartHandler=start$1(state,editor),dragHandler=function(state,editor){var throttledPlaceCaretAt=$_8sy3pfhjh8lyw95.throttle(function(clientX,clientY){editor._selectionOverrides.hideFakeCaret(),editor.selection.placeCaretAt(clientX,clientY)},0);return function(e){var ghostElm,bodyElm,movement=Math.max(Math.abs(e.screenX-state.screenX),Math.abs(e.screenY-state.screenY));if(function(state){return state.element}(state)&&!state.dragging&&10<movement){if(editor.fire("dragstart",{target:state.element}).isDefaultPrevented())return;state.dragging=!0,editor.focus()}if(state.dragging){var targetPos=function(state,position){return{pageX:position.pageX-state.relX,pageY:position.pageY+5}}(state,$_car16w59jh8lyxa8_calc(editor,e));ghostElm=state.ghost,bodyElm=editor.getBody(),ghostElm.parentNode!==bodyElm&&bodyElm.appendChild(ghostElm),function(ghostElm,position,width,height,maxX,maxY){var overflowX=0,overflowY=0;ghostElm.style.left=position.pageX+"px",ghostElm.style.top=position.pageY+"px",position.pageX+width>maxX&&(overflowX=position.pageX+width-maxX),position.pageY+height>maxY&&(overflowY=position.pageY+height-maxY),ghostElm.style.width=width-overflowX+"px",ghostElm.style.height=height-overflowY+"px"}(state.ghost,targetPos,state.width,state.height,state.maxX,state.maxY),throttledPlaceCaretAt(e.clientX,e.clientY)}}}(state,editor),dropHandler=drop(state,editor),dragEndHandler=function(state,editor){return function(){state.dragging&&editor.fire("dragend"),removeDragState(state)}}(state,editor),editor.on("mousedown",dragStartHandler),editor.on("mousemove",dragHandler),editor.on("mouseup",dropHandler),pageDom.bind(rootDocument,"mousemove",dragHandler),pageDom.bind(rootDocument,"mouseup",dragEndHandler),editor.on("remove",function(){pageDom.unbind(rootDocument,"mousemove",dragHandler),pageDom.unbind(rootDocument,"mouseup",dragEndHandler)})},$_8bbr0a58jh8lyxa1_init=function(editor){bindFakeDragEvents(editor),function(editor){editor.on("drop",function(e){var realTarget=void 0!==e.clientX?editor.getDoc().elementFromPoint(e.clientX,e.clientY):null;(isContentEditableFalse$7(realTarget)||isContentEditableFalse$7(editor.dom.getContentEditableParent(realTarget)))&&e.preventDefault()})}(editor)},getClientRects=function(node){return $_9tjm51ljh8lywbq.reduce(node,function(result,node){return result.concat(function(node){var toArrayWithNode=function(clientRects){return $_9tjm51ljh8lywbq.map(clientRects,function(clientRect){return(clientRect=clone$1(clientRect)).node=node,clientRect})};if($_5oonaz1qjh8lywhz.isElement(node))return toArrayWithNode(node.getClientRects());if($_5oonaz1qjh8lywhz.isText(node)){var rng=node.ownerDocument.createRange();return rng.setStart(node,0),rng.setEnd(node,node.data.length),toArrayWithNode(rng.getClientRects())}}(node))},[])};!function(VDirection){VDirection[VDirection.Up=-1]="Up",VDirection[VDirection.Down=1]="Down"}(VDirection||(VDirection={}));var walkUntil=function(direction,isAboveFn,isBeflowFn,root,predicateFn,caretPosition){var node,targetClientRect,line=0,result=[],add=function(node){var i,clientRect,clientRects;for(clientRects=getClientRects([node]),-1===direction&&(clientRects=clientRects.reverse()),i=0;i<clientRects.length;i++)if(clientRect=clientRects[i],!isBeflowFn(clientRect,targetClientRect)){if(0<result.length&&isAboveFn(clientRect,$_9tjm51ljh8lywbq.last(result))&&line++,clientRect.line=line,predicateFn(clientRect))return!0;result.push(clientRect)}};return(targetClientRect=$_9tjm51ljh8lywbq.last(caretPosition.getClientRects()))&&(add(node=caretPosition.getNode()),function(direction,root,predicateFn,node){for(;node=findNode(node,direction,isEditableCaretCandidate,root);)if(predicateFn(node))return}(direction,root,add,node)),result},upUntil=$_eqpqvr6jh8lyw3s.curry(walkUntil,VDirection.Up,isAbove,isBelow),downUntil=$_eqpqvr6jh8lyw3s.curry(walkUntil,VDirection.Down,isBelow,isAbove),isAboveLine=function(lineNumber){return function(clientRect){return function(lineNumber,clientRect){return clientRect.line>lineNumber}(lineNumber,clientRect)}},isLine=function(lineNumber){return function(clientRect){return function(lineNumber,clientRect){return clientRect.line===lineNumber}(lineNumber,clientRect)}},isContentEditableFalse$8=$_5oonaz1qjh8lywhz.isContentEditableFalse,findNode$1=findNode,distanceToRectLeft=function(clientRect,clientX){return Math.abs(clientRect.left-clientX)},distanceToRectRight=function(clientRect,clientX){return Math.abs(clientRect.right-clientX)},isInside=function(clientX,clientRect){return clientX>=clientRect.left&&clientX<=clientRect.right},findClosestClientRect=function(clientRects,clientX){return $_9tjm51ljh8lywbq.reduce(clientRects,function(oldClientRect,clientRect){var oldDistance,newDistance;return oldDistance=Math.min(distanceToRectLeft(oldClientRect,clientX),distanceToRectRight(oldClientRect,clientX)),newDistance=Math.min(distanceToRectLeft(clientRect,clientX),distanceToRectRight(clientRect,clientX)),isInside(clientX,clientRect)?clientRect:isInside(clientX,oldClientRect)?oldClientRect:newDistance===oldDistance&&isContentEditableFalse$8(clientRect.node)?clientRect:newDistance<oldDistance?clientRect:oldClientRect})},walkUntil$1=function(direction,root,predicateFn,node){for(;node=findNode$1(node,direction,isEditableCaretCandidate,root);)if(predicateFn(node))return},closestCaret=function(root,clientX,clientY){var closestNodeRect,contentEditableFalseNodeRects=getClientRects(function(root){return $_9tjm51ljh8lywbq.filter($_9tjm51ljh8lywbq.toArray(root.getElementsByTagName("*")),isFakeCaretTarget)}(root)),targetNodeRects=$_9tjm51ljh8lywbq.filter(contentEditableFalseNodeRects,function(rect){return clientY>=rect.top&&clientY<=rect.bottom});return(closestNodeRect=findClosestClientRect(targetNodeRects,clientX))&&(closestNodeRect=findClosestClientRect(function(root,targetNodeRect){var clientRects=[],collect=function(checkPosFn,node){var lineRects;return lineRects=$_9tjm51ljh8lywbq.filter(getClientRects([node]),function(clientRect){return!checkPosFn(clientRect,targetNodeRect)}),clientRects=clientRects.concat(lineRects),0===lineRects.length};return clientRects.push(targetNodeRect),walkUntil$1(VDirection.Up,root,$_eqpqvr6jh8lyw3s.curry(collect,isAbove),targetNodeRect.node),walkUntil$1(VDirection.Down,root,$_eqpqvr6jh8lyw3s.curry(collect,isBelow),targetNodeRect.node),clientRects}(root,closestNodeRect),clientX))&&isFakeCaretTarget(closestNodeRect.node)?function(clientRect,clientX){return{node:clientRect.node,before:distanceToRectLeft(clientRect,clientX)<distanceToRectRight(clientRect,clientX)}}(closestNodeRect,clientX):null},$_3kj84i5djh8lyxan_isXYWithinRange=function(clientX,clientY,range){return!range.collapsed&&$_5wjzy24jh8lyw2t.foldl(range.getClientRects(),function(state,rect){return state||function(rect,clientX,clientY){return clientX>=rect.left&&clientX<=rect.right&&clientY>=rect.top&&clientY<=rect.bottom}(rect,clientX,clientY)},!1)},$_de600j5fjh8lyxas_first=function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null===timer&&(timer=setTimeout(function(){fn.apply(null,args),args=timer=null},rate))}}},$_plloj5ejh8lyxap_setup=function(editor){var renderFocusCaret=$_de600j5fjh8lyxas_first(function(){if(!editor.removed&&editor.selection.getRng().collapsed){var caretRange=renderRangeCaret(editor,editor.selection.getRng(),!1);editor.selection.setRng(caretRange)}},0);editor.on("focus",function(){renderFocusCaret.throttle()}),editor.on("blur",function(){renderFocusCaret.cancel()})},$_6lsk4i5gjh8lyxau={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e)},metaKeyPressed:function(e){return $_9bpim8ajh8lyw68.mac?e.metaKey:e.ctrlKey&&!e.altKey}},isContentEditableTrue$5=$_5oonaz1qjh8lywhz.isContentEditableTrue,isContentEditableFalse$9=$_5oonaz1qjh8lywhz.isContentEditableFalse,isAfterContentEditableFalse$1=isAfterContentEditableFalse,isBeforeContentEditableFalse$1=isBeforeContentEditableFalse,getContentEditableRoot$1=function(editor,node){for(var root=editor.getBody();node&&node!==root;){if(isContentEditableTrue$5(node)||isContentEditableFalse$9(node))return node;node=node.parentNode}return null},SelectionOverrides=function(editor){var selectedContentEditableNode,styles,rootNode=editor.getBody(),fakeCaret=FakeCaret(editor.getBody(),function(node){return editor.dom.isBlock(node)},function(){return $_cnu79r4ejh8lyx4x_hasFocus(editor)}),realSelectionId="sel-"+editor.dom.uniqueId(),setRange=function(range){range&&editor.selection.setRng(range)},getRange=function(){return editor.selection.getRng()},showCaret$$1=function(direction,node,before,scrollIntoView){return void 0===scrollIntoView&&(scrollIntoView=!0),editor.fire("ShowCaret",{target:node,direction:direction,before:before}).isDefaultPrevented()?null:(scrollIntoView&&editor.selection.scrollIntoView(node,-1===direction),fakeCaret.show(before,node))},getNormalizedRangeEndPoint$$1=function(direction,range){return range=normalizeRange(direction,rootNode,range),-1===direction?CaretPosition$1.fromRangeStart(range):CaretPosition$1.fromRangeEnd(range)},isWithinCaretContainer=function(node){return isCaretContainer(node)||startsWithCaretContainer(node)||endsWithCaretContainer(node)},isRangeInCaretContainer=function(rng){return isWithinCaretContainer(rng.startContainer)||isWithinCaretContainer(rng.endContainer)},setContentEditableSelection=function(range,forward){var node,$realSelectionContainer,sel,startContainer,startOffset,endOffset,e,caretPosition,targetClone,origTargetClone,$=editor.$,dom=editor.dom;if(!range)return null;if(range.collapsed){if(!isRangeInCaretContainer(range))if(!1===forward){if(caretPosition=getNormalizedRangeEndPoint$$1(-1,range),isFakeCaretTarget(caretPosition.getNode(!0)))return showCaret$$1(-1,caretPosition.getNode(!0),!1,!1);if(isFakeCaretTarget(caretPosition.getNode()))return showCaret$$1(-1,caretPosition.getNode(),!caretPosition.isAtEnd(),!1)}else{if(caretPosition=getNormalizedRangeEndPoint$$1(1,range),isFakeCaretTarget(caretPosition.getNode()))return showCaret$$1(1,caretPosition.getNode(),!caretPosition.isAtEnd(),!1);if(isFakeCaretTarget(caretPosition.getNode(!0)))return showCaret$$1(1,caretPosition.getNode(!0),!1,!1)}return null}return startContainer=range.startContainer,startOffset=range.startOffset,endOffset=range.endOffset,3===startContainer.nodeType&&0===startOffset&&isContentEditableFalse$9(startContainer.parentNode)&&(startContainer=startContainer.parentNode,startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1!==startContainer.nodeType?null:(endOffset===startOffset+1&&(node=startContainer.childNodes[startOffset]),isContentEditableFalse$9(node)?(targetClone=origTargetClone=node.cloneNode(!0),(e=editor.fire("ObjectSelected",{target:node,targetClone:targetClone})).isDefaultPrevented()?null:($realSelectionContainer=$_7sg18r3cjh8lywu1_descendant($_cgttw3zjh8lywdq.fromDom(editor.getBody()),"#"+realSelectionId).fold(function(){return $([])},function(elm){return $([elm.dom()])}),targetClone=e.targetClone,0===$realSelectionContainer.length&&($realSelectionContainer=$('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",realSelectionId)).appendTo(editor.getBody()),range=editor.dom.createRng(),targetClone===origTargetClone&&$_9bpim8ajh8lyw68.ie?($realSelectionContainer.empty().append('<p style="font-size: 0" data-mce-bogus="all"> </p>').append(targetClone),range.setStartAfter($realSelectionContainer[0].firstChild.firstChild),range.setEndAfter(targetClone)):($realSelectionContainer.empty().append(" ").append(targetClone).append(" "),range.setStart($realSelectionContainer[0].firstChild,1),range.setEnd($realSelectionContainer[0].lastChild,0)),$realSelectionContainer.css({top:dom.getPos(node,editor.getBody()).y}),$realSelectionContainer[0].focus(),(sel=editor.selection.getSel()).removeAllRanges(),sel.addRange(range),$_5wjzy24jh8lyw2t.each($_eebxu2gjh8lywp3_descendants($_cgttw3zjh8lywdq.fromDom(editor.getBody()),"*[data-mce-selected]"),function(elm){$_3da62i14jh8lyweo.remove(elm,"data-mce-selected")}),node.setAttribute("data-mce-selected","1"),selectedContentEditableNode=node,hideFakeCaret(),range)):null)},removeContentEditableSelection=function(){selectedContentEditableNode&&selectedContentEditableNode.removeAttribute("data-mce-selected"),$_7sg18r3cjh8lywu1_descendant($_cgttw3zjh8lywdq.fromDom(editor.getBody()),"#"+realSelectionId).each($_bfmuql2ujh8lywr1.remove),selectedContentEditableNode=null},hideFakeCaret=function(){fakeCaret.hide()};return $_9bpim8ajh8lyw68.ceFalse&&(function(){editor.on("mouseup",function(e){var range=getRange();range.collapsed&&$_7f1iw94jjh8lyx60_isXYInContentArea(editor,e.clientX,e.clientY)&&setRange(renderCaretAtRange(editor,range,!1))}),editor.on("click",function(e){var contentEditableRoot;(contentEditableRoot=getContentEditableRoot$1(editor,e.target))&&(isContentEditableFalse$9(contentEditableRoot)&&(e.preventDefault(),editor.focus()),isContentEditableTrue$5(contentEditableRoot)&&editor.dom.isChildOf(contentEditableRoot,editor.selection.getNode())&&removeContentEditableSelection())}),editor.on("blur NewBlock",function(){removeContentEditableSelection()}),editor.on("ResizeWindow FullscreenStateChanged",function(){return fakeCaret.reposition()});var hasBetterMouseTarget=function(targetNode,caretNode){var node1,node2,targetBlock=editor.dom.getParent(targetNode,editor.dom.isBlock),caretBlock=editor.dom.getParent(caretNode,editor.dom.isBlock);return!(!targetBlock||!editor.dom.isChildOf(targetBlock,caretBlock)||!1!==isContentEditableFalse$9(getContentEditableRoot$1(editor,targetBlock)))||targetBlock&&(node1=targetBlock,node2=caretBlock,!(editor.dom.getParent(node1,editor.dom.isBlock)===editor.dom.getParent(node2,editor.dom.isBlock)))&&function(elm){var caretWalker=CaretWalker(elm);if(!elm.firstChild)return!1;var startPos=CaretPosition$1.before(elm.firstChild),newPos=caretWalker.next(startPos);return newPos&&!isBeforeContentEditableFalse$1(newPos)&&!isAfterContentEditableFalse$1(newPos)}(targetBlock)};!function(editor){var moved=!1;editor.on("touchstart",function(){moved=!1}),editor.on("touchmove",function(){moved=!0}),editor.on("touchend",function(e){var contentEditableRoot=getContentEditableRoot$1(editor,e.target);isContentEditableFalse$9(contentEditableRoot)&&(moved||(e.preventDefault(),setContentEditableSelection(selectNode(editor,contentEditableRoot))))})}(editor),editor.on("mousedown",function(e){var contentEditableRoot,targetElm=e.target;if((targetElm===rootNode||"HTML"===targetElm.nodeName||editor.dom.isChildOf(targetElm,rootNode))&&!1!==$_7f1iw94jjh8lyx60_isXYInContentArea(editor,e.clientX,e.clientY))if(contentEditableRoot=getContentEditableRoot$1(editor,targetElm))isContentEditableFalse$9(contentEditableRoot)?(e.preventDefault(),setContentEditableSelection(selectNode(editor,contentEditableRoot))):(removeContentEditableSelection(),isContentEditableTrue$5(contentEditableRoot)&&e.shiftKey||$_3kj84i5djh8lyxan_isXYWithinRange(e.clientX,e.clientY,editor.selection.getRng())||(hideFakeCaret(),editor.selection.placeCaretAt(e.clientX,e.clientY)));else if(!1===isFakeCaretTarget(targetElm)){removeContentEditableSelection(),hideFakeCaret();var caretInfo=closestCaret(rootNode,e.clientX,e.clientY);if(caretInfo&&!hasBetterMouseTarget(e.target,caretInfo.node)){e.preventDefault();var range=showCaret$$1(1,caretInfo.node,caretInfo.before,!1);editor.getBody().focus(),setRange(range)}}}),editor.on("keypress",function(e){$_6lsk4i5gjh8lyxau.modifierPressed(e)||(e.keyCode,isContentEditableFalse$9(editor.selection.getNode())&&e.preventDefault())}),editor.on("getSelectionRange",function(e){var rng=e.range;if(selectedContentEditableNode){if(!selectedContentEditableNode.parentNode)return void(selectedContentEditableNode=null);(rng=rng.cloneRange()).selectNode(selectedContentEditableNode),e.range=rng}}),editor.on("setSelectionRange",function(e){var rng;(rng=setContentEditableSelection(e.range,e.forward))&&(e.range=rng)}),editor.on("AfterSetSelectionRange",function(e){var elm,rng=e.range;isRangeInCaretContainer(rng)||hideFakeCaret(),elm=rng.startContainer.parentNode,editor.dom.hasClass(elm,"mce-offscreen-selection")||removeContentEditableSelection()}),editor.on("copy",function(e){var container,clipboardData=e.clipboardData;if(!e.isDefaultPrevented()&&e.clipboardData&&!$_9bpim8ajh8lyw68.ie){var realSelectionElement=(container=editor.dom.get(realSelectionId))?container.getElementsByTagName("*")[0]:container;realSelectionElement&&(e.preventDefault(),clipboardData.clearData(),clipboardData.setData("text/html",realSelectionElement.outerHTML),clipboardData.setData("text/plain",realSelectionElement.outerText))}}),$_8bbr0a58jh8lyxa1_init(editor),$_plloj5ejh8lyxap_setup(editor)}(),(styles=editor.contentStyles).push(fakeCaret.getCss()),styles.push(".mce-content-body .mce-offscreen-selection {position: absolute;left: -9999999999px;max-width: 1000000px;}.mce-content-body *[contentEditable=false] {cursor: default;}.mce-content-body *[contentEditable=true] {cursor: text;}")),{showCaret:showCaret$$1,showBlockCaretContainer:function(blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(blockCaretContainer),setRange(getRange()),editor.selection.scrollIntoView(blockCaretContainer[0]))},hideFakeCaret:hideFakeCaret,destroy:function(){fakeCaret.destroy(),selectedContentEditableNode=null}}},trimComments=function(text){return text.replace(/<!--|-->/g,"")},findEndTagIndex=function(schema,html,startIndex){var index,matches,tokenRegExp,shortEndedElements,count=1;for(shortEndedElements=schema.getShortEndedElements(),(tokenRegExp=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g).lastIndex=index=startIndex;matches=tokenRegExp.exec(html);){if(index=tokenRegExp.lastIndex,"/"===matches[1])count--;else if(!matches[1]){if(matches[2]in shortEndedElements)continue;count++}if(0===count)break}return index};function SaxParser(settings,schema){void 0===schema&&(schema=Schema());var noop=function(){};!1!==(settings=settings||{}).fix_self_closing&&(settings.fix_self_closing=!0);var comment=settings.comment?settings.comment:noop,cdata=settings.cdata?settings.cdata:noop,text=settings.text?settings.text:noop,start=settings.start?settings.start:noop,end=settings.end?settings.end:noop,pi=settings.pi?settings.pi:noop,doctype=settings.doctype?settings.doctype:noop;return{parse:function(html){var matches,value,endRegExp,attrList,i,textData,name,isInternalElement,removeInternalElements,shortEndedElements,fillAttrsMap,isShortEnded,validate,elementRule,isValidElement,attr,attribsValue,validAttributesMap,validAttributePatterns,attributesRequired,attributesDefault,attributesForced,processHtml,selfClosing,tokenRegExp,attrRegExp,specialElements,attrValue,fixSelfClosing,index=0,stack=[],idCount=0,decode=$_gex7a11rjh8lywi4.decode,filteredUrlAttrs=$_ahowuxkjh8lywbj.makeMap("src,href,data,background,formaction,poster,xlink:href"),scriptUriRegExp=/((java|vb)script|mhtml):/i,processEndTag=function(name){var pos,i;for(pos=stack.length;pos--&&stack[pos].name!==name;);if(0<=pos){for(i=stack.length-1;pos<=i;i--)(name=stack[i]).valid&&end(name.name);stack.length=pos}},parseAttribute=function(match,name,value,val2,val3){var attrRule,i;if(value=(name=name.toLowerCase())in fillAttrsMap?name:decode(value||val2||val3||""),validate&&!isInternalElement&&!1===function(name){return 0===name.indexOf("data-")||0===name.indexOf("aria-")}(name)){if(!(attrRule=validAttributesMap[name])&&validAttributePatterns){for(i=validAttributePatterns.length;i--&&!(attrRule=validAttributePatterns[i]).pattern.test(name););-1===i&&(attrRule=null)}if(!attrRule)return;if(attrRule.validValues&&!(value in attrRule.validValues))return}if(filteredUrlAttrs[name]&&!settings.allow_script_urls){var uri=value.replace(/[\s\u0000-\u001F]+/g,"");try{uri=decodeURIComponent(uri)}catch(ex){uri=unescape(uri)}if(scriptUriRegExp.test(uri))return;if(function(settings,uri){return!settings.allow_html_data_urls&&(/^data:image\//i.test(uri)?!1===settings.allow_svg_data_urls&&/^data:image\/svg\+xml/i.test(uri):/^data:/i.test(uri))}(settings,uri))return}isInternalElement&&(name in filteredUrlAttrs||0===name.indexOf("on"))||(attrList.map[name]=value,attrList.push({name:name,value:value}))};for(tokenRegExp=new RegExp("<(?:(?:!--([\\w\\W]*?)--\x3e)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),attrRegExp=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,shortEndedElements=schema.getShortEndedElements(),selfClosing=settings.self_closing_elements||schema.getSelfClosingElements(),fillAttrsMap=schema.getBoolAttrs(),validate=settings.validate,removeInternalElements=settings.remove_internals,fixSelfClosing=settings.fix_self_closing,specialElements=schema.getSpecialElements(),processHtml=html+">";matches=tokenRegExp.exec(processHtml);){if(index<matches.index&&text(decode(html.substr(index,matches.index-index))),value=matches[6])":"===(value=value.toLowerCase()).charAt(0)&&(value=value.substr(1)),processEndTag(value);else if(value=matches[7]){if(matches.index+matches[0].length>html.length){text(decode(html.substr(matches.index))),index=matches.index+matches[0].length;continue}if(":"===(value=value.toLowerCase()).charAt(0)&&(value=value.substr(1)),isShortEnded=value in shortEndedElements,fixSelfClosing&&selfClosing[value]&&0<stack.length&&stack[stack.length-1].name===value&&processEndTag(value),!validate||(elementRule=schema.getElementRule(value))){if(isValidElement=!0,validate&&(validAttributesMap=elementRule.attributes,validAttributePatterns=elementRule.attributePatterns),(attribsValue=matches[8])?((isInternalElement=-1!==attribsValue.indexOf("data-mce-type"))&&removeInternalElements&&(isValidElement=!1),(attrList=[]).map={},attribsValue.replace(attrRegExp,parseAttribute)):(attrList=[]).map={},validate&&!isInternalElement){if(attributesRequired=elementRule.attributesRequired,attributesDefault=elementRule.attributesDefault,attributesForced=elementRule.attributesForced,elementRule.removeEmptyAttrs&&!attrList.length&&(isValidElement=!1),attributesForced)for(i=attributesForced.length;i--;)name=(attr=attributesForced[i]).name,"{$uid}"===(attrValue=attr.value)&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue});if(attributesDefault)for(i=attributesDefault.length;i--;)(name=(attr=attributesDefault[i]).name)in attrList.map||("{$uid}"===(attrValue=attr.value)&&(attrValue="mce_"+idCount++),attrList.map[name]=attrValue,attrList.push({name:name,value:attrValue}));if(attributesRequired){for(i=attributesRequired.length;i--&&!(attributesRequired[i]in attrList.map););-1===i&&(isValidElement=!1)}if(attr=attrList.map["data-mce-bogus"]){if("all"===attr){index=findEndTagIndex(schema,html,tokenRegExp.lastIndex),tokenRegExp.lastIndex=index;continue}isValidElement=!1}}isValidElement&&start(value,attrList,isShortEnded)}else isValidElement=!1;if(endRegExp=specialElements[value]){endRegExp.lastIndex=index=matches.index+matches[0].length,index=(matches=endRegExp.exec(html))?(isValidElement&&(textData=html.substr(index,matches.index-index)),matches.index+matches[0].length):(textData=html.substr(index),html.length),isValidElement&&(0<textData.length&&text(textData,!0),end(value)),tokenRegExp.lastIndex=index;continue}isShortEnded||(attribsValue&&attribsValue.indexOf("/")===attribsValue.length-1?isValidElement&&end(value):stack.push({name:value,valid:isValidElement}))}else(value=matches[1])?(">"===value.charAt(0)&&(value=" "+value),settings.allow_conditional_comments||"[if"!==value.substr(0,3).toLowerCase()||(value=" "+value),comment(value)):(value=matches[2])?cdata(trimComments(value)):(value=matches[3])?doctype(value):(value=matches[4])&&pi(value,matches[5]);index=matches.index+matches[0].length}for(index<html.length&&text(decode(html.substr(index))),i=stack.length-1;0<=i;i--)(value=stack[i]).valid&&end(value.name)}}}!function(SaxParser){SaxParser.findEndTag=findEndTagIndex}(SaxParser||(SaxParser={}));var SaxParser$1=SaxParser,trimInternal=function(serializer,html){var endTagIndex,index,matchLength,matches,shortEndedElements,content=html,bogusAllRegExp=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,schema=serializer.schema;for(content=function(tempAttrs,html){var trimContentRegExp=new RegExp(["\\s?("+tempAttrs.join("|")+')="[^"]+"'].join("|"),"gi");return html.replace(trimContentRegExp,"")}(serializer.getTempAttrs(),content),shortEndedElements=schema.getShortEndedElements();matches=bogusAllRegExp.exec(content);)index=bogusAllRegExp.lastIndex,matchLength=matches[0].length,endTagIndex=shortEndedElements[matches[1]]?index:SaxParser$1.findEndTag(schema,content,index),content=content.substring(0,index-matchLength)+content.substring(endTagIndex),bogusAllRegExp.lastIndex=index-matchLength;return $_d383mr21jh8lywlv_trim(content)},$_8lol015jjh8lyxbf={trimExternal:trimInternal,trimInternal:trimInternal},$_5dhayi5mjh8lyxc5_KEEP=0,$_5dhayi5mjh8lyxc5_DELETE=2,$_5dhayi5mjh8lyxc5_INSERT=1,$_5dhayi5mjh8lyxc5_diff=function(left,right){var size=left.length+right.length+2,vDown=new Array(size),vUp=new Array(size),buildScript=function(start1,end1,start2,end2,script){var middle=getMiddleSnake(start1,end1,start2,end2);if(null===middle||middle.start===end1&&middle.diag===end1-end2||middle.end===start1&&middle.diag===start1-start2)for(var i=start1,j=start2;i<end1||j<end2;)i<end1&&j<end2&&left[i]===right[j]?(script.push([0,left[i]]),++i,++j):end2-start2<end1-start1?(script.push([2,left[i]]),++i):(script.push([1,right[j]]),++j);else{buildScript(start1,middle.start,start2,middle.start-middle.diag,script);for(var i2=middle.start;i2<middle.end;++i2)script.push([0,left[i2]]);buildScript(middle.end,end1,middle.end-middle.diag,end2,script)}},buildSnake=function(start,diag,end1,end2){for(var end=start;end-diag<end2&&end<end1&&left[end]===right[end-diag];)++end;return function(start,end,diag){return{start:start,end:end,diag:diag}}(start,end,diag)},getMiddleSnake=function(start1,end1,start2,end2){var m=end1-start1,n=end2-start2;if(0===m||0===n)return null;var d,k,i,x,y,delta=m-n,sum=n+m,offset=(sum%2==0?sum:sum+1)/2;for(vDown[1+offset]=start1,vUp[1+offset]=end1+1,d=0;d<=offset;++d){for(k=-d;k<=d;k+=2){for(i=k+offset,k===-d||k!==d&&vDown[i-1]<vDown[i+1]?vDown[i]=vDown[i+1]:vDown[i]=vDown[i-1]+1,y=(x=vDown[i])-start1+start2-k;x<end1&&y<end2&&left[x]===right[y];)vDown[i]=++x,++y;if(delta%2!=0&&delta-d<=k&&k<=delta+d&&vUp[i-delta]<=vDown[i])return buildSnake(vUp[i-delta],k+start1-start2,end1,end2)}for(k=delta-d;k<=delta+d;k+=2){for(i=k+offset-delta,k===delta-d||k!==delta+d&&vUp[i+1]<=vUp[i-1]?vUp[i]=vUp[i+1]-1:vUp[i]=vUp[i-1],y=(x=vUp[i]-1)-start1+start2-k;start1<=x&&start2<=y&&left[x]===right[y];)vUp[i]=x--,y--;if(delta%2==0&&-d<=k&&k<=d&&vUp[i]<=vDown[i+delta])return buildSnake(vUp[i],k+start1-start2,end1,end2)}}},script=[];return buildScript(0,left.length,0,right.length,script),script},getOuterHtml=function(elm){return $_5oonaz1qjh8lywhz.isElement(elm)?elm.outerHTML:$_5oonaz1qjh8lywhz.isText(elm)?$_gex7a11rjh8lywi4.encodeRaw(elm.data,!1):$_5oonaz1qjh8lywhz.isComment(elm)?"\x3c!--"+elm.data+"--\x3e":""},insertAt=function(elm,html,index){var fragment=function(html){var frag,node,container;for(container=document.createElement("div"),frag=document.createDocumentFragment(),html&&(container.innerHTML=html);node=container.firstChild;)frag.appendChild(node);return frag}(html);if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.insertBefore(fragment,target)}else elm.appendChild(fragment)},$_9x5cnf5ljh8lyxc2_read=function(elm){return $_9tjm51ljh8lywbq.filter($_9tjm51ljh8lywbq.map(elm.childNodes,getOuterHtml),function(item){return 0<item.length})},$_9x5cnf5ljh8lyxc2_write=function(fragments,elm){var currentFragments=$_9tjm51ljh8lywbq.map(elm.childNodes,getOuterHtml);return function(diff,elm){var index=0;$_9tjm51ljh8lywbq.each(diff,function(action){action[0]===$_5dhayi5mjh8lyxc5_KEEP?index++:action[0]===$_5dhayi5mjh8lyxc5_INSERT?(insertAt(elm,action[1],index),index++):action[0]===$_5dhayi5mjh8lyxc5_DELETE&&function(elm,index){if(elm.hasChildNodes()&&index<elm.childNodes.length){var target=elm.childNodes[index];target.parentNode.removeChild(target)}}(elm,index)})}($_5dhayi5mjh8lyxc5_diff(currentFragments,fragments),elm),elm},$_egn65r5ojh8lyxcb_fromHtml=function(html,scope){var div=(scope||document).createElement("div");return div.innerHTML=html,$_a43q0i17jh8lywfe.children($_cgttw3zjh8lywdq.fromDom(div))},get$5=function(element){return element.dom().innerHTML},$_cxg0x95njh8lyxc9_get=get$5,$_cxg0x95njh8lyxc9_set=function(element,content){var docDom=$_a43q0i17jh8lywfe.owner(element).dom(),fragment=$_cgttw3zjh8lywdq.fromDom(docDom.createDocumentFragment()),contentElements=$_egn65r5ojh8lyxcb_fromHtml(content,docDom);$_9hl8mu2vjh8lywr4_append(fragment,contentElements),$_bfmuql2ujh8lywr1.empty(element),$_4m7u2e2kjh8lywpi.append(element,fragment)},undoLevelDocument=Cell(Option.none()),createFragmentedLevel=function(fragments){return{type:"fragmented",fragments:fragments,content:"",bookmark:null,beforeBookmark:null}},createCompleteLevel=function(content){return{type:"complete",fragments:null,content:content,bookmark:null,beforeBookmark:null}},getLevelContent=function(level){return"fragmented"===level.type?level.fragments.join(""):level.content},getCleanLevelContent=function(level){var elm=$_cgttw3zjh8lywdq.fromTag("body",undoLevelDocument.get().getOrThunk(function(){var doc=document.implementation.createHTMLDocument("undo");return undoLevelDocument.set(Option.some(doc)),doc}));return $_cxg0x95njh8lyxc9_set(elm,getLevelContent(level)),$_5wjzy24jh8lyw2t.each($_eebxu2gjh8lywp3_descendants(elm,"*[data-mce-bogus]"),$_bfmuql2ujh8lywr1.unwrap),$_cxg0x95njh8lyxc9_get(elm)},$_dxjj465ijh8lyxb4_createFromEditor=function(editor){var fragments,content,trimmedFragments;return fragments=$_9x5cnf5ljh8lyxc2_read(editor.getBody()),-1!==(content=(trimmedFragments=$_5wjzy24jh8lyw2t.bind(fragments,function(html){var trimmed=$_8lol015jjh8lyxbf.trimInternal(editor.serializer,html);return 0<trimmed.length?[trimmed]:[]})).join("")).indexOf("</iframe>")?createFragmentedLevel(trimmedFragments):createCompleteLevel(content)},$_dxjj465ijh8lyxb4_applyToEditor=function(editor,level,before){"fragmented"===level.type?$_9x5cnf5ljh8lyxc2_write(level.fragments,editor.getBody()):editor.setContent(level.content,{format:"raw"}),editor.selection.moveToBookmark(before?level.beforeBookmark:level.bookmark)},$_dxjj465ijh8lyxb4_isEq=function(level1,level2){return!(!level1||!level2)&&(!!function(level1,level2){return getLevelContent(level1)===getLevelContent(level2)}(level1,level2)||function(level1,level2){return getCleanLevelContent(level1)===getCleanLevelContent(level2)}(level1,level2))};function UndoManager(editor){var beforeBookmark,isFirstTypedCharacter,self=this,index=0,data=[],locks=0,isUnlocked=function(){return 0===locks},setTyping=function(typing){isUnlocked()&&(self.typing=typing)},setDirty=function(state){editor.setDirty(state)},addNonTypingUndoLevel=function(e){setTyping(!1),self.add({},e)},endTyping=function(){self.typing&&(setTyping(!1),self.add())};return editor.on("init",function(){self.add()}),editor.on("BeforeExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&(endTyping(),self.beforeChange())}),editor.on("ExecCommand",function(e){var cmd=e.command;"Undo"!==cmd&&"Redo"!==cmd&&"mceRepaint"!==cmd&&addNonTypingUndoLevel(e)}),editor.on("ObjectResizeStart Cut",function(){self.beforeChange()}),editor.on("SaveContent ObjectResized blur",addNonTypingUndoLevel),editor.on("DragEnd",addNonTypingUndoLevel),editor.on("KeyUp",function(e){var keyCode=e.keyCode;e.isDefaultPrevented()||((33<=keyCode&&keyCode<=36||37<=keyCode&&keyCode<=40||45===keyCode||e.ctrlKey)&&(addNonTypingUndoLevel(),editor.nodeChanged()),46!==keyCode&&8!==keyCode||editor.nodeChanged(),isFirstTypedCharacter&&self.typing&&!1===$_dxjj465ijh8lyxb4_isEq($_dxjj465ijh8lyxb4_createFromEditor(editor),data[0])&&(!1===editor.isDirty()&&(setDirty(!0),editor.fire("change",{level:data[0],lastLevel:null})),editor.fire("TypingUndo"),isFirstTypedCharacter=!1,editor.nodeChanged()))}),editor.on("KeyDown",function(e){var keyCode=e.keyCode;if(!e.isDefaultPrevented())if(33<=keyCode&&keyCode<=36||37<=keyCode&&keyCode<=40||45===keyCode)self.typing&&addNonTypingUndoLevel(e);else{var modKey=e.ctrlKey&&!e.altKey||e.metaKey;!(keyCode<16||20<keyCode)||224===keyCode||91===keyCode||self.typing||modKey||(self.beforeChange(),setTyping(!0),self.add({},e),isFirstTypedCharacter=!0)}}),editor.on("MouseDown",function(e){self.typing&&addNonTypingUndoLevel(e)}),editor.on("input",function(e){e.inputType&&("insertReplacementText"===e.inputType||function(event){return"insertText"===event.inputType&&null===event.data}(e))&&addNonTypingUndoLevel(e)}),editor.addShortcut("meta+z","","Undo"),editor.addShortcut("meta+y,meta+shift+z","","Redo"),editor.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||editor.nodeChanged()}),self={data:data,typing:!1,beforeChange:function(){isUnlocked()&&(beforeBookmark=$_8b82yg2ojh8lywpq.getUndoBookmark(editor.selection))},add:function(level,event){var i,lastLevel,currentLevel,settings=editor.settings;if(currentLevel=$_dxjj465ijh8lyxb4_createFromEditor(editor),level=level||{},level=$_ahowuxkjh8lywbj.extend(level,currentLevel),!1===isUnlocked()||editor.removed)return null;if(lastLevel=data[index],editor.fire("BeforeAddUndo",{level:level,lastLevel:lastLevel,originalEvent:event}).isDefaultPrevented())return null;if(lastLevel&&$_dxjj465ijh8lyxb4_isEq(lastLevel,level))return null;if(data[index]&&(data[index].beforeBookmark=beforeBookmark),settings.custom_undo_redo_levels&&data.length>settings.custom_undo_redo_levels){for(i=0;i<data.length-1;i++)data[i]=data[i+1];data.length--,index=data.length}level.bookmark=$_8b82yg2ojh8lywpq.getUndoBookmark(editor.selection),index<data.length-1&&(data.length=index+1),data.push(level),index=data.length-1;var args={level:level,lastLevel:lastLevel,originalEvent:event};return editor.fire("AddUndo",args),0<index&&(setDirty(!0),editor.fire("change",args)),level},undo:function(){var level;return self.typing&&(self.add(),self.typing=!1,setTyping(!1)),0<index&&(level=data[--index],$_dxjj465ijh8lyxb4_applyToEditor(editor,level,!0),setDirty(!0),editor.fire("undo",{level:level})),level},redo:function(){var level;return index<data.length-1&&(level=data[++index],$_dxjj465ijh8lyxb4_applyToEditor(editor,level,!1),setDirty(!0),editor.fire("redo",{level:level})),level},clear:function(){data=[],index=0,self.typing=!1,self.data=data,editor.fire("ClearUndos")},hasUndo:function(){return 0<index||self.typing&&data[0]&&!$_dxjj465ijh8lyxb4_isEq($_dxjj465ijh8lyxb4_createFromEditor(editor),data[0])},hasRedo:function(){return index<data.length-1&&!self.typing},transact:function(callback){return endTyping(),self.beforeChange(),self.ignore(callback),self.add()},ignore:function(callback){try{locks++,callback()}finally{locks--}},extra:function(callback1,callback2){var lastLevel,bookmark;self.transact(callback1)&&(bookmark=data[index].bookmark,lastLevel=data[index-1],$_dxjj465ijh8lyxb4_applyToEditor(editor,lastLevel,!0),self.transact(callback2)&&(data[index-1].beforeBookmark=bookmark))}}}var isInlineBlock=function(node){return node&&/^(IMG)$/.test(node.nodeName)},isWhiteSpaceNode=function(node){return node&&3===node.nodeType&&/^([\t \r\n]+|)$/.test(node.nodeValue)},normalizeStyleValue=function(dom,value,name){return"color"!==name&&"backgroundColor"!==name||(value=dom.toHex(value)),"fontWeight"===name&&700===value&&(value="bold"),"fontFamily"===name&&(value=value.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+value},$_dodtof5tjh8lyxdh={isInlineBlock:isInlineBlock,moveStart:function(dom,selection,rng){var walker,node,nodes,offset=rng.startOffset,container=rng.startContainer;if((rng.startContainer!==rng.endContainer||!isInlineBlock(rng.startContainer.childNodes[rng.startOffset]))&&1===container.nodeType)for(offset<(nodes=container.childNodes).length?walker=new TreeWalker(container=nodes[offset],dom.getParent(container,dom.isBlock)):(walker=new TreeWalker(container=nodes[nodes.length-1],dom.getParent(container,dom.isBlock))).next(!0),node=walker.current();node;node=walker.next())if(3===node.nodeType&&!isWhiteSpaceNode(node))return rng.setStart(node,0),void selection.setRng(rng)},getNonWhiteSpaceSibling:function(node,next,inc){if(node)for(next=next?"nextSibling":"previousSibling",node=inc?node:node[next];node;node=node[next])if(1===node.nodeType||!isWhiteSpaceNode(node))return node},isTextBlock:function(editor,name){return name.nodeType&&(name=name.nodeName),!!editor.schema.getTextBlockElements()[name.toLowerCase()]},isValid:function(ed,parent,child){return ed.schema.isValidChild(parent,child)},isWhiteSpaceNode:isWhiteSpaceNode,replaceVars:function(value,vars){return"string"!=typeof value?value=value(vars):vars&&(value=value.replace(/%(\w+)/g,function(str,name){return vars[name]||str})),value},isEq:function(str1,str2){return str2=str2||"",str1=""+((str1=str1||"").nodeName||str1),str2=""+(str2.nodeName||str2),str1.toLowerCase()===str2.toLowerCase()},normalizeStyleValue:normalizeStyleValue,getStyle:function(dom,node,name){return normalizeStyleValue(dom,dom.getStyle(node,name),name)},getTextDecoration:function(dom,node){var decoration;return dom.getParent(node,function(n){return(decoration=dom.getStyle(n,"text-decoration"))&&"none"!==decoration}),decoration},getParents:function(dom,node,selector){return dom.getParents(node,selector,dom.getRoot())}},isBookmarkNode$2=$_eyp5ec2njh8lywpo_isBookmarkNode,getParents$2=$_dodtof5tjh8lyxdh.getParents,isWhiteSpaceNode$1=$_dodtof5tjh8lyxdh.isWhiteSpaceNode,isTextBlock$2=$_dodtof5tjh8lyxdh.isTextBlock,findLeaf=function(node,offset){for(void 0===offset&&(offset=3===node.nodeType?node.length:node.childNodes.length);node&&node.hasChildNodes();)(node=node.childNodes[offset])&&(offset=3===node.nodeType?node.length:node.childNodes.length);return{node:node,offset:offset}},findParentContentEditable=function(dom,node){for(var parent=node;parent;){if(1===parent.nodeType&&dom.getContentEditable(parent))return"false"===dom.getContentEditable(parent)?parent:node;parent=parent.parentNode}return node},findSpace=function(start,remove,node,offset){var pos,pos2,str=node.nodeValue;return void 0===offset&&(offset=start?str.length:0),start?(pos=str.lastIndexOf(" ",offset),-1===(pos=(pos2=str.lastIndexOf(" ",offset))<pos?pos:pos2)||remove||pos++):(pos=str.indexOf(" ",offset),pos2=str.indexOf(" ",offset),pos=-1!==pos&&(-1===pos2||pos<pos2)?pos:pos2),pos},findWordEndPoint=function(dom,body,container,offset,start,remove){var walker,node,pos,lastTextNode;if(3===container.nodeType){if(-1!==(pos=findSpace(start,remove,container,offset)))return{container:container,offset:pos};lastTextNode=container}for(walker=new TreeWalker(container,dom.getParent(container,dom.isBlock)||body);node=walker[start?"prev":"next"]();)if(3===node.nodeType){if(-1!==(pos=findSpace(start,remove,lastTextNode=node)))return{container:node,offset:pos}}else if(dom.isBlock(node))break;if(lastTextNode)return{container:lastTextNode,offset:offset=start?0:lastTextNode.length}},findSelectorEndPoint=function(dom,format,rng,container,siblingName){var parents,i,y,curFormat;for(3===container.nodeType&&0===container.nodeValue.length&&container[siblingName]&&(container=container[siblingName]),parents=getParents$2(dom,container),i=0;i<parents.length;i++)for(y=0;y<format.length;y++)if(!("collapsed"in(curFormat=format[y])&&curFormat.collapsed!==rng.collapsed)&&dom.is(parents[i],curFormat.selector))return parents[i];return container},findBlockEndPoint=function(editor,format,container,siblingName){var node,dom=editor.dom,root=dom.getRoot();if(format[0].wrapper||(node=dom.getParent(container,format[0].block,root)),!node){var scopeRoot=dom.getParent(container,"LI,TD,TH");node=dom.getParent(3===container.nodeType?container.parentNode:container,function(node){return node!==root&&isTextBlock$2(editor,node)},scopeRoot)}if(node&&format[0].wrapper&&(node=getParents$2(dom,node,"ul,ol").reverse()[0]||node),!node)for(node=container;node[siblingName]&&!dom.isBlock(node[siblingName])&&(node=node[siblingName],!$_dodtof5tjh8lyxdh.isEq(node,"br")););return node||container},findParentContainer=function(dom,format,startContainer,startOffset,endContainer,endOffset,start){var container,parent,sibling,siblingName,root,node;if(container=parent=start?startContainer:endContainer,siblingName=start?"previousSibling":"nextSibling",root=dom.getRoot(),3===container.nodeType&&!isWhiteSpaceNode$1(container)&&(start?0<startOffset:endOffset<container.nodeValue.length))return container;for(;;){if(!format[0].block_expand&&dom.isBlock(parent))return parent;for(sibling=parent[siblingName];sibling;sibling=sibling[siblingName])if(!isBookmarkNode$2(sibling)&&!isWhiteSpaceNode$1(sibling)&&("BR"!==(node=sibling).nodeName||!node.getAttribute("data-mce-bogus")||node.nextSibling))return parent;if(parent===root||parent.parentNode===root){container=parent;break}parent=parent.parentNode}return container},$_fryklb5sjh8lyxd9_expandRng=function(editor,rng,format,remove){var endPoint,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset,dom=editor.dom;return 1===startContainer.nodeType&&startContainer.hasChildNodes()&&3===(startContainer=getNode(startContainer,startOffset)).nodeType&&(startOffset=0),1===endContainer.nodeType&&endContainer.hasChildNodes()&&3===(endContainer=getNode(endContainer,rng.collapsed?endOffset:endOffset-1)).nodeType&&(endOffset=endContainer.nodeValue.length),startContainer=findParentContentEditable(dom,startContainer),endContainer=findParentContentEditable(dom,endContainer),(isBookmarkNode$2(startContainer.parentNode)||isBookmarkNode$2(startContainer))&&3===(startContainer=(startContainer=isBookmarkNode$2(startContainer)?startContainer:startContainer.parentNode).nextSibling||startContainer).nodeType&&(startOffset=0),(isBookmarkNode$2(endContainer.parentNode)||isBookmarkNode$2(endContainer))&&3===(endContainer=(endContainer=isBookmarkNode$2(endContainer)?endContainer:endContainer.parentNode).previousSibling||endContainer).nodeType&&(endOffset=endContainer.length),format[0].inline&&(rng.collapsed&&((endPoint=findWordEndPoint(dom,editor.getBody(),startContainer,startOffset,!0,remove))&&(startContainer=endPoint.container,startOffset=endPoint.offset),(endPoint=findWordEndPoint(dom,editor.getBody(),endContainer,endOffset,!1,remove))&&(endContainer=endPoint.container,endOffset=endPoint.offset)),endContainer=remove?endContainer:function(endContainer,endOffset){var leaf=findLeaf(endContainer,endOffset);if(leaf.node){for(;leaf.node&&0===leaf.offset&&leaf.node.previousSibling;)leaf=findLeaf(leaf.node.previousSibling);leaf.node&&0<leaf.offset&&3===leaf.node.nodeType&&" "===leaf.node.nodeValue.charAt(leaf.offset-1)&&1<leaf.offset&&(endContainer=leaf.node).splitText(leaf.offset-1)}return endContainer}(endContainer,endOffset)),(format[0].inline||format[0].block_expand)&&(format[0].inline&&3===startContainer.nodeType&&0!==startOffset||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),format[0].inline&&3===endContainer.nodeType&&endOffset!==endContainer.nodeValue.length||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1))),format[0].selector&&!1!==format[0].expand&&!format[0].inline&&(startContainer=findSelectorEndPoint(dom,format,rng,startContainer,"previousSibling"),endContainer=findSelectorEndPoint(dom,format,rng,endContainer,"nextSibling")),(format[0].block||format[0].selector)&&(startContainer=findBlockEndPoint(editor,format,startContainer,"previousSibling"),endContainer=findBlockEndPoint(editor,format,endContainer,"nextSibling"),format[0].block&&(dom.isBlock(startContainer)||(startContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!0)),dom.isBlock(endContainer)||(endContainer=findParentContainer(dom,format,startContainer,startOffset,endContainer,endOffset,!1)))),1===startContainer.nodeType&&(startOffset=dom.nodeIndex(startContainer),startContainer=startContainer.parentNode),1===endContainer.nodeType&&(endOffset=dom.nodeIndex(endContainer)+1,endContainer=endContainer.parentNode),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}},isEq$4=$_dodtof5tjh8lyxdh.isEq,matchesUnInheritedFormatSelector=function(ed,node,name){var formatList=ed.formatter.get(name);if(formatList)for(var i=0;i<formatList.length;i++)if(!1===formatList[i].inherit&&ed.dom.is(node,formatList[i].selector))return!0;return!1},matchParents=function(editor,node,name,vars){var root=editor.dom.getRoot();return node!==root&&(node=editor.dom.getParent(node,function(node){return!!matchesUnInheritedFormatSelector(editor,node,name)||node.parentNode===root||!!matchNode(editor,node,name,vars,!0)}),matchNode(editor,node,name,vars))},matchName=function(dom,node,format){return!!isEq$4(node,format.inline)||!!isEq$4(node,format.block)||(format.selector?1===node.nodeType&&dom.is(node,format.selector):void 0)},matchItems=function(dom,node,format,itemName,similar,vars){var key,value,i,items=format[itemName];if(format.onmatch)return format.onmatch(node,format,itemName);if(items)if(void 0===items.length){for(key in items)if(items.hasOwnProperty(key)){if(value="attributes"===itemName?dom.getAttrib(node,key):$_dodtof5tjh8lyxdh.getStyle(dom,node,key),similar&&!value&&!format.exact)return;if((!similar||format.exact)&&!isEq$4(value,$_dodtof5tjh8lyxdh.normalizeStyleValue(dom,$_dodtof5tjh8lyxdh.replaceVars(items[key],vars),key)))return}}else for(i=0;i<items.length;i++)if("attributes"===itemName?dom.getAttrib(node,items[i]):$_dodtof5tjh8lyxdh.getStyle(dom,node,items[i]))return format;return format},matchNode=function(ed,node,name,vars,similar){var format,i,x,classes,formatList=ed.formatter.get(name),dom=ed.dom;if(formatList&&node)for(i=0;i<formatList.length;i++)if(format=formatList[i],matchName(ed.dom,node,format)&&matchItems(dom,node,format,"attributes",similar,vars)&&matchItems(dom,node,format,"styles",similar,vars)){if(classes=format.classes)for(x=0;x<classes.length;x++)if(!ed.dom.hasClass(node,classes[x]))return;return format}},$_8qd8fq5ujh8lyxdx={matchNode:matchNode,matchName:matchName,match:function(editor,name,vars,node){var startNode;return node?matchParents(editor,node,name,vars):(node=editor.selection.getNode(),!!matchParents(editor,node,name,vars)||!((startNode=editor.selection.getStart())===node||!matchParents(editor,startNode,name,vars)))},matchAll:function(editor,names,vars){var startElement,matchedFormatNames=[],checkedMap={};return startElement=editor.selection.getStart(),editor.dom.getParent(startElement,function(node){var i,name;for(i=0;i<names.length;i++)name=names[i],!checkedMap[name]&&matchNode(editor,node,name,vars)&&(checkedMap[name]=!0,matchedFormatNames.push(name))},editor.dom.getRoot()),matchedFormatNames},canApply:function(editor,name){var startNode,parents,i,x,selector,formatList=editor.formatter.get(name),dom=editor.dom;if(formatList)for(startNode=editor.selection.getStart(),parents=$_dodtof5tjh8lyxdh.getParents(dom,startNode),x=formatList.length-1;0<=x;x--){if(!(selector=formatList[x].selector)||formatList[x].defaultBlock)return!0;for(i=parents.length-1;0<=i;i--)if(dom.is(parents[i],selector))return!0}return!1},matchesUnInheritedFormatSelector:matchesUnInheritedFormatSelector},splitText=function(node,offset){return node.splitText(offset)},$_5hrcpr5vjh8lyxe2_split=function(rng){var startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;return startContainer===endContainer&&$_5oonaz1qjh8lywhz.isText(startContainer)?0<startOffset&&startOffset<startContainer.nodeValue.length&&(startContainer=(endContainer=splitText(startContainer,startOffset)).previousSibling,startOffset<endOffset?(startContainer=endContainer=splitText(endContainer,endOffset-=startOffset).previousSibling,endOffset=endContainer.nodeValue.length,startOffset=0):endOffset=0):($_5oonaz1qjh8lywhz.isText(startContainer)&&0<startOffset&&startOffset<startContainer.nodeValue.length&&(startContainer=splitText(startContainer,startOffset),startOffset=0),$_5oonaz1qjh8lywhz.isText(endContainer)&&0<endOffset&&endOffset<endContainer.nodeValue.length&&(endOffset=(endContainer=splitText(endContainer,endOffset).previousSibling).nodeValue.length)),{startContainer:startContainer,startOffset:startOffset,endContainer:endContainer,endOffset:endOffset}},ZWSP$1=$_d383mr21jh8lywlv_ZWSP,isCaretContainerEmpty=function(node){return 0<function(node){for(var nodes=[];node;){if(3===node.nodeType&&node.nodeValue!==ZWSP$1||1<node.childNodes.length)return[];1===node.nodeType&&nodes.push(node),node=node.firstChild}return nodes}(node).length},findFirstTextNode=function(node){var walker;if(node)for(node=(walker=new TreeWalker(node,node)).current();node;node=walker.next())if(3===node.nodeType)return node;return null},createCaretContainer=function(fill){var caretContainer=$_cgttw3zjh8lywdq.fromTag("span");return $_3da62i14jh8lyweo.setAll(caretContainer,{id:"_mce_caret","data-mce-bogus":"1","data-mce-type":"format-caret"}),fill&&$_4m7u2e2kjh8lywpi.append(caretContainer,$_cgttw3zjh8lywdq.fromText(ZWSP$1)),caretContainer},removeCaretContainerNode=function(dom,selection,node,moveCaret){var rng,block,textNode;rng=selection.getRng(!0),block=dom.getParent(node,dom.isBlock),isCaretContainerEmpty(node)?(!1!==moveCaret&&(rng.setStartBefore(node),rng.setEndBefore(node)),dom.remove(node)):(textNode=function(caretContainerNode){var textNode=findFirstTextNode(caretContainerNode);return textNode&&textNode.nodeValue.charAt(0)===ZWSP$1&&textNode.deleteData(0,1),textNode}(node),rng.startContainer===textNode&&0<rng.startOffset&&rng.setStart(textNode,rng.startOffset-1),rng.endContainer===textNode&&0<rng.endOffset&&rng.setEnd(textNode,rng.endOffset-1),dom.remove(node,!0)),block&&dom.isEmpty(block)&&$_2bvsfb2tjh8lywqo_fillWithPaddingBr($_cgttw3zjh8lywdq.fromDom(block)),selection.setRng(rng)},removeCaretContainer=function(body,dom,selection,node,moveCaret){if(node)removeCaretContainerNode(dom,selection,node,moveCaret);else if(!(node=getParentCaretContainer(body,selection.getStart())))for(;node=dom.get("_mce_caret");)removeCaretContainerNode(dom,selection,node,!1)},insertCaretContainerNode=function(editor,caretContainer,formatNode){var dom=editor.dom,block=dom.getParent(formatNode,$_8aqzj925jh8lywmj.curry($_dodtof5tjh8lyxdh.isTextBlock,editor));block&&dom.isEmpty(block)?formatNode.parentNode.replaceChild(caretContainer,formatNode):($_2bvsfb2tjh8lywqo_removeTrailingBr($_cgttw3zjh8lywdq.fromDom(formatNode)),dom.isEmpty(formatNode)?formatNode.parentNode.replaceChild(caretContainer,formatNode):dom.insertAfter(caretContainer,formatNode))},appendNode=function(parentNode,node){return parentNode.appendChild(node),node},insertFormatNodesIntoCaretContainer=function(formatNodes,caretContainer){var innerMostFormatNode=$_5wjzy24jh8lyw2t.foldr(formatNodes,function(parentNode,formatNode){return appendNode(parentNode,formatNode.cloneNode(!1))},caretContainer);return appendNode(innerMostFormatNode,innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1))},setup$2=function(editor){var dom=editor.dom,selection=editor.selection,body=editor.getBody();editor.on("mouseup keydown",function(e){!function(body,dom,selection,keyCode){removeCaretContainer(body,dom,selection,null,!1),8===keyCode&&selection.isCollapsed()&&selection.getStart().innerHTML===ZWSP$1&&removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart())),37!==keyCode&&39!==keyCode||removeCaretContainer(body,dom,selection,getParentCaretContainer(body,selection.getStart()))}(body,dom,selection,e.keyCode)})},isFormatElement=function(editor,element){return editor.schema.getTextInlineElements().hasOwnProperty($_7j1jt210jh8lywdx.name(element))&&!isCaretNode(element.dom())&&!$_5oonaz1qjh8lywhz.isBogus(element.dom())},postProcessHooks={},filter$2=$_9tjm51ljh8lywbq.filter,each$11=$_9tjm51ljh8lywbq.each;!function(name,hook){var hooks=postProcessHooks[name];hooks||(postProcessHooks[name]=hooks=[]),postProcessHooks[name].push(hook)}("pre",function(editor){var isPre,blocks,rng=editor.selection.getRng();isPre=$_5oonaz1qjh8lywhz.matchNodeNames("pre"),rng.collapsed||(blocks=editor.selection.getSelectedBlocks(),each$11(filter$2(filter$2(blocks,isPre),function(pre){return isPre(pre.previousSibling)&&-1!==$_9tjm51ljh8lywbq.indexOf(blocks,pre.previousSibling)}),function(pre){var pre1,pre2;pre1=pre.previousSibling,DomQuery(pre2=pre).remove(),DomQuery(pre1).append("<br><br>").append(pre2.childNodes)}))});var $_78e03d5wjh8lyxe4_postProcess=function(name,editor){each$11(postProcessHooks[name],function(hook){hook(editor)})},each$12=$_ahowuxkjh8lywbj.each,$_90itx05zjh8lyxeq_walk=function(dom,rng,callback){var ancestor,startPoint,endPoint,node,parent,siblings,nodes,startContainer=rng.startContainer,startOffset=rng.startOffset,endContainer=rng.endContainer,endOffset=rng.endOffset;if(0<(nodes=dom.select("td[data-mce-selected],th[data-mce-selected]")).length)each$12(nodes,function(node){callback([node])});else{var container,index,childNodes,exclude=function(nodes){var node;return 3===(node=nodes[0]).nodeType&&node===startContainer&&startOffset>=node.nodeValue.length&&nodes.splice(0,1),node=nodes[nodes.length-1],0===endOffset&&0<nodes.length&&node===endContainer&&3===node.nodeType&&nodes.splice(nodes.length-1,1),nodes},collectSiblings=function(node,name,endNode){for(var siblings=[];node&&node!==endNode;node=node[name])siblings.push(node);return siblings},findEndPoint=function(node,root){do{if(node.parentNode===root)return node;node=node.parentNode}while(node)},walkBoundary=function(startNode,endNode,next){var siblingName=next?"nextSibling":"previousSibling";for(parent=(node=startNode).parentNode;node&&node!==endNode;node=parent)parent=node.parentNode,(siblings=collectSiblings(node===startNode?node:node[siblingName],siblingName)).length&&(next||siblings.reverse(),callback(exclude(siblings)))};if(1===startContainer.nodeType&&startContainer.hasChildNodes()&&(startContainer=startContainer.childNodes[startOffset]),1===endContainer.nodeType&&endContainer.hasChildNodes()&&(index=endOffset,childNodes=(container=endContainer).childNodes,--index>childNodes.length-1?index=childNodes.length-1:index<0&&(index=0),endContainer=childNodes[index]||container),startContainer===endContainer)return callback(exclude([startContainer]));for(ancestor=dom.findCommonAncestor(startContainer,endContainer),node=startContainer;node;node=node.parentNode){if(node===endContainer)return walkBoundary(startContainer,ancestor,!0);if(node===ancestor)break}for(node=endContainer;node;node=node.parentNode){if(node===startContainer)return walkBoundary(endContainer,ancestor);if(node===ancestor)break}startPoint=findEndPoint(startContainer,ancestor)||startContainer,endPoint=findEndPoint(endContainer,ancestor)||endContainer,walkBoundary(startContainer,startPoint,!0),(siblings=collectSiblings(startPoint===startContainer?startPoint:startPoint.nextSibling,"nextSibling",endPoint===endContainer?endPoint.nextSibling:endPoint)).length&&callback(exclude(siblings)),walkBoundary(endContainer,endPoint)}},MCE_ATTR_RE=/^(src|href|style)$/,each$13=$_ahowuxkjh8lywbj.each,isEq$5=$_dodtof5tjh8lyxdh.isEq,isTableCell$4=function(node){return/^(TH|TD)$/.test(node.nodeName)},getContainer=function(ed,rng,start){var container,offset,lastIdx;return container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],$_5oonaz1qjh8lywhz.isElement(container)&&(lastIdx=container.childNodes.length-1,!start&&offset&&offset--,container=container.childNodes[lastIdx<offset?lastIdx:offset]),$_5oonaz1qjh8lywhz.isText(container)&&start&&offset>=container.nodeValue.length&&(container=new TreeWalker(container,ed.getBody()).next()||container),$_5oonaz1qjh8lywhz.isText(container)&&!start&&0===offset&&(container=new TreeWalker(container,ed.getBody()).prev()||container),container},wrap$2=function(dom,node,name,attrs){var wrapper=dom.create(name,attrs);return node.parentNode.insertBefore(wrapper,node),wrapper.appendChild(node),wrapper},find$4=function(dom,node,next,inc){return!(node=$_dodtof5tjh8lyxdh.getNonWhiteSpaceSibling(node,next,inc))||"BR"===node.nodeName||dom.isBlock(node)},removeFormat=function(ed,format,vars,node,compareNode){var i,attrs,stylesModified,dom=ed.dom;if(!function(dom,node,format){return!!isEq$5(node,format.inline)||!!isEq$5(node,format.block)||(format.selector?$_5oonaz1qjh8lywhz.isElement(node)&&dom.is(node,format.selector):void 0)}(dom,node,format)&&!function(node,format){return format.links&&"A"===node.tagName}(node,format))return!1;if("all"!==format.remove)for(each$13(format.styles,function(value,name){value=$_dodtof5tjh8lyxdh.normalizeStyleValue(dom,$_dodtof5tjh8lyxdh.replaceVars(value,vars),name),"number"==typeof name&&(name=value,compareNode=0),(format.remove_similar||!compareNode||isEq$5($_dodtof5tjh8lyxdh.getStyle(dom,compareNode,name),value))&&dom.setStyle(node,name,""),stylesModified=1}),stylesModified&&""===dom.getAttrib(node,"style")&&(node.removeAttribute("style"),node.removeAttribute("data-mce-style")),each$13(format.attributes,function(value,name){var valueOut;if(value=$_dodtof5tjh8lyxdh.replaceVars(value,vars),"number"==typeof name&&(name=value,compareNode=0),!compareNode||isEq$5(dom.getAttrib(compareNode,name),value)){if("class"===name&&(value=dom.getAttrib(node,name))&&(valueOut="",each$13(value.split(/\s+/),function(cls){/mce\-\w+/.test(cls)&&(valueOut+=(valueOut?" ":"")+cls)}),valueOut))return void dom.setAttrib(node,name,valueOut);"class"===name&&node.removeAttribute("className"),MCE_ATTR_RE.test(name)&&node.removeAttribute("data-mce-"+name),node.removeAttribute(name)}}),each$13(format.classes,function(value){value=$_dodtof5tjh8lyxdh.replaceVars(value,vars),compareNode&&!dom.hasClass(compareNode,value)||dom.removeClass(node,value)}),attrs=dom.getAttribs(node),i=0;i<attrs.length;i++){var attrName=attrs[i].nodeName;if(0!==attrName.indexOf("_")&&0!==attrName.indexOf("data-"))return!1}return"none"!==format.remove?(function(ed,node,format){var rootBlockElm,parentNode=node.parentNode,dom=ed.dom,forcedRootBlock=ed.settings.forced_root_block;format.block&&(forcedRootBlock?parentNode===dom.getRoot()&&(format.list_block&&isEq$5(node,format.list_block)||each$13($_ahowuxkjh8lywbj.grep(node.childNodes),function(node){$_dodtof5tjh8lyxdh.isValid(ed,forcedRootBlock,node.nodeName.toLowerCase())?rootBlockElm?rootBlockElm.appendChild(node):(rootBlockElm=wrap$2(dom,node,forcedRootBlock),dom.setAttribs(rootBlockElm,ed.settings.forced_root_block_attrs)):rootBlockElm=0})):dom.isBlock(node)&&!dom.isBlock(parentNode)&&(find$4(dom,node,!1)||find$4(dom,node.firstChild,!0,1)||node.insertBefore(dom.create("br"),node.firstChild),find$4(dom,node,!0)||find$4(dom,node.lastChild,!1,1)||node.appendChild(dom.create("br")))),format.selector&&format.inline&&!isEq$5(format.inline,node)||dom.remove(node,1)}(ed,node,format),!0):void 0},$_7cys7h5yjh8lyxeg_removeFormat=removeFormat,$_7cys7h5yjh8lyxeg_remove=function(ed,name,vars,node,similar){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],contentEditable=!0,dom=ed.dom,selection=ed.selection,splitToFormatRoot=function(container){var formatRoot=function(editor,container,name,vars,similar){var formatRoot;return each$13($_dodtof5tjh8lyxdh.getParents(editor.dom,container.parentNode).reverse(),function(parent){var format;formatRoot||"_start"===parent.id||"_end"===parent.id||(format=$_8qd8fq5ujh8lyxdx.matchNode(editor,parent,name,vars,similar))&&!1!==format.split&&(formatRoot=parent)}),formatRoot}(ed,container,name,vars,similar);return function(editor,formatList,formatRoot,container,target,split,format,vars){var parent,clone,lastClone,firstClone,i,formatRootParent,dom=editor.dom;if(formatRoot){for(formatRootParent=formatRoot.parentNode,parent=container.parentNode;parent&&parent!==formatRootParent;parent=parent.parentNode){for(clone=dom.clone(parent,!1),i=0;i<formatList.length;i++)if(removeFormat(editor,formatList[i],vars,clone,clone)){clone=0;break}clone&&(lastClone&&clone.appendChild(lastClone),firstClone||(firstClone=clone),lastClone=clone)}!split||format.mixed&&dom.isBlock(formatRoot)||(container=dom.split(formatRoot,container)),lastClone&&(target.parentNode.insertBefore(lastClone,target),firstClone.appendChild(target))}return container}(ed,formatList,formatRoot,container,container,!0,format,vars)},process=function(node){var children,i,l,lastContentEditable,hasContentEditableState;if($_5oonaz1qjh8lywhz.isElement(node)&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),children=$_ahowuxkjh8lywbj.grep(node.childNodes),contentEditable&&!hasContentEditableState)for(i=0,l=formatList.length;i<l&&!removeFormat(ed,formatList[i],vars,node,node);i++);if(format.deep&&children.length){for(i=0,l=children.length;i<l;i++)process(children[i]);hasContentEditableState&&(contentEditable=lastContentEditable)}},unwrap=function(start){var node=dom.get(start?"_start":"_end"),out=node[start?"firstChild":"lastChild"];return $_eyp5ec2njh8lywpo_isBookmarkNode(out)&&(out=out[start?"firstChild":"lastChild"]),$_5oonaz1qjh8lywhz.isText(out)&&0===out.data.length&&(out=start?node.previousSibling||node.nextSibling:node.nextSibling||node.previousSibling),dom.remove(node,!0),out},removeRngStyle=function(rng){var startContainer,endContainer,commonAncestorContainer=rng.commonAncestorContainer;if(rng=$_fryklb5sjh8lyxd9_expandRng(ed,rng,formatList,!0),format.split){if((startContainer=getContainer(ed,rng,!0))!==(endContainer=getContainer(ed,rng))){if(/^(TR|TH|TD)$/.test(startContainer.nodeName)&&startContainer.firstChild&&(startContainer="TR"===startContainer.nodeName?startContainer.firstChild.firstChild||startContainer:startContainer.firstChild||startContainer),commonAncestorContainer&&/^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName)&&isTableCell$4(endContainer)&&endContainer.firstChild&&(endContainer=endContainer.firstChild||endContainer),dom.isChildOf(startContainer,endContainer)&&startContainer!==endContainer&&!dom.isBlock(endContainer)&&!isTableCell$4(startContainer)&&!isTableCell$4(endContainer))return startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),void(startContainer=unwrap(!0));startContainer=wrap$2(dom,startContainer,"span",{id:"_start","data-mce-type":"bookmark"}),endContainer=wrap$2(dom,endContainer,"span",{id:"_end","data-mce-type":"bookmark"}),splitToFormatRoot(startContainer),splitToFormatRoot(endContainer),startContainer=unwrap(!0),endContainer=unwrap()}else startContainer=endContainer=splitToFormatRoot(startContainer);rng.startContainer=startContainer.parentNode?startContainer.parentNode:startContainer,rng.startOffset=dom.nodeIndex(startContainer),rng.endContainer=endContainer.parentNode?endContainer.parentNode:endContainer,rng.endOffset=dom.nodeIndex(endContainer)+1}$_90itx05zjh8lyxeq_walk(dom,rng,function(nodes){each$13(nodes,function(node){process(node),$_5oonaz1qjh8lywhz.isElement(node)&&"underline"===ed.dom.getStyle(node,"text-decoration")&&node.parentNode&&"underline"===$_dodtof5tjh8lyxdh.getTextDecoration(dom,node.parentNode)&&removeFormat(ed,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,node)})})};if(node)node.nodeType?((rng=dom.createRng()).setStartBefore(node),rng.setEndAfter(node),removeRngStyle(rng)):removeRngStyle(node);else if("false"!==dom.getContentEditable(selection.getNode()))selection.isCollapsed()&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length?function(editor,name,vars,similar){var container,offset,bookmark,hasContentAfter,node,formatNode,caretContainer,dom=editor.dom,selection=editor.selection,parents=[],rng=selection.getRng();for(container=rng.startContainer,offset=rng.startOffset,3===(node=container).nodeType&&(offset!==container.nodeValue.length&&(hasContentAfter=!0),node=node.parentNode);node;){if($_8qd8fq5ujh8lyxdx.matchNode(editor,node,name,vars,similar)){formatNode=node;break}node.nextSibling&&(hasContentAfter=!0),parents.push(node),node=node.parentNode}if(formatNode)if(hasContentAfter){bookmark=selection.getBookmark(),rng.collapse(!0);var expandedRng=$_fryklb5sjh8lyxd9_expandRng(editor,rng,editor.formatter.get(name),!0);expandedRng=$_5hrcpr5vjh8lyxe2_split(expandedRng),editor.formatter.remove(name,vars,expandedRng),selection.moveToBookmark(bookmark)}else{caretContainer=getParentCaretContainer(editor.getBody(),formatNode);var newCaretContainer=createCaretContainer(!1).dom(),caretNode=insertFormatNodesIntoCaretContainer(parents,newCaretContainer);insertCaretContainerNode(editor,newCaretContainer,caretContainer||formatNode),removeCaretContainerNode(dom,selection,caretContainer,!1),selection.setCursorLocation(caretNode,1),dom.isEmpty(formatNode)&&dom.remove(formatNode)}}(ed,name,vars,similar):(bookmark=$_8b82yg2ojh8lywpq.getPersistentBookmark(ed.selection,!0),removeRngStyle(selection.getRng()),selection.moveToBookmark(bookmark),format.inline&&$_8qd8fq5ujh8lyxdx.match(ed,name,vars,selection.getStart())&&$_dodtof5tjh8lyxdh.moveStart(dom,selection,selection.getRng()),ed.nodeChanged());else{node=selection.getNode();for(var i=0,l=formatList.length;i<l&&(!formatList[i].ceFalseOverride||!removeFormat(ed,formatList[i],vars,node,node));i++);}},each$14=$_ahowuxkjh8lywbj.each,isElementNode=function(node){return node&&1===node.nodeType&&!$_eyp5ec2njh8lywpo_isBookmarkNode(node)&&!isCaretNode(node)&&!$_5oonaz1qjh8lywhz.isBogus(node)},findElementSibling=function(node,siblingName){var sibling;for(sibling=node;sibling;sibling=sibling[siblingName]){if(3===sibling.nodeType&&0!==sibling.nodeValue.length)return node;if(1===sibling.nodeType&&!$_eyp5ec2njh8lywpo_isBookmarkNode(sibling))return sibling}return node},mergeSiblingsNodes=function(dom,prev,next){var sibling,tmpSibling,elementUtils=new ElementUtils(dom);if(prev&&next&&(prev=findElementSibling(prev,"previousSibling"),next=findElementSibling(next,"nextSibling"),elementUtils.compare(prev,next))){for(sibling=prev.nextSibling;sibling&&sibling!==next;)sibling=(tmpSibling=sibling).nextSibling,prev.appendChild(tmpSibling);return dom.remove(next),$_ahowuxkjh8lywbj.each($_ahowuxkjh8lywbj.grep(next.childNodes),function(node){prev.appendChild(node)}),prev}return next},processChildElements=function(node,filter,process){each$14(node.childNodes,function(node){isElementNode(node)&&(filter(node)&&process(node),node.hasChildNodes()&&processChildElements(node,filter,process))})},hasStyle=function(dom,name){return $_eqpqvr6jh8lyw3s.curry(function(name,node){return!(!node||!$_dodtof5tjh8lyxdh.getStyle(dom,node,name))},name)},applyStyle=function(dom,name,value){return $_eqpqvr6jh8lyw3s.curry(function(name,value,node){dom.setStyle(node,name,value),""===node.getAttribute("style")&&node.removeAttribute("style"),unwrapEmptySpan(dom,node)},name,value)},unwrapEmptySpan=function(dom,node){"SPAN"===node.nodeName&&0===dom.getAttribs(node).length&&dom.remove(node,!0)},processUnderlineAndColor=function(dom,node){var textDecoration;1===node.nodeType&&node.parentNode&&1===node.parentNode.nodeType&&(textDecoration=$_dodtof5tjh8lyxdh.getTextDecoration(dom,node.parentNode),dom.getStyle(node,"color")&&textDecoration?dom.setStyle(node,"text-decoration",textDecoration):dom.getStyle(node,"text-decoration")===textDecoration&&dom.setStyle(node,"text-decoration",null))},$_3fattg5xjh8lyxe7_mergeWithChildren=function(editor,formatList,vars,node){each$14(formatList,function(format){each$14(editor.dom.select(format.inline,node),function(child){isElementNode(child)&&$_7cys7h5yjh8lyxeg_removeFormat(editor,format,vars,child,format.exact?child:null)}),function(dom,format,node){if(format.clear_child_styles){var selector=format.links?"*:not(a)":"*";each$14(dom.select(selector,node),function(node){isElementNode(node)&&each$14(format.styles,function(value,name){dom.setStyle(node,name,"")})})}}(editor.dom,format,node)})},$_3fattg5xjh8lyxe7_mergeUnderlineAndColor=function(dom,format,vars,node){(format.styles.color||format.styles.textDecoration)&&($_ahowuxkjh8lywbj.walk(node,$_eqpqvr6jh8lyw3s.curry(processUnderlineAndColor,dom),"childNodes"),processUnderlineAndColor(dom,node))},$_3fattg5xjh8lyxe7_mergeBackgroundColorAndFontSize=function(dom,format,vars,node){format.styles&&format.styles.backgroundColor&&processChildElements(node,hasStyle(dom,"fontSize"),applyStyle(dom,"backgroundColor",$_dodtof5tjh8lyxdh.replaceVars(format.styles.backgroundColor,vars)))},$_3fattg5xjh8lyxe7_mergeSubSup=function(dom,format,vars,node){"sub"!==format.inline&&"sup"!==format.inline||(processChildElements(node,hasStyle(dom,"fontSize"),applyStyle(dom,"fontSize","")),dom.remove(dom.select("sup"===format.inline?"sub":"sup",node),!0))},$_3fattg5xjh8lyxe7_mergeSiblings=function(dom,format,vars,node){node&&!1!==format.merge_siblings&&(node=mergeSiblingsNodes(dom,$_dodtof5tjh8lyxdh.getNonWhiteSpaceSibling(node),node),node=mergeSiblingsNodes(dom,node,$_dodtof5tjh8lyxdh.getNonWhiteSpaceSibling(node,!0)))},$_3fattg5xjh8lyxe7_mergeWithParents=function(editor,format,name,vars,node){$_8qd8fq5ujh8lyxdx.matchNode(editor,node.parentNode,name,vars)&&$_7cys7h5yjh8lyxeg_removeFormat(editor,format,vars,node)||format.merge_with_parents&&editor.dom.getParent(node.parentNode,function(parent){if($_8qd8fq5ujh8lyxdx.matchNode(editor,parent,name,vars))return $_7cys7h5yjh8lyxeg_removeFormat(editor,format,vars,node),!0})},each$15=$_ahowuxkjh8lywbj.each,applyFormat=function(ed,name,vars,node){var bookmark,rng,formatList=ed.formatter.get(name),format=formatList[0],isCollapsed=!node&&ed.selection.isCollapsed(),dom=ed.dom,selection=ed.selection,setElementFormat=function(elm,fmt){if(fmt=fmt||format,elm){if(fmt.onformat&&fmt.onformat(elm,fmt,vars,node),each$15(fmt.styles,function(value,name){dom.setStyle(elm,name,$_dodtof5tjh8lyxdh.replaceVars(value,vars))}),fmt.styles){var styleVal=dom.getAttrib(elm,"style");styleVal&&elm.setAttribute("data-mce-style",styleVal)}each$15(fmt.attributes,function(value,name){dom.setAttrib(elm,name,$_dodtof5tjh8lyxdh.replaceVars(value,vars))}),each$15(fmt.classes,function(value){value=$_dodtof5tjh8lyxdh.replaceVars(value,vars),dom.hasClass(elm,value)||dom.addClass(elm,value)})}},applyNodeStyle=function(formatList,node){var found=!1;return!!format.selector&&(each$15(formatList,function(format){if(!("collapsed"in format&&format.collapsed!==isCollapsed))return dom.is(node,format.selector)&&!isCaretNode(node)?(setElementFormat(node,format),!(found=!0)):void 0}),found)},applyRngStyle=function(dom,rng,bookmark,nodeSpecific){var wrapName,wrapElm,newWrappers=[],contentEditable=!0;wrapName=format.inline||format.block,wrapElm=dom.create(wrapName),setElementFormat(wrapElm),$_90itx05zjh8lyxeq_walk(dom,rng,function(nodes){var currentWrapElm,process=function(node){var nodeName,parentName,hasContentEditableState,lastContentEditable;if(lastContentEditable=contentEditable,nodeName=node.nodeName.toLowerCase(),parentName=node.parentNode.nodeName.toLowerCase(),1===node.nodeType&&dom.getContentEditable(node)&&(lastContentEditable=contentEditable,contentEditable="true"===dom.getContentEditable(node),hasContentEditableState=!0),$_dodtof5tjh8lyxdh.isEq(nodeName,"br"))return currentWrapElm=0,void(format.block&&dom.remove(node));if(format.wrapper&&$_8qd8fq5ujh8lyxdx.matchNode(ed,node,name,vars))currentWrapElm=0;else{if(contentEditable&&!hasContentEditableState&&format.block&&!format.wrapper&&$_dodtof5tjh8lyxdh.isTextBlock(ed,nodeName)&&$_dodtof5tjh8lyxdh.isValid(ed,parentName,wrapName))return node=dom.rename(node,wrapName),setElementFormat(node),newWrappers.push(node),void(currentWrapElm=0);if(format.selector){var found=applyNodeStyle(formatList,node);if(!format.inline||found)return void(currentWrapElm=0)}!contentEditable||hasContentEditableState||!$_dodtof5tjh8lyxdh.isValid(ed,wrapName,nodeName)||!$_dodtof5tjh8lyxdh.isValid(ed,parentName,wrapName)||!nodeSpecific&&3===node.nodeType&&1===node.nodeValue.length&&65279===node.nodeValue.charCodeAt(0)||isCaretNode(node)||format.inline&&dom.isBlock(node)?(currentWrapElm=0,each$15($_ahowuxkjh8lywbj.grep(node.childNodes),process),hasContentEditableState&&(contentEditable=lastContentEditable),currentWrapElm=0):(currentWrapElm||(currentWrapElm=dom.clone(wrapElm,!1),node.parentNode.insertBefore(currentWrapElm,node),newWrappers.push(currentWrapElm)),currentWrapElm.appendChild(node))}};each$15(nodes,process)}),!0===format.links&&each$15(newWrappers,function(node){var process=function(node){"A"===node.nodeName&&setElementFormat(node,format),each$15($_ahowuxkjh8lywbj.grep(node.childNodes),process)};process(node)}),each$15(newWrappers,function(node){var childCount,getChildElementNode=function(root){var child=!1;return each$15(root.childNodes,function(node){if(function(node){return node&&1===node.nodeType&&!$_eyp5ec2njh8lywpo_isBookmarkNode(node)&&!isCaretNode(node)&&!$_5oonaz1qjh8lywhz.isBogus(node)}(node))return child=node,!1}),child};childCount=function(node){var count=0;return each$15(node.childNodes,function(node){$_dodtof5tjh8lyxdh.isWhiteSpaceNode(node)||$_eyp5ec2njh8lywpo_isBookmarkNode(node)||count++}),count}(node),!(1<newWrappers.length)&&dom.isBlock(node)||0!==childCount?(format.inline||format.wrapper)&&(format.exact||1!==childCount||(node=function(node){var child,clone;return(child=getChildElementNode(node))&&!$_eyp5ec2njh8lywpo_isBookmarkNode(child)&&$_8qd8fq5ujh8lyxdx.matchName(dom,child,format)&&(clone=dom.clone(child,!1),setElementFormat(clone),dom.replace(clone,node,!0),dom.remove(child,1)),clone||node}(node)),$_3fattg5xjh8lyxe7_mergeWithChildren(ed,formatList,vars,node),$_3fattg5xjh8lyxe7_mergeWithParents(ed,format,name,vars,node),$_3fattg5xjh8lyxe7_mergeBackgroundColorAndFontSize(dom,format,vars,node),$_3fattg5xjh8lyxe7_mergeSubSup(dom,format,vars,node),$_3fattg5xjh8lyxe7_mergeSiblings(dom,format,vars,node)):dom.remove(node,1)})};if("false"!==dom.getContentEditable(selection.getNode())){if(format){if(node)node.nodeType?applyNodeStyle(formatList,node)||((rng=dom.createRng()).setStartBefore(node),rng.setEndAfter(node),applyRngStyle(dom,$_fryklb5sjh8lyxd9_expandRng(ed,rng,formatList),0,!0)):applyRngStyle(dom,node,0,!0);else if(isCollapsed&&format.inline&&!dom.select("td[data-mce-selected],th[data-mce-selected]").length)!function(editor,name,vars){var rng,caretContainer,textNode,offset,bookmark,text,selection=editor.selection;offset=(rng=selection.getRng(!0)).startOffset,text=rng.startContainer.nodeValue,(caretContainer=getParentCaretContainer(editor.getBody(),selection.getStart()))&&(textNode=findFirstTextNode(caretContainer));var ownerDocument,node,wordcharRegex=/[^\s\u00a0\u00ad\u200b\ufeff]/;text&&0<offset&&offset<text.length&&wordcharRegex.test(text.charAt(offset))&&wordcharRegex.test(text.charAt(offset-1))?(bookmark=selection.getBookmark(),rng.collapse(!0),rng=$_fryklb5sjh8lyxd9_expandRng(editor,rng,editor.formatter.get(name)),rng=$_5hrcpr5vjh8lyxe2_split(rng),editor.formatter.apply(name,vars,rng),selection.moveToBookmark(bookmark)):(caretContainer&&textNode.nodeValue===ZWSP$1||(ownerDocument=editor.getDoc(),node=createCaretContainer(!0).dom(),textNode=(caretContainer=ownerDocument.importNode(node,!0)).firstChild,rng.insertNode(caretContainer),offset=1),editor.formatter.apply(name,vars,caretContainer),selection.setCursorLocation(textNode,offset))}(ed,name,vars);else{var curSelNode=ed.selection.getNode();ed.settings.forced_root_block||!formatList[0].defaultBlock||dom.getParent(curSelNode,dom.isBlock)||applyFormat(ed,formatList[0].defaultBlock),ed.selection.setRng($_cnbluh30jh8lywrn_normalize(ed.selection.getRng())),bookmark=$_8b82yg2ojh8lywpq.getPersistentBookmark(ed.selection,!0),applyRngStyle(dom,$_fryklb5sjh8lyxd9_expandRng(ed,selection.getRng(),formatList)),format.styles&&$_3fattg5xjh8lyxe7_mergeUnderlineAndColor(dom,format,vars,curSelNode),selection.moveToBookmark(bookmark),$_dodtof5tjh8lyxdh.moveStart(dom,selection,selection.getRng()),ed.nodeChanged()}$_78e03d5wjh8lyxe4_postProcess(name,ed)}}else{node=selection.getNode();for(var i=0,l=formatList.length;i<l;i++)if(formatList[i].ceFalseOverride&&dom.is(node,formatList[i].selector))return void setElementFormat(node,formatList[i])}},$_36ocwe5qjh8lyxck={applyFormat:applyFormat},each$16=$_ahowuxkjh8lywbj.each,$_cpfal560jh8lyxeu_formatChanged=function(editor,formatChangeState,formats,callback,similar){null===formatChangeState.get()&&function(formatChangeData,editor){var currentFormats={};formatChangeData.set({}),editor.on("NodeChange",function(e){var parents=$_dodtof5tjh8lyxdh.getParents(editor.dom,e.element),matchedFormats={};parents=$_ahowuxkjh8lywbj.grep(parents,function(node){return 1===node.nodeType&&!node.getAttribute("data-mce-bogus")}),each$16(formatChangeData.get(),function(callbacks,format){each$16(parents,function(node){return editor.formatter.matchNode(node,format,{},callbacks.similar)?(currentFormats[format]||(each$16(callbacks,function(callback){callback(!0,{node:node,format:format,parents:parents})}),currentFormats[format]=callbacks),matchedFormats[format]=callbacks,!1):!$_8qd8fq5ujh8lyxdx.matchesUnInheritedFormatSelector(editor,node,format)&&void 0})}),each$16(currentFormats,function(callbacks,format){matchedFormats[format]||(delete currentFormats[format],each$16(callbacks,function(callback){callback(!1,{node:e.element,format:format,parents:parents})}))})})}(formatChangeState,editor),function(formatChangeData,formats,callback,similar){var formatChangeItems=formatChangeData.get();each$16(formats.split(","),function(format){formatChangeItems[format]||(formatChangeItems[format]=[],formatChangeItems[format].similar=similar),formatChangeItems[format].push(callback)}),formatChangeData.set(formatChangeItems)}(formatChangeState,formats,callback,similar)},$_3zwfyl62jh8lyxez={get:function(dom){var formats={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(elm,fmt,vars){$_ahowuxkjh8lywbj.each(vars,function(value,key){dom.setAttrib(elm,key,value)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $_ahowuxkjh8lywbj.each("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(name){formats[name]={block:name,remove:"all"}}),formats}},each$17=$_ahowuxkjh8lywbj.each,dom=DOMUtils$1.DOM,parsedSelectorToHtml=function(ancestry,editor){var elm,item,fragment,schema=editor&&editor.schema||Schema({}),createElement=function(sItem){var elm;return item="string"==typeof sItem?{name:sItem,classes:[],attrs:{}}:sItem,function(elm,item){item.classes.length&&dom.addClass(elm,item.classes.join(" ")),dom.setAttribs(elm,item.attrs)}(elm=dom.create(item.name),item),elm},wrapInHtml=function(elm,ancestry,siblings){var parent,parentCandidate,parentRequired,ancestor=0<ancestry.length&&ancestry[0],ancestorName=ancestor&&ancestor.name;if(parentRequired=function(elm,candidate){var name="string"!=typeof elm?elm.nodeName.toLowerCase():elm,elmRule=schema.getElementRule(name),parentsRequired=elmRule&&elmRule.parentsRequired;return!(!parentsRequired||!parentsRequired.length)&&(candidate&&-1!==$_ahowuxkjh8lywbj.inArray(parentsRequired,candidate)?candidate:parentsRequired[0])}(elm,ancestorName))ancestorName===parentRequired?(parentCandidate=ancestry[0],ancestry=ancestry.slice(1)):parentCandidate=parentRequired;else if(ancestor)parentCandidate=ancestry[0],ancestry=ancestry.slice(1);else if(!siblings)return elm;return parentCandidate&&(parent=createElement(parentCandidate)).appendChild(elm),siblings&&(parent||(parent=dom.create("div")).appendChild(elm),$_ahowuxkjh8lywbj.each(siblings,function(sibling){var siblingElm=createElement(sibling);parent.insertBefore(siblingElm,elm)})),wrapInHtml(parent,ancestry,parentCandidate&&parentCandidate.siblings)};return ancestry&&ancestry.length?(item=ancestry[0],elm=createElement(item),(fragment=dom.create("div")).appendChild(wrapInHtml(elm,ancestry.slice(1),item.siblings)),fragment):""},parseSelectorItem=function(item){var tagName,obj={classes:[],attrs:{}};return"*"!==(item=obj.selector=$_ahowuxkjh8lywbj.trim(item))&&(tagName=item.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function($0,$1,$2,$3,$4){switch($1){case"#":obj.attrs.id=$2;break;case".":obj.classes.push($2);break;case":":-1!==$_ahowuxkjh8lywbj.inArray("checked disabled enabled read-only required".split(" "),$2)&&(obj.attrs[$2]=$2)}if("["===$3){var m=$4.match(/([\w\-]+)(?:\=\"([^\"]+))?/);m&&(obj.attrs[m[1]]=m[2])}return""})),obj.name=tagName||"div",obj},parseSelector=function(selector){return selector&&"string"==typeof selector?(selector=(selector=selector.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$_ahowuxkjh8lywbj.map(selector.split(/(?:>|\s+(?![^\[\]]+\]))/),function(item){var siblings=$_ahowuxkjh8lywbj.map(item.split(/(?:~\+|~|\+)/),parseSelectorItem),obj=siblings.pop();return siblings.length&&(obj.siblings=siblings),obj}).reverse()):[]},$_fwiqkm63jh8lyxf5_getCssText=function(editor,format){var name,previewFrag,previewElm,items,parentFontSize,previewStyles,previewCss="";if(!1===(previewStyles=editor.settings.preview_styles))return"";"string"!=typeof previewStyles&&(previewStyles="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow");var removeVars=function(val){return val.replace(/%(\w+)/g,"")};if("string"==typeof format){if(!(format=editor.formatter.get(format)))return;format=format[0]}return"preview"in format&&!1===(previewStyles=format.preview)?"":(name=format.block||format.inline||"span",previewFrag=(items=parseSelector(format.selector)).length?(items[0].name||(items[0].name=name),name=format.selector,parsedSelectorToHtml(items,editor)):parsedSelectorToHtml([name],editor),previewElm=dom.select(name,previewFrag)[0]||previewFrag.firstChild,each$17(format.styles,function(value,name){(value=removeVars(value))&&dom.setStyle(previewElm,name,value)}),each$17(format.attributes,function(value,name){(value=removeVars(value))&&dom.setAttrib(previewElm,name,value)}),each$17(format.classes,function(value){value=removeVars(value),dom.hasClass(previewElm,value)||dom.addClass(previewElm,value)}),editor.fire("PreviewFormats"),dom.setStyles(previewFrag,{position:"absolute",left:-65535}),editor.getBody().appendChild(previewFrag),parentFontSize=dom.getStyle(editor.getBody(),"fontSize",!0),parentFontSize=/px$/.test(parentFontSize)?parseInt(parentFontSize,10):0,each$17(previewStyles.split(" "),function(name){var value=dom.getStyle(previewElm,name,!0);if(!("background-color"===name&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(value)&&(value=dom.getStyle(editor.getBody(),name,!0),"#ffffff"===dom.toHex(value).toLowerCase())||"color"===name&&"#000000"===dom.toHex(value).toLowerCase())){if("font-size"===name&&/em|%$/.test(value)){if(0===parentFontSize)return;value=parseFloat(value)/(/%$/.test(value)?100:1)*parentFontSize+"px"}"border"===name&&value&&(previewCss+="padding:0 2px;"),previewCss+=name+":"+value+";"}}),editor.fire("AfterPreviewFormats"),dom.remove(previewFrag),previewCss)},$_5bc2se64jh8lyxfc_toggle=function(editor,formats,name,vars,node){var fmt=formats.get(name);!$_8qd8fq5ujh8lyxdx.match(editor,name,vars,node)||"toggle"in fmt[0]&&!fmt[0].toggle?$_36ocwe5qjh8lyxck.applyFormat(editor,name,vars,node):$_7cys7h5yjh8lyxeg_remove(editor,name,vars,node)},$_3p946b65jh8lyxfe_setup=function(editor){editor.addShortcut("meta+b","","Bold"),editor.addShortcut("meta+i","","Italic"),editor.addShortcut("meta+u","","Underline");for(var i=1;i<=6;i++)editor.addShortcut("access+"+i,"",["FormatBlock",!1,"h"+i]);editor.addShortcut("access+7","",["FormatBlock",!1,"p"]),editor.addShortcut("access+8","",["FormatBlock",!1,"div"]),editor.addShortcut("access+9","",["FormatBlock",!1,"address"])};function Formatter(editor){var formats=function(editor){var formats={},register=function(name,format){name&&("string"!=typeof name?$_ahowuxkjh8lywbj.each(name,function(format,name){register(name,format)}):(format=format.length?format:[format],$_ahowuxkjh8lywbj.each(format,function(format){void 0===format.deep&&(format.deep=!format.selector),void 0===format.split&&(format.split=!format.selector||format.inline),void 0===format.remove&&format.selector&&!format.inline&&(format.remove="none"),format.selector&&format.inline&&(format.mixed=!0,format.block_expand=!0),"string"==typeof format.classes&&(format.classes=format.classes.split(/\s+/))}),formats[name]=format))};return register($_3zwfyl62jh8lyxez.get(editor.dom)),register(editor.settings.formats),{get:function(name){return name?formats[name]:formats},register:register,unregister:function(name){return name&&formats[name]&&delete formats[name],formats}}}(editor),formatChangeState=Cell(null);return $_3p946b65jh8lyxfe_setup(editor),setup$2(editor),{get:formats.get,register:formats.register,unregister:formats.unregister,apply:$_eqpqvr6jh8lyw3s.curry($_36ocwe5qjh8lyxck.applyFormat,editor),remove:$_eqpqvr6jh8lyw3s.curry($_7cys7h5yjh8lyxeg_remove,editor),toggle:$_eqpqvr6jh8lyw3s.curry($_5bc2se64jh8lyxfc_toggle,editor,formats),match:$_eqpqvr6jh8lyw3s.curry($_8qd8fq5ujh8lyxdx.match,editor),matchAll:$_eqpqvr6jh8lyw3s.curry($_8qd8fq5ujh8lyxdx.matchAll,editor),matchNode:$_eqpqvr6jh8lyw3s.curry($_8qd8fq5ujh8lyxdx.matchNode,editor),canApply:$_eqpqvr6jh8lyw3s.curry($_8qd8fq5ujh8lyxdx.canApply,editor),formatChanged:$_eqpqvr6jh8lyw3s.curry($_cpfal560jh8lyxeu_formatChanged,editor,formatChangeState),getCssText:$_eqpqvr6jh8lyw3s.curry($_fwiqkm63jh8lyxf5_getCssText,editor)}}var baseMerge=function(merger){return function(){for(var objects=new Array(arguments.length),i=0;i<objects.length;i++)objects[i]=arguments[i];if(0===objects.length)throw new Error("Can't merge zero objects");for(var ret={},j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject)curObject.hasOwnProperty(key)&&(ret[key]=merger(ret[key],curObject[key]))}return ret}},deepMerge=baseMerge(function(old,nu){return $_dp4g6d7jh8lyw3y.isObject(old)&&$_dp4g6d7jh8lyw3y.isObject(nu)?deepMerge(old,nu):nu}),merge=baseMerge(function(old,nu){return nu}),$_7ffry568jh8lyxfy={deepMerge:deepMerge,merge:merge},$_834niu69jh8lyxg1={register:function(htmlParser,settings,dom){htmlParser.addAttributeFilter("data-mce-tabindex",function(nodes,name){for(var node,i=nodes.length;i--;)(node=nodes[i]).attr("tabindex",node.attributes.map["data-mce-tabindex"]),node.attr(name,null)}),htmlParser.addAttributeFilter("src,href,style",function(nodes,name){for(var node,value,i=nodes.length,internalName="data-mce-"+name,urlConverter=settings.url_converter,urlConverterScope=settings.url_converter_scope;i--;)void 0!==(value=(node=nodes[i]).attributes.map[internalName])?(node.attr(name,0<value.length?value:null),node.attr(internalName,null)):(value=node.attributes.map[name],"style"===name?value=dom.serializeStyle(dom.parseStyle(value),node.name):urlConverter&&(value=urlConverter.call(urlConverterScope,value,name,node.name)),node.attr(name,0<value.length?value:null))}),htmlParser.addAttributeFilter("class",function(nodes){for(var node,value,i=nodes.length;i--;)(value=(node=nodes[i]).attr("class"))&&(value=node.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),node.attr("class",0<value.length?value:null))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes,name,args){for(var node,i=nodes.length;i--;)"bookmark"!==(node=nodes[i]).attributes.map["data-mce-type"]||args.cleanup||node.remove()}),htmlParser.addNodeFilter("noscript",function(nodes){for(var node,i=nodes.length;i--;)(node=nodes[i].firstChild)&&(node.value=$_gex7a11rjh8lywi4.decode(node.value))}),htmlParser.addNodeFilter("script,style",function(nodes,name){for(var node,value,type,i=nodes.length,trim=function(value){return value.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")};i--;)value=(node=nodes[i]).firstChild?node.firstChild.value:"","script"===name?((type=node.attr("type"))&&node.attr("type","mce-no/type"===type?null:type.replace(/^mce\-/,"")),"xhtml"===settings.element_format&&0<value.length&&(node.firstChild.value="// <![CDATA[\n"+trim(value)+"\n// ]]>")):"xhtml"===settings.element_format&&0<value.length&&(node.firstChild.value="\x3c!--\n"+trim(value)+"\n--\x3e")}),htmlParser.addNodeFilter("#comment",function(nodes){for(var node,i=nodes.length;i--;)0===(node=nodes[i]).value.indexOf("[CDATA[")?(node.name="#cdata",node.type=4,node.value=node.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===node.value.indexOf("mce:protected ")&&(node.name="#text",node.type=3,node.raw=!0,node.value=unescape(node.value).substr(14))}),htmlParser.addNodeFilter("xml:namespace,input",function(nodes,name){for(var node,i=nodes.length;i--;)7===(node=nodes[i]).type?node.remove():1===node.type&&("input"!==name||"type"in node.attributes.map||node.attr("type","text"))}),htmlParser.addAttributeFilter("data-mce-type",function(nodes){$_5wjzy24jh8lyw2t.each(nodes,function(node){"format-caret"===node.attr("data-mce-type")&&(node.isEmpty(htmlParser.schema.getNonEmptyElements())?node.remove():node.unwrap())})}),htmlParser.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)})},trimTrailingBr:function(rootNode){var brNode1,brNode2,isBr=function(node){return node&&"br"===node.name};isBr(brNode1=rootNode.lastChild)&&isBr(brNode2=brNode1.prev)&&(brNode1.remove(),brNode2.remove())}},$_gg1aca6ajh8lyxg7={process:function(editor,node,args){return function(editor,args){return editor&&editor.hasEventListeners("PreProcess")&&!args.no_events}(editor,args)?function(editor,node,args){var impl,doc,oldDoc,dom=editor.dom;return node=node.cloneNode(!0),(impl=document.implementation).createHTMLDocument&&(doc=impl.createHTMLDocument(""),$_ahowuxkjh8lywbj.each("BODY"===node.nodeName?node.childNodes:[node],function(node){doc.body.appendChild(doc.importNode(node,!0))}),node="BODY"!==node.nodeName?doc.body.firstChild:doc.body,oldDoc=dom.doc,dom.doc=doc),$_a4fgrn4cjh8lyx4q_firePreProcess(editor,$_7ffry568jh8lyxfy.merge(args,{node:node})),oldDoc&&(dom.doc=oldDoc),node}(editor,node,args):node}},addFontToSpansFilter=function(domParser,styles,fontSizes){domParser.addNodeFilter("font",function(nodes){$_5wjzy24jh8lyw2t.each(nodes,function(node){var props=styles.parse(node.attr("style")),color=node.attr("color"),face=node.attr("face"),size=node.attr("size");color&&(props.color=color),face&&(props["font-family"]=face),size&&(props["font-size"]=fontSizes[parseInt(node.attr("size"),10)-1]),node.name="span",node.attr("style",styles.serialize(props)),function(node,names){$_5wjzy24jh8lyw2t.each(names,function(name){node.attr(name,null)})}(node,["color","face","size"])})})},addFilters=function(domParser,settings){var styles=Styles();settings.convert_fonts_to_spans&&addFontToSpansFilter(domParser,styles,$_ahowuxkjh8lywbj.explode(settings.font_size_legacy_values)),function(domParser,styles){domParser.addNodeFilter("strike",function(nodes){$_5wjzy24jh8lyw2t.each(nodes,function(node){var props=styles.parse(node.attr("style"));props["text-decoration"]="line-through",node.name="span",node.attr("style",styles.serialize(props))})})}(domParser,styles)},$_9ewhzh6cjh8lyxgp={register:function(domParser,settings){settings.inline_styles&&addFilters(domParser,settings)}},whiteSpaceRegExp$3=/^[ \t\r\n]*$/,typeLookup={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},walk$3=function(node,root,prev){var sibling,parent,startName=prev?"lastChild":"firstChild",siblingName=prev?"prev":"next";if(node[startName])return node[startName];if(node!==root){if(sibling=node[siblingName])return sibling;for(parent=node.parent;parent&&parent!==root;parent=parent.parent)if(sibling=parent[siblingName])return sibling}},Node$2=function(){function Node(name,type){this.name=name,1===(this.type=type)&&(this.attributes=[],this.attributes.map={})}return Node.create=function(name,attrs){var node,attrName;if(node=new Node(name,typeLookup[name]||1),attrs)for(attrName in attrs)node.attr(attrName,attrs[attrName]);return node},Node.prototype.replace=function(node){return node.parent&&node.remove(),this.insert(node,this),this.remove(),this},Node.prototype.attr=function(name,value){var attrs,i;if("string"!=typeof name){for(i in name)this.attr(i,name[i]);return this}if(attrs=this.attributes){if(void 0===value)return attrs.map[name];if(null===value){if(name in attrs.map)for(delete attrs.map[name],i=attrs.length;i--;)if(attrs[i].name===name)return attrs=attrs.splice(i,1),this;return this}if(name in attrs.map){for(i=attrs.length;i--;)if(attrs[i].name===name){attrs[i].value=value;break}}else attrs.push({name:name,value:value});return attrs.map[name]=value,this}},Node.prototype.clone=function(){var i,l,selfAttrs,selfAttr,cloneAttrs,clone=new Node(this.name,this.type);if(selfAttrs=this.attributes){for((cloneAttrs=[]).map={},i=0,l=selfAttrs.length;i<l;i++)"id"!==(selfAttr=selfAttrs[i]).name&&(cloneAttrs[cloneAttrs.length]={name:selfAttr.name,value:selfAttr.value},cloneAttrs.map[selfAttr.name]=selfAttr.value);clone.attributes=cloneAttrs}return clone.value=this.value,clone.shortEnded=this.shortEnded,clone},Node.prototype.wrap=function(wrapper){return this.parent.insert(wrapper,this),wrapper.append(this),this},Node.prototype.unwrap=function(){var node,next;for(node=this.firstChild;node;)next=node.next,this.insert(node,this,!0),node=next;this.remove()},Node.prototype.remove=function(){var parent=this.parent,next=this.next,prev=this.prev;return parent&&(parent.firstChild===this?(parent.firstChild=next)&&(next.prev=null):prev.next=next,parent.lastChild===this?(parent.lastChild=prev)&&(prev.next=null):next.prev=prev,this.parent=this.next=this.prev=null),this},Node.prototype.append=function(node){var last;return node.parent&&node.remove(),last=this.lastChild,this.lastChild=last?((last.next=node).prev=last,node):this.firstChild=node,node.parent=this,node},Node.prototype.insert=function(node,refNode,before){var parent;return node.parent&&node.remove(),parent=refNode.parent||this,before?(refNode===parent.firstChild?parent.firstChild=node:refNode.prev.next=node,node.prev=refNode.prev,(node.next=refNode).prev=node):(refNode===parent.lastChild?parent.lastChild=node:refNode.next.prev=node,node.next=refNode.next,(node.prev=refNode).next=node),node.parent=parent,node},Node.prototype.getAll=function(name){var node,collection=[];for(node=this.firstChild;node;node=walk$3(node,this))node.name===name&&collection.push(node);return collection},Node.prototype.empty=function(){var nodes,i,node;if(this.firstChild){for(nodes=[],node=this.firstChild;node;node=walk$3(node,this))nodes.push(node);for(i=nodes.length;i--;)(node=nodes[i]).parent=node.firstChild=node.lastChild=node.next=node.prev=null}return this.firstChild=this.lastChild=null,this},Node.prototype.isEmpty=function(elements,whitespace,predicate){var i,name,node=this.firstChild;if(whitespace=whitespace||{},node)do{if(1===node.type){if(node.attributes.map["data-mce-bogus"])continue;if(elements[node.name])return!1;for(i=node.attributes.length;i--;)if("name"===(name=node.attributes[i].name)||0===name.indexOf("data-mce-bookmark"))return!1}if(8===node.type)return!1;if(3===node.type&&!whiteSpaceRegExp$3.test(node.value))return!1;if(3===node.type&&node.parent&&whitespace[node.parent.name]&&whiteSpaceRegExp$3.test(node.value))return!1;if(predicate&&predicate(node))return!1}while(node=walk$3(node,this));return!0},Node.prototype.walk=function(prev){return walk$3(this,null,prev)},Node}(),paddEmptyNode=function(settings,args,blockElements,node){(settings.padd_empty_with_br||args.insert)&&blockElements[node.name]?node.empty().append(new Node$2("br",1)).shortEnded=!0:node.empty().append(new Node$2("#text",3)).value=" "},isPaddedWithNbsp=function(node){return hasOnlyChild(node,"#text")&&" "===node.firstChild.value},hasOnlyChild=function(node,name){return node&&node.firstChild&&node.firstChild===node.lastChild&&node.firstChild.name===name},isEmpty$2=function(schema,nonEmptyElements,whitespaceElements,node){return node.isEmpty(nonEmptyElements,whitespaceElements,function(node){return function(schema,node){var rule=schema.getElementRule(node.name);return rule&&rule.paddEmpty}(schema,node)})},isLineBreakNode=function(node,blockElements){return node&&(blockElements[node.name]||"br"===node.name)},register$2=function(parser,settings){var schema=parser.schema;settings.remove_trailing_brs&&parser.addNodeFilter("br",function(nodes,_,args){var i,node,parent,lastParent,prev,prevName,elementRule,textNode,l=nodes.length,blockElements=$_ahowuxkjh8lywbj.extend({},schema.getBlockElements()),nonEmptyElements=schema.getNonEmptyElements(),whiteSpaceElements=schema.getNonEmptyElements();for(blockElements.body=1,i=0;i<l;i++)if(parent=(node=nodes[i]).parent,blockElements[node.parent.name]&&node===parent.lastChild){for(prev=node.prev;prev;){if("span"!==(prevName=prev.name)||"bookmark"!==prev.attr("data-mce-type")){if("br"!==prevName)break;if("br"===prevName){node=null;break}}prev=prev.prev}node&&(node.remove(),isEmpty$2(schema,nonEmptyElements,whiteSpaceElements,parent)&&(elementRule=schema.getElementRule(parent.name))&&(elementRule.removeEmpty?parent.remove():elementRule.paddEmpty&&paddEmptyNode(settings,args,blockElements,parent)))}else{for(lastParent=node;parent&&parent.firstChild===lastParent&&parent.lastChild===lastParent&&!blockElements[(lastParent=parent).name];)parent=parent.parent;lastParent===parent&&!0!==settings.padd_empty_with_br&&((textNode=new Node$2("#text",3)).value=" ",node.replace(textNode))}}),parser.addAttributeFilter("href",function(nodes){var node,rel,newRel,i=nodes.length;if(!settings.allow_unsafe_link_target)for(;i--;)"a"===(node=nodes[i]).name&&"_blank"===node.attr("target")&&node.attr("rel",(rel=node.attr("rel"),newRel=rel?$_ahowuxkjh8lywbj.trim(rel):"",/\b(noopener)\b/g.test(newRel)?newRel:function(rel){return rel.split(" ").filter(function(p){return 0<p.length}).concat(["noopener"]).sort().join(" ")}(newRel)))}),settings.allow_html_in_named_anchor||parser.addAttributeFilter("id,name",function(nodes){for(var sibling,prevSibling,parent,node,i=nodes.length;i--;)if("a"===(node=nodes[i]).name&&node.firstChild&&!node.attr("href"))for(parent=node.parent,sibling=node.lastChild;prevSibling=sibling.prev,parent.insert(sibling,node),sibling=prevSibling;);}),settings.fix_list_elements&&parser.addNodeFilter("ul,ol",function(nodes){for(var node,parentNode,i=nodes.length;i--;)if("ul"===(parentNode=(node=nodes[i]).parent).name||"ol"===parentNode.name)if(node.prev&&"li"===node.prev.name)node.prev.append(node);else{var li=new Node$2("li",1);li.attr("style","list-style-type: none"),node.wrap(li)}}),settings.validate&&schema.getValidClasses()&&parser.addAttributeFilter("class",function(nodes){for(var node,classList,ci,className,classValue,validClassesMap,valid,i=nodes.length,validClasses=schema.getValidClasses();i--;){for(classList=(node=nodes[i]).attr("class").split(" "),classValue="",ci=0;ci<classList.length;ci++)className=classList[ci],valid=!1,(validClassesMap=validClasses["*"])&&validClassesMap[className]&&(valid=!0),validClassesMap=validClasses[node.name],!valid&&validClassesMap&&validClassesMap[className]&&(valid=!0),valid&&(classValue&&(classValue+=" "),classValue+=className);classValue.length||(classValue=null),node.attr("class",classValue)}})},makeMap$4=$_ahowuxkjh8lywbj.makeMap,each$18=$_ahowuxkjh8lywbj.each,explode$3=$_ahowuxkjh8lywbj.explode,extend$3=$_ahowuxkjh8lywbj.extend;function DomParser(settings,schema){void 0===schema&&(schema=Schema());var nodeFilters={},attributeFilters=[],matchedNodes={},matchedAttributes={};(settings=settings||{}).validate=!("validate"in settings)||settings.validate,settings.root_name=settings.root_name||"body";var filterNode=function(node){var i,name,list;name in nodeFilters&&((list=matchedNodes[name])?list.push(node):matchedNodes[name]=[node]),i=attributeFilters.length;for(;i--;)(name=attributeFilters[i].name)in node.attributes.map&&((list=matchedAttributes[name])?list.push(node):matchedAttributes[name]=[node]);return node},exports={schema:schema,addAttributeFilter:function(name,callback){each$18(explode$3(name),function(name){var i;for(i=0;i<attributeFilters.length;i++)if(attributeFilters[i].name===name)return void attributeFilters[i].callbacks.push(callback);attributeFilters.push({name:name,callbacks:[callback]})})},getAttributeFilters:function(){return[].concat(attributeFilters)},addNodeFilter:function(name,callback){each$18(explode$3(name),function(name){var list=nodeFilters[name];list||(nodeFilters[name]=list=[]),list.push(callback)})},getNodeFilters:function(){var out=[];for(var name_1 in nodeFilters)nodeFilters.hasOwnProperty(name_1)&&out.push({name:name_1,callbacks:nodeFilters[name_1]});return out},filterNode:filterNode,parse:function(html,args){var parser,nodes,i,l,fi,fl,list,name,blockElements,isInWhiteSpacePreservedElement,node,invalidChildren=[];args=args||{},matchedNodes={},matchedAttributes={},blockElements=extend$3(makeMap$4("script,style,head,html,body,title,meta,param"),schema.getBlockElements());var nonEmptyElements=schema.getNonEmptyElements(),children=schema.children,validate=settings.validate,rootBlockName="forced_root_block"in args?args.forced_root_block:settings.forced_root_block,whiteSpaceElements=schema.getWhiteSpaceElements(),startWhiteSpaceRegExp=/^[ \t\r\n]+/,endWhiteSpaceRegExp=/[ \t\r\n]+$/,allWhiteSpaceRegExp=/[ \t\r\n]+/g,isAllWhiteSpaceRegExp=/^[ \t\r\n]+$/;isInWhiteSpacePreservedElement=whiteSpaceElements.hasOwnProperty(args.context)||whiteSpaceElements.hasOwnProperty(settings.root_name);var createNode=function(name,type){var list,node=new Node$2(name,type);return name in nodeFilters&&((list=matchedNodes[name])?list.push(node):matchedNodes[name]=[node]),node},removeWhitespaceBefore=function(node){var textNode,textNodeNext,textVal,sibling,blockElements=schema.getBlockElements();for(textNode=node.prev;textNode&&3===textNode.type;){if(0<(textVal=textNode.value.replace(endWhiteSpaceRegExp,"")).length)return void(textNode.value=textVal);if(textNodeNext=textNode.next){if(3===textNodeNext.type&&textNodeNext.value.length){textNode=textNode.prev;continue}if(!blockElements[textNodeNext.name]&&"script"!==textNodeNext.name&&"style"!==textNodeNext.name){textNode=textNode.prev;continue}}sibling=textNode.prev,textNode.remove(),textNode=sibling}};parser=SaxParser$1({validate:validate,allow_script_urls:settings.allow_script_urls,allow_conditional_comments:settings.allow_conditional_comments,self_closing_elements:function(input){var name,output={};for(name in input)"li"!==name&&"p"!==name&&(output[name]=input[name]);return output}(schema.getSelfClosingElements()),cdata:function(text){node.append(createNode("#cdata",4)).value=text},text:function(text,raw){var textNode;isInWhiteSpacePreservedElement||(text=text.replace(allWhiteSpaceRegExp," "),isLineBreakNode(node.lastChild,blockElements)&&(text=text.replace(startWhiteSpaceRegExp,""))),0!==text.length&&((textNode=createNode("#text",3)).raw=!!raw,node.append(textNode).value=text)},comment:function(text){node.append(createNode("#comment",8)).value=text},pi:function(name,text){node.append(createNode(name,7)).value=text,removeWhitespaceBefore(node)},doctype:function(text){node.append(createNode("#doctype",10)).value=text,removeWhitespaceBefore(node)},start:function(name,attrs,empty){var newNode,attrFiltersLen,elementRule,attrName,parent;if(elementRule=validate?schema.getElementRule(name):{}){for((newNode=createNode(elementRule.outputName||name,1)).attributes=attrs,newNode.shortEnded=empty,node.append(newNode),(parent=children[node.name])&&children[newNode.name]&&!parent[newNode.name]&&invalidChildren.push(newNode),attrFiltersLen=attributeFilters.length;attrFiltersLen--;)(attrName=attributeFilters[attrFiltersLen].name)in attrs.map&&((list=matchedAttributes[attrName])?list.push(newNode):matchedAttributes[attrName]=[newNode]);blockElements[name]&&removeWhitespaceBefore(newNode),empty||(node=newNode),!isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!0)}},end:function(name){var textNode,elementRule,text,sibling,tempNode;if(elementRule=validate?schema.getElementRule(name):{}){if(blockElements[name]&&!isInWhiteSpacePreservedElement){if((textNode=node.firstChild)&&3===textNode.type)if(0<(text=textNode.value.replace(startWhiteSpaceRegExp,"")).length)textNode.value=text,textNode=textNode.next;else for(sibling=textNode.next,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.next,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling;if((textNode=node.lastChild)&&3===textNode.type)if(0<(text=textNode.value.replace(endWhiteSpaceRegExp,"")).length)textNode.value=text,textNode=textNode.prev;else for(sibling=textNode.prev,textNode.remove(),textNode=sibling;textNode&&3===textNode.type;)text=textNode.value,sibling=textNode.prev,(0===text.length||isAllWhiteSpaceRegExp.test(text))&&(textNode.remove(),textNode=sibling),textNode=sibling}if(isInWhiteSpacePreservedElement&&whiteSpaceElements[name]&&(isInWhiteSpacePreservedElement=!1),elementRule.removeEmpty&&isEmpty$2(schema,nonEmptyElements,whiteSpaceElements,node)&&!node.attributes.map.name&&!node.attr("id"))return tempNode=node.parent,blockElements[node.name]?node.empty().remove():node.unwrap(),void(node=tempNode);elementRule.paddEmpty&&(isPaddedWithNbsp(node)||isEmpty$2(schema,nonEmptyElements,whiteSpaceElements,node))&&paddEmptyNode(settings,args,blockElements,node),node=node.parent}}},schema);var rootNode=node=new Node$2(args.context||settings.root_name,11);if(parser.parse(html),validate&&invalidChildren.length&&(args.context?args.invalid=!0:function(nodes){var ni,node,parent,parents,newParent,currentNode,tempNode,childNode,i,nonEmptyElements,whitespaceElements,nonSplitableElements,textBlockElements,specialElements,sibling,nextNode;for(nonSplitableElements=makeMap$4("tr,td,th,tbody,thead,tfoot,table"),nonEmptyElements=schema.getNonEmptyElements(),whitespaceElements=schema.getWhiteSpaceElements(),textBlockElements=schema.getTextBlockElements(),specialElements=schema.getSpecialElements(),ni=0;ni<nodes.length;ni++)if((node=nodes[ni]).parent&&!node.fixed)if(textBlockElements[node.name]&&"li"===node.parent.name){for(sibling=node.next;sibling&&textBlockElements[sibling.name];)sibling.name="li",sibling.fixed=!0,node.parent.insert(sibling,node.parent),sibling=sibling.next;node.unwrap(node)}else{for(parents=[node],parent=node.parent;parent&&!schema.isValidChild(parent.name,node.name)&&!nonSplitableElements[parent.name];parent=parent.parent)parents.push(parent);if(parent&&1<parents.length){for(parents.reverse(),newParent=currentNode=filterNode(parents[0].clone()),i=0;i<parents.length-1;i++){for(schema.isValidChild(currentNode.name,parents[i].name)?(tempNode=filterNode(parents[i].clone()),currentNode.append(tempNode)):tempNode=currentNode,childNode=parents[i].firstChild;childNode&&childNode!==parents[i+1];)nextNode=childNode.next,tempNode.append(childNode),childNode=nextNode;currentNode=tempNode}isEmpty$2(schema,nonEmptyElements,whitespaceElements,newParent)?parent.insert(node,parents[0],!0):(parent.insert(newParent,parents[0],!0),parent.insert(node,newParent)),parent=parents[0],(isEmpty$2(schema,nonEmptyElements,whitespaceElements,parent)||hasOnlyChild(parent,"br"))&&parent.empty().remove()}else if(node.parent){if("li"===node.name){if((sibling=node.prev)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.append(node);continue}if((sibling=node.next)&&("ul"===sibling.name||"ul"===sibling.name)){sibling.insert(node,sibling.firstChild,!0);continue}node.wrap(filterNode(new Node$2("ul",1)));continue}schema.isValidChild(node.parent.name,"div")&&schema.isValidChild("div",node.name)?node.wrap(filterNode(new Node$2("div",1))):specialElements[node.name]?node.empty().remove():node.unwrap()}}}(invalidChildren)),rootBlockName&&("body"===rootNode.name||args.isRootContent)&&function(){var next,rootBlockNode,node=rootNode.firstChild,trim=function(rootBlockNode){rootBlockNode&&((node=rootBlockNode.firstChild)&&3===node.type&&(node.value=node.value.replace(startWhiteSpaceRegExp,"")),(node=rootBlockNode.lastChild)&&3===node.type&&(node.value=node.value.replace(endWhiteSpaceRegExp,"")))};if(schema.isValidChild(rootNode.name,rootBlockName.toLowerCase())){for(;node;)next=node.next,3===node.type||1===node.type&&"p"!==node.name&&!blockElements[node.name]&&!node.attr("data-mce-type")?(rootBlockNode||((rootBlockNode=createNode(rootBlockName,1)).attr(settings.forced_root_block_attrs),rootNode.insert(rootBlockNode,node)),rootBlockNode.append(node)):(trim(rootBlockNode),rootBlockNode=null),node=next;trim(rootBlockNode)}}(),!args.invalid){for(name in matchedNodes){for(list=nodeFilters[name],fi=(nodes=matchedNodes[name]).length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(i=0,l=list.length;i<l;i++)list[i](nodes,name,args)}for(i=0,l=attributeFilters.length;i<l;i++)if((list=attributeFilters[i]).name in matchedAttributes){for(fi=(nodes=matchedAttributes[list.name]).length;fi--;)nodes[fi].parent||nodes.splice(fi,1);for(fi=0,fl=list.callbacks.length;fi<fl;fi++)list.callbacks[fi](nodes,list.name,args)}}return rootNode}};return register$2(exports,settings),$_9ewhzh6cjh8lyxgp.register(exports,settings),exports}var addTempAttr=function(htmlParser,tempAttrs,name){-1===$_ahowuxkjh8lywbj.inArray(tempAttrs,name)&&(htmlParser.addAttributeFilter(name,function(nodes,name){for(var i=nodes.length;i--;)nodes[i].attr(name,null)}),tempAttrs.push(name))},getHtmlFromNode=function(dom,node,args){var html=$_d383mr21jh8lywlv_trim(args.getInner?node.innerHTML:dom.getOuterHTML(node));return args.selection||isWsPreserveElement($_cgttw3zjh8lywdq.fromDom(node))?html:$_ahowuxkjh8lywbj.trim(html)},parseHtml=function(htmlParser,html,args){var parserArgs=args.selection?$_7ffry568jh8lyxfy.merge({forced_root_block:!1},args):args,rootNode=htmlParser.parse(html,parserArgs);return $_834niu69jh8lyxg1.trimTrailingBr(rootNode),rootNode},toHtml=function(editor,settings,schema,rootNode,args){return function(editor,args,content){return args.no_events||!editor?content:$_a4fgrn4cjh8lyx4q_firePostProcess(editor,$_7ffry568jh8lyxfy.merge(args,{content:content})).content}(editor,args,function(settings,schema,node){return HtmlSerializer(settings,schema).serialize(node)}(settings,schema,rootNode))};function DomSerializer$1(settings,editor){var domSerializer=function(settings,editor){var dom,schema,htmlParser,tempAttrs=["data-mce-selected"];return dom=editor&&editor.dom?editor.dom:DOMUtils$1.DOM,schema=editor&&editor.schema?editor.schema:Schema(settings),settings.entity_encoding=settings.entity_encoding||"named",settings.remove_trailing_brs=!("remove_trailing_brs"in settings)||settings.remove_trailing_brs,htmlParser=DomParser(settings,schema),$_834niu69jh8lyxg1.register(htmlParser,settings,dom),{schema:schema,addNodeFilter:htmlParser.addNodeFilter,addAttributeFilter:htmlParser.addAttributeFilter,serialize:function(node,parserArgs){var args=$_7ffry568jh8lyxfy.merge({format:"html"},parserArgs||{}),targetNode=$_gg1aca6ajh8lyxg7.process(editor,node,args),html=getHtmlFromNode(dom,targetNode,args),rootNode=parseHtml(htmlParser,html,args);return"tree"===args.format?rootNode:toHtml(editor,settings,schema,rootNode,args)},addRules:function(rules){schema.addValidElements(rules)},setRules:function(rules){schema.setValidElements(rules)},addTempAttr:$_eqpqvr6jh8lyw3s.curry(addTempAttr,htmlParser,tempAttrs),getTempAttrs:function(){return tempAttrs}}}(settings,editor);return{schema:domSerializer.schema,addNodeFilter:domSerializer.addNodeFilter,addAttributeFilter:domSerializer.addAttributeFilter,serialize:domSerializer.serialize,addRules:domSerializer.addRules,setRules:domSerializer.setRules,addTempAttr:domSerializer.addTempAttr,getTempAttrs:domSerializer.getTempAttrs}}function BookmarkManager(selection){return{getBookmark:$_eqpqvr6jh8lyw3s.curry($_eyp5ec2njh8lywpo_getBookmark,selection),moveToBookmark:$_eqpqvr6jh8lyw3s.curry($_eyp5ec2njh8lywpo_moveToBookmark,selection)}}!function(BookmarkManager){BookmarkManager.isBookmarkNode=$_eyp5ec2njh8lywpo_isBookmarkNode}(BookmarkManager||(BookmarkManager={}));var BookmarkManager$1=BookmarkManager,isContentEditableFalse$10=$_5oonaz1qjh8lywhz.isContentEditableFalse,isContentEditableTrue$6=$_5oonaz1qjh8lywhz.isContentEditableTrue,ControlSelection=function(selection,editor){var selectedElm,selectedElmGhost,resizeHelper,resizeHandles,selectedHandle,startX,startY,selectedElmX,selectedElmY,startW,startH,ratio,resizeStarted,width,height,startScrollWidth,startScrollHeight,dom=editor.dom,each=$_ahowuxkjh8lywbj.each,editableDoc=editor.getDoc(),rootDocument=document,abs=Math.abs,round=Math.round,rootElement=editor.getBody();resizeHandles={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var rootClass=".mce-content-body";editor.contentStyles.push(rootClass+" div.mce-resizehandle {position: absolute;border: 1px solid black;box-sizing: content-box;background: #FFF;width: 7px;height: 7px;z-index: 10000}"+rootClass+" .mce-resizehandle:hover {background: #000}"+rootClass+" img[data-mce-selected],"+rootClass+" hr[data-mce-selected] {outline: 1px solid black;resize: none}"+rootClass+" .mce-clonedresizable {position: absolute;"+($_9bpim8ajh8lyw68.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+rootClass+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}");var isImage=function(elm){return elm&&("IMG"===elm.nodeName||editor.dom.is(elm,"figure.image"))},contextMenuSelectImage=function(evt){var target=evt.target;(function(evt,range){return isImage(evt.target)&&!$_3kj84i5djh8lyxan_isXYWithinRange(evt.clientX,evt.clientY,range)})(evt,editor.selection.getRng())&&!evt.isDefaultPrevented()&&(evt.preventDefault(),editor.selection.select(target))},getResizeTarget=function(elm){return editor.dom.is(elm,"figure.image")?elm.querySelector("img"):elm},isResizable=function(elm){var selector=editor.settings.object_resizing;return!1!==selector&&!$_9bpim8ajh8lyw68.iOS&&("string"!=typeof selector&&(selector="table,img,figure.image,div"),"false"!==elm.getAttribute("data-mce-resize")&&elm!==editor.getBody()&&$_5h4ipt1fjh8lywgi.is($_cgttw3zjh8lywdq.fromDom(elm),selector))},resizeGhostElement=function(e){var deltaX,deltaY,resizeHelperX,resizeHelperY;deltaX=e.screenX-startX,deltaY=e.screenY-startY,width=deltaX*selectedHandle[2]+startW,height=deltaY*selectedHandle[3]+startH,width=width<5?5:width,height=height<5?5:height,(isImage(selectedElm)&&!1!==editor.settings.resize_img_proportional?!$_6lsk4i5gjh8lyxau.modifierPressed(e):$_6lsk4i5gjh8lyxau.modifierPressed(e)||isImage(selectedElm)&&selectedHandle[2]*selectedHandle[3]!=0)&&(abs(deltaX)>abs(deltaY)?(height=round(width*ratio),width=round(height/ratio)):(width=round(height/ratio),height=round(width*ratio))),dom.setStyles(getResizeTarget(selectedElmGhost),{width:width,height:height}),resizeHelperX=0<(resizeHelperX=selectedHandle.startPos.x+deltaX)?resizeHelperX:0,resizeHelperY=0<(resizeHelperY=selectedHandle.startPos.y+deltaY)?resizeHelperY:0,dom.setStyles(resizeHelper,{left:resizeHelperX,top:resizeHelperY,display:"block"}),resizeHelper.innerHTML=width+" &times; "+height,selectedHandle[2]<0&&selectedElmGhost.clientWidth<=width&&dom.setStyle(selectedElmGhost,"left",selectedElmX+(startW-width)),selectedHandle[3]<0&&selectedElmGhost.clientHeight<=height&&dom.setStyle(selectedElmGhost,"top",selectedElmY+(startH-height)),(deltaX=rootElement.scrollWidth-startScrollWidth)+(deltaY=rootElement.scrollHeight-startScrollHeight)!=0&&dom.setStyles(resizeHelper,{left:resizeHelperX-deltaX,top:resizeHelperY-deltaY}),resizeStarted||($_a4fgrn4cjh8lyx4q_fireObjectResizeStart(editor,selectedElm,startW,startH),resizeStarted=!0)},endGhostResize=function(){resizeStarted=!1;var setSizeProp=function(name,value){value&&(selectedElm.style[name]||!editor.schema.isValid(selectedElm.nodeName.toLowerCase(),name)?dom.setStyle(getResizeTarget(selectedElm),name,value):dom.setAttrib(getResizeTarget(selectedElm),name,value))};setSizeProp("width",width),setSizeProp("height",height),dom.unbind(editableDoc,"mousemove",resizeGhostElement),dom.unbind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.unbind(rootDocument,"mousemove",resizeGhostElement),dom.unbind(rootDocument,"mouseup",endGhostResize)),dom.remove(selectedElmGhost),dom.remove(resizeHelper),showResizeRect(selectedElm),$_a4fgrn4cjh8lyx4q_fireObjectResized(editor,selectedElm,width,height),dom.setAttrib(selectedElm,"style",dom.getAttrib(selectedElm,"style")),editor.nodeChanged()},showResizeRect=function(targetElm){var position,targetWidth,targetHeight,e,rect;hideResizeRect(),unbindResizeHandleEvents(),position=dom.getPos(targetElm,rootElement),selectedElmX=position.x,selectedElmY=position.y,rect=targetElm.getBoundingClientRect(),targetWidth=rect.width||rect.right-rect.left,targetHeight=rect.height||rect.bottom-rect.top,selectedElm!==targetElm&&(selectedElm=targetElm,width=height=0),e=editor.fire("ObjectSelected",{target:targetElm}),isResizable(targetElm)&&!e.isDefaultPrevented()?each(resizeHandles,function(handle,name){var handleElm;(handleElm=dom.get("mceResizeHandle"+name))&&dom.remove(handleElm),handleElm=dom.add(rootElement,"div",{id:"mceResizeHandle"+name,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+name+"-resize; margin:0; padding:0"}),11===$_9bpim8ajh8lyw68.ie&&(handleElm.contentEditable=!1),dom.bind(handleElm,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),function(e){startX=e.screenX,startY=e.screenY,startW=getResizeTarget(selectedElm).clientWidth,startH=getResizeTarget(selectedElm).clientHeight,ratio=startH/startW,(selectedHandle=handle).startPos={x:targetWidth*handle[0]+selectedElmX,y:targetHeight*handle[1]+selectedElmY},startScrollWidth=rootElement.scrollWidth,startScrollHeight=rootElement.scrollHeight,selectedElmGhost=selectedElm.cloneNode(!0),dom.addClass(selectedElmGhost,"mce-clonedresizable"),dom.setAttrib(selectedElmGhost,"data-mce-bogus","all"),selectedElmGhost.contentEditable=!1,selectedElmGhost.unSelectabe=!0,dom.setStyles(selectedElmGhost,{left:selectedElmX,top:selectedElmY,margin:0}),selectedElmGhost.removeAttribute("data-mce-selected"),rootElement.appendChild(selectedElmGhost),dom.bind(editableDoc,"mousemove",resizeGhostElement),dom.bind(editableDoc,"mouseup",endGhostResize),rootDocument!==editableDoc&&(dom.bind(rootDocument,"mousemove",resizeGhostElement),dom.bind(rootDocument,"mouseup",endGhostResize)),resizeHelper=dom.add(rootElement,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},startW+" &times; "+startH)}(e)}),handle.elm=handleElm,dom.setStyles(handleElm,{left:targetWidth*handle[0]+selectedElmX-handleElm.offsetWidth/2,top:targetHeight*handle[1]+selectedElmY-handleElm.offsetHeight/2})}):hideResizeRect(),selectedElm.setAttribute("data-mce-selected","1")},hideResizeRect=function(){var name,handleElm;for(name in unbindResizeHandleEvents(),selectedElm&&selectedElm.removeAttribute("data-mce-selected"),resizeHandles)(handleElm=dom.get("mceResizeHandle"+name))&&(dom.unbind(handleElm),dom.remove(handleElm))},updateResizeRect=function(e){var controlElm,isChildOrEqual=function(node,parent){if(node)do{if(node===parent)return!0}while(node=node.parentNode)};resizeStarted||editor.removed||(each(dom.select("img[data-mce-selected],hr[data-mce-selected]"),function(img){img.removeAttribute("data-mce-selected")}),controlElm="mousedown"===e.type?e.target:selection.getNode(),isChildOrEqual(controlElm=dom.$(controlElm).closest("table,img,figure.image,hr")[0],rootElement)&&(disableGeckoResize(),isChildOrEqual(selection.getStart(!0),controlElm)&&isChildOrEqual(selection.getEnd(!0),controlElm))?showResizeRect(controlElm):hideResizeRect())},isWithinContentEditableFalse=function(elm){return isContentEditableFalse$10(function(root,node){for(;node&&node!==root;){if(isContentEditableTrue$6(node)||isContentEditableFalse$10(node))return node;node=node.parentNode}return null}(editor.getBody(),elm))},unbindResizeHandleEvents=function(){for(var name_1 in resizeHandles){var handle=resizeHandles[name_1];handle.elm&&(dom.unbind(handle.elm),delete handle.elm)}},disableGeckoResize=function(){try{editor.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(ex){}};return editor.on("init",function(){disableGeckoResize(),$_9bpim8ajh8lyw68.ie&&11<=$_9bpim8ajh8lyw68.ie&&(editor.on("mousedown click",function(e){var target=e.target,nodeName=target.nodeName;resizeStarted||!/^(TABLE|IMG|HR)$/.test(nodeName)||isWithinContentEditableFalse(target)||(2!==e.button&&editor.selection.select(target,"TABLE"===nodeName),"mousedown"===e.type&&editor.nodeChanged())}),editor.dom.bind(rootElement,"mscontrolselect",function(e){var delayedSelect=function(node){$_8sy3pfhjh8lyw95.setEditorTimeout(editor,function(){editor.selection.select(node)})};if(isWithinContentEditableFalse(e.target))return e.preventDefault(),void delayedSelect(e.target);/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"===e.target.tagName&&delayedSelect(e.target))}));var throttledUpdateResizeRect=$_8sy3pfhjh8lyw95.throttle(function(e){editor.composing||updateResizeRect(e)});editor.on("nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged",throttledUpdateResizeRect),editor.on("keyup compositionend",function(e){selectedElm&&"TABLE"===selectedElm.nodeName&&throttledUpdateResizeRect(e)}),editor.on("hide blur",hideResizeRect),editor.on("contextmenu",contextMenuSelectImage)}),editor.on("remove",unbindResizeHandleEvents),{isResizable:isResizable,showResizeRect:showResizeRect,hideResizeRect:hideResizeRect,updateResizeRect:updateResizeRect,destroy:function(){selectedElm=selectedElmGhost=null}}},hasCeProperty=function(node){return $_5oonaz1qjh8lywhz.isContentEditableTrue(node)||$_5oonaz1qjh8lywhz.isContentEditableFalse(node)},$_ct0ht56jjh8lyxif_fromPoint=function(clientX,clientY,doc){var rng,point,pointDoc=doc;if(pointDoc.caretPositionFromPoint)(point=pointDoc.caretPositionFromPoint(clientX,clientY))&&((rng=doc.createRange()).setStart(point.offsetNode,point.offset),rng.collapse(!0));else if(doc.caretRangeFromPoint)rng=doc.caretRangeFromPoint(clientX,clientY);else if(pointDoc.body.createTextRange){rng=pointDoc.body.createTextRange();try{rng.moveToPoint(clientX,clientY),rng.collapse(!0)}catch(ex){rng=function(clientX,clientY,doc){var element,rng,rects;if(element=doc.elementFromPoint(clientX,clientY),rng=doc.body.createTextRange(),element&&"HTML"!==element.tagName||(element=doc.body),rng.moveToElementText(element),0<(rects=(rects=$_ahowuxkjh8lywbj.toArray(rng.getClientRects())).sort(function(a,b){return(a=Math.abs(Math.max(a.top-clientY,a.bottom-clientY)))-(b=Math.abs(Math.max(b.top-clientY,b.bottom-clientY)))})).length){clientY=(rects[0].bottom+rects[0].top)/2;try{return rng.moveToPoint(clientX,clientY),rng.collapse(!0),rng}catch(ex){}}return null}(clientX,clientY,doc)}return function(rng,rootNode){var parentElement=rng&&rng.parentElement?rng.parentElement():null;return $_5oonaz1qjh8lywhz.isContentEditableFalse(function(node,rootNode,predicate){for(;node&&node!==rootNode;){if(predicate(node))return node;node=node.parentNode}return null}(parentElement,rootNode,hasCeProperty))?null:rng}(rng,doc.body)}return rng},$_8o0eax6kjh8lyxii_processRanges=function(editor,ranges){return $_5wjzy24jh8lyw2t.map(ranges,function(range){var evt=editor.fire("GetSelectionRange",{range:range});return evt.range!==range?evt.range:range})},clone$2=function(original,deep){return $_cgttw3zjh8lywdq.fromDom(original.dom().cloneNode(deep))},deep$1=function(original){return clone$2(original,!0)},$_azl0s66njh8lyxj4_shallow=function(original){return clone$2(original,!1)},$_azl0s66njh8lyxj4_deep=deep$1,$_401op36ojh8lyxj6_fromElements=function(elements,scope){var fragment=(scope||document).createDocumentFragment();return $_5wjzy24jh8lyw2t.each(elements,function(element){fragment.appendChild(element.dom())}),$_cgttw3zjh8lywdq.fromDom(fragment)},tableModel=$_4jz0ce18jh8lywft.immutable("element","width","rows"),tableRow=$_4jz0ce18jh8lywft.immutable("element","cells"),cellPosition=$_4jz0ce18jh8lywft.immutable("x","y"),getSpan=function(td,key){var value=parseInt($_3da62i14jh8lyweo.get(td,key),10);return isNaN(value)?1:value},cellExists=function(table,x,y){var rows=table.rows();return!!(rows[y]?rows[y].cells():[])[x]},getWidth=function(rows){return $_5wjzy24jh8lyw2t.foldl(rows,function(acc,row){return row.cells().length>acc?row.cells().length:acc},0)},findElementPos=function(table,element){for(var rows=table.rows(),y=0;y<rows.length;y++)for(var cells=rows[y].cells(),x=0;x<cells.length;x++)if($_5f6gpb1djh8lywg5.eq(cells[x],element))return Option.some(cellPosition(x,y));return Option.none()},extractRows=function(table,sx,sy,ex,ey){for(var newRows=[],rows=table.rows(),y=sy;y<=ey;y++){var cells=rows[y].cells(),slice=sx<ex?cells.slice(sx,ex+1):cells.slice(ex,sx+1);newRows.push(tableRow(rows[y].element(),slice))}return newRows},$_fb3vwb6pjh8lyxjk_fromDom=function(tableElm){var table=tableModel($_azl0s66njh8lyxj4_shallow(tableElm),0,[]);return $_5wjzy24jh8lyw2t.each($_eebxu2gjh8lywp3_descendants(tableElm,"tr"),function(tr,y){$_5wjzy24jh8lyw2t.each($_eebxu2gjh8lywp3_descendants(tr,"td,th"),function(td,x){!function(table,x,y,tr,td){for(var rowspan=getSpan(td,"rowspan"),colspan=getSpan(td,"colspan"),rows=table.rows(),y2=y;y2<y+rowspan;y2++){rows[y2]||(rows[y2]=tableRow($_azl0s66njh8lyxj4_deep(tr),[]));for(var x2=x;x2<x+colspan;x2++)rows[y2].cells()[x2]=y2===y&&x2===x?td:$_azl0s66njh8lyxj4_shallow(td)}}(table,function(table,x,y){for(;cellExists(table,x,y);)x++;return x}(table,x,y),y,tr,td)})}),tableModel(table.element(),getWidth(table.rows()),table.rows())},$_fb3vwb6pjh8lyxjk_toDom=function(table){return function(table,rows){var tableElement=$_azl0s66njh8lyxj4_shallow(table.element()),tableBody=$_cgttw3zjh8lywdq.fromTag("tbody");return $_9hl8mu2vjh8lywr4_append(tableBody,rows),$_4m7u2e2kjh8lywpi.append(tableElement,tableBody),tableElement}(table,function(table){return $_5wjzy24jh8lyw2t.map(table.rows(),function(row){var cells=$_5wjzy24jh8lyw2t.map(row.cells(),function(cell){var td=$_azl0s66njh8lyxj4_deep(cell);return $_3da62i14jh8lyweo.remove(td,"colspan"),$_3da62i14jh8lyweo.remove(td,"rowspan"),td}),tr=$_azl0s66njh8lyxj4_shallow(row.element());return $_9hl8mu2vjh8lywr4_append(tr,cells),tr})}(table))},$_fb3vwb6pjh8lyxjk_subsection=function(table,startElement,endElement){return findElementPos(table,startElement).bind(function(startPos){return findElementPos(table,endElement).map(function(endPos){return function(table,startPos,endPos){var sx=startPos.x(),sy=startPos.y(),ex=endPos.x(),ey=endPos.y(),newRows=sy<ey?extractRows(table,sx,sy,ex,ey):extractRows(table,sx,ey,ex,sy);return tableModel(table.element(),getWidth(newRows),newRows)}(table,startPos,endPos)})})},getFullySelectedListWrappers=function(parents,rng){return $_5wjzy24jh8lyw2t.find(parents,function(elm){return"li"===$_7j1jt210jh8lywdx.name(elm)&&hasAllContentsSelected(elm,rng)}).fold($_eqpqvr6jh8lyw3s.constant([]),function(li){return function(parents){return $_5wjzy24jh8lyw2t.find(parents,function(elm){return"ul"===$_7j1jt210jh8lywdx.name(elm)||"ol"===$_7j1jt210jh8lywdx.name(elm)})}(parents).map(function(listCont){return[$_cgttw3zjh8lywdq.fromTag("li"),$_cgttw3zjh8lywdq.fromTag($_7j1jt210jh8lywdx.name(listCont))]}).getOr([])})},getWrapElements=function(rootNode,rng){var commonAnchorContainer=$_cgttw3zjh8lywdq.fromDom(rng.commonAncestorContainer),parents=$_dyxtub3ejh8lywxq_parentsAndSelf(commonAnchorContainer,rootNode),wrapElements=$_5wjzy24jh8lyw2t.filter(parents,function(elm){return isInline(elm)||isHeading(elm)}),listWrappers=getFullySelectedListWrappers(parents,rng),allWrappers=wrapElements.concat(listWrappers.length?listWrappers:function(commonAnchorContainer){return isListItem(commonAnchorContainer)?$_a43q0i17jh8lywfe.parent(commonAnchorContainer).filter(isList).fold($_eqpqvr6jh8lyw3s.constant([]),function(listElm){return[commonAnchorContainer,listElm]}):isList(commonAnchorContainer)?[commonAnchorContainer]:[]}(commonAnchorContainer));return $_5wjzy24jh8lyw2t.map(allWrappers,$_azl0s66njh8lyxj4_shallow)},emptyFragment=function(){return $_401op36ojh8lyxj6_fromElements([])},getFragmentFromRange=function(rootNode,rng){return innerElm=$_cgttw3zjh8lywdq.fromDom(rng.cloneContents()),elms=getWrapElements(rootNode,rng),wrapped=$_5wjzy24jh8lyw2t.foldl(elms,function(acc,elm){return $_4m7u2e2kjh8lywpi.append(elm,acc),elm},innerElm),0<elms.length?$_401op36ojh8lyxj6_fromElements([wrapped]):wrapped;var innerElm,elms,wrapped},getTableFragment=function(rootNode,selectedTableCells){return(rootElm=rootNode,cell=selectedTableCells[0],$_7sg18r3cjh8lywu1_ancestor(cell,"table",$_eqpqvr6jh8lyw3s.curry($_5f6gpb1djh8lywg5.eq,rootElm))).bind(function(tableElm){var firstCell=selectedTableCells[0],lastCell=selectedTableCells[selectedTableCells.length-1],fullTableModel=$_fb3vwb6pjh8lyxjk_fromDom(tableElm);return $_fb3vwb6pjh8lyxjk_subsection(fullTableModel,firstCell,lastCell).map(function(sectionedTableModel){return $_401op36ojh8lyxj6_fromElements([$_fb3vwb6pjh8lyxjk_toDom(sectionedTableModel)])})}).getOrThunk(emptyFragment);var rootElm,cell},$_7lffms6mjh8lyxip_read=function(rootNode,ranges){var selectedCells=$_bwjtq63tjh8lyx1g_getCellsFromElementOrRanges(ranges,rootNode);return 0<selectedCells.length?getTableFragment(rootNode,selectedCells):function(rootNode,ranges){return 0<ranges.length&&ranges[0].collapsed?emptyFragment():getFragmentFromRange(rootNode,ranges[0])}(rootNode,ranges)},$_dxvi8w6ljh8lyxik_getContent=function(editor,args){var fragment,rng=editor.selection.getRng(),tmpElm=editor.dom.create("body"),sel=editor.selection.getSel(),ranges=$_8o0eax6kjh8lyxii_processRanges(editor,$_d1o8uj3ujh8lyx1u_getRanges(sel));if((args=args||{}).get=!0,args.format=args.format||"html",args.selection=!0,(args=editor.fire("BeforeGetContent",args)).isDefaultPrevented())return editor.fire("GetContent",args),args.content;if("text"===args.format)return editor.selection.isCollapsed()?"":$_d383mr21jh8lywlv_trim(rng.text||(sel.toString?sel.toString():""));rng.cloneContents?(fragment=args.contextual?$_7lffms6mjh8lyxip_read($_cgttw3zjh8lywdq.fromDom(editor.getBody()),ranges).dom():rng.cloneContents())&&tmpElm.appendChild(fragment):void 0!==rng.item||void 0!==rng.htmlText?(tmpElm.innerHTML="<br>"+(rng.item?rng.item(0).outerHTML:rng.htmlText),tmpElm.removeChild(tmpElm.firstChild)):tmpElm.innerHTML=rng.toString(),args.getInner=!0;var content=editor.selection.serializer.serialize(tmpElm,args);return"tree"===args.format?content:(args.content=editor.selection.isCollapsed()?"":content,editor.fire("GetContent",args),args.content)},$_8s2a5k6qjh8lyxk1_setContent=function(editor,content,args){var caretNode,frag,temp,rng=editor.selection.getRng(),doc=editor.getDoc();if((args=args||{format:"html"}).set=!0,args.selection=!0,args.content=content,args.no_events||!(args=editor.fire("BeforeSetContent",args)).isDefaultPrevented()){if(content=args.content,rng.insertNode){content+='<span id="__caret">_</span>',rng.startContainer===doc&&rng.endContainer===doc?doc.body.innerHTML=content:(rng.deleteContents(),0===doc.body.childNodes.length?doc.body.innerHTML=content:rng.createContextualFragment?rng.insertNode(rng.createContextualFragment(content)):(frag=doc.createDocumentFragment(),temp=doc.createElement("div"),frag.appendChild(temp),temp.outerHTML=content,rng.insertNode(frag))),caretNode=editor.dom.get("__caret"),(rng=doc.createRange()).setStartBefore(caretNode),rng.setEndBefore(caretNode),editor.selection.setRng(rng),editor.dom.remove("__caret");try{editor.selection.setRng(rng)}catch(ex){}}else rng.item&&(doc.execCommand("Delete",!1,null),rng=editor.getRng()),/^\s+/.test(content)?(rng.pasteHTML('<span id="__mce_tmp">_</span>'+content),editor.dom.remove("__mce_tmp")):rng.pasteHTML(content);args.no_events||editor.fire("SetContent",args)}else editor.fire("SetContent",args)},getEndpointElement=function(root,rng,start,real,resolve){var container=start?rng.startContainer:rng.endContainer,offset=start?rng.startOffset:rng.endOffset;return Option.from(container).map($_cgttw3zjh8lywdq.fromDom).map(function(elm){return real&&rng.collapsed?elm:$_a43q0i17jh8lywfe.child(elm,resolve(elm,offset)).getOr(elm)}).bind(function(elm){return $_7j1jt210jh8lywdx.isElement(elm)?Option.some(elm):$_a43q0i17jh8lywfe.parent(elm)}).map(function(elm){return elm.dom()}).getOr(root)},getStart$2=function(root,rng,real){return getEndpointElement(root,rng,!0,real,function(elm,offset){return Math.min($_a43q0i17jh8lywfe.childNodesCount(elm),offset)})},getEnd=function(root,rng,real){return getEndpointElement(root,rng,!1,real,function(elm,offset){return 0<offset?offset-1:offset})},skipEmptyTextNodes=function(node,forwards){for(var orig=node;node&&$_5oonaz1qjh8lywhz.isText(node)&&0===node.length;)node=forwards?node.nextSibling:node.previousSibling;return node||orig},each$19=$_ahowuxkjh8lywbj.each,isNativeIeSelection=function(rng){return!!rng.select},isAttachedToDom=function(node){return!(!node||!node.ownerDocument)&&$_5f6gpb1djh8lywg5.contains($_cgttw3zjh8lywdq.fromDom(node.ownerDocument),$_cgttw3zjh8lywdq.fromDom(node))},Selection$1=function(dom,win,serializer,editor){var bookmarkManager,controlSelection,selectedRange,explicitRange,selectorChangedData,setContent=function(content,args){return $_8s2a5k6qjh8lyxk1_setContent(editor,content,args)},collapse=function(toStart){var rng=getRng();rng.collapse(!!toStart),setRng(rng)},getSel=function(){return win.getSelection?win.getSelection():win.document.selection},getRng=function(){var selection,rng,elm,doc,tryCompareBoundaryPoints=function(how,sourceRange,destinationRange){try{return sourceRange.compareBoundaryPoints(how,destinationRange)}catch(ex){return-1}};if(!win)return null;if(null==(doc=win.document))return null;if(void 0!==editor.bookmark&&!1===$_cnu79r4ejh8lyx4x_hasFocus(editor)){var bookmark=$_eqs11m40jh8lyx31_getRng(editor);if(bookmark.isSome())return bookmark.map(function(r){return $_8o0eax6kjh8lyxii_processRanges(editor,[r])[0]}).getOr(doc.createRange())}try{(selection=getSel())&&(rng=0<selection.rangeCount?selection.getRangeAt(0):selection.createRange?selection.createRange():doc.createRange())}catch(ex){}return(rng=$_8o0eax6kjh8lyxii_processRanges(editor,[rng])[0])||(rng=doc.createRange?doc.createRange():doc.body.createTextRange()),rng.setStart&&9===rng.startContainer.nodeType&&rng.collapsed&&(elm=dom.getRoot(),rng.setStart(elm,0),rng.setEnd(elm,0)),selectedRange&&explicitRange&&(0===tryCompareBoundaryPoints(rng.START_TO_START,rng,selectedRange)&&0===tryCompareBoundaryPoints(rng.END_TO_END,rng,selectedRange)?rng=explicitRange:explicitRange=selectedRange=null),rng},setRng=function(rng,forward){var sel,node;if(function(rng){return!!rng&&(!!isNativeIeSelection(rng)||isAttachedToDom(rng.startContainer)&&isAttachedToDom(rng.endContainer))}(rng)){var ieRange=isNativeIeSelection(rng)?rng:null;if(ieRange){explicitRange=null;try{ieRange.select()}catch(ex){}}else{if(sel=getSel(),rng=editor.fire("SetSelectionRange",{range:rng,forward:forward}).range,sel){explicitRange=rng;try{sel.removeAllRanges(),sel.addRange(rng)}catch(ex){}!1===forward&&sel.extend&&(sel.collapse(rng.endContainer,rng.endOffset),sel.extend(rng.startContainer,rng.startOffset)),selectedRange=0<sel.rangeCount?sel.getRangeAt(0):null}rng.collapsed||rng.startContainer!==rng.endContainer||!sel.setBaseAndExtent||$_9bpim8ajh8lyw68.ie||rng.endOffset-rng.startOffset<2&&rng.startContainer.hasChildNodes()&&(node=rng.startContainer.childNodes[rng.startOffset])&&"IMG"===node.tagName&&(sel.setBaseAndExtent(rng.startContainer,rng.startOffset,rng.endContainer,rng.endOffset),sel.anchorNode===rng.startContainer&&sel.focusNode===rng.endContainer||sel.setBaseAndExtent(node,0,node,1)),editor.fire("AfterSetSelectionRange",{range:rng,forward:forward})}}},isForward=function(){var anchorRange,focusRange,sel=getSel();return!(sel&&sel.anchorNode&&sel.focusNode)||((anchorRange=dom.createRng()).setStart(sel.anchorNode,sel.anchorOffset),anchorRange.collapse(!0),(focusRange=dom.createRng()).setStart(sel.focusNode,sel.focusOffset),focusRange.collapse(!0),anchorRange.compareBoundaryPoints(anchorRange.START_TO_START,focusRange)<=0)},exports={bookmarkManager:null,controlSelection:null,dom:dom,win:win,serializer:serializer,editor:editor,collapse:collapse,setCursorLocation:function(node,offset){var rng=dom.createRng();node?(rng.setStart(node,offset),rng.setEnd(node,offset),setRng(rng),collapse(!1)):(moveEndPoint$1(dom,rng,editor.getBody(),!0),setRng(rng))},getContent:function(args){return $_dxvi8w6ljh8lyxik_getContent(editor,args)},setContent:setContent,getBookmark:function(type,normalized){return bookmarkManager.getBookmark(type,normalized)},moveToBookmark:function(bookmark){return bookmarkManager.moveToBookmark(bookmark)},select:function(node,content){return function(dom,node,content){return Option.from(node).map(function(node){var idx=dom.nodeIndex(node),rng=dom.createRng();return rng.setStart(node.parentNode,idx),rng.setEnd(node.parentNode,idx+1),content&&(moveEndPoint$1(dom,rng,node,!0),moveEndPoint$1(dom,rng,node,!1)),rng})}(dom,node,content).each(setRng),node},isCollapsed:function(){var rng=getRng(),sel=getSel();return!(!rng||rng.item)&&(rng.compareEndPoints?0===rng.compareEndPoints("StartToEnd",rng):!sel||rng.collapsed)},isForward:isForward,setNode:function(elm){return setContent(dom.getOuterHTML(elm)),elm},getNode:function(){return root=editor.getBody(),(rng=getRng())?(startContainer=rng.startContainer,endContainer=rng.endContainer,startOffset=rng.startOffset,endOffset=rng.endOffset,elm=rng.commonAncestorContainer,!rng.collapsed&&(startContainer===endContainer&&endOffset-startOffset<2&&startContainer.hasChildNodes()&&(elm=startContainer.childNodes[startOffset]),3===startContainer.nodeType&&3===endContainer.nodeType&&(startContainer=startContainer.length===startOffset?skipEmptyTextNodes(startContainer.nextSibling,!0):startContainer.parentNode,endContainer=0===endOffset?skipEmptyTextNodes(endContainer.previousSibling,!1):endContainer.parentNode,startContainer&&startContainer===endContainer))?startContainer:elm&&3===elm.nodeType?elm.parentNode:elm):root;var root,rng,elm,startContainer,endContainer,startOffset,endOffset},getSel:getSel,setRng:setRng,getRng:getRng,getStart:function(real){return getStart$2(editor.getBody(),getRng(),real)},getEnd:function(real){return getEnd(editor.getBody(),getRng(),real)},getSelectedBlocks:function(startElm,endElm){return function(dom,rng,startElm,endElm){var node,root,selectedBlocks=[];if(root=dom.getRoot(),startElm=dom.getParent(startElm||getStart$2(root,rng,!1),dom.isBlock),endElm=dom.getParent(endElm||getEnd(root,rng,!1),dom.isBlock),startElm&&startElm!==root&&selectedBlocks.push(startElm),startElm&&endElm&&startElm!==endElm)for(var walker=new TreeWalker(node=startElm,root);(node=walker.next())&&node!==endElm;)dom.isBlock(node)&&selectedBlocks.push(node);return endElm&&startElm!==endElm&&endElm!==root&&selectedBlocks.push(endElm),selectedBlocks}(dom,getRng(),startElm,endElm)},normalize:function(){var rng=getRng(),sel=getSel();if($_d1o8uj3ujh8lyx1u_hasMultipleRanges(sel)||!hasAnyRanges(editor))return rng;var normRng=$_4v2pn63yjh8lyx2s_normalize(dom,rng);return normRng.each(function(normRng){setRng(normRng,isForward())}),normRng.getOr(rng)},selectorChanged:function(selector,callback){var currentSelectors;return selectorChangedData||(selectorChangedData={},currentSelectors={},editor.on("NodeChange",function(e){var node=e.element,parents=dom.getParents(node,null,dom.getRoot()),matchedSelectors={};each$19(selectorChangedData,function(callbacks,selector){each$19(parents,function(node){if(dom.is(node,selector))return currentSelectors[selector]||(each$19(callbacks,function(callback){callback(!0,{node:node,selector:selector,parents:parents})}),currentSelectors[selector]=callbacks),matchedSelectors[selector]=callbacks,!1})}),each$19(currentSelectors,function(callbacks,selector){matchedSelectors[selector]||(delete currentSelectors[selector],each$19(callbacks,function(callback){callback(!1,{node:node,selector:selector,parents:parents})}))})})),selectorChangedData[selector]||(selectorChangedData[selector]=[]),selectorChangedData[selector].push(callback),exports},getScrollContainer:function(){for(var scrollContainer,node=dom.getRoot();node&&"BODY"!==node.nodeName;){if(node.scrollHeight>node.clientHeight){scrollContainer=node;break}node=node.parentNode}return scrollContainer},scrollIntoView:function(elm,alignToTop){return $_cosk3k2ijh8lywpa_scrollElementIntoView(editor,elm,alignToTop)},placeCaretAt:function(clientX,clientY){return setRng($_ct0ht56jjh8lyxif_fromPoint(clientX,clientY,editor.getDoc()))},getBoundingClientRect:function(){var rng=getRng();return rng.collapsed?CaretPosition$1.fromRangeStart(rng).getClientRects()[0]:rng.getBoundingClientRect()},destroy:function(){win=selectedRange=explicitRange=null,controlSelection.destroy()}};return bookmarkManager=BookmarkManager$1(exports),controlSelection=ControlSelection(exports,editor),exports.bookmarkManager=bookmarkManager,exports.controlSelection=controlSelection,exports},isContentEditableFalse$11=$_5oonaz1qjh8lywhz.isContentEditableFalse,getSelectedNode$1=getSelectedNode,isAfterContentEditableFalse$2=isAfterContentEditableFalse,isBeforeContentEditableFalse$2=isBeforeContentEditableFalse,getVisualCaretPosition=function(walkFn,caretPosition){for(;caretPosition=walkFn(caretPosition);)if(caretPosition.isVisible())return caretPosition;return caretPosition},moveToCeFalseHorizontally=function(direction,editor,getNextPosFn,range){var node,caretPosition,peekCaretPosition,rangeIsInContainerBlock,from,inSameBlock,forwards=direction===HDirection.Forwards,isBeforeContentEditableFalseFn=forwards?isBeforeContentEditableFalse$2:isAfterContentEditableFalse$2;return!range.collapsed&&(node=getSelectedNode$1(range),isContentEditableFalse$11(node))?showCaret(direction,editor,node,direction===HDirection.Backwards,!0):(rangeIsInContainerBlock=function(range){return isCaretContainerBlock(range.startContainer)}(range),isBeforeContentEditableFalseFn(caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range))?selectNode(editor,caretPosition.getNode(!forwards)):(caretPosition=getNextPosFn(caretPosition))?isBeforeContentEditableFalseFn(caretPosition)?showCaret(direction,editor,caretPosition.getNode(!forwards),forwards,!0):isBeforeContentEditableFalseFn(peekCaretPosition=getNextPosFn(caretPosition))&&(!(inSameBlock=isInSameBlock(from=caretPosition,peekCaretPosition))&&$_5oonaz1qjh8lywhz.isBr(from.getNode())||inSameBlock)?showCaret(direction,editor,peekCaretPosition.getNode(!forwards),forwards,!0):rangeIsInContainerBlock?renderRangeCaret(editor,caretPosition.toRange(),!0):null:rangeIsInContainerBlock?range:null)},moveToCeFalseVertically=function(direction,editor,walkerFn,range){var caretPosition,linePositions,nextLinePositions,closestNextLineRect,caretClientRect,clientX,dist1,dist2,contentEditableFalseNode;if(contentEditableFalseNode=getSelectedNode$1(range),caretPosition=getNormalizedRangeEndPoint(direction,editor.getBody(),range),linePositions=walkerFn(editor.getBody(),isAboveLine(1),caretPosition),nextLinePositions=$_9tjm51ljh8lywbq.filter(linePositions,isLine(1)),caretClientRect=$_9tjm51ljh8lywbq.last(caretPosition.getClientRects()),(isBeforeContentEditableFalse$2(caretPosition)||isBeforeTable(caretPosition))&&(contentEditableFalseNode=caretPosition.getNode()),(isAfterContentEditableFalse$2(caretPosition)||isAfterTable(caretPosition))&&(contentEditableFalseNode=caretPosition.getNode(!0)),!caretClientRect)return null;if(clientX=caretClientRect.left,(closestNextLineRect=findClosestClientRect(nextLinePositions,clientX))&&isContentEditableFalse$11(closestNextLineRect.node))return dist1=Math.abs(clientX-closestNextLineRect.left),dist2=Math.abs(clientX-closestNextLineRect.right),showCaret(direction,editor,closestNextLineRect.node,dist1<dist2,!0);if(contentEditableFalseNode){var caretPositions=function(direction,root,predicateFn,node){var walkFn,isBelowFn,isAboveFn,caretPosition,clientRect,targetClientRect,caretWalker=CaretWalker(root),result=[],line=0,getClientRect=function(caretPosition){return $_9tjm51ljh8lywbq.last(caretPosition.getClientRects())};targetClientRect=getClientRect(caretPosition=1===direction?(walkFn=caretWalker.next,isBelowFn=isBelow,isAboveFn=isAbove,CaretPosition$1.after(node)):(walkFn=caretWalker.prev,isBelowFn=isAbove,isAboveFn=isBelow,CaretPosition$1.before(node)));do{if(caretPosition.isVisible()&&!isAboveFn(clientRect=getClientRect(caretPosition),targetClientRect)){if(0<result.length&&isBelowFn(clientRect,$_9tjm51ljh8lywbq.last(result))&&line++,(clientRect=clone$1(clientRect)).position=caretPosition,clientRect.line=line,predicateFn(clientRect))return result;result.push(clientRect)}}while(caretPosition=walkFn(caretPosition));return result}(direction,editor.getBody(),isAboveLine(1),contentEditableFalseNode);if(closestNextLineRect=findClosestClientRect($_9tjm51ljh8lywbq.filter(caretPositions,isLine(1)),clientX))return renderRangeCaret(editor,closestNextLineRect.position.toRange(),!0);if(closestNextLineRect=$_9tjm51ljh8lywbq.last($_9tjm51ljh8lywbq.filter(caretPositions,isLine(0))))return renderRangeCaret(editor,closestNextLineRect.position.toRange(),!0)}},exitPreBlock=function(editor,direction,range){var pre,newBlock,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_8aqzj925jh8lywmj.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_8aqzj925jh8lywmj.curry(getVisualCaretPosition,caretWalker.prev);if(range.collapsed&&editor.settings.forced_root_block){if(!(pre=editor.dom.getParent(range.startContainer,"PRE")))return;(1===direction?getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range)):getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range)))||(newBlock=function(editor){var textBlock=editor.dom.create(editor.settings.forced_root_block);return(!$_9bpim8ajh8lyw68.ie||11<=$_9bpim8ajh8lyw68.ie)&&(textBlock.innerHTML='<br data-mce-bogus="1">'),textBlock}(editor),1===direction?editor.$(pre).after(newBlock):editor.$(pre).before(newBlock),editor.selection.select(newBlock,!0),editor.selection.collapse())}},moveH$1=function(editor,forward){return function(){var newRng=function(editor,forward){var newRange,caretWalker=CaretWalker(editor.getBody()),getNextVisualCaretPosition=$_8aqzj925jh8lywmj.curry(getVisualCaretPosition,caretWalker.next),getPrevVisualCaretPosition=$_8aqzj925jh8lywmj.curry(getVisualCaretPosition,caretWalker.prev),direction=forward?HDirection.Forwards:HDirection.Backwards,getNextPosFn=forward?getNextVisualCaretPosition:getPrevVisualCaretPosition,range=editor.selection.getRng();return(newRange=moveToCeFalseHorizontally(direction,editor,getNextPosFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range))||null}(editor,forward);return!!newRng&&(editor.selection.setRng(newRng),!0)}},moveV$1=function(editor,down){return function(){var newRng=function(editor,down){var newRange,direction=down?1:-1,walkerFn=down?downUntil:upUntil,range=editor.selection.getRng();return(newRange=moveToCeFalseVertically(direction,editor,walkerFn,range))?newRange:(newRange=exitPreBlock(editor,direction,range))||null}(editor,down);return!!newRng&&(editor.selection.setRng(newRng),!0)}},match$1=function(patterns,evt){return $_5wjzy24jh8lyw2t.bind(function(patterns){return $_5wjzy24jh8lyw2t.map(patterns,function(pattern){return $_7ffry568jh8lyxfy.merge({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:$_eqpqvr6jh8lyw3s.noop},pattern)})}(patterns),function(pattern){return function(pattern,evt){return evt.keyCode===pattern.keyCode&&evt.shiftKey===pattern.shiftKey&&evt.altKey===pattern.altKey&&evt.ctrlKey===pattern.ctrlKey&&evt.metaKey===pattern.metaKey}(pattern,evt)?[pattern]:[]})},$_8um8ta6vjh8lyxko_action=function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}},$_8um8ta6vjh8lyxko_execute=function(patterns,evt){return $_5wjzy24jh8lyw2t.find(match$1(patterns,evt),function(pattern){return pattern.action()})},$_8m3to56tjh8lyxkd_setup=function(editor,caret){editor.on("keydown",function(evt){!1===evt.isDefaultPrevented()&&function(editor,caret,evt){var os=$_9hkktfnjh8lywc6.detect().os;$_8um8ta6vjh8lyxko_execute([{keyCode:$_6lsk4i5gjh8lyxau.RIGHT,action:moveH$1(editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.LEFT,action:moveH$1(editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.UP,action:moveV$1(editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DOWN,action:moveV$1(editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.RIGHT,action:moveH(editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.LEFT,action:moveH(editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.UP,action:moveV(editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DOWN,action:moveV(editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.RIGHT,action:$_65xx7w3pjh8lyx0d.move(editor,caret,!0)},{keyCode:$_6lsk4i5gjh8lyxau.LEFT,action:$_65xx7w3pjh8lyx0d.move(editor,caret,!1)},{keyCode:$_6lsk4i5gjh8lyxau.RIGHT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_65xx7w3pjh8lyx0d.moveNextWord(editor,caret)},{keyCode:$_6lsk4i5gjh8lyxau.LEFT,ctrlKey:!os.isOSX(),altKey:os.isOSX(),action:$_65xx7w3pjh8lyx0d.movePrevWord(editor,caret)}],evt).each(function(_){evt.preventDefault()})}(editor,caret,evt)})},hasOnlyOneChild$1=function(elm){return 1===$_a43q0i17jh8lywfe.children(elm).length},deleteLastPosition=function(forward,editor,target,parentInlines){var isFormatElement$$1=$_eqpqvr6jh8lyw3s.curry(isFormatElement,editor),formatNodes=$_5wjzy24jh8lyw2t.map($_5wjzy24jh8lyw2t.filter(parentInlines,isFormatElement$$1),function(elm){return elm.dom()});if(0===formatNodes.length)$_1al0sh3jjh8lywyv_deleteElement(editor,forward,target);else{var pos=function(targetNode,formatNodes){var caretContainer=createCaretContainer(!1),innerMost=insertFormatNodesIntoCaretContainer(formatNodes,caretContainer.dom());return $_4m7u2e2kjh8lywpi.before($_cgttw3zjh8lywdq.fromDom(targetNode),caretContainer),$_bfmuql2ujh8lywr1.remove($_cgttw3zjh8lywdq.fromDom(targetNode)),CaretPosition$1(innerMost,0)}(target.dom(),formatNodes);editor.selection.setRng(pos.toRange())}},deleteCaret$1=function(editor,forward){var rootElm=$_cgttw3zjh8lywdq.fromDom(editor.getBody()),startElm=$_cgttw3zjh8lywdq.fromDom(editor.selection.getStart()),parentInlines=$_5wjzy24jh8lyw2t.filter(function(rootElm,startElm){var parents=$_dyxtub3ejh8lywxq_parentsAndSelf(startElm,rootElm);return $_5wjzy24jh8lyw2t.findIndex(parents,isBlock).fold($_eqpqvr6jh8lyw3s.constant(parents),function(index){return parents.slice(0,index)})}(rootElm,startElm),hasOnlyOneChild$1);return $_5wjzy24jh8lyw2t.last(parentInlines).map(function(target){var fromPos=CaretPosition$1.fromRangeStart(editor.selection.getRng());return!!$_aj8isd34jh8lyws4_willDeleteLastPositionInElement(forward,fromPos,target.dom())&&(deleteLastPosition(forward,editor,target,parentInlines),!0)}).getOr(!1)},$_vald86xjh8lyxkw_backspaceDelete=function(editor,forward){return!!editor.selection.isCollapsed()&&deleteCaret$1(editor,forward)},$_4ow4756wjh8lyxkt_setup=function(editor,caret){editor.on("keydown",function(evt){!1===evt.isDefaultPrevented()&&function(editor,caret,evt){$_8um8ta6vjh8lyxko_execute([{keyCode:$_6lsk4i5gjh8lyxau.BACKSPACE,action:$_8um8ta6vjh8lyxko_action($_ar80r13gjh8lywy7_backspaceDelete,editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DELETE,action:$_8um8ta6vjh8lyxko_action($_ar80r13gjh8lywy7_backspaceDelete,editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.BACKSPACE,action:$_8um8ta6vjh8lyxko_action($_ej9d8d3kjh8lywzc_backspaceDelete,editor,caret,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DELETE,action:$_8um8ta6vjh8lyxko_action($_ej9d8d3kjh8lywzc_backspaceDelete,editor,caret,!0)},{keyCode:$_6lsk4i5gjh8lyxau.BACKSPACE,action:$_8um8ta6vjh8lyxko_action($_lcy1p3fjh8lywxx_backspaceDelete,editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DELETE,action:$_8um8ta6vjh8lyxko_action($_lcy1p3fjh8lywxx_backspaceDelete,editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.BACKSPACE,action:$_8um8ta6vjh8lyxko_action($_5jmwsv32jh8lywrr_backspaceDelete,editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DELETE,action:$_8um8ta6vjh8lyxko_action($_5jmwsv32jh8lywrr_backspaceDelete,editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.BACKSPACE,action:$_8um8ta6vjh8lyxko_action($_746feo3rjh8lyx0o_backspaceDelete,editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DELETE,action:$_8um8ta6vjh8lyxko_action($_746feo3rjh8lyx0o_backspaceDelete,editor,!0)},{keyCode:$_6lsk4i5gjh8lyxau.BACKSPACE,action:$_8um8ta6vjh8lyxko_action($_vald86xjh8lyxkw_backspaceDelete,editor,!1)},{keyCode:$_6lsk4i5gjh8lyxau.DELETE,action:$_8um8ta6vjh8lyxko_action($_vald86xjh8lyxkw_backspaceDelete,editor,!0)}],evt).each(function(_){evt.preventDefault()})}(editor,caret,evt)}),editor.on("keyup",function(evt){!1===evt.isDefaultPrevented()&&function(editor,evt){$_8um8ta6vjh8lyxko_execute([{keyCode:$_6lsk4i5gjh8lyxau.BACKSPACE,action:$_8um8ta6vjh8lyxko_action($_ar80r13gjh8lywy7_paddEmptyElement,editor)},{keyCode:$_6lsk4i5gjh8lyxau.DELETE,action:$_8um8ta6vjh8lyxko_action($_ar80r13gjh8lywy7_paddEmptyElement,editor)}],evt)}(editor,evt)})},getParentBlock$2=function(editor){return Option.from(editor.dom.getParent(editor.selection.getStart(!0),editor.dom.isBlock))},$_83wjn572jh8lyxlu_moveToCaretPosition=function(editor,root){var walker,node,rng,lastNode=root,dom=editor.dom,moveCaretBeforeOnEnterElementsMap=editor.schema.getMoveCaretBeforeOnEnterElements();if(root){if(/^(LI|DT|DD)$/.test(root.nodeName)){var firstChild=function(node){for(;node;){if(1===node.nodeType||3===node.nodeType&&node.data&&/[\r\n\s]/.test(node.data))return node;node=node.nextSibling}}(root.firstChild);firstChild&&/^(UL|OL|DL)$/.test(firstChild.nodeName)&&root.insertBefore(dom.doc.createTextNode(" "),root.firstChild)}if(rng=dom.createRng(),root.normalize(),root.hasChildNodes()){for(walker=new TreeWalker(root,root);node=walker.current();){if($_5oonaz1qjh8lywhz.isText(node)){rng.setStart(node,0),rng.setEnd(node,0);break}if(moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]){rng.setStartBefore(node),rng.setEndBefore(node);break}lastNode=node,node=walker.next()}node||(rng.setStart(lastNode,0),rng.setEnd(lastNode,0))}else $_5oonaz1qjh8lywhz.isBr(root)?root.nextSibling&&dom.isBlock(root.nextSibling)?(rng.setStartBefore(root),rng.setEndBefore(root)):(rng.setStartAfter(root),rng.setEndAfter(root)):(rng.setStart(root,0),rng.setEnd(root,0));editor.selection.setRng(rng),dom.remove(void 0),editor.selection.scrollIntoView(root)}},$_83wjn572jh8lyxlu_getEditableRoot=function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},$_83wjn572jh8lyxlu_getParentBlock=getParentBlock$2,$_83wjn572jh8lyxlu_getParentBlockName=function(editor){return getParentBlock$2(editor).fold($_eqpqvr6jh8lyw3s.constant(""),function(parentBlock){return parentBlock.nodeName.toUpperCase()})},$_83wjn572jh8lyxlu_isListItemParentBlock=function(editor){return getParentBlock$2(editor).filter(function(elm){return isListItem($_cgttw3zjh8lywdq.fromDom(elm))}).isSome()},hasParent$1=function(elm,parentName){return elm&&elm.parentNode&&elm.parentNode.nodeName===parentName},isListBlock=function(elm){return elm&&/^(OL|UL|LI)$/.test(elm.nodeName)},getContainerBlock=function(containerBlock){var containerBlockParent=containerBlock.parentNode;return/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)?containerBlockParent:containerBlock},isFirstOrLastLi=function(containerBlock,parentBlock,first){for(var node=containerBlock[first?"firstChild":"lastChild"];node&&!$_5oonaz1qjh8lywhz.isElement(node);)node=node[first?"nextSibling":"previousSibling"];return node===parentBlock},$_5pzeb371jh8lyxlr_insert=function(editor,createNewBlock,containerBlock,parentBlock,newBlockName){var dom=editor.dom,rng=editor.selection.getRng();if(containerBlock!==editor.getBody()){var elm;isListBlock(elm=containerBlock)&&isListBlock(elm.parentNode)&&(newBlockName="LI");var newBlock=newBlockName?createNewBlock(newBlockName):dom.create("BR");if(isFirstOrLastLi(containerBlock,parentBlock,!0)&&isFirstOrLastLi(containerBlock,parentBlock,!1))hasParent$1(containerBlock,"LI")?dom.insertAfter(newBlock,getContainerBlock(containerBlock)):dom.replace(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!0))hasParent$1(containerBlock,"LI")?(dom.insertAfter(newBlock,getContainerBlock(containerBlock)),newBlock.appendChild(dom.doc.createTextNode(" ")),newBlock.appendChild(containerBlock)):containerBlock.parentNode.insertBefore(newBlock,containerBlock);else if(isFirstOrLastLi(containerBlock,parentBlock,!1))dom.insertAfter(newBlock,getContainerBlock(containerBlock));else{containerBlock=getContainerBlock(containerBlock);var tmpRng=rng.cloneRange();tmpRng.setStartAfter(parentBlock),tmpRng.setEndAfter(containerBlock);var fragment=tmpRng.extractContents();"LI"===newBlockName&&function(elm,name){return elm.firstChild&&elm.firstChild.nodeName===name}(fragment,"LI")?(newBlock=fragment.firstChild,dom.insertAfter(fragment,containerBlock)):(dom.insertAfter(fragment,containerBlock),dom.insertAfter(newBlock,containerBlock))}dom.remove(parentBlock),$_83wjn572jh8lyxlu_moveToCaretPosition(editor,newBlock)}},emptyBlock=function(elm){elm.innerHTML='<br data-mce-bogus="1">'},containerAndSiblingName=function(container,nodeName){return container.nodeName===nodeName||container.previousSibling&&container.previousSibling.nodeName===nodeName},canSplitBlock=function(dom,node){return node&&dom.isBlock(node)&&!/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName)&&!/^(fixed|absolute)/i.test(node.style.position)&&"true"!==dom.getContentEditable(node)},normalizeZwspOffset=function(start,container,offset){return!1===$_5oonaz1qjh8lywhz.isText(container)?offset:start?1===offset&&container.data.charAt(offset-1)===$_d383mr21jh8lywlv_ZWSP?0:offset:offset===container.data.length-1&&container.data.charAt(offset)===$_d383mr21jh8lywlv_ZWSP?container.data.length:offset},getEditableRoot$1=function(dom,node){var parent,editableRoot,root=dom.getRoot();for(parent=node;parent!==root&&"false"!==dom.getContentEditable(parent);)"true"===dom.getContentEditable(parent)&&(editableRoot=parent),parent=parent.parentNode;return parent!==root?editableRoot:root},setForcedBlockAttrs=function(editor,node){var forcedRootBlockName=$_66vr6g2jjh8lywpf_getForcedRootBlock(editor);forcedRootBlockName&&forcedRootBlockName.toLowerCase()===node.tagName.toLowerCase()&&editor.dom.setAttribs(node,$_66vr6g2jjh8lywpf_getForcedRootBlockAttrs(editor))},$_apcs0t70jh8lyxlh_insert=function(editor,evt){var tmpRng,editableRoot,container,offset,parentBlock,shiftKey,newBlock,fragment,containerBlock,parentBlockName,containerBlockName,newBlockName,isAfterLastNodeInContainer,dom=editor.dom,schema=editor.schema,nonEmptyElementsMap=schema.getNonEmptyElements(),rng=editor.selection.getRng(),createNewBlock=function(name){var block,clonedNode,caretNode,node=container,textInlineElements=schema.getTextInlineElements();if(name||"TABLE"===parentBlockName||"HR"===parentBlockName?(block=dom.create(name||newBlockName),setForcedBlockAttrs(editor,block)):block=parentBlock.cloneNode(!1),caretNode=block,!1===$_66vr6g2jjh8lywpf_shouldKeepStyles(editor))dom.setAttrib(block,"style",null),dom.setAttrib(block,"class",null);else do{if(textInlineElements[node.nodeName]){if(isCaretNode(node))continue;clonedNode=node.cloneNode(!1),dom.setAttrib(clonedNode,"id",""),block.hasChildNodes()?clonedNode.appendChild(block.firstChild):caretNode=clonedNode,block.appendChild(clonedNode)}}while((node=node.parentNode)&&node!==editableRoot);return emptyBlock(caretNode),block},isCaretAtStartOrEndOfBlock=function(start){var walker,node,name,normalizedOffset;if(normalizedOffset=normalizeZwspOffset(start,container,offset),$_5oonaz1qjh8lywhz.isText(container)&&(start?0<normalizedOffset:normalizedOffset<container.nodeValue.length))return!1;if(container.parentNode===parentBlock&&isAfterLastNodeInContainer&&!start)return!0;if(start&&$_5oonaz1qjh8lywhz.isElement(container)&&container===parentBlock.firstChild)return!0;if(containerAndSiblingName(container,"TABLE")||containerAndSiblingName(container,"HR"))return isAfterLastNodeInContainer&&!start||!isAfterLastNodeInContainer&&start;for(walker=new TreeWalker(container,parentBlock),$_5oonaz1qjh8lywhz.isText(container)&&(start&&0===normalizedOffset?walker.prev():start||normalizedOffset!==container.nodeValue.length||walker.next());node=walker.current();){if($_5oonaz1qjh8lywhz.isElement(node)){if(!node.getAttribute("data-mce-bogus")&&(name=node.nodeName.toLowerCase(),nonEmptyElementsMap[name]&&"br"!==name))return!1}else if($_5oonaz1qjh8lywhz.isText(node)&&!/^[ \t\r\n]*$/.test(node.nodeValue))return!1;start?walker.prev():walker.next()}return!0},insertNewBlockAfter=function(){newBlock=/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName)&&"HGROUP"!==containerBlockName?createNewBlock(newBlockName):createNewBlock(),$_66vr6g2jjh8lywpf_shouldEndContainerOnEmptyBlock(editor)&&canSplitBlock(dom,containerBlock)&&dom.isEmpty(parentBlock)?newBlock=dom.split(containerBlock,parentBlock):dom.insertAfter(newBlock,parentBlock),$_83wjn572jh8lyxlu_moveToCaretPosition(editor,newBlock)};$_4v2pn63yjh8lyx2s_normalize(dom,rng).each(function(normRng){rng.setStart(normRng.startContainer,normRng.startOffset),rng.setEnd(normRng.endContainer,normRng.endOffset)}),container=rng.startContainer,offset=rng.startOffset,newBlockName=$_66vr6g2jjh8lywpf_getForcedRootBlock(editor),shiftKey=evt.shiftKey,$_5oonaz1qjh8lywhz.isElement(container)&&container.hasChildNodes()&&(isAfterLastNodeInContainer=offset>container.childNodes.length-1,container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container,offset=isAfterLastNodeInContainer&&$_5oonaz1qjh8lywhz.isText(container)?container.nodeValue.length:0),(editableRoot=getEditableRoot$1(dom,container))&&((newBlockName&&!shiftKey||!newBlockName&&shiftKey)&&(container=function(editor,newBlockName,rng,container,offset){var newBlock,parentBlock,startNode,node,next,rootBlockName,blockName=newBlockName||"P",dom=editor.dom,editableRoot=getEditableRoot$1(dom,container);if(!(parentBlock=dom.getParent(container,dom.isBlock))||!canSplitBlock(dom,parentBlock)){if(rootBlockName=(parentBlock=parentBlock||editableRoot)===editor.getBody()||function(node){return node&&/^(TD|TH|CAPTION)$/.test(node.nodeName)}(parentBlock)?parentBlock.nodeName.toLowerCase():parentBlock.parentNode.nodeName.toLowerCase(),!parentBlock.hasChildNodes())return newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),parentBlock.appendChild(newBlock),rng.setStart(newBlock,0),rng.setEnd(newBlock,0),newBlock;for(node=container;node.parentNode!==parentBlock;)node=node.parentNode;for(;node&&!dom.isBlock(node);)node=(startNode=node).previousSibling;if(startNode&&editor.schema.isValidChild(rootBlockName,blockName.toLowerCase())){for(newBlock=dom.create(blockName),setForcedBlockAttrs(editor,newBlock),startNode.parentNode.insertBefore(newBlock,startNode),node=startNode;node&&!dom.isBlock(node);)next=node.nextSibling,newBlock.appendChild(node),node=next;rng.setStart(container,offset),rng.setEnd(container,offset)}}return container}(editor,newBlockName,rng,container,offset)),parentBlock=dom.getParent(container,dom.isBlock),containerBlock=parentBlock?dom.getParent(parentBlock.parentNode,dom.isBlock):null,parentBlockName=parentBlock?parentBlock.nodeName.toUpperCase():"","LI"!==(containerBlockName=containerBlock?containerBlock.nodeName.toUpperCase():"")||evt.ctrlKey||(containerBlock=(parentBlock=containerBlock).parentNode,parentBlockName=containerBlockName),/^(LI|DT|DD)$/.test(parentBlockName)&&dom.isEmpty(parentBlock)?$_5pzeb371jh8lyxlr_insert(editor,createNewBlock,containerBlock,parentBlock,newBlockName):newBlockName&&parentBlock===editor.getBody()||(newBlockName=newBlockName||"P",isCaretContainerBlock(parentBlock)?(newBlock=showCaretContainerBlock(parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),$_83wjn572jh8lyxlu_moveToCaretPosition(editor,newBlock)):isCaretAtStartOrEndOfBlock()?insertNewBlockAfter():isCaretAtStartOrEndOfBlock(!0)?(newBlock=parentBlock.parentNode.insertBefore(createNewBlock(),parentBlock),$_83wjn572jh8lyxlu_moveToCaretPosition(editor,containerAndSiblingName(parentBlock,"HR")?newBlock:parentBlock)):((tmpRng=function(rng){var newRng=rng.cloneRange();return newRng.setStart(rng.startContainer,normalizeZwspOffset(!0,rng.startContainer,rng.startOffset)),newRng.setEnd(rng.endContainer,normalizeZwspOffset(!1,rng.endContainer,rng.endOffset)),newRng}(rng).cloneRange()).setEndAfter(parentBlock),function(node){for(;$_5oonaz1qjh8lywhz.isText(node)&&(node.nodeValue=node.nodeValue.replace(/^[\r\n]+/,"")),node=node.firstChild;);}(fragment=tmpRng.extractContents()),newBlock=fragment.firstChild,dom.insertAfter(fragment,parentBlock),function(dom,nonEmptyElementsMap,block){var i,node=block,firstChilds=[];if(node){for(;node=node.firstChild;){if(dom.isBlock(node))return;$_5oonaz1qjh8lywhz.isElement(node)&&!nonEmptyElementsMap[node.nodeName.toLowerCase()]&&firstChilds.push(node)}for(i=firstChilds.length;i--;)!(node=firstChilds[i]).hasChildNodes()||node.firstChild===node.lastChild&&""===node.firstChild.nodeValue?dom.remove(node):(elm=node)&&"A"===elm.nodeName&&0===$_ahowuxkjh8lywbj.trim($_d383mr21jh8lywlv_trim(elm.innerText||elm.textContent)).length&&dom.remove(node);var elm}}(dom,nonEmptyElementsMap,newBlock),function(dom,block){var lastChild;block.normalize(),(lastChild=block.lastChild)&&!/^(left|right)$/gi.test(dom.getStyle(lastChild,"float",!0))||dom.add(block,"br")}(dom,parentBlock),dom.isEmpty(parentBlock)&&emptyBlock(parentBlock),newBlock.normalize(),dom.isEmpty(newBlock)?(dom.remove(newBlock),insertNewBlockAfter()):$_83wjn572jh8lyxlu_moveToCaretPosition(editor,newBlock)),dom.setAttrib(newBlock,"id",""),editor.fire("NewBlock",{newBlock:newBlock})))},matchesSelector=function(editor,selector){return $_83wjn572jh8lyxlu_getParentBlock(editor).filter(function(parentBlock){return 0<selector.length&&$_5h4ipt1fjh8lywgi.is($_cgttw3zjh8lywdq.fromDom(parentBlock),selector)}).isSome()},$_5mj33174jh8lyxm9_shouldInsertBr=function(editor){return matchesSelector(editor,$_66vr6g2jjh8lywpf_getBrNewLineSelector(editor))},$_5mj33174jh8lyxm9_shouldBlockNewLine=function(editor){return matchesSelector(editor,$_66vr6g2jjh8lywpf_getNoNewLineSelector(editor))},newLineAction=$_1ml90g3ijh8lywyp_generate([{br:[]},{block:[]},{none:[]}]),shouldBlockNewLine$1=function(editor,shiftKey){return $_5mj33174jh8lyxm9_shouldBlockNewLine(editor)},isBrMode=function(requiredState){return function(editor,shiftKey){return""===$_66vr6g2jjh8lywpf_getForcedRootBlock(editor)===requiredState}},inListBlock=function(requiredState){return function(editor,shiftKey){return $_83wjn572jh8lyxlu_isListItemParentBlock(editor)===requiredState}},inBlock=function(blockName,requiredState){return function(editor,shiftKey){return $_83wjn572jh8lyxlu_getParentBlockName(editor)===blockName.toUpperCase()===requiredState}},inPreBlock=function(requiredState){return inBlock("pre",requiredState)},shouldPutBrInPre$1=function(requiredState){return function(editor,shiftKey){return $_66vr6g2jjh8lywpf_shouldPutBrInPre(editor)===requiredState}},inBrContext=function(editor,shiftKey){return $_5mj33174jh8lyxm9_shouldInsertBr(editor)},hasShiftKey=function(editor,shiftKey){return shiftKey},canInsertIntoEditableRoot=function(editor){var forcedRootBlock=$_66vr6g2jjh8lywpf_getForcedRootBlock(editor),rootEditable=$_83wjn572jh8lyxlu_getEditableRoot(editor.dom,editor.selection.getStart());return rootEditable&&editor.schema.isValidChild(rootEditable.nodeName,forcedRootBlock||"P")},match$2=function(predicates,action){return function(editor,shiftKey){return $_5wjzy24jh8lyw2t.foldl(predicates,function(res,p){return res&&p(editor,shiftKey)},!0)?Option.some(action):Option.none()}},$_efe7kj73jh8lyxm2_getAction=function(editor,evt){return $_7r5om73ojh8lyx09_evaluateUntil([match$2([shouldBlockNewLine$1],newLineAction.none()),match$2([inBlock("summary",!0)],newLineAction.br()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1),hasShiftKey],newLineAction.br()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!1)],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0),hasShiftKey],newLineAction.block()),match$2([inPreBlock(!0),shouldPutBrInPre$1(!0)],newLineAction.br()),match$2([inListBlock(!0),hasShiftKey],newLineAction.br()),match$2([inListBlock(!0)],newLineAction.block()),match$2([isBrMode(!0),hasShiftKey,canInsertIntoEditableRoot],newLineAction.block()),match$2([isBrMode(!0)],newLineAction.br()),match$2([inBrContext],newLineAction.br()),match$2([isBrMode(!1),hasShiftKey],newLineAction.br()),match$2([canInsertIntoEditableRoot],newLineAction.block())],[editor,evt.shiftKey]).getOr(newLineAction.none())},$_5e167p6zjh8lyxlc_insert=function(editor,evt){$_efe7kj73jh8lyxm2_getAction(editor,evt).fold(function(){$_cg4dz53xjh8lyx2g_insert(editor,evt)},function(){$_apcs0t70jh8lyxlh_insert(editor,evt)},$_eqpqvr6jh8lyw3s.noop)},$_5ff4w26yjh8lyxl3_setup=function(editor){editor.on("keydown",function(event){event.keyCode===$_6lsk4i5gjh8lyxau.ENTER&&function(editor,event){var undoManager;event.isDefaultPrevented()||(event.preventDefault(),(undoManager=editor.undoManager).typing&&(undoManager.typing=!1,undoManager.add()),editor.undoManager.transact(function(){!1===editor.selection.isCollapsed()&&editor.execCommand("Delete"),$_5e167p6zjh8lyxlc_insert(editor,event)}))}(editor,event)})},insertAtLocation=function(editor,caretPosition,location){return!!function(location,caretPosition){return isAtStartOrEnd(location)&&$_5oonaz1qjh8lywhz.isText(caretPosition.container())}(location,caretPosition)&&(function(editor,caretPosition){var container=caretPosition.container(),offset=caretPosition.offset();container.insertData(offset," "),editor.selection.setCursorLocation(container,offset+1)}(editor,caretPosition),!0)},isAtStartOrEnd=function(location){return location.fold($_eqpqvr6jh8lyw3s.constant(!1),$_eqpqvr6jh8lyw3s.constant(!0),$_eqpqvr6jh8lyw3s.constant(!0),$_eqpqvr6jh8lyw3s.constant(!1))},$_aptbve76jh8lyxme_insertAtSelection=function(editor){return!!editor.selection.isCollapsed()&&function(editor){var isInlineTarget=$_eqpqvr6jh8lyw3s.curry($_231v7s37jh8lywt3.isInlineTarget,editor),caretPosition=CaretPosition$1.fromRangeStart(editor.selection.getRng());return $_6kjy7r3njh8lywzz_readLocation(isInlineTarget,editor.getBody(),caretPosition).map($_eqpqvr6jh8lyw3s.curry(insertAtLocation,editor,caretPosition)).getOr(!1)}(editor)},$_50nb7z75jh8lyxmd_setup=function(editor){editor.on("keydown",function(evt){!1===evt.isDefaultPrevented()&&function(editor,evt){$_8um8ta6vjh8lyxko_execute([{keyCode:$_6lsk4i5gjh8lyxau.SPACEBAR,action:$_8um8ta6vjh8lyxko_action($_aptbve76jh8lyxme_insertAtSelection,editor)}],evt).each(function(_){evt.preventDefault()})}(editor,evt)})},showBlockCaretContainer=function(editor,blockCaretContainer){blockCaretContainer.hasAttribute("data-mce-caret")&&(showCaretContainerBlock(blockCaretContainer),function(editor){editor.selection.setRng(editor.selection.getRng())}(editor),editor.selection.scrollIntoView(blockCaretContainer))},handleBlockContainer=function(editor,e){var blockCaretContainer=function(editor){return $_7sg18r3cjh8lywu1_descendant($_cgttw3zjh8lywdq.fromDom(editor.getBody()),"*[data-mce-caret]").fold($_eqpqvr6jh8lyw3s.constant(null),function(elm){return elm.dom()})}(editor);if(blockCaretContainer)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void showBlockCaretContainer(editor,blockCaretContainer)):void(hasContent(blockCaretContainer)&&(showBlockCaretContainer(editor,blockCaretContainer),editor.undoManager.add()))},$_98x1lt77jh8lyxmi_setup=function(editor){editor.on("keyup compositionstart",$_eqpqvr6jh8lyw3s.curry(handleBlockContainer,editor))},$_btkj596sjh8lyxkc_setup=function(editor){var caret=$_65xx7w3pjh8lyx0d.setupSelectedState(editor);$_98x1lt77jh8lyxmi_setup(editor),$_8m3to56tjh8lyxkd_setup(editor,caret),$_4ow4756wjh8lyxkt_setup(editor,caret),$_5ff4w26yjh8lyxl3_setup(editor),$_50nb7z75jh8lyxmd_setup(editor)};function Quirks(editor){var serializeRng,getAttributeApplyFunction,isSelectionAcrossElements,each=$_ahowuxkjh8lywbj.each,BACKSPACE=$_6lsk4i5gjh8lyxau.BACKSPACE,DELETE=$_6lsk4i5gjh8lyxau.DELETE,dom=editor.dom,selection=editor.selection,settings=editor.settings,parser=editor.parser,isGecko=$_9bpim8ajh8lyw68.gecko,isIE=$_9bpim8ajh8lyw68.ie,isWebKit=$_9bpim8ajh8lyw68.webkit,mceInternalDataType=isIE?"Text":"URL",setEditorCommandState=function(cmd,state){try{editor.getDoc().execCommand(cmd,!1,state)}catch(ex){}},isDefaultPrevented=function(e){return e.isDefaultPrevented()},selectAll=function(){editor.shortcuts.add("meta+a",null,"SelectAll")},disableBackspaceIntoATable=function(){editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE&&selection.isCollapsed()&&0===selection.getRng().startOffset){var previousSibling=selection.getNode().previousSibling;if(previousSibling&&previousSibling.nodeName&&"table"===previousSibling.nodeName.toLowerCase())return e.preventDefault(),!1}})},bodyHeight=function(){editor.inline||(editor.contentStyles.push("body {min-height: 150px}"),editor.on("click",function(e){var rng;if("HTML"===e.target.nodeName){if(11<$_9bpim8ajh8lyw68.ie)return void editor.getBody().focus();rng=editor.selection.getRng(),editor.getBody().focus(),editor.selection.setRng(rng),editor.selection.normalize(),editor.nodeChanged()}}))};return editor.on("keydown",function(e){var rng,container,offset,root,parent;if(!isDefaultPrevented(e)&&e.keyCode===$_6lsk4i5gjh8lyxau.BACKSPACE&&(container=(rng=selection.getRng()).startContainer,offset=rng.startOffset,root=dom.getRoot(),parent=container,rng.collapsed&&0===offset)){for(;parent&&parent.parentNode&&parent.parentNode.firstChild===parent&&parent.parentNode!==root;)parent=parent.parentNode;"BLOCKQUOTE"===parent.tagName&&(editor.formatter.toggle("blockquote",null,parent),(rng=dom.createRng()).setStart(container,0),rng.setEnd(container,0),selection.setRng(rng))}}),serializeRng=function(rng){var body=dom.create("body"),contents=rng.cloneContents();return body.appendChild(contents),selection.serializer.serialize(body,{format:"html"})},editor.on("keydown",function(e){var isCollapsed,body,rng,selection,allRng,keyCode=e.keyCode;if(!isDefaultPrevented(e)&&(keyCode===DELETE||keyCode===BACKSPACE)){if(isCollapsed=editor.selection.isCollapsed(),body=editor.getBody(),isCollapsed&&!dom.isEmpty(body))return;if(!isCollapsed&&(rng=editor.selection.getRng(),selection=serializeRng(rng),(allRng=dom.createRng()).selectNode(editor.getBody()),selection!==serializeRng(allRng)))return;e.preventDefault(),editor.setContent(""),body.firstChild&&dom.isBlock(body.firstChild)?editor.selection.setCursorLocation(body.firstChild,0):editor.selection.setCursorLocation(body,0),editor.nodeChanged()}}),$_9bpim8ajh8lyw68.windowsPhone||editor.on("keyup focusin mouseup",function(e){$_6lsk4i5gjh8lyxau.modifierPressed(e)||selection.normalize()},!0),isWebKit&&(editor.settings.content_editable||dom.bind(editor.getDoc(),"mousedown mouseup",function(e){var rng;if(e.target===editor.getDoc().documentElement)if(rng=selection.getRng(),editor.getBody().focus(),"mousedown"===e.type){if(isCaretContainer(rng.startContainer))return;selection.placeCaretAt(e.clientX,e.clientY)}else selection.setRng(rng)}),editor.on("click",function(e){var target=e.target;/^(IMG|HR)$/.test(target.nodeName)&&"false"!==dom.getContentEditableParent(target)&&(e.preventDefault(),editor.selection.select(target),editor.nodeChanged()),"A"===target.nodeName&&dom.hasClass(target,"mce-item-anchor")&&(e.preventDefault(),selection.select(target))}),settings.forced_root_block&&editor.on("init",function(){setEditorCommandState("DefaultParagraphSeparator",settings.forced_root_block)}),editor.on("init",function(){editor.dom.bind(editor.getBody(),"submit",function(e){e.preventDefault()})}),disableBackspaceIntoATable(),parser.addNodeFilter("br",function(nodes){for(var i=nodes.length;i--;)"Apple-interchange-newline"===nodes[i].attr("class")&&nodes[i].remove()}),$_9bpim8ajh8lyw68.iOS?(editor.inline||editor.on("keydown",function(){document.activeElement===document.body&&editor.getWin().focus()}),bodyHeight(),editor.on("click",function(e){var elm=e.target;do{if("A"===elm.tagName)return void e.preventDefault()}while(elm=elm.parentNode)}),editor.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")):selectAll()),11<=$_9bpim8ajh8lyw68.ie&&(bodyHeight(),disableBackspaceIntoATable()),$_9bpim8ajh8lyw68.ie&&(selectAll(),setEditorCommandState("AutoUrlDetect",!1),editor.on("dragstart",function(e){!function(e){var selectionHtml,internalContent;e.dataTransfer&&(editor.selection.isCollapsed()&&"IMG"===e.target.tagName&&selection.select(e.target),0<(selectionHtml=editor.selection.getContent()).length&&(internalContent="data:text/mce-internal,"+escape(editor.id)+","+escape(selectionHtml),e.dataTransfer.setData(mceInternalDataType,internalContent)))}(e)}),editor.on("drop",function(e){if(!isDefaultPrevented(e)){var internalContent=function(e){var internalContent;return e.dataTransfer&&(internalContent=e.dataTransfer.getData(mceInternalDataType))&&0<=internalContent.indexOf("data:text/mce-internal,")?(internalContent=internalContent.substr("data:text/mce-internal,".length).split(","),{id:unescape(internalContent[0]),html:unescape(internalContent[1])}):null}(e);if(internalContent&&internalContent.id!==editor.id){e.preventDefault();var rng=$_ct0ht56jjh8lyxif_fromPoint(e.x,e.y,editor.getDoc());selection.setRng(rng),content=internalContent.html,internal=!0,editor.queryCommandSupported("mceInsertClipboardContent")?editor.execCommand("mceInsertClipboardContent",!1,{content:content,internal:internal}):editor.execCommand("mceInsertContent",!1,content)}}var content,internal})),isGecko&&(editor.on("keydown",function(e){if(!isDefaultPrevented(e)&&e.keyCode===BACKSPACE){if(!editor.getBody().getElementsByTagName("hr").length)return;if(selection.isCollapsed()&&0===selection.getRng().startOffset){var node=selection.getNode(),previousSibling=node.previousSibling;if("HR"===node.nodeName)return dom.remove(node),void e.preventDefault();previousSibling&&previousSibling.nodeName&&"hr"===previousSibling.nodeName.toLowerCase()&&(dom.remove(previousSibling),e.preventDefault())}}}),Range.prototype.getClientRects||editor.on("mousedown",function(e){if(!isDefaultPrevented(e)&&"HTML"===e.target.nodeName){var body_1=editor.getBody();body_1.blur(),$_8sy3pfhjh8lyw95.setEditorTimeout(editor,function(){body_1.focus()})}}),getAttributeApplyFunction=function(){var template=dom.getAttribs(selection.getStart().cloneNode(!1));return function(){var target=selection.getStart();target!==editor.getBody()&&(dom.setAttrib(target,"style",null),each(template,function(attr){target.setAttributeNode(attr.cloneNode(!0))}))}},isSelectionAcrossElements=function(){return!selection.isCollapsed()&&dom.getParent(selection.getStart(),dom.isBlock)!==dom.getParent(selection.getEnd(),dom.isBlock)},editor.on("keypress",function(e){var applyAttributes;if(!isDefaultPrevented(e)&&(8===e.keyCode||46===e.keyCode)&&isSelectionAcrossElements())return applyAttributes=getAttributeApplyFunction(),editor.getDoc().execCommand("delete",!1,null),applyAttributes(),e.preventDefault(),!1}),dom.bind(editor.getDoc(),"cut",function(e){var applyAttributes;!isDefaultPrevented(e)&&isSelectionAcrossElements()&&(applyAttributes=getAttributeApplyFunction(),$_8sy3pfhjh8lyw95.setEditorTimeout(editor,function(){applyAttributes()}))}),settings.readonly||editor.on("BeforeExecCommand MouseDown",function(){setEditorCommandState("StyleWithCSS",!1),setEditorCommandState("enableInlineTableEditing",!1),settings.object_resizing||setEditorCommandState("enableObjectResizing",!1)}),editor.on("SetContent ExecCommand",function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||each(dom.select("a"),function(node){var parentNode=node.parentNode,root=dom.getRoot();if(parentNode.lastChild===node){for(;parentNode&&!dom.isBlock(parentNode);){if(parentNode.parentNode.lastChild!==parentNode||parentNode===root)return;parentNode=parentNode.parentNode}dom.add(parentNode,"br",{"data-mce-bogus":1})}})}),editor.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"),$_9bpim8ajh8lyw68.mac&&editor.on("keydown",function(e){!$_6lsk4i5gjh8lyxau.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),editor.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}),disableBackspaceIntoATable()),{refreshContentEditable:function(){},isHidden:function(){var sel;return!isGecko||editor.removed?0:!(sel=editor.selection.getSel())||!sel.rangeCount||0===sel.rangeCount}}}var isTextBlockNode=function(node){return $_5oonaz1qjh8lywhz.isElement(node)&&isTextBlock($_cgttw3zjh8lywdq.fromDom(node))},$_1nhbc479jh8lyxn0_setup=function(editor){editor.on("click",function(e){3===e.detail&&function(editor){var rng=editor.selection.getRng(),startPos=CaretPosition.fromRangeStart(rng),endPos=CaretPosition.fromRangeEnd(rng);if(CaretPosition.isElementPosition(startPos)){var container=startPos.container();isTextBlockNode(container)&&$_9kvypj2cjh8lywnz.firstPositionIn(container).each(function(pos){return rng.setStart(pos.container(),pos.offset())})}CaretPosition.isElementPosition(endPos)&&(container=startPos.container(),isTextBlockNode(container)&&$_9kvypj2cjh8lywnz.lastPositionIn(container).each(function(pos){return rng.setEnd(pos.container(),pos.offset())})),editor.selection.setRng($_cnbluh30jh8lywrn_normalize(rng))}(editor)})},setup$12=function(editor){!function(editor){editor.on("click",function(e){editor.dom.getParent(e.target,"details")&&e.preventDefault()})}(editor),function(editor){editor.parser.addNodeFilter("details",function(elms){$_5wjzy24jh8lyw2t.each(elms,function(details){details.attr("data-mce-open",details.attr("open")),details.attr("open","open")})}),editor.serializer.addNodeFilter("details",function(elms){$_5wjzy24jh8lyw2t.each(elms,function(details){var open=details.attr("data-mce-open");details.attr("open",$_dp4g6d7jh8lyw3y.isString(open)?open:null),details.attr("data-mce-open",null)})})}(editor)},DOM$2=DOMUtils$1.DOM,initEditor=function(editor){editor.bindPendingEventDelegates(),editor.initialized=!0,editor.fire("init"),editor.focus(!0),editor.nodeChanged({initial:!0}),editor.execCallback("init_instance_callback",editor),function(editor){editor.settings.auto_focus&&$_8sy3pfhjh8lyw95.setEditorTimeout(editor,function(){var focusEditor;(focusEditor=!0===editor.settings.auto_focus?editor:editor.editorManager.get(editor.settings.auto_focus)).destroyed||focusEditor.focus()},100)}(editor)},$_g84rjb4rjh8lyx6v_initContentBody=function(editor,skipWrite){var body,contentCssText,settings=editor.settings,targetElm=editor.getElement(),doc=editor.getDoc();settings.inline||(editor.getElement().style.visibility=editor.orgVisibility),skipWrite||settings.content_editable||(doc.open(),doc.write(editor.iframeHTML),doc.close()),settings.content_editable&&(editor.on("remove",function(){var bodyEl=this.getBody();DOM$2.removeClass(bodyEl,"mce-content-body"),DOM$2.removeClass(bodyEl,"mce-edit-focus"),DOM$2.setAttrib(bodyEl,"contentEditable",null)}),DOM$2.addClass(targetElm,"mce-content-body"),editor.contentDocument=doc=settings.content_document||document,editor.contentWindow=settings.content_window||window,editor.bodyElement=targetElm,settings.content_document=settings.content_window=null,settings.root_name=targetElm.nodeName.toLowerCase()),(body=editor.getBody()).disabled=!0,editor.readonly=settings.readonly,editor.readonly||(editor.inline&&"static"===DOM$2.getStyle(body,"position",!0)&&(body.style.position="relative"),body.contentEditable=editor.getParam("content_editable_state",!0)),body.disabled=!1,editor.editorUpload=EditorUpload(editor),editor.schema=Schema(settings),editor.dom=DOMUtils$1(doc,{keep_values:!0,url_converter:editor.convertURL,url_converter_scope:editor,hex_colors:settings.force_hex_style_colors,class_filter:settings.class_filter,update_styles:!0,root_element:editor.inline?editor.getBody():null,collect:settings.content_editable,schema:editor.schema,onSetAttrib:function(e){editor.fire("SetAttrib",e)}}),editor.parser=function(editor){var parser=DomParser(editor.settings,editor.schema);return parser.addAttributeFilter("src,href,style,tabindex",function(nodes,name){for(var node,value,internalName,i=nodes.length,dom=editor.dom;i--;)if(value=(node=nodes[i]).attr(name),internalName="data-mce-"+name,!node.attributes.map[internalName]){if(0===value.indexOf("data:")||0===value.indexOf("blob:"))continue;"style"===name?((value=dom.serializeStyle(dom.parseStyle(value),node.name)).length||(value=null),node.attr(internalName,value),node.attr(name,value)):"tabindex"===name?(node.attr(internalName,value),node.attr(name,null)):node.attr(internalName,editor.convertURL(value,name,node.name))}}),parser.addNodeFilter("script",function(nodes){for(var node,type,i=nodes.length;i--;)0!==(type=(node=nodes[i]).attr("type")||"no/type").indexOf("mce-")&&node.attr("type","mce-"+type)}),parser.addNodeFilter("#cdata",function(nodes){for(var node,i=nodes.length;i--;)(node=nodes[i]).type=8,node.name="#comment",node.value="[CDATA["+node.value+"]]"}),parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(nodes){for(var node,i=nodes.length,nonEmptyElements=editor.schema.getNonEmptyElements();i--;)(node=nodes[i]).isEmpty(nonEmptyElements)&&0===node.getAll("br").length&&(node.append(new Node$2("br",1)).shortEnded=!0)}),parser}(editor),editor.serializer=DomSerializer$1(settings,editor),editor.selection=Selection$1(editor.dom,editor.getWin(),editor.serializer,editor),editor.formatter=Formatter(editor),editor.undoManager=UndoManager(editor),editor._nodeChangeDispatcher=new NodeChange(editor),editor._selectionOverrides=SelectionOverrides(editor),setup$12(editor),$_1nhbc479jh8lyxn0_setup(editor),$_btkj596sjh8lyxkc_setup(editor),$_85z7kh54jh8lyx8j_setup(editor),editor.fire("PreInit"),settings.browser_spellcheck||settings.gecko_spellcheck||(doc.body.spellcheck=!1,DOM$2.setAttrib(body,"spellcheck","false")),editor.quirks=Quirks(editor),editor.fire("PostRender"),settings.directionality&&(body.dir=settings.directionality),settings.nowrap&&(body.style.whiteSpace="nowrap"),settings.protect&&editor.on("BeforeSetContent",function(e){$_ahowuxkjh8lywbj.each(settings.protect,function(pattern){e.content=e.content.replace(pattern,function(str){return"\x3c!--mce:protected "+escape(str)+"--\x3e"})})}),editor.on("SetContent",function(){editor.addVisual(editor.getBody())}),editor.load({initial:!0,format:"html"}),editor.startContent=editor.getContent({format:"raw"}),editor.on("compositionstart compositionend",function(e){editor.composing="compositionstart"===e.type}),0<editor.contentStyles.length&&(contentCssText="",$_ahowuxkjh8lywbj.each(editor.contentStyles,function(style){contentCssText+=style+"\r\n"}),editor.dom.addStyle(contentCssText)),function(editor){return editor.inline?DOM$2.styleSheetLoader:editor.dom.styleSheetLoader}(editor).loadAll(editor.contentCSS,function(_){initEditor(editor)},function(urls){initEditor(editor)}),settings.content_style&&function(editor,text){var head=$_cgttw3zjh8lywdq.fromDom(editor.getDoc().head),tag=$_cgttw3zjh8lywdq.fromTag("style");$_3da62i14jh8lyweo.set(tag,"type","text/css"),$_4m7u2e2kjh8lywpi.append(tag,$_cgttw3zjh8lywdq.fromText(text)),$_4m7u2e2kjh8lywpi.append(head,tag)}(editor,settings.content_style)},DOM$3=DOMUtils$1.DOM,createIframe=function(editor,o){var title=editor.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),ifr=function(id,title,height,customAttrs){var iframe=$_cgttw3zjh8lywdq.fromTag("iframe");return $_3da62i14jh8lyweo.setAll(iframe,customAttrs),$_3da62i14jh8lyweo.setAll(iframe,{id:id+"_ifr",frameBorder:"0",allowTransparency:"true",title:title}),$_36knnd12jh8lywe1_setAll(iframe,{width:"100%",height:function(height){var normalizedHeight="number"==typeof height?height+"px":height;return normalizedHeight||""}(height),display:"block"}),iframe}(editor.id,title,o.height,$_66vr6g2jjh8lywpf_getIframeAttrs(editor)).dom();ifr.onload=function(){ifr.onload=null,editor.fire("load")};var isDomainRelaxed=function(editor,ifr){if(document.domain!==window.location.hostname&&$_9bpim8ajh8lyw68.ie&&$_9bpim8ajh8lyw68.ie<12){var bodyUuid=$_co2y7g52jh8lyx8f.uuid("mce");editor[bodyUuid]=function(){$_g84rjb4rjh8lyx6v_initContentBody(editor)};var domainRelaxUrl='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+editor.id+'");document.write(ed.iframeHTML);document.close();ed.'+bodyUuid+"(true);})()";return DOM$3.setAttrib(ifr,"src",domainRelaxUrl),!0}return!1}(editor,ifr);return editor.contentAreaContainer=o.iframeContainer,editor.iframeElement=ifr,editor.iframeHTML=function(editor){var bodyId,bodyClass,iframeHTML;return iframeHTML=$_66vr6g2jjh8lywpf_getDocType(editor)+"<html><head>",$_66vr6g2jjh8lywpf_getDocumentBaseUrl(editor)!==editor.documentBaseUrl&&(iframeHTML+='<base href="'+editor.documentBaseURI.getURI()+'" />'),iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',bodyId=$_66vr6g2jjh8lywpf_getBodyId(editor),bodyClass=$_66vr6g2jjh8lywpf_getBodyClass(editor),$_66vr6g2jjh8lywpf_getContentSecurityPolicy(editor)&&(iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+$_66vr6g2jjh8lywpf_getContentSecurityPolicy(editor)+'" />'),iframeHTML+='</head><body id="'+bodyId+'" class="mce-content-body '+bodyClass+'" data-id="'+editor.id+'"><br></body></html>'}(editor),DOM$3.add(o.iframeContainer,ifr),isDomainRelaxed},$_9i7a4m7bjh8lyxnf_init=function(editor,boxInfo){var isDomainRelaxed=createIframe(editor,boxInfo);boxInfo.editorContainer&&(DOM$3.get(boxInfo.editorContainer).style.display=editor.orgDisplay,editor.hidden=DOM$3.isHidden(boxInfo.editorContainer)),editor.getElement().style.display="none",DOM$3.setAttrib(editor.id,"aria-hidden","true"),isDomainRelaxed||$_g84rjb4rjh8lyx6v_initContentBody(editor)},DOM$4=DOMUtils$1.DOM,initPlugin=function(editor,initializedPlugins,plugin){var pluginUrl,pluginInstance,Plugin=PluginManager$1.get(plugin);if(pluginUrl=PluginManager$1.urls[plugin]||editor.documentBaseUrl.replace(/\/$/,""),plugin=$_ahowuxkjh8lywbj.trim(plugin),Plugin&&-1===$_ahowuxkjh8lywbj.inArray(initializedPlugins,plugin)){if($_ahowuxkjh8lywbj.each(PluginManager$1.dependencies(plugin),function(dep){initPlugin(editor,initializedPlugins,dep)}),editor.plugins[plugin])return;pluginInstance=new Plugin(editor,pluginUrl,editor.$),(editor.plugins[plugin]=pluginInstance).init&&(pluginInstance.init(editor,pluginUrl),initializedPlugins.push(plugin))}},trimLegacyPrefix=function(name){return name.replace(/^\-/,"")},createThemeFalseResult=function(element){return{editorContainer:element,iframeContainer:element}},renderThemeFalse=function(editor){var targetElement=editor.getElement();return editor.inline?createThemeFalseResult(null):function(targetElement){var iframeContainer=DOM$4.create("div");return DOM$4.insertAfter(iframeContainer,targetElement),createThemeFalseResult(iframeContainer)}(targetElement)},renderThemeUi=function(editor){var settings=editor.settings,elm=editor.getElement();return editor.orgDisplay=elm.style.display,$_dp4g6d7jh8lyw3y.isString(settings.theme)?function(editor){var w,h,minHeight,re,info,settings=editor.settings,elm=editor.getElement();return w=settings.width||DOM$4.getStyle(elm,"width")||"100%",h=settings.height||DOM$4.getStyle(elm,"height")||elm.offsetHeight,minHeight=settings.min_height||100,(re=/^[0-9\.]+(|px)$/i).test(""+w)&&(w=Math.max(parseInt(w,10),100)),re.test(""+h)&&(h=Math.max(parseInt(h,10),minHeight)),info=editor.theme.renderUI({targetNode:elm,width:w,height:h,deltaWidth:settings.delta_width,deltaHeight:settings.delta_height}),settings.content_editable||(h=(info.iframeHeight||h)+("number"==typeof h?info.deltaHeight||0:""))<minHeight&&(h=minHeight),info.height=h,info}(editor):$_dp4g6d7jh8lyw3y.isFunction(settings.theme)?function(editor){var info,elm=editor.getElement();return(info=editor.settings.theme(editor,elm)).editorContainer.nodeType&&(info.editorContainer.id=info.editorContainer.id||editor.id+"_parent"),info.iframeContainer&&info.iframeContainer.nodeType&&(info.iframeContainer.id=info.iframeContainer.id||editor.id+"_iframecontainer"),info.height=info.iframeHeight?info.iframeHeight:elm.offsetHeight,info}(editor):renderThemeFalse(editor)},$_bynk2f4ojh8lyx6l_init=function(editor){var boxInfo,settings=editor.settings,elm=editor.getElement();return editor.rtl=settings.rtl_ui||editor.editorManager.i18n.rtl,editor.editorManager.i18n.setCode(settings.language),settings.aria_label=settings.aria_label||DOM$4.getAttrib(elm,"aria-label",editor.getLang("aria.rich_text_area")),editor.fire("ScriptsLoaded"),function(editor){var Theme,theme=editor.settings.theme;$_dp4g6d7jh8lyw3y.isString(theme)?(editor.settings.theme=trimLegacyPrefix(theme),Theme=ThemeManager.get(theme),editor.theme=new Theme(editor,ThemeManager.urls[theme]),editor.theme.init&&editor.theme.init(editor,ThemeManager.urls[theme]||editor.documentBaseUrl.replace(/\/$/,""),editor.$)):editor.theme={}}(editor),function(editor){var initializedPlugins=[];$_ahowuxkjh8lywbj.each(editor.settings.plugins.split(/[ ,]/),function(name){initPlugin(editor,initializedPlugins,trimLegacyPrefix(name))})}(editor),boxInfo=renderThemeUi(editor),editor.editorContainer=boxInfo.editorContainer?boxInfo.editorContainer:null,settings.content_css&&$_ahowuxkjh8lywbj.each($_ahowuxkjh8lywbj.explode(settings.content_css),function(u){editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u))}),settings.content_editable?$_g84rjb4rjh8lyx6v_initContentBody(editor):$_9i7a4m7bjh8lyxnf_init(editor,boxInfo)},DOM$5=DOMUtils$1.DOM,hasSkipLoadPrefix=function(name){return"-"===name.charAt(0)},loadScripts=function(editor,suffix){var scriptLoader=ScriptLoader.ScriptLoader;!function(scriptLoader,editor,suffix,callback){var settings=editor.settings,theme=settings.theme;if($_dp4g6d7jh8lyw3y.isString(theme)){if(!hasSkipLoadPrefix(theme)&&!ThemeManager.urls.hasOwnProperty(theme)){var themeUrl=settings.theme_url;themeUrl?ThemeManager.load(theme,editor.documentBaseURI.toAbsolute(themeUrl)):ThemeManager.load(theme,"themes/"+theme+"/theme"+suffix+".js")}scriptLoader.loadQueue(function(){ThemeManager.waitFor(theme,callback)})}else callback()}(scriptLoader,editor,suffix,function(){!function(scriptLoader,editor){var settings=editor.settings;settings.language&&"en"!==settings.language&&!settings.language_url&&(settings.language_url=editor.editorManager.baseURL+"/langs/"+settings.language+".js"),settings.language_url&&!editor.editorManager.i18n.data[settings.language]&&scriptLoader.add(settings.language_url)}(scriptLoader,editor),function(settings,suffix){$_ahowuxkjh8lywbj.isArray(settings.plugins)&&(settings.plugins=settings.plugins.join(" ")),$_ahowuxkjh8lywbj.each(settings.external_plugins,function(url,name){PluginManager$1.load(name,url),settings.plugins+=" "+name}),$_ahowuxkjh8lywbj.each(settings.plugins.split(/[ ,]/),function(plugin){if((plugin=$_ahowuxkjh8lywbj.trim(plugin))&&!PluginManager$1.urls[plugin])if(hasSkipLoadPrefix(plugin)){plugin=plugin.substr(1,plugin.length);var dependencies=PluginManager$1.dependencies(plugin);$_ahowuxkjh8lywbj.each(dependencies,function(dep){var defaultSettings={prefix:"plugins/",resource:dep,suffix:"/plugin"+suffix+".js"};dep=PluginManager$1.createUrl(defaultSettings,dep),PluginManager$1.load(dep.resource,dep)})}else PluginManager$1.load(plugin,{prefix:"plugins/",resource:plugin,suffix:"/plugin"+suffix+".js"})})}(editor.settings,suffix),scriptLoader.loadQueue(function(){editor.removed||$_bynk2f4ojh8lyx6l_init(editor)},editor,function(urls){$_5vy074njh8lyx6h_pluginLoadError(editor,urls[0]),editor.removed||$_bynk2f4ojh8lyx6l_init(editor)})})},$_64g0n44hjh8lyx5e_render=function(editor){var settings=editor.settings,id=editor.id,readyHandler=function(){DOM$5.unbind(window,"ready",readyHandler),editor.render()};if(EventUtils.Event.domLoaded){if(editor.getElement()&&$_9bpim8ajh8lyw68.contentEditable){settings.inline?editor.inline=!0:(editor.orgVisibility=editor.getElement().style.visibility,editor.getElement().style.visibility="hidden");var form=editor.getElement().form||DOM$5.getParent(id,"form");form&&(editor.formElement=form,settings.hidden_input&&!/TEXTAREA|INPUT/i.test(editor.getElement().nodeName)&&(DOM$5.insertAfter(DOM$5.create("input",{type:"hidden",name:id}),id),editor.hasHiddenInput=!0),editor.formEventDelegate=function(e){editor.fire(e.type,e)},DOM$5.bind(form,"submit reset",editor.formEventDelegate),editor.on("reset",function(){editor.setContent(editor.startContent,{format:"raw"})}),!settings.submit_patch||form.submit.nodeType||form.submit.length||form._mceOldSubmit||(form._mceOldSubmit=form.submit,form.submit=function(){return editor.editorManager.triggerSave(),editor.setDirty(!1),form._mceOldSubmit(form)})),editor.windowManager=WindowManager(editor),editor.notificationManager=NotificationManager(editor),"xml"===settings.encoding&&editor.on("GetContent",function(e){e.save&&(e.content=DOM$5.encode(e.content))}),settings.add_form_submit_trigger&&editor.on("submit",function(){editor.initialized&&editor.save()}),settings.add_unload_trigger&&(editor._beforeUnload=function(){!editor.initialized||editor.destroyed||editor.isHidden()||editor.save({format:"raw",no_events:!0,set_dirty:!1})},editor.editorManager.on("BeforeUnload",editor._beforeUnload)),editor.editorManager.add(editor),loadScripts(editor,editor.suffix)}}else DOM$5.bind(window,"ready",readyHandler)},$_67cz5d7cjh8lyxnm_add=function(editor,name,settings){var sidebars=editor.sidebars?editor.sidebars:[];sidebars.push({name:name,settings:settings}),editor.sidebars=sidebars},each$20=$_ahowuxkjh8lywbj.each,trim$4=$_ahowuxkjh8lywbj.trim,queryParts="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),DEFAULT_PORTS={ftp:21,http:80,https:443,mailto:25},URI=function(url,settings){var baseUri,baseUrl,self=this;if(url=trim$4(url),baseUri=(settings=self.settings=settings||{}).base_uri,/^([\w\-]+):([^\/]{2})/i.test(url)||/^\s*#/.test(url))self.source=url;else{var isProtocolRelative=0===url.indexOf("//");0!==url.indexOf("/")||isProtocolRelative||(url=(baseUri&&baseUri.protocol||"http")+"://mce_host"+url),/^[\w\-]*:?\/\//.test(url)||(baseUrl=settings.base_uri?settings.base_uri.path:new URI(document.location.href).directory,url=""==settings.base_uri.protocol?"//mce_host"+self.toAbsPath(baseUrl,url):(url=/([^#?]*)([#?]?.*)/.exec(url),(baseUri&&baseUri.protocol||"http")+"://mce_host"+self.toAbsPath(baseUrl,url[1])+url[2])),url=url.replace(/@@/g,"(mce_at)"),url=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(url),each$20(queryParts,function(v,i){var part=url[i];part&&(part=part.replace(/\(mce_at\)/g,"@@")),self[v]=part}),baseUri&&(self.protocol||(self.protocol=baseUri.protocol),self.userInfo||(self.userInfo=baseUri.userInfo),self.port||"mce_host"!==self.host||(self.port=baseUri.port),self.host&&"mce_host"!==self.host||(self.host=baseUri.host),self.source=""),isProtocolRelative&&(self.protocol="")}};URI.prototype={setPath:function(path){path=/^(.*?)\/?(\w+)?$/.exec(path),this.path=path[0],this.directory=path[1],this.file=path[2],this.source="",this.getURI()},toRelative:function(uri){var output;if("./"===uri)return uri;if("mce_host"!==(uri=new URI(uri,{base_uri:this})).host&&this.host!==uri.host&&uri.host||this.port!==uri.port||this.protocol!==uri.protocol&&""!==uri.protocol)return uri.getURI();var tu=this.getURI(),uu=uri.getURI();return tu===uu||"/"===tu.charAt(tu.length-1)&&tu.substr(0,tu.length-1)===uu?tu:(output=this.toRelPath(this.path,uri.path),uri.query&&(output+="?"+uri.query),uri.anchor&&(output+="#"+uri.anchor),output)},toAbsolute:function(uri,noHost){return(uri=new URI(uri,{base_uri:this})).getURI(noHost&&this.isSameOrigin(uri))},isSameOrigin:function(uri){if(this.host==uri.host&&this.protocol==uri.protocol){if(this.port==uri.port)return!0;var defaultPort=DEFAULT_PORTS[this.protocol];if(defaultPort&&(this.port||defaultPort)==(uri.port||defaultPort))return!0}return!1},toRelPath:function(base,path){var items,i,l,breakPoint=0,out="";if(base=(base=base.substring(0,base.lastIndexOf("/"))).split("/"),items=path.split("/"),base.length>=items.length)for(i=0,l=base.length;i<l;i++)if(i>=items.length||base[i]!==items[i]){breakPoint=i+1;break}if(base.length<items.length)for(i=0,l=items.length;i<l;i++)if(i>=base.length||base[i]!==items[i]){breakPoint=i+1;break}if(1===breakPoint)return path;for(i=0,l=base.length-(breakPoint-1);i<l;i++)out+="../";for(i=breakPoint-1,l=items.length;i<l;i++)out+=i!==breakPoint-1?"/"+items[i]:items[i];return out},toAbsPath:function(base,path){var i,tr,outPath,nb=0,o=[];for(tr=/\/$/.test(path)?"/":"",base=base.split("/"),path=path.split("/"),each$20(base,function(k){k&&o.push(k)}),base=o,i=path.length-1,o=[];0<=i;i--)0!==path[i].length&&"."!==path[i]&&(".."!==path[i]?0<nb?nb--:o.push(path[i]):nb++);return 0!==(outPath=(i=base.length-nb)<=0?o.reverse().join("/"):base.slice(0,i).join("/")+"/"+o.reverse().join("/")).indexOf("/")&&(outPath="/"+outPath),tr&&outPath.lastIndexOf("/")!==outPath.length-1&&(outPath+=tr),outPath},getURI:function(noProtoHost){var s;return this.source&&!noProtoHost||(s="",noProtoHost||(this.protocol?s+=this.protocol+"://":s+="//",this.userInfo&&(s+=this.userInfo+"@"),this.host&&(s+=this.host),this.port&&(s+=":"+this.port)),this.path&&(s+=this.path),this.query&&(s+="?"+this.query),this.anchor&&(s+="#"+this.anchor),this.source=s),this.source}},URI.parseDataUri=function(uri){var type,matches;return uri=decodeURIComponent(uri).split(","),(matches=/data:([^;]+)/.exec(uri[0]))&&(type=matches[1]),{type:type,data:uri[1]}},URI.getDocumentBaseUrl=function(loc){var baseUrl;return baseUrl=0!==loc.protocol.indexOf("http")&&"file:"!==loc.protocol?loc.href:loc.protocol+"//"+loc.host+loc.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(baseUrl)&&(baseUrl=baseUrl.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(baseUrl)||(baseUrl+="/")),baseUrl};var getContentFromBody=function(editor,args,body){var content;if(args.format=args.format?args.format:"html",args.get=!0,args.getInner=!0,args.no_events||editor.fire("BeforeGetContent",args),"raw"===args.format)content=$_ahowuxkjh8lywbj.trim($_8lol015jjh8lyxbf.trimExternal(editor.serializer,body.innerHTML));else if("text"===args.format)content=$_d383mr21jh8lywlv_trim(body.innerText||body.textContent);else{if("tree"===args.format)return editor.serializer.serialize(body,args);content=function(editor,html){var blockName=$_66vr6g2jjh8lywpf_getForcedRootBlock(editor),emptyRegExp=new RegExp("^(<"+blockName+"[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/"+blockName+">[\r\n]*|<br \\/>[\r\n]*)$");return html.replace(emptyRegExp,"")}(editor,editor.serializer.serialize(body,args))}return"text"===args.format||isWsPreserveElement($_cgttw3zjh8lywdq.fromDom(body))?args.content=content:args.content=$_ahowuxkjh8lywbj.trim(content),args.no_events||editor.fire("GetContent",args),args.content},traverse=function(node,fn){fn(node),node.firstChild&&traverse(node.firstChild,fn),node.next&&traverse(node.next,fn)},filter$3=function(nodeFilters,attributeFilters,node){var matches=function(nodeFilters,attributeFilters,node){var nodeMatches={},attrMatches={},matches=[];for(var name_1 in node.firstChild&&traverse(node.firstChild,function(node){$_5wjzy24jh8lyw2t.each(nodeFilters,function(filter){filter.name===node.name&&(nodeMatches[filter.name]?nodeMatches[filter.name].nodes.push(node):nodeMatches[filter.name]={filter:filter,nodes:[node]})}),$_5wjzy24jh8lyw2t.each(attributeFilters,function(filter){"string"==typeof node.attr(filter.name)&&(attrMatches[filter.name]?attrMatches[filter.name].nodes.push(node):attrMatches[filter.name]={filter:filter,nodes:[node]})})}),nodeMatches)nodeMatches.hasOwnProperty(name_1)&&matches.push(nodeMatches[name_1]);for(var name_2 in attrMatches)attrMatches.hasOwnProperty(name_2)&&matches.push(attrMatches[name_2]);return matches}(nodeFilters,attributeFilters,node);$_5wjzy24jh8lyw2t.each(matches,function(match){$_5wjzy24jh8lyw2t.each(match.filter.callbacks,function(callback){callback(match.nodes,match.filter.name,{})})})},isTreeNode=function(content){return content instanceof Node$2},setEditorHtml=function(editor,html){editor.dom.setHTML(editor.getBody(),html),function(editor){$_cnu79r4ejh8lyx4x_hasFocus(editor)&&$_9kvypj2cjh8lywnz.firstPositionIn(editor.getBody()).each(function(pos){var node=pos.getNode(),caretPos=$_5oonaz1qjh8lywhz.isTable(node)?$_9kvypj2cjh8lywnz.firstPositionIn(node).getOr(pos):pos;editor.selection.setRng(caretPos.toRange())})}(editor)},setContent$1=function(editor,content,args){return void 0===args&&(args={}),args.format=args.format?args.format:"html",args.set=!0,args.content=isTreeNode(content)?"":content,isTreeNode(content)||args.no_events||(editor.fire("BeforeSetContent",args),content=args.content),Option.from(editor.getBody()).fold($_eqpqvr6jh8lyw3s.constant(content),function(body){return isTreeNode(content)?function(editor,body,content,args){filter$3(editor.parser.getNodeFilters(),editor.parser.getAttributeFilters(),content);var html=HtmlSerializer({validate:editor.validate},editor.schema).serialize(content);return args.content=isWsPreserveElement($_cgttw3zjh8lywdq.fromDom(body))?html:$_ahowuxkjh8lywbj.trim(html),setEditorHtml(editor,args.content),args.no_events||editor.fire("SetContent",args),content}(editor,body,content,args):function(editor,body,content,args){var forcedRootBlockName,padd;return 0===content.length||/^\s+$/.test(content)?(padd='<br data-mce-bogus="1">',"TABLE"===body.nodeName?content="<tr><td>"+padd+"</td></tr>":/^(UL|OL)$/.test(body.nodeName)&&(content="<li>"+padd+"</li>"),(forcedRootBlockName=$_66vr6g2jjh8lywpf_getForcedRootBlock(editor))&&editor.schema.isValidChild(body.nodeName.toLowerCase(),forcedRootBlockName.toLowerCase())?(content=padd,content=editor.dom.createHTML(forcedRootBlockName,editor.settings.forced_root_block_attrs,content)):content||(content='<br data-mce-bogus="1">'),setEditorHtml(editor,content),editor.fire("SetContent",args)):("raw"!==args.format&&(content=HtmlSerializer({validate:editor.validate},editor.schema).serialize(editor.parser.parse(content,{isRootContent:!0,insert:!0}))),args.content=isWsPreserveElement($_cgttw3zjh8lywdq.fromDom(body))?content:$_ahowuxkjh8lywbj.trim(content),setEditorHtml(editor,args.content),args.no_events||editor.fire("SetContent",args)),args.content}(editor,body,content,args)})},DOM$6=DOMUtils$1.DOM,safeDestroy=function(x){return Option.from(x).each(function(x){return x.destroy()})},remove$8=function(editor){if(!editor.removed){var _selectionOverrides=editor._selectionOverrides,editorUpload=editor.editorUpload,body=editor.getBody(),element=editor.getElement();body&&editor.save(),editor.removed=!0,editor.unbindAllNativeEvents(),editor.hasHiddenInput&&element&&DOM$6.remove(element.nextSibling),!editor.inline&&body&&function(editor){DOM$6.setStyle(editor.id,"display",editor.orgDisplay)}(editor),$_a4fgrn4cjh8lyx4q_fireRemove(editor),editor.editorManager.remove(editor),DOM$6.remove(editor.getContainer()),safeDestroy(_selectionOverrides),safeDestroy(editorUpload),editor.destroy()}},destroy=function(editor,automatic){var selection=editor.selection,dom=editor.dom;editor.destroyed||(automatic||editor.removed?(automatic||(editor.editorManager.off("beforeunload",editor._beforeUnload),editor.theme&&editor.theme.destroy&&editor.theme.destroy(),safeDestroy(selection),safeDestroy(dom)),function(editor){var form=editor.formElement;form&&(form._mceOldSubmit&&(form.submit=form._mceOldSubmit,form._mceOldSubmit=null),DOM$6.unbind(form,"submit reset",editor.formEventDelegate))}(editor),function(editor){editor.contentAreaContainer=editor.formElement=editor.container=editor.editorContainer=null,editor.bodyElement=editor.contentDocument=editor.contentWindow=null,editor.iframeElement=editor.targetElm=null,editor.selection&&(editor.selection=editor.selection.win=editor.selection.dom=editor.selection.dom.doc=null)}(editor),editor.destroyed=!0):editor.remove())},DOM$7=DOMUtils$1.DOM,extend$4=$_ahowuxkjh8lywbj.extend,each$21=$_ahowuxkjh8lywbj.each,resolve$4=$_ahowuxkjh8lywbj.resolve,ie$2=$_9bpim8ajh8lyw68.ie,Editor=function(id,settings,editorManager){var self=this,documentBaseUrl=self.documentBaseUrl=editorManager.documentBaseURL,baseUri=editorManager.baseURI;settings=function(editor,id,documentBaseUrl,defaultOverrideSettings,settings){var defaultSettings=function(id,documentBaseUrl,editor){return{id:id,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:documentBaseUrl,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:editor.convertURL,url_converter_scope:editor,ie7_compat:!0}}(id,documentBaseUrl,editor);return combineSettings(isTouch,defaultSettings,defaultOverrideSettings,settings)}(self,id,documentBaseUrl,editorManager.defaultSettings,settings),self.settings=settings,AddOnManager.language=settings.language||"en",AddOnManager.languageLoad=settings.language_load,AddOnManager.baseURL=editorManager.baseURL,self.id=id,self.setDirty(!1),self.plugins={},self.documentBaseURI=new URI(settings.document_base_url,{base_uri:baseUri}),self.baseURI=baseUri,self.contentCSS=[],self.contentStyles=[],self.shortcuts=new Shortcuts(self),self.loadedCSS={},self.editorCommands=new EditorCommands(self),self.suffix=editorManager.suffix,self.editorManager=editorManager,self.inline=settings.inline,self.buttons={},self.menuItems={},settings.cache_suffix&&($_9bpim8ajh8lyw68.cacheSuffix=settings.cache_suffix.replace(/^[\?\&]+/,"")),!1===settings.override_viewport&&($_9bpim8ajh8lyw68.overrideViewPort=!1),editorManager.fire("SetupEditor",{editor:self}),self.execCallback("setup",self),self.$=DomQuery.overrideDefaults(function(){return{context:self.inline?self.getBody():self.getDoc(),element:self.getBody()}})};extend$4(Editor.prototype={render:function(){$_64g0n44hjh8lyx5e_render(this)},focus:function(skipFocus){$_cnu79r4ejh8lyx4x_focus(this,skipFocus)},hasFocus:function(){return $_cnu79r4ejh8lyx4x_hasFocus(this)},execCallback:function(name){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];var scope,callback=this.settings[name];if(callback)return this.callbackLookup&&(scope=this.callbackLookup[name])&&(callback=scope.func,scope=scope.scope),"string"==typeof callback&&(scope=(scope=callback.replace(/\.\w+$/,""))?resolve$4(scope):0,callback=resolve$4(callback),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[name]={func:callback,scope:scope}),callback.apply(scope||this,Array.prototype.slice.call(arguments,1))},translate:function(text){if(text&&$_ahowuxkjh8lywbj.is(text,"string")){var lang_1=this.settings.language||"en",i18n_1=this.editorManager.i18n;text=i18n_1.data[lang_1+"."+text]||text.replace(/\{\#([^\}]+)\}/g,function(a,b){return i18n_1.data[lang_1+"."+b]||"{#"+b+"}"})}return this.editorManager.translate(text)},getLang:function(name,defaultVal){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+name]||(void 0!==defaultVal?defaultVal:"{#"+name+"}")},getParam:function(name,defaultVal,type){return getParam(this,name,defaultVal,type)},nodeChanged:function(args){this._nodeChangeDispatcher.nodeChanged(args)},addButton:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),settings.stateSelector&&void 0===settings.active&&(settings.active=!1),settings.text||settings.icon||(settings.icon=name),self.buttons=self.buttons,settings.tooltip=settings.tooltip||settings.title,self.buttons[name]=settings},addSidebar:function(name,settings){return $_67cz5d7cjh8lyxnm_add(this,name,settings)},addMenuItem:function(name,settings){var self=this;settings.cmd&&(settings.onclick=function(){self.execCommand(settings.cmd)}),self.menuItems=self.menuItems,self.menuItems[name]=settings},addContextToolbar:function(predicate,items){var selector,self=this;self.contextToolbars=self.contextToolbars||[],"string"==typeof predicate&&(selector=predicate,predicate=function(elm){return self.dom.is(elm,selector)}),self.contextToolbars.push({id:$_co2y7g52jh8lyx8f.uuid("mcet"),predicate:predicate,items:items})},addCommand:function(name,callback,scope){this.editorCommands.addCommand(name,callback,scope)},addQueryStateHandler:function(name,callback,scope){this.editorCommands.addQueryStateHandler(name,callback,scope)},addQueryValueHandler:function(name,callback,scope){this.editorCommands.addQueryValueHandler(name,callback,scope)},addShortcut:function(pattern,desc,cmdFunc,scope){this.shortcuts.add(pattern,desc,cmdFunc,scope)},execCommand:function(cmd,ui,value,args){return this.editorCommands.execCommand(cmd,ui,value,args)},queryCommandState:function(cmd){return this.editorCommands.queryCommandState(cmd)},queryCommandValue:function(cmd){return this.editorCommands.queryCommandValue(cmd)},queryCommandSupported:function(cmd){return this.editorCommands.queryCommandSupported(cmd)},show:function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable=!0:(DOM$7.show(this.getContainer()),DOM$7.hide(this.id)),this.load(),this.fire("show"))},hide:function(){var doc=this.getDoc();this.hidden||(ie$2&&doc&&!this.inline&&doc.execCommand("SelectAll"),this.save(),this.inline?(this.getBody().contentEditable=!1,this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(DOM$7.hide(this.getContainer()),DOM$7.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(state,time){this.fire("ProgressState",{state:state,time:time})},load:function(args){var html,elm=this.getElement();return this.removed?"":elm?((args=args||{}).load=!0,html=this.setContent(void 0!==elm.value?elm.value:elm.innerHTML,args),args.element=elm,args.no_events||this.fire("LoadContent",args),args.element=elm=null,html):void 0},save:function(args){var html,form,self=this,elm=self.getElement();if(elm&&self.initialized&&!self.removed)return(args=args||{}).save=!0,args.element=elm,args.content=self.getContent(args),args.no_events||self.fire("SaveContent",args),"raw"===args.format&&self.fire("RawSaveContent",args),html=args.content,/TEXTAREA|INPUT/i.test(elm.nodeName)?elm.value=html:(self.inline||(elm.innerHTML=html),(form=DOM$7.getParent(self.id,"form"))&&each$21(form.elements,function(elm){if(elm.name===self.id)return elm.value=html,!1})),args.element=elm=null,!1!==args.set_dirty&&self.setDirty(!1),html},setContent:function(content,args){return setContent$1(this,content,args)},getContent:function(args){return function(editor,args){return void 0===args&&(args={}),Option.from(editor.getBody()).fold($_eqpqvr6jh8lyw3s.constant("tree"===args.format?new Node$2("body",11):""),function(body){return getContentFromBody(editor,args,body)})}(this,args)},insertContent:function(content,args){args&&(content=extend$4({content:content},args)),this.execCommand("mceInsertContent",!1,content)},isDirty:function(){return!this.isNotDirty},setDirty:function(state){var oldState=!this.isNotDirty;this.isNotDirty=!state,state&&state!==oldState&&this.fire("dirty")},setMode:function(mode){!function(editor,mode){mode!==getMode(editor)&&(editor.initialized?toggleReadOnly(editor,"readonly"===mode):editor.on("init",function(){toggleReadOnly(editor,"readonly"===mode)}),$_a4fgrn4cjh8lyx4q_fireSwitchMode(editor,mode))}(this,mode)},getContainer:function(){return this.container||(this.container=DOM$7.get(this.editorContainer||this.id+"_parent")),this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=DOM$7.get(this.id)),this.targetElm},getWin:function(){var elm;return this.contentWindow||(elm=this.iframeElement)&&(this.contentWindow=elm.contentWindow),this.contentWindow},getDoc:function(){var win;return this.contentDocument||(win=this.getWin())&&(this.contentDocument=win.document),this.contentDocument},getBody:function(){var doc=this.getDoc();return this.bodyElement||(doc?doc.body:null)},convertURL:function(url,name,elm){var settings=this.settings;return settings.urlconverter_callback?this.execCallback("urlconverter_callback",url,elm,!0,name):!settings.convert_urls||elm&&"LINK"===elm.nodeName||0===url.indexOf("file:")||0===url.length?url:settings.relative_urls?this.documentBaseURI.toRelative(url):url=this.documentBaseURI.toAbsolute(url,settings.remove_script_host)},addVisual:function(elm){var cls,self=this,settings=self.settings,dom=self.dom;elm=elm||self.getBody(),void 0===self.hasVisual&&(self.hasVisual=settings.visual),each$21(dom.select("table,a",elm),function(elm){var value;switch(elm.nodeName){case"TABLE":return cls=settings.visual_table_class||"mce-item-table",void((value=dom.getAttrib(elm,"border"))&&"0"!==value||!self.hasVisual?dom.removeClass(elm,cls):dom.addClass(elm,cls));case"A":return void(dom.getAttrib(elm,"href")||(value=dom.getAttrib(elm,"name")||elm.id,cls=settings.visual_anchor_class||"mce-item-anchor",value&&self.hasVisual?dom.addClass(elm,cls):dom.removeClass(elm,cls)))}}),self.fire("VisualAid",{element:elm,hasVisual:self.hasVisual})},remove:function(){remove$8(this)},destroy:function(automatic){destroy(this,automatic)},uploadImages:function(callback){return this.editorUpload.uploadImages(callback)},_scanForImages:function(){return this.editorUpload.scanForImages()}},EditorObservable$1);var documentFocusInHandler,beforeUnloadDelegate,EditorManager,$_bmt26v7ljh8lyxp9={isEditorUIElement:function(elm){return-1!==elm.className.toString().indexOf("mce-")}},registerEditorEvents=function(editor,throttledStore){$_9hkktfnjh8lywc6.detect().browser.isIE()?function(editor){editor.on("focusout",function(){$_eqs11m40jh8lyx31_store(editor)})}(editor):function(editor,throttledStore){editor.on("mouseup touchend",function(e){throttledStore.throttle()})}(editor,throttledStore),editor.on("keyup nodechange",function(e){(function(e){return"nodechange"===e.type&&e.selectionChange})(e)||$_eqs11m40jh8lyx31_store(editor)})},$_2mabdn7mjh8lyxpa_register=function(editor){var throttledStore=$_de600j5fjh8lyxas_first(function(){$_eqs11m40jh8lyx31_store(editor)},0);editor.inline&&function(editor,throttledStore){var mouseUpPage=function(){throttledStore.throttle()};DOMUtils$1.DOM.bind(document,"mouseup",mouseUpPage),editor.on("remove",function(){DOMUtils$1.DOM.unbind(document,"mouseup",mouseUpPage)})}(editor,throttledStore),editor.on("init",function(){registerEditorEvents(editor,throttledStore)}),editor.on("remove",function(){throttledStore.cancel()})},DOM$8=DOMUtils$1.DOM,isEditorUIElement$1=function(elm){return $_bmt26v7ljh8lyxp9.isEditorUIElement(elm)},isUIElement=function(editor,elm){var customSelector=editor?editor.settings.custom_ui_selector:"";return null!==DOM$8.getParent(elm,function(elm){return isEditorUIElement$1(elm)||!!customSelector&&editor.dom.is(elm,customSelector)})},registerEvents=function(editorManager,e){var editor=e.editor;$_2mabdn7mjh8lyxpa_register(editor),editor.on("focusin",function(){var focusedEditor=editorManager.focusedEditor;focusedEditor!==this&&(focusedEditor&&focusedEditor.fire("blur",{focusedEditor:this}),editorManager.setActive(this),(editorManager.focusedEditor=this).fire("focus",{blurredEditor:focusedEditor}),this.focus(!0))}),editor.on("focusout",function(){var self=this;$_8sy3pfhjh8lyw95.setEditorTimeout(self,function(){var focusedEditor=editorManager.focusedEditor;isUIElement(self,function(){try{return document.activeElement}catch(ex){return document.body}}())||focusedEditor!==self||(self.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null)})}),documentFocusInHandler||(documentFocusInHandler=function(e){var target,activeEditor=editorManager.activeEditor;target=e.target,activeEditor&&target.ownerDocument===document&&(target===document.body||isUIElement(activeEditor,target)||editorManager.focusedEditor!==activeEditor||(activeEditor.fire("blur",{focusedEditor:null}),editorManager.focusedEditor=null))},DOM$8.bind(document,"focusin",documentFocusInHandler))},unregisterDocumentEvents=function(editorManager,e){editorManager.focusedEditor===e.editor&&(editorManager.focusedEditor=null),editorManager.activeEditor||(DOM$8.unbind(document,"focusin",documentFocusInHandler),documentFocusInHandler=null)},$_k2ieq7kjh8lyxp5_setup=function(editorManager){editorManager.on("AddEditor",$_eqpqvr6jh8lyw3s.curry(registerEvents,editorManager)),editorManager.on("RemoveEditor",$_eqpqvr6jh8lyw3s.curry(unregisterDocumentEvents,editorManager))},data={},code="en",$_1tjgyr7njh8lyxpg={setCode:function(newCode){newCode&&(code=newCode,this.rtl=!!this.data[newCode]&&"rtl"===this.data[newCode]._dir)},getCode:function(){return code},rtl:!1,add:function(code,items){var langData=data[code];for(var name_1 in langData||(data[code]=langData={}),items)langData[name_1]=items[name_1];this.setCode(code)},translate:function(text){var langData=data[code]||{},toString=function(obj){return $_ahowuxkjh8lywbj.is(obj,"function")?Object.prototype.toString.call(obj):isEmpty(obj)?"":""+obj},isEmpty=function(text){return""===text||null===text||$_ahowuxkjh8lywbj.is(text,"undefined")},getLangData=function(text){return text=toString(text),$_ahowuxkjh8lywbj.hasOwn(langData,text)?toString(langData[text]):text};if(isEmpty(text))return"";if($_ahowuxkjh8lywbj.is(text,"object")&&$_ahowuxkjh8lywbj.hasOwn(text,"raw"))return toString(text.raw);if($_ahowuxkjh8lywbj.is(text,"array")){var values_1=text.slice(1);text=getLangData(text[0]).replace(/\{([0-9]+)\}/g,function($1,$2){return $_ahowuxkjh8lywbj.hasOwn(values_1,$2)?toString(values_1[$2]):$1})}return getLangData(text).replace(/{context:\w+}$/,"")},data:data},DOM$9=DOMUtils$1.DOM,explode$4=$_ahowuxkjh8lywbj.explode,each$22=$_ahowuxkjh8lywbj.each,extend$5=$_ahowuxkjh8lywbj.extend,instanceCounter=0,boundGlobalEvents=!1,legacyEditors=[],editors=[],globalEventDelegate=function(e){each$22(EditorManager.get(),function(editor){"scroll"===e.type?editor.fire("ScrollWindow",e):editor.fire("ResizeWindow",e)})},toggleGlobalEvents=function(state){state!==boundGlobalEvents&&(state?DomQuery(window).on("resize scroll",globalEventDelegate):DomQuery(window).off("resize scroll",globalEventDelegate),boundGlobalEvents=state)},removeEditorFromList=function(targetEditor){var oldEditors=editors;delete legacyEditors[targetEditor.id];for(var i=0;i<legacyEditors.length;i++)if(legacyEditors[i]===targetEditor){legacyEditors.splice(i,1);break}return editors=$_5wjzy24jh8lyw2t.filter(editors,function(editor){return targetEditor!==editor}),EditorManager.activeEditor===targetEditor&&(EditorManager.activeEditor=0<editors.length?editors[0]:null),EditorManager.focusedEditor===targetEditor&&(EditorManager.focusedEditor=null),oldEditors.length!==editors.length};extend$5(EditorManager={defaultSettings:{},$:DomQuery,majorVersion:"4",minorVersion:"7.13",releaseDate:"2018-05-16",editors:legacyEditors,i18n:$_1tjgyr7njh8lyxpg,activeEditor:null,settings:{},setup:function(){var baseURL,documentBaseURL,preInit,src,suffix="";if(documentBaseURL=URI.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(documentBaseURL)&&(documentBaseURL=documentBaseURL.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(documentBaseURL)||(documentBaseURL+="/")),preInit=window.tinymce||window.tinyMCEPreInit)baseURL=preInit.base||preInit.baseURL,suffix=preInit.suffix;else{for(var scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++){var srcScript=(src=scripts[i].src).substring(src.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(src)){-1!==srcScript.indexOf(".min")&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/"));break}}!baseURL&&document.currentScript&&(-1!==(src=document.currentScript.src).indexOf(".min")&&(suffix=".min"),baseURL=src.substring(0,src.lastIndexOf("/")))}this.baseURL=new URI(documentBaseURL).toAbsolute(baseURL),this.documentBaseURL=documentBaseURL,this.baseURI=new URI(this.baseURL),this.suffix=suffix,$_k2ieq7kjh8lyxp5_setup(this)},overrideDefaults:function(defaultSettings){var baseUrl,suffix;(baseUrl=defaultSettings.base_url)&&(this.baseURL=new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\/+$/,"")),this.baseURI=new URI(this.baseURL)),suffix=defaultSettings.suffix,defaultSettings.suffix&&(this.suffix=suffix);var pluginBaseUrls=(this.defaultSettings=defaultSettings).plugin_base_urls;for(var name_1 in pluginBaseUrls)AddOnManager.PluginManager.urls[name_1]=pluginBaseUrls[name_1]},init:function(settings){var result,invalidInlineTargets,self=this;invalidInlineTargets=$_ahowuxkjh8lywbj.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu"," ");var createId=function(elm){var id=elm.id;return id||(id=(id=elm.name)&&!DOM$9.get(id)?elm.name:DOM$9.uniqueId(),elm.setAttribute("id",id)),id},hasClass=function(elm,className){return className.constructor===RegExp?className.test(elm.className):DOM$9.hasClass(elm,className)},provideResults=function(editors){result=editors},initEditors=function(){var targets,initCount=0,editors=[],createEditor=function(id,settings,targetElm){var editor=new Editor(id,settings,self);editors.push(editor),editor.on("init",function(){++initCount===targets.length&&provideResults(editors)}),editor.targetElm=editor.targetElm||targetElm,editor.render()};DOM$9.unbind(window,"ready",initEditors),function(name){var callback=settings[name];callback&&callback.apply(self,Array.prototype.slice.call(arguments,2))}("onpageload"),targets=DomQuery.unique(function(settings){var l,targets=[];if($_9bpim8ajh8lyw68.ie&&$_9bpim8ajh8lyw68.ie<11)return $_5vy074njh8lyx6h_initError("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(settings.types)return each$22(settings.types,function(type){targets=targets.concat(DOM$9.select(type.selector))}),targets;if(settings.selector)return DOM$9.select(settings.selector);if(settings.target)return[settings.target];switch(settings.mode){case"exact":0<(l=settings.elements||"").length&&each$22(explode$4(l),function(id){var elm;(elm=DOM$9.get(id))?targets.push(elm):each$22(document.forms,function(f){each$22(f.elements,function(e){e.name===id&&(id="mce_editor_"+instanceCounter++,DOM$9.setAttrib(e,"id",id),targets.push(e))})})});break;case"textareas":case"specific_textareas":each$22(DOM$9.select("textarea"),function(elm){settings.editor_deselector&&hasClass(elm,settings.editor_deselector)||settings.editor_selector&&!hasClass(elm,settings.editor_selector)||targets.push(elm)})}return targets}(settings)),settings.types?each$22(settings.types,function(type){$_ahowuxkjh8lywbj.each(targets,function(elm){return!DOM$9.is(elm,type.selector)||(createEditor(createId(elm),extend$5({},settings,type),elm),!1)})}):($_ahowuxkjh8lywbj.each(targets,function(elm){var editor;(editor=self.get(elm.id))&&editor.initialized&&!(editor.getContainer()||editor.getBody()).parentNode&&(removeEditorFromList(editor),editor.unbindAllNativeEvents(),editor.destroy(!0),editor.removed=!0,editor=null)}),0===(targets=$_ahowuxkjh8lywbj.grep(targets,function(elm){return!self.get(elm.id)})).length?provideResults([]):each$22(targets,function(elm){!function(settings,elm){return settings.inline&&elm.tagName.toLowerCase()in invalidInlineTargets}(settings,elm)?createEditor(createId(elm),settings,elm):$_5vy074njh8lyx6h_initError("Could not initialize inline editor on invalid inline target element",elm)}))};return self.settings=settings,DOM$9.bind(window,"ready",initEditors),new promiseObj(function(resolve){result?resolve(result):provideResults=function(editors){resolve(editors)}})},get:function(id){return 0===arguments.length?editors.slice(0):$_dp4g6d7jh8lyw3y.isString(id)?$_5wjzy24jh8lyw2t.find(editors,function(editor){return editor.id===id}).getOr(null):$_dp4g6d7jh8lyw3y.isNumber(id)&&editors[id]?editors[id]:null},add:function(editor){var self=this;return legacyEditors[editor.id]===editor||(null===self.get(editor.id)&&("length"!==editor.id&&(legacyEditors[editor.id]=editor),legacyEditors.push(editor),editors.push(editor)),toggleGlobalEvents(!0),self.activeEditor=editor,self.fire("AddEditor",{editor:editor}),beforeUnloadDelegate||(beforeUnloadDelegate=function(){self.fire("BeforeUnload")},DOM$9.bind(window,"beforeunload",beforeUnloadDelegate))),editor},createEditor:function(id,settings){return this.add(new Editor(id,settings,this))},remove:function(selector){var i,editor,self=this;if(selector)return $_dp4g6d7jh8lyw3y.isString(selector)?(selector=selector.selector||selector,void each$22(DOM$9.select(selector),function(elm){(editor=self.get(elm.id))&&self.remove(editor)})):(editor=selector,$_dp4g6d7jh8lyw3y.isNull(self.get(editor.id))?null:(removeEditorFromList(editor)&&self.fire("RemoveEditor",{editor:editor}),0===editors.length&&DOM$9.unbind(window,"beforeunload",beforeUnloadDelegate),editor.remove(),toggleGlobalEvents(0<editors.length),editor));for(i=editors.length-1;0<=i;i--)self.remove(editors[i])},execCommand:function(cmd,ui,value){var editor=this.get(value);switch(cmd){case"mceAddEditor":return this.get(value)||new Editor(value,this.settings,this).render(),!0;case"mceRemoveEditor":return editor&&editor.remove(),!0;case"mceToggleEditor":return editor?editor.isHidden()?editor.show():editor.hide():this.execCommand("mceAddEditor",0,value),!0}return!!this.activeEditor&&this.activeEditor.execCommand(cmd,ui,value)},triggerSave:function(){each$22(editors,function(editor){editor.save()})},addI18n:function(code,items){$_1tjgyr7njh8lyxpg.add(code,items)},translate:function(text){return $_1tjgyr7njh8lyxpg.translate(text)},setActive:function(editor){var activeEditor=this.activeEditor;this.activeEditor!==editor&&(activeEditor&&activeEditor.fire("deactivate",{relatedTarget:editor}),editor.fire("activate",{relatedTarget:activeEditor})),this.activeEditor=editor}},$_fuzxjg45jh8lyx45),EditorManager.setup();var EditorManager$1=EditorManager;function RangeUtils(dom){return{walk:function(rng,callback){return $_90itx05zjh8lyxeq_walk(dom,rng,callback)},split:$_5hrcpr5vjh8lyxe2_split,normalize:function(rng){return $_4v2pn63yjh8lyx2s_normalize(dom,rng).fold($_eqpqvr6jh8lyw3s.constant(!1),function(normalizedRng){return rng.setStart(normalizedRng.startContainer,normalizedRng.startOffset),rng.setEnd(normalizedRng.endContainer,normalizedRng.endOffset),!0})}}}!function(RangeUtils){RangeUtils.compareRanges=$_aayq8q3zjh8lyx2z_isEq,RangeUtils.getCaretRangeFromPoint=$_ct0ht56jjh8lyxif_fromPoint,RangeUtils.getSelectedNode=getSelectedNode,RangeUtils.getNode=getNode}(RangeUtils||(RangeUtils={}));var extendClass,initializing,RangeUtils$1=RangeUtils,min=Math.min,max=Math.max,round$2=Math.round,relativePosition=function(rect,targetRect,rel){var x,y,w,h,targetW,targetH;return x=targetRect.x,y=targetRect.y,w=rect.w,h=rect.h,targetW=targetRect.w,targetH=targetRect.h,"b"===(rel=(rel||"").split(""))[0]&&(y+=targetH),"r"===rel[1]&&(x+=targetW),"c"===rel[0]&&(y+=round$2(targetH/2)),"c"===rel[1]&&(x+=round$2(targetW/2)),"b"===rel[3]&&(y-=h),"r"===rel[4]&&(x-=w),"c"===rel[3]&&(y-=round$2(h/2)),"c"===rel[4]&&(x-=round$2(w/2)),create$2(x,y,w,h)},create$2=function(x,y,w,h){return{x:x,y:y,w:w,h:h}},$_fa0t9p7pjh8lyxpo={inflate:function(rect,w,h){return create$2(rect.x-w,rect.y-h,rect.w+2*w,rect.h+2*h)},relativePosition:relativePosition,findBestRelativePosition:function(rect,targetRect,constrainRect,rels){var pos,i;for(i=0;i<rels.length;i++)if((pos=relativePosition(rect,targetRect,rels[i])).x>=constrainRect.x&&pos.x+pos.w<=constrainRect.w+constrainRect.x&&pos.y>=constrainRect.y&&pos.y+pos.h<=constrainRect.h+constrainRect.y)return rels[i];return null},intersect:function(rect,cropRect){var x1,y1,x2,y2;return x1=max(rect.x,cropRect.x),y1=max(rect.y,cropRect.y),x2=min(rect.x+rect.w,cropRect.x+cropRect.w),y2=min(rect.y+rect.h,cropRect.y+cropRect.h),x2-x1<0||y2-y1<0?null:create$2(x1,y1,x2-x1,y2-y1)},clamp:function(rect,clampRect,fixedSize){var underflowX1,underflowY1,overflowX2,overflowY2,x1,y1,x2,y2,cx2,cy2;return x1=rect.x,y1=rect.y,x2=rect.x+rect.w,y2=rect.y+rect.h,cx2=clampRect.x+clampRect.w,cy2=clampRect.y+clampRect.h,underflowX1=max(0,clampRect.x-x1),underflowY1=max(0,clampRect.y-y1),overflowX2=max(0,x2-cx2),overflowY2=max(0,y2-cy2),x1+=underflowX1,y1+=underflowY1,fixedSize&&(x2+=underflowX1,y2+=underflowY1,x1-=overflowX2,y1-=overflowY2),create$2(x1,y1,(x2-=overflowX2)-x1,(y2-=overflowY2)-y1)},create:create$2,fromClientRect:function(clientRect){return create$2(clientRect.left,clientRect.top,clientRect.width,clientRect.height)}},types={},$_fym6l27qjh8lyxpr={add:function(type,typeClass){types[type.toLowerCase()]=typeClass},has:function(type){return!!types[type.toLowerCase()]},get:function(type){var lctype=type.toLowerCase(),controlType=types.hasOwnProperty(lctype)?types[lctype]:null;if(null===controlType)throw new Error("Could not find module for type: "+type);return controlType},create:function(type,settings){var ControlType;if("string"==typeof type?(settings=settings||{}).type=type:type=(settings=type).type,type=type.toLowerCase(),!(ControlType=types[type]))throw new Error("Could not find control by type: "+type);return(ControlType=new ControlType(settings)).type=type,ControlType}},each$23=$_ahowuxkjh8lywbj.each,extend$6=$_ahowuxkjh8lywbj.extend,Class$1=function(){};Class$1.extend=extendClass=function(prop){var prototype,name,member,_super=this.prototype,Class=function(){var i,mixins,mixin;if(!initializing&&(this.init&&this.init.apply(this,arguments),mixins=this.Mixins))for(i=mixins.length;i--;)(mixin=mixins[i]).init&&mixin.init.apply(this,arguments)},dummy=function(){return this},createMethod=function(name,fn){return function(){var ret,tmp=this._super;return this._super=_super[name],ret=fn.apply(this,arguments),this._super=tmp,ret}};for(name in initializing=!0,prototype=new this,initializing=!1,prop.Mixins&&(each$23(prop.Mixins,function(mixin){for(var name_1 in mixin)"init"!==name_1&&(prop[name_1]=mixin[name_1])}),_super.Mixins&&(prop.Mixins=_super.Mixins.concat(prop.Mixins))),prop.Methods&&each$23(prop.Methods.split(","),function(name){prop[name]=dummy}),prop.Properties&&each$23(prop.Properties.split(","),function(name){var fieldName="_"+name;prop[name]=function(value){return void 0!==value?(this[fieldName]=value,this):this[fieldName]}}),prop.Statics&&each$23(prop.Statics,function(func,name){Class[name]=func}),prop.Defaults&&_super.Defaults&&(prop.Defaults=extend$6({},_super.Defaults,prop.Defaults)),prop)"function"==typeof(member=prop[name])&&_super[name]?prototype[name]=createMethod(name,member):prototype[name]=member;return Class.prototype=prototype,(Class.constructor=Class).extend=extendClass,Class};var min$1=Math.min,max$1=Math.max,round$3=Math.round,serialize=function(o,quote){var i,v,t,name;if(quote=quote||'"',null===o)return"null";if("string"==(t=typeof o))return v="\bb\tt\nn\ff\rr\"\"''\\\\",quote+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){return'"'===quote&&"'"===a?a:(i=v.indexOf(b))+1?"\\"+v.charAt(i+1):(a=b.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a)})+quote;if("object"!==t)return""+o;if(o.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(o)){for(i=0,v="[";i<o.length;i++)v+=(0<i?",":"")+serialize(o[i],quote);return v+"]"}for(name in v="{",o)o.hasOwnProperty(name)&&(v+="function"!=typeof o[name]?(1<v.length?","+quote:quote)+name+quote+":"+serialize(o[name],quote):"");return v+"}"},$_7z82167tjh8lyxq1={serialize:serialize,parse:function(text){try{return JSON.parse(text)}catch(ex){}}},$_2v08kz7ujh8lyxq4={callbacks:{},count:0,send:function(settings){var self=this,dom=DOMUtils$1.DOM,count=void 0!==settings.count?settings.count:self.count,id="tinymce_jsonp_"+count;self.callbacks[count]=function(json){dom.remove(id),delete self.callbacks[count],settings.callback(json)},dom.add(dom.doc.body,"script",{id:id,src:settings.url,type:"text/javascript"}),self.count++}},XHR={send:function(settings){var xhr,count=0,ready=function(){!settings.async||4===xhr.readyState||1e4<count++?(settings.success&&count<1e4&&200===xhr.status?settings.success.call(settings.success_scope,""+xhr.responseText,xhr,settings):settings.error&&settings.error.call(settings.error_scope,1e4<count?"TIMED_OUT":"GENERAL",xhr,settings),xhr=null):setTimeout(ready,10)};if(settings.scope=settings.scope||this,settings.success_scope=settings.success_scope||settings.scope,settings.error_scope=settings.error_scope||settings.scope,settings.async=!1!==settings.async,settings.data=settings.data||"",XHR.fire("beforeInitialize",{settings:settings}),xhr=new XMLHttpRequest){if(xhr.overrideMimeType&&xhr.overrideMimeType(settings.content_type),xhr.open(settings.type||(settings.data?"POST":"GET"),settings.url,settings.async),settings.crossDomain&&(xhr.withCredentials=!0),settings.content_type&&xhr.setRequestHeader("Content-Type",settings.content_type),settings.requestheaders&&$_ahowuxkjh8lywbj.each(settings.requestheaders,function(header){xhr.setRequestHeader(header.key,header.value)}),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),(xhr=XHR.fire("beforeSend",{xhr:xhr,settings:settings}).xhr).send(settings.data),!settings.async)return ready();setTimeout(ready,10)}}};$_ahowuxkjh8lywbj.extend(XHR,$_fuzxjg45jh8lyx45);var extend$7=$_ahowuxkjh8lywbj.extend,JSONRequest=function(settings){this.settings=extend$7({},settings),this.count=0};JSONRequest.sendRPC=function(o){return(new JSONRequest).send(o)},JSONRequest.prototype={send:function(args){var ecb=args.error,scb=args.success;(args=extend$7(this.settings,args)).success=function(c,x){void 0===(c=$_7z82167tjh8lyxq1.parse(c))&&(c={error:"JSON Parse error."}),c.error?ecb.call(args.error_scope||args.scope,c.error,x):scb.call(args.success_scope||args.scope,c.result)},args.error=function(ty,x){ecb&&ecb.call(args.error_scope||args.scope,ty,x)},args.data=$_7z82167tjh8lyxq1.serialize({id:args.id||"c"+this.count++,method:args.method,params:args.params}),args.content_type="application/json",XHR.send(args)}};var localStorage=window.localStorage,tinymce=EditorManager$1,publicApi={geom:{Rect:$_fa0t9p7pjh8lyxpo},util:{Promise:promiseObj,Delay:$_8sy3pfhjh8lyw95,Tools:$_ahowuxkjh8lywbj,VK:$_6lsk4i5gjh8lyxau,URI:URI,Class:Class$1,EventDispatcher:Dispatcher,Observable:$_fuzxjg45jh8lyx45,I18n:$_1tjgyr7njh8lyxpg,XHR:XHR,JSON:$_7z82167tjh8lyxq1,JSONRequest:JSONRequest,JSONP:$_2v08kz7ujh8lyxq4,LocalStorage:localStorage,Color:function(value){var self={},r=0,g=0,b=0,parse=function(value){var matches;return"object"==typeof value?"r"in value?(r=value.r,g=value.g,b=value.b):"v"in value&&function(hue,saturation,brightness){var side,chroma,x,match;if(hue=(parseInt(hue,10)||0)%360,saturation=parseInt(saturation,10)/100,brightness=parseInt(brightness,10)/100,saturation=max$1(0,min$1(saturation,1)),brightness=max$1(0,min$1(brightness,1)),0!==saturation){switch(side=hue/60,x=(chroma=brightness*saturation)*(1-Math.abs(side%2-1)),match=brightness-chroma,Math.floor(side)){case 0:r=chroma,g=x,b=0;break;case 1:r=x,g=chroma,b=0;break;case 2:r=0,g=chroma,b=x;break;case 3:r=0,g=x,b=chroma;break;case 4:r=x,g=0,b=chroma;break;case 5:r=chroma,g=0,b=x;break;default:r=g=b=0}r=round$3(255*(r+match)),g=round$3(255*(g+match)),b=round$3(255*(b+match))}else r=g=b=round$3(255*brightness)}(value.h,value.s,value.v):(matches=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(value))?(r=parseInt(matches[1],10),g=parseInt(matches[2],10),b=parseInt(matches[3],10)):(matches=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value))?(r=parseInt(matches[1],16),g=parseInt(matches[2],16),b=parseInt(matches[3],16)):(matches=/#([0-F])([0-F])([0-F])/gi.exec(value))&&(r=parseInt(matches[1]+matches[1],16),g=parseInt(matches[2]+matches[2],16),b=parseInt(matches[3]+matches[3],16)),r=r<0?0:255<r?255:r,g=g<0?0:255<g?255:g,b=b<0?0:255<b?255:b,self};return value&&parse(value),self.toRgb=function(){return{r:r,g:g,b:b}},self.toHsv=function(){return function(r,g,b){var s,v,minRGB,maxRGB;return v=0,(minRGB=min$1(r/=255,min$1(g/=255,b/=255)))===(maxRGB=max$1(r,max$1(g,b)))?{h:0,s:0,v:100*(v=minRGB)}:(s=(maxRGB-minRGB)/maxRGB,{h:round$3(60*((r===minRGB?3:b===minRGB?1:5)-(r===minRGB?g-b:b===minRGB?r-g:b-r)/((v=maxRGB)-minRGB))),s:round$3(100*s),v:round$3(100*v)})}(r,g,b)},self.toHex=function(){var hex=function(val){return 1<(val=parseInt(val,10).toString(16)).length?val:"0"+val};return"#"+hex(r)+hex(g)+hex(b)},self.parse=parse,self}},dom:{EventUtils:EventUtils,Sizzle:Sizzle,DomQuery:DomQuery,TreeWalker:TreeWalker,DOMUtils:DOMUtils$1,ScriptLoader:ScriptLoader,RangeUtils:RangeUtils$1,Serializer:DomSerializer$1,ControlSelection:ControlSelection,BookmarkManager:BookmarkManager$1,Selection:Selection$1,Event:EventUtils.Event},html:{Styles:Styles,Entities:$_gex7a11rjh8lywi4,Node:Node$2,Schema:Schema,SaxParser:SaxParser$1,DomParser:DomParser,Writer:Writer,Serializer:HtmlSerializer},ui:{Factory:$_fym6l27qjh8lyxpr},Env:$_9bpim8ajh8lyw68,AddOnManager:AddOnManager,Formatter:Formatter,UndoManager:UndoManager,EditorCommands:EditorCommands,WindowManager:WindowManager,NotificationManager:NotificationManager,EditorObservable:EditorObservable$1,Shortcuts:Shortcuts,Editor:Editor,FocusManager:$_bmt26v7ljh8lyxp9,EditorManager:EditorManager$1,DOM:DOMUtils$1.DOM,ScriptLoader:ScriptLoader.ScriptLoader,PluginManager:AddOnManager.PluginManager,ThemeManager:AddOnManager.ThemeManager,trim:$_ahowuxkjh8lywbj.trim,isArray:$_ahowuxkjh8lywbj.isArray,is:$_ahowuxkjh8lywbj.is,toArray:$_ahowuxkjh8lywbj.toArray,makeMap:$_ahowuxkjh8lywbj.makeMap,each:$_ahowuxkjh8lywbj.each,map:$_ahowuxkjh8lywbj.map,grep:$_ahowuxkjh8lywbj.grep,inArray:$_ahowuxkjh8lywbj.inArray,extend:$_ahowuxkjh8lywbj.extend,create:$_ahowuxkjh8lywbj.create,walk:$_ahowuxkjh8lywbj.walk,createNS:$_ahowuxkjh8lywbj.createNS,resolve:$_ahowuxkjh8lywbj.resolve,explode:$_ahowuxkjh8lywbj.explode,_addCacheSuffix:$_ahowuxkjh8lywbj._addCacheSuffix,isOpera:$_9bpim8ajh8lyw68.opera,isWebKit:$_9bpim8ajh8lyw68.webkit,isIE:$_9bpim8ajh8lyw68.ie,isGecko:$_9bpim8ajh8lyw68.gecko,isMac:$_9bpim8ajh8lyw68.mac},Tinymce=tinymce=$_ahowuxkjh8lywbj.extend(tinymce,publicApi);!function(tinymce){window.tinymce=tinymce,window.tinyMCE=tinymce}(Tinymce),function(tinymce){if("object"==typeof module)try{module.exports=tinymce}catch(_){}}(Tinymce)}(),function(){return this.tinyMCE.DOM.events.domLoaded=!0,this.tinyMCE}.apply(this,arguments)||window.tinyMCE}.apply(root,arguments)})}(this),define("text!mockup-patterns-tinymce-url/templates/link.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <% if(upload){ %>\n    <p class="info">Specify the object to link to. It can be on this site already ("Internal"), an object you upload ("Upload"), from an external site ("External"), an email address ("Email"), or an anchor on this page ("Anchor").</p>\n    <% } %>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;IDPrefix:tinymce-autotoc-">\n\n      <fieldset class="linkType internal" data-linkType="internal">\n        <legend id="tinylink-internal">Internal</legend>\n        <div>\n          <div class="form-group main">\n            \x3c!-- this gives the name to the "linkType" --\x3e\n            <input type="text" name="internal" />\n          </div>\n        </div>\n      </fieldset>\n\n      <% if(upload){ %>\n      <fieldset class="linkType upload" data-linkType="upload">\n        <legend id="tinylink-upload">Upload</legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n      <% } %>\n\n      <fieldset class="linkType external" data-linkType="external">\n        <legend id="tinylink-external">External</legend>\n        <div class="form-group main">\n          <label for="external"><%- externalText %></label>\n          <input type="text" name="external" />\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType email" data-linkType="email">\n        <legend id="tinylink-email">Email</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <label><%- emailText %></label>\n            <input type="text" name="email" />\n          </div>\n          <div class="form-group">\n            <label><%- subjectText %></label>\n            <input type="text" name="subject" />\n          </div>\n        </div>\n      </fieldset>\n\n      <fieldset class="linkType anchor" data-linkType="anchor">\n        <legend id="tinylink-anchor">Anchor</legend>\n        <div>\n          <div class="form-group main">\n            <label>Select an anchor</label>\n            <div class="input-wrapper">\n              <select name="anchor" class="pat-select2" data-pat-select2="width:500px" />\n            </div>\n          </div>\n        </div>\n      </fieldset>\n\n    </div>\x3c!-- / tabs --\x3e\n\n    <div class="common-controls">\n      <div class="form-group">\n        <label>Target</label>\n        <select name="target">\n          <% _.each(targetList, function(target){ %>\n            <option value="<%- target.value %>"><%- target.text %></option>\n          <% }); %>\n        </select>\n      </div>\n      <div class="form-group">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n    </div>\n\n    <input type="submit" class="plone-btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="plone-btn plone-btn-primary context" name="insert" value="<%- insertBtn %>" />\n  </div>\n</div>\n'}),define("text!mockup-patterns-tinymce-url/templates/image.xml",[],function(){return'<div>\n  <div class="linkModal">\n    <h1><%- insertHeading %></h1>\n    <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n    <p class="info">Specify an image. It can be on this site already ("Internal Image"), an image you upload ("Upload"), or from an external site ("External Image").</p>\n    <% } %>\n\n    <div class="linkTypes pat-autotoc autotabs"\n         data-pat-autotoc="section:fieldset;levels:legend;IDPrefix:tinymce-autotoc-">\n\n        <% if(_.contains(linkTypes, \'image\')){ %>\n      <fieldset class="linkType image" data-linkType="image">\n        <legend id="tinylink-image">Internal Image</legend>\n        <div class="form-inline">\n          <div class="form-group main">\n            <input type="text" name="image" />\n          </div>\n          <div class="form-group scale">\n            <label><%- scaleText %></label>\n            <select name="scale">\n              <option value="">Original</option>\n                <% _.each(imageScales, function(scale){ %>\n                  <option value="<%- scale.value %>" <% if(scale.value === options.defaultScale){ %>selected<% } %> >\n                    <%- scale.title %>\n                  </option>\n                <% }); %>\n            </select>\n          </div>\n        </div>\n      </fieldset>\n        <% } %>\n\n      <% if(_.contains(linkTypes, \'uploadImage\')){ %>\n      <fieldset class="linkType uploadImage" data-linkType="uploadImage">\n        <legend id="tinylink-uploadImage">Upload</legend>\n        <div class="uploadify-me"></div>\n      </fieldset>\n      <% } %>\n\n      <% if(_.contains(linkTypes, \'externalImage\')){ %>\n      <fieldset class="linkType externalImage" data-linkType="externalImage">\n        <legend id="tinylink-externalImage">External Image</legend>\n        <div>\n          <div class="form-group main">\n            <label><%- externalImageText %></label>\n            <input type="text" name="externalImage" />\n          </div>\n        </div>\n      </fieldset>\n      <% } %>\n\n    </div>\x3c!-- / tabs --\x3e\n\n    <div class="common-controls">\n      <div class="form-group title">\n        <label><%- titleText %></label>\n        <input type="text" name="title" />\n      </div>\n      <div class="form-group text">\n        <label><%- altText %></label>\n        <input type="text" name="alt" />\n      </div>\n      <div class="form-group align">\n        <label><%- imageAlignText %></label>\n        <select name="align">\n          <% _.each(Object.keys(options.imageClasses), function(align){ %>\n              <option value="<%- align %>">\n              <%- options.imageClasses[align] %>\n              </option>\n          <% }); %>\n        <select>\n      </div>\n    </div>\n\n    <input type="submit" class="plone-btn" name="cancel" value="<%- cancelBtn %>" />\n    <input type="submit" class="plone-btn plone-btn-primary context" name="insert" value="<%- insertBtn %>" />\n\n  </div>\n</div>\n'}),define("mockup-patterns-autotoc",["jquery","pat-base"],function($,Base){"use strict";return Base.extend({name:"autotoc",trigger:".pat-autotoc",parser:"mockup",defaults:{section:"section",levels:"h1,h2,h3",IDPrefix:"autotoc-item-",classTOCName:"autotoc-nav",classSectionName:"autotoc-section",classLevelPrefixName:"autotoc-level-",classActiveName:"active",scrollDuration:"slow",scrollEasing:"swing"},init:function(){var self=this;self.$toc=$("<nav/>").addClass(self.options.classTOCName),self.options.prependTo?self.$toc.prependTo(self.options.prependTo):self.options.appendTo?self.$toc.appendTo(self.options.appendTo):self.$toc.prependTo(self.$el),self.options.className&&self.$el.addClass(self.options.className),$(self.options.section,self.$el).addClass(self.options.classSectionName);var asTabs=self.$el.hasClass("autotabs"),activeId=null;$(self.options.levels,self.$el).each(function(i){var $level=$(this),id=$level.prop("id")?$level.prop("id"):$level.parents(self.options.section).prop("id");(!id||0<$("#"+id).length)&&(id=self.options.IDPrefix+self.name+"-"+i),window.location.hash==="#"+id&&(activeId=id),$level.data("navref",id),$("<a/>").appendTo(self.$toc).text($level.text()).attr("id",id).attr("href","#"+id).addClass(self.options.classLevelPrefixName+self.getLevel($level)).on("click",function(e,options){e.stopPropagation(),e.preventDefault(),options||(options={doScroll:!0,skipHash:!1});var $el=$(this);self.$toc.children("."+self.options.classActiveName).removeClass(self.options.classActiveName),self.$el.children("."+self.options.classActiveName).removeClass(self.options.classActiveName),$(e.target).addClass(self.options.classActiveName),$level.parents(self.options.section).addClass(self.options.classActiveName),!1!==options.doScroll&&self.options.scrollDuration&&$level&&!asTabs&&$("body,html").animate({scrollTop:$level.offset().top},self.options.scrollDuration,self.options.scrollEasing),0!==self.$el.parents(".plone-modal").size()&&self.$el.trigger("resize.plone-modal.patterns"),$(this).trigger("clicked"),options.skipHash||window.history&&window.history.pushState&&window.history.pushState({},"","#"+$el.attr("id"))})}),activeId?$("a#"+activeId).trigger("click",{doScroll:!0,skipHash:!0}):self.$toc.find("a").first().trigger("click",{doScroll:!1,skipHash:!0})},getLevel:function($el){var elementLevel=0;return $.each(this.options.levels.split(","),function(level,levelSelector){if(1===$el.filter(levelSelector).size())return elementLevel=level+1,!1}),elementLevel}})}),define("mockup-patterns-backdrop",["jquery","pat-base"],function($,Base){"use strict";return Base.extend({name:"backdrop",trigger:".pat-backdrop",parser:"mockup",defaults:{zIndex:null,opacity:.8,className:"plone-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},init:function(){var self=this;self.$backdrop=$("> ."+self.options.className,self.$el),0===self.$backdrop.size()&&(self.$backdrop=$("<div/>").hide().appendTo(self.$el).addClass(self.options.className),null!==self.options.zIndex&&self.$backdrop.css("z-index",self.options.zIndex)),!0===self.options.closeOnEsc&&$(document).on("keydown",function(e,data){self.$el.is("."+self.options.classActiveName)&&27===e.keyCode&&self.hide()}),!0===self.options.closeOnClick&&self.$backdrop.on("click",function(){self.$el.is("."+self.options.classActiveName)&&self.hide()})},show:function(){this.$el.hasClass(this.options.classActiveName)||(this.emit("show"),this.$backdrop.css("opacity","0").show(),this.$el.addClass(this.options.classActiveName),this.$backdrop.animate({opacity:this.options.opacity},500),this.emit("shown"))},hide:function(){this.$el.hasClass(this.options.classActiveName)&&(this.emit("hide"),this.$backdrop.animate({opacity:"0"},500).hide(),this.$el.removeClass(this.options.classActiveName),this.emit("hidden"))}})}),define("mockup-router",["underscore","backbone"],function(_,Backbone){"use strict";var regexEscape=function(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")};return new(Backbone.Router.extend({actions:[],redirects:{},addRoute:function(patternName,id,callback,context,pathExp,expReplace){void 0===_.findWhere(this.patterns,{patternName:patternName,id:id})&&this.actions.push({patternName:patternName,id:id,callback:callback,context:context,pathExp:pathExp,expReplace:expReplace});var regex=new RegExp("("+regexEscape(patternName)+":"+regexEscape(id)+")");this.route(regex,"handleRoute")},addRedirect:function(pathExp,destination){this.redirects[pathExp]=destination},handleRoute:function(pattern){var parts=pattern.split(":"),patternName=parts[0],id=parts[1],action=_.findWhere(this.actions,{patternName:patternName,id:id});action&&action.callback.call(action.context)},redirect:function(){var newPath,regex,hash,path=window.parent.location.pathname;if(_.some(this.actions,function(action){if(action.pathExp&&(regex=new RegExp(action.pathExp),path.match(regex))){hash="!/"+action.patternName+":"+action.id;var replaceWith="";return action.expReplace&&(replaceWith=action.expReplace),newPath=path.replace(regex,replaceWith),!0}},this),void 0===hash)for(var pathExp in this.redirects)if(regex=new RegExp(pathExp),path.match(regex)){hash="!/"+this.redirects[pathExp],newPath=path.replace(regex,"");break}void 0!==hash&&this._changeLocation.apply(this,[newPath,hash])},_changeLocation:function(path,hash){window.parent.location.hash=hash,window.parent.location.pathname=path},start:function(){Backbone.history.start()},reset:function(){this.actions=[]}}))}),function(factory){"function"==typeof define&&define.amd?define("jquery.form",["jquery"],factory):factory("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function($){"use strict";var feature={};feature.fileapi=void 0!==$("<input type='file'/>").get(0).files,feature.formdata=void 0!==window.FormData;var hasProp=!!$.fn.prop;function doAjaxSubmit(e){var options=e.data;e.isDefaultPrevented()||(e.preventDefault(),$(e.target).ajaxSubmit(options))}function captureSubmittingElement(e){var target=e.target,$el=$(target);if(!$el.is("[type=submit],[type=image]")){var t=$el.closest("[type=submit]");if(0===t.length)return;target=t[0]}var form=this;if("image"==(form.clk=target).type)if(void 0!==e.offsetX)form.clk_x=e.offsetX,form.clk_y=e.offsetY;else if("function"==typeof $.fn.offset){var offset=$el.offset();form.clk_x=e.pageX-offset.left,form.clk_y=e.pageY-offset.top}else form.clk_x=e.pageX-target.offsetLeft,form.clk_y=e.pageY-target.offsetTop;setTimeout(function(){form.clk=form.clk_x=form.clk_y=null},100)}function log(){if($.fn.ajaxSubmit.debug){var msg="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(msg):window.opera&&window.opera.postError&&window.opera.postError(msg)}}$.fn.attr2=function(){if(!hasProp)return this.attr.apply(this,arguments);var val=this.prop.apply(this,arguments);return val&&val.jquery||"string"==typeof val?val:this.attr.apply(this,arguments)},$.fn.ajaxSubmit=function(options){if(!this.length)return log("ajaxSubmit: skipping submit process - no element selected"),this;var method,action,url,$form=this;"function"==typeof options?options={success:options}:void 0===options&&(options={}),method=options.type||this.attr2("method"),(url=(url="string"==typeof(action=options.url||this.attr2("action"))?$.trim(action):"")||window.location.href||"")&&(url=(url.match(/^([^#]+)/)||[])[1]),options=$.extend(!0,{url:url,success:$.ajaxSettings.success,type:method||$.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},options);var veto={};if(this.trigger("form-pre-serialize",[this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(options.beforeSerialize&&!1===options.beforeSerialize(this,options))return log("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var traditional=options.traditional;void 0===traditional&&(traditional=$.ajaxSettings.traditional);var qx,elements=[],a=this.formToArray(options.semantic,elements);if(options.data&&(options.extraData=options.data,qx=$.param(options.data,traditional)),options.beforeSubmit&&!1===options.beforeSubmit(a,this,options))return log("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[a,this,options,veto]),veto.veto)return log("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=$.param(a,traditional);qx&&(q=q?q+"&"+qx:qx),"GET"==options.type.toUpperCase()?(options.url+=(0<=options.url.indexOf("?")?"&":"?")+q,options.data=null):options.data=q;var callbacks=[];if(options.resetForm&&callbacks.push(function(){$form.resetForm()}),options.clearForm&&callbacks.push(function(){$form.clearForm(options.includeHidden)}),!options.dataType&&options.target){var oldSuccess=options.success||function(){};callbacks.push(function(data){var fn=options.replaceTarget?"replaceWith":"html";$(options.target)[fn](data).each(oldSuccess,arguments)})}else options.success&&callbacks.push(options.success);if(options.success=function(data,status,xhr){for(var context=options.context||this,i=0,max=callbacks.length;i<max;i++)callbacks[i].apply(context,[data,status,xhr||$form,$form])},options.error){var oldError=options.error;options.error=function(xhr,status,error){var context=options.context||this;oldError.apply(context,[xhr,status,error,$form])}}if(options.complete){var oldComplete=options.complete;options.complete=function(xhr,status){var context=options.context||this;oldComplete.apply(context,[xhr,status,$form])}}var hasFileInputs=0<$("input[type=file]:enabled",this).filter(function(){return""!==$(this).val()}).length,mp="multipart/form-data",multipart=$form.attr("enctype")==mp||$form.attr("encoding")==mp,fileAPI=feature.fileapi&&feature.formdata;log("fileAPI :"+fileAPI);var jqxhr,shouldUseFrame=(hasFileInputs||multipart)&&!fileAPI;!1!==options.iframe&&(options.iframe||shouldUseFrame)?options.closeKeepAlive?$.get(options.closeKeepAlive,function(){jqxhr=fileUploadIframe(a)}):jqxhr=fileUploadIframe(a):jqxhr=(hasFileInputs||multipart)&&fileAPI?function(a){for(var formdata=new FormData,i=0;i<a.length;i++)formdata.append(a[i].name,a[i].value);if(options.extraData){var serializedData=function(extraData){var i,part,serialized=$.param(extraData,options.traditional).split("&"),len=serialized.length,result=[];for(i=0;i<len;i++)serialized[i]=serialized[i].replace(/\+/g," "),part=serialized[i].split("="),result.push([decodeURIComponent(part[0]),decodeURIComponent(part[1])]);return result}(options.extraData);for(i=0;i<serializedData.length;i++)serializedData[i]&&formdata.append(serializedData[i][0],serializedData[i][1])}options.data=null;var s=$.extend(!0,{},$.ajaxSettings,options,{contentType:!1,processData:!1,cache:!1,type:method||"POST"});options.uploadProgress&&(s.xhr=function(){var xhr=$.ajaxSettings.xhr();return xhr.upload&&xhr.upload.addEventListener("progress",function(event){var percent=0,position=event.loaded||event.position,total=event.total;event.lengthComputable&&(percent=Math.ceil(position/total*100)),options.uploadProgress(event,position,total,percent)},!1),xhr});s.data=null;var beforeSend=s.beforeSend;return s.beforeSend=function(xhr,o){options.formData?o.data=options.formData:o.data=formdata,beforeSend&&beforeSend.call(this,xhr,o)},$.ajax(s)}(a):$.ajax(options),$form.removeData("jqxhr").data("jqxhr",jqxhr);for(var k=0;k<elements.length;k++)elements[k]=null;return this.trigger("form-submit-notify",[this,options]),this;function fileUploadIframe(a){var el,i,s,g,id,$io,io,xhr,sub,n,timedOut,timeoutHandle,form=$form[0],deferred=$.Deferred();if(deferred.abort=function(status){xhr.abort(status)},a)for(i=0;i<elements.length;i++)el=$(elements[i]),hasProp?el.prop("disabled",!1):el.removeAttr("disabled");if((s=$.extend(!0,{},$.ajaxSettings,options)).context=s.context||s,id="jqFormIO"+(new Date).getTime(),s.iframeTarget?(n=($io=$(s.iframeTarget)).attr2("name"))?id=n:$io.attr2("name",id):($io=$('<iframe name="'+id+'" src="'+s.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),io=$io[0],xhr={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(status){var e="timeout"===status?"timeout":"aborted";log("aborting upload... "+e),this.aborted=1;try{io.contentWindow.document.execCommand&&io.contentWindow.document.execCommand("Stop")}catch(ignore){}$io.attr("src",s.iframeSrc),xhr.error=e,s.error&&s.error.call(s.context,xhr,e,status),g&&$.event.trigger("ajaxError",[xhr,s,e]),s.complete&&s.complete.call(s.context,xhr,e)}},(g=s.global)&&0==$.active++&&$.event.trigger("ajaxStart"),g&&$.event.trigger("ajaxSend",[xhr,s]),s.beforeSend&&!1===s.beforeSend.call(s.context,xhr,s))return s.global&&$.active--,deferred.reject(),deferred;if(xhr.aborted)return deferred.reject(),deferred;(sub=form.clk)&&(n=sub.name)&&!sub.disabled&&(s.extraData=s.extraData||{},s.extraData[n]=sub.value,"image"==sub.type&&(s.extraData[n+".x"]=form.clk_x,s.extraData[n+".y"]=form.clk_y));var CLIENT_TIMEOUT_ABORT=1,SERVER_ABORT=2;function getDoc(frame){var doc=null;try{frame.contentWindow&&(doc=frame.contentWindow.document)}catch(err){log("cannot get iframe.contentWindow document: "+err)}if(doc)return doc;try{doc=frame.contentDocument?frame.contentDocument:frame.document}catch(err){log("cannot get iframe.contentDocument: "+err),doc=frame.document}return doc}var csrf_token=$("meta[name=csrf-token]").attr("content"),csrf_param=$("meta[name=csrf-param]").attr("content");function doSubmit(){var t=$form.attr2("target"),a=$form.attr2("action");form.setAttribute("target",id),method&&!/post/i.test(method)||form.setAttribute("method","POST"),a!=s.url&&form.setAttribute("action",s.url),s.skipEncodingOverride||method&&!/post/i.test(method)||$form.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),s.timeout&&(timeoutHandle=setTimeout(function(){timedOut=!0,cb(CLIENT_TIMEOUT_ABORT)},s.timeout));var extraInputs=[];try{if(s.extraData)for(var n in s.extraData)s.extraData.hasOwnProperty(n)&&($.isPlainObject(s.extraData[n])&&s.extraData[n].hasOwnProperty("name")&&s.extraData[n].hasOwnProperty("value")?extraInputs.push($('<input type="hidden" name="'+s.extraData[n].name+'">').val(s.extraData[n].value).appendTo(form)[0]):extraInputs.push($('<input type="hidden" name="'+n+'">').val(s.extraData[n]).appendTo(form)[0]));s.iframeTarget||$io.appendTo("body"),io.attachEvent?io.attachEvent("onload",cb):io.addEventListener("load",cb,!1),setTimeout(function checkState(){try{var state=getDoc(io).readyState;log("state = "+state),state&&"uninitialized"==state.toLowerCase()&&setTimeout(checkState,50)}catch(e){log("Server abort: ",e," (",e.name,")"),cb(SERVER_ABORT),timeoutHandle&&clearTimeout(timeoutHandle),timeoutHandle=void 0}},15);try{form.submit()}catch(err){document.createElement("form").submit.apply(form)}}finally{form.setAttribute("action",a),t?form.setAttribute("target",t):$form.removeAttr("target"),$(extraInputs).remove()}}csrf_param&&csrf_token&&(s.extraData=s.extraData||{},s.extraData[csrf_param]=csrf_token),s.forceSync?doSubmit():setTimeout(doSubmit,10);var data,doc,callbackProcessed,domCheckCount=50;function cb(e){if(!xhr.aborted&&!callbackProcessed){if((doc=getDoc(io))||(log("cannot access response document"),e=SERVER_ABORT),e===CLIENT_TIMEOUT_ABORT&&xhr)return xhr.abort("timeout"),void deferred.reject(xhr,"timeout");if(e==SERVER_ABORT&&xhr)return xhr.abort("server abort"),void deferred.reject(xhr,"error","server abort");if(doc&&doc.location.href!=s.iframeSrc||timedOut){io.detachEvent?io.detachEvent("onload",cb):io.removeEventListener("load",cb,!1);var errMsg,status="success";try{if(timedOut)throw"timeout";var isXml="xml"==s.dataType||doc.XMLDocument||$.isXMLDoc(doc);if(log("isXml="+isXml),!isXml&&window.opera&&(null===doc.body||!doc.body.innerHTML)&&--domCheckCount)return log("requeing onLoad callback, DOM not available"),void setTimeout(cb,250);var docRoot=doc.body?doc.body:doc.documentElement;xhr.responseText=docRoot?docRoot.innerHTML:null,xhr.responseXML=doc.XMLDocument?doc.XMLDocument:doc,isXml&&(s.dataType="xml"),xhr.getResponseHeader=function(header){return{"content-type":s.dataType}[header.toLowerCase()]},docRoot&&(xhr.status=Number(docRoot.getAttribute("status"))||xhr.status,xhr.statusText=docRoot.getAttribute("statusText")||xhr.statusText);var dt=(s.dataType||"").toLowerCase(),scr=/(json|script|text)/.test(dt);if(scr||s.textarea){var ta=doc.getElementsByTagName("textarea")[0];if(ta)xhr.responseText=ta.value,xhr.status=Number(ta.getAttribute("status"))||xhr.status,xhr.statusText=ta.getAttribute("statusText")||xhr.statusText;else if(scr){var pre=doc.getElementsByTagName("pre")[0],b=doc.getElementsByTagName("body")[0];pre?xhr.responseText=pre.textContent?pre.textContent:pre.innerText:b&&(xhr.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"==dt&&!xhr.responseXML&&xhr.responseText&&(xhr.responseXML=toXml(xhr.responseText));try{data=httpData(xhr,dt,s)}catch(err){status="parsererror",xhr.error=errMsg=err||status}}catch(err){log("error caught: ",err),status="error",xhr.error=errMsg=err||status}xhr.aborted&&(log("upload aborted"),status=null),xhr.status&&(status=200<=xhr.status&&xhr.status<300||304===xhr.status?"success":"error"),"success"===status?(s.success&&s.success.call(s.context,data,"success",xhr),deferred.resolve(xhr.responseText,"success",xhr),g&&$.event.trigger("ajaxSuccess",[xhr,s])):status&&(void 0===errMsg&&(errMsg=xhr.statusText),s.error&&s.error.call(s.context,xhr,status,errMsg),deferred.reject(xhr,"error",errMsg),g&&$.event.trigger("ajaxError",[xhr,s,errMsg])),g&&$.event.trigger("ajaxComplete",[xhr,s]),g&&!--$.active&&$.event.trigger("ajaxStop"),s.complete&&s.complete.call(s.context,xhr,status),callbackProcessed=!0,s.timeout&&clearTimeout(timeoutHandle),setTimeout(function(){s.iframeTarget?$io.attr("src",s.iframeSrc):$io.remove(),xhr.responseXML=null},100)}}}var toXml=$.parseXML||function(s,doc){return window.ActiveXObject?((doc=new ActiveXObject("Microsoft.XMLDOM")).async="false",doc.loadXML(s)):doc=(new DOMParser).parseFromString(s,"text/xml"),doc&&doc.documentElement&&"parsererror"!=doc.documentElement.nodeName?doc:null},parseJSON=$.parseJSON||function(s){return window.eval("("+s+")")},httpData=function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml="xml"===type||!type&&0<=ct.indexOf("xml"),data=xml?xhr.responseXML:xhr.responseText;return xml&&"parsererror"===data.documentElement.nodeName&&$.error&&$.error("parsererror"),s&&s.dataFilter&&(data=s.dataFilter(data,type)),"string"==typeof data&&("json"===type||!type&&0<=ct.indexOf("json")?data=parseJSON(data):("script"===type||!type&&0<=ct.indexOf("javascript"))&&$.globalEval(data)),data};return deferred}},$.fn.ajaxForm=function(options){if((options=options||{}).delegation=options.delegation&&$.isFunction($.fn.on),options.delegation||0!==this.length)return options.delegation?($(document).off("submit.form-plugin",this.selector,doAjaxSubmit).off("click.form-plugin",this.selector,captureSubmittingElement).on("submit.form-plugin",this.selector,options,doAjaxSubmit).on("click.form-plugin",this.selector,options,captureSubmittingElement),this):this.ajaxFormUnbind().bind("submit.form-plugin",options,doAjaxSubmit).bind("click.form-plugin",options,captureSubmittingElement);var o={s:this.selector,c:this.context};return!$.isReady&&o.s?(log("DOM not ready, queuing ajaxForm"),$(function(){$(o.s,o.c).ajaxForm(options)})):log("terminating; zero elements found by selector"+($.isReady?"":" (DOM not ready)")),this},$.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},$.fn.formToArray=function(semantic,elements){var a=[];if(0===this.length)return a;var i,j,n,v,el,max,jmax,form=this[0],els=semantic?form.getElementsByTagName("*"):form.elements;if(!els)return a;for(i=0,max=els.length;i<max;i++)if((n=(el=els[i]).name)&&!el.disabled)if(semantic&&form.clk&&"image"==el.type)form.clk==el&&(a.push({name:n,value:$(el).val(),type:el.type}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}));else if((v=$.fieldValue(el,!0))&&v.constructor==Array)for(elements&&elements.push(el),j=0,jmax=v.length;j<jmax;j++)a.push({name:n,value:v[j]});else if(feature.fileapi&&"file"==el.type){elements&&elements.push(el);var files=el.files;if(files.length)for(j=0;j<files.length;j++)a.push({name:n,value:files[j],type:el.type});else a.push({name:n,value:"",type:el.type})}else null!=v&&(elements&&elements.push(el),a.push({name:n,value:v,type:el.type,required:el.required}));if(!semantic&&form.clk){var $input=$(form.clk),input=$input[0];(n=input.name)&&!input.disabled&&"image"==input.type&&(a.push({name:n,value:$input.val()}),a.push({name:n+".x",value:form.clk_x},{name:n+".y",value:form.clk_y}))}return a},$.fn.formSerialize=function(semantic){return $.param(this.formToArray(semantic))},$.fn.fieldSerialize=function(successful){var a=[];return this.each(function(){var n=this.name;if(n){var v=$.fieldValue(this,successful);if(v&&v.constructor==Array)for(var i=0,max=v.length;i<max;i++)a.push({name:n,value:v[i]});else null!=v&&a.push({name:this.name,value:v})}}),$.param(a)},$.fn.fieldValue=function(successful){for(var val=[],i=0,max=this.length;i<max;i++){var el=this[i],v=$.fieldValue(el,successful);null==v||v.constructor==Array&&!v.length||(v.constructor==Array?$.merge(val,v):val.push(v))}return val},$.fieldValue=function(el,successful){var n=el.name,t=el.type,tag=el.tagName.toLowerCase();if(void 0===successful&&(successful=!0),successful&&(!n||el.disabled||"reset"==t||"button"==t||("checkbox"==t||"radio"==t)&&!el.checked||("submit"==t||"image"==t)&&el.form&&el.form.clk!=el||"select"==tag&&-1==el.selectedIndex))return null;if("select"!=tag)return $(el).val();var index=el.selectedIndex;if(index<0)return null;for(var a=[],ops=el.options,one="select-one"==t,max=one?index+1:ops.length,i=one?index:0;i<max;i++){var op=ops[i];if(op.selected){var v=op.value;if(v||(v=op.attributes&&op.attributes.value&&!op.attributes.value.specified?op.text:op.value),one)return v;a.push(v)}}return a},$.fn.clearForm=function(includeHidden){return this.each(function(){$("input,select,textarea",this).clearFields(includeHidden)})},$.fn.clearFields=$.fn.clearInputs=function(includeHidden){var re=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var t=this.type,tag=this.tagName.toLowerCase();re.test(t)||"textarea"==tag?this.value="":"checkbox"==t||"radio"==t?this.checked=!1:"select"==tag?this.selectedIndex=-1:"file"==t?/MSIE/.test(navigator.userAgent)?$(this).replaceWith($(this).clone(!0)):$(this).val(""):includeHidden&&(!0===includeHidden&&/hidden/.test(t)||"string"==typeof includeHidden&&$(this).is(includeHidden))&&(this.value="")})},$.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},$.fn.enable=function(b){return void 0===b&&(b=!0),this.each(function(){this.disabled=!b})},$.fn.selected=function(select){return void 0===select&&(select=!0),this.each(function(){var t=this.type;if("checkbox"==t||"radio"==t)this.checked=select;else if("option"==this.tagName.toLowerCase()){var $sel=$(this).parent("select");select&&$sel[0]&&"select-one"==$sel[0].type&&$sel.find("option").selected(!1),this.selected=select}})},$.fn.ajaxSubmit.debug=!1}),define("mockup-patterns-modal",["jquery","underscore","pat-base","mockup-patterns-backdrop","pat-registry","mockup-router","mockup-utils","translate","jquery.form"],function($,_,Base,Backdrop,registry,Router,utils,_t){"use strict";return Base.extend({name:"plone-modal",trigger:".pat-plone-modal",parser:"mockup",createModal:null,$model:null,defaults:{width:"",height:"",margin:20,position:"center middle",triggers:[],zIndexSelector:".plone-modal-wrapper,.plone-modal-backdrop",backdrop:"body",backdropOptions:{zIndex:"1040",opacity:"0.85",className:"plone-modal-backdrop",classActiveName:"plone-backdrop-active",closeOnEsc:!0,closeOnClick:!0},title:null,titleSelector:"h1:first",buttons:'.formControls > input[type="submit"]',content:"#content",automaticallyAddButtonActions:!0,loadLinksWithinModal:!0,prependContent:".portalMessage",templateOptions:{className:"plone-modal fade",classDialog:"plone-modal-dialog",classModal:"plone-modal-content",classHeaderName:"plone-modal-header",classBodyName:"plone-modal-body",classFooterName:"plone-modal-footer",classWrapperName:"plone-modal-wrapper",classWrapperInnerName:"modal-wrapper-inner",classActiveName:"in",classPrependName:"",classContentName:"",template:'<div class="<%= options.className %>">  <div class="<%= options.classDialog %>">    <div class="<%= options.classModal %>">      <div class="<%= options.classHeaderName %>">        <a class="plone-modal-close">&times;</a>        <% if (title) { %><h2 class="plone-modal-title"><%= title %></h2><% } %>      </div>      <div class="<%= options.classBodyName %>">        <div class="<%= options.classPrependName %>"><%= prepend %></div>         <div class="<%= options.classContentName %>"><%= content %></div>      </div>      <div class="<%= options.classFooterName %>">         <% if (buttons) { %><%= buttons %><% } %>      </div>    </div>  </div></div>'},actions:{},actionOptions:{eventType:"click",disableAjaxFormSubmit:!1,target:null,ajaxUrl:null,modalFunction:null,isForm:!1,timeout:5e3,displayInModal:!0,reloadWindowOnClose:!0,error:".portalMessage.error",formFieldError:".field.error",onSuccess:null,onError:null,onFormError:null,onTimeout:null,redirectOnResponse:!1,redirectToUrl:function($action,response,options){var reg;return(reg=/<body.*data-view-url=[\"'](.*)[\"'].*/im.exec(response))&&1<reg.length?reg[1].split('"')[0]:(reg=/<body.*data-base-url=[\"'](.*)[\"'].*/im.exec(response))&&1<reg.length?reg[1].split('"')[0]:(reg=/<base.*href=[\"'](.*)[\"'].*/im.exec(response))&&1<reg.length?reg[1]:""}},routerOptions:{id:null,pathExp:null},form:function(actions){var self=this,$modal=self.$modal;self.options.automaticallyAddButtonActions&&(actions[self.options.buttons]={}),actions.a={},$.each(actions,function(action,options){var actionKeys=_.union(_.keys(self.options.actionOptions),["templateOptions"]),actionOptions=$.extend(!0,{},self.options.actionOptions,_.pick(options,actionKeys));options.templateOptions=$.extend(!0,options.templateOptions,self.options.templateOptions);var patternKeys=_.union(_.keys(self.options.actionOptions),["actions","actionOptions"]),patternOptions=$.extend(!0,_.omit(options,patternKeys),self.options);$(action,$("."+options.templateOptions.classBodyName,$modal)).each(function(action){var $action=$(this);$action.on(actionOptions.eventType,function(e){e.stopPropagation(),e.preventDefault(),self.loading.show(!1),null!==actionOptions.modalFunction?self[actionOptions.modalFunction]():$.nodeName($action[0],"input")||$.nodeName($action[0],"button")||!0===options.isForm?self.options.handleFormAction.apply(self,[$action,actionOptions,patternOptions]):(null!==options.ajaxUrl||$.nodeName($action[0],"a"))&&self.options.handleLinkAction.apply(self,[$action,actionOptions,patternOptions])})})})},handleFormAction:function($action,options,patternOptions){var $form,url,self=this,extraData={};if(extraData[$action.attr("name")]=$action.attr("value"),$form=$.nodeName($action[0],"form")?$action:$action.parents("form:not(.disableAutoSubmit)"),url=null!==options.ajaxUrl?"function"==typeof options.ajaxUrl?options.ajaxUrl.apply(self,[$action,options]):options.ajaxUrl:$action.parents("form").attr("action"),options.disableAjaxFormSubmit)return $action.attr("name")&&$action.attr("value")&&$form.append($('<input type="hidden" name="'+$action.attr("name")+'" value="'+$action.attr("value")+'" />')),void $form.trigger("submit");$form.on("submit",function(e){e.preventDefault()}),$form.trigger("submit"),self.loading.show(!1),$form.ajaxSubmit({timeout:options.timeout,data:extraData,url:url,error:function(xhr,textStatus,errorStatus){self.loading.hide(),"timeout"===textStatus&&options.onTimeout?options.onTimeout.apply(self,xhr,errorStatus):options.onError?options.onError(xhr,textStatus,errorStatus):console.log("error happened do something"),self.emit("formActionError",[xhr,textStatus,errorStatus])},success:function(response,state,xhr,form){self.loading.hide(),0===$(options.error,response).size()&&0===$(options.formFieldError,response).size()?!0!==options.redirectOnResponse?(options.onSuccess&&options.onSuccess(self,response,state,xhr,form),!0===options.displayInModal?self.redraw(response,patternOptions):($action.trigger("destroy.plone-modal.patterns"),options.reloadWindowOnClose&&self.reloadWindow()),self.emit("formActionSuccess",[response,state,xhr,form])):"function"==typeof options.redirectToUrl?window.parent.location.href=options.redirectToUrl.apply(self,[$action,response,options]):window.parent.location.href=options.redirectToUrl:options.onFormError?options.onFormError(self,response,state,xhr,form):self.redraw(response,patternOptions)}})},handleLinkAction:function($action,options,patternOptions){var url,self=this;url=options.ajaxUrl?"function"==typeof options.ajaxUrl?options.ajaxUrl.apply(self,[$action,options]):options.ajaxUrl:$action.attr("href"),!1!==options.displayInModal?$.ajax({url:url}).fail(function(xhr,textStatus,errorStatus){"timeout"===textStatus&&options.onTimeout?options.onTimeout(self.$modal,xhr,errorStatus):options.onError?options.onError(xhr,textStatus,errorStatus):window.alert(_t("There was an error loading modal.")),self.emit("linkActionError",[xhr,textStatus,errorStatus])}).done(function(response,state,xhr){self.redraw(response,patternOptions),options.onSuccess&&options.onSuccess(self,response,state,xhr),self.emit("linkActionSuccess",[response,state,xhr])}).always(function(){self.loading.hide()}):"_blank"===$action.attr("target")?(window.open(url,"_blank"),self.loading.hide()):window.location=url},render:function(options){var self=this;if(self.emit("before-render"),self.$raw){var $raw=self.$raw.clone();$("input:checked",$raw).each(function(){this.setAttribute&&this.setAttribute("checked","checked")});var tplObject={title:"",prepend:"<div />",content:"",buttons:'<div class="pattern-modal-buttons"></div>',options:options.templateOptions};if(null===options.title){var $title=$(options.titleSelector,$raw);tplObject.title=$title.html(),$(options.titleSelector,$raw).remove()}else tplObject.title=options.title;options.prependContent&&(tplObject.prepend=$("<div />").append($(options.prependContent,$raw).clone()).html(),$(options.prependContent,$raw).remove()),options.content?tplObject.content=$(options.content,$raw).html():tplObject.content=$raw.html(),self.$modal=$(_.template(self.options.templateOptions.template)(tplObject)),self.$modalDialog=$("> ."+self.options.templateOptions.classDialog,self.$modal),self.$modalContent=$("> ."+self.options.templateOptions.classModal,self.$modalDialog),$("form",self.$modal).on("keydown",function(event){13===event.keyCode&&"TEXTAREA"!==event.target.nodeName&&(event.preventDefault(),$("input[type=submit], button[type=submit], button:not(type)",this).eq(0).trigger("click"))}),$(options.buttons,self.$modal).each(function(){var $button=$(this);$button.on("click",function(e){e.stopPropagation(),e.preventDefault()}).clone().appendTo($(".pattern-modal-buttons",self.$modal)).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),$button.trigger("click")}),$button.hide()}),self.emit("before-events-setup"),$(".plone-modal-header > a.plone-modal-close, .plone-modal-footer > a.plone-modal-close",self.$modal).off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),$(e.target).trigger("destroy.plone-modal.patterns")}),options.form&&options.form.apply(self,[options.actions]),self.$modal.addClass(self.options.templateOptions.className).on("destroy.plone-modal.patterns",function(e){e.stopPropagation(),self.hide()}).on("resize.plone-modal.patterns",function(e){e.stopPropagation(),e.preventDefault(),self.positionModal()}).appendTo(self.$wrapperInner),self.options.loadLinksWithinModal&&self.$modal.on("click",function(e){e.stopPropagation(),$.nodeName(e.target,"a")&&e.preventDefault(),self.$modal.trigger("modal-click")}),self.$modal.data("pattern-"+self.name,self),self.emit("after-render")}}},reloadWindow:function(){window.parent.location.reload()},init:function(){var self=this;self.options.loadLinksWithinModal=$.parseJSON(self.options.loadLinksWithinModal),null!==self.options.routerOptions.id&&Router.addRoute("modal",self.options.routerOptions.id,function(){this.show()},self,self.options.routerOptions.pathExp,self.options.routerOptions.expReplace),!0===self.options.backdropOptions.closeOnEsc&&$(document).on("keydown",function(e,data){self.$el.is("."+self.options.templateOptions.classActiveName)&&27===e.keyCode&&self.hide()}),$(window.parent).resize(function(){self.positionModal()}),self.options.triggers&&$.each(self.options.triggers,function(i,item){var e=item.substring(0,item.indexOf(" ")),selector=item.substring(item.indexOf(" "),item.length);$(selector||self.$el).on(e,function(e){e.stopPropagation(),e.preventDefault(),self.show()})}),self.$el.is("a")&&(self.$el.attr("href")&&!self.options.image&&(self.options.target||"#"!==self.$el.attr("href").substr(0,1)||(self.options.target=self.$el.attr("href"),self.options.content=""),self.options.ajaxUrl||"#"===self.$el.attr("href").substr(0,1)||(self.options.ajaxUrl=function(){return self.$el.attr("href")})),self.$el.on("click",function(e){e.stopPropagation(),e.preventDefault(),self.show()})),self.initModal()},createAjaxModal:function(){var self=this;self.emit("before-ajax"),self.loading.show();var ajaxUrl=self.options.ajaxUrl;"function"==typeof ajaxUrl&&(ajaxUrl=ajaxUrl.apply(self,[self.options])),self.ajaxXHR=$.ajax({url:ajaxUrl,type:self.options.ajaxType}).done(function(response,textStatus,xhr){self.ajaxXHR=void 0,self.$raw=$("<div />").append($(utils.parseBodyTag(response))),self.emit("after-ajax",self,textStatus,xhr),self._show()}).fail(function(xhr,textStatus,errorStatus){var options=self.options.actionOptions;"timeout"===textStatus&&options.onTimeout?options.onTimeout(self.$modal,xhr,errorStatus):options.onError?options.onError(xhr,textStatus,errorStatus):(window.alert(_t("There was an error loading modal.")),self.hide()),self.emit("linkActionError",[xhr,textStatus,errorStatus])}).always(function(){self.loading.hide()})},createTargetModal:function(){this.$raw=$(this.options.target).clone(),this._show()},createBasicModal:function(){this.$raw=$("<div/>").html(this.$el.clone()),this._show()},createHtmlModal:function(){var $el=$(this.options.html);this.$raw=$el,this._show()},createImageModal:function(){this.$wrapper.addClass("image-modal");var src=this.$el.attr("href"),srcset=this.$el.attr("data-modal-srcset")||"",title=$.trim(this.$el.context.innerText)||"Image";this.$raw=$("<div><h1>"+title+'</h1><div id="content"><div class="modal-image"><img src="'+src+'" srcset="'+srcset+'" /></div></div></div>'),this._show()},initModal:function(){this.options.ajaxUrl?this.createModal=this.createAjaxModal:this.options.target?this.createModal=this.createTargetModal:this.options.html?this.createModal=this.createHtmlModal:this.options.image?this.createModal=this.createImageModal:this.createModal=this.createBasicModal},findPosition:function(horpos,vertpos,margin,modalWidth,modalHeight,wrapperInnerWidth,wrapperInnerHeight){var absTop,absBottom,absLeft,absRight,returnpos={};return absRight=absLeft=absTop=absLeft="auto",returnpos.left="left"===horpos?(absLeft=margin+"px",wrapperInnerWidth<modalWidth&&(absLeft="0px"),absLeft):"right"===horpos?(absRight=margin+"px",wrapperInnerWidth<modalWidth&&(absRight="0px"),returnpos.right=absRight,"auto"):(absLeft=wrapperInnerWidth/2-modalWidth/2-margin+"px",wrapperInnerWidth<modalWidth&&(absLeft="0px"),absLeft),returnpos.top="top"===vertpos?(absTop=margin+"px",wrapperInnerHeight<modalHeight&&(absTop="0px"),absTop):"bottom"===vertpos?(absBottom=margin+"px",wrapperInnerHeight<modalHeight&&(absBottom="0px"),returnpos.bottom=absBottom,"auto"):(absTop=wrapperInnerHeight/2-modalHeight/2-margin+"px",wrapperInnerHeight<modalHeight&&(absTop="0px"),absTop),returnpos},modalInitialized:function(){return null!==this.$modal&&void 0!==this.$modal},positionModal:function(){if(this.modalInitialized()){this.$modal.removeAttr("style"),this.$wrapper.parent().is("body")&&this.$wrapper.height($(window.parent).height());var margin="function"==typeof this.options.margin?this.options.margin():this.options.margin;this.$modal.css({position:"absolute",padding:margin}),this.$modalDialog.css({margin:"0",padding:"0",width:this.options.width,height:this.options.height}),this.$modalContent.css({width:this.options.width});var posopt=this.options.position.split(" "),horpos=posopt[0],vertpos=posopt[1],modalWidth=this.$modalDialog.outerWidth(!0),modalHeight=this.$modalDialog.outerHeight(!0),wrapperInnerWidth=this.$wrapperInner.width(),wrapperInnerHeight=this.$wrapperInner.height(),pos=this.findPosition(horpos,vertpos,margin,modalWidth,modalHeight,wrapperInnerWidth,wrapperInnerHeight);for(var key in pos)this.$modalDialog.css(key,pos[key])}},render:function(options){this.emit("render"),this.options.render.apply(this,[options]),this.emit("rendered")},show:function(){this.backdrop=this.createBackdrop(),this.createModal()},createBackdrop:function(){var self=this,backdrop=new Backdrop(self.$el.parents(self.options.backdrop),self.options.backdropOptions),zIndex=1041;return $(self.options.zIndexSelector).each(function(){zIndex=Math.max(zIndex,parseInt($(this).css("zIndex"))+1||1041)}),self.$wrapper=$("<div/>").hide().css({"z-index":zIndex,"overflow-y":"auto",position:"fixed",height:"100%",width:"100%",bottom:"0",left:"0",right:"0",top:"0"}).addClass(self.options.templateOptions.classWrapperName).insertBefore(backdrop.$backdrop).on("click",function(e){self.options.backdropOptions.closeOnClick&&(e.stopPropagation(),e.preventDefault(),backdrop.hide())}),backdrop.on("hidden",function(e){void 0!==self.$modal&&self.$modal.hasClass(self.options.templateOptions.classActiveName)&&self.hide()}),self.loading=new utils.Loading({backdrop:backdrop}),self.$wrapperInner=$("<div/>").addClass(self.options.classWrapperInnerName).css({position:"absolute",bottom:"0",left:"0",right:"0",top:"0"}).appendTo(self.$wrapper),backdrop},_show:function(){var self=this;self.render.apply(self,[self.options]),self.emit("show"),self.backdrop.show(),self.$wrapper.show(),self.loading.hide(),self.$el.addClass(self.options.templateOptions.classActiveName),self.$modal.addClass(self.options.templateOptions.classActiveName),registry.scan(self.$modal),self.positionModal(),$(window.parent).on("resize.plone-modal.patterns",function(){self.positionModal()}),$("body").addClass("plone-modal-open"),self.emit("shown")},hide:function(){this.ajaxXHR&&this.ajaxXHR.abort(),this.emit("hide"),this._suppressHide&&!window.confirm(this._suppressHide)||(this.loading.hide(),this.$el.removeClass(this.options.templateOptions.classActiveName),void 0!==this.$modal&&(this.$modal.remove(),this.initModal()),this.$wrapper.remove(),$(".plone-modal",$("body")).size()<1&&(this._suppressHide=void 0,this.backdrop.hide(),$("body").removeClass("plone-modal-open"),$(window.parent).off("resize.plone-modal.patterns")),this.emit("hidden"))},redraw:function(response,options){this.emit("beforeDraw"),this.$modal.remove(),this.$raw=$("<div />").append($(utils.parseBodyTag(response))),this.render.apply(this,[options||this.options]),this.$modal.addClass(this.options.templateOptions.classActiveName),this.positionModal(),registry.scan(this.$modal),this.emit("afterDraw")}})}),function(factory){"function"==typeof define&&define.amd?define("dropzone",["jquery"],factory):factory(jQuery)}(function(jQuery){var module={exports:{}};return function(){var Dropzone,Emitter,camelize,contentLoaded,detectVerticalSquash,drawImageIOSFix,noop,without,__slice=[].slice,__hasProp={}.hasOwnProperty;noop=function(){},Emitter=function(){function Emitter(){}return Emitter.prototype.addEventListener=Emitter.prototype.on,Emitter.prototype.on=function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this},Emitter.prototype.emit=function(){var args,callbacks,event,_i,_len;if(event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],this._callbacks=this._callbacks||{},callbacks=this._callbacks[event])for(_i=0,_len=callbacks.length;_i<_len;_i++)callbacks[_i].apply(this,args);return this},Emitter.prototype.removeListener=Emitter.prototype.off,Emitter.prototype.removeAllListeners=Emitter.prototype.off,Emitter.prototype.removeEventListener=Emitter.prototype.off,Emitter.prototype.off=function(event,fn){var callbacks,i,_i,_len;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(!(callbacks=this._callbacks[event]))return this;if(1===arguments.length)return delete this._callbacks[event],this;for(i=_i=0,_len=callbacks.length;_i<_len;i=++_i)if(callbacks[i]===fn){callbacks.splice(i,1);break}return this},Emitter}(),(Dropzone=function(_super){var extend,resolveOption;function Dropzone(element,options){var elementOptions,fallback,_ref;if(this.element=element,this.version=Dropzone.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(Dropzone.instances.push(this),this.element.dropzone=this,elementOptions=null!=(_ref=Dropzone.optionsForElement(this.element))?_ref:{},this.options=extend({},this.defaultOptions,elementOptions,null!=options?options:{}),this.options.forceFallback||!Dropzone.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(fallback=this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),!1!==this.options.previewsContainer&&(this.options.previewsContainer?this.previewsContainer=Dropzone.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(!0===this.options.clickable?this.clickableElements=[this.element]:this.clickableElements=Dropzone.getElements(this.options.clickable,"clickable")),this.init()}return function(child,parent){for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);function ctor(){this.constructor=child}ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype}(Dropzone,Emitter),Dropzone.prototype.Emitter=Emitter,Dropzone.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],Dropzone.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(file,done){return done()},init:function(){return noop},forceFallback:!1,fallback:function(){var child,messageElement,span,_i,_len,_ref;for(this.element.className=this.element.className+" dz-browser-not-supported",_i=0,_len=(_ref=this.element.getElementsByTagName("div")).length;_i<_len;_i++)child=_ref[_i],/(^| )dz-message($| )/.test(child.className)&&((messageElement=child).className="dz-message");return messageElement||(messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement)),(span=messageElement.getElementsByTagName("span")[0])&&(null!=span.textContent?span.textContent=this.options.dictFallbackMessage:null!=span.innerText&&(span.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(file){var info,srcRatio,trgRatio;return info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height,info.optWidth=this.options.thumbnailWidth,info.optHeight=this.options.thumbnailHeight,null==info.optWidth&&null==info.optHeight?(info.optWidth=info.srcWidth,info.optHeight=info.srcHeight):null==info.optWidth?info.optWidth=srcRatio*info.optHeight:null==info.optHeight&&(info.optHeight=1/srcRatio*info.optWidth),trgRatio=info.optWidth/info.optHeight,file.height<info.optHeight||file.width<info.optWidth?(info.trgHeight=info.srcHeight,info.trgWidth=info.srcWidth):trgRatio<srcRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio),info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:noop,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:noop,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var removeFileEvent,removeLink,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results,_this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement),_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-name]")).length;_i<_len;_i++)_ref[_i].textContent=this._renameFilename(file.name);for(_j=0,_len1=(_ref1=file.previewElement.querySelectorAll("[data-dz-size]")).length;_j<_len1;_j++)_ref1[_j].innerHTML=this.filesize(file.size);for(this.options.addRemoveLinks&&(file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),file.previewElement.appendChild(file._removeLink)),_this=this,removeFileEvent=function(e){return e.preventDefault(),e.stopPropagation(),file.status===Dropzone.UPLOADING?Dropzone.confirm(_this.options.dictCancelUploadConfirmation,function(){return _this.removeFile(file)}):_this.options.dictRemoveFileConfirmation?Dropzone.confirm(_this.options.dictRemoveFileConfirmation,function(){return _this.removeFile(file)}):_this.removeFile(file)},_results=[],_k=0,_len2=(_ref2=file.previewElement.querySelectorAll("[data-dz-remove]")).length;_k<_len2;_k++)removeLink=_ref2[_k],_results.push(removeLink.addEventListener("click",removeFileEvent));return _results}},removedfile:function(file){var _ref;return file.previewElement&&null!=(_ref=file.previewElement)&&_ref.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){var thumbnailElement,_i,_len,_ref;if(file.previewElement){for(file.previewElement.classList.remove("dz-file-preview"),_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-thumbnail]")).length;_i<_len;_i++)(thumbnailElement=_ref[_i]).alt=file.name,thumbnailElement.src=dataUrl;return setTimeout(function(){return file.previewElement.classList.add("dz-image-preview")},1)}},error:function(file,message){var node,_i,_len,_ref,_results;if(file.previewElement){for(file.previewElement.classList.add("dz-error"),"String"!=typeof message&&message.error&&(message=message.error),_results=[],_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-errormessage]")).length;_i<_len;_i++)node=_ref[_i],_results.push(node.textContent=message);return _results}},errormultiple:noop,processing:function(file){if(file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink))return file._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:noop,uploadprogress:function(file,progress,bytesSent){var node,_i,_len,_ref,_results;if(file.previewElement){for(_results=[],_i=0,_len=(_ref=file.previewElement.querySelectorAll("[data-dz-uploadprogress]")).length;_i<_len;_i++)"PROGRESS"===(node=_ref[_i]).nodeName?_results.push(node.value=progress):_results.push(node.style.width=progress+"%");return _results}},totaluploadprogress:noop,sending:noop,sendingmultiple:noop,success:function(file){if(file.previewElement)return file.previewElement.classList.add("dz-success")},successmultiple:noop,canceled:function(file){return this.emit("error",file,"Upload canceled.")},canceledmultiple:noop,complete:function(file){if(file._removeLink&&(file._removeLink.textContent=this.options.dictRemoveFile),file.previewElement)return file.previewElement.classList.add("dz-complete")},completemultiple:noop,maxfilesexceeded:noop,maxfilesreached:noop,queuecomplete:noop,addedfiles:noop,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},extend=function(){var key,object,objects,target,val,_i,_len;for(target=arguments[0],_i=0,_len=(objects=2<=arguments.length?__slice.call(arguments,1):[]).length;_i<_len;_i++)for(key in object=objects[_i])val=object[key],target[key]=val;return target},Dropzone.prototype.getAcceptedFiles=function(){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).accepted&&_results.push(file);return _results},Dropzone.prototype.getRejectedFiles=function(){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).accepted||_results.push(file);return _results},Dropzone.prototype.getFilesWithStatus=function(status){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).status===status&&_results.push(file);return _results},Dropzone.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(Dropzone.QUEUED)},Dropzone.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(Dropzone.UPLOADING)},Dropzone.prototype.getAddedFiles=function(){return this.getFilesWithStatus(Dropzone.ADDED)},Dropzone.prototype.getActiveFiles=function(){var file,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).status!==Dropzone.UPLOADING&&file.status!==Dropzone.QUEUED||_results.push(file);return _results},Dropzone.prototype.init=function(){var eventName,noPropagation,setupHiddenFileInput,_i,_len,_ref,_ref1,_this;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(_this=this,(setupHiddenFileInput=function(){return _this.hiddenFileInput&&_this.hiddenFileInput.parentNode.removeChild(_this.hiddenFileInput),_this.hiddenFileInput=document.createElement("input"),_this.hiddenFileInput.setAttribute("type","file"),(null==_this.options.maxFiles||1<_this.options.maxFiles)&&_this.hiddenFileInput.setAttribute("multiple","multiple"),_this.hiddenFileInput.className="dz-hidden-input",null!=_this.options.acceptedFiles&&_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles),null!=_this.options.capture&&_this.hiddenFileInput.setAttribute("capture",_this.options.capture),_this.hiddenFileInput.style.visibility="hidden",_this.hiddenFileInput.style.position="absolute",_this.hiddenFileInput.style.top="0",_this.hiddenFileInput.style.left="0",_this.hiddenFileInput.style.height="0",_this.hiddenFileInput.style.width="0",document.querySelector(_this.options.hiddenInputContainer).appendChild(_this.hiddenFileInput),_this.hiddenFileInput.addEventListener("change",function(){var file,files,_i,_len;if((files=_this.hiddenFileInput.files).length)for(_i=0,_len=files.length;_i<_len;_i++)file=files[_i],_this.addFile(file);return _this.emit("addedfiles",files),setupHiddenFileInput()})})()),this.URL=null!=(_ref=window.URL)?_ref:window.webkitURL,_i=0,_len=(_ref1=this.events).length;_i<_len;_i++)eventName=_ref1[_i],this.on(eventName,this.options[eventName]);return this.on("uploadprogress",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this)),this.on("canceled",function(_this){return function(file){return _this.emit("complete",file)}}(this)),this.on("complete",function(_this){return function(file){if(0===_this.getAddedFiles().length&&0===_this.getUploadingFiles().length&&0===_this.getQueuedFiles().length)return setTimeout(function(){return _this.emit("queuecomplete")},0)}}(this)),noPropagation=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(_this){return function(e){return _this.emit("dragstart",e)}}(this),dragenter:function(_this){return function(e){return noPropagation(e),_this.emit("dragenter",e)}}(this),dragover:function(_this){return function(e){var efct;try{efct=e.dataTransfer.effectAllowed}catch(_error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this.emit("dragover",e)}}(this),dragleave:function(_this){return function(e){return _this.emit("dragleave",e)}}(this),drop:function(_this){return function(e){return noPropagation(e),_this.drop(e)}}(this),dragend:function(_this){return function(e){return _this.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(_this){return function(clickableElement){return _this.listeners.push({element:clickableElement,events:{click:function(evt){return(clickableElement!==_this.element||evt.target===_this.element||Dropzone.elementInside(evt.target,_this.element.querySelector(".dz-message")))&&_this.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},Dropzone.prototype.destroy=function(){var _ref;return this.disable(),this.removeAllFiles(!0),(null!=(_ref=this.hiddenFileInput)?_ref.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)},Dropzone.prototype.updateTotalUploadProgress=function(){var file,totalBytes,totalBytesSent,totalUploadProgress,_i,_len,_ref;if(totalBytes=totalBytesSent=0,this.getActiveFiles().length){for(_i=0,_len=(_ref=this.getActiveFiles()).length;_i<_len;_i++)totalBytesSent+=(file=_ref[_i]).upload.bytesSent,totalBytes+=file.upload.total;totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)},Dropzone.prototype._getParamName=function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")},Dropzone.prototype._renameFilename=function(name){return"function"!=typeof this.options.renameFilename?name:this.options.renameFilename(name)},Dropzone.prototype.getFallbackForm=function(){var existingFallback,fields,fieldsString,form;return(existingFallback=this.getExistingFallback())?existingFallback:(fieldsString='<div class="dz-fallback">',this.options.dictFallbackText&&(fieldsString+="<p>"+this.options.dictFallbackText+"</p>"),fieldsString+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',fields=Dropzone.createElement(fieldsString),"FORM"!==this.element.tagName?(form=Dropzone.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(fields):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields)},Dropzone.prototype.getExistingFallback=function(){var fallback,getFallback,tagName,_i,_len,_ref;for(getFallback=function(elements){var el,_i,_len;for(_i=0,_len=elements.length;_i<_len;_i++)if(el=elements[_i],/(^| )fallback($| )/.test(el.className))return el},_i=0,_len=(_ref=["div","form"]).length;_i<_len;_i++)if(tagName=_ref[_i],fallback=getFallback(this.element.getElementsByTagName(tagName)))return fallback},Dropzone.prototype.setupEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.listeners).length;_i<_len;_i++)elementListeners=_ref[_i],_results.push(function(){var _ref1,_results1;for(event in _results1=[],_ref1=elementListeners.events)listener=_ref1[event],_results1.push(elementListeners.element.addEventListener(event,listener,!1));return _results1}());return _results},Dropzone.prototype.removeEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.listeners).length;_i<_len;_i++)elementListeners=_ref[_i],_results.push(function(){var _ref1,_results1;for(event in _results1=[],_ref1=elementListeners.events)listener=_ref1[event],_results1.push(elementListeners.element.removeEventListener(event,listener,!1));return _results1}());return _results},Dropzone.prototype.disable=function(){var file,_i,_len,_ref,_results;for(this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")}),this.removeEventListeners(),_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)file=_ref[_i],_results.push(this.cancelUpload(file));return _results},Dropzone.prototype.enable=function(){return this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")}),this.setupEventListeners()},Dropzone.prototype.filesize=function(size){var i,selectedSize,selectedUnit,unit,units,_i,_len;if(selectedUnit="b",(selectedSize=0)<size){for(i=_i=0,_len=(units=["TB","GB","MB","KB","b"]).length;_i<_len;i=++_i)if(unit=units[i],Math.pow(this.options.filesizeBase,4-i)/10<=size){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}selectedSize=Math.round(10*selectedSize)/10}return"<strong>"+selectedSize+"</strong> "+selectedUnit},Dropzone.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},Dropzone.prototype.drop=function(e){var files,items;e.dataTransfer&&(this.emit("drop",e),files=e.dataTransfer.files,this.emit("addedfiles",files),files.length&&((items=e.dataTransfer.items)&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)))},Dropzone.prototype.paste=function(e){var items,_ref;if(null!=(null!=e&&null!=(_ref=e.clipboardData)?_ref.items:void 0))return this.emit("paste",e),(items=e.clipboardData.items).length?this._addFilesFromItems(items):void 0},Dropzone.prototype.handleFiles=function(files){var file,_i,_len,_results;for(_results=[],_i=0,_len=files.length;_i<_len;_i++)file=files[_i],_results.push(this.addFile(file));return _results},Dropzone.prototype._addFilesFromItems=function(items){var entry,item,_i,_len,_results;for(_results=[],_i=0,_len=items.length;_i<_len;_i++)null!=(item=items[_i]).webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?_results.push(this.addFile(item.getAsFile())):entry.isDirectory?_results.push(this._addFilesFromDirectory(entry,entry.name)):_results.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?_results.push(this.addFile(item.getAsFile())):_results.push(void 0);return _results},Dropzone.prototype._addFilesFromDirectory=function(directory,path){var dirReader,errorHandler,readEntries,_this;return dirReader=directory.createReader(),errorHandler=function(error){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(error):void 0},_this=this,(readEntries=function(){return dirReader.readEntries(function(entries){var entry,_i,_len;if(0<entries.length){for(_i=0,_len=entries.length;_i<_len;_i++)(entry=entries[_i]).isFile?entry.file(function(file){if(!_this.options.ignoreHiddenFiles||"."!==file.name.substring(0,1))return file.fullPath=path+"/"+file.name,_this.addFile(file)}):entry.isDirectory&&_this._addFilesFromDirectory(entry,path+"/"+entry.name);readEntries()}return null},errorHandler)})()},Dropzone.prototype.accept=function(file,done){return file.size>1024*this.options.maxFilesize*1024?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)},Dropzone.prototype.addFile=function(file){return file.upload={progress:0,total:file.size,bytesSent:0},this.files.push(file),file.status=Dropzone.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,(_this=this,function(error){return error?(file.accepted=!1,_this._errorProcessing([file],error)):(file.accepted=!0,_this.options.autoQueue&&_this.enqueueFile(file)),_this._updateMaxFilesReachedClass()}));var _this},Dropzone.prototype.enqueueFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)file=files[_i],this.enqueueFile(file);return null},Dropzone.prototype.enqueueFile=function(file){if(file.status!==Dropzone.ADDED||!0!==file.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(file.status=Dropzone.QUEUED,this.options.autoProcessQueue)return setTimeout((_this=this,function(){return _this.processQueue()}),0);var _this},Dropzone.prototype._thumbnailQueue=[],Dropzone.prototype._processingThumbnail=!1,Dropzone.prototype._enqueueThumbnail=function(file){if(this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(file),setTimeout((_this=this,function(){return _this._processThumbnailQueue()}),0);var _this},Dropzone.prototype._processThumbnailQueue=function(){var _this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),(_this=this,function(){return _this._processingThumbnail=!1,_this._processThumbnailQueue()}))},Dropzone.prototype.removeFile=function(file){if(file.status===Dropzone.UPLOADING&&this.cancelUpload(file),this.files=without(this.files,file),this.emit("removedfile",file),0===this.files.length)return this.emit("reset")},Dropzone.prototype.removeAllFiles=function(cancelIfNecessary){var file,_i,_len,_ref;for(null==cancelIfNecessary&&(cancelIfNecessary=!1),_i=0,_len=(_ref=this.files.slice()).length;_i<_len;_i++)((file=_ref[_i]).status!==Dropzone.UPLOADING||cancelIfNecessary)&&this.removeFile(file);return null},Dropzone.prototype.createThumbnail=function(file,callback){var fileReader,_this;return(fileReader=new FileReader).onload=(_this=this,function(){return"image/svg+xml"===file.type?(_this.emit("thumbnail",file,fileReader.result),void(null!=callback&&callback())):_this.createThumbnailFromUrl(file,fileReader.result,callback)}),fileReader.readAsDataURL(file)},Dropzone.prototype.createThumbnailFromUrl=function(file,imageUrl,callback,crossOrigin){var img,_this;return img=document.createElement("img"),crossOrigin&&(img.crossOrigin=crossOrigin),img.onload=(_this=this,function(){var canvas,ctx,resizeInfo,thumbnail,_ref,_ref1,_ref2,_ref3;if(file.width=img.width,file.height=img.height,null==(resizeInfo=_this.options.resize.call(_this,file)).trgWidth&&(resizeInfo.trgWidth=resizeInfo.optWidth),null==resizeInfo.trgHeight&&(resizeInfo.trgHeight=resizeInfo.optHeight),ctx=(canvas=document.createElement("canvas")).getContext("2d"),canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,drawImageIOSFix(ctx,img,null!=(_ref=resizeInfo.srcX)?_ref:0,null!=(_ref1=resizeInfo.srcY)?_ref1:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=(_ref2=resizeInfo.trgX)?_ref2:0,null!=(_ref3=resizeInfo.trgY)?_ref3:0,resizeInfo.trgWidth,resizeInfo.trgHeight),thumbnail=canvas.toDataURL("image/png"),_this.emit("thumbnail",file,thumbnail),null!=callback)return callback()}),null!=callback&&(img.onerror=callback),img.src=imageUrl},Dropzone.prototype.processQueue=function(){var i,parallelUploads,processingLength,queuedFiles;if(!((parallelUploads=this.options.parallelUploads)<=(i=processingLength=this.getUploadingFiles().length))&&0<(queuedFiles=this.getQueuedFiles()).length){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;i<parallelUploads;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}},Dropzone.prototype.processFile=function(file){return this.processFiles([file])},Dropzone.prototype.processFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).processing=!0,file.status=Dropzone.UPLOADING,this.emit("processing",file);return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)},Dropzone.prototype._getFilesWithXhr=function(xhr){var file;return function(){var _i,_len,_ref,_results;for(_results=[],_i=0,_len=(_ref=this.files).length;_i<_len;_i++)(file=_ref[_i]).xhr===xhr&&_results.push(file);return _results}.call(this)},Dropzone.prototype.cancelUpload=function(file){var groupedFile,groupedFiles,_i,_j,_len,_len1,_ref;if(file.status===Dropzone.UPLOADING){for(_i=0,_len=(groupedFiles=this._getFilesWithXhr(file.xhr)).length;_i<_len;_i++)(groupedFile=groupedFiles[_i]).status=Dropzone.CANCELED;for(file.xhr.abort(),_j=0,_len1=groupedFiles.length;_j<_len1;_j++)groupedFile=groupedFiles[_j],this.emit("canceled",groupedFile);this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else(_ref=file.status)!==Dropzone.ADDED&&_ref!==Dropzone.QUEUED||(file.status=Dropzone.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));if(this.options.autoProcessQueue)return this.processQueue()},resolveOption=function(){var args,option;return option=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],"function"==typeof option?option.apply(this,args):option},Dropzone.prototype.uploadFile=function(file){return this.uploadFiles([file])},Dropzone.prototype.uploadFiles=function(files){var file,formData,handleError,headerName,headerValue,headers,i,input,inputName,inputType,key,method,option,response,updateProgress,url,value,xhr,_i,_j,_k,_l,_len,_len1,_len2,_len3,_m,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_this;for(xhr=new XMLHttpRequest,_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).xhr=xhr;for(headerName in method=resolveOption(this.options.method,files),url=resolveOption(this.options.url,files),xhr.open(method,url,!0),xhr.withCredentials=!!this.options.withCredentials,response=null,handleError=function(){var _j,_len1,_results;for(_results=[],_j=0,_len1=files.length;_j<_len1;_j++)file=files[_j],_results.push(_this._errorProcessing(files,response||_this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr));return _results},updateProgress=function(_this){return function(e){var allFilesFinished,progress,_j,_k,_l,_len1,_len2,_len3,_results;if(null!=e)for(progress=100*e.loaded/e.total,_j=0,_len1=files.length;_j<_len1;_j++)(file=files[_j]).upload={progress:progress,total:e.total,bytesSent:e.loaded};else{for(allFilesFinished=!0,progress=100,_k=0,_len2=files.length;_k<_len2;_k++)100===(file=files[_k]).upload.progress&&file.upload.bytesSent===file.upload.total||(allFilesFinished=!1),file.upload.progress=progress,file.upload.bytesSent=file.upload.total;if(allFilesFinished)return}for(_results=[],_l=0,_len3=files.length;_l<_len3;_l++)file=files[_l],_results.push(_this.emit("uploadprogress",file,progress,file.upload.bytesSent));return _results}}(_this=this),xhr.onload=function(_this){return function(e){var _ref;if(files[0].status!==Dropzone.CANCELED&&4===xhr.readyState){if(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json"))try{response=JSON.parse(response)}catch(_error){e=_error,response="Invalid JSON response from server."}return updateProgress(),200<=(_ref=xhr.status)&&_ref<300?_this._finished(files,response,e):handleError()}}}(this),xhr.onerror=function(){if(files[0].status!==Dropzone.CANCELED)return handleError()},(null!=(_ref=xhr.upload)?_ref:xhr).onprogress=updateProgress,headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&extend(headers,this.options.headers),headers)(headerValue=headers[headerName])&&xhr.setRequestHeader(headerName,headerValue);if(formData=new FormData,this.options.params)for(key in _ref1=this.options.params)value=_ref1[key],formData.append(key,value);for(_j=0,_len1=files.length;_j<_len1;_j++)file=files[_j],this.emit("sending",file,xhr,formData);if(this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),"FORM"===this.element.tagName)for(_k=0,_len2=(_ref2=this.element.querySelectorAll("input, textarea, select, button")).length;_k<_len2;_k++)if(inputName=(input=_ref2[_k]).getAttribute("name"),inputType=input.getAttribute("type"),"SELECT"===input.tagName&&input.hasAttribute("multiple"))for(_l=0,_len3=(_ref3=input.options).length;_l<_len3;_l++)(option=_ref3[_l]).selected&&formData.append(inputName,option.value);else(!inputType||"checkbox"!==(_ref4=inputType.toLowerCase())&&"radio"!==_ref4||input.checked)&&formData.append(inputName,input.value);for(i=_m=0,_ref5=files.length-1;0<=_ref5?_m<=_ref5:_ref5<=_m;i=0<=_ref5?++_m:--_m)formData.append(this._getParamName(i),files[i],this._renameFilename(files[i].name));return this.submitRequest(xhr,formData,files)},Dropzone.prototype.submitRequest=function(xhr,formData,files){return xhr.send(formData)},Dropzone.prototype._finished=function(files,responseText,e){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).status=Dropzone.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file);if(this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()},Dropzone.prototype._errorProcessing=function(files,message,xhr){var file,_i,_len;for(_i=0,_len=files.length;_i<_len;_i++)(file=files[_i]).status=Dropzone.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file);if(this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue)return this.processQueue()},Dropzone}()).version="4.3.0",Dropzone.options={},Dropzone.optionsForElement=function(element){return element.getAttribute("id")?Dropzone.options[camelize(element.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var checkElements,dropzone,dropzones,_i,_len,_results;for(document.querySelectorAll?dropzones=document.querySelectorAll(".dropzone"):(dropzones=[],(checkElements=function(elements){var el,_i,_len,_results;for(_results=[],_i=0,_len=elements.length;_i<_len;_i++)el=elements[_i],/(^| )dropzone($| )/.test(el.className)?_results.push(dropzones.push(el)):_results.push(void 0);return _results})(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))),_results=[],_i=0,_len=dropzones.length;_i<_len;_i++)dropzone=dropzones[_i],!1!==Dropzone.optionsForElement(dropzone)?_results.push(new Dropzone(dropzone)):_results.push(void 0);return _results},Dropzone.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],Dropzone.isBrowserSupported=function(){var capableBrowser,_i,_len,_ref;if(capableBrowser=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(_i=0,_len=(_ref=Dropzone.blacklistedBrowsers).length;_i<_len;_i++)_ref[_i].test(navigator.userAgent)&&(capableBrowser=!1);else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},without=function(list,rejectedItem){var item,_i,_len,_results;for(_results=[],_i=0,_len=list.length;_i<_len;_i++)(item=list[_i])!==rejectedItem&&_results.push(item);return _results},camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})},Dropzone.createElement=function(string){var div;return(div=document.createElement("div")).innerHTML=string,div.childNodes[0]},Dropzone.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},Dropzone.getElement=function(el,name){var element;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");return element},Dropzone.getElements=function(els,name){var el,elements,_i,_j,_len,_len1,_ref;if(els instanceof Array){elements=[];try{for(_i=0,_len=els.length;_i<_len;_i++)el=els[_i],elements.push(this.getElement(el,name))}catch(_error){_error,elements=null}}else if("string"==typeof els)for(elements=[],_j=0,_len1=(_ref=document.querySelectorAll(els)).length;_j<_len1;_j++)el=_ref[_j],elements.push(el);else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return elements},Dropzone.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},Dropzone.isValidFile=function(file,acceptedFiles){var baseMimeType,mimeType,validType,_i,_len;if(!acceptedFiles)return!0;for(acceptedFiles=acceptedFiles.split(","),baseMimeType=(mimeType=file.type).replace(/\/.*$/,""),_i=0,_len=acceptedFiles.length;_i<_len;_i++)if("."===(validType=(validType=acceptedFiles[_i]).trim()).charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0;return!1},null!=jQuery&&(jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}),null!=module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success",detectVerticalSquash=function(img){var canvas,ctx,data,ey,ih,py,ratio,sy;for(img.naturalWidth,ih=img.naturalHeight,(canvas=document.createElement("canvas")).width=1,canvas.height=ih,(ctx=canvas.getContext("2d")).drawImage(img,0,0),data=ctx.getImageData(0,0,1,ih).data,sy=0,py=ey=ih;sy<py;)0===data[4*(py-1)+3]?ey=py:sy=py,py=ey+sy>>1;return 0===(ratio=py/ih)?1:ratio},drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio;return vertSquashRatio=detectVerticalSquash(img),ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},contentLoaded=function(win,fn){var add,doc,done,init,poll,pre,rem,root,top;if(top=!(done=!1),doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function(e){if("readystatechange"!==e.type||"complete"===doc.readyState)return("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0},poll=function(){try{root.doScroll("left")}catch(_error){return _error,void setTimeout(poll,50)}return init("poll")},"complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(_error){}top&&poll()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}},Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction)}.call(this),module.exports}),define("text!mockup-patterns-upload-url/templates/upload.xml",[],function(){return'<div class="upload-container upload-multiple">\n    <h2 class="title"><%- _t("Upload here") %></h2>\n    <p class="help">\n        <%- _t(\'Drag and drop files from your computer onto the area below or click the Browse button.\') %>\n    </p>\n    <div class="upload-area">\n        <div class="fallback">\n            <input name="file" type="file" multiple />\n        </div>\n        <div class="dz-message"><p><%-_t("Drop files here...")%></p></div>\n        <div class="row browse-select">\n            <div class="col-md-9">\n                <input\n                    id="fakeUploadFile"\n                    placeholder="<%- _t("Choose File") %>"\n                    disabled\n                    />\n            </div>\n            <div class="col-md-3">\n                <button\n                    type="button"\n                    class="btn btn-primary browse">\n                    <%- _t("Browse") %>\n                </button>\n            </div>\n        </div>\n        <div class="upload-queue">\n            <div class="previews">\n            </div>\n            <div class="controls">\n                <% if (allowPathSelection) { %>\n                <div class="path">\n                    <label><%- _t("Upload to...") %></label>\n                    <p class="form-help">\n                        <%- _t("Select another destination folder or leave blank to add files to the current location.") %>\n                    </p>\n                    <input\n                        type="text"\n                        name="location"\n                        />\n                </div>\n                <% } %>\n                <div class="actions row">\n                    <div class="col-md-9">\n                        <div class="progress progress-striped active">\n                            <div class="progress-bar progress-bar-success"\n                                 role="progressbar"\n                                 aria-valuenow="0"\n                                 aria-valuemin="0"\n                                 aria-valuemax="100"\n                                 style="width: 0%">\n                                <span class="sr-only">40% Complete (success)</span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-3 align-right">\n                        <button\n                            type="button"\n                            class="btn btn-primary upload-all">\n                            <%- _t("Upload") %>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("text!mockup-patterns-upload-url/templates/preview.xml",[],function(){return'<div class="row item form-inline">\n    <div class="col-md-1 action">\n        <button\n            type="button"\n            class="btn btn-danger btn-xs remove-item"\n            data-dz-remove=""\n            href="javascript:undefined;">\n            <span class="glyphicon glyphicon-remove"></span>\n        </button>\n    </div>\n    <div class="col-md-8 title">\n        <div class="dz-preview">\n          <div class="dz-details">\n            <div class="dz-filename"><span data-dz-name></span></div>\n          </div>\n          <div class="dz-error-message"><span data-dz-errormessage></span></div>\n        </div>\n        <div class="dz-progress">\n            <span class="dz-upload" data-dz-uploadprogress></span>\n        </div>\n    </div>\n    <div class="col-md-3 info">\n        <div class="dz-size" data-dz-size></div>\n        <img data-dz-thumbnail />\n    </div>\n</div>\n'}),define("mockup-patterns-upload",["jquery","underscore","pat-base","mockup-patterns-relateditems","dropzone","text!mockup-patterns-upload-url/templates/upload.xml","text!mockup-patterns-upload-url/templates/preview.xml","mockup-utils","translate"],function($,_,Base,RelatedItems,Dropzone,UploadTemplate,PreviewTemplate,utils,_t){"use strict";return Dropzone.autoDiscover=!1,Base.extend({name:"upload",trigger:".pat-upload",parser:"mockup",defaults:{showTitle:!0,url:null,className:"upload",wrap:!1,wrapperTemplate:'<div class="upload-wrapper"/>',fileaddedClassName:"dropping",useTus:!1,container:"",ajaxUpload:!0,paramName:"file",addRemoveLinks:!1,autoCleanResults:!0,previewsContainer:".previews",previewTemplate:null,maxFiles:null,maxFilesize:99999999,allowPathSelection:void 0,relatedItems:{attributes:["UID","Title","Description","getURL","portal_type","path","ModificationDate"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,selectableTypes:["Folder"]}},init:function(){var self=this,template=UploadTemplate;void 0===self.options.allowPathSelection&&(self.options.allowPathSelection=self.options.baseUrl&&self.options.relativePath),$(document).bind("paste",function(e){var items=e.originalEvent.clipboardData.items;if(items)for(var i=0;i<items.length;i++)if(-1!==items[i].type.indexOf("image")){var blob=items[i].getAsFile();self.dropzone.addFile(blob)}}),self.currentPath=self.options.currentPath,self.currentFile=0,template=_.template(template)({_t:_t,allowPathSelection:self.options.allowPathSelection}),self.$el.addClass(self.options.className),self.$el.append(template),self.$progress=$(".progress-bar-success",self.$el),self.options.showTitle||self.$el.find("h2.title").hide(),self.options.ajaxUpload||($(".fallback",this.$el).remove(),this.$el.hasClass(".upload-container")?this.$el.addClass("no-ajax-upload"):this.$el.closest(".upload-container").addClass("no-ajax-upload")),self.options.wrap&&(self.$el.wrap(self.options.wrapperTemplate),self.$el=self.$el.parent()),self.options.allowPathSelection?(self.$pathInput=$('input[name="location"]',self.$el),self.relatedItems=self.setupRelatedItems(self.$pathInput)):($('input[name="location"]',self.$el).parent().remove(),self.relatedItems=null),self.$dropzone=$(".upload-area",self.$el),$("div.browse-select button.browse",self.$el).click(function(e){e.preventDefault(),e.stopPropagation(),(!self.options.maxFiles||self.dropzone.files.length<self.options.maxFiles)&&self.dropzone.hiddenFileInput.click()});var dzoneOptions=this.getDzoneOptions();try{self.dropzone=new Dropzone(self.$dropzone[0],dzoneOptions)}catch(e){throw window.DEBUG&&console.log(e),e}self.dropzone.on("maxfilesreached",function(){self.showHideControls()}),self.dropzone.on("addedfile",function(){self.showHideControls()}),self.dropzone.on("removedfile",function(){self.showHideControls()}),self.dropzone.on("success",function(e,response){var data;try{data=$.parseJSON(response)}catch(ex){data=response}self.$el.trigger("uploadAllCompleted",{data:data,path_uid:self.$pathInput?self.$pathInput.val():null})}),self.options.autoCleanResults&&self.dropzone.on("complete",function(file){file.status===Dropzone.SUCCESS&&setTimeout(function(){$(file.previewElement).fadeOut()},3e3)}),self.dropzone.on("complete",function(file){file.status===Dropzone.SUCCESS&&1===self.dropzone.files.length&&self.showHideControls()}),self.dropzone.on("error",function(file,response,xmlhr){void 0!==xmlhr&&403!==xmlhr.status&&$(".dz-error-message span",file.previewElement).html(_t("The file transfer failed"))}),self.dropzone.on("totaluploadprogress",function(pct){pct=(100*(self.currentFile-1)+pct)/(100*self.dropzone.files.length)*100,self.$progress.attr("aria-valuenow",pct).css("width",pct+"%")}),$(".upload-all",self.$el).click(function(e){e.preventDefault(),e.stopPropagation(),self.processUpload({finished:function(){self.$progress.attr("aria-valuenow",0).css("width","0%")}})}),self.options.clipboardfile&&self.dropzone.addFile(self.options.clipboardfile)},showHideControls:function(){var self=this;self._showHideTimeout&&clearTimeout(self._showHideTimeout),self._showHideTimeout=setTimeout(function(){self._showHideControls()},50)},_showHideControls:function(){var $controls=$(".controls",this.$el),$browse=$(".browse-select",this.$el),$input=$(".dz-hidden-input");if(this.options.maxFiles&&(this.dropzone.files.length<this.options.maxFiles?($browse.show(),$input.prop("disabled",!1)):($browse.hide(),$input.prop("disabled",!0))),0<this.dropzone.files.length){$controls.fadeIn("slow");var file=this.dropzone.files[0];$(".dz-error-message span",file.previewElement).html("")}else $controls.fadeOut("slow")},pathJoin:function(){var parts=[];return _.each(arguments,function(part){part&&("/"===part[0]&&(part=part.substring(1)),"/"===part[part.length-1]&&(part=part.substring(0,part.length-1)),parts.push(part))}),parts.join("/")},getUrl:function(){var url=this.options.url;if(!url)if(this.options.baseUrl&&this.options.relativePath)"/"!==(url=this.options.baseUrl)[url.length-1]&&(url+="/"),url+=this.pathJoin(this.currentPath,this.options.relativePath);else{var $form=this.$el.parents("form");url=0<$form.length?$form.attr("action"):window.location.href}return url},getDzoneOptions:function(){this.options.clickable=!0;var options=$.extend({},this.options);if(options.url=this.getUrl(),options.headers={"X-CSRF-TOKEN":utils.getAuthenticator()},options.uploadMultiple=!1,delete options.wrap,delete options.wrapperTemplate,delete options.resultTemplate,delete options.autoCleanResults,delete options.fileaddedClassName,delete options.useTus,this.options.previewsContainer){var $preview=this.$el.find(this.options.previewsContainer);0<$preview.length&&(options.previewsContainer=$preview[0])}return options.autoProcessQueue=!1,options.previewTemplate=PreviewTemplate,options},processUpload:function(options){options||(options={});var self=this,processing=!1,useTus=self.options.useTus,fileaddedClassName=self.options.fileaddedClassName,finished=options.finished;self.currentFile=0,function process(){processing=!0,0===self.dropzone.files.length&&(processing=!1);var file=self.dropzone.files[0];if(processing&&file.status===Dropzone.ERROR&&(file.status=Dropzone.QUEUED,processing=!1),!processing)return self.$el.removeClass(fileaddedClassName),void(void 0!==finished&&"function"==typeof finished&&finished());-1!==[Dropzone.SUCCESS,Dropzone.CANCELED].indexOf(file.status)?(self.dropzone.removeFile(file),process()):(file.status!==Dropzone.UPLOADING&&(useTus&&window.tus?self.handleTusUpload(file):(self.currentFile+=1,self.dropzone.processFile(file))),setTimeout(process,100))}()},handleTusUpload:function(file){var self=this;$(file.previewElement);file.status=Dropzone.UPLOADING,window.tus.upload(file,{endpoint:self.dropzone.options.url,headers:{FILENAME:file.name,"X-CSRF-TOKEN":utils.getAuthenticator()},chunkSize:5242880}).fail(function(){window.DEBUG&&console.alert(_t("Error uploading with TUS resumable uploads")),file.status=Dropzone.ERROR}).progress(function(e,bytesUploaded,bytesTotal){var percentage=bytesUploaded/bytesTotal*100;self.$progress.attr("aria-valuenow",percentage).css("width",percentage+"%"),self.$progress.html(_t("uploading...")+"<br />"+self.formatBytes(bytesUploaded)+" / "+self.formatBytes(bytesTotal))}).done(function(url,file){file.status=Dropzone.SUCCESS,self.dropzone.emit("success",file),self.dropzone.emit("complete",file)})},formatBytes:function(bytes){var kb=Math.round(bytes/1024);if(kb<1024)return kb+" KiB";var mb=Math.round(kb/1024);return mb<1024?mb+" MB":Math.round(mb/1024)+" GB"},setPath:function(path){this.currentPath=path,this.options.url=null,this.options.url=this.dropzone.options.url=this.getUrl()},setupRelatedItems:function($input){var self=this,options=self.options.relatedItems;options.upload=!1,self.options.initialFolder&&$input.attr("value",self.options.initialFolder);var ri=new RelatedItems($input,options);return ri.$el.on("change",function(){var result=$(this).select2("data"),path=null;0<result.length&&(path=result[0].path),self.setPath(path)}),ri}})}),define("mockup-patterns-tinymce-url/js/links",["jquery","underscore","pat-registry","pat-base","tinymce","text!mockup-patterns-tinymce-url/templates/link.xml","text!mockup-patterns-tinymce-url/templates/image.xml","mockup-patterns-relateditems","mockup-patterns-autotoc","mockup-patterns-modal","mockup-patterns-upload"],function($,_,registry,Base,tinymce,LinkTemplate,ImageTemplate,RelatedItems){"use strict";var LinkType=Base.extend({name:"linktype",trigger:".pat-linktype-dummy",defaults:{linkModal:null},init:function(){this.linkModal=this.options.linkModal,this.tinypattern=this.options.tinypattern,this.tiny=this.tinypattern.tiny,this.dom=this.tiny.dom},getEl:function(){return this.$el.find("input")},value:function(){return $.trim(this.getEl().val())},toUrl:function(){return this.value()},load:function(element){this.getEl().attr("value",this.tiny.dom.getAttrib(element,"data-val"))},set:function(val){var $el=this.getEl();$el.attr("value",val),$el.val(val)},attributes:function(){return{"data-val":this.value()}}}),ExternalLink=LinkType.extend({name:"externallinktype",trigger:".pat-externallinktype-dummy",init:function(){LinkType.prototype.init.call(this),this.getEl().on("change",function(){var val=$(this).val();new RegExp("https?://").test(val)||-1!==$(this).val().split("/")[0].indexOf(".")&&$(this).val("http://"+val)})}}),InternalLink=LinkType.extend({name:"internallinktype",trigger:".pat-internallinktype-dummy",init:function(){LinkType.prototype.init.call(this),this.getEl().addClass("pat-relateditems"),this.createRelatedItems()},getEl:function(){return this.$el.find("input:not(.select2-input)")},createRelatedItems:function(){var options=this.linkModal.options.relatedItems;options.upload=!1,this.relatedItems=new RelatedItems(this.getEl(),options)},value:function(){var val=this.getEl().select2("data");return val&&"object"==typeof val&&(val=val[0]),val},toUrl:function(){var value=this.value();return value?this.tinypattern.generateUrl(value):null},load:function(element){var val=this.tiny.dom.getAttrib(element,"data-val");val&&this.set(val)},set:function(val){var $el=this.getEl();$el.select2("destroy"),$el.removeData("pattern-relateditems"),$el.parent().replaceWith($el),$el.attr("value",val),$el.val(val),this.createRelatedItems()},attributes:function(){var val=this.value();return val?{"data-val":val.UID}:{}}}),UploadLink=LinkType.extend({name:"uploadlinktype",trigger:".pat-uploadlinktype-dummy",getDelegatedLinkType:function(){return"uploadImage"===this.linkModal.linkType?this.linkModal.linkTypes.image:this.linkModal.linkTypes.internal},toUrl:function(){return this.getDelegatedLinkType().toUrl()},attributes:function(){return this.getDelegatedLinkType().attributes()},set:function(val){return this.getDelegatedLinkType().set(val)},load:function(element){return this.getDelegatedLinkType().load(element)},value:function(){return this.getDelegatedLinkType().value()}}),ImageLink=InternalLink.extend({name:"imagelinktype",trigger:".pat-imagelinktype-dummy",toUrl:function(){var value=this.value();return this.tinypattern.generateImageUrl(value,this.linkModal.$scale.val())}}),EmailLink=LinkType.extend({name:"emaillinktype",trigger:".pat-emaillinktype-dummy",toUrl:function(){var val=this.value();if(val){var subject=this.getSubject(),href="mailto:"+val;return subject&&(href+="?subject="+subject),href}return null},load:function(element){LinkType.prototype.load.apply(this,[element]),this.linkModal.$subject.val(this.tiny.dom.getAttrib(element,"data-subject"))},getSubject:function(){return this.linkModal.$subject.val()},attributes:function(){var attribs=LinkType.prototype.attributes.call(this);return attribs["data-subject"]=this.getSubject(),attribs}}),AnchorLink=LinkType.extend({name:"anchorlinktype",trigger:".pat-anchorlinktype-dummy",init:function(){LinkType.prototype.init.call(this),this.$select=this.$el.find("select"),this.anchorNodes=[],this.anchorData=[],this.populate()},value:function(){var val=this.$select.select2("data");return val&&"object"==typeof val&&(val=val.id),val},populate:function(){var node,i,j,name,title;this.$select.find("option").remove(),this.anchorNodes=[],this.anchorData=[];var nodes=this.tiny.dom.select(".mceItemAnchor,.mce-item-anchor");for(i=0;i<nodes.length;i+=1)node=nodes[i],(name=this.tiny.dom.getAttrib(node,"name"))||(name=this.tiny.dom.getAttrib(node,"id")),""!==name&&(this.anchorNodes.push(node),this.anchorData.push({name:name,title:name}));if(0<(nodes=this.tiny.dom.select(this.linkModal.options.anchorSelector)).length)for(i=0;i<nodes.length;i+=1)if(node=nodes[i],""!==(title=$(node).text().replace(/^\s+|\s+$/g,""))){name=(name=title.toLowerCase().substring(0,1024)).replace(/[^a-z0-9]/g,"-");var found=!1;for(j=0;j<this.anchorNodes.length;j+=1){var anode=this.anchorData[j];if(anode.name===name){found=!0,anode.title=title;break}}found||(this.anchorData.push({name:name,title:title,newAnchor:!0}),this.anchorNodes.push(node))}if(0<this.anchorNodes.length)for(i=0;i<this.anchorData.length;i+=1){var data=this.anchorData[i];this.$select.append('<option value="'+i+'">'+data.title+"</option>")}else this.$select.append("<option>No anchors found..</option>")},getIndex:function(name){for(var i=0;i<this.anchorData.length;i+=1){if(this.anchorData[i].name===name)return i}return 0},toUrl:function(){var val=this.value();if(val){var index=parseInt(val,10),node=this.anchorNodes[index],data=this.anchorData[index];return data.newAnchor&&(node.innerHTML='<a name="'+data.name+'" class="mce-item-anchor"></a>'+node.innerHTML),"#"+data.name}return null},set:function(val){var anchor=this.getIndex(val);this.$select.select2("data",""+anchor)}});return tinymce.PluginManager.add("ploneimage",function(editor){editor.addButton("ploneimage",{icon:"image",tooltip:"Insert/edit image",onclick:editor.settings.addImageClicked,stateSelector:"img:not([data-mce-object])"}),editor.addMenuItem("ploneimage",{icon:"image",text:"Insert image",onclick:editor.settings.addImageClicked,context:"insert",prependToContext:!0})}),tinymce.PluginManager.add("plonelink",function(editor){editor.addButton("plonelink",{icon:"link",tooltip:"Insert/edit link",shortcut:"Ctrl+K",onclick:editor.settings.addLinkClicked,stateSelector:"a[href]"}),editor.addButton("unlink",{icon:"unlink",tooltip:"Remove link(s)",cmd:"unlink",stateSelector:"a[href]"}),editor.addShortcut("Ctrl+K","",editor.settings.addLinkClicked),editor.addMenuItem("plonelink",{icon:"link",text:"Insert link",shortcut:"Ctrl+K",onclick:editor.settings.addLinkClicked,stateSelector:"a[href]",context:"insert",prependToContext:!0})}),Base.extend({name:"linkmodal",trigger:".pat-linkmodal",defaults:{anchorSelector:"h1,h2,h3",linkTypes:[],initialLinkType:"internal",text:{insertHeading:"Insert Link"},linkTypeClassMapping:{internal:InternalLink,upload:UploadLink,external:ExternalLink,email:EmailLink,anchor:AnchorLink,image:ImageLink,uploadImage:UploadLink,externalImage:LinkType}},linkTypeTemplateMapping:{internal:LinkTemplate,upload:LinkTemplate,external:LinkTemplate,email:LinkTemplate,anchor:LinkTemplate,image:ImageTemplate,uploadImage:ImageTemplate,externalImage:ImageTemplate},template:function(data){return _.template(this.linkTypeTemplateMapping[this.linkType])(data)},init:function(){var self=this;self.tinypattern=self.options.tinypattern,self.tinypattern.options.anchorSelector&&(self.options.anchorSelector=self.tinypattern.options.anchorSelector),self.tiny=self.tinypattern.tiny,self.dom=self.tiny.dom,self.linkType=self.options.initialLinkType,self.linkTypes={},self.modal=registry.patterns["plone-modal"].init(self.$el,{html:self.generateModalHtml(),content:null,buttons:".plone-btn"}),self.modal.on("shown",function(e){self.modalShown.apply(self,[e])})},isOnlyTextSelected:function(){var html=this.tiny.selection.getContent();if(/</.test(html)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(html)||-1===html.indexOf("href=")))return!1;if(this.anchorElm){var nodes=this.anchorElm.childNodes;if(0===nodes.length)return!1;for(var ii=nodes.length-1;0<=ii;ii--)if(3!==nodes[ii].nodeType)return!1}return!0},generateModalHtml:function(){return this.template({options:this.options,upload:this.options.upload,text:this.options.text,insertHeading:this.options.text.insertHeading,linkTypes:this.options.linkTypes,externalText:this.options.text.external,emailText:this.options.text.email,subjectText:this.options.text.subject,targetList:this.options.targetList,titleText:this.options.text.title,externalImageText:this.options.text.externalImage,altText:this.options.text.alt,imageAlignText:this.options.text.imageAlign,scaleText:this.options.text.scale,imageScales:this.options.imageScales,cancelBtn:this.options.text.cancelBtn,insertBtn:this.options.text.insertBtn})},isImageMode:function(){return-1!==["image","uploadImage","externalImage"].indexOf(this.linkType)},initElements:function(){var self=this;self.$target=$('select[name="target"]',self.modal.$modal),self.$button=$('.plone-modal-footer input[name="insert"]',self.modal.$modal),self.$title=$('input[name="title"]',self.modal.$modal),self.$subject=$('input[name="subject"]',self.modal.$modal),self.$alt=$('input[name="alt"]',self.modal.$modal),self.$align=$('select[name="align"]',self.modal.$modal),self.$scale=$('select[name="scale"]',self.modal.$modal),_.each(self.options.linkTypes,function(type){var $container=$(".linkType."+type+" .main",self.modal.$modal);self.linkTypes[type]=new self.options.linkTypeClassMapping[type]($container,{linkModal:self,tinypattern:self.tinypattern})}),$(".autotoc-nav a",self.modal.$modal).click(function(){var classes=$("fieldset.linkType",self.modal.$modal).eq($(this).index())[0].className.split(/\s+/);_.each(classes,function(val){-1!==_.indexOf(self.options.linkTypes,val)&&(self.linkType=val)})})},getLinkUrl:function(){return this.linkTypes[this.linkType].toUrl()},getValue:function(){return this.linkTypes[this.linkType].value()},updateAnchor:function(href){this.tiny.focus(),this.tiny.selection.setRng(this.rng);var target=this.$target.val(),title=this.$title.val(),linkAttrs=$.extend(!0,this.data,{title:title||null,target:target||null,"data-linkType":this.linkType,href:href},this.linkTypes[this.linkType].attributes());this.anchorElm?(this.onlyText&&linkAttrs.text!==this.initialText&&("innerText"in this.anchorElm?this.anchorElm.innerText=this.data.text:this.anchorElm.textContent=this.data.text),this.tiny.dom.setAttribs(this.anchorElm,linkAttrs),this.tiny.selection.select(this.anchorElm),this.tiny.undoManager.add()):this.onlyText?this.tiny.insertContent(this.tiny.dom.createHTML("a",linkAttrs,this.tiny.dom.encode(this.data.text))):this.tiny.execCommand("mceInsertLink",!1,linkAttrs)},focusElement:function(elm){this.tiny.focus(),this.tiny.selection.select(elm),this.tiny.nodeChanged()},updateImage:function(src){var self=this,title=self.$title.val();self.tiny.focus(),self.tiny.selection.setRng(self.rng);var imgElm,data=$.extend(!0,{},{src:src,title:title||null,alt:self.$alt.val(),class:self.$align.val(),"data-linkType":self.linkType,"data-scale":self.$scale.val()},self.linkTypes[self.linkType].attributes());self.imgElm&&!self.imgElm.getAttribute("data-mce-object")?(data.width=self.dom.getAttrib(self.imgElm,"width"),data.height=self.dom.getAttrib(self.imgElm,"height")):self.imgElm=null,self.imgElm?self.dom.setAttribs(self.imgElm,data):(data.id="__mcenew",self.tiny.insertContent(self.dom.createHTML("img",data)),self.imgElm=self.dom.get("__mcenew"),self.dom.setAttrib(self.imgElm,"id",null)),(imgElm=self.imgElm).onload=imgElm.onerror=function(){imgElm.onload=imgElm.onerror=null,self.focusElement(imgElm)},self.imgElm.complete&&self.focusElement(self.imgElm)},modalShown:function(e){var self=this;self.initElements(),self.initData(),self.options.upload&&(self.$upload=$(".uploadify-me",self.modal.$modal),self.options.upload.relatedItems=$.extend(!0,{},self.options.relatedItems),self.options.upload.relatedItems.selectableTypes=self.options.folderTypes,self.$upload.addClass("pat-upload").patternUpload(self.options.upload),self.$upload.on("uploadAllCompleted",function(evt,data){self.linkTypes.image?(self.linkTypes.image.set(data.data.UID),$("#"+$("#tinylink-image",self.modal.$modal).data("navref")).trigger("click")):(self.linkTypes.internal.set(data.data.UID),$("#"+$("#tinylink-internal",self.modal.$modal).data("navref")).trigger("click"))})),self.$button.off("click").on("click",function(e){if(e.preventDefault(),e.stopPropagation(),self.linkType=self.modal.$modal.find("fieldset.active").data("linktype"),"uploadImage"===self.linkType||"upload"===self.linkType){var patUpload=self.$upload.data().patternUpload;0<patUpload.dropzone.files.length&&(patUpload.processUpload(),self.$upload.on("uploadAllCompleted",function(evt,data){var counter=0,checkUpload=function(){if(counter<5&&!self.linkTypes[self.linkType].value())return counter+=1,void setTimeout(checkUpload,100);var href=self.getLinkUrl();self.updateImage(href),self.hide()};checkUpload()}))}var href;try{href=self.getLinkUrl()}catch(error){return}href&&(self.isImageMode()?self.updateImage(href):self.updateAnchor(href),self.hide())}),$('.plone-modal-footer input[name="cancel"]',self.modal.$modal).click(function(e){e.preventDefault(),self.hide()})},show:function(){this.modal.show()},hide:function(){this.modal.hide()},initData:function(){var value;this.data={},this.initialText=null,this.rng=this.tiny.selection.getRng(),this.selectedElm=this.tiny.selection.getNode(),this.anchorElm=this.tiny.dom.getParent(this.selectedElm,"a[href]"),this.onlyText=this.isOnlyTextSelected(),this.data.text=this.initialText=this.anchorElm?this.anchorElm.innerText||this.anchorElm.textContent:this.tiny.selection.getContent({format:"text"}),this.data.href=this.anchorElm?this.tiny.dom.getAttrib(this.anchorElm,"href"):"",this.anchorElm?this.data.target=this.tiny.dom.getAttrib(this.anchorElm,"target"):this.tiny.settings.default_link_target&&(this.data.target=this.tiny.settings.default_link_target),(value=this.tiny.dom.getAttrib(this.anchorElm,"rel"))&&(this.data.rel=value),(value=this.tiny.dom.getAttrib(this.anchorElm,"class"))&&(this.data.class=value),(value=this.tiny.dom.getAttrib(this.anchorElm,"title"))&&(this.data.title=value),this.selection=this.tiny.selection,this.tiny.focus();var linkType,selectedElm=this.imgElm=this.selection.getNode();if(this.anchorElm=this.dom.getParent(selectedElm,"a[href]"),this.isImageMode()){if("IMG"!==this.imgElm.nodeName&&this.anchorElm){var imgs=this.anchorElm.getElementsByTagName("img");0<imgs.length&&(this.imgElm=imgs[0],this.focusElement(this.imgElm))}if("IMG"!==this.imgElm.nodeName&&(this.imgElm=null),this.imgElm){var src=this.dom.getAttrib(this.imgElm,"src");if(this.$title.val(this.dom.getAttrib(this.imgElm,"title")),this.$alt.val(this.dom.getAttrib(this.imgElm,"alt")),linkType=this.dom.getAttrib(this.imgElm,"data-linktype")){this.linkType=linkType,this.linkTypes[this.linkType].load(this.imgElm);var scale=this.dom.getAttrib(this.imgElm,"data-scale");this.$scale.val(scale),$("#tinylink-"+this.linkType,this.modal.$modal).trigger("click")}else src&&this.guessImageLink(src);for(var klasses=this.dom.getAttrib(this.imgElm,"class").split(" "),i=0;i<klasses.length;i+=1){var klass=klasses[i];for(var availClass in this.options.imageClasses)-1!==availClass.indexOf(klass)&&this.$align.val(klass)}}}else if(this.anchorElm){this.focusElement(this.anchorElm);var href;href=this.dom.getAttrib(this.anchorElm,"href"),this.$target.val(this.dom.getAttrib(this.anchorElm,"target")),this.$title.val(this.dom.getAttrib(this.anchorElm,"title")),(linkType=this.dom.getAttrib(this.anchorElm,"data-linktype"))?(this.linkType=linkType,this.linkTypes[this.linkType].load(this.anchorElm),$("#tinylink-"+this.linkType,this.modal.$modal).trigger("click")):href&&this.guessAnchorLink(href)}},guessImageLink:function(src){-1!==src.indexOf(this.options.prependToScalePart)?(this.linkType="image",this.$scale.val(this.tinypattern.getScaleFromUrl(src)),this.linkTypes.image.set(this.tinypattern.stripGeneratedUrl(src))):(this.linkType="externalImage",this.linkTypes.externalImage.set(src))},guessAnchorLink:function(href){if(this.options.prependToUrl&&-1!==href.indexOf(this.options.prependToUrl))this.linkType="internal",this.linkTypes.internal.set(this.tinypattern.stripGeneratedUrl(href));else if(-1!==href.indexOf("mailto:")){this.linkType="email";var split=href.substring("mailto:".length,href.length).split("?subject=");this.linkTypes.email.set(split[0]),1<split.length&&this.$subject.val(decodeURIComponent(split[1]))}else"#"===href[0]?(this.linkType="anchor",this.linkTypes.anchor.set(href.substring(1))):(this.linkType="external",this.linkTypes.external.set(href))},setSelectElement:function($el,val){$el.find("option:selected").prop("selected",!1),val&&$el.find('option[value="'+val+'"]').prop("selected",!0)},reinitialize:function(){this.modal.options.html=this.generateModalHtml()}})}),function(root){define("tinymce-modern-theme",["tinymce"],function(){return function(){!function(){"use strict";var pIndexOf,global=tinymce.util.Tools.resolve("tinymce.ThemeManager"),global$1=tinymce.util.Tools.resolve("tinymce.EditorManager"),global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),hasMenubar=function(editor){return!1!==getMenubar(editor)},getMenubar=function(editor){return editor.getParam("menubar")},getToolbarSize=function(editor){return editor.getParam("toolbar_items_size")},getMenu=function(editor){return editor.getParam("menu")},isSkinDisabled=function(editor){return!1===editor.settings.skin},getResize=function(editor){var resize=editor.getParam("resize","vertical");return!1===resize?"none":"both"===resize?"both":"vertical"},global$3=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$4=tinymce.util.Tools.resolve("tinymce.ui.Factory"),global$5=tinymce.util.Tools.resolve("tinymce.util.I18n"),$_aycuj2t7jh8lz3jp_fireSkinLoaded=function(editor){return editor.fire("SkinLoaded")},$_aycuj2t7jh8lz3jp_fireResizeEditor=function(editor){return editor.fire("ResizeEditor")},$_aycuj2t7jh8lz3jp_fireBeforeRenderUI=function(editor){return editor.fire("BeforeRenderUI")},focus=function(panel,type){return function(){var item=panel.find(type)[0];item&&item.focus(!0)}},$_47hpztt8jh8lz3jq_addKeys=function(editor,panel){editor.shortcuts.add("Alt+F9","",focus(panel,"menubar")),editor.shortcuts.add("Alt+F10,F10","",focus(panel,"toolbar")),editor.shortcuts.add("Alt+F11","",focus(panel,"elementpath")),panel.on("cancel",function(){editor.focus()})},global$6=tinymce.util.Tools.resolve("tinymce.geom.Rect"),global$7=tinymce.util.Tools.resolve("tinymce.util.Delay"),constant=function(value){return function(){return value}},never=constant(!1),always=constant(!0),$_3pjweotejh8lz3k4={noop:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i]},noarg:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return f()}},compose:function(fa,fb){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return fa(fb.apply(null,arguments))}},constant:constant,identity:function(x){return x},tripleEquals:function(a,b){return a===b},curry:function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}},not:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return!f.apply(null,arguments)}},die:function(msg){return function(){throw new Error(msg)}},apply:function(f){return f()},call:function(f){f()},never:never,always:always},never$1=$_3pjweotejh8lz3k4.never,always$1=$_3pjweotejh8lz3k4.always,none=function(){return NONE},NONE=function(){var eq=function(o){return o.isNone()},call=function(thunk){return thunk()},id=function(n){return n},me={fold:function(n,s){return n()},is:never$1,isSome:never$1,isNone:always$1,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},or:id,orThunk:call,map:none,ap:none,each:function(){},bind:none,flatten:none,exists:never$1,forall:always$1,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:$_3pjweotejh8lz3k4.constant("none()")};return Object.freeze&&Object.freeze(me),me}(),some=function(a){var constant_a=function(){return a},self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always$1,isNone:never$1,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},ap:function(optfab){return optfab.fold(none,function(fab){return some(fab(a))})},each:function(f){f(a)},bind:bind,flatten:constant_a,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never$1,function(b){return elementEq(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Option={some:some,none:none,from:function(value){return null==value?NONE:some(value)}},getUiContainer=function(ctrl){return ctrl?ctrl.getRoot().uiContainer:null},$_1jk3jvtcjh8lz3jy={getUiContainerDelta:function(ctrl){var uiContainer=getUiContainer(ctrl);if(uiContainer&&"static"!==global$3.DOM.getStyle(uiContainer,"position",!0)){var containerPos=global$3.DOM.getPos(uiContainer),dx=uiContainer.scrollLeft-containerPos.x,dy=uiContainer.scrollTop-containerPos.y;return Option.some({x:dx,y:dy})}return Option.none()},setUiContainer:function(editor,ctrl){var uiContainer=global$3.DOM.select(editor.settings.ui_container)[0];ctrl.getRoot().uiContainer=uiContainer},getUiContainer:getUiContainer,inheritUiContainer:function(fromCtrl,toCtrl){return toCtrl.uiContainer=getUiContainer(fromCtrl)}},createToolbar=function(editor,items,size){var buttonGroup,toolbarItems=[];if(items)return global$2.each(items.split(/[ ,]/),function(item){var itemName,bindSelectorChanged=function(){var selection=editor.selection;item.settings.stateSelector&&selection.selectorChanged(item.settings.stateSelector,function(state){item.active(state)},!0),item.settings.disabledStateSelector&&selection.selectorChanged(item.settings.disabledStateSelector,function(state){item.disabled(state)})};"|"===item?buttonGroup=null:(buttonGroup||(buttonGroup={type:"buttongroup",items:[]},toolbarItems.push(buttonGroup)),editor.buttons[item]&&(itemName=item,"function"==typeof(item=editor.buttons[itemName])&&(item=item()),item.type=item.type||"button",item.size=size,item=global$4.create(item),buttonGroup.items.push(item),editor.initialized?bindSelectorChanged():editor.on("init",bindSelectorChanged)))}),{type:"toolbar",layout:"flow",items:toolbarItems}},$_fudqhrtfjh8lz3k7_createToolbar=createToolbar,$_fudqhrtfjh8lz3k7_createToolbars=function(editor,size){var toolbars=[];if(global$2.each(function(editor){var toolbar=editor.getParam("toolbar");return!1===toolbar?[]:global$2.isArray(toolbar)?global$2.grep(toolbar,function(toolbar){return 0<toolbar.length}):function(settings,defaultToolbar){for(var toolbars=[],i=1;i<10;i++){var toolbar_1=settings["toolbar"+i];if(!toolbar_1)break;toolbars.push(toolbar_1)}var mainToolbar=settings.toolbar?[settings.toolbar]:[defaultToolbar];return 0<toolbars.length?toolbars:mainToolbar}(editor.settings,"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image")}(editor),function(toolbar){var items;(items=toolbar)&&toolbars.push(createToolbar(editor,items,size))}),toolbars.length)return{type:"panel",layout:"stack",classes:"toolbar-grp",ariaRoot:!0,ariaRemember:!0,items:toolbars}},DOM=global$3.DOM,toClientRect=function(geomRect){return{left:geomRect.x,top:geomRect.y,width:geomRect.w,height:geomRect.h,right:geomRect.x+geomRect.w,bottom:geomRect.y+geomRect.h}},movePanelTo=function(panel,pos){panel.moveTo(pos.left,pos.top)},userConstrain=function(handler,x,y,elementRect,contentAreaRect,panelRect){return panelRect=toClientRect({x:x,y:y,w:panelRect.w,h:panelRect.h}),handler&&(panelRect=handler({elementRect:toClientRect(elementRect),contentAreaRect:toClientRect(contentAreaRect),panelRect:panelRect})),panelRect},$_5kodmdt9jh8lz3js_addContextualToolbars=function(editor){var scrollContainer,getContextToolbars=function(){return editor.contextToolbars||[]},reposition=function(match,shouldShow){var relPos,panelRect,elementRect,contentAreaRect,panel,relRect,testPositions,handler=function(editor){return editor.getParam("inline_toolbar_position_handler")}(editor);if(!editor.removed)if(match&&match.toolbar.panel){var elm,pos,targetRect,root;testPositions=["bc-tc","tc-bc","tl-bl","bl-tl","tr-br","br-tr"],panel=match.toolbar.panel,shouldShow&&panel.show(),elm=match.element,pos=DOM.getPos(editor.getContentAreaContainer()),targetRect=editor.dom.getRect(elm),"BODY"===(root=editor.dom.getRoot()).nodeName&&(targetRect.x-=root.ownerDocument.documentElement.scrollLeft||root.scrollLeft,targetRect.y-=root.ownerDocument.documentElement.scrollTop||root.scrollTop),targetRect.x+=pos.x,targetRect.y+=pos.y,elementRect=targetRect,panelRect=DOM.getRect(panel.getEl()),contentAreaRect=DOM.getRect(editor.getContentAreaContainer()||editor.getBody());var delta=$_1jk3jvtcjh8lz3jy.getUiContainerDelta(panel).getOr({x:0,y:0});if(elementRect.x+=delta.x,elementRect.y+=delta.y,panelRect.x+=delta.x,panelRect.y+=delta.y,contentAreaRect.x+=delta.x,contentAreaRect.y+=delta.y,"inline"!==DOM.getStyle(match.element,"display",!0)){var clientRect=match.element.getBoundingClientRect();elementRect.w=clientRect.width,elementRect.h=clientRect.height}editor.inline||(contentAreaRect.w=editor.getDoc().documentElement.offsetWidth),editor.selection.controlSelection.isResizable(match.element)&&elementRect.w<25&&(elementRect=global$6.inflate(elementRect,0,8)),relPos=global$6.findBestRelativePosition(panelRect,elementRect,contentAreaRect,testPositions),elementRect=global$6.clamp(elementRect,contentAreaRect),relPos?(relRect=global$6.relativePosition(panelRect,elementRect,relPos),movePanelTo(panel,userConstrain(handler,relRect.x,relRect.y,elementRect,contentAreaRect,panelRect))):(contentAreaRect.h+=panelRect.h,(elementRect=global$6.intersect(contentAreaRect,elementRect))?(relPos=global$6.findBestRelativePosition(panelRect,elementRect,contentAreaRect,["bc-tc","bl-tl","br-tr"]))?(relRect=global$6.relativePosition(panelRect,elementRect,relPos),movePanelTo(panel,userConstrain(handler,relRect.x,relRect.y,elementRect,contentAreaRect,panelRect))):movePanelTo(panel,userConstrain(handler,elementRect.x,elementRect.y,elementRect,contentAreaRect,panelRect)):panel.hide()),function(panel,relPos,predicate){relPos=relPos?relPos.substr(0,2):"",global$2.each({t:"down",b:"up"},function(cls,pos){panel.classes.toggle("arrow-"+cls,predicate(pos,relPos.substr(0,1)))}),global$2.each({l:"left",r:"right"},function(cls,pos){panel.classes.toggle("arrow-"+cls,predicate(pos,relPos.substr(1,1)))})}(panel,relPos,function(pos1,pos2){return pos1===pos2})}else!function(editor){global$2.each(editor.contextToolbars,function(toolbar){toolbar.panel&&toolbar.panel.hide()})}(editor)},repositionHandler=function(show){return function(){global$7.requestAnimationFrame(function(){editor.selection&&reposition(findFrontMostMatch(editor.selection.getNode()),show)})}},showContextToolbar=function(match){var panel;if(match.toolbar.panel)return match.toolbar.panel.show(),void reposition(match);panel=global$4.create({type:"floatpanel",role:"dialog",classes:"tinymce tinymce-inline arrow",ariaLabel:"Inline toolbar",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:!0,fixed:!0,border:1,items:$_fudqhrtfjh8lz3k7_createToolbar(editor,match.toolbar.items),oncancel:function(){editor.focus()}}),$_1jk3jvtcjh8lz3jy.setUiContainer(editor,panel),function(panel){if(!scrollContainer){var reposition_1=repositionHandler(!0),uiContainer_1=$_1jk3jvtcjh8lz3jy.getUiContainer(panel);scrollContainer=editor.selection.getScrollContainer()||editor.getWin(),DOM.bind(scrollContainer,"scroll",reposition_1),DOM.bind(uiContainer_1,"scroll",reposition_1),editor.on("remove",function(){DOM.unbind(scrollContainer,"scroll",reposition_1),DOM.unbind(uiContainer_1,"scroll",reposition_1)})}}(panel),(match.toolbar.panel=panel).renderTo().reflow(),reposition(match)},hideAllContextToolbars=function(){global$2.each(getContextToolbars(),function(toolbar){toolbar.panel&&toolbar.panel.hide()})},findFrontMostMatch=function(targetElm){var i,y,parentsAndSelf,toolbars=getContextToolbars();for(i=(parentsAndSelf=editor.$(targetElm).parents().add(targetElm)).length-1;0<=i;i--)for(y=toolbars.length-1;0<=y;y--)if(toolbars[y].predicate(parentsAndSelf[i]))return{toolbar:toolbars[y],element:parentsAndSelf[i]};return null};editor.on("click keyup setContent ObjectResized",function(e){("setcontent"!==e.type||e.selection)&&global$7.setEditorTimeout(editor,function(){var match;(match=findFrontMostMatch(editor.selection.getNode()))?(hideAllContextToolbars(),showContextToolbar(match)):hideAllContextToolbars()})}),editor.on("blur hide contextmenu",hideAllContextToolbars),editor.on("ObjectResizeStart",function(){var match=findFrontMostMatch(editor.selection.getNode());match&&match.toolbar.panel&&match.toolbar.panel.hide()}),editor.on("ResizeEditor ResizeWindow",repositionHandler(!0)),editor.on("nodeChange",repositionHandler(!1)),editor.on("remove",function(){global$2.each(getContextToolbars(),function(toolbar){toolbar.panel&&toolbar.panel.remove()}),editor.contextToolbars={}}),editor.shortcuts.add("ctrl+shift+e > ctrl+shift+p","",function(){var match=findFrontMostMatch(editor.selection.getNode());match&&match.toolbar.panel&&match.toolbar.panel.items()[0].focus()})},isType=function(type){return function(value){return function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t}(value)===type}},$_d8bie3tijh8lz3kn={isString:isType("string"),isObject:isType("object"),isArray:isType("array"),isNull:isType("null"),isBoolean:isType("boolean"),isUndefined:isType("undefined"),isFunction:isType("function"),isNumber:isType("number")},rawIndexOf=void 0===(pIndexOf=Array.prototype.indexOf)?function(xs,x){return slowIndexOf(xs,x)}:function(xs,x){return pIndexOf.call(xs,x)},contains=function(xs,x){return-1<rawIndexOf(xs,x)},map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i,xs)}return r},each=function(xs,f){for(var i=0,len=xs.length;i<len;i++)f(xs[i],i,xs)},eachr=function(xs,f){for(var i=xs.length-1;0<=i;i--)f(xs[i],i,xs)},filter=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i,xs)&&r.push(x)}return r},findIndex=function(xs,pred){for(var i=0,len=xs.length;i<len;i++)if(pred(xs[i],i,xs))return Option.some(i);return Option.none()},slowIndexOf=function(xs,x){for(var i=0,len=xs.length;i<len;++i)if(xs[i]===x)return i;return-1},push=Array.prototype.push,flatten=function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!Array.prototype.isPrototypeOf(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);push.apply(r,xs[i])}return r},forall=function(xs,pred){for(var i=0,len=xs.length;i<len;++i)if(!0!==pred(xs[i],i,xs))return!1;return!0},slice=Array.prototype.slice,from$1=$_d8bie3tijh8lz3kn.isFunction(Array.from)?Array.from:function(x){return slice.call(x)},$_f3qxhzthjh8lz3kg={map:map,each:each,eachr:eachr,partition:function(xs,pred){for(var pass=[],fail=[],i=0,len=xs.length;i<len;i++){var x=xs[i];(pred(x,i,xs)?pass:fail).push(x)}return{pass:pass,fail:fail}},filter:filter,groupBy:function(xs,f){if(0===xs.length)return[];for(var wasType=f(xs[0]),r=[],group=[],i=0,len=xs.length;i<len;i++){var x=xs[i],type=f(x);type!==wasType&&(r.push(group),group=[]),wasType=type,group.push(x)}return 0!==group.length&&r.push(group),r},indexOf:function(xs,x){var r=rawIndexOf(xs,x);return-1===r?Option.none():Option.some(r)},foldr:function(xs,f,acc){return eachr(xs,function(x){acc=f(acc,x)}),acc},foldl:function(xs,f,acc){return each(xs,function(x){acc=f(acc,x)}),acc},find:function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i,xs))return Option.some(x)}return Option.none()},findIndex:findIndex,flatten:flatten,bind:function(xs,f){var output=map(xs,f);return flatten(output)},forall:forall,exists:function(xs,pred){return findIndex(xs,pred).isSome()},contains:contains,equal:function(a1,a2){return a1.length===a2.length&&forall(a1,function(x,i){return x===a2[i]})},reverse:function(xs){var r=slice.call(xs,0);return r.reverse(),r},chunk:function(array,size){for(var r=[],i=0;i<array.length;i+=size){var s=array.slice(i,i+size);r.push(s)}return r},difference:function(a1,a2){return filter(a1,function(x){return!contains(a2,x)})},mapToObject:function(xs,f){for(var r={},i=0,len=xs.length;i<len;i++){var x=xs[i];r[String(x)]=f(x,i)}return r},pure:function(x){return[x]},sort:function(xs,comparator){var copy=slice.call(xs,0);return copy.sort(comparator),copy},range:function(num,f){for(var r=[],i=0;i<num;i++)r.push(f(i));return r},head:function(xs){return 0===xs.length?Option.none():Option.some(xs[0])},last:function(xs){return 0===xs.length?Option.none():Option.some(xs[xs.length-1])},from:from$1},defaultMenus={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table"},help:{title:"Help"}},createMenuNameItemPair=function(name,item){return"|"===name?{name:"|",item:{text:"|"}}:item?{name:name,item:item}:null},isSeparator=function(namedMenuItem){return namedMenuItem&&"|"===namedMenuItem.item.text},createMenu=function(editorMenuItems,menus,removedMenuItems,context){var menuButton,menu,namedMenuItems,isUserDefined;return menus?(menu=menus[context],isUserDefined=!0):menu=defaultMenus[context],menu&&(menuButton={text:menu.title},namedMenuItems=[],global$2.each((menu.items||"").split(/[ ,]/),function(name){var namedMenuItem=createMenuNameItemPair(name,editorMenuItems[name]);namedMenuItem&&namedMenuItems.push(namedMenuItem)}),isUserDefined||global$2.each(editorMenuItems,function(item,name){item.context!==context||function(namedMenuItems,name){return $_f3qxhzthjh8lz3kg.findIndex(namedMenuItems,function(namedMenuItem){return namedMenuItem.name===name}).isSome()}(namedMenuItems,name)||("before"===item.separator&&namedMenuItems.push({name:"|",item:{text:"|"}}),item.prependToContext?namedMenuItems.unshift(createMenuNameItemPair(name,item)):namedMenuItems.push(createMenuNameItemPair(name,item)),"after"===item.separator&&namedMenuItems.push({name:"|",item:{text:"|"}}))}),menuButton.menu=$_f3qxhzthjh8lz3kg.map(function(namedMenuItems,removedMenuItems){var menuItemsPass1=$_f3qxhzthjh8lz3kg.filter(namedMenuItems,function(namedMenuItem){return!1===removedMenuItems.hasOwnProperty(namedMenuItem.name)}),menuItemsPass2=$_f3qxhzthjh8lz3kg.filter(menuItemsPass1,function(namedMenuItem,i,namedMenuItems){return!isSeparator(namedMenuItem)||!isSeparator(namedMenuItems[i-1])});return $_f3qxhzthjh8lz3kg.filter(menuItemsPass2,function(namedMenuItem,i,namedMenuItems){return!isSeparator(namedMenuItem)||0<i&&i<namedMenuItems.length-1})}(namedMenuItems,removedMenuItems),function(menuItem){return menuItem.item}),!menuButton.menu.length)?null:menuButton},$_8i78rftgjh8lz3ka_createMenuButtons=function(editor){for(var menuButtons=[],defaultMenuBar=function(editor){var name,defaultMenuBar=[],menu=getMenu(editor);if(menu)for(name in menu)defaultMenuBar.push(name);else for(name in defaultMenus)defaultMenuBar.push(name);return defaultMenuBar}(editor),removedMenuItems=global$2.makeMap(function(editor){return editor.getParam("removed_menuitems","")}(editor).split(/[ ,]/)),menubar=getMenubar(editor),enabledMenuNames="string"==typeof menubar?menubar.split(/[ ,]/):defaultMenuBar,i=0;i<enabledMenuNames.length;i++){var menuItems=enabledMenuNames[i],menu=createMenu(editor.menuItems,getMenu(editor),removedMenuItems,menuItems);menu&&menuButtons.push(menu)}return menuButtons},DOM$1=global$3.DOM,getSize=function(elm){return{width:elm.clientWidth,height:elm.clientHeight}},resizeTo=function(editor,width,height){var containerElm,iframeElm,containerSize,iframeSize;containerElm=editor.getContainer(),iframeElm=editor.getContentAreaContainer().firstChild,containerSize=getSize(containerElm),iframeSize=getSize(iframeElm),null!==width&&(width=Math.max(function(editor){return editor.getParam("min_width",100,"number")}(editor),width),width=Math.min(function(editor){return editor.getParam("max_width",65535,"number")}(editor),width),DOM$1.setStyle(containerElm,"width",width+(containerSize.width-iframeSize.width)),DOM$1.setStyle(iframeElm,"width",width)),height=Math.max(function(editor){return editor.getParam("min_height",100,"number")}(editor),height),height=Math.min(function(editor){return editor.getParam("max_height",65535,"number")}(editor),height),DOM$1.setStyle(iframeElm,"height",height),$_aycuj2t7jh8lz3jp_fireResizeEditor(editor)},$_5toavetjjh8lz3ko_resizeTo=resizeTo,$_5toavetjjh8lz3ko_resizeBy=function(editor,dw,dh){var elm=editor.getContentAreaContainer();resizeTo(editor,elm.clientWidth+dw,elm.clientHeight+dh)},global$8=tinymce.util.Tools.resolve("tinymce.Env"),trigger=function(sidebar,panel,callbackName){var elm,callback=sidebar.settings[callbackName];callback&&callback((elm=panel.getEl("body"),{element:function(){return elm}}))},showPanel=function(editor,name,sidebars){return function(e){var btnCtrl=e.control,container=btnCtrl.parents().filter("panel")[0],panel=container.find("#"+name)[0],sidebar=function(sidebars,name){return global$2.grep(sidebars,function(sidebar){return sidebar.name===name})[0]}(sidebars,name);!function(name,container,sidebars){global$2.each(sidebars,function(sidebar){var panel=container.items().filter("#"+sidebar.name)[0];panel&&panel.visible()&&sidebar.name!==name&&(trigger(sidebar,panel,"onhide"),panel.visible(!1))})}(name,container,sidebars),btnCtrl.parent().items().each(function(ctrl){ctrl.active(!1)}),panel&&panel.visible()?(trigger(sidebar,panel,"onhide"),panel.hide(),btnCtrl.active(!1)):(panel?panel.show():(panel=global$4.create({type:"container",name:name,layout:"stack",classes:"sidebar-panel",html:""}),container.prepend(panel),trigger(sidebar,panel,"onrender")),trigger(sidebar,panel,"onshow"),btnCtrl.active(!0)),$_aycuj2t7jh8lz3jp_fireResizeEditor(editor)}},$_5buua9tkjh8lz3kq_hasSidebar=function(editor){return!(global$8.ie&&!(11<=global$8.ie)||!editor.sidebars)&&0<editor.sidebars.length},$_5buua9tkjh8lz3kq_createSidebar=function(editor){return{type:"panel",name:"sidebar",layout:"stack",classes:"sidebar",items:[{type:"toolbar",layout:"stack",classes:"sidebar-toolbar",items:global$2.map(editor.sidebars,function(sidebar){var settings=sidebar.settings;return{type:"button",icon:settings.icon,image:settings.image,tooltip:settings.tooltip,onclick:showPanel(editor,sidebar.name,editor.sidebars)}})}]}},$_231e94tmjh8lz3ku_fireSkinLoaded=function(editor){var done=function(){editor._skinLoaded=!0,$_aycuj2t7jh8lz3jp_fireSkinLoaded(editor)};return function(){editor.initialized?done():editor.on("init",done)}},DOM$2=global$3.DOM,editArea=function(border){return{type:"panel",name:"iframe",layout:"stack",classes:"edit-area",border:border,html:""}},$_4cj0a3t3jh8lz3jk_render=function(editor,theme,args){var panel,resizeHandleCtrl,startSize;if(!1===isSkinDisabled(editor)&&args.skinUiCss?DOM$2.styleSheetLoader.load(args.skinUiCss,$_231e94tmjh8lz3ku_fireSkinLoaded(editor)):$_231e94tmjh8lz3ku_fireSkinLoaded(editor)(),panel=theme.panel=global$4.create({type:"panel",role:"application",classes:"tinymce",style:"visibility: hidden",layout:"stack",border:1,items:[{type:"container",classes:"top-part",items:[!1===hasMenubar(editor)?null:{type:"menubar",border:"0 0 1 0",items:$_8i78rftgjh8lz3ka_createMenuButtons(editor)},$_fudqhrtfjh8lz3k7_createToolbars(editor,getToolbarSize(editor))]},$_5buua9tkjh8lz3kq_hasSidebar(editor)?function(editor){return{type:"panel",layout:"stack",classes:"edit-aria-container",border:"1 0 0 0",items:[editArea("0"),$_5buua9tkjh8lz3kq_createSidebar(editor)]}}(editor):editArea("1 0 0 0")]}),$_1jk3jvtcjh8lz3jy.setUiContainer(editor,panel),"none"!==getResize(editor)&&(resizeHandleCtrl={type:"resizehandle",direction:getResize(editor),onResizeStart:function(){var elm=editor.getContentAreaContainer().firstChild;startSize={width:elm.clientWidth,height:elm.clientHeight}},onResize:function(e){"both"===getResize(editor)?$_5toavetjjh8lz3ko_resizeTo(editor,startSize.width+e.deltaX,startSize.height+e.deltaY):$_5toavetjjh8lz3ko_resizeTo(editor,null,startSize.height+e.deltaY)}}),function(editor){return editor.getParam("statusbar",!0,"boolean")}(editor)){var html=global$5.translate(["Powered by {0}",'<a href="https://www.tinymce.com/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>']),brandingLabel=function(editor){return editor.getParam("branding",!0,"boolean")}(editor)?{type:"label",classes:"branding",html:" "+html}:null;panel.add({type:"panel",name:"statusbar",classes:"statusbar",layout:"flow",border:"1 0 0 0",ariaRoot:!0,items:[{type:"elementpath",editor:editor},resizeHandleCtrl,brandingLabel]})}return $_aycuj2t7jh8lz3jp_fireBeforeRenderUI(editor),editor.on("SwitchMode",function(panel){return function(e){panel.find("*").disabled("readonly"===e.mode)}}(panel)),panel.renderBefore(args.targetNode).reflow(),function(editor){return editor.getParam("readonly",!1,"boolean")}(editor)&&editor.setMode("readonly"),args.width&&DOM$2.setStyle(panel.getEl(),"width",args.width),editor.on("remove",function(){panel.remove(),panel=null}),$_47hpztt8jh8lz3jq_addKeys(editor,panel),$_5kodmdt9jh8lz3js_addContextualToolbars(editor),{iframeContainer:panel.find("#iframe")[0].getEl(),editorContainer:panel.getEl()}},global$9=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),count=0,funcs={id:function(){return"mceu_"+count++},create:function(name,attrs,children){var elm=document.createElement(name);return global$3.DOM.setAttribs(elm,attrs),"string"==typeof children?elm.innerHTML=children:global$2.each(children,function(child){child.nodeType&&elm.appendChild(child)}),elm},createFragment:function(html){return global$3.DOM.createFragment(html)},getWindowSize:function(){return global$3.DOM.getViewPort()},getSize:function(elm){var width,height;if(elm.getBoundingClientRect){var rect=elm.getBoundingClientRect();width=Math.max(rect.width||rect.right-rect.left,elm.offsetWidth),height=Math.max(rect.height||rect.bottom-rect.bottom,elm.offsetHeight)}else width=elm.offsetWidth,height=elm.offsetHeight;return{width:width,height:height}},getPos:function(elm,root){return global$3.DOM.getPos(elm,root||funcs.getContainer())},getContainer:function(){return global$8.container?global$8.container:document.body},getViewPort:function(win){return global$3.DOM.getViewPort(win)},get:function(id){return document.getElementById(id)},addClass:function(elm,cls){return global$3.DOM.addClass(elm,cls)},removeClass:function(elm,cls){return global$3.DOM.removeClass(elm,cls)},hasClass:function(elm,cls){return global$3.DOM.hasClass(elm,cls)},toggleClass:function(elm,cls,state){return global$3.DOM.toggleClass(elm,cls,state)},css:function(elm,name,value){return global$3.DOM.setStyle(elm,name,value)},getRuntimeStyle:function(elm,name){return global$3.DOM.getStyle(elm,name,!0)},on:function(target,name,callback,scope){return global$3.DOM.bind(target,name,callback,scope)},off:function(target,name,callback){return global$3.DOM.unbind(target,name,callback)},fire:function(target,name,args){return global$3.DOM.fire(target,name,args)},innerHtml:function(elm,html){global$3.DOM.setHTML(elm,html)}},isStatic=function(elm){return"static"===funcs.getRuntimeStyle(elm,"position")},isFixed=function(ctrl){return ctrl.state.get("fixed")};function calculateRelativePosition(ctrl,targetElm,rel){var ctrlElm,pos,x,y,selfW,selfH,targetW,targetH,viewport,size;return viewport=getWindowViewPort(),x=(pos=funcs.getPos(targetElm,$_1jk3jvtcjh8lz3jy.getUiContainer(ctrl))).x,y=pos.y,isFixed(ctrl)&&isStatic(document.body)&&(x-=viewport.x,y-=viewport.y),ctrlElm=ctrl.getEl(),selfW=(size=funcs.getSize(ctrlElm)).width,selfH=size.height,targetW=(size=funcs.getSize(targetElm)).width,targetH=size.height,"b"===(rel=(rel||"").split(""))[0]&&(y+=targetH),"r"===rel[1]&&(x+=targetW),"c"===rel[0]&&(y+=Math.round(targetH/2)),"c"===rel[1]&&(x+=Math.round(targetW/2)),"b"===rel[3]&&(y-=selfH),"r"===rel[4]&&(x-=selfW),"c"===rel[3]&&(y-=Math.round(selfH/2)),"c"===rel[4]&&(x-=Math.round(selfW/2)),{x:x,y:y,w:selfW,h:selfH}}var getWindowViewPort=function(){var win=window,x=Math.max(win.pageXOffset,document.body.scrollLeft,document.documentElement.scrollLeft),y=Math.max(win.pageYOffset,document.body.scrollTop,document.documentElement.scrollTop);return{x:x,y:y,w:x+(win.innerWidth||document.documentElement.clientWidth),h:y+(win.innerHeight||document.documentElement.clientHeight)}},getViewPortRect=function(ctrl){var customUiContainer=$_1jk3jvtcjh8lz3jy.getUiContainer(ctrl);return customUiContainer&&!isFixed(ctrl)?function(customUiContainer){return{x:0,y:0,w:customUiContainer.scrollWidth-1,h:customUiContainer.scrollHeight-1}}(customUiContainer):getWindowViewPort()},$_d97gfctrjh8lz3lm={testMoveRel:function(elm,rels){for(var viewPortRect=getViewPortRect(this),i=0;i<rels.length;i++){var pos=calculateRelativePosition(this,elm,rels[i]);if(isFixed(this)){if(0<pos.x&&pos.x+pos.w<viewPortRect.w&&0<pos.y&&pos.y+pos.h<viewPortRect.h)return rels[i]}else if(pos.x>viewPortRect.x&&pos.x+pos.w<viewPortRect.w&&pos.y>viewPortRect.y&&pos.y+pos.h<viewPortRect.h)return rels[i]}return rels[0]},moveRel:function(elm,rel){"string"!=typeof rel&&(rel=this.testMoveRel(elm,rel));var pos=calculateRelativePosition(this,elm,rel);return this.moveTo(pos.x,pos.y)},moveBy:function(dx,dy){var rect=this.layoutRect();return this.moveTo(rect.x+dx,rect.y+dy),this},moveTo:function(x,y){function constrain(value,max,size){return value<0?0:max<value+size&&(value=max-size)<0?0:value}if(this.settings.constrainToViewport){var viewPortRect=getViewPortRect(this),layoutRect=this.layoutRect();x=constrain(x,viewPortRect.w,layoutRect.w),y=constrain(y,viewPortRect.h,layoutRect.h)}var uiContainer=$_1jk3jvtcjh8lz3jy.getUiContainer(this);return uiContainer&&isStatic(uiContainer)&&!isFixed(this)&&(x-=uiContainer.scrollLeft,y-=uiContainer.scrollTop),uiContainer&&(x+=1,y+=1),this.state.get("rendered")?this.layoutRect({x:x,y:y}).repaint():(this.settings.x=x,this.settings.y=y),this.fire("move",{x:x,y:y}),this}},global$10=tinymce.util.Tools.resolve("tinymce.util.Class"),global$11=tinymce.util.Tools.resolve("tinymce.util.EventDispatcher"),$_focdcktxjh8lz3mn_parseBox=function(value){var len;if(value)return"number"==typeof value?{top:value=value||0,left:value,bottom:value,right:value}:(1===(len=(value=value.split(" ")).length)?value[1]=value[2]=value[3]=value[0]:2===len?(value[2]=value[0],value[3]=value[1]):3===len&&(value[3]=value[1]),{top:parseInt(value[0],10)||0,right:parseInt(value[1],10)||0,bottom:parseInt(value[2],10)||0,left:parseInt(value[3],10)||0})},$_focdcktxjh8lz3mn_measureBox=function(elm,prefix){function getSide(name){var val=parseFloat(function(name){var defaultView=elm.ownerDocument.defaultView;if(defaultView){var computedStyle=defaultView.getComputedStyle(elm,null);return computedStyle?(name=name.replace(/[A-Z]/g,function(a){return"-"+a}),computedStyle.getPropertyValue(name)):null}return elm.currentStyle[name]}(name));return isNaN(val)?0:val}return{top:getSide(prefix+"TopWidth"),right:getSide(prefix+"RightWidth"),bottom:getSide(prefix+"BottomWidth"),left:getSide(prefix+"LeftWidth")}};function noop$1(){}function ClassList(onchange){this.cls=[],this.cls._map={},this.onchange=onchange||noop$1,this.prefix=""}global$2.extend(ClassList.prototype,{add:function(cls){return cls&&!this.contains(cls)&&(this.cls._map[cls]=!0,this.cls.push(cls),this._change()),this},remove:function(cls){if(this.contains(cls)){var i=void 0;for(i=0;i<this.cls.length&&this.cls[i]!==cls;i++);this.cls.splice(i,1),delete this.cls._map[cls],this._change()}return this},toggle:function(cls,state){var curState=this.contains(cls);return curState!==state&&(curState?this.remove(cls):this.add(cls),this._change()),this},contains:function(cls){return!!this.cls._map[cls]},_change:function(){delete this.clsValue,this.onchange.call(this)}}),ClassList.prototype.toString=function(){var value;if(this.clsValue)return this.clsValue;value="";for(var i=0;i<this.cls.length;i++)0<i&&(value+=" "),value+=this.prefix+this.cls[i];return value};var Collection,Collection$1,proto,expression=/^([\w\\*]+)?(?:#([\w\-\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,whiteSpace=/^\s*|\s*$/g,Selector=global$10.extend({init:function(selector){var match=this.match;function compile(selector,filters,direct){var parts;function add(filter){filter&&filters.push(filter)}return add(function(name){if(name)return name=name.toLowerCase(),function(item){return"*"===name||item.type===name}}((parts=expression.exec(selector.replace(whiteSpace,"")))[1])),add(function(id){if(id)return function(item){return item._name===id}}(parts[2])),add(function(classes){if(classes)return classes=classes.split("."),function(item){for(var i=classes.length;i--;)if(!item.classes.contains(classes[i]))return!1;return!0}}(parts[3])),add(function(name,cmp,check){if(name)return function(item){var value=item[name]?item[name]():"";return cmp?"="===cmp?value===check:"*="===cmp?0<=value.indexOf(check):"~="===cmp?0<=(" "+value+" ").indexOf(" "+check+" "):"!="===cmp?value!==check:"^="===cmp?0===value.indexOf(check):"$="===cmp&&value.substr(value.length-check.length)===check:!!check}}(parts[4],parts[5],parts[6])),add(function(name){var notSelectors;if(name)return(name=/(?:not\((.+)\))|(.+)/i.exec(name))[1]?(notSelectors=parseChunks(name[1],[]),function(item){return!match(item,notSelectors)}):(name=name[2],function(item,index,length){return"first"===name?0===index:"last"===name?index===length-1:"even"===name?index%2==0:"odd"===name?index%2==1:!!item[name]&&item[name]()})}(parts[7])),filters.pseudo=!!parts[7],filters.direct=direct,filters}function parseChunks(selector,selectors){var extra,matches,i,parts=[];do{if(chunker.exec(""),(matches=chunker.exec(selector))&&(selector=matches[3],parts.push(matches[1]),matches[2])){extra=matches[3];break}}while(matches);for(extra&&parseChunks(extra,selectors),selector=[],i=0;i<parts.length;i++)">"!==parts[i]&&selector.push(compile(parts[i],[],">"===parts[i-1]));return selectors.push(selector),selectors}this._selectors=parseChunks(selector,[])},match:function(control,selectors){var i,l,si,sl,selector,fi,fl,filters,index,length,siblings,count,item;for(i=0,l=(selectors=selectors||this._selectors).length;i<l;i++){for(item=control,count=0,si=(sl=(selector=selectors[i]).length)-1;0<=si;si--)for(filters=selector[si];item;){if(filters.pseudo)for(index=length=(siblings=item.parent().items()).length;index--&&siblings[index]!==item;);for(fi=0,fl=filters.length;fi<fl;fi++)if(!filters[fi](item,index,length)){fi=fl+1;break}if(fi===fl){count++;break}if(si===sl-1)break;item=item.parent()}if(count===sl)return!0}return!1},find:function(container){var i,l,matches=[],selectors=this._selectors;function collect(items,selector,index){var i,l,fi,fl,item,filters=selector[index];for(i=0,l=items.length;i<l;i++){for(item=items[i],fi=0,fl=filters.length;fi<fl;fi++)if(!filters[fi](item,i,l)){fi=fl+1;break}if(fi===fl)index===selector.length-1?matches.push(item):item.items&&collect(item.items(),selector,index+1);else if(filters.direct)return;item.items&&collect(item.items(),selector,index)}}if(container.items){for(i=0,l=selectors.length;i<l;i++)collect(container.items(),selectors[i],0);1<l&&(matches=function(array){for(var item,uniqueItems=[],i=array.length;i--;)(item=array[i]).__checked||(uniqueItems.push(item),item.__checked=1);for(i=uniqueItems.length;i--;)delete uniqueItems[i].__checked;return uniqueItems}(matches))}return Collection||(Collection=Selector.Collection),new Collection(matches)}}),push$1=Array.prototype.push,slice$1=Array.prototype.slice;proto={length:0,init:function(items){items&&this.add(items)},add:function(items){return global$2.isArray(items)?push$1.apply(this,items):items instanceof Collection$1?this.add(items.toArray()):push$1.call(this,items),this},set:function(items){var i,len=this.length;for(this.length=0,this.add(items),i=this.length;i<len;i++)delete this[i];return this},filter:function(selector){var i,l,item,match,matches=[];for(match="string"==typeof selector?(selector=new Selector(selector),function(item){return selector.match(item)}):selector,i=0,l=this.length;i<l;i++)match(item=this[i])&&matches.push(item);return new Collection$1(matches)},slice:function(){return new Collection$1(slice$1.apply(this,arguments))},eq:function(index){return-1===index?this.slice(index):this.slice(index,+index+1)},each:function(callback){return global$2.each(this,callback),this},toArray:function(){return global$2.toArray(this)},indexOf:function(ctrl){for(var i=this.length;i--&&this[i]!==ctrl;);return i},reverse:function(){return new Collection$1(global$2.toArray(this).reverse())},hasClass:function(cls){return!!this[0]&&this[0].classes.contains(cls)},prop:function(name,value){var item;return void 0!==value?(this.each(function(item){item[name]&&item[name](value)}),this):(item=this[0])&&item[name]?item[name]():void 0},exec:function(name){var args=global$2.toArray(arguments).slice(1);return this.each(function(item){item[name]&&item[name].apply(item,args)}),this},remove:function(){for(var i=this.length;i--;)this[i].remove();return this},addClass:function(cls){return this.each(function(item){item.classes.add(cls)})},removeClass:function(cls){return this.each(function(item){item.classes.remove(cls)})}},global$2.each("fire on off show hide append prepend before after reflow".split(" "),function(name){proto[name]=function(){var args=global$2.toArray(arguments);return this.each(function(ctrl){name in ctrl&&ctrl[name].apply(ctrl,args)}),this}}),global$2.each("text name disabled active selected checked visible parent value data".split(" "),function(name){proto[name]=function(value){return this.prop(name,value)}}),Collection$1=global$10.extend(proto);var Collection$2=Selector.Collection=Collection$1,Binding=function(settings){this.create=settings.create};Binding.create=function(model,name){return new Binding({create:function(otherModel,otherName){var bindings,fromSelfToOther=function(e){otherModel.set(otherName,e.value)};return otherModel.on("change:"+otherName,function(e){model.set(name,e.value)}),model.on("change:"+name,fromSelfToOther),(bindings=otherModel._bindings)||(bindings=otherModel._bindings=[],otherModel.on("destroy",function(){for(var i=bindings.length;i--;)bindings[i]()})),bindings.push(function(){model.off("change:"+name,fromSelfToOther)}),model.get(name)}})};var global$12=tinymce.util.Tools.resolve("tinymce.util.Observable");function isNode(node){return 0<node.nodeType}var animationFrameRequested,Control,ObservableObject=global$10.extend({Mixins:[global$12],init:function(data){var name,value;for(name in data=data||{})(value=data[name])instanceof Binding&&(data[name]=value.create(this,name));this.data=data},set:function(name,value){var key,args,oldValue=this.data[name];if(value instanceof Binding&&(value=value.create(this,name)),"object"!=typeof name)return function isEqual(a,b){var k,checked;if(a===b)return!0;if(null===a||null===b)return a===b;if("object"!=typeof a||"object"!=typeof b)return a===b;if(global$2.isArray(b)){if(a.length!==b.length)return!1;for(k=a.length;k--;)if(!isEqual(a[k],b[k]))return!1}if(isNode(a)||isNode(b))return a===b;for(k in checked={},b){if(!isEqual(a[k],b[k]))return!1;checked[k]=!0}for(k in a)if(!checked[k]&&!isEqual(a[k],b[k]))return!1;return!0}(oldValue,value)||(this.data[name]=value,args={target:this,name:name,value:value,oldValue:oldValue},this.fire("change:"+name,args),this.fire("change",args)),this;for(key in name)this.set(key,name[key]);return this},get:function(name){return this.data[name]},has:function(name){return name in this.data},bind:function(name){return Binding.create(this,name)},destroy:function(){this.fire("destroy")}}),dirtyCtrls={},$_ef12j5u4jh8lz3nl={add:function(ctrl){var parent=ctrl.parent();if(parent){if(!parent._layout||parent._layout.isNative())return;dirtyCtrls[parent._id]||(dirtyCtrls[parent._id]=parent),animationFrameRequested||(animationFrameRequested=!0,global$7.requestAnimationFrame(function(){var id,ctrl;for(id in animationFrameRequested=!1,dirtyCtrls)(ctrl=dirtyCtrls[id]).state.get("rendered")&&ctrl.reflow();dirtyCtrls={}},document.body))}},remove:function(ctrl){dirtyCtrls[ctrl._id]&&delete dirtyCtrls[ctrl._id]}},hasMouseWheelEventSupport="onmousewheel"in document,hasWheelEventSupport=!1,idCounter=0,proto$1={Statics:{classPrefix:"mce-"},isRtl:function(){return Control.rtl},classPrefix:"mce-",init:function(settings){var classes,defaultClasses,self=this;function applyClasses(classes){var i;for(classes=classes.split(" "),i=0;i<classes.length;i++)self.classes.add(classes[i])}self.settings=settings=global$2.extend({},self.Defaults,settings),self._id=settings.id||"mceu_"+idCounter++,self._aria={role:settings.role},self._elmCache={},self.$=global$9,self.state=new ObservableObject({visible:!0,active:!1,disabled:!1,value:""}),self.data=new ObservableObject(settings.data),self.classes=new ClassList(function(){self.state.get("rendered")&&(self.getEl().className=this.toString())}),self.classes.prefix=self.classPrefix,(classes=settings.classes)&&(self.Defaults&&(defaultClasses=self.Defaults.classes)&&classes!==defaultClasses&&applyClasses(defaultClasses),applyClasses(classes)),global$2.each("title text name visible disabled active value".split(" "),function(name){name in settings&&self[name](settings[name])}),self.on("click",function(){if(self.disabled())return!1}),self.settings=settings,self.borderBox=$_focdcktxjh8lz3mn_parseBox(settings.border),self.paddingBox=$_focdcktxjh8lz3mn_parseBox(settings.padding),self.marginBox=$_focdcktxjh8lz3mn_parseBox(settings.margin),settings.hidden&&self.hide()},Properties:"parent,name",getContainerElm:function(){var uiContainer=$_1jk3jvtcjh8lz3jy.getUiContainer(this);return uiContainer||funcs.getContainer()},getParentCtrl:function(elm){for(var ctrl,lookup=this.getRoot().controlIdLookup;elm&&lookup&&!(ctrl=lookup[elm.id]);)elm=elm.parentNode;return ctrl},initLayoutRect:function(){var borderBox,layoutRect,width,height,minWidth,minHeight,autoResize,startMinWidth,startMinHeight,initialSize,settings=this.settings,elm=this.getEl();borderBox=this.borderBox=this.borderBox||$_focdcktxjh8lz3mn_measureBox(elm,"border"),this.paddingBox=this.paddingBox||$_focdcktxjh8lz3mn_measureBox(elm,"padding"),this.marginBox=this.marginBox||$_focdcktxjh8lz3mn_measureBox(elm,"margin"),initialSize=funcs.getSize(elm),startMinWidth=settings.minWidth,startMinHeight=settings.minHeight,minWidth=startMinWidth||initialSize.width,minHeight=startMinHeight||initialSize.height,width=settings.width,height=settings.height,autoResize=void 0!==(autoResize=settings.autoResize)?autoResize:!width&&!height,width=width||minWidth,height=height||minHeight;var deltaW=borderBox.left+borderBox.right,deltaH=borderBox.top+borderBox.bottom,maxW=settings.maxWidth||65535,maxH=settings.maxHeight||65535;return this._layoutRect=layoutRect={x:settings.x||0,y:settings.y||0,w:width,h:height,deltaW:deltaW,deltaH:deltaH,contentW:width-deltaW,contentH:height-deltaH,innerW:width-deltaW,innerH:height-deltaH,startMinWidth:startMinWidth||0,startMinHeight:startMinHeight||0,minW:Math.min(minWidth,maxW),minH:Math.min(minHeight,maxH),maxW:maxW,maxH:maxH,autoResize:autoResize,scrollW:0},this._lastLayoutRect={},layoutRect},layoutRect:function(newRect){var lastLayoutRect,size,deltaWidth,deltaHeight,repaintControls,curRect=this._layoutRect;return curRect||(curRect=this.initLayoutRect()),newRect?(deltaWidth=curRect.deltaW,deltaHeight=curRect.deltaH,void 0!==newRect.x&&(curRect.x=newRect.x),void 0!==newRect.y&&(curRect.y=newRect.y),void 0!==newRect.minW&&(curRect.minW=newRect.minW),void 0!==newRect.minH&&(curRect.minH=newRect.minH),void 0!==(size=newRect.w)&&(size=(size=size<curRect.minW?curRect.minW:size)>curRect.maxW?curRect.maxW:size,curRect.w=size,curRect.innerW=size-deltaWidth),void 0!==(size=newRect.h)&&(size=(size=size<curRect.minH?curRect.minH:size)>curRect.maxH?curRect.maxH:size,curRect.h=size,curRect.innerH=size-deltaHeight),void 0!==(size=newRect.innerW)&&(size=(size=size<curRect.minW-deltaWidth?curRect.minW-deltaWidth:size)>curRect.maxW-deltaWidth?curRect.maxW-deltaWidth:size,curRect.innerW=size,curRect.w=size+deltaWidth),void 0!==(size=newRect.innerH)&&(size=(size=size<curRect.minH-deltaHeight?curRect.minH-deltaHeight:size)>curRect.maxH-deltaHeight?curRect.maxH-deltaHeight:size,curRect.innerH=size,curRect.h=size+deltaHeight),void 0!==newRect.contentW&&(curRect.contentW=newRect.contentW),void 0!==newRect.contentH&&(curRect.contentH=newRect.contentH),(lastLayoutRect=this._lastLayoutRect).x===curRect.x&&lastLayoutRect.y===curRect.y&&lastLayoutRect.w===curRect.w&&lastLayoutRect.h===curRect.h||((repaintControls=Control.repaintControls)&&repaintControls.map&&!repaintControls.map[this._id]&&(repaintControls.push(this),repaintControls.map[this._id]=!0),lastLayoutRect.x=curRect.x,lastLayoutRect.y=curRect.y,lastLayoutRect.w=curRect.w,lastLayoutRect.h=curRect.h),this):curRect},repaint:function(){var style,bodyStyle,bodyElm,rect,borderBox,borderW,borderH,lastRepaintRect,round,value;round=document.createRange?function(value){return value}:Math.round,style=this.getEl().style,rect=this._layoutRect,lastRepaintRect=this._lastRepaintRect||{},borderW=(borderBox=this.borderBox).left+borderBox.right,borderH=borderBox.top+borderBox.bottom,rect.x!==lastRepaintRect.x&&(style.left=round(rect.x)+"px",lastRepaintRect.x=rect.x),rect.y!==lastRepaintRect.y&&(style.top=round(rect.y)+"px",lastRepaintRect.y=rect.y),rect.w!==lastRepaintRect.w&&(value=round(rect.w-borderW),style.width=(0<=value?value:0)+"px",lastRepaintRect.w=rect.w),rect.h!==lastRepaintRect.h&&(value=round(rect.h-borderH),style.height=(0<=value?value:0)+"px",lastRepaintRect.h=rect.h),this._hasBody&&rect.innerW!==lastRepaintRect.innerW&&(value=round(rect.innerW),(bodyElm=this.getEl("body"))&&((bodyStyle=bodyElm.style).width=(0<=value?value:0)+"px"),lastRepaintRect.innerW=rect.innerW),this._hasBody&&rect.innerH!==lastRepaintRect.innerH&&(value=round(rect.innerH),(bodyElm=bodyElm||this.getEl("body"))&&((bodyStyle=bodyStyle||bodyElm.style).height=(0<=value?value:0)+"px"),lastRepaintRect.innerH=rect.innerH),this._lastRepaintRect=lastRepaintRect,this.fire("repaint",{},!1)},updateLayoutRect:function(){this.parent()._lastRect=null,funcs.css(this.getEl(),{width:"",height:""}),this._layoutRect=this._lastRepaintRect=this._lastLayoutRect=null,this.initLayoutRect()},on:function(name,callback){var self=this;return getEventDispatcher(self).on(name,function(name){var callback,scope;return"string"!=typeof name?name:function(e){return callback||self.parentsAndSelf().each(function(ctrl){var callbacks=ctrl.settings.callbacks;if(callbacks&&(callback=callbacks[name]))return scope=ctrl,!1}),callback?callback.call(scope,e):(e.action=name,void this.fire("execute",e))}}(callback)),self},off:function(name,callback){return getEventDispatcher(this).off(name,callback),this},fire:function(name,args,bubble){if((args=args||{}).control||(args.control=this),args=getEventDispatcher(this).fire(name,args),!1!==bubble&&this.parent)for(var parent_1=this.parent();parent_1&&!args.isPropagationStopped();)parent_1.fire(name,args,!1),parent_1=parent_1.parent();return args},hasEventListeners:function(name){return getEventDispatcher(this).has(name)},parents:function(selector){var ctrl,parents=new Collection$2;for(ctrl=this.parent();ctrl;ctrl=ctrl.parent())parents.add(ctrl);return selector&&(parents=parents.filter(selector)),parents},parentsAndSelf:function(selector){return new Collection$2(this).add(this.parents(selector))},next:function(){var parentControls=this.parent().items();return parentControls[parentControls.indexOf(this)+1]},prev:function(){var parentControls=this.parent().items();return parentControls[parentControls.indexOf(this)-1]},innerHtml:function(html){return this.$el.html(html),this},getEl:function(suffix){var id=suffix?this._id+"-"+suffix:this._id;return this._elmCache[id]||(this._elmCache[id]=global$9("#"+id)[0]),this._elmCache[id]},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(ex){}return this},blur:function(){return this.getEl().blur(),this},aria:function(name,value){var elm=this.getEl(this.ariaTarget);return void 0===value?this._aria[name]:(this._aria[name]=value,this.state.get("rendered")&&elm.setAttribute("role"===name?name:"aria-"+name,value),this)},encode:function(text,translate){return!1!==translate&&(text=this.translate(text)),(text||"").replace(/[&<>"]/g,function(match){return"&#"+match.charCodeAt(0)+";"})},translate:function(text){return Control.translate?Control.translate(text):text},before:function(items){var parent=this.parent();return parent&&parent.insert(items,parent.items().indexOf(this),!0),this},after:function(items){var parent=this.parent();return parent&&parent.insert(items,parent.items().indexOf(this)),this},remove:function(){var newItems,i,self=this,elm=self.getEl(),parent=self.parent();if(self.items){var controls=self.items().toArray();for(i=controls.length;i--;)controls[i].remove()}parent&&parent.items&&(newItems=[],parent.items().each(function(item){item!==self&&newItems.push(item)}),parent.items().set(newItems),parent._lastRect=null),self._eventsRoot&&self._eventsRoot===self&&global$9(elm).off();var lookup=self.getRoot().controlIdLookup;return lookup&&delete lookup[self._id],elm&&elm.parentNode&&elm.parentNode.removeChild(elm),self.state.set("rendered",!1),self.state.destroy(),self.fire("remove"),self},renderBefore:function(elm){return global$9(elm).before(this.renderHtml()),this.postRender(),this},renderTo:function(elm){return global$9(elm||this.getContainerElm()).append(this.renderHtml()),this.postRender(),this},preRender:function(){},render:function(){},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'"></div>'},postRender:function(){var elm,box,parent,name,parentEventsRoot,self=this,settings=self.settings;for(name in self.$el=global$9(self.getEl()),self.state.set("rendered",!0),settings)0===name.indexOf("on")&&self.on(name.substr(2),settings[name]);if(self._eventsRoot){for(parent=self.parent();!parentEventsRoot&&parent;parent=parent.parent())parentEventsRoot=parent._eventsRoot;if(parentEventsRoot)for(name in parentEventsRoot._nativeEvents)self._nativeEvents[name]=!0}bindPendingEvents(self),settings.style&&(elm=self.getEl())&&(elm.setAttribute("style",settings.style),elm.style.cssText=settings.style),self.settings.border&&(box=self.borderBox,self.$el.css({"border-top-width":box.top,"border-right-width":box.right,"border-bottom-width":box.bottom,"border-left-width":box.left}));var root=self.getRoot();for(var key in root.controlIdLookup||(root.controlIdLookup={}),(root.controlIdLookup[self._id]=self)._aria)self.aria(key,self._aria[key]);!1===self.state.get("visible")&&(self.getEl().style.display="none"),self.bindStates(),self.state.on("change:visible",function(e){var parentCtrl,state=e.value;self.state.get("rendered")&&(self.getEl().style.display=!1===state?"none":"",self.getEl().getBoundingClientRect()),(parentCtrl=self.parent())&&(parentCtrl._lastRect=null),self.fire(state?"show":"hide"),$_ef12j5u4jh8lz3nl.add(self)}),self.fire("postrender",{},!1)},bindStates:function(){},scrollIntoView:function(align){var x,y,width,height,parentWidth,parentHeight,elm=this.getEl(),parentElm=elm.parentNode,pos=function(elm,rootElm){var x,y,parent=elm;for(x=y=0;parent&&parent!==rootElm&&parent.nodeType;)x+=parent.offsetLeft||0,y+=parent.offsetTop||0,parent=parent.offsetParent;return{x:x,y:y}}(elm,parentElm);return x=pos.x,y=pos.y,width=elm.offsetWidth,height=elm.offsetHeight,parentWidth=parentElm.clientWidth,parentHeight=parentElm.clientHeight,"end"===align?(x-=parentWidth-width,y-=parentHeight-height):"center"===align&&(x-=parentWidth/2-width/2,y-=parentHeight/2-height/2),parentElm.scrollLeft=x,parentElm.scrollTop=y,this},getRoot:function(){for(var rootControl,ctrl=this,parents=[];ctrl;){if(ctrl.rootControl){rootControl=ctrl.rootControl;break}parents.push(ctrl),ctrl=(rootControl=ctrl).parent()}rootControl||(rootControl=this);for(var i=parents.length;i--;)parents[i].rootControl=rootControl;return rootControl},reflow:function(){$_ef12j5u4jh8lz3nl.remove(this);var parent=this.parent();return parent&&parent._layout&&!parent._layout.isNative()&&parent.reflow(),this}};function getEventDispatcher(obj){return obj._eventDispatcher||(obj._eventDispatcher=new global$11({scope:obj,toggleEvent:function(name,state){state&&global$11.isNative(name)&&(obj._nativeEvents||(obj._nativeEvents={}),obj._nativeEvents[name]=!0,obj.state.get("rendered")&&bindPendingEvents(obj))}})),obj._eventDispatcher}function bindPendingEvents(eventCtrl){var i,l,parents,eventRootCtrl,nativeEvents,name;function delegate(e){var control=eventCtrl.getParentCtrl(e.target);control&&control.fire(e.type,e)}function mouseLeaveHandler(){var ctrl=eventRootCtrl._lastHoverCtrl;ctrl&&(ctrl.fire("mouseleave",{target:ctrl.getEl()}),ctrl.parents().each(function(ctrl){ctrl.fire("mouseleave",{target:ctrl.getEl()})}),eventRootCtrl._lastHoverCtrl=null)}function mouseEnterHandler(e){var i,parents,lastParents,ctrl=eventCtrl.getParentCtrl(e.target),lastCtrl=eventRootCtrl._lastHoverCtrl,idx=0;if(ctrl!==lastCtrl){if((parents=(eventRootCtrl._lastHoverCtrl=ctrl).parents().toArray().reverse()).push(ctrl),lastCtrl){for((lastParents=lastCtrl.parents().toArray().reverse()).push(lastCtrl),idx=0;idx<lastParents.length&&parents[idx]===lastParents[idx];idx++);for(i=lastParents.length-1;idx<=i;i--)(lastCtrl=lastParents[i]).fire("mouseleave",{target:lastCtrl.getEl()})}for(i=idx;i<parents.length;i++)(ctrl=parents[i]).fire("mouseenter",{target:ctrl.getEl()})}}function fixWheelEvent(e){e.preventDefault(),"mousewheel"===e.type?(e.deltaY=-.025*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-.025*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=eventCtrl.fire("wheel",e)}if(nativeEvents=eventCtrl._nativeEvents){for((parents=eventCtrl.parents().toArray()).unshift(eventCtrl),i=0,l=parents.length;!eventRootCtrl&&i<l;i++)eventRootCtrl=parents[i]._eventsRoot;for(eventRootCtrl||(eventRootCtrl=parents[parents.length-1]||eventCtrl),eventCtrl._eventsRoot=eventRootCtrl,l=i,i=0;i<l;i++)parents[i]._eventsRoot=eventRootCtrl;var eventRootDelegates=eventRootCtrl._delegates;for(name in eventRootDelegates||(eventRootDelegates=eventRootCtrl._delegates={}),nativeEvents){if(!nativeEvents)return!1;"wheel"!==name||hasWheelEventSupport?("mouseenter"===name||"mouseleave"===name?eventRootCtrl._hasMouseEnter||(global$9(eventRootCtrl.getEl()).on("mouseleave",mouseLeaveHandler).on("mouseover",mouseEnterHandler),eventRootCtrl._hasMouseEnter=1):eventRootDelegates[name]||(global$9(eventRootCtrl.getEl()).on(name,delegate),eventRootDelegates[name]=!0),nativeEvents[name]=!1):hasMouseWheelEventSupport?global$9(eventCtrl.getEl()).on("mousewheel",fixWheelEvent):global$9(eventCtrl.getEl()).on("DOMMouseScroll",fixWheelEvent)}}}global$2.each("text title visible disabled active value".split(" "),function(name){proto$1[name]=function(value){return 0===arguments.length?this.state.get(name):(void 0!==value&&this.state.set(name,value),this)}});var Control$1=Control=global$10.extend(proto$1),hasTabstopData=function(elm){return!!elm.getAttribute("data-mce-tabstop")};function KeyboardNavigation(settings){var focusedElement,focusedControl,root=settings.root;function isElement(node){return node&&1===node.nodeType}try{focusedElement=document.activeElement}catch(ex){focusedElement=document.body}function getRole(elm){return isElement(elm=elm||focusedElement)?elm.getAttribute("role"):null}function getParentRole(elm){for(var role,parent=elm||focusedElement;parent=parent.parentNode;)if(role=getRole(parent))return role}function getAriaProp(name){var elm=focusedElement;if(isElement(elm))return elm.getAttribute("aria-"+name)}function isTextInputElement(elm){var tagName=elm.tagName.toUpperCase();return"INPUT"===tagName||"TEXTAREA"===tagName||"SELECT"===tagName}function getFocusElements(elm){var elements=[];return function collect(elm){if(1===elm.nodeType&&"none"!==elm.style.display&&!elm.disabled){(function(elm){return!(!isTextInputElement(elm)||elm.hidden)||!!hasTabstopData(elm)||!!/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(getRole(elm))})(elm)&&elements.push(elm);for(var i=0;i<elm.childNodes.length;i++)collect(elm.childNodes[i])}}(elm||root.getEl()),elements}function getNavigationRoot(targetControl){var navigationRoot,controls;(controls=(targetControl=targetControl||focusedControl).parents().toArray()).unshift(targetControl);for(var i=0;i<controls.length&&!(navigationRoot=controls[i]).settings.ariaRoot;i++);return navigationRoot}function moveFocusToIndex(idx,elements){return idx<0?idx=elements.length-1:idx>=elements.length&&(idx=0),elements[idx]&&elements[idx].focus(),idx}function moveFocus(dir,elements){var idx=-1,navigationRoot=getNavigationRoot();elements=elements||getFocusElements(navigationRoot.getEl());for(var i=0;i<elements.length;i++)elements[i]===focusedElement&&(idx=i);idx+=dir,navigationRoot.lastAriaIndex=moveFocusToIndex(idx,elements)}function left(){"tablist"===getParentRole()?moveFocus(-1,getFocusElements(focusedElement.parentNode)):focusedControl.parent().submenu?cancel():moveFocus(-1)}function right(){var role=getRole(),parentRole=getParentRole();"tablist"===parentRole?moveFocus(1,getFocusElements(focusedElement.parentNode)):"menuitem"===role&&"menu"===parentRole&&getAriaProp("haspopup")?enter():moveFocus(1)}function up(){moveFocus(-1)}function down(){var role=getRole(),parentRole=getParentRole();"menuitem"===role&&"menubar"===parentRole?enter():"button"===role&&getAriaProp("haspopup")?enter({key:"down"}):moveFocus(1)}function cancel(){focusedControl.fire("cancel")}function enter(aria){aria=aria||{},focusedControl.fire("click",{target:focusedElement,aria:aria})}return focusedControl=root.getParentCtrl(focusedElement),root.on("keydown",function(e){function handleNonTabOrEscEvent(e,handler){isTextInputElement(focusedElement)||hasTabstopData(focusedElement)||"slider"!==getRole(focusedElement)&&!1!==handler(e)&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:handleNonTabOrEscEvent(e,left);break;case 39:handleNonTabOrEscEvent(e,right);break;case 38:handleNonTabOrEscEvent(e,up);break;case 40:handleNonTabOrEscEvent(e,down);break;case 27:cancel();break;case 14:case 13:case 32:handleNonTabOrEscEvent(e,enter);break;case 9:!function(e){if("tablist"===getParentRole()){var elm=getFocusElements(focusedControl.getEl("body"))[0];elm&&elm.focus()}else moveFocus(e.shiftKey?-1:1)}(e),e.preventDefault()}}),root.on("focusin",function(e){focusedElement=e.target,focusedControl=e.control}),{focusFirst:function(targetControl){var navigationRoot=getNavigationRoot(targetControl),focusElements=getFocusElements(navigationRoot.getEl());navigationRoot.settings.ariaRemember&&"lastAriaIndex"in navigationRoot?moveFocusToIndex(navigationRoot.lastAriaIndex,focusElements):moveFocusToIndex(0,focusElements)}}}var selectorCache={},Container=Control$1.extend({init:function(settings){var self=this;self._super(settings),(settings=self.settings).fixed&&self.state.set("fixed",!0),self._items=new Collection$2,self.isRtl()&&self.classes.add("rtl"),self.bodyClasses=new ClassList(function(){self.state.get("rendered")&&(self.getEl("body").className=this.toString())}),self.bodyClasses.prefix=self.classPrefix,self.classes.add("container"),self.bodyClasses.add("container-body"),settings.containerCls&&self.classes.add(settings.containerCls),self._layout=global$4.create((settings.layout||"")+"layout"),self.settings.items?self.add(self.settings.items):self.add(self.render()),self._hasBody=!0},items:function(){return this._items},find:function(selector){return(selector=selectorCache[selector]=selectorCache[selector]||new Selector(selector)).find(this)},add:function(items){return this.items().add(this.create(items)).parent(this),this},focus:function(keyboard){var focusCtrl,keyboardNav,items;if(!keyboard||!(keyboardNav=this.keyboardNav||this.parents().eq(-1)[0].keyboardNav))return items=this.find("*"),this.statusbar&&items.add(this.statusbar.items()),items.each(function(ctrl){if(ctrl.settings.autofocus)return focusCtrl=null,!1;ctrl.canFocus&&(focusCtrl=focusCtrl||ctrl)}),focusCtrl&&focusCtrl.focus(),this;keyboardNav.focusFirst(this)},replace:function(oldItem,newItem){for(var ctrlElm,items=this.items(),i=items.length;i--;)if(items[i]===oldItem){items[i]=newItem;break}0<=i&&((ctrlElm=newItem.getEl())&&ctrlElm.parentNode.removeChild(ctrlElm),(ctrlElm=oldItem.getEl())&&ctrlElm.parentNode.removeChild(ctrlElm)),newItem.parent(this)},create:function(items){var settings,self=this,ctrlItems=[];return global$2.isArray(items)||(items=[items]),global$2.each(items,function(item){item&&(item instanceof Control$1||("string"==typeof item&&(item={type:item}),settings=global$2.extend({},self.settings.defaults,item),item.type=settings.type=settings.type||item.type||self.settings.defaultType||(settings.defaults?settings.defaults.type:null),item=global$4.create(settings)),ctrlItems.push(item))}),ctrlItems},renderNew:function(){var self=this;return self.items().each(function(ctrl,index){var containerElm;ctrl.parent(self),ctrl.state.get("rendered")||((containerElm=self.getEl("body")).hasChildNodes()&&index<=containerElm.childNodes.length-1?global$9(containerElm.childNodes[index]).before(ctrl.renderHtml()):global$9(containerElm).append(ctrl.renderHtml()),ctrl.postRender(),$_ef12j5u4jh8lz3nl.add(ctrl))}),self._layout.applyClasses(self.items().filter(":visible")),self._lastRect=null,self},append:function(items){return this.add(items).renderNew()},prepend:function(items){return this.items().set(this.create(items).concat(this.items().toArray())),this.renderNew()},insert:function(items,index,before){var curItems,beforeItems,afterItems;return items=this.create(items),curItems=this.items(),!before&&index<curItems.length-1&&(index+=1),0<=index&&index<curItems.length&&(beforeItems=curItems.slice(0,index).toArray(),afterItems=curItems.slice(index).toArray(),curItems.set(beforeItems.concat(items,afterItems))),this.renderNew()},fromJSON:function(data){for(var name_1 in data)this.find("#"+name_1).value(data[name_1]);return this},toJSON:function(){var data={};return this.find("*").each(function(ctrl){var name=ctrl.name(),value=ctrl.value();name&&void 0!==value&&(data[name]=value)}),data},renderHtml:function(){var layout=this._layout,role=this.settings.role;return this.preRender(),layout.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"'+(role?' role="'+this.settings.role+'"':"")+'><div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+layout.renderHtml(this)+"</div></div>"},postRender:function(){var box;return this.items().exec("postRender"),this._super(),this._layout.postRender(this),this.state.set("rendered",!0),this.settings.style&&this.$el.css(this.settings.style),this.settings.border&&(box=this.borderBox,this.$el.css({"border-top-width":box.top,"border-right-width":box.right,"border-bottom-width":box.bottom,"border-left-width":box.left})),this.parent()||(this.keyboardNav=KeyboardNavigation({root:this})),this},initLayoutRect:function(){var layoutRect=this._super();return this._layout.recalc(this),layoutRect},recalc:function(){var rect=this._layoutRect,lastRect=this._lastRect;if(!lastRect||lastRect.w!==rect.w||lastRect.h!==rect.h)return this._layout.recalc(this),rect=this.layoutRect(),this._lastRect={x:rect.x,y:rect.y,w:rect.w,h:rect.h},!0},reflow:function(){var i;if($_ef12j5u4jh8lz3nl.remove(this),this.visible()){for(Control$1.repaintControls=[],Control$1.repaintControls.map={},this.recalc(),i=Control$1.repaintControls.length;i--;)Control$1.repaintControls[i].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),Control$1.repaintControls=[]}return this}});function updateWithTouchData(e){var keys,i;if(e.changedTouches)for(keys="screenX screenY pageX pageY clientX clientY".split(" "),i=0;i<keys.length;i++)e[keys[i]]=e.changedTouches[0][keys[i]]}function DragHelper(id,settings){var $eventOverlay,downButton,start,stop,drag,startX,startY,doc=settings.document||document;settings=settings||{};var handleElement=doc.getElementById(settings.handle||id);start=function(e){var handleElm,cursor,docSize=function(doc){var documentElement,body,scrollWidth,clientWidth,offsetWidth,scrollHeight,clientHeight,max=Math.max;return documentElement=doc.documentElement,body=doc.body,scrollWidth=max(documentElement.scrollWidth,body.scrollWidth),clientWidth=max(documentElement.clientWidth,body.clientWidth),offsetWidth=max(documentElement.offsetWidth,body.offsetWidth),scrollHeight=max(documentElement.scrollHeight,body.scrollHeight),clientHeight=max(documentElement.clientHeight,body.clientHeight),{width:scrollWidth<offsetWidth?clientWidth:scrollWidth,height:scrollHeight<max(documentElement.offsetHeight,body.offsetHeight)?clientHeight:scrollHeight}}(doc);updateWithTouchData(e),e.preventDefault(),downButton=e.button,handleElm=handleElement,startX=e.screenX,startY=e.screenY,cursor=window.getComputedStyle?window.getComputedStyle(handleElm,null).getPropertyValue("cursor"):handleElm.runtimeStyle.cursor,$eventOverlay=global$9("<div></div>").css({position:"absolute",top:0,left:0,width:docSize.width,height:docSize.height,zIndex:2147483647,opacity:1e-4,cursor:cursor}).appendTo(doc.body),global$9(doc).on("mousemove touchmove",drag).on("mouseup touchend",stop),settings.start(e)},drag=function(e){if(updateWithTouchData(e),e.button!==downButton)return stop(e);e.deltaX=e.screenX-startX,e.deltaY=e.screenY-startY,e.preventDefault(),settings.drag(e)},stop=function(e){updateWithTouchData(e),global$9(doc).off("mousemove touchmove",drag).off("mouseup touchend",stop),$eventOverlay.remove(),settings.stop&&settings.stop(e)},this.destroy=function(){global$9(handleElement).off()},global$9(handleElement).on("mousedown touchstart",start)}var documentClickHandler,documentScrollHandler,windowResizeHandler,hasModal,$_4acv48u6jh8lz3ns={init:function(){this.on("repaint",this.renderScroll)},renderScroll:function(){var self=this,margin=2;function repaintScroll(){var hasScrollH,hasScrollV,bodyElm;function repaintAxis(axisName,posName,sizeName,contentSizeName,hasScroll,ax){var containerElm,scrollBarElm,scrollThumbElm,containerSize,ratio,rect,posNameLower,sizeNameLower;if(scrollBarElm=self.getEl("scroll"+axisName)){if(posNameLower=posName.toLowerCase(),sizeNameLower=sizeName.toLowerCase(),global$9(self.getEl("absend")).css(posNameLower,self.layoutRect()[contentSizeName]-1),!hasScroll)return void global$9(scrollBarElm).css("display","none");global$9(scrollBarElm).css("display","block"),containerElm=self.getEl("body"),scrollThumbElm=self.getEl("scroll"+axisName+"t"),containerSize=containerElm["client"+sizeName]-2*margin,ratio=(containerSize-=hasScrollH&&hasScrollV?scrollBarElm["client"+ax]:0)/containerElm["scroll"+sizeName],(rect={})[posNameLower]=containerElm["offset"+posName]+margin,rect[sizeNameLower]=containerSize,global$9(scrollBarElm).css(rect),(rect={})[posNameLower]=containerElm["scroll"+posName]*ratio,rect[sizeNameLower]=containerSize*ratio,global$9(scrollThumbElm).css(rect)}}bodyElm=self.getEl("body"),hasScrollH=bodyElm.scrollWidth>bodyElm.clientWidth,hasScrollV=bodyElm.scrollHeight>bodyElm.clientHeight,repaintAxis("h","Left","Width","contentW",hasScrollH,"Height"),repaintAxis("v","Top","Height","contentH",hasScrollV,"Width")}self.settings.autoScroll&&(self._hasScroll||(self._hasScroll=!0,function(){function addScrollAxis(axisName,posName,sizeName,deltaPosName,ax){var scrollStart,axisId=self._id+"-scroll"+axisName,prefix=self.classPrefix;global$9(self.getEl()).append('<div id="'+axisId+'" class="'+prefix+"scrollbar "+prefix+"scrollbar-"+axisName+'"><div id="'+axisId+'t" class="'+prefix+'scrollbar-thumb"></div></div>'),self.draghelper=new DragHelper(axisId+"t",{start:function(){scrollStart=self.getEl("body")["scroll"+posName],global$9("#"+axisId).addClass(prefix+"active")},drag:function(e){var ratio,hasScrollH,hasScrollV,containerSize,layoutRect=self.layoutRect();hasScrollH=layoutRect.contentW>layoutRect.innerW,hasScrollV=layoutRect.contentH>layoutRect.innerH,containerSize=self.getEl("body")["client"+sizeName]-2*margin,ratio=(containerSize-=hasScrollH&&hasScrollV?self.getEl("scroll"+axisName)["client"+ax]:0)/self.getEl("body")["scroll"+sizeName],self.getEl("body")["scroll"+posName]=scrollStart+e["delta"+deltaPosName]/ratio},stop:function(){global$9("#"+axisId).removeClass(prefix+"active")}})}self.classes.add("scroll"),addScrollAxis("v","Top","Height","Y","Width"),addScrollAxis("h","Left","Width","X","Height")}(),self.on("wheel",function(e){var bodyEl=self.getEl("body");bodyEl.scrollLeft+=10*(e.deltaX||0),bodyEl.scrollTop+=10*e.deltaY,repaintScroll()}),global$9(self.getEl("body")).on("scroll",repaintScroll)),repaintScroll())}},Panel=Container.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[$_4acv48u6jh8lz3ns],renderHtml:function(){var layout=this._layout,innerHtml=this.settings.html;return this.preRender(),layout.preRender(this),void 0===innerHtml?innerHtml='<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+layout.renderHtml(this)+"</div>":("function"==typeof innerHtml&&(innerHtml=innerHtml.call(this)),this._hasBody=!1),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1" role="group">'+(this._preBodyHtml||"")+innerHtml+"</div>"}}),$_8a2gtru8jh8lz3ny={resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(w,h){if(w<=1||h<=1){var rect=funcs.getWindowSize();w=w<=1?w*rect.w:w,h=h<=1?h*rect.h:h}return this._layoutRect.autoResize=!1,this.layoutRect({minW:w,minH:h,w:w,h:h}).reflow()},resizeBy:function(dw,dh){var rect=this.layoutRect();return this.resizeTo(rect.w+dw,rect.h+dh)}},visiblePanels=[],zOrder=[];function isChildOf(ctrl,parent){for(;ctrl;){if(ctrl===parent)return!0;ctrl=ctrl.parent()}}function bindDocumentClickHandler(){documentClickHandler||(documentClickHandler=function(e){2!==e.button&&function(e){for(var i=visiblePanels.length;i--;){var panel=visiblePanels[i],clickCtrl=panel.getParentCtrl(e.target);if(panel.settings.autohide){if(clickCtrl&&(isChildOf(clickCtrl,panel)||panel.parent()===clickCtrl))continue;(e=panel.fire("autohide",{target:e.target})).isDefaultPrevented()||panel.hide()}}}(e)},global$9(document).on("click touchstart",documentClickHandler))}function repositionPanel(panel){var scrollY=funcs.getViewPort().y;function toggleFixedChildPanels(fixed,deltaY){for(var parent,i=0;i<visiblePanels.length;i++)if(visiblePanels[i]!==panel)for(parent=visiblePanels[i].parent();parent&&(parent=parent.parent());)parent===panel&&visiblePanels[i].fixed(fixed).moveBy(0,deltaY).repaint()}panel.settings.autofix&&(panel.state.get("fixed")?panel._autoFixY>scrollY&&(panel.fixed(!1).layoutRect({y:panel._autoFixY}).repaint(),toggleFixedChildPanels(!1,panel._autoFixY-scrollY)):(panel._autoFixY=panel.layoutRect().y,panel._autoFixY<scrollY&&(panel.fixed(!0).layoutRect({y:0}).repaint(),toggleFixedChildPanels(!0,scrollY-panel._autoFixY))))}function addRemove(add,ctrl){var i,topModal,zIndex=FloatPanel.zIndex||65535;if(add)zOrder.push(ctrl);else for(i=zOrder.length;i--;)zOrder[i]===ctrl&&zOrder.splice(i,1);if(zOrder.length)for(i=0;i<zOrder.length;i++)zOrder[i].modal&&(zIndex++,topModal=zOrder[i]),zOrder[i].getEl().style.zIndex=zIndex,zOrder[i].zIndex=zIndex,zIndex++;var modalBlockEl=global$9("#"+ctrl.classPrefix+"modal-block",ctrl.getContainerElm())[0];topModal?global$9(modalBlockEl).css("z-index",topModal.zIndex-1):modalBlockEl&&(modalBlockEl.parentNode.removeChild(modalBlockEl),hasModal=!1),FloatPanel.currentZIndex=zIndex}var FloatPanel=Panel.extend({Mixins:[$_d97gfctrjh8lz3lm,$_8a2gtru8jh8lz3ny],init:function(settings){var self=this;self._super(settings),(self._eventsRoot=self).classes.add("floatpanel"),settings.autohide&&(bindDocumentClickHandler(),function(){if(!windowResizeHandler){var docElm_1=document.documentElement,clientWidth_1=docElm_1.clientWidth,clientHeight_1=docElm_1.clientHeight;windowResizeHandler=function(){document.all&&clientWidth_1===docElm_1.clientWidth&&clientHeight_1===docElm_1.clientHeight||(clientWidth_1=docElm_1.clientWidth,clientHeight_1=docElm_1.clientHeight,FloatPanel.hideAll())},global$9(window).on("resize",windowResizeHandler)}}(),visiblePanels.push(self)),settings.autofix&&(documentScrollHandler||(documentScrollHandler=function(){var i;for(i=visiblePanels.length;i--;)repositionPanel(visiblePanels[i])},global$9(window).on("scroll",documentScrollHandler)),self.on("move",function(){repositionPanel(this)})),self.on("postrender show",function(e){if(e.control===self){var $modalBlockEl_1,prefix_1=self.classPrefix;self.modal&&!hasModal&&(($modalBlockEl_1=global$9("#"+prefix_1+"modal-block",self.getContainerElm()))[0]||($modalBlockEl_1=global$9('<div id="'+prefix_1+'modal-block" class="'+prefix_1+"reset "+prefix_1+'fade"></div>').appendTo(self.getContainerElm())),global$7.setTimeout(function(){$modalBlockEl_1.addClass(prefix_1+"in"),global$9(self.getEl()).addClass(prefix_1+"in")}),hasModal=!0),addRemove(!0,self)}}),self.on("show",function(){self.parents().each(function(ctrl){if(ctrl.state.get("fixed"))return self.fixed(!0),!1})}),settings.popover&&(self._preBodyHtml='<div class="'+self.classPrefix+'arrow"></div>',self.classes.add("popover").add("bottom").add(self.isRtl()?"end":"start")),self.aria("label",settings.ariaLabel),self.aria("labelledby",self._id),self.aria("describedby",self.describedBy||self._id+"-none")},fixed:function(state){if(this.state.get("fixed")!==state){if(this.state.get("rendered")){var viewport=funcs.getViewPort();state?this.layoutRect().y-=viewport.y:this.layoutRect().y+=viewport.y}this.classes.toggle("fixed",state),this.state.set("fixed",state)}return this},show:function(){var i,state=this._super();for(i=visiblePanels.length;i--&&visiblePanels[i]!==this;);return-1===i&&visiblePanels.push(this),state},hide:function(){return removeVisiblePanel(this),addRemove(!1,this),this._super()},hideAll:function(){FloatPanel.hideAll()},close:function(){return this.fire("close").isDefaultPrevented()||(this.remove(),addRemove(!1,this)),this},remove:function(){removeVisiblePanel(this),this._super()},postRender:function(){return this.settings.bodyRole&&this.getEl("body").setAttribute("role",this.settings.bodyRole),this._super()}});function removeVisiblePanel(panel){var i;for(i=visiblePanels.length;i--;)visiblePanels[i]===panel&&visiblePanels.splice(i,1);for(i=zOrder.length;i--;)zOrder[i]===panel&&zOrder.splice(i,1)}FloatPanel.hideAll=function(){for(var i=visiblePanels.length;i--;){var panel=visiblePanels[i];panel&&panel.settings.autohide&&(panel.hide(),visiblePanels.splice(i,1))}};var isFixed$1=function(inlineToolbarContainer,editor){return!(!inlineToolbarContainer||editor.settings.ui_container)},$_7wdylstnjh8lz3kv_render=function(editor,theme,args){var panel,inlineToolbarContainer,DOM=global$3.DOM,fixedToolbarContainer=function(editor){return editor.getParam("fixed_toolbar_container")}(editor);fixedToolbarContainer&&(inlineToolbarContainer=DOM.select(fixedToolbarContainer)[0]);var reposition=function(){if(panel&&panel.moveRel&&panel.visible()&&!panel._fixed){var scrollContainer=editor.selection.getScrollContainer(),body=editor.getBody(),deltaX=0,deltaY=0;if(scrollContainer){var bodyPos=DOM.getPos(body),scrollContainerPos=DOM.getPos(scrollContainer);deltaX=Math.max(0,scrollContainerPos.x-bodyPos.x),deltaY=Math.max(0,scrollContainerPos.y-bodyPos.y)}panel.fixed(!1).moveRel(body,editor.rtl?["tr-br","br-tr"]:["tl-bl","bl-tl","tr-br"]).moveBy(deltaX,deltaY)}},show=function(){panel&&(panel.show(),reposition(),DOM.addClass(editor.getBody(),"mce-edit-focus"))},hide=function(){panel&&(panel.hide(),FloatPanel.hideAll(),DOM.removeClass(editor.getBody(),"mce-edit-focus"))},render=function(){panel?panel.visible()||show():(panel=theme.panel=global$4.create({type:inlineToolbarContainer?"panel":"floatpanel",role:"application",classes:"tinymce tinymce-inline",layout:"flex",direction:"column",align:"stretch",autohide:!1,autofix:isFixed$1(inlineToolbarContainer,editor),fixed:isFixed$1(inlineToolbarContainer,editor),border:1,items:[!1===hasMenubar(editor)?null:{type:"menubar",border:"0 0 1 0",items:$_8i78rftgjh8lz3ka_createMenuButtons(editor)},$_fudqhrtfjh8lz3k7_createToolbars(editor,getToolbarSize(editor))]}),$_1jk3jvtcjh8lz3jy.setUiContainer(editor,panel),$_aycuj2t7jh8lz3jp_fireBeforeRenderUI(editor),inlineToolbarContainer?panel.renderTo(inlineToolbarContainer).reflow():panel.renderTo().reflow(),$_47hpztt8jh8lz3jq_addKeys(editor,panel),show(),$_5kodmdt9jh8lz3js_addContextualToolbars(editor),editor.on("nodeChange",reposition),editor.on("ResizeWindow",reposition),editor.on("activate",show),editor.on("deactivate",hide),editor.nodeChanged())};return editor.settings.content_editable=!0,editor.on("focus",function(){!1===isSkinDisabled(editor)&&args.skinUiCss?DOM.styleSheetLoader.load(args.skinUiCss,render,render):render()}),editor.on("blur hide",hide),editor.on("remove",function(){panel&&(panel.remove(),panel=null)}),!1===isSkinDisabled(editor)&&args.skinUiCss?DOM.styleSheetLoader.load(args.skinUiCss,$_231e94tmjh8lz3ku_fireSkinLoaded(editor)):$_231e94tmjh8lz3ku_fireSkinLoaded(editor)(),{}};function Throbber(elm,inline){var state,timer,self=this,classPrefix=Control$1.classPrefix;self.show=function(time,callback){function render(){state&&(global$9(elm).append('<div class="'+classPrefix+"throbber"+(inline?" "+classPrefix+"throbber-inline":"")+'"></div>'),callback&&callback())}return self.hide(),state=!0,time?timer=global$7.setTimeout(render,time):render(),self},self.hide=function(){var child=elm.lastChild;return global$7.clearTimeout(timer),child&&-1!==child.className.indexOf("throbber")&&child.parentNode.removeChild(child),state=!1,self}}var $_e9w0qfu9jh8lz3nz_setup=function(editor,theme){var throbber;editor.on("ProgressState",function(e){throbber=throbber||new Throbber(theme.panel.getEl("body")),e.state?throbber.show(e.time):throbber.hide()})},$_5ent4szjh8lz3ja_renderUI=function(editor,theme,args){var skinUrl=function(editor){var settings=editor.settings,skin=settings.skin,skinUrl=settings.skin_url;if(!1!==skin){var skinName=skin||"lightgray";skinUrl=skinUrl?editor.documentBaseURI.toAbsolute(skinUrl):global$1.baseURL+"/skins/"+skinName}return skinUrl}(editor);return skinUrl&&(args.skinUiCss=skinUrl+"/skin.min.css",editor.contentCSS.push(skinUrl+"/content"+(editor.inline?".inline":"")+".min.css")),$_e9w0qfu9jh8lz3nz_setup(editor,theme),function(editor){return editor.getParam("inline",!1,"boolean")}(editor)?$_7wdylstnjh8lz3kv_render(editor,theme,args):$_4cj0a3t3jh8lz3jk_render(editor,theme,args)},Tooltip=Control$1.extend({Mixins:[$_d97gfctrjh8lz3lm],Defaults:{classes:"widget tooltip tooltip-n"},renderHtml:function(){var prefix=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'" role="presentation"><div class="'+prefix+'tooltip-arrow"></div><div class="'+prefix+'tooltip-inner">'+this.encode(this.state.get("text"))+"</div></div>"},bindStates:function(){var self=this;return self.state.on("change:text",function(e){self.getEl().lastChild.innerHTML=self.encode(e.value)}),self._super()},repaint:function(){var style,rect;style=this.getEl().style,rect=this._layoutRect,style.left=rect.x+"px",style.top=rect.y+"px",style.zIndex=131070}}),Widget=Control$1.extend({init:function(settings){var self=this;self._super(settings),settings=self.settings,self.canFocus=!0,settings.tooltip&&!1!==Widget.tooltips&&(self.on("mouseenter",function(e){var tooltip=self.tooltip().moveTo(-65535);if(e.control===self){var rel=tooltip.text(settings.tooltip).show().testMoveRel(self.getEl(),["bc-tc","bc-tl","bc-tr"]);tooltip.classes.toggle("tooltip-n","bc-tc"===rel),tooltip.classes.toggle("tooltip-nw","bc-tl"===rel),tooltip.classes.toggle("tooltip-ne","bc-tr"===rel),tooltip.moveRel(self.getEl(),rel)}else tooltip.hide()}),self.on("mouseleave mousedown click",function(){self.tooltip().remove(),self._tooltip=null})),self.aria("label",settings.ariaLabel||settings.tooltip)},tooltip:function(){return this._tooltip||(this._tooltip=new Tooltip({type:"tooltip"}),$_1jk3jvtcjh8lz3jy.inheritUiContainer(this,this._tooltip),this._tooltip.renderTo()),this._tooltip},postRender:function(){var settings=this.settings;this._super(),this.parent()||!settings.width&&!settings.height||(this.initLayoutRect(),this.repaint()),settings.autofocus&&this.focus()},bindStates:function(){var self=this;function disable(state){self.aria("disabled",state),self.classes.toggle("disabled",state)}function active(state){self.aria("pressed",state),self.classes.toggle("active",state)}return self.state.on("change:disabled",function(e){disable(e.value)}),self.state.on("change:active",function(e){active(e.value)}),self.state.get("disabled")&&disable(!0),self.state.get("active")&&active(!0),self._super()},remove:function(){this._super(),this._tooltip&&(this._tooltip.remove(),this._tooltip=null)}}),Progress=Widget.extend({Defaults:{value:0},init:function(settings){this._super(settings),this.classes.add("progress"),this.settings.filter||(this.settings.filter=function(value){return Math.round(value)})},renderHtml:function(){var id=this._id,prefix=this.classPrefix;return'<div id="'+id+'" class="'+this.classes+'"><div class="'+prefix+'bar-container"><div class="'+prefix+'bar"></div></div><div class="'+prefix+'text">0%</div></div>'},postRender:function(){return this._super(),this.value(this.settings.value),this},bindStates:function(){var self=this;function setValue(value){value=self.settings.filter(value),self.getEl().lastChild.innerHTML=value+"%",self.getEl().firstChild.firstChild.style.width=value+"%"}return self.state.on("change:value",function(e){setValue(e.value)}),setValue(self.state.get("value")),self._super()}}),updateLiveRegion=function(ctx,text){ctx.getEl().lastChild.textContent=text+(ctx.progressBar?" "+ctx.progressBar.value()+"%":"")},Notification=Control$1.extend({Mixins:[$_d97gfctrjh8lz3lm],Defaults:{classes:"widget notification"},init:function(settings){var self=this;self._super(settings),self.maxWidth=settings.maxWidth,settings.text&&self.text(settings.text),settings.icon&&(self.icon=settings.icon),settings.color&&(self.color=settings.color),settings.type&&self.classes.add("notification-"+settings.type),settings.timeout&&(settings.timeout<0||0<settings.timeout)&&!settings.closeButton?self.closeButton=!1:(self.classes.add("has-close"),self.closeButton=!0),settings.progressBar&&(self.progressBar=new Progress),self.on("click",function(e){-1!==e.target.className.indexOf(self.classPrefix+"close")&&self.close()})},renderHtml:function(){var notificationStyle,prefix=this.classPrefix,icon="",closeButton="",progressBar="";return this.icon&&(icon='<i class="'+prefix+"ico "+prefix+"i-"+this.icon+'"></i>'),notificationStyle=' style="max-width: '+this.maxWidth+"px;"+(this.color?"background-color: "+this.color+';"':'"'),this.closeButton&&(closeButton='<button type="button" class="'+prefix+'close" aria-hidden="true">×</button>'),this.progressBar&&(progressBar=this.progressBar.renderHtml()),'<div id="'+this._id+'" class="'+this.classes+'"'+notificationStyle+' role="presentation">'+icon+'<div class="'+prefix+'notification-inner">'+this.state.get("text")+"</div>"+progressBar+closeButton+'<div style="clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;" aria-live="assertive" aria-relevant="additions" aria-atomic="true"></div></div>'},postRender:function(){var self=this;return global$7.setTimeout(function(){self.$el.addClass(self.classPrefix+"in"),updateLiveRegion(self,self.state.get("text"))},100),self._super()},bindStates:function(){var self=this;return self.state.on("change:text",function(e){self.getEl().firstChild.innerHTML=e.value,updateLiveRegion(self,e.value)}),self.progressBar&&(self.progressBar.bindStates(),self.progressBar.state.on("change:value",function(e){updateLiveRegion(self,self.state.get("text"))})),self._super()},close:function(){return this.fire("close").isDefaultPrevented()||this.remove(),this},repaint:function(){var style,rect;style=this.getEl().style,rect=this._layoutRect,style.left=rect.x+"px",style.top=rect.y+"px",style.zIndex=65534}});function NotificationManagerImpl(editor){var getEditorContainer=function(editor){return editor.inline?editor.getElement():editor.getContentAreaContainer()};return{open:function(args,closeCallback){var container,extendedArgs=global$2.extend(args,{maxWidth:(container=getEditorContainer(editor),funcs.getSize(container).width)}),notif=new Notification(extendedArgs);return 0<(notif.args=extendedArgs).timeout&&(notif.timer=setTimeout(function(){notif.close(),closeCallback()},extendedArgs.timeout)),notif.on("close",function(){closeCallback()}),notif.renderTo(),notif},close:function(notification){notification.close()},reposition:function(notifications){!function(notifications){$_f3qxhzthjh8lz3kg.each(notifications,function(notification){notification.moveTo(0,0)})}(notifications),function(notifications){if(0<notifications.length){var firstItem=notifications.slice(0,1)[0],container=getEditorContainer(editor);firstItem.moveRel(container,"tc-tc"),$_f3qxhzthjh8lz3kg.each(notifications,function(notification,index){0<index&&notification.moveRel(notifications[index-1].getEl(),"bc-tc")})}}(notifications)},getArgs:function(notification){return notification.args}}}var windows=[],oldMetaValue="";function toggleFullScreenState(state){var contentValue,viewport=global$9("meta[name=viewport]")[0];!1!==global$8.overrideViewPort&&(viewport||((viewport=document.createElement("meta")).setAttribute("name","viewport"),document.getElementsByTagName("head")[0].appendChild(viewport)),(contentValue=viewport.getAttribute("content"))&&void 0!==oldMetaValue&&(oldMetaValue=contentValue),viewport.setAttribute("content",state?"width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0":oldMetaValue))}function toggleBodyFullScreenClasses(classPrefix,state){(function(){for(var i=0;i<windows.length;i++)if(windows[i]._fullscreen)return!0;return!1})()&&!1===state&&global$9([document.documentElement,document.body]).removeClass(classPrefix+"fullscreen")}var Window=FloatPanel.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(settings){var self=this;self._super(settings),self.isRtl()&&self.classes.add("rtl"),self.classes.add("window"),self.bodyClasses.add("window-body"),self.state.set("fixed",!0),settings.buttons&&(self.statusbar=new Panel({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:self.isRtl()?"start":"end",defaults:{type:"button"},items:settings.buttons}),self.statusbar.classes.add("foot"),self.statusbar.parent(self)),self.on("click",function(e){var closeClass=self.classPrefix+"close";(funcs.hasClass(e.target,closeClass)||funcs.hasClass(e.target.parentNode,closeClass))&&self.close()}),self.on("cancel",function(){self.close()}),self.on("move",function(e){e.control===self&&FloatPanel.hideAll()}),self.aria("describedby",self.describedBy||self._id+"-none"),self.aria("label",settings.title),self._fullscreen=!1},recalc:function(){var layoutRect,width,x,needsRecalc,statusbar=this.statusbar;this._fullscreen&&(this.layoutRect(funcs.getWindowSize()),this.layoutRect().contentH=this.layoutRect().innerH),this._super(),layoutRect=this.layoutRect(),this.settings.title&&!this._fullscreen&&(width=layoutRect.headerW)>layoutRect.w&&(x=layoutRect.x-Math.max(0,width/2),this.layoutRect({w:width,x:x}),needsRecalc=!0),statusbar&&(statusbar.layoutRect({w:this.layoutRect().innerW}).recalc(),(width=statusbar.layoutRect().minW+layoutRect.deltaW)>layoutRect.w&&(x=layoutRect.x-Math.max(0,width-layoutRect.w),this.layoutRect({w:width,x:x}),needsRecalc=!0)),needsRecalc&&this.recalc()},initLayoutRect:function(){var headEl,layoutRect=this._super(),deltaH=0;if(this.settings.title&&!this._fullscreen){headEl=this.getEl("head");var size=funcs.getSize(headEl);layoutRect.headerW=size.width,layoutRect.headerH=size.height,deltaH+=layoutRect.headerH}this.statusbar&&(deltaH+=this.statusbar.layoutRect().h),layoutRect.deltaH+=deltaH,layoutRect.minH+=deltaH,layoutRect.h+=deltaH;var rect=funcs.getWindowSize();return layoutRect.x=this.settings.x||Math.max(0,rect.w/2-layoutRect.w/2),layoutRect.y=this.settings.y||Math.max(0,rect.h/2-layoutRect.h/2),layoutRect},renderHtml:function(){var layout=this._layout,id=this._id,prefix=this.classPrefix,settings=this.settings,headerHtml="",footerHtml="",html=settings.html;return this.preRender(),layout.preRender(this),settings.title&&(headerHtml='<div id="'+id+'-head" class="'+prefix+'window-head"><div id="'+id+'-title" class="'+prefix+'title">'+this.encode(settings.title)+'</div><div id="'+id+'-dragh" class="'+prefix+'dragh"></div><button type="button" class="'+prefix+'close" aria-hidden="true"><i class="mce-ico mce-i-remove"></i></button></div>'),settings.url&&(html='<iframe src="'+settings.url+'" tabindex="-1"></iframe>'),void 0===html&&(html=layout.renderHtml(this)),this.statusbar&&(footerHtml=this.statusbar.renderHtml()),'<div id="'+id+'" class="'+this.classes+'" hidefocus="1"><div class="'+this.classPrefix+'reset" role="application">'+headerHtml+'<div id="'+id+'-body" class="'+this.bodyClasses+'">'+html+"</div>"+footerHtml+"</div></div>"},fullscreen:function(state){var slowRendering,layoutRect,self=this,documentElement=document.documentElement,prefix=self.classPrefix;if(state!==self._fullscreen)if(global$9(window).on("resize",function(){var time;if(self._fullscreen)if(slowRendering)self._timer||(self._timer=global$7.setTimeout(function(){var rect=funcs.getWindowSize();self.moveTo(0,0).resizeTo(rect.w,rect.h),self._timer=0},50));else{time=(new Date).getTime();var rect=funcs.getWindowSize();self.moveTo(0,0).resizeTo(rect.w,rect.h),50<(new Date).getTime()-time&&(slowRendering=!0)}}),layoutRect=self.layoutRect(),self._fullscreen=state){self._initial={x:layoutRect.x,y:layoutRect.y,w:layoutRect.w,h:layoutRect.h},self.borderBox=$_focdcktxjh8lz3mn_parseBox("0"),self.getEl("head").style.display="none",layoutRect.deltaH-=layoutRect.headerH+2,global$9([documentElement,document.body]).addClass(prefix+"fullscreen"),self.classes.add("fullscreen");var rect=funcs.getWindowSize();self.moveTo(0,0).resizeTo(rect.w,rect.h)}else self.borderBox=$_focdcktxjh8lz3mn_parseBox(self.settings.border),self.getEl("head").style.display="",layoutRect.deltaH+=layoutRect.headerH,global$9([documentElement,document.body]).removeClass(prefix+"fullscreen"),self.classes.remove("fullscreen"),self.moveTo(self._initial.x,self._initial.y).resizeTo(self._initial.w,self._initial.h);return self.reflow()},postRender:function(){var startPos,self=this;setTimeout(function(){self.classes.add("in"),self.fire("open")},0),self._super(),self.statusbar&&self.statusbar.postRender(),self.focus(),this.dragHelper=new DragHelper(self._id+"-dragh",{start:function(){startPos={x:self.layoutRect().x,y:self.layoutRect().y}},drag:function(e){self.moveTo(startPos.x+e.deltaX,startPos.y+e.deltaY)}}),self.on("submit",function(e){e.isDefaultPrevented()||self.close()}),windows.push(self),toggleFullScreenState(!0)},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var i;for(this.dragHelper.destroy(),this._super(),this.statusbar&&this.statusbar.remove(),toggleBodyFullScreenClasses(this.classPrefix,!1),i=windows.length;i--;)windows[i]===this&&windows.splice(i,1);toggleFullScreenState(0<windows.length)},getContentWindow:function(){var ifr=this.getEl().getElementsByTagName("iframe")[0];return ifr?ifr.contentWindow:null}});!function(){if(!global$8.desktop){var lastSize_1={w:window.innerWidth,h:window.innerHeight};global$7.setInterval(function(){var w=window.innerWidth,h=window.innerHeight;lastSize_1.w===w&&lastSize_1.h===h||(lastSize_1={w:w,h:h},global$9(window).trigger("resize"))},100)}global$9(window).on("resize",function(){var i,layoutRect,rect=funcs.getWindowSize();for(i=0;i<windows.length;i++)layoutRect=windows[i].layoutRect(),windows[i].moveTo(windows[i].settings.x||Math.max(0,rect.w/2-layoutRect.w/2),windows[i].settings.y||Math.max(0,rect.h/2-layoutRect.h/2))})}();var fastKeys,MessageBox=Window.extend({init:function(settings){settings={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(settings)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(settings){var buttons,callback=settings.callback||function(){};function createButton(text,status,primary){return{type:"button",text:text,subtype:primary?"primary":"",onClick:function(e){e.control.parents()[1].close(),callback(status)}}}switch(settings.buttons){case MessageBox.OK_CANCEL:buttons=[createButton("Ok",!0,!0),createButton("Cancel",!1)];break;case MessageBox.YES_NO:case MessageBox.YES_NO_CANCEL:buttons=[createButton("Yes",1,!0),createButton("No",0)],settings.buttons===MessageBox.YES_NO_CANCEL&&buttons.push(createButton("Cancel",-1));break;default:buttons=[createButton("Ok",!0,!0)]}return new Window({padding:20,x:settings.x,y:settings.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:buttons,title:settings.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:settings.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:settings.onClose,onCancel:function(){callback(!1)}}).renderTo(document.body).reflow()},alert:function(settings,callback){return"string"==typeof settings&&(settings={text:settings}),settings.callback=callback,MessageBox.msgBox(settings)},confirm:function(settings,callback){return"string"==typeof settings&&(settings={text:settings}),settings.callback=callback,settings.buttons=MessageBox.OK_CANCEL,MessageBox.msgBox(settings)}}}),$_1os0v5syjh8lz3j9_get=function(editor){return{renderUI:function(args){return $_5ent4szjh8lz3ja_renderUI(editor,this,args)},resizeTo:function(w,h){return $_5toavetjjh8lz3ko_resizeTo(editor,w,h)},resizeBy:function(dw,dh){return $_5toavetjjh8lz3ko_resizeBy(editor,dw,dh)},getNotificationManagerImpl:function(){return NotificationManagerImpl(editor)},getWindowManagerImpl:function(){return{open:function(args,params,closeCallback){var win;return args.title=args.title||" ",args.url=args.url||args.file,args.url&&(args.width=parseInt(args.width||320,10),args.height=parseInt(args.height||240,10)),args.body&&(args.items={defaults:args.defaults,type:args.bodyType||"form",items:args.body,data:args.data,callbacks:args.commands}),args.url||args.buttons||(args.buttons=[{text:"Ok",subtype:"primary",onclick:function(){win.find("form")[0].submit()}},{text:"Cancel",onclick:function(){win.close()}}]),(win=new Window(args)).on("close",function(){closeCallback(win)}),args.data&&win.on("postRender",function(){this.find("*").each(function(ctrl){var name=ctrl.name();name in args.data&&ctrl.value(args.data[name])})}),win.features=args||{},win.params=params||{},win=win.renderTo(document.body).reflow()},alert:function(message,choiceCallback,closeCallback){var win;return(win=MessageBox.alert(message,function(){choiceCallback()})).on("close",function(){closeCallback(win)}),win},confirm:function(message,choiceCallback,closeCallback){var win;return(win=MessageBox.confirm(message,function(state){choiceCallback(state)})).on("close",function(){closeCallback(win)}),win},close:function(window){window.close()},getParams:function(window){return window.params},setParams:function(window,params){window.params=params}}}}},Layout=global$10.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(settings){this.settings=global$2.extend({},this.Defaults,settings)},preRender:function(container){container.bodyClasses.add(this.settings.containerClass)},applyClasses:function(items){var firstClass,lastClass,firstItem,lastItem,settings=this.settings;firstClass=settings.firstControlClass,lastClass=settings.lastControlClass,items.each(function(item){item.classes.remove(firstClass).remove(lastClass).add(settings.controlClass),item.visible()&&(firstItem||(firstItem=item),lastItem=item)}),firstItem&&firstItem.classes.add(firstClass),lastItem&&lastItem.classes.add(lastClass)},renderHtml:function(container){var html="";return this.applyClasses(container.items()),container.items().each(function(item){html+=item.renderHtml()}),html},recalc:function(){},postRender:function(){},isNative:function(){return!1}}),AbsoluteLayout=Layout.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(container){container.items().filter(":visible").each(function(ctrl){var settings=ctrl.settings;ctrl.layoutRect({x:settings.x,y:settings.y,w:settings.w,h:settings.h}),ctrl.recalc&&ctrl.recalc()})},renderHtml:function(container){return'<div id="'+container._id+'-absend" class="'+container.classPrefix+'abs-end"></div>'+this._super(container)}}),Button=Widget.extend({Defaults:{classes:"widget btn",role:"button"},init:function(settings){var size,self=this;self._super(settings),settings=self.settings,size=self.settings.size,self.on("click mousedown",function(e){e.preventDefault()}),self.on("touchstart",function(e){self.fire("click",e),e.preventDefault()}),settings.subtype&&self.classes.add(settings.subtype),size&&self.classes.add("btn-"+size),settings.icon&&self.icon(settings.icon)},icon:function(icon){return arguments.length?(this.state.set("icon",icon),this):this.state.get("icon")},repaint:function(){var btnStyle,btnElm=this.getEl().firstChild;btnElm&&((btnStyle=btnElm.style).width=btnStyle.height="100%"),this._super()},renderHtml:function(){var image,ariaPressed,id=this._id,prefix=this.classPrefix,icon=this.state.get("icon"),text=this.state.get("text"),textHtml="",settings=this.settings;return image=(image=settings.image)?(icon="none","string"!=typeof image&&(image=window.getSelection?image[0]:image[1])," style=\"background-image: url('"+image+"')\""):"",text&&(this.classes.add("btn-has-text"),textHtml='<span class="'+prefix+'txt">'+this.encode(text)+"</span>"),icon=icon?prefix+"ico "+prefix+"i-"+icon:"",ariaPressed="boolean"==typeof settings.active?' aria-pressed="'+settings.active+'"':"",'<div id="'+id+'" class="'+this.classes+'" tabindex="-1"'+ariaPressed+'><button id="'+id+'-button" role="presentation" type="button" tabindex="-1">'+(icon?'<i class="'+icon+'"'+image+"></i>":"")+textHtml+"</button></div>"},bindStates:function(){var self=this,$=self.$,textCls=self.classPrefix+"txt";function setButtonText(text){var $span=$("span."+textCls,self.getEl());text?($span[0]||($("button:first",self.getEl()).append('<span class="'+textCls+'"></span>'),$span=$("span."+textCls,self.getEl())),$span.html(self.encode(text))):$span.remove(),self.classes.toggle("btn-has-text",!!text)}return self.state.on("change:text",function(e){setButtonText(e.value)}),self.state.on("change:icon",function(e){var icon=e.value,prefix=self.classPrefix;icon=(self.settings.icon=icon)?prefix+"ico "+prefix+"i-"+self.settings.icon:"";var btnElm=self.getEl().firstChild,iconElm=btnElm.getElementsByTagName("i")[0];icon?(iconElm&&iconElm===btnElm.firstChild||(iconElm=document.createElement("i"),btnElm.insertBefore(iconElm,btnElm.firstChild)),iconElm.className=icon):iconElm&&btnElm.removeChild(iconElm),setButtonText(self.state.get("text"))}),self._super()}}),BrowseButton=Button.extend({init:function(settings){settings=global$2.extend({text:"Browse...",multiple:!1,accept:null},settings),this._super(settings),this.classes.add("browsebutton"),settings.multiple&&this.classes.add("multiple")},postRender:function(){var self=this,input=funcs.create("input",{type:"file",id:self._id+"-browse",accept:self.settings.accept});self._super(),global$9(input).on("change",function(e){var files=e.target.files;self.value=function(){return files.length?self.settings.multiple?files:files[0]:null},e.preventDefault(),files.length&&self.fire("change",e)}),global$9(input).on("click",function(e){e.stopPropagation()}),global$9(self.getEl("button")).on("click",function(e){e.stopPropagation(),input.click()}),self.getEl().appendChild(input)},remove:function(){global$9(this.getEl("button")).off(),global$9(this.getEl("input")).off(),this._super()}}),ButtonGroup=Container.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var layout=this._layout;return this.classes.add("btn-group"),this.preRender(),layout.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+(this.settings.html||"")+layout.renderHtml(this)+"</div></div>"}}),Checkbox=Widget.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(settings){var self=this;self._super(settings),self.on("click mousedown",function(e){e.preventDefault()}),self.on("click",function(e){e.preventDefault(),self.disabled()||self.checked(!self.checked())}),self.checked(self.settings.checked)},checked:function(state){return arguments.length?(this.state.set("checked",state),this):this.state.get("checked")},value:function(state){return arguments.length?this.checked(state):this.checked()},renderHtml:function(){var id=this._id,prefix=this.classPrefix;return'<div id="'+id+'" class="'+this.classes+'" unselectable="on" aria-labelledby="'+id+'-al" tabindex="-1"><i class="'+prefix+"ico "+prefix+'i-checkbox"></i><span id="'+id+'-al" class="'+prefix+'label">'+this.encode(this.state.get("text"))+"</span></div>"},bindStates:function(){var self=this;function checked(state){self.classes.toggle("checked",state),self.aria("checked",state)}return self.state.on("change:text",function(e){self.getEl("al").firstChild.data=self.translate(e.value)}),self.state.on("change:checked change:value",function(e){self.fire("change"),checked(e.value)}),self.state.on("change:icon",function(e){var icon=e.value,prefix=self.classPrefix;if(void 0===icon)return self.settings.icon;icon=(self.settings.icon=icon)?prefix+"ico "+prefix+"i-"+self.settings.icon:"";var btnElm=self.getEl().firstChild,iconElm=btnElm.getElementsByTagName("i")[0];icon?(iconElm&&iconElm===btnElm.firstChild||(iconElm=document.createElement("i"),btnElm.insertBefore(iconElm,btnElm.firstChild)),iconElm.className=icon):iconElm&&btnElm.removeChild(iconElm)}),self.state.get("checked")&&checked(!0),self._super()}}),global$13=tinymce.util.Tools.resolve("tinymce.util.VK"),ComboBox=Widget.extend({init:function(settings){var self=this;self._super(settings),settings=self.settings,self.classes.add("combobox"),self.subinput=!0,self.ariaTarget="inp",settings.menu=settings.menu||settings.values,settings.menu&&(settings.icon="caret"),self.on("click",function(e){var elm=e.target,root=self.getEl();if(global$9.contains(root,elm)||elm===root)for(;elm&&elm!==root;)elm.id&&-1!==elm.id.indexOf("-open")&&(self.fire("action"),settings.menu&&(self.showMenu(),e.aria&&self.menu.items()[0].focus())),elm=elm.parentNode}),self.on("keydown",function(e){var rootControl;13===e.keyCode&&"INPUT"===e.target.nodeName&&(e.preventDefault(),self.parents().reverse().each(function(ctrl){if(ctrl.toJSON)return rootControl=ctrl,!1}),self.fire("submit",{data:rootControl.toJSON()}))}),self.on("keyup",function(e){if("INPUT"===e.target.nodeName){var oldValue=self.state.get("value"),newValue=e.target.value;newValue!==oldValue&&(self.state.set("value",newValue),self.fire("autocomplete",e))}}),self.on("mouseover",function(e){var tooltip=self.tooltip().moveTo(-65535);if(self.statusLevel()&&-1!==e.target.className.indexOf(self.classPrefix+"status")){var statusMessage=self.statusMessage()||"Ok",rel=tooltip.text(statusMessage).show().testMoveRel(e.target,["bc-tc","bc-tl","bc-tr"]);tooltip.classes.toggle("tooltip-n","bc-tc"===rel),tooltip.classes.toggle("tooltip-nw","bc-tl"===rel),tooltip.classes.toggle("tooltip-ne","bc-tr"===rel),tooltip.moveRel(e.target,rel)}})},statusLevel:function(value){return 0<arguments.length&&this.state.set("statusLevel",value),this.state.get("statusLevel")},statusMessage:function(value){return 0<arguments.length&&this.state.set("statusMessage",value),this.state.get("statusMessage")},showMenu:function(){var menu,self=this,settings=self.settings;self.menu||((menu=settings.menu||[]).length?menu={type:"menu",items:menu}:menu.type=menu.type||"menu",self.menu=global$4.create(menu).parent(self).renderTo(self.getContainerElm()),self.fire("createmenu"),self.menu.reflow(),self.menu.on("cancel",function(e){e.control===self.menu&&self.focus()}),self.menu.on("show hide",function(e){e.control.items().each(function(ctrl){ctrl.active(ctrl.value()===self.value())})}).fire("show"),self.menu.on("select",function(e){self.value(e.control.value())}),self.on("focusin",function(e){"INPUT"===e.target.tagName.toUpperCase()&&self.menu.hide()}),self.aria("expanded",!0)),self.menu.show(),self.menu.layoutRect({w:self.layoutRect().w}),self.menu.moveRel(self.getEl(),self.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},focus:function(){this.getEl("inp").focus()},repaint:function(){var width,lineHeight,elm=this.getEl(),openElm=this.getEl("open"),rect=this.layoutRect(),innerPadding=0,inputElm=elm.firstChild;this.statusLevel()&&"none"!==this.statusLevel()&&(innerPadding=parseInt(funcs.getRuntimeStyle(inputElm,"padding-right"),10)-parseInt(funcs.getRuntimeStyle(inputElm,"padding-left"),10)),width=openElm?rect.w-funcs.getSize(openElm).width-10:rect.w-10;var doc=document;return doc.all&&(!doc.documentMode||doc.documentMode<=8)&&(lineHeight=this.layoutRect().h-2+"px"),global$9(inputElm).css({width:width-innerPadding,lineHeight:lineHeight}),this._super(),this},postRender:function(){var self=this;return global$9(this.getEl("inp")).on("change",function(e){self.state.set("value",e.target.value),self.fire("change",e)}),self._super()},renderHtml:function(){var icon,text,statusHtml,id=this._id,settings=this.settings,prefix=this.classPrefix,value=this.state.get("value")||"",openBtnHtml="",extraAttrs="";return"spellcheck"in settings&&(extraAttrs+=' spellcheck="'+settings.spellcheck+'"'),settings.maxLength&&(extraAttrs+=' maxlength="'+settings.maxLength+'"'),settings.size&&(extraAttrs+=' size="'+settings.size+'"'),settings.subtype&&(extraAttrs+=' type="'+settings.subtype+'"'),statusHtml='<i id="'+id+'-status" class="mce-status mce-ico" style="display: none"></i>',this.disabled()&&(extraAttrs+=' disabled="disabled"'),(icon=settings.icon)&&"caret"!==icon&&(icon=prefix+"ico "+prefix+"i-"+settings.icon),text=this.state.get("text"),(icon||text)&&(openBtnHtml='<div id="'+id+'-open" class="'+prefix+"btn "+prefix+'open" tabIndex="-1" role="button"><button id="'+id+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!==icon?'<i class="'+icon+'"></i>':'<i class="'+prefix+'caret"></i>')+(text?(icon?" ":"")+text:"")+"</button></div>",this.classes.add("has-open")),'<div id="'+id+'" class="'+this.classes+'"><input id="'+id+'-inp" class="'+prefix+'textbox" value="'+this.encode(value,!1)+'" hidefocus="1"'+extraAttrs+' placeholder="'+this.encode(settings.placeholder)+'" />'+statusHtml+openBtnHtml+"</div>"},value:function(value){return arguments.length?(this.state.set("value",value),this):(this.state.get("rendered")&&this.state.set("value",this.getEl("inp").value),this.state.get("value"))},showAutoComplete:function(items,term){var self=this;if(0!==items.length){self.menu?self.menu.items().remove():self.menu=global$4.create({type:"menu",classes:"combobox-menu",layout:"flow"}).parent(self).renderTo(),global$2.each(items,function(item){var value,title;self.menu.add({text:item.title,url:item.previewUrl,match:term,classes:"menu-item-ellipsis",onclick:(value=item.value,title=item.title,function(){self.fire("selectitem",{title:title,value:value})})})}),self.menu.renderNew(),self.hideMenu(),self.menu.on("cancel",function(e){e.control.parent()===self.menu&&(e.stopPropagation(),self.focus(),self.hideMenu())}),self.menu.on("select",function(){self.focus()});var maxW=self.layoutRect().w;self.menu.layoutRect({w:maxW,minW:0,maxW:maxW}),self.menu.repaint(),self.menu.reflow(),self.menu.show(),self.menu.moveRel(self.getEl(),self.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])}else self.hideMenu()},hideMenu:function(){this.menu&&this.menu.hide()},bindStates:function(){var self=this;self.state.on("change:value",function(e){self.getEl("inp").value!==e.value&&(self.getEl("inp").value=e.value)}),self.state.on("change:disabled",function(e){self.getEl("inp").disabled=e.value}),self.state.on("change:statusLevel",function(e){var statusIconElm=self.getEl("status"),prefix=self.classPrefix,value=e.value;funcs.css(statusIconElm,"display","none"===value?"none":""),funcs.toggleClass(statusIconElm,prefix+"i-checkmark","ok"===value),funcs.toggleClass(statusIconElm,prefix+"i-warning","warn"===value),funcs.toggleClass(statusIconElm,prefix+"i-error","error"===value),self.classes.toggle("has-status","none"!==value),self.repaint()}),funcs.on(self.getEl("status"),"mouseleave",function(){self.tooltip().hide()}),self.on("cancel",function(e){self.menu&&self.menu.visible()&&(e.stopPropagation(),self.hideMenu())});var focusIdx=function(idx,menu){menu&&0<menu.items().length&&menu.items().eq(idx)[0].focus()};return self.on("keydown",function(e){var keyCode=e.keyCode;"INPUT"===e.target.nodeName&&(keyCode===global$13.DOWN?(e.preventDefault(),self.fire("autocomplete"),focusIdx(0,self.menu)):keyCode===global$13.UP&&(e.preventDefault(),focusIdx(-1,self.menu)))}),self._super()},remove:function(){global$9(this.getEl("inp")).off(),this.menu&&this.menu.remove(),this._super()}}),ColorBox=ComboBox.extend({init:function(settings){var self=this;settings.spellcheck=!1,settings.onaction&&(settings.icon="none"),self._super(settings),self.classes.add("colorbox"),self.on("change keyup postrender",function(){self.repaintColor(self.value())})},repaintColor:function(value){var openElm=this.getEl("open"),elm=openElm?openElm.getElementsByTagName("i")[0]:null;if(elm)try{elm.style.background=value}catch(ex){}},bindStates:function(){var self=this;return self.state.on("change:value",function(e){self.state.get("rendered")&&self.repaintColor(e.value)}),self._super()}}),PanelButton=Button.extend({showPanel:function(){var self=this,settings=self.settings;if(self.classes.add("opened"),self.panel)self.panel.show();else{var panelSettings=settings.panel;panelSettings.type&&(panelSettings={layout:"grid",items:panelSettings}),panelSettings.role=panelSettings.role||"dialog",panelSettings.popover=!0,panelSettings.autohide=!0,panelSettings.ariaRoot=!0,self.panel=new FloatPanel(panelSettings).on("hide",function(){self.classes.remove("opened")}).on("cancel",function(e){e.stopPropagation(),self.focus(),self.hidePanel()}).parent(self).renderTo(self.getContainerElm()),self.panel.fire("show"),self.panel.reflow()}var rel=self.panel.testMoveRel(self.getEl(),settings.popoverAlign||(self.isRtl()?["bc-tc","bc-tl","bc-tr"]:["bc-tc","bc-tr","bc-tl","tc-bc","tc-br","tc-bl"]));self.panel.classes.toggle("start","l"===rel.substr(-1)),self.panel.classes.toggle("end","r"===rel.substr(-1));var isTop="t"===rel.substr(0,1);self.panel.classes.toggle("bottom",!isTop),self.panel.classes.toggle("top",isTop),self.panel.moveRel(self.getEl(),rel)},hidePanel:function(){this.panel&&this.panel.hide()},postRender:function(){var self=this;return self.aria("haspopup",!0),self.on("click",function(e){e.control===self&&(self.panel&&self.panel.visible()?self.hidePanel():(self.showPanel(),self.panel.focus(!!e.aria)))}),self._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}}),DOM$3=global$3.DOM,ColorButton=PanelButton.extend({init:function(settings){this._super(settings),this.classes.add("splitbtn"),this.classes.add("colorbutton")},color:function(color){return color?(this._color=color,this.getEl("preview").style.backgroundColor=color,this):this._color},resetColor:function(){return this._color=null,this.getEl("preview").style.backgroundColor=null,this},renderHtml:function(){var id=this._id,prefix=this.classPrefix,text=this.state.get("text"),icon=this.settings.icon?prefix+"ico "+prefix+"i-"+this.settings.icon:"",image=this.settings.image?" style=\"background-image: url('"+this.settings.image+"')\"":"",textHtml="";return text&&(this.classes.add("btn-has-text"),textHtml='<span class="'+prefix+'txt">'+this.encode(text)+"</span>"),'<div id="'+id+'" class="'+this.classes+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(icon?'<i class="'+icon+'"'+image+"></i>":"")+'<span id="'+id+'-preview" class="'+prefix+'preview"></span>'+textHtml+'</button><button type="button" class="'+prefix+'open" hidefocus="1" tabindex="-1"> <i class="'+prefix+'caret"></i></button></div>'},postRender:function(){var self=this,onClickHandler=self.settings.onclick;return self.on("click",function(e){e.aria&&"down"===e.aria.key||e.control!==self||DOM$3.getParent(e.target,"."+self.classPrefix+"open")||(e.stopImmediatePropagation(),onClickHandler.call(self,e))}),delete self.settings.onclick,self._super()}}),global$14=tinymce.util.Tools.resolve("tinymce.util.Color"),ColorPicker=Widget.extend({Defaults:{classes:"widget colorpicker"},init:function(settings){this._super(settings)},postRender:function(){var hsv,hueRootElm,huePointElm,svRootElm,svPointElm,self=this,color=self.color();function getPos(elm,event){var x,y,pos=funcs.getPos(elm);return x=event.pageX-pos.x,y=event.pageY-pos.y,{x:x=Math.max(0,Math.min(x/elm.clientWidth,1)),y:y=Math.max(0,Math.min(y/elm.clientHeight,1))}}function updateColor(hsv,hueUpdate){var hue=(360-hsv.h)/360;funcs.css(huePointElm,{top:100*hue+"%"}),hueUpdate||funcs.css(svPointElm,{left:hsv.s+"%",top:100-hsv.v+"%"}),svRootElm.style.background=global$14({s:100,v:100,h:hsv.h}).toHex(),self.color().parse({s:hsv.s,v:hsv.v,h:hsv.h})}function updateSaturationAndValue(e){var pos;pos=getPos(svRootElm,e),hsv.s=100*pos.x,hsv.v=100*(1-pos.y),updateColor(hsv),self.fire("change")}function updateHue(e){var pos;pos=getPos(hueRootElm,e),(hsv=color.toHsv()).h=360*(1-pos.y),updateColor(hsv,!0),self.fire("change")}hueRootElm=self.getEl("h"),huePointElm=self.getEl("hp"),svRootElm=self.getEl("sv"),svPointElm=self.getEl("svp"),self._repaint=function(){updateColor(hsv=color.toHsv())},self._super(),self._svdraghelper=new DragHelper(self._id+"-sv",{start:updateSaturationAndValue,drag:updateSaturationAndValue}),self._hdraghelper=new DragHelper(self._id+"-h",{start:updateHue,drag:updateHue}),self._repaint()},rgb:function(){return this.color().toRgb()},value:function(value){if(!arguments.length)return this.color().toHex();this.color().parse(value),this._rendered&&this._repaint()},color:function(){return this._color||(this._color=global$14()),this._color},renderHtml:function(){var hueHtml,id=this._id,prefix=this.classPrefix,stops="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000";return hueHtml='<div id="'+id+'-h" class="'+prefix+'colorpicker-h" style="background: -ms-linear-gradient(top,'+stops+");background: linear-gradient(to bottom,"+stops+');">'+function(){var i,l,gradientPrefix,stopsList,html="";for(gradientPrefix="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=0,l=(stopsList=stops.split(",")).length-1;i<l;i++)html+='<div class="'+prefix+'colorpicker-h-chunk" style="height:'+100/l+"%;"+gradientPrefix+stopsList[i]+",endColorstr="+stopsList[i+1]+");-ms-"+gradientPrefix+stopsList[i]+",endColorstr="+stopsList[i+1]+')"></div>';return html}()+'<div id="'+id+'-hp" class="'+prefix+'colorpicker-h-marker"></div></div>','<div id="'+id+'" class="'+this.classes+'"><div id="'+id+'-sv" class="'+prefix+'colorpicker-sv"><div class="'+prefix+'colorpicker-overlay1"><div class="'+prefix+'colorpicker-overlay2"><div id="'+id+'-svp" class="'+prefix+'colorpicker-selector1"><div class="'+prefix+'colorpicker-selector2"></div></div></div></div></div>'+hueHtml+"</div>"}}),DropZone=Widget.extend({init:function(settings){settings=global$2.extend({height:100,text:"Drop an image here",multiple:!1,accept:null},settings),this._super(settings),this.classes.add("dropzone"),settings.multiple&&this.classes.add("multiple")},renderHtml:function(){var attrs,elm,cfg=this.settings;return attrs={id:this._id,hidefocus:"1"},elm=funcs.create("div",attrs,"<span>"+this.translate(cfg.text)+"</span>"),cfg.height&&funcs.css(elm,"height",cfg.height+"px"),cfg.width&&funcs.css(elm,"width",cfg.width+"px"),elm.className=this.classes,elm.outerHTML},postRender:function(){var self=this,toggleDragClass=function(e){e.preventDefault(),self.classes.toggle("dragenter"),self.getEl().className=self.classes};self._super(),self.$el.on("dragover",function(e){e.preventDefault()}),self.$el.on("dragenter",toggleDragClass),self.$el.on("dragleave",toggleDragClass),self.$el.on("drop",function(e){if(e.preventDefault(),!self.state.get("disabled")){var files=function(files){var accept=self.settings.accept;if("string"!=typeof accept)return files;var re=new RegExp("("+accept.split(/\s*,\s*/).join("|")+")$","i");return global$2.grep(files,function(file){return re.test(file.name)})}(e.dataTransfer.files);self.value=function(){return files.length?self.settings.multiple?files:files[0]:null},files.length&&self.fire("change",e)}})},remove:function(){this.$el.off(),this._super()}}),Path=Widget.extend({init:function(settings){var self=this;settings.delimiter||(settings.delimiter="»"),self._super(settings),self.classes.add("path"),self.canFocus=!0,self.on("click",function(e){var index;(index=e.target.getAttribute("data-index"))&&self.fire("select",{value:self.row()[index],index:index})}),self.row(self.settings.row)},focus:function(){return this.getEl().firstChild.focus(),this},row:function(row){return arguments.length?(this.state.set("row",row),this):this.state.get("row")},renderHtml:function(){return'<div id="'+this._id+'" class="'+this.classes+'">'+this._getDataPathHtml(this.state.get("row"))+"</div>"},bindStates:function(){var self=this;return self.state.on("change:row",function(e){self.innerHtml(self._getDataPathHtml(e.value))}),self._super()},_getDataPathHtml:function(data){var i,l,parts=data||[],html="",prefix=this.classPrefix;for(i=0,l=parts.length;i<l;i++)html+=(0<i?'<div class="'+prefix+'divider" aria-hidden="true"> '+this.settings.delimiter+" </div>":"")+'<div role="button" class="'+prefix+"path-item"+(i===l-1?" "+prefix+"last":"")+'" data-index="'+i+'" tabindex="-1" id="'+this._id+"-"+i+'" aria-level="'+(i+1)+'">'+parts[i].name+"</div>";return html||(html='<div class="'+prefix+'path-item"> </div>'),html}}),ElementPath=Path.extend({postRender:function(){var self=this,editor=self.settings.editor;function isHidden(elm){if(1===elm.nodeType){if("BR"===elm.nodeName||elm.getAttribute("data-mce-bogus"))return!0;if("bookmark"===elm.getAttribute("data-mce-type"))return!0}return!1}return!1!==editor.settings.elementpath&&(self.on("select",function(e){editor.focus(),editor.selection.select(this.row()[e.index].element),editor.nodeChanged()}),editor.on("nodeChange",function(e){for(var outParents=[],parents=e.parents,i=parents.length;i--;)if(1===parents[i].nodeType&&!isHidden(parents[i])){var args=editor.fire("ResolveName",{name:parents[i].nodeName.toLowerCase(),target:parents[i]});if(args.isDefaultPrevented()||outParents.push({name:args.name,element:parents[i]}),args.isPropagationStopped())break}self.row(outParents)})),self._super()}}),FormItem=Container.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var layout=this._layout,prefix=this.classPrefix;return this.classes.add("formitem"),layout.preRender(this),'<div id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<div id="'+this._id+'-title" class="'+prefix+'title">'+this.settings.title+"</div>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+layout.renderHtml(this)+"</div></div>"}}),Form=Container.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:15,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var self=this,items=self.items();self.settings.formItemDefaults||(self.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),items.each(function(ctrl){var formItem,label=ctrl.settings.label;label&&((formItem=new FormItem(global$2.extend({items:{type:"label",id:ctrl._id+"-l",text:label,flex:0,forId:ctrl._id,disabled:ctrl.disabled()}},self.settings.formItemDefaults))).type="formitem",ctrl.aria("labelledby",ctrl._id+"-l"),void 0===ctrl.settings.flex&&(ctrl.settings.flex=1),self.replace(ctrl,formItem),formItem.add(ctrl))})},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){this._super(),this.fromJSON(this.settings.data)},bindStates:function(){var self=this;function recalcLabels(){var i,labelGap,maxLabelWidth=0,labels=[];if(!1!==self.settings.labelGapCalc)for(("children"===self.settings.labelGapCalc?self.find("formitem"):self.items()).filter("formitem").each(function(item){var labelCtrl=item.items()[0],labelWidth=labelCtrl.getEl().clientWidth;maxLabelWidth=maxLabelWidth<labelWidth?labelWidth:maxLabelWidth,labels.push(labelCtrl)}),labelGap=self.settings.labelGap||0,i=labels.length;i--;)labels[i].settings.minWidth=maxLabelWidth+labelGap}self._super(),self.on("show",recalcLabels),recalcLabels()}}),FieldSet=Form.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var layout=this._layout,prefix=this.classPrefix;return this.preRender(),layout.preRender(this),'<fieldset id="'+this._id+'" class="'+this.classes+'" hidefocus="1" tabindex="-1">'+(this.settings.title?'<legend id="'+this._id+'-title" class="'+prefix+'fieldset-title">'+this.settings.title+"</legend>":"")+'<div id="'+this._id+'-body" class="'+this.bodyClasses+'">'+(this.settings.html||"")+layout.renderHtml(this)+"</div></fieldset>"}}),unique$1=0,$_gdeezvv5jh8lz3rl_generate=function(prefix){var time=(new Date).getTime();return prefix+"_"+Math.floor(1e9*Math.random())+ ++unique$1+String(time)},fromDom=function(node){if(null==node)throw new Error("Node cannot be null or undefined");return{dom:$_3pjweotejh8lz3k4.constant(node)}},$_3bkrfxv6jh8lz3rm={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||1<div.childNodes.length)throw console.error("HTML does not have a single root node",html),"HTML must have a single root node";return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom:fromDom,fromPoint:function(doc,x,y){return Option.from(doc.dom().elementFromPoint(x,y)).map(fromDom)}},$_8me1xevajh8lz3s0_cached=function(f){var r,called=!1;return function(){return called||(called=!0,r=f.apply(null,arguments)),r}},$_8xkvw6vcjh8lz3s2_DOCUMENT=9,$_8xkvw6vcjh8lz3s2_ELEMENT=1,$_8xkvw6vcjh8lz3s2_TEXT=3,type=function(element){return element.dom().nodeType},isType$1=function(t){return function(element){return type(element)===t}},getBody=(isType$1($_8xkvw6vcjh8lz3s2_ELEMENT),isType$1($_8xkvw6vcjh8lz3s2_TEXT),isType$1($_8xkvw6vcjh8lz3s2_DOCUMENT),$_8me1xevajh8lz3s0_cached(function(){return getBody($_3bkrfxv6jh8lz3rm.fromDom(document))}),function(doc){var body=doc.dom().body;if(null==body)throw"Body is not available yet";return $_3bkrfxv6jh8lz3rm.fromDom(body)}),keys=void 0===(fastKeys=Object.keys)?function(o){var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(i);return r}:fastKeys,each$1=function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i,obj)}},tupleMap=function(obj,f){var r={};return each$1(obj,function(x,i){var tuple=f(x,i,obj);r[tuple.k]=tuple.v}),r},mapToArray=function(obj,f){var r=[];return each$1(obj,function(value,name){r.push(f(value,name))}),r},values=function(obj){return mapToArray(obj,function(v){return v})},$_el35e0vhjh8lz3sl={bifilter:function(obj,pred){var t={},f={};return each$1(obj,function(x,i){(pred(x,i)?t:f)[i]=x}),{t:t,f:f}},each:each$1,map:function(obj,f){return tupleMap(obj,function(x,i,obj){return{k:i,v:f(x,i,obj)}})},mapToArray:mapToArray,tupleMap:tupleMap,find:function(obj,pred){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k],x=obj[i];if(pred(x,i,obj))return Option.some(x)}return Option.none()},keys:keys,values:values,size:function(obj){return values(obj).length}},sort$1=function(arr){return arr.slice(0).sort()},$_6xoomwvijh8lz3sn_reqMessage=function(required,keys){throw new Error("All required keys ("+sort$1(required).join(", ")+") were not specified. Specified keys were: "+sort$1(keys).join(", ")+".")},$_6xoomwvijh8lz3sn_unsuppMessage=function(unsupported){throw new Error("Unsupported keys for object: "+sort$1(unsupported).join(", "))},$_6xoomwvijh8lz3sn_validateStrArr=function(label,array){if(!$_d8bie3tijh8lz3kn.isArray(array))throw new Error("The "+label+" fields must be an array. Was: "+array+".");$_f3qxhzthjh8lz3kg.each(array,function(a){if(!$_d8bie3tijh8lz3kn.isString(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},$_6xoomwvijh8lz3sn_checkDupes=function(everything){var sorted=sort$1(everything);$_f3qxhzthjh8lz3kg.find(sorted,function(s,i){return i<sorted.length-1&&s===sorted[i+1]}).each(function(d){throw new Error("The field: "+d+" occurs more than once in the combined fields: ["+sorted.join(", ")+"].")})},$_57mdu6vejh8lz3sg={immutable:function(){for(var fields=[],_i=0;_i<arguments.length;_i++)fields[_i]=arguments[_i];return function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];if(fields.length!==values.length)throw new Error('Wrong number of arguments to struct. Expected "['+fields.length+']", got '+values.length+" arguments");var struct={};return $_f3qxhzthjh8lz3kg.each(fields,function(name,i){struct[name]=$_3pjweotejh8lz3k4.constant(values[i])}),struct}},immutableBag:function(required,optional){var everything=required.concat(optional);if(0===everything.length)throw new Error("You must specify at least one required or optional field.");return $_6xoomwvijh8lz3sn_validateStrArr("required",required),$_6xoomwvijh8lz3sn_validateStrArr("optional",optional),$_6xoomwvijh8lz3sn_checkDupes(everything),function(obj){var keys=$_el35e0vhjh8lz3sl.keys(obj);$_f3qxhzthjh8lz3kg.forall(required,function(req){return $_f3qxhzthjh8lz3kg.contains(keys,req)})||$_6xoomwvijh8lz3sn_reqMessage(required,keys);var unsupported=$_f3qxhzthjh8lz3kg.filter(keys,function(key){return!$_f3qxhzthjh8lz3kg.contains(everything,key)});0<unsupported.length&&$_6xoomwvijh8lz3sn_unsuppMessage(unsupported);var r={};return $_f3qxhzthjh8lz3kg.each(required,function(req){r[req]=$_3pjweotejh8lz3k4.constant(obj[req])}),$_f3qxhzthjh8lz3kg.each(optional,function(opt){r[opt]=$_3pjweotejh8lz3k4.constant(Object.prototype.hasOwnProperty.call(obj,opt)?Option.some(obj[opt]):Option.none())}),r}}},unknown=("undefined"!=typeof window?window:Function("return this;")(),function(){return nu(0,0)}),nu=function(major,minor){return{major:major,minor:minor}},$_afos0kvsjh8lz3tm={nu:nu,detect:function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown():function(regexes,agent){var r=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}}(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu(group(1),group(2))}(versionRegexes,cleanedAgent)},unknown:unknown},isBrowser=function(name,current){return function(){return current===name}},nu$1=function(info){var current=info.current;return{current:current,version:info.version,isEdge:isBrowser("Edge",current),isChrome:isBrowser("Chrome",current),isIE:isBrowser("IE",current),isOpera:isBrowser("Opera",current),isFirefox:isBrowser("Firefox",current),isSafari:isBrowser("Safari",current)}},$_fidpetvrjh8lz3tj={unknown:function(){return nu$1({current:void 0,version:$_afos0kvsjh8lz3tm.unknown()})},nu:nu$1,edge:$_3pjweotejh8lz3k4.constant("Edge"),chrome:$_3pjweotejh8lz3k4.constant("Chrome"),ie:$_3pjweotejh8lz3k4.constant("IE"),opera:$_3pjweotejh8lz3k4.constant("Opera"),firefox:$_3pjweotejh8lz3k4.constant("Firefox"),safari:$_3pjweotejh8lz3k4.constant("Safari")},isOS=function(name,current){return function(){return current===name}},nu$2=function(info){var current=info.current;return{current:current,version:info.version,isWindows:isOS("Windows",current),isiOS:isOS("iOS",current),isAndroid:isOS("Android",current),isOSX:isOS("OSX",current),isLinux:isOS("Linux",current),isSolaris:isOS("Solaris",current),isFreeBSD:isOS("FreeBSD",current)}},$_1z8n9kvtjh8lz3to={unknown:function(){return nu$2({current:void 0,version:$_afos0kvsjh8lz3tm.unknown()})},nu:nu$2,windows:$_3pjweotejh8lz3k4.constant("Windows"),ios:$_3pjweotejh8lz3k4.constant("iOS"),android:$_3pjweotejh8lz3k4.constant("Android"),linux:$_3pjweotejh8lz3k4.constant("Linux"),osx:$_3pjweotejh8lz3k4.constant("OSX"),solaris:$_3pjweotejh8lz3k4.constant("Solaris"),freebsd:$_3pjweotejh8lz3k4.constant("FreeBSD")},detect$1=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return $_f3qxhzthjh8lz3kg.find(candidates,function(candidate){return candidate.search(agent)})},$_bvrih8vvjh8lz3tv_detectBrowser=function(browsers,userAgent){return detect$1(browsers,userAgent).map(function(browser){var version=$_afos0kvsjh8lz3tm.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version}})},$_bvrih8vvjh8lz3tv_detectOs=function(oses,userAgent){return detect$1(oses,userAgent).map(function(os){var version=$_afos0kvsjh8lz3tm.detect(os.versionRegexes,userAgent);return{current:os.name,version:version}})},$_2absfgvxjh8lz3u4_contains=function(str,substr){return-1!==str.indexOf(substr)},normalVersionRegex=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(target){return function(uastring){return $_2absfgvxjh8lz3u4_contains(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return $_2absfgvxjh8lz3u4_contains(uastring,"edge/")&&$_2absfgvxjh8lz3u4_contains(uastring,"chrome")&&$_2absfgvxjh8lz3u4_contains(uastring,"safari")&&$_2absfgvxjh8lz3u4_contains(uastring,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,normalVersionRegex],search:function(uastring){return $_2absfgvxjh8lz3u4_contains(uastring,"chrome")&&!$_2absfgvxjh8lz3u4_contains(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_2absfgvxjh8lz3u4_contains(uastring,"msie")||$_2absfgvxjh8lz3u4_contains(uastring,"trident")}},{name:"Opera",versionRegexes:[normalVersionRegex,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return($_2absfgvxjh8lz3u4_contains(uastring,"safari")||$_2absfgvxjh8lz3u4_contains(uastring,"mobile/"))&&$_2absfgvxjh8lz3u4_contains(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return $_2absfgvxjh8lz3u4_contains(uastring,"iphone")||$_2absfgvxjh8lz3u4_contains(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]}],$_dne06dvwjh8lz3ty={browsers:$_3pjweotejh8lz3k4.constant(browsers),oses:$_3pjweotejh8lz3k4.constant(oses)},$_8gsy8vqjh8lz3ti_detect=function(userAgent){var browsers=$_dne06dvwjh8lz3ty.browsers(),oses=$_dne06dvwjh8lz3ty.oses(),browser=$_bvrih8vvjh8lz3tv_detectBrowser(browsers,userAgent).fold($_fidpetvrjh8lz3tj.unknown,$_fidpetvrjh8lz3tj.nu),os=$_bvrih8vvjh8lz3tv_detectOs(oses,userAgent).fold($_1z8n9kvtjh8lz3to.unknown,$_1z8n9kvtjh8lz3to.nu),deviceType=function(os,browser,userAgent){var isiPad=os.isiOS()&&!0===/ipad/i.test(userAgent),isiPhone=os.isiOS()&&!isiPad,isAndroid3=os.isAndroid()&&3===os.version.major,isAndroid4=os.isAndroid()&&4===os.version.major,isTablet=isiPad||isAndroid3||isAndroid4&&!0===/mobile/i.test(userAgent),isTouch=os.isiOS()||os.isAndroid(),isPhone=isTouch&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&!1===/safari/i.test(userAgent);return{isiPad:$_3pjweotejh8lz3k4.constant(isiPad),isiPhone:$_3pjweotejh8lz3k4.constant(isiPhone),isTablet:$_3pjweotejh8lz3k4.constant(isTablet),isPhone:$_3pjweotejh8lz3k4.constant(isPhone),isTouch:$_3pjweotejh8lz3k4.constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:$_3pjweotejh8lz3k4.constant(iOSwebview)}}(os,browser,userAgent);return{browser:browser,os:os,deviceType:deviceType}},detect$3=$_8me1xevajh8lz3s0_cached(function(){var userAgent=navigator.userAgent;return $_8gsy8vqjh8lz3ti_detect(userAgent)}),ELEMENT=$_8xkvw6vcjh8lz3s2_ELEMENT,DOCUMENT=$_8xkvw6vcjh8lz3s2_DOCUMENT,bypassSelector=function(dom){return dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT||0===dom.childElementCount},$_2nczsvw0jh8lz3ua={all:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?[]:$_f3qxhzthjh8lz3kg.map(base.querySelectorAll(selector),$_3bkrfxv6jh8lz3rm.fromDom)},is:function(element,selector){var elem=element.dom();if(elem.nodeType!==ELEMENT)return!1;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},one:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?Option.none():Option.from(base.querySelector(selector)).map($_3bkrfxv6jh8lz3rm.fromDom)}},$_am3j0fv7jh8lz3rs_descendants=(detect$3().browser.isIE(),$_57mdu6vejh8lz3sg.immutable("element","offset"),function(scope,selector){return $_2nczsvw0jh8lz3ua.all(selector,scope)}),trim$1=global$2.trim,hasContentEditableState=function(value){return function(node){if(node&&1===node.nodeType){if(node.contentEditable===value)return!0;if(node.getAttribute("data-mce-contenteditable")===value)return!0}return!1}},isContentEditableTrue=hasContentEditableState("true"),isContentEditableFalse=hasContentEditableState("false"),create=function(type,title,url,level,attach){return{type:type,title:title,url:url,level:level,attach:attach}},getElementText=function(elm){return elm.innerText||elm.textContent},isValidAnchor=function(elm){return function(elm){return elm&&"A"===elm.nodeName&&(elm.id||elm.name)}(elm)&&isEditable(elm)},isHeader=function(elm){return elm&&/^(H[1-6])$/.test(elm.nodeName)},isEditable=function(elm){return function(node){for(;node=node.parentNode;){var value=node.contentEditable;if(value&&"inherit"!==value)return isContentEditableTrue(node)}return!1}(elm)&&!isContentEditableFalse(elm)},isValidHeader=function(elm){return isHeader(elm)&&isEditable(elm)},headerTarget=function(elm){var headerId=function(elm){return elm.id?elm.id:$_gdeezvv5jh8lz3rl_generate("h")}(elm);return create("header",getElementText(elm),"#"+headerId,function(elm){return isHeader(elm)?parseInt(elm.nodeName.substr(1),10):0}(elm),function(){elm.id=headerId})},anchorTarget=function(elm){var anchorId=elm.id||elm.name,anchorText=getElementText(elm);return create("anchor",anchorText||"#"+anchorId,"#"+anchorId,0,$_3pjweotejh8lz3k4.noop)},getTargetElements=function(elm){var selector,root;return selector="h1,h2,h3,h4,h5,h6,a:not([href])",root=elm,$_f3qxhzthjh8lz3kg.map($_am3j0fv7jh8lz3rs_descendants($_3bkrfxv6jh8lz3rm.fromDom(root),selector),function(element){return element.dom()})},hasTitle=function(target){return 0<trim$1(target.title).length},$_p3wpev4jh8lz3ra_find=function(elm){var elms=getTargetElements(elm);return $_f3qxhzthjh8lz3kg.filter(function(elms){return $_f3qxhzthjh8lz3kg.map($_f3qxhzthjh8lz3kg.filter(elms,isValidHeader),headerTarget)}(elms).concat(function(elms){return $_f3qxhzthjh8lz3kg.map($_f3qxhzthjh8lz3kg.filter(elms,isValidAnchor),anchorTarget)}(elms)),hasTitle)},history={},toMenuItem=function(target){return{title:target.title,value:{title:{raw:target.title},url:target.url,attach:target.attach}}},staticMenuItem=function(title,url){return{title:title,value:{title:title,url:url,attach:$_3pjweotejh8lz3k4.noop}}},getSetting=function(editorSettings,name,defaultValue){var value=name in editorSettings?editorSettings[name]:defaultValue;return!1===value?null:value},createMenuItems=function(term,targets,fileType,editorSettings){var items,separator={title:"-"},fromHistoryMenuItems=function(history){var historyItems=history.hasOwnProperty(fileType)?history[fileType]:[],uniqueHistory=$_f3qxhzthjh8lz3kg.filter(historyItems,function(url){return function(url,targets){return!$_f3qxhzthjh8lz3kg.exists(targets,function(target){return target.url===url})}(url,targets)});return global$2.map(uniqueHistory,function(url){return{title:url,value:{title:url,url:url,attach:$_3pjweotejh8lz3k4.noop}}})},fromMenuItems=function(type){return function(targets){return global$2.map(targets,toMenuItem)}($_f3qxhzthjh8lz3kg.filter(targets,function(target){return target.type===type}))};return!1===editorSettings.typeahead_urls?[]:"file"===fileType?(items=[filterByQuery(term,fromHistoryMenuItems(history)),filterByQuery(term,fromMenuItems("header")),filterByQuery(term,function(){var anchorMenuItems=fromMenuItems("anchor"),topAnchor=getSetting(editorSettings,"anchor_top","#top"),bottomAchor=getSetting(editorSettings,"anchor_bottom","#bottom");return null!==topAnchor&&anchorMenuItems.unshift(staticMenuItem("<top>",topAnchor)),null!==bottomAchor&&anchorMenuItems.push(staticMenuItem("<bottom>",bottomAchor)),anchorMenuItems}())],$_f3qxhzthjh8lz3kg.foldl(items,function(a,b){return 0===a.length||0===b.length?a.concat(b):a.concat(separator,b)},[])):filterByQuery(term,fromHistoryMenuItems(history))},filterByQuery=function(term,menuItems){var lowerCaseTerm=term.toLowerCase(),result=global$2.grep(menuItems,function(item){return-1!==item.title.toLowerCase().indexOf(lowerCaseTerm)});return 1===result.length&&result[0].title===term?[]:result},setupAutoCompleteHandler=function(ctrl,editorSettings,bodyElm,fileType){var autocomplete=function(term){var linkTargets=$_p3wpev4jh8lz3ra_find(bodyElm),menuItems=createMenuItems(term,linkTargets,fileType,editorSettings);ctrl.showAutoComplete(menuItems,term)};ctrl.on("autocomplete",function(){autocomplete(ctrl.value())}),ctrl.on("selectitem",function(e){var linkDetails=e.value;ctrl.value(linkDetails.url);var title=function(linkDetails){var title=linkDetails.title;return title.raw?title.raw:title}(linkDetails);"image"===fileType?ctrl.fire("change",{meta:{alt:title,attach:linkDetails.attach}}):ctrl.fire("change",{meta:{text:title,attach:linkDetails.attach}}),ctrl.focus()}),ctrl.on("click",function(e){0===ctrl.value().length&&"INPUT"===e.target.nodeName&&autocomplete("")}),ctrl.on("PostRender",function(){ctrl.getRoot().on("submit",function(e){e.isDefaultPrevented()||function(url,fileType){var items=history[fileType];/^https?/.test(url)&&(items?$_f3qxhzthjh8lz3kg.indexOf(items,url).isNone()&&(history[fileType]=items.slice(0,5).concat(url)):history[fileType]=[url])}(ctrl.value(),fileType)})})},setupLinkValidatorHandler=function(ctrl,editorSettings,fileType){var validatorHandler=editorSettings.filepicker_validator_handler;validatorHandler&&ctrl.state.on("change:value",function(e){var url;0!==(url=e.value).length?validatorHandler({url:url,type:fileType},function(result){var uiState=function(result){var status=result.status,message=result.message;return"valid"===status?{status:"ok",message:message}:"unknown"===status?{status:"warn",message:message}:"invalid"===status?{status:"warn",message:message}:{status:"none",message:""}}(result);ctrl.statusMessage(uiState.message),ctrl.statusLevel(uiState.status)}):ctrl.statusLevel("none")})},FilePicker=ComboBox.extend({Statics:{clearHistory:function(){history={}}},init:function(settings){var actionCallback,fileBrowserCallback,fileBrowserCallbackTypes,self=this,editor=window.tinymce?window.tinymce.activeEditor:global$1.activeEditor,editorSettings=editor.settings,fileType=settings.filetype;settings.spellcheck=!1,(fileBrowserCallbackTypes=editorSettings.file_picker_types||editorSettings.file_browser_callback_types)&&(fileBrowserCallbackTypes=global$2.makeMap(fileBrowserCallbackTypes,/[, ]/)),fileBrowserCallbackTypes&&!fileBrowserCallbackTypes[fileType]||(!(fileBrowserCallback=editorSettings.file_picker_callback)||fileBrowserCallbackTypes&&!fileBrowserCallbackTypes[fileType]?!(fileBrowserCallback=editorSettings.file_browser_callback)||fileBrowserCallbackTypes&&!fileBrowserCallbackTypes[fileType]||(actionCallback=function(){fileBrowserCallback(self.getEl("inp").id,self.value(),fileType,window)}):actionCallback=function(){var meta=self.fire("beforecall").meta;meta=global$2.extend({filetype:fileType},meta),fileBrowserCallback.call(editor,function(value,meta){self.value(value).fire("change",{meta:meta})},self.value(),meta)}),actionCallback&&(settings.icon="browse",settings.onaction=actionCallback),self._super(settings),self.classes.add("filepicker"),setupAutoCompleteHandler(self,editorSettings,editor.getBody(),fileType),setupLinkValidatorHandler(self,editorSettings,fileType)}}),FitLayout=AbsoluteLayout.extend({recalc:function(container){var contLayoutRect=container.layoutRect(),paddingBox=container.paddingBox;container.items().filter(":visible").each(function(ctrl){ctrl.layoutRect({x:paddingBox.left,y:paddingBox.top,w:contLayoutRect.innerW-paddingBox.right-paddingBox.left,h:contLayoutRect.innerH-paddingBox.top-paddingBox.bottom}),ctrl.recalc&&ctrl.recalc()})}}),FlexLayout=AbsoluteLayout.extend({recalc:function(container){var i,l,items,contLayoutRect,contPaddingBox,contSettings,align,pack,spacing,totalFlex,availableSpace,direction,ctrl,ctrlLayoutRect,flex,size,maxSize,ratio,rect,pos,maxAlignEndPos,sizeName,minSizeName,posName,maxSizeName,beforeName,innerSizeName,deltaSizeName,contentSizeName,alignAxisName,alignInnerSizeName,alignSizeName,alignMinSizeName,alignBeforeName,alignAfterName,alignDeltaSizeName,alignContentSizeName,maxSizeItems=[],max=Math.max,min=Math.min;for(items=container.items().filter(":visible"),contLayoutRect=container.layoutRect(),contPaddingBox=container.paddingBox,contSettings=container.settings,direction=container.isRtl()?contSettings.direction||"row-reversed":contSettings.direction,align=contSettings.align,pack=container.isRtl()?contSettings.pack||"end":contSettings.pack,spacing=contSettings.spacing||0,"row-reversed"!==direction&&"column-reverse"!==direction||(items=items.set(items.toArray().reverse()),direction=direction.split("-")[0]),alignContentSizeName="column"===direction?(posName="y",sizeName="h",minSizeName="minH",maxSizeName="maxH",innerSizeName="innerH",beforeName="top",deltaSizeName="deltaH",contentSizeName="contentH",alignBeforeName="left",alignSizeName="w",alignAxisName="x",alignInnerSizeName="innerW",alignMinSizeName="minW",alignAfterName="right",alignDeltaSizeName="deltaW","contentW"):(posName="x",sizeName="w",minSizeName="minW",maxSizeName="maxW",innerSizeName="innerW",beforeName="left",deltaSizeName="deltaW",contentSizeName="contentW",alignBeforeName="top",alignSizeName="h",alignAxisName="y",alignInnerSizeName="innerH",alignMinSizeName="minH",alignAfterName="bottom",alignDeltaSizeName="deltaH","contentH"),availableSpace=contLayoutRect[innerSizeName]-contPaddingBox[beforeName]-contPaddingBox[beforeName],maxAlignEndPos=totalFlex=0,i=0,l=items.length;i<l;i++)ctrlLayoutRect=(ctrl=items[i]).layoutRect(),availableSpace-=i<l-1?spacing:0,0<(flex=ctrl.settings.flex)&&(totalFlex+=flex,ctrlLayoutRect[maxSizeName]&&maxSizeItems.push(ctrl),ctrlLayoutRect.flex=flex),availableSpace-=ctrlLayoutRect[minSizeName],maxAlignEndPos<(size=contPaddingBox[alignBeforeName]+ctrlLayoutRect[alignMinSizeName]+contPaddingBox[alignAfterName])&&(maxAlignEndPos=size);if((rect={})[minSizeName]=availableSpace<0?contLayoutRect[minSizeName]-availableSpace+contLayoutRect[deltaSizeName]:contLayoutRect[innerSizeName]-availableSpace+contLayoutRect[deltaSizeName],rect[alignMinSizeName]=maxAlignEndPos+contLayoutRect[alignDeltaSizeName],rect[contentSizeName]=contLayoutRect[innerSizeName]-availableSpace,rect[alignContentSizeName]=maxAlignEndPos,rect.minW=min(rect.minW,contLayoutRect.maxW),rect.minH=min(rect.minH,contLayoutRect.maxH),rect.minW=max(rect.minW,contLayoutRect.startMinWidth),rect.minH=max(rect.minH,contLayoutRect.startMinHeight),!contLayoutRect.autoResize||rect.minW===contLayoutRect.minW&&rect.minH===contLayoutRect.minH){for(ratio=availableSpace/totalFlex,i=0,l=maxSizeItems.length;i<l;i++)maxSize=(ctrlLayoutRect=(ctrl=maxSizeItems[i]).layoutRect())[maxSizeName],size=ctrlLayoutRect[minSizeName]+ctrlLayoutRect.flex*ratio,ctrlLayoutRect.maxFlexSize=maxSize<size?(availableSpace-=ctrlLayoutRect[maxSizeName]-ctrlLayoutRect[minSizeName],totalFlex-=ctrlLayoutRect.flex,ctrlLayoutRect.flex=0,maxSize):0;for(ratio=availableSpace/totalFlex,pos=contPaddingBox[beforeName],rect={},0===totalFlex&&("end"===pack?pos=availableSpace+contPaddingBox[beforeName]:"center"===pack?(pos=Math.round(contLayoutRect[innerSizeName]/2-(contLayoutRect[innerSizeName]-availableSpace)/2)+contPaddingBox[beforeName])<0&&(pos=contPaddingBox[beforeName]):"justify"===pack&&(pos=contPaddingBox[beforeName],spacing=Math.floor(availableSpace/(items.length-1)))),rect[alignAxisName]=contPaddingBox[alignBeforeName],i=0,l=items.length;i<l;i++)size=(ctrlLayoutRect=(ctrl=items[i]).layoutRect()).maxFlexSize||ctrlLayoutRect[minSizeName],"center"===align?rect[alignAxisName]=Math.round(contLayoutRect[alignInnerSizeName]/2-ctrlLayoutRect[alignSizeName]/2):"stretch"===align?(rect[alignSizeName]=max(ctrlLayoutRect[alignMinSizeName]||0,contLayoutRect[alignInnerSizeName]-contPaddingBox[alignBeforeName]-contPaddingBox[alignAfterName]),rect[alignAxisName]=contPaddingBox[alignBeforeName]):"end"===align&&(rect[alignAxisName]=contLayoutRect[alignInnerSizeName]-ctrlLayoutRect[alignSizeName]-contPaddingBox.top),0<ctrlLayoutRect.flex&&(size+=ctrlLayoutRect.flex*ratio),rect[sizeName]=size,rect[posName]=pos,ctrl.layoutRect(rect),ctrl.recalc&&ctrl.recalc(),pos+=size+spacing}else if(rect.w=rect.minW,rect.h=rect.minH,container.layoutRect(rect),this.recalc(container),null===container._lastRect){var parentCtrl=container.parent();parentCtrl&&(parentCtrl._lastRect=null,parentCtrl.recalc())}}}),FlowLayout=Layout.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(container){container.items().filter(":visible").each(function(ctrl){ctrl.recalc&&ctrl.recalc()})},isNative:function(){return!0}}),$_9rr9rgw5jh8lz3uu_descendant=function(scope,selector){return $_2nczsvw0jh8lz3ua.one(selector,scope)},toggleFormat=function(editor,fmt){return function(){editor.execCommand("mceToggleFormat",!1,fmt)}},addFormatChangedListener=function(editor,name,changed){var handler=function(state){changed(state,name)};editor.formatter?editor.formatter.formatChanged(name,handler):editor.on("init",function(){editor.formatter.formatChanged(name,handler)})},postRenderFormatToggle=function(editor,name){return function(e){addFormatChangedListener(editor,name,function(state){e.control.active(state)})}},$_a6x5k4w8jh8lz3vh_register=function(editor){var alignFormats=["alignleft","aligncenter","alignright","alignjustify"],alignMenuItems=[{text:"Left",icon:"alignleft",onclick:toggleFormat(editor,"alignleft")},{text:"Center",icon:"aligncenter",onclick:toggleFormat(editor,"aligncenter")},{text:"Right",icon:"alignright",onclick:toggleFormat(editor,"alignright")},{text:"Justify",icon:"alignjustify",onclick:toggleFormat(editor,"alignjustify")}];editor.addMenuItem("align",{text:"Align",menu:alignMenuItems}),editor.addButton("align",{type:"menubutton",icon:"alignleft",menu:alignMenuItems,onShowMenu:function(e){var menu=e.control.menu;global$2.each(alignFormats,function(formatName,idx){menu.items().eq(idx).each(function(item){return item.active(editor.formatter.match(formatName))})})},onPostRender:function(e){var ctrl=e.control;global$2.each(alignFormats,function(formatName,idx){addFormatChangedListener(editor,formatName,function(state){ctrl.icon("alignleft"),state&&ctrl.icon(formatName)})})}}),global$2.each({alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"],alignnone:["No alignment","JustifyNone"]},function(item,name){editor.addButton(name,{active:!1,tooltip:item[0],cmd:item[1],onPostRender:postRenderFormatToggle(editor,name)})})},getFirstFont=function(fontFamily){return fontFamily?fontFamily.split(",")[0]:""},createFontNameListBoxChangeHandler=function(editor,items){return function(){var self=this;editor.on("init nodeChange",function(e){var fontFamily=editor.queryCommandValue("FontName"),match=function(items,fontFamily){var value,font=fontFamily?fontFamily.toLowerCase():"";return global$2.each(items,function(item){item.value.toLowerCase()===font&&(value=item.value)}),global$2.each(items,function(item){value||getFirstFont(item.value).toLowerCase()!==getFirstFont(font).toLowerCase()||(value=item.value)}),value}(items,fontFamily);self.value(match||null),!match&&fontFamily&&self.text(getFirstFont(fontFamily))})}},registerButtons=function(editor){editor.addButton("fontselect",function(){var items=function(editor){var fonts=function(formats){for(var i=(formats=formats.replace(/;$/,"").split(";")).length;i--;)formats[i]=formats[i].split("=");return formats}(editor.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return global$2.map(fonts,function(font){return{text:{raw:font[0]},value:font[1],textStyle:-1===font[1].indexOf("dings")?"font-family:"+font[1]:""}})}(editor);return{type:"listbox",text:"Font Family",tooltip:"Font Family",values:items,fixedWidth:!0,onPostRender:createFontNameListBoxChangeHandler(editor,items),onselect:function(e){e.control.settings.value&&editor.execCommand("FontName",!1,e.control.settings.value)}}})},$_4hdsyewajh8lz3vk_register=function(editor){registerButtons(editor)},toPt=function(fontSize,precision){return/[0-9.]+px$/.test(fontSize)?function(number,precision){var factor=Math.pow(10,precision);return Math.round(number*factor)/factor}(72*parseInt(fontSize,10)/96,precision||0)+"pt":fontSize},findMatchingValue$1=function(items,pt,px){var value;return global$2.each(items,function(item){item.value===px?value=px:item.value===pt&&(value=pt)}),value},registerButtons$1=function(editor){editor.addButton("fontsizeselect",function(){var items=function(editor){var fontsizeFormats=editor.settings.fontsize_formats||"8pt 10pt 12pt 14pt 18pt 24pt 36pt";return global$2.map(fontsizeFormats.split(" "),function(item){var text=item,value=item,values=item.split("=");return 1<values.length&&(text=values[0],value=values[1]),{text:text,value:value}})}(editor);return{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:items,fixedWidth:!0,onPostRender:function(editor,items){return function(){var self=this;editor.on("init nodeChange",function(e){var px,pt,precision,match;if(px=editor.queryCommandValue("FontSize"))for(precision=3;!match&&0<=precision;precision--)pt=toPt(px,precision),match=findMatchingValue$1(items,pt,px);self.value(match||null),match||self.text(pt)})}}(editor,items),onclick:function(e){e.control.settings.value&&editor.execCommand("FontSize",!1,e.control.settings.value)}}})},$_du9atdwbjh8lz3vn_register=function(editor){registerButtons$1(editor)},hideMenuObjects=function(editor,menu){var count=menu.length;return global$2.each(menu,function(item){item.menu&&(item.hidden=0===hideMenuObjects(editor,item.menu));var formatName=item.format;formatName&&(item.hidden=!editor.formatter.canApply(formatName)),item.hidden&&count--}),count},hideFormatMenuItems=function(editor,menu){var count=menu.items().length;return menu.items().each(function(item){item.menu&&item.visible(0<hideFormatMenuItems(editor,item.menu)),!item.menu&&item.settings.menu&&item.visible(0<hideMenuObjects(editor,item.settings.menu));var formatName=item.settings.format;formatName&&item.visible(editor.formatter.canApply(formatName)),item.visible()||count--}),count},$_5xlhbcwcjh8lz3vr_register=function(editor){var formatMenu=function(editor){var count=0,newFormats=[],defaultStyleFormats=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],createMenu=function(formats){var menu=[];if(formats)return global$2.each(formats,function(format){var menuItem={text:format.title,icon:format.icon};if(format.items)menuItem.menu=createMenu(format.items);else{var formatName=format.format||"custom"+count++;format.format||(format.name=formatName,newFormats.push(format)),menuItem.format=formatName,menuItem.cmd=format.cmd}menu.push(menuItem)}),menu};return editor.on("init",function(){global$2.each(newFormats,function(format){editor.formatter.register(format.name,format)})}),{type:"menu",items:editor.settings.style_formats_merge?editor.settings.style_formats?createMenu(defaultStyleFormats.concat(editor.settings.style_formats)):createMenu(defaultStyleFormats):createMenu(editor.settings.style_formats||defaultStyleFormats),onPostRender:function(e){editor.fire("renderFormatsMenu",{control:e.control})},itemDefaults:{preview:!0,textStyle:function(){if(this.settings.format)return editor.formatter.getCssText(this.settings.format)},onPostRender:function(){var self=this;self.parent().on("show",function(){var formatName,command;(formatName=self.settings.format)&&(self.disabled(!editor.formatter.canApply(formatName)),self.active(editor.formatter.match(formatName))),(command=self.settings.cmd)&&self.active(editor.queryCommandState(command))})},onclick:function(){this.settings.format&&toggleFormat(editor,this.settings.format)(),this.settings.cmd&&editor.execCommand(this.settings.cmd)}}}}(editor);!function(editor,formatMenu){editor.addMenuItem("formats",{text:"Formats",menu:formatMenu})}(editor,formatMenu),function(editor,formatMenu){editor.addButton("styleselect",{type:"menubutton",text:"Formats",menu:formatMenu,onShowMenu:function(){editor.settings.style_formats_autohide&&hideFormatMenuItems(editor,this.menu)}})}(editor,formatMenu)},lazyFormatSelectBoxItems=function(editor,blocks){return function(){var items=[];return global$2.each(blocks,function(block){items.push({text:block[0],value:block[1],textStyle:function(){return editor.formatter.getCssText(block[1])}})}),{type:"listbox",text:blocks[0][0],values:items,fixedWidth:!0,onselect:function(e){if(e.control){var fmt=e.control.value();toggleFormat(editor,fmt)()}},onPostRender:function(editor,items,formatName){return function(){var self=this;editor.on("nodeChange",function(e){var formatter=editor.formatter,value=null;global$2.each(e.parents,function(node){if(global$2.each(items,function(item){if(formatName?formatter.matchNode(node,formatName,{value:item.value})&&(value=item.value):formatter.matchNode(node,item.value)&&(value=item.value),value)return!1}),value)return!1}),self.value(value)})}}(editor,items)}}},$_bj8nxmwdjh8lz3vw_register=function(editor){var blocks=function(formats){for(var i=(formats=formats.replace(/;$/,"").split(";")).length;i--;)formats[i]=formats[i].split("=");return formats}(editor.settings.block_formats||"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre");editor.addMenuItem("blockformats",{text:"Blocks",menu:function(editor,blocks){return global$2.map(blocks,function(block){return{text:block[0],onclick:toggleFormat(editor,block[1]),textStyle:function(){return editor.formatter.getCssText(block[1])}}})}(editor,blocks)}),editor.addButton("formatselect",lazyFormatSelectBoxItems(editor,blocks))},createCustomMenuItems=function(editor,names){var items,nameList;if("string"==typeof names)nameList=names.split(" ");else if(global$2.isArray(names))return $_f3qxhzthjh8lz3kg.flatten(global$2.map(names,function(names){return createCustomMenuItems(editor,names)}));return items=global$2.grep(nameList,function(name){return"|"===name||name in editor.menuItems}),global$2.map(items,function(name){return"|"===name?{text:"-"}:editor.menuItems[name]})},isSeparator$1=function(menuItem){return menuItem&&"-"===menuItem.text},trimMenuItems=function(menuItems){var menuItems2=$_f3qxhzthjh8lz3kg.filter(menuItems,function(menuItem,i,menuItems){return!isSeparator$1(menuItem)||!isSeparator$1(menuItems[i-1])});return $_f3qxhzthjh8lz3kg.filter(menuItems2,function(menuItem,i,menuItems){return!isSeparator$1(menuItem)||0<i&&i<menuItems.length-1})},createInsertMenu=function(editor){var insertButtonItems=editor.settings.insert_button_items;return trimMenuItems(insertButtonItems?createCustomMenuItems(editor,insertButtonItems):function(editor,context){var outputMenuItems=[{text:"-"}],menuItems=global$2.grep(editor.menuItems,function(menuItem){return menuItem.context===context});return global$2.each(menuItems,function(menuItem){"before"===menuItem.separator&&outputMenuItems.push({text:"|"}),menuItem.prependToContext?outputMenuItems.unshift(menuItem):outputMenuItems.push(menuItem),"after"===menuItem.separator&&outputMenuItems.push({text:"|"})}),outputMenuItems}(editor,"insert"))},$_drvzmkwejh8lz3vz_register=function(editor){!function(editor){editor.addButton("insert",{type:"menubutton",icon:"insert",menu:[],oncreatemenu:function(){this.menu.add(createInsertMenu(editor)),this.menu.renderNew()}})}(editor)},registerButtons$4=function(editor){!function(editor){global$2.each({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(text,name){editor.addButton(name,{active:!1,tooltip:text,onPostRender:postRenderFormatToggle(editor,name),onclick:toggleFormat(editor,name)})})}(editor),function(editor){global$2.each({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"],removeformat:["Clear formatting","RemoveFormat"],remove:["Remove","Delete"]},function(item,name){editor.addButton(name,{tooltip:item[0],cmd:item[1]})})}(editor),function(editor){global$2.each({blockquote:["Blockquote","mceBlockQuote"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"]},function(item,name){editor.addButton(name,{active:!1,tooltip:item[0],cmd:item[1],onPostRender:postRenderFormatToggle(editor,name)})})}(editor)},$_2d67dwfjh8lz3w2_register=function(editor){registerButtons$4(editor),function(editor){global$2.each({bold:["Bold","Bold","Meta+B"],italic:["Italic","Italic","Meta+I"],underline:["Underline","Underline","Meta+U"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"],newdocument:["New document","mceNewDocument"],cut:["Cut","Cut","Meta+X"],copy:["Copy","Copy","Meta+C"],paste:["Paste","Paste","Meta+V"],selectall:["Select all","SelectAll","Meta+A"]},function(item,name){editor.addMenuItem(name,{text:item[0],icon:name,shortcut:item[2],cmd:item[1]})}),editor.addMenuItem("codeformat",{text:"Code",icon:"code",onclick:toggleFormat(editor,"code")})}(editor)},toggleUndoRedoState=function(editor,type){return function(){var self=this,checkState=function(){var typeFn="redo"===type?"hasRedo":"hasUndo";return!!editor.undoManager&&editor.undoManager[typeFn]()};self.disabled(!checkState()),editor.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(){self.disabled(editor.readonly||!checkState())})}},$_cd5m9xwgjh8lz3w5_register=function(editor){!function(editor){editor.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onPostRender:toggleUndoRedoState(editor,"undo"),cmd:"undo"}),editor.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onPostRender:toggleUndoRedoState(editor,"redo"),cmd:"redo"})}(editor),function(editor){editor.addButton("undo",{tooltip:"Undo",onPostRender:toggleUndoRedoState(editor,"undo"),cmd:"undo"}),editor.addButton("redo",{tooltip:"Redo",onPostRender:toggleUndoRedoState(editor,"redo"),cmd:"redo"})}(editor)},$_1ojpofwhjh8lz3w6_register=function(editor){!function(editor){editor.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:function(editor){return function(){var self=this;editor.on("VisualAid",function(e){self.active(e.hasVisual)}),self.active(editor.hasVisual)}}(editor),cmd:"mceToggleVisualAid"})}(editor)},$_4qdht3w4jh8lz3uo={setup:function(editor){!function(editor){editor.rtl&&(Control$1.rtl=!0)}(editor),function(editor){editor.on("mousedown",function(){FloatPanel.hideAll()})}(editor),function(editor){editor.settings.ui_container&&(global$8.container=$_9rr9rgw5jh8lz3uu_descendant($_3bkrfxv6jh8lz3rm.fromDom(document.body),editor.settings.ui_container).fold($_3pjweotejh8lz3k4.constant(null),function(elm){return elm.dom()}))}(editor),Widget.tooltips=!global$8.iOS,Control$1.translate=function(text){return global$1.translate(text)},$_bj8nxmwdjh8lz3vw_register(editor),$_a6x5k4w8jh8lz3vh_register(editor),$_2d67dwfjh8lz3w2_register(editor),$_cd5m9xwgjh8lz3w5_register(editor),$_du9atdwbjh8lz3vn_register(editor),$_4hdsyewajh8lz3vk_register(editor),$_5xlhbcwcjh8lz3vr_register(editor),$_1ojpofwhjh8lz3w6_register(editor),$_drvzmkwejh8lz3vz_register(editor)}},GridLayout=AbsoluteLayout.extend({recalc:function(container){var settings,rows,cols,items,contLayoutRect,width,height,rect,ctrlLayoutRect,ctrl,x,y,posX,posY,ctrlSettings,contPaddingBox,align,spacingH,spacingV,alignH,alignV,maxX,maxY,ctrlMinWidth,ctrlMinHeight,availableWidth,availableHeight,reverseRows,colWidths=[],rowHeights=[];settings=container.settings,items=container.items().filter(":visible"),contLayoutRect=container.layoutRect(),cols=settings.columns||Math.ceil(Math.sqrt(items.length)),rows=Math.ceil(items.length/cols),spacingH=settings.spacingH||settings.spacing||0,spacingV=settings.spacingV||settings.spacing||0,alignH=settings.alignH||settings.align,alignV=settings.alignV||settings.align,contPaddingBox=container.paddingBox,reverseRows="reverseRows"in settings?settings.reverseRows:container.isRtl(),alignH&&"string"==typeof alignH&&(alignH=[alignH]),alignV&&"string"==typeof alignV&&(alignV=[alignV]);for(x=0;x<cols;x++)colWidths.push(0);for(y=0;y<rows;y++)rowHeights.push(0);for(y=0;y<rows;y++)for(x=0;x<cols&&(ctrl=items[y*cols+x]);x++)ctrlMinWidth=(ctrlLayoutRect=ctrl.layoutRect()).minW,ctrlMinHeight=ctrlLayoutRect.minH,colWidths[x]=ctrlMinWidth>colWidths[x]?ctrlMinWidth:colWidths[x],rowHeights[y]=ctrlMinHeight>rowHeights[y]?ctrlMinHeight:rowHeights[y];for(availableWidth=contLayoutRect.innerW-contPaddingBox.left-contPaddingBox.right,x=maxX=0;x<cols;x++)maxX+=colWidths[x]+(0<x?spacingH:0),availableWidth-=(0<x?spacingH:0)+colWidths[x];for(availableHeight=contLayoutRect.innerH-contPaddingBox.top-contPaddingBox.bottom,y=maxY=0;y<rows;y++)maxY+=rowHeights[y]+(0<y?spacingV:0),availableHeight-=(0<y?spacingV:0)+rowHeights[y];if(maxX+=contPaddingBox.left+contPaddingBox.right,maxY+=contPaddingBox.top+contPaddingBox.bottom,(rect={}).minW=maxX+(contLayoutRect.w-contLayoutRect.innerW),rect.minH=maxY+(contLayoutRect.h-contLayoutRect.innerH),rect.contentW=rect.minW-contLayoutRect.deltaW,rect.contentH=rect.minH-contLayoutRect.deltaH,rect.minW=Math.min(rect.minW,contLayoutRect.maxW),rect.minH=Math.min(rect.minH,contLayoutRect.maxH),rect.minW=Math.max(rect.minW,contLayoutRect.startMinWidth),rect.minH=Math.max(rect.minH,contLayoutRect.startMinHeight),!contLayoutRect.autoResize||rect.minW===contLayoutRect.minW&&rect.minH===contLayoutRect.minH){var flexV;contLayoutRect.autoResize&&((rect=container.layoutRect(rect)).contentW=rect.minW-contLayoutRect.deltaW,rect.contentH=rect.minH-contLayoutRect.deltaH),flexV="start"===settings.packV?0:0<availableHeight?Math.floor(availableHeight/rows):0;var totalFlex=0,flexWidths=settings.flexWidths;if(flexWidths)for(x=0;x<flexWidths.length;x++)totalFlex+=flexWidths[x];else totalFlex=cols;var ratio=availableWidth/totalFlex;for(x=0;x<cols;x++)colWidths[x]+=flexWidths?flexWidths[x]*ratio:ratio;for(posY=contPaddingBox.top,y=0;y<rows;y++){for(posX=contPaddingBox.left,height=rowHeights[y]+flexV,x=0;x<cols&&(ctrl=items[reverseRows?y*cols+cols-1-x:y*cols+x]);x++)ctrlSettings=ctrl.settings,ctrlLayoutRect=ctrl.layoutRect(),width=Math.max(colWidths[x],ctrlLayoutRect.startMinWidth),ctrlLayoutRect.x=posX,ctrlLayoutRect.y=posY,"center"===(align=ctrlSettings.alignH||(alignH?alignH[x]||alignH[0]:null))?ctrlLayoutRect.x=posX+width/2-ctrlLayoutRect.w/2:"right"===align?ctrlLayoutRect.x=posX+width-ctrlLayoutRect.w:"stretch"===align&&(ctrlLayoutRect.w=width),"center"===(align=ctrlSettings.alignV||(alignV?alignV[x]||alignV[0]:null))?ctrlLayoutRect.y=posY+height/2-ctrlLayoutRect.h/2:"bottom"===align?ctrlLayoutRect.y=posY+height-ctrlLayoutRect.h:"stretch"===align&&(ctrlLayoutRect.h=height),ctrl.layoutRect(ctrlLayoutRect),posX+=width+spacingH,ctrl.recalc&&ctrl.recalc();posY+=height+spacingV}}else if(rect.w=rect.minW,rect.h=rect.minH,container.layoutRect(rect),this.recalc(container),null===container._lastRect){var parentCtrl=container.parent();parentCtrl&&(parentCtrl._lastRect=null,parentCtrl.recalc())}}}),Iframe$1=Widget.extend({renderHtml:function(){return this.classes.add("iframe"),this.canFocus=!1,'<iframe id="'+this._id+'" class="'+this.classes+'" tabindex="-1" src="'+(this.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(src){this.getEl().src=src},html:function(html,callback){var self=this,body=this.getEl().contentWindow.document.body;return body?(body.innerHTML=html,callback&&callback()):global$7.setTimeout(function(){self.html(html)}),this}}),InfoBox=Widget.extend({init:function(settings){this._super(settings),this.classes.add("widget").add("infobox"),this.canFocus=!1},severity:function(level){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(level)},help:function(state){this.state.set("help",state)},renderHtml:function(){var prefix=this.classPrefix;return'<div id="'+this._id+'" class="'+this.classes+'"><div id="'+this._id+'-body">'+this.encode(this.state.get("text"))+'<button role="button" tabindex="-1"><i class="'+prefix+"ico "+prefix+'i-help"></i></button></div></div>'},bindStates:function(){var self=this;return self.state.on("change:text",function(e){self.getEl("body").firstChild.data=self.encode(e.value),self.state.get("rendered")&&self.updateLayoutRect()}),self.state.on("change:help",function(e){self.classes.toggle("has-help",e.value),self.state.get("rendered")&&self.updateLayoutRect()}),self._super()}}),Label=Widget.extend({init:function(settings){this._super(settings),this.classes.add("widget").add("label"),this.canFocus=!1,settings.multiline&&this.classes.add("autoscroll"),settings.strong&&this.classes.add("strong")},initLayoutRect:function(){var layoutRect=this._super();return this.settings.multiline&&(funcs.getSize(this.getEl()).width>layoutRect.maxW&&(layoutRect.minW=layoutRect.maxW,this.classes.add("multiline")),this.getEl().style.width=layoutRect.minW+"px",layoutRect.startMinH=layoutRect.h=layoutRect.minH=Math.min(layoutRect.maxH,funcs.getSize(this.getEl()).height)),layoutRect},repaint:function(){return this.settings.multiline||(this.getEl().style.lineHeight=this.layoutRect().h+"px"),this._super()},severity:function(level){this.classes.remove("error"),this.classes.remove("warning"),this.classes.remove("success"),this.classes.add(level)},renderHtml:function(){var targetCtrl,forName,forId=this.settings.forId,text=this.settings.html?this.settings.html:this.encode(this.state.get("text"));return!forId&&(forName=this.settings.forName)&&(targetCtrl=this.getRoot().find("#"+forName)[0])&&(forId=targetCtrl._id),forId?'<label id="'+this._id+'" class="'+this.classes+'"'+(forId?' for="'+forId+'"':"")+">"+text+"</label>":'<span id="'+this._id+'" class="'+this.classes+'">'+text+"</span>"},bindStates:function(){var self=this;return self.state.on("change:text",function(e){self.innerHtml(self.encode(e.value)),self.state.get("rendered")&&self.updateLayoutRect()}),self._super()}}),Toolbar$1=Container.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(settings){this._super(settings),this.classes.add("toolbar")},postRender:function(){return this.items().each(function(ctrl){ctrl.classes.add("toolbar-item")}),this._super()}}),MenuBar=Toolbar$1.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}}),MenuButton=Button.extend({init:function(settings){this._renderOpen=!0,this._super(settings),settings=this.settings,this.classes.add("menubtn"),settings.fixedWidth&&this.classes.add("fixed-width"),this.aria("haspopup",!0),this.state.set("menu",settings.menu||this.render())},showMenu:function(toggle){var menu,self=this;if(self.menu&&self.menu.visible()&&!1!==toggle)return self.hideMenu();self.menu||(menu=self.state.get("menu")||[],self.classes.add("opened"),menu.length?menu={type:"menu",animate:!0,items:menu}:(menu.type=menu.type||"menu",menu.animate=!0),menu.renderTo?self.menu=menu.parent(self).show().renderTo():self.menu=global$4.create(menu).parent(self).renderTo(),self.fire("createmenu"),self.menu.reflow(),self.menu.on("cancel",function(e){e.control.parent()===self.menu&&(e.stopPropagation(),self.focus(),self.hideMenu())}),self.menu.on("select",function(){self.focus()}),self.menu.on("show hide",function(e){e.control===self.menu&&(self.activeMenu("show"===e.type),self.classes.toggle("opened","show"===e.type)),self.aria("expanded","show"===e.type)}).fire("show")),self.menu.show(),self.menu.layoutRect({w:self.layoutRect().w}),self.menu.repaint(),self.menu.moveRel(self.getEl(),self.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]),self.fire("showmenu")},hideMenu:function(){this.menu&&(this.menu.items().each(function(item){item.hideMenu&&item.hideMenu()}),this.menu.hide())},activeMenu:function(state){this.classes.toggle("active",state)},renderHtml:function(){var image,id=this._id,prefix=this.classPrefix,icon=this.settings.icon,text=this.state.get("text"),textHtml="";return image=(image=this.settings.image)?(icon="none","string"!=typeof image&&(image=window.getSelection?image[0]:image[1])," style=\"background-image: url('"+image+"')\""):"",text&&(this.classes.add("btn-has-text"),textHtml='<span class="'+prefix+'txt">'+this.encode(text)+"</span>"),icon=this.settings.icon?prefix+"ico "+prefix+"i-"+icon:"",this.aria("role",this.parent()instanceof MenuBar?"menuitem":"button"),'<div id="'+id+'" class="'+this.classes+'" tabindex="-1" aria-labelledby="'+id+'"><button id="'+id+'-open" role="presentation" type="button" tabindex="-1">'+(icon?'<i class="'+icon+'"'+image+"></i>":"")+textHtml+' <i class="'+prefix+'caret"></i></button></div>'},postRender:function(){var self=this;return self.on("click",function(e){e.control===self&&function(node,parent){for(;node;){if(parent===node)return!0;node=node.parentNode}return!1}(e.target,self.getEl())&&(self.focus(),self.showMenu(!e.aria),e.aria&&self.menu.items().filter(":visible")[0].focus())}),self.on("mouseenter",function(e){var hasVisibleSiblingMenu,overCtrl=e.control,parent=self.parent();overCtrl&&parent&&overCtrl instanceof MenuButton&&overCtrl.parent()===parent&&(parent.items().filter("MenuButton").each(function(ctrl){ctrl.hideMenu&&ctrl!==overCtrl&&(ctrl.menu&&ctrl.menu.visible()&&(hasVisibleSiblingMenu=!0),ctrl.hideMenu())}),hasVisibleSiblingMenu&&(overCtrl.focus(),overCtrl.showMenu()))}),self._super()},bindStates:function(){var self=this;return self.state.on("change:menu",function(){self.menu&&self.menu.remove(),self.menu=null}),self._super()},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Menu=FloatPanel.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(settings){if(settings.autohide=!0,settings.constrainToViewport=!0,"function"==typeof settings.items&&(settings.itemsFactory=settings.items,settings.items=[]),settings.itemDefaults)for(var items=settings.items,i=items.length;i--;)items[i]=global$2.extend({},settings.itemDefaults,items[i]);this._super(settings),this.classes.add("menu"),settings.animate&&11!==global$8.ie&&this.classes.add("animate")},repaint:function(){return this.classes.toggle("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){this.hideAll(),this.fire("select")},load:function(){var time,self=this;function hideThrobber(){self.throbber&&(self.throbber.hide(),self.throbber=null)}self.settings.itemsFactory&&(self.throbber||(self.throbber=new Throbber(self.getEl("body"),!0),0===self.items().length?(self.throbber.show(),self.fire("loading")):self.throbber.show(100,function(){self.items().remove(),self.fire("loading")}),self.on("hide close",hideThrobber)),self.requestTime=time=(new Date).getTime(),self.settings.itemsFactory(function(items){0!==items.length?self.requestTime===time&&(self.getEl().style.width="",self.getEl("body").style.width="",hideThrobber(),self.items().remove(),self.getEl("body").innerHTML="",self.add(items),self.renderNew(),self.fire("loaded")):self.hide()}))},hideAll:function(){return this.find("menuitem").exec("hideMenu"),this._super()},preRender:function(){var self=this;return self.items().each(function(ctrl){var settings=ctrl.settings;if(settings.icon||settings.image||settings.selectable)return!(self._hasIcons=!0)}),self.settings.itemsFactory&&self.on("postrender",function(){self.settings.itemsFactory&&self.load()}),self.on("show hide",function(e){e.control===self&&("show"===e.type?global$7.setTimeout(function(){self.classes.add("in")},0):self.classes.remove("in"))}),self._super()}}),ListBox=MenuButton.extend({init:function(settings){var values,selected,selectedText,lastItemCtrl,self=this;self._super(settings),settings=self.settings,self._values=values=settings.values,values&&(void 0!==settings.value&&function setSelected(menuValues){for(var i=0;i<menuValues.length;i++){if(selected=menuValues[i].selected||settings.value===menuValues[i].value)return selectedText=selectedText||menuValues[i].text,self.state.set("value",menuValues[i].value),!0;if(menuValues[i].menu&&setSelected(menuValues[i].menu))return!0}}(values),!selected&&0<values.length&&(selectedText=values[0].text,self.state.set("value",values[0].value)),self.state.set("menu",values)),self.state.set("text",settings.text||selectedText),self.classes.add("listbox"),self.on("select",function(e){var ctrl=e.control;lastItemCtrl&&(e.lastControl=lastItemCtrl),settings.multiple?ctrl.active(!ctrl.active()):self.value(e.control.value()),lastItemCtrl=ctrl})},value:function(value){return 0===arguments.length?this.state.get("value"):(void 0===value||(this.settings.values?0<global$2.grep(this.settings.values,function(a){return a.value===value}).length?this.state.set("value",value):null===value&&this.state.set("value",null):this.state.set("value",value)),this)},bindStates:function(){var self=this;return self.on("show",function(e){var menu,value;menu=e.control,value=self.value(),menu instanceof Menu&&menu.items().each(function(ctrl){ctrl.hasMenus()||ctrl.active(ctrl.value()===value)})}),self.state.on("change:value",function(e){var selectedItem=function getSelectedItem(menuValues,value){var selectedItem;if(menuValues)for(var i=0;i<menuValues.length;i++){if(menuValues[i].value===value)return menuValues[i];if(menuValues[i].menu&&(selectedItem=getSelectedItem(menuValues[i].menu,value)))return selectedItem}}(self.state.get("menu"),e.value);selectedItem?self.text(selectedItem.text):self.text(self.settings.text)}),self._super()}}),MenuItem=Widget.extend({Defaults:{border:0,role:"menuitem"},init:function(settings){var text;this._super(settings),settings=this.settings,this.classes.add("menu-item"),settings.menu&&this.classes.add("menu-item-expand"),settings.preview&&this.classes.add("menu-item-preview"),"-"!==(text=this.state.get("text"))&&"|"!==text||(this.classes.add("menu-item-sep"),this.aria("role","separator"),this.state.set("text","-")),settings.selectable&&(this.aria("role","menuitemcheckbox"),this.classes.add("menu-item-checkbox"),settings.icon="selected"),settings.preview||settings.selectable||this.classes.add("menu-item-normal"),this.on("mousedown",function(e){e.preventDefault()}),settings.menu&&!settings.ariaHideMenu&&this.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var menu,self=this,settings=self.settings,parent=self.parent();if(parent.items().each(function(ctrl){ctrl!==self&&ctrl.hideMenu()}),settings.menu){(menu=self.menu)?menu.show():((menu=settings.menu).length?menu={type:"menu",items:menu}:menu.type=menu.type||"menu",parent.settings.itemDefaults&&(menu.itemDefaults=parent.settings.itemDefaults),(menu=self.menu=global$4.create(menu).parent(self).renderTo()).reflow(),menu.on("cancel",function(e){e.stopPropagation(),self.focus(),menu.hide()}),menu.on("show hide",function(e){e.control.items&&e.control.items().each(function(ctrl){ctrl.active(ctrl.settings.selected)})}).fire("show"),menu.on("hide",function(e){e.control===menu&&self.classes.remove("selected")}),menu.submenu=!0),menu._parentMenu=parent,menu.classes.add("menu-sub");var rel=menu.testMoveRel(self.getEl(),self.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);menu.moveRel(self.getEl(),rel),rel="menu-sub-"+(menu.rel=rel),menu.classes.remove(menu._lastRel).add(rel),menu._lastRel=rel,self.classes.add("selected"),self.aria("expanded",!0)}},hideMenu:function(){return this.menu&&(this.menu.items().each(function(item){item.hideMenu&&item.hideMenu()}),this.menu.hide(),this.aria("expanded",!1)),this},renderHtml:function(){var iconHtml,id=this._id,settings=this.settings,prefix=this.classPrefix,text=this.state.get("text"),icon=this.settings.icon,image="",shortcut=settings.shortcut,url=this.encode(settings.url);function escapeRegExp(str){return str.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function markMatches(text){var match=settings.match||"";return match?text.replace(new RegExp(escapeRegExp(match),"gi"),function(match){return"!mce~match["+match+"]mce~match!"}):text}function boldMatches(text){return text.replace(new RegExp(escapeRegExp("!mce~match["),"g"),"<b>").replace(new RegExp(escapeRegExp("]mce~match!"),"g"),"</b>")}return icon&&this.parent().classes.add("menu-has-icons"),settings.image&&(image=" style=\"background-image: url('"+settings.image+"')\""),shortcut&&(shortcut=function(shortcut){var i,value,replace={};for(replace=global$8.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},shortcut=shortcut.split("+"),i=0;i<shortcut.length;i++)(value=replace[shortcut[i].toLowerCase()])&&(shortcut[i]=value);return shortcut.join("+")}(shortcut)),icon=prefix+"ico "+prefix+"i-"+(this.settings.icon||"none"),iconHtml="-"!==text?'<i class="'+icon+'"'+image+"></i> ":"",text=boldMatches(this.encode(markMatches(text))),url=boldMatches(this.encode(markMatches(url))),'<div id="'+id+'" class="'+this.classes+'" tabindex="-1">'+iconHtml+("-"!==text?'<span id="'+id+'-text" class="'+prefix+'text">'+text+"</span>":"")+(shortcut?'<div id="'+id+'-shortcut" class="'+prefix+'menu-shortcut">'+shortcut+"</div>":"")+(settings.menu?'<div class="'+prefix+'caret"></div>':"")+(url?'<div class="'+prefix+'menu-item-link">'+url+"</div>":"")+"</div>"},postRender:function(){var self=this,settings=self.settings,textStyle=settings.textStyle;if("function"==typeof textStyle&&(textStyle=textStyle.call(this)),textStyle){var textElm=self.getEl("text");textElm&&(textElm.setAttribute("style",textStyle),self._textStyle=textStyle)}return self.on("mouseenter click",function(e){e.control===self&&(settings.menu||"click"!==e.type?(self.showMenu(),e.aria&&self.menu.focus(!0)):(self.fire("select"),global$7.requestAnimationFrame(function(){self.parent().hideAll()})))}),self._super(),self},hover:function(){return this.parent().items().each(function(ctrl){ctrl.classes.remove("selected")}),this.classes.toggle("selected",!0),this},active:function(state){return function(ctrl,state){var textStyle=ctrl._textStyle;if(textStyle){var textElm=ctrl.getEl("text");textElm.setAttribute("style",textStyle),state&&(textElm.style.color="",textElm.style.backgroundColor="")}}(this,state),void 0!==state&&this.aria("checked",state),this._super(state)},remove:function(){this._super(),this.menu&&this.menu.remove()}}),Radio=Checkbox.extend({Defaults:{classes:"radio",role:"radio"}}),ResizeHandle=Widget.extend({renderHtml:function(){var prefix=this.classPrefix;return this.classes.add("resizehandle"),"both"===this.settings.direction&&this.classes.add("resizehandle-both"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"><i class="'+prefix+"ico "+prefix+'i-resize"></i></div>'},postRender:function(){var self=this;self._super(),self.resizeDragHelper=new DragHelper(this._id,{start:function(){self.fire("ResizeStart")},drag:function(e){"both"!==self.settings.direction&&(e.deltaX=0),self.fire("Resize",e)},stop:function(){self.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}});function createOptions(options){var strOptions="";if(options)for(var i=0;i<options.length;i++)strOptions+='<option value="'+options[i]+'">'+options[i]+"</option>";return strOptions}var SelectBox=Widget.extend({Defaults:{classes:"selectbox",role:"selectbox",options:[]},init:function(settings){var self=this;self._super(settings),self.settings.size&&(self.size=self.settings.size),self.settings.options&&(self._options=self.settings.options),self.on("keydown",function(e){var rootControl;13===e.keyCode&&(e.preventDefault(),self.parents().reverse().each(function(ctrl){if(ctrl.toJSON)return rootControl=ctrl,!1}),self.fire("submit",{data:rootControl.toJSON()}))})},options:function(state){return arguments.length?(this.state.set("options",state),this):this.state.get("options")},renderHtml:function(){var options,size="";return options=createOptions(this._options),this.size&&(size=' size = "'+this.size+'"'),'<select id="'+this._id+'" class="'+this.classes+'"'+size+">"+options+"</select>"},bindStates:function(){var self=this;return self.state.on("change:options",function(e){self.getEl().innerHTML=createOptions(e.value)}),self._super()}});function constrain(value,minVal,maxVal){return value<minVal&&(value=minVal),maxVal<value&&(value=maxVal),value}function setAriaProp(el,name,value){el.setAttribute("aria-"+name,value)}function updateSliderHandle(ctrl,value){var shortSizeName,sizeName,stylePosName,styleValue,handleEl;shortSizeName="v"===ctrl.settings.orientation?(stylePosName="top",sizeName="height","h"):(stylePosName="left",sizeName="width","w"),handleEl=ctrl.getEl("handle"),styleValue=((ctrl.layoutRect()[shortSizeName]||100)-funcs.getSize(handleEl)[sizeName])*((value-ctrl._minValue)/(ctrl._maxValue-ctrl._minValue))+"px",handleEl.style[stylePosName]=styleValue,handleEl.style.height=ctrl.layoutRect().h+"px",setAriaProp(handleEl,"valuenow",value),setAriaProp(handleEl,"valuetext",""+ctrl.settings.previewFilter(value)),setAriaProp(handleEl,"valuemin",ctrl._minValue),setAriaProp(handleEl,"valuemax",ctrl._maxValue)}var Slider=Widget.extend({init:function(settings){settings.previewFilter||(settings.previewFilter=function(value){return Math.round(100*value)/100}),this._super(settings),this.classes.add("slider"),"v"===settings.orientation&&this.classes.add("vertical"),this._minValue=$_d8bie3tijh8lz3kn.isNumber(settings.minValue)?settings.minValue:0,this._maxValue=$_d8bie3tijh8lz3kn.isNumber(settings.maxValue)?settings.maxValue:100,this._initValue=this.state.get("value")},renderHtml:function(){var id=this._id,prefix=this.classPrefix;return'<div id="'+id+'" class="'+this.classes+'"><div id="'+id+'-handle" class="'+prefix+'slider-handle" role="slider" tabindex="-1"></div></div>'},reset:function(){this.value(this._initValue).repaint()},postRender:function(){var minValue,maxValue,screenCordName,stylePosName,sizeName,shortSizeName,self=this;minValue=self._minValue,maxValue=self._maxValue,shortSizeName="v"===self.settings.orientation?(screenCordName="screenY",stylePosName="top",sizeName="height","h"):(screenCordName="screenX",stylePosName="left",sizeName="width","w"),self._super(),function(minValue,maxValue){function alter(delta){var value,min;value=self.value(),value=constrain(value=function(min,max,val){return val*(max-min)-min}(minValue,maxValue,(value+(min=minValue))/(maxValue-min)+.05*delta),minValue,maxValue),self.value(value),self.fire("dragstart",{value:value}),self.fire("drag",{value:value}),self.fire("dragend",{value:value})}self.on("keydown",function(e){switch(e.keyCode){case 37:case 38:alter(-1);break;case 39:case 40:alter(1)}})}(minValue,maxValue),function(minValue,maxValue,handleEl){var startPos,startHandlePos,maxHandlePos,handlePos,value;self._dragHelper=new DragHelper(self._id,{handle:self._id+"-handle",start:function(e){startPos=e[screenCordName],startHandlePos=parseInt(self.getEl("handle").style[stylePosName],10),maxHandlePos=(self.layoutRect()[shortSizeName]||100)-funcs.getSize(handleEl)[sizeName],self.fire("dragstart",{value:value})},drag:function(e){var delta=e[screenCordName]-startPos;handlePos=constrain(startHandlePos+delta,0,maxHandlePos),handleEl.style[stylePosName]=handlePos+"px",value=minValue+handlePos/maxHandlePos*(maxValue-minValue),self.value(value),self.tooltip().text(""+self.settings.previewFilter(value)).show().moveRel(handleEl,"bc tc"),self.fire("drag",{value:value})},stop:function(){self.tooltip().hide(),self.fire("dragend",{value:value})}})}(minValue,maxValue,self.getEl("handle"))},repaint:function(){this._super(),updateSliderHandle(this,this.value())},bindStates:function(){var self=this;return self.state.on("change:value",function(e){updateSliderHandle(self,e.value)}),self._super()}}),Spacer=Widget.extend({renderHtml:function(){return this.classes.add("spacer"),this.canFocus=!1,'<div id="'+this._id+'" class="'+this.classes+'"></div>'}}),SplitButton=MenuButton.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var mainButtonElm,menuButtonElm,elm=this.getEl(),rect=this.layoutRect();return this._super(),mainButtonElm=elm.firstChild,menuButtonElm=elm.lastChild,global$9(mainButtonElm).css({width:rect.w-funcs.getSize(menuButtonElm).width,height:rect.h-2}),global$9(menuButtonElm).css({height:rect.h-2}),this},activeMenu:function(state){global$9(this.getEl().lastChild).toggleClass(this.classPrefix+"active",state)},renderHtml:function(){var image,ariaPressed,id=this._id,prefix=this.classPrefix,icon=this.state.get("icon"),text=this.state.get("text"),settings=this.settings,textHtml="";return image=(image=settings.image)?(icon="none","string"!=typeof image&&(image=window.getSelection?image[0]:image[1])," style=\"background-image: url('"+image+"')\""):"",icon=settings.icon?prefix+"ico "+prefix+"i-"+icon:"",text&&(this.classes.add("btn-has-text"),textHtml='<span class="'+prefix+'txt">'+this.encode(text)+"</span>"),ariaPressed="boolean"==typeof settings.active?' aria-pressed="'+settings.active+'"':"",'<div id="'+id+'" class="'+this.classes+'" role="button"'+ariaPressed+' tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(icon?'<i class="'+icon+'"'+image+"></i>":"")+textHtml+'</button><button type="button" class="'+prefix+'open" hidefocus="1" tabindex="-1">'+(this._menuBtnText?(icon?" ":"")+this._menuBtnText:"")+' <i class="'+prefix+'caret"></i></button></div>'},postRender:function(){var onClickHandler=this.settings.onclick;return this.on("click",function(e){var node=e.target;if(e.control===this)for(;node;){if(e.aria&&"down"!==e.aria.key||"BUTTON"===node.nodeName&&-1===node.className.indexOf("open"))return e.stopImmediatePropagation(),void(onClickHandler&&onClickHandler.call(this,e));node=node.parentNode}}),delete this.settings.onclick,this._super()}}),StackLayout=FlowLayout.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"},isNative:function(){return!0}}),TabPanel=Panel.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(idx){var activeTabElm;this.activeTabId&&(activeTabElm=this.getEl(this.activeTabId),global$9(activeTabElm).removeClass(this.classPrefix+"active"),activeTabElm.setAttribute("aria-selected","false")),this.activeTabId="t"+idx,(activeTabElm=this.getEl("t"+idx)).setAttribute("aria-selected","true"),global$9(activeTabElm).addClass(this.classPrefix+"active"),this.items()[idx].show().fire("showtab"),this.reflow(),this.items().each(function(item,i){idx!==i&&item.hide()})},renderHtml:function(){var self=this,layout=self._layout,tabsHtml="",prefix=self.classPrefix;return self.preRender(),layout.preRender(self),self.items().each(function(ctrl,i){var id=self._id+"-t"+i;ctrl.aria("role","tabpanel"),ctrl.aria("labelledby",id),tabsHtml+='<div id="'+id+'" class="'+prefix+'tab" unselectable="on" role="tab" aria-controls="'+ctrl._id+'" aria-selected="false" tabIndex="-1">'+self.encode(ctrl.settings.title)+"</div>"}),'<div id="'+self._id+'" class="'+self.classes+'" hidefocus="1" tabindex="-1"><div id="'+self._id+'-head" class="'+prefix+'tabs" role="tablist">'+tabsHtml+'</div><div id="'+self._id+'-body" class="'+self.bodyClasses+'">'+layout.renderHtml(self)+"</div></div>"},postRender:function(){var self=this;self._super(),self.settings.activeTab=self.settings.activeTab||0,self.activateTab(self.settings.activeTab),this.on("click",function(e){var targetParent=e.target.parentNode;if(targetParent&&targetParent.id===self._id+"-head")for(var i=targetParent.childNodes.length;i--;)targetParent.childNodes[i]===e.target&&self.activateTab(i)})},initLayoutRect:function(){var rect,minW,minH;minW=(minW=funcs.getSize(this.getEl("head")).width)<0?0:minW,minH=0,this.items().each(function(item){minW=Math.max(minW,item.layoutRect().minW),minH=Math.max(minH,item.layoutRect().minH)}),this.items().each(function(ctrl){ctrl.settings.x=0,ctrl.settings.y=0,ctrl.settings.w=minW,ctrl.settings.h=minH,ctrl.layoutRect({x:0,y:0,w:minW,h:minH})});var headH=funcs.getSize(this.getEl("head")).height;return this.settings.minWidth=minW,this.settings.minHeight=minH+headH,(rect=this._super()).deltaH+=headH,rect.innerH=rect.h-rect.deltaH,rect}}),TextBox=Widget.extend({init:function(settings){var self=this;self._super(settings),self.classes.add("textbox"),settings.multiline?self.classes.add("multiline"):(self.on("keydown",function(e){var rootControl;13===e.keyCode&&(e.preventDefault(),self.parents().reverse().each(function(ctrl){if(ctrl.toJSON)return rootControl=ctrl,!1}),self.fire("submit",{data:rootControl.toJSON()}))}),self.on("keyup",function(e){self.state.set("value",e.target.value)}))},repaint:function(){var style,rect,borderBox,borderW,lastRepaintRect,borderH=0;style=this.getEl().style,rect=this._layoutRect,lastRepaintRect=this._lastRepaintRect||{};var doc=document;return!this.settings.multiline&&doc.all&&(!doc.documentMode||doc.documentMode<=8)&&(style.lineHeight=rect.h-borderH+"px"),borderW=(borderBox=this.borderBox).left+borderBox.right+8,borderH=borderBox.top+borderBox.bottom+(this.settings.multiline?8:0),rect.x!==lastRepaintRect.x&&(style.left=rect.x+"px",lastRepaintRect.x=rect.x),rect.y!==lastRepaintRect.y&&(style.top=rect.y+"px",lastRepaintRect.y=rect.y),rect.w!==lastRepaintRect.w&&(style.width=rect.w-borderW+"px",lastRepaintRect.w=rect.w),rect.h!==lastRepaintRect.h&&(style.height=rect.h-borderH+"px",lastRepaintRect.h=rect.h),this._lastRepaintRect=lastRepaintRect,this.fire("repaint",{},!1),this},renderHtml:function(){var attrs,elm,settings=this.settings;return attrs={id:this._id,hidefocus:"1"},global$2.each(["rows","spellcheck","maxLength","size","readonly","min","max","step","list","pattern","placeholder","required","multiple"],function(name){attrs[name]=settings[name]}),this.disabled()&&(attrs.disabled="disabled"),settings.subtype&&(attrs.type=settings.subtype),(elm=funcs.create(settings.multiline?"textarea":"input",attrs)).value=this.state.get("value"),elm.className=this.classes.toString(),elm.outerHTML},value:function(value){return arguments.length?(this.state.set("value",value),this):(this.state.get("rendered")&&this.state.set("value",this.getEl().value),this.state.get("value"))},postRender:function(){var self=this;self.getEl().value=self.state.get("value"),self._super(),self.$el.on("change",function(e){self.state.set("value",e.target.value),self.fire("change",e)})},bindStates:function(){var self=this;return self.state.on("change:value",function(e){self.getEl().value!==e.value&&(self.getEl().value=e.value)}),self.state.on("change:disabled",function(e){self.getEl().disabled=e.value}),self._super()},remove:function(){this.$el.off(),this._super()}}),getApi=function(){return{Selector:Selector,Collection:Collection$2,ReflowQueue:$_ef12j5u4jh8lz3nl,Control:Control$1,Factory:global$4,KeyboardNavigation:KeyboardNavigation,Container:Container,DragHelper:DragHelper,Scrollable:$_4acv48u6jh8lz3ns,Panel:Panel,Movable:$_d97gfctrjh8lz3lm,Resizable:$_8a2gtru8jh8lz3ny,FloatPanel:FloatPanel,Window:Window,MessageBox:MessageBox,Tooltip:Tooltip,Widget:Widget,Progress:Progress,Notification:Notification,Layout:Layout,AbsoluteLayout:AbsoluteLayout,Button:Button,ButtonGroup:ButtonGroup,Checkbox:Checkbox,ComboBox:ComboBox,ColorBox:ColorBox,PanelButton:PanelButton,ColorButton:ColorButton,ColorPicker:ColorPicker,Path:Path,ElementPath:ElementPath,FormItem:FormItem,Form:Form,FieldSet:FieldSet,FilePicker:FilePicker,FitLayout:FitLayout,FlexLayout:FlexLayout,FlowLayout:FlowLayout,FormatControls:$_4qdht3w4jh8lz3uo,GridLayout:GridLayout,Iframe:Iframe$1,InfoBox:InfoBox,Label:Label,Toolbar:Toolbar$1,MenuBar:MenuBar,MenuButton:MenuButton,MenuItem:MenuItem,Throbber:Throbber,Menu:Menu,ListBox:ListBox,Radio:Radio,ResizeHandle:ResizeHandle,SelectBox:SelectBox,Slider:Slider,Spacer:Spacer,SplitButton:SplitButton,StackLayout:StackLayout,TabPanel:TabPanel,TextBox:TextBox,DropZone:DropZone,BrowseButton:BrowseButton}},Api_appendTo=function(target){target.ui?global$2.each(getApi(),function(ref,key){target.ui[key]=ref}):target.ui=getApi()};global$2.each(getApi(),function(ref,key){global$4.add(key,ref)}),Api_appendTo(window.tinymce?window.tinymce:{}),global.add("modern",function(editor){return $_4qdht3w4jh8lz3uo.setup(editor),$_1os0v5syjh8lz3j9_get(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-advlist",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_2r1x1182jh8lyzqs_applyListFormat=function(editor,listName,styleValue){var cmd="UL"===listName?"InsertUnorderedList":"InsertOrderedList";editor.execCommand(cmd,!1,!1===styleValue?null:{"list-style-type":styleValue})},$_hdktl81jh8lyzqr_register=function(editor){editor.addCommand("ApplyUnorderedListStyle",function(ui,value){$_2r1x1182jh8lyzqs_applyListFormat(editor,"UL",value["list-style-type"])}),editor.addCommand("ApplyOrderedListStyle",function(ui,value){$_2r1x1182jh8lyzqs_applyListFormat(editor,"OL",value["list-style-type"])})},$_3fjj2e84jh8lyzqy_getNumberStyles=function(editor){var styles=editor.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman");return styles?styles.split(/[ ,]/):[]},$_3fjj2e84jh8lyzqy_getBulletStyles=function(editor){var styles=editor.getParam("advlist_bullet_styles","default,circle,disc,square");return styles?styles.split(/[ ,]/):[]},$_9sbytx85jh8lyzqz_isTableCellNode=function(node){return node&&/^(TH|TD)$/.test(node.nodeName)},$_9sbytx85jh8lyzqz_isListNode=function(editor){return function(node){return node&&/^(OL|UL|DL)$/.test(node.nodeName)&&function(editor,elm){return editor.$.contains(editor.getBody(),elm)}(editor,node)}},$_9sbytx85jh8lyzqz_getSelectedStyleType=function(editor){var listElm=editor.dom.getParent(editor.selection.getNode(),"ol,ul");return editor.dom.getStyle(listElm,"listStyleType")||""},$_7vq0jr86jh8lyzr1_toMenuItems=function(styles){return global$1.map(styles,function(styleValue){return{text:function(styleValue){return styleValue.replace(/\-/g," ").replace(/\b\w/g,function(chr){return chr.toUpperCase()})}(styleValue),data:"default"===styleValue?"":styleValue}})},listState=function(editor,listName){return function(e){var ctrl=e.control;editor.on("NodeChange",function(e){var tableCellIndex=function(list,predicate){for(var index=0;index<list.length;index++)if(predicate(list[index]))return index;return-1}(e.parents,$_9sbytx85jh8lyzqz_isTableCellNode),parents=-1!==tableCellIndex?e.parents.slice(0,tableCellIndex):e.parents,lists=global$1.grep(parents,$_9sbytx85jh8lyzqz_isListNode(editor));ctrl.active(0<lists.length&&lists[0].nodeName===listName)})}},addSplitButton=function(editor,id,tooltip,cmd,nodeName,styles){editor.addButton(id,{active:!1,type:"splitbutton",tooltip:tooltip,menu:$_7vq0jr86jh8lyzr1_toMenuItems(styles),onPostRender:listState(editor,nodeName),onshow:function(editor){return function(e){var listStyleType=$_9sbytx85jh8lyzqz_getSelectedStyleType(editor);e.control.items().each(function(ctrl){ctrl.active(ctrl.settings.data===listStyleType)})}}(editor),onselect:function(e){$_2r1x1182jh8lyzqs_applyListFormat(editor,nodeName,e.control.settings.data)},onclick:function(){editor.execCommand(cmd)}})},addControl=function(editor,id,tooltip,cmd,nodeName,styles){0<styles.length?addSplitButton(editor,id,tooltip,cmd,nodeName,styles):function(editor,id,tooltip,cmd,nodeName,styles){editor.addButton(id,{active:!1,type:"button",tooltip:tooltip,onPostRender:listState(editor,nodeName),onclick:function(){editor.execCommand(cmd)}})}(editor,id,tooltip,cmd,nodeName)},$_6bc80w83jh8lyzqu_register=function(editor){addControl(editor,"numlist","Numbered list","InsertOrderedList","OL",$_3fjj2e84jh8lyzqy_getNumberStyles(editor)),addControl(editor,"bullist","Bullet list","InsertUnorderedList","UL",$_3fjj2e84jh8lyzqy_getBulletStyles(editor))};global.add("advlist",function(editor){(function(editor,plugin){var plugins=editor.settings.plugins?editor.settings.plugins:"";return-1!==global$1.inArray(plugins.split(/[ ,]/),plugin)})(editor,"lists")&&($_6bc80w83jh8lyzqu_register(editor),$_hdktl81jh8lyzqr_register(editor))})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-anchor",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_3nbb0e8bjh8lyzrn_isValidId=function(id){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(id)},$_3nbb0e8bjh8lyzrn_getId=function(editor){var selectedNode=editor.selection.getNode();return"A"===selectedNode.tagName&&""===editor.dom.getAttrib(selectedNode,"href")?selectedNode.id||selectedNode.name:""},$_3nbb0e8bjh8lyzrn_insert=function(editor,id){var selectedNode=editor.selection.getNode();"A"===selectedNode.tagName&&""===editor.dom.getAttrib(selectedNode,"href")?(selectedNode.removeAttribute("name"),selectedNode.id=id,editor.undoManager.add()):(editor.focus(),editor.selection.collapse(!0),editor.execCommand("mceInsertContent",!1,editor.dom.createHTML("a",{id:id})))},$_8ripo48ajh8lyzrl_open=function(editor){var currentId=$_3nbb0e8bjh8lyzrn_getId(editor);editor.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:currentId},onsubmit:function(e){var newId=e.data.id;(function(editor,newId){return $_3nbb0e8bjh8lyzrn_isValidId(newId)?($_3nbb0e8bjh8lyzrn_insert(editor,newId),!1):(editor.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!0)})(editor,newId)&&e.preventDefault()}})},$_8icszx89jh8lyzrk_register=function(editor){editor.addCommand("mceAnchor",function(){$_8ripo48ajh8lyzrl_open(editor)})},setContentEditable=function(state){return function(nodes){for(var i=0;i<nodes.length;i++)(node=nodes[i]).attr("href")||!node.attr("id")&&!node.attr("name")||node.firstChild||nodes[i].attr("contenteditable",state);var node}},$_a3426h8cjh8lyzro_setup=function(editor){editor.on("PreInit",function(){editor.parser.addNodeFilter("a",setContentEditable("false")),editor.serializer.addNodeFilter("a",setContentEditable(null))})},$_afgepy8djh8lyzrq_register=function(editor){editor.addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),editor.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})};global.add("anchor",function(editor){$_a3426h8cjh8lyzro_setup(editor),$_8icszx89jh8lyzrk_register(editor),$_afgepy8djh8lyzrq_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-autolink",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.Env"),$_2pqfkt8ijh8lyzs9_getAutoLinkPattern=function(editor){return editor.getParam("autolink_pattern",/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i)},$_2pqfkt8ijh8lyzs9_getDefaultLinkTarget=function(editor){return editor.getParam("default_link_target","")},scopeIndex=function(container,index){if(index<0&&(index=0),3===container.nodeType){var len=container.data.length;len<index&&(index=len)}return index},setStart=function(rng,container,offset){1!==container.nodeType||container.hasChildNodes()?rng.setStart(container,scopeIndex(container,offset)):rng.setStartBefore(container)},setEnd=function(rng,container,offset){1!==container.nodeType||container.hasChildNodes()?rng.setEnd(container,scopeIndex(container,offset)):rng.setEndAfter(container)},parseCurrentLine=function(editor,endOffset,delimiter){var rng,end,start,endContainer,bookmark,text,matches,prev,len,rngText,autoLinkPattern=$_2pqfkt8ijh8lyzs9_getAutoLinkPattern(editor),defaultLinkTarget=$_2pqfkt8ijh8lyzs9_getDefaultLinkTarget(editor);if("A"!==editor.selection.getNode().tagName){if((rng=editor.selection.getRng(!0).cloneRange()).startOffset<5){if(!(prev=rng.endContainer.previousSibling)){if(!rng.endContainer.firstChild||!rng.endContainer.firstChild.nextSibling)return;prev=rng.endContainer.firstChild.nextSibling}if(len=prev.length,setStart(rng,prev,len),setEnd(rng,prev,len),rng.endOffset<5)return;end=rng.endOffset,endContainer=prev}else{if(3!==(endContainer=rng.endContainer).nodeType&&endContainer.firstChild){for(;3!==endContainer.nodeType&&endContainer.firstChild;)endContainer=endContainer.firstChild;3===endContainer.nodeType&&(setStart(rng,endContainer,0),setEnd(rng,endContainer,endContainer.nodeValue.length))}end=1===rng.endOffset?2:rng.endOffset-1-endOffset}for(start=end;setStart(rng,endContainer,2<=end?end-2:0),setEnd(rng,endContainer,1<=end?end-1:0),end-=1," "!==(rngText=rng.toString())&&""!==rngText&&160!==rngText.charCodeAt(0)&&0<=end-2&&rngText!==delimiter;);!function(rangeString,delimiter){return rangeString===delimiter||" "===rangeString||160===rangeString.charCodeAt(0)}(rng.toString(),delimiter)?(0===rng.startOffset?setStart(rng,endContainer,0):setStart(rng,endContainer,end),setEnd(rng,endContainer,start)):(setStart(rng,endContainer,end),setEnd(rng,endContainer,start),end+=1),"."===(text=rng.toString()).charAt(text.length-1)&&setEnd(rng,endContainer,start-1),(matches=(text=rng.toString().trim()).match(autoLinkPattern))&&("www."===matches[1]?matches[1]="http://www.":/@$/.test(matches[1])&&!/^mailto:/.test(matches[1])&&(matches[1]="mailto:"+matches[1]),bookmark=editor.selection.getBookmark(),editor.selection.setRng(rng),editor.execCommand("createlink",!1,matches[1]+matches[2]),defaultLinkTarget&&editor.dom.setAttrib(editor.selection.getNode(),"target",defaultLinkTarget),editor.selection.moveToBookmark(bookmark),editor.nodeChanged())}},$_3xb5x88gjh8lyzs3_setup=function(editor){var autoUrlDetectState;editor.on("keydown",function(e){if(13===e.keyCode)return function(editor){parseCurrentLine(editor,-1,"")}(editor)}),global$1.ie?editor.on("focus",function(){if(!autoUrlDetectState){autoUrlDetectState=!0;try{editor.execCommand("AutoUrlDetect",!1,!0)}catch(ex){}}}):(editor.on("keypress",function(e){if(41===e.keyCode)return function(editor){parseCurrentLine(editor,-1,"(")}(editor)}),editor.on("keyup",function(e){if(32===e.keyCode)return function(editor){parseCurrentLine(editor,0,"")}(editor)}))};global.add("autolink",function(editor){$_3xb5x88gjh8lyzs3_setup(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-autoresize",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.Env"),global$2=tinymce.util.Tools.resolve("tinymce.util.Delay"),$_gg12688qjh8lyzsz_getAutoResizeMinHeight=function(editor){return parseInt(editor.getParam("autoresize_min_height",editor.getElement().offsetHeight),10)},$_gg12688qjh8lyzsz_getAutoResizeMaxHeight=function(editor){return parseInt(editor.getParam("autoresize_max_height",0),10)},$_gg12688qjh8lyzsz_getAutoResizeOverflowPadding=function(editor){return editor.getParam("autoresize_overflow_padding",1)},$_gg12688qjh8lyzsz_getAutoResizeBottomMargin=function(editor){return editor.getParam("autoresize_bottom_margin",50)},$_gg12688qjh8lyzsz_shouldAutoResizeOnInit=function(editor){return editor.getParam("autoresize_on_init",!0)},wait=function(editor,oldSize,times,interval,callback){global$2.setEditorTimeout(editor,function(){resize(editor,oldSize),times--?wait(editor,oldSize,times,interval,callback):callback&&callback()},interval)},toggleScrolling=function(editor,state){var body=editor.getBody();body&&(body.style.overflowY=state?"":"hidden",state||(body.scrollTop=0))},resize=function(editor,oldSize){var deltaSize,doc,body,resizeHeight,myHeight,marginTop,marginBottom,paddingTop,paddingBottom,borderTop,borderBottom,dom=editor.dom;if(doc=editor.getDoc())if(function(editor){return editor.plugins.fullscreen&&editor.plugins.fullscreen.isFullscreen()}(editor))toggleScrolling(editor,!0);else{body=doc.body,resizeHeight=$_gg12688qjh8lyzsz_getAutoResizeMinHeight(editor),marginTop=dom.getStyle(body,"margin-top",!0),marginBottom=dom.getStyle(body,"margin-bottom",!0),paddingTop=dom.getStyle(body,"padding-top",!0),paddingBottom=dom.getStyle(body,"padding-bottom",!0),borderTop=dom.getStyle(body,"border-top-width",!0),borderBottom=dom.getStyle(body,"border-bottom-width",!0),myHeight=body.offsetHeight+parseInt(marginTop,10)+parseInt(marginBottom,10)+parseInt(paddingTop,10)+parseInt(paddingBottom,10)+parseInt(borderTop,10)+parseInt(borderBottom,10),(isNaN(myHeight)||myHeight<=0)&&(myHeight=global$1.ie?body.scrollHeight:global$1.webkit&&0===body.clientHeight?0:body.offsetHeight),myHeight>$_gg12688qjh8lyzsz_getAutoResizeMinHeight(editor)&&(resizeHeight=myHeight);var maxHeight=$_gg12688qjh8lyzsz_getAutoResizeMaxHeight(editor);maxHeight&&maxHeight<myHeight?(resizeHeight=maxHeight,toggleScrolling(editor,!0)):toggleScrolling(editor,!1),resizeHeight!==oldSize.get()&&(deltaSize=resizeHeight-oldSize.get(),dom.setStyle(editor.iframeElement,"height",resizeHeight+"px"),oldSize.set(resizeHeight),global$1.webkit&&deltaSize<0&&resize(editor,oldSize))}},$_6ewswv8njh8lyzsu={setup:function(editor,oldSize){editor.on("init",function(){var overflowPadding,bottomMargin,dom=editor.dom;overflowPadding=$_gg12688qjh8lyzsz_getAutoResizeOverflowPadding(editor),bottomMargin=$_gg12688qjh8lyzsz_getAutoResizeBottomMargin(editor),!1!==overflowPadding&&dom.setStyles(editor.getBody(),{paddingLeft:overflowPadding,paddingRight:overflowPadding}),!1!==bottomMargin&&dom.setStyles(editor.getBody(),{paddingBottom:bottomMargin})}),editor.on("nodechange setcontent keyup FullscreenStateChanged",function(e){resize(editor,oldSize)}),$_gg12688qjh8lyzsz_shouldAutoResizeOnInit(editor)&&editor.on("init",function(){wait(editor,oldSize,20,100,function(){wait(editor,oldSize,5,1e3)})})},resize:resize},$_a778x48mjh8lyzss_register=function(editor,oldSize){editor.addCommand("mceAutoResize",function(){$_6ewswv8njh8lyzsu.resize(editor,oldSize)})};global.add("autoresize",function(editor){if(!editor.inline){var oldSize=Cell(0);$_a778x48mjh8lyzss_register(editor,oldSize),$_6ewswv8njh8lyzsu.setup(editor,oldSize)}})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-autosave",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_4ncezg8yjh8lyzts_fireRestoreDraft=function(editor){return editor.fire("RestoreDraft")},$_4ncezg8yjh8lyzts_fireStoreDraft=function(editor){return editor.fire("StoreDraft")},$_4ncezg8yjh8lyzts_fireRemoveDraft=function(editor){return editor.fire("RemoveDraft")},$_cmmlud90jh8lyztv_parse=function(time,defaultTime){return((time=/^(\d+)([ms]?)$/.exec(""+(time||defaultTime)))[2]?{s:1e3,m:6e4}[time[2]]:1)*parseInt(time,10)},$_55sjs08zjh8lyztt_shouldAskBeforeUnload=function(editor){return editor.getParam("autosave_ask_before_unload",!0)},$_55sjs08zjh8lyztt_getAutoSavePrefix=function(editor){var prefix=editor.getParam("autosave_prefix","tinymce-autosave-{path}{query}{hash}-{id}-");return prefix=(prefix=(prefix=(prefix=prefix.replace(/\{path\}/g,document.location.pathname)).replace(/\{query\}/g,document.location.search)).replace(/\{hash\}/g,document.location.hash)).replace(/\{id\}/g,editor.id)},$_55sjs08zjh8lyztt_getAutoSaveInterval=function(editor){return $_cmmlud90jh8lyztv_parse(editor.settings.autosave_interval,"30s")},$_55sjs08zjh8lyztt_getAutoSaveRetention=function(editor){return $_cmmlud90jh8lyztv_parse(editor.settings.autosave_retention,"20m")},isEmpty=function(editor,html){var forcedRootBlockName=editor.settings.forced_root_block;return""===(html=global$2.trim(void 0===html?editor.getBody().innerHTML:html))||new RegExp("^<"+forcedRootBlockName+"[^>]*>(( |&nbsp;|[ \t]|<br[^>]*>)+?|)</"+forcedRootBlockName+">|<br>$","i").test(html)},hasDraft=function(editor){var time=parseInt(global$1.getItem($_55sjs08zjh8lyztt_getAutoSavePrefix(editor)+"time"),10)||0;return!((new Date).getTime()-time>$_55sjs08zjh8lyztt_getAutoSaveRetention(editor)&&(removeDraft(editor,!1),1))},removeDraft=function(editor,fire){var prefix=$_55sjs08zjh8lyztt_getAutoSavePrefix(editor);global$1.removeItem(prefix+"draft"),global$1.removeItem(prefix+"time"),!1!==fire&&$_4ncezg8yjh8lyzts_fireRemoveDraft(editor)},storeDraft=function(editor){var prefix=$_55sjs08zjh8lyztt_getAutoSavePrefix(editor);!isEmpty(editor)&&editor.isDirty()&&(global$1.setItem(prefix+"draft",editor.getContent({format:"raw",no_events:!0})),global$1.setItem(prefix+"time",(new Date).getTime().toString()),$_4ncezg8yjh8lyzts_fireStoreDraft(editor))},restoreDraft=function(editor){var prefix=$_55sjs08zjh8lyztt_getAutoSavePrefix(editor);hasDraft(editor)&&(editor.setContent(global$1.getItem(prefix+"draft"),{format:"raw"}),$_4ncezg8yjh8lyzts_fireRestoreDraft(editor))},$_fa8c2v8vjh8lyzto={isEmpty:isEmpty,hasDraft:hasDraft,removeDraft:removeDraft,storeDraft:storeDraft,restoreDraft:restoreDraft,startStoreDraft:function(editor,started){var interval=$_55sjs08zjh8lyztt_getAutoSaveInterval(editor);started.get()||(setInterval(function(){editor.removed||storeDraft(editor)},interval),started.set(!0))},restoreLastDraft:function(editor){editor.undoManager.transact(function(){restoreDraft(editor),removeDraft(editor)}),editor.focus()}},curry=function(f,editor){return function(){var args=Array.prototype.slice.call(arguments);return f.apply(null,[editor].concat(args))}},$_7d5i5z8ujh8lyztn_get=function(editor){return{hasDraft:curry($_fa8c2v8vjh8lyzto.hasDraft,editor),storeDraft:curry($_fa8c2v8vjh8lyzto.storeDraft,editor),restoreDraft:curry($_fa8c2v8vjh8lyzto.restoreDraft,editor),removeDraft:curry($_fa8c2v8vjh8lyzto.removeDraft,editor),isEmpty:curry($_fa8c2v8vjh8lyzto.isEmpty,editor)}},global$3=tinymce.util.Tools.resolve("tinymce.EditorManager");global$3._beforeUnloadHandler=function(){var msg;return global$2.each(global$3.get(),function(editor){editor.plugins.autosave&&editor.plugins.autosave.storeDraft(),!msg&&editor.isDirty()&&$_55sjs08zjh8lyztt_shouldAskBeforeUnload(editor)&&(msg=editor.translate("You have unsaved changes are you sure you want to navigate away?"))}),msg};var $_cxjwbi91jh8lyztw_setup=function(editor){window.onbeforeunload=global$3._beforeUnloadHandler},postRender=function(editor,started){return function(e){var ctrl=e.control;ctrl.disabled(!$_fa8c2v8vjh8lyzto.hasDraft(editor)),editor.on("StoreDraft RestoreDraft RemoveDraft",function(){ctrl.disabled(!$_fa8c2v8vjh8lyzto.hasDraft(editor))}),$_fa8c2v8vjh8lyzto.startStoreDraft(editor,started)}},$_dic4wy93jh8lyzty_register=function(editor,started){editor.addButton("restoredraft",{title:"Restore last draft",onclick:function(){$_fa8c2v8vjh8lyzto.restoreLastDraft(editor)},onPostRender:postRender(editor,started)}),editor.addMenuItem("restoredraft",{text:"Restore last draft",onclick:function(){$_fa8c2v8vjh8lyzto.restoreLastDraft(editor)},onPostRender:postRender(editor,started),context:"file"})};global.add("autosave",function(editor){var started=Cell(!1);return $_cxjwbi91jh8lyztw_setup(editor),$_dic4wy93jh8lyzty_register(editor,started),$_7d5i5z8ujh8lyztn_get(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-bbcode",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_bryy4596jh8lyzuk_html2bbcode=function(s){s=global$1.trim(s);var rep=function(re,str){s=s.replace(re,str)};return rep(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),rep(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),rep(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),rep(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),rep(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),rep(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),rep(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),rep(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),rep(/<font>(.*?)<\/font>/gi,"$1"),rep(/<img.*?src=\"(.*?)\".*?\/>/gi,"[img]$1[/img]"),rep(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),rep(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),rep(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),rep(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),rep(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),rep(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),rep(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),rep(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),rep(/<\/(strong|b)>/gi,"[/b]"),rep(/<(strong|b)>/gi,"[b]"),rep(/<\/(em|i)>/gi,"[/i]"),rep(/<(em|i)>/gi,"[i]"),rep(/<\/u>/gi,"[/u]"),rep(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),rep(/<u>/gi,"[u]"),rep(/<blockquote[^>]*>/gi,"[quote]"),rep(/<\/blockquote>/gi,"[/quote]"),rep(/<br \/>/gi,"\n"),rep(/<br\/>/gi,"\n"),rep(/<br>/gi,"\n"),rep(/<p>/gi,""),rep(/<\/p>/gi,"\n"),rep(/&nbsp;|\u00a0/gi," "),rep(/&quot;/gi,'"'),rep(/&lt;/gi,"<"),rep(/&gt;/gi,">"),rep(/&amp;/gi,"&"),s},$_bryy4596jh8lyzuk_bbcode2html=function(s){s=global$1.trim(s);var rep=function(re,str){s=s.replace(re,str)};return rep(/\n/gi,"<br />"),rep(/\[b\]/gi,"<strong>"),rep(/\[\/b\]/gi,"</strong>"),rep(/\[i\]/gi,"<em>"),rep(/\[\/i\]/gi,"</em>"),rep(/\[u\]/gi,"<u>"),rep(/\[\/u\]/gi,"</u>"),rep(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),rep(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),rep(/\[img\](.*?)\[\/img\]/gi,'<img src="$1" />'),rep(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),rep(/\[code\](.*?)\[\/code\]/gi,'<span class="codeStyle">$1</span>&nbsp;'),rep(/\[quote.*?\](.*?)\[\/quote\]/gi,'<span class="quoteStyle">$1</span>&nbsp;'),s};global.add("bbcode",function(){return{init:function(editor){editor.on("beforeSetContent",function(e){e.content=$_bryy4596jh8lyzuk_bbcode2html(e.content)}),editor.on("postProcess",function(e){e.set&&(e.content=$_bryy4596jh8lyzuk_bbcode2html(e.content)),e.get&&(e.content=$_bryy4596jh8lyzuk_html2bbcode(e.content))})}}})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-charmap",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_ac4my89cjh8lyzv0_fireInsertCustomChar=function(editor,chr){return editor.fire("insertCustomChar",{chr:chr})},$_dd5ogr9bjh8lyzv0_insertChar=function(editor,chr){var evtChr=$_ac4my89cjh8lyzv0_fireInsertCustomChar(editor,chr).chr;editor.execCommand("mceInsertContent",!1,evtChr)},global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_a2f4bk9fjh8lyzvf_getCharMap=function(editor){return editor.settings.charmap},$_a2f4bk9fjh8lyzvf_getCharMapAppend=function(editor){return editor.settings.charmap_append},isArray=global$1.isArray,getCharsFromSetting=function(settingValue){return isArray(settingValue)?[].concat((charmap=settingValue,global$1.grep(charmap,function(item){return isArray(item)&&2===item.length}))):"function"==typeof settingValue?settingValue():[];var charmap},$_1gjkpm9djh8lyzv2_getCharMap=function(editor){return function(editor,charmap){var userCharMap=$_a2f4bk9fjh8lyzvf_getCharMap(editor);userCharMap&&(charmap=getCharsFromSetting(userCharMap));var userCharMapAppend=$_a2f4bk9fjh8lyzvf_getCharMapAppend(editor);return userCharMapAppend?[].concat(charmap).concat(getCharsFromSetting(userCharMapAppend)):charmap}(editor,[["160","no-break space"],["173","soft hyphen"],["34","quotation mark"],["162","cent sign"],["8364","euro sign"],["163","pound sign"],["165","yen sign"],["169","copyright sign"],["174","registered sign"],["8482","trade mark sign"],["8240","per mille sign"],["181","micro sign"],["183","middle dot"],["8226","bullet"],["8230","three dot leader"],["8242","minutes / feet"],["8243","seconds / inches"],["167","section sign"],["182","paragraph sign"],["223","sharp s / ess-zed"],["8249","single left-pointing angle quotation mark"],["8250","single right-pointing angle quotation mark"],["171","left pointing guillemet"],["187","right pointing guillemet"],["8216","left single quotation mark"],["8217","right single quotation mark"],["8220","left double quotation mark"],["8221","right double quotation mark"],["8218","single low-9 quotation mark"],["8222","double low-9 quotation mark"],["60","less-than sign"],["62","greater-than sign"],["8804","less-than or equal to"],["8805","greater-than or equal to"],["8211","en dash"],["8212","em dash"],["175","macron"],["8254","overline"],["164","currency sign"],["166","broken bar"],["168","diaeresis"],["161","inverted exclamation mark"],["191","turned question mark"],["710","circumflex accent"],["732","small tilde"],["176","degree sign"],["8722","minus sign"],["177","plus-minus sign"],["247","division sign"],["8260","fraction slash"],["215","multiplication sign"],["185","superscript one"],["178","superscript two"],["179","superscript three"],["188","fraction one quarter"],["189","fraction one half"],["190","fraction three quarters"],["402","function / florin"],["8747","integral"],["8721","n-ary sumation"],["8734","infinity"],["8730","square root"],["8764","similar to"],["8773","approximately equal to"],["8776","almost equal to"],["8800","not equal to"],["8801","identical to"],["8712","element of"],["8713","not an element of"],["8715","contains as member"],["8719","n-ary product"],["8743","logical and"],["8744","logical or"],["172","not sign"],["8745","intersection"],["8746","union"],["8706","partial differential"],["8704","for all"],["8707","there exists"],["8709","diameter"],["8711","backward difference"],["8727","asterisk operator"],["8733","proportional to"],["8736","angle"],["180","acute accent"],["184","cedilla"],["170","feminine ordinal indicator"],["186","masculine ordinal indicator"],["8224","dagger"],["8225","double dagger"],["192","A - grave"],["193","A - acute"],["194","A - circumflex"],["195","A - tilde"],["196","A - diaeresis"],["197","A - ring above"],["256","A - macron"],["198","ligature AE"],["199","C - cedilla"],["200","E - grave"],["201","E - acute"],["202","E - circumflex"],["203","E - diaeresis"],["274","E - macron"],["204","I - grave"],["205","I - acute"],["206","I - circumflex"],["207","I - diaeresis"],["298","I - macron"],["208","ETH"],["209","N - tilde"],["210","O - grave"],["211","O - acute"],["212","O - circumflex"],["213","O - tilde"],["214","O - diaeresis"],["216","O - slash"],["332","O - macron"],["338","ligature OE"],["352","S - caron"],["217","U - grave"],["218","U - acute"],["219","U - circumflex"],["220","U - diaeresis"],["362","U - macron"],["221","Y - acute"],["376","Y - diaeresis"],["562","Y - macron"],["222","THORN"],["224","a - grave"],["225","a - acute"],["226","a - circumflex"],["227","a - tilde"],["228","a - diaeresis"],["229","a - ring above"],["257","a - macron"],["230","ligature ae"],["231","c - cedilla"],["232","e - grave"],["233","e - acute"],["234","e - circumflex"],["235","e - diaeresis"],["275","e - macron"],["236","i - grave"],["237","i - acute"],["238","i - circumflex"],["239","i - diaeresis"],["299","i - macron"],["240","eth"],["241","n - tilde"],["242","o - grave"],["243","o - acute"],["244","o - circumflex"],["245","o - tilde"],["246","o - diaeresis"],["248","o slash"],["333","o macron"],["339","ligature oe"],["353","s - caron"],["249","u - grave"],["250","u - acute"],["251","u - circumflex"],["252","u - diaeresis"],["363","u - macron"],["253","y - acute"],["254","thorn"],["255","y - diaeresis"],["563","y - macron"],["913","Alpha"],["914","Beta"],["915","Gamma"],["916","Delta"],["917","Epsilon"],["918","Zeta"],["919","Eta"],["920","Theta"],["921","Iota"],["922","Kappa"],["923","Lambda"],["924","Mu"],["925","Nu"],["926","Xi"],["927","Omicron"],["928","Pi"],["929","Rho"],["931","Sigma"],["932","Tau"],["933","Upsilon"],["934","Phi"],["935","Chi"],["936","Psi"],["937","Omega"],["945","alpha"],["946","beta"],["947","gamma"],["948","delta"],["949","epsilon"],["950","zeta"],["951","eta"],["952","theta"],["953","iota"],["954","kappa"],["955","lambda"],["956","mu"],["957","nu"],["958","xi"],["959","omicron"],["960","pi"],["961","rho"],["962","final sigma"],["963","sigma"],["964","tau"],["965","upsilon"],["966","phi"],["967","chi"],["968","psi"],["969","omega"],["8501","alef symbol"],["982","pi symbol"],["8476","real part symbol"],["978","upsilon - hook symbol"],["8472","Weierstrass p"],["8465","imaginary part"],["8592","leftwards arrow"],["8593","upwards arrow"],["8594","rightwards arrow"],["8595","downwards arrow"],["8596","left right arrow"],["8629","carriage return"],["8656","leftwards double arrow"],["8657","upwards double arrow"],["8658","rightwards double arrow"],["8659","downwards double arrow"],["8660","left right double arrow"],["8756","therefore"],["8834","subset of"],["8835","superset of"],["8836","not a subset of"],["8838","subset of or equal to"],["8839","superset of or equal to"],["8853","circled plus"],["8855","circled times"],["8869","perpendicular"],["8901","dot operator"],["8968","left ceiling"],["8969","right ceiling"],["8970","left floor"],["8971","right floor"],["9001","left-pointing angle bracket"],["9002","right-pointing angle bracket"],["9674","lozenge"],["9824","black spade suit"],["9827","black club suit"],["9829","black heart suit"],["9830","black diamond suit"],["8194","en space"],["8195","em space"],["8201","thin space"],["8204","zero width non-joiner"],["8205","zero width joiner"],["8206","left-to-right mark"],["8207","right-to-left mark"]])},$_bms9m09ajh8lyzuy_get=function(editor){return{getCharMap:function(){return $_1gjkpm9djh8lyzv2_getCharMap(editor)},insertChar:function(chr){$_dd5ogr9bjh8lyzv0_insertChar(editor,chr)}}},$_a7xe5b9ijh8lyzvk_getHtml=function(charmap){var gridHtml,x,y,width=Math.min(charmap.length,25),height=Math.ceil(charmap.length/width);for(gridHtml='<table role="presentation" cellspacing="0" class="mce-charmap"><tbody>',y=0;y<height;y++){for(gridHtml+="<tr>",x=0;x<width;x++){var index=y*width+x;if(index<charmap.length){var chr=charmap[index],charCode=parseInt(chr[0],10),chrText=chr?String.fromCharCode(charCode):"&nbsp;";gridHtml+='<td title="'+chr[1]+'"><div tabindex="-1" title="'+chr[1]+'" role="button" data-chr="'+charCode+'">'+chrText+"</div></td>"}else gridHtml+="<td />"}gridHtml+="</tr>"}return gridHtml+="</tbody></table>"},getParentTd=function(elm){for(;elm;){if("TD"===elm.nodeName)return elm;elm=elm.parentNode}},$_5dcojo9hjh8lyzvh_open=function(editor){var win,charMapPanel={type:"container",html:$_a7xe5b9ijh8lyzvk_getHtml($_1gjkpm9djh8lyzv2_getCharMap(editor)),onclick:function(e){var target=e.target;if(/^(TD|DIV)$/.test(target.nodeName)){var charDiv=getParentTd(target).firstChild;if(charDiv&&charDiv.hasAttribute("data-chr")){var charCodeString=charDiv.getAttribute("data-chr"),charCode=parseInt(charCodeString,10);isNaN(charCode)||$_dd5ogr9bjh8lyzv0_insertChar(editor,String.fromCharCode(charCode)),e.ctrlKey||win.close()}}},onmouseover:function(e){var td=getParentTd(e.target);td&&td.firstChild?(win.find("#preview").text(td.firstChild.firstChild.data),win.find("#previewTitle").text(td.title)):(win.find("#preview").text(" "),win.find("#previewTitle").text(" "))}};win=editor.windowManager.open({title:"Special character",spacing:10,padding:10,items:[charMapPanel,{type:"container",layout:"flex",direction:"column",align:"center",spacing:5,minWidth:160,minHeight:160,items:[{type:"label",name:"preview",text:" ",style:"font-size: 40px; text-align: center",border:1,minWidth:140,minHeight:80},{type:"spacer",minHeight:20},{type:"label",name:"previewTitle",text:" ",style:"white-space: pre-wrap;",border:1,minWidth:140}]}],buttons:[{text:"Close",onclick:function(){win.close()}}]})},$_ce5y9z9gjh8lyzvg_register=function(editor){editor.addCommand("mceShowCharmap",function(){$_5dcojo9hjh8lyzvh_open(editor)})},$_381q489jjh8lyzvl_register=function(editor){editor.addButton("charmap",{icon:"charmap",tooltip:"Special character",cmd:"mceShowCharmap"}),editor.addMenuItem("charmap",{icon:"charmap",text:"Special character",cmd:"mceShowCharmap",context:"insert"})};global.add("charmap",function(editor){return $_ce5y9z9gjh8lyzvg_register(editor),$_381q489jjh8lyzvl_register(editor),$_bms9m09ajh8lyzuy_get(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-code",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$_co65cu9ojh8lyzwe_getMinWidth=function(editor){return editor.getParam("code_dialog_width",600)},$_co65cu9ojh8lyzwe_getMinHeight=function(editor){return editor.getParam("code_dialog_height",Math.min(global$1.DOM.getViewPort().h-200,500))},$_foko8h9qjh8lyzwf_setContent=function(editor,html){editor.focus(),editor.undoManager.transact(function(){editor.setContent(html)}),editor.selection.setCursorLocation(),editor.nodeChanged()},$_foko8h9qjh8lyzwf_getContent=function(editor){return editor.getContent({source_view:!0})},$_e52w2l9njh8lyzwc_open=function(editor){var minWidth=$_co65cu9ojh8lyzwe_getMinWidth(editor),minHeight=$_co65cu9ojh8lyzwe_getMinHeight(editor);editor.windowManager.open({title:"Source code",body:{type:"textbox",name:"code",multiline:!0,minWidth:minWidth,minHeight:minHeight,spellcheck:!1,style:"direction: ltr; text-align: left"},onSubmit:function(e){$_foko8h9qjh8lyzwf_setContent(editor,e.data.code)}}).find("#code").value($_foko8h9qjh8lyzwf_getContent(editor))},$_curgce9mjh8lyzwb_register=function(editor){editor.addCommand("mceCodeEditor",function(){$_e52w2l9njh8lyzwc_open(editor)})},$_y8a369rjh8lyzwg_register=function(editor){editor.addButton("code",{icon:"code",tooltip:"Source code",onclick:function(){$_e52w2l9njh8lyzwc_open(editor)}}),editor.addMenuItem("code",{icon:"code",text:"Source code",onclick:function(){$_e52w2l9njh8lyzwc_open(editor)}})};global.add("code",function(editor){return $_curgce9mjh8lyzwb_register(editor),$_y8a369rjh8lyzwg_register(editor),{}})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-colorpicker",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Color"),showPreview=function(win,hexColor){win.find("#preview")[0].getEl().style.background=hexColor},setColor=function(win,value){var color=global$1(value),rgb=color.toRgb();win.fromJSON({r:rgb.r,g:rgb.g,b:rgb.b,hex:color.toHex().substr(1)}),showPreview(win,color.toHex())},$_5hgtbua8jh8lyzzp_open=function(editor,callback,value){var win=editor.windowManager.open({title:"Color",items:{type:"container",layout:"flex",direction:"row",align:"stretch",padding:5,spacing:10,items:[{type:"colorpicker",value:value,onchange:function(){var rgb=this.rgb();win&&(win.find("#r").value(rgb.r),win.find("#g").value(rgb.g),win.find("#b").value(rgb.b),win.find("#hex").value(this.value().substr(1)),showPreview(win,this.value()))}},{type:"form",padding:0,labelGap:5,defaults:{type:"textbox",size:7,value:"0",flex:1,spellcheck:!1,onchange:function(){var name,value,colorPickerCtrl=win.find("colorpicker")[0];if(name=this.name(),value=this.value(),"hex"===name)return setColor(win,value="#"+value),void colorPickerCtrl.value(value);value={r:win.find("#r").value(),g:win.find("#g").value(),b:win.find("#b").value()},colorPickerCtrl.value(value),setColor(win,value)}},items:[{name:"r",label:"R",autofocus:1},{name:"g",label:"G"},{name:"b",label:"B"},{name:"hex",label:"#",value:"000000"},{name:"preview",type:"container",border:1}]}]},onSubmit:function(){callback("#"+win.toJSON().hex)}});setColor(win,value)};global.add("colorpicker",function(editor){editor.settings.color_picker_callback||(editor.settings.color_picker_callback=function(callback,value){$_5hgtbua8jh8lyzzp_open(editor,callback,value)})})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-contextmenu",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_c2oibgadjh8lz004_get=function(visibleState){return{isContextMenuVisible:function(){return visibleState.get()}}},$_gduzdnafjh8lz006_shouldNeverUseNative=function(editor){return editor.settings.contextmenu_never_use_native},$_gduzdnafjh8lz006_getContextMenu=function(editor){return editor.getParam("contextmenu","link openlink image inserttable | cell row column deletetable")},global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),getUiContainer=function(editor){return global$1.DOM.select(editor.settings.ui_container)[0]},nu=function(x,y){return{x:x,y:y}},transpose=function(pos,dx,dy){return nu(pos.x+dx,pos.y+dy)},transposeUiContainer=function(element,pos){if(element&&"static"!==global$1.DOM.getStyle(element,"position",!0)){var containerPos=global$1.DOM.getPos(element),dx=containerPos.x-element.scrollLeft,dy=containerPos.y-element.scrollTop;return transpose(pos,-dx,-dy)}return transpose(pos,0,0)},$_712j2vagjh8lz007_getPos=function(editor,e){if(editor.inline)return transposeUiContainer(getUiContainer(editor),function(e){return nu(e.pageX,e.pageY)}(e));var element,pos,containerPos,iframePos=(element=editor.getContentAreaContainer(),pos=function(e){return nu(e.clientX,e.clientY)}(e),containerPos=global$1.DOM.getPos(element),transpose(pos,containerPos.x,containerPos.y));return transposeUiContainer(getUiContainer(editor),iframePos)},global$2=tinymce.util.Tools.resolve("tinymce.ui.Factory"),global$3=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_6to3u5ajjh8lz00c_show=function(editor,pos,visibleState,menu){null===menu.get()?menu.set(function(editor,visibleState){var menu,contextmenu,items=[];contextmenu=$_gduzdnafjh8lz006_getContextMenu(editor),global$3.each(contextmenu.split(/[ ,]/),function(name){var item=editor.menuItems[name];"|"===name&&(item={text:name}),item&&(item.shortcut="",items.push(item))});for(var i=0;i<items.length;i++)"|"===items[i].text&&(0!==i&&i!==items.length-1||items.splice(i,1));return(menu=global$2.create("menu",{items:items,context:"contextmenu",classes:"contextmenu"})).uiContainer=getUiContainer(editor),menu.renderTo(getUiContainer(editor)),menu.on("hide",function(e){e.control===this&&visibleState.set(!1)}),editor.on("remove",function(){menu.remove(),menu=null}),menu}(editor,visibleState)):menu.get().show(),menu.get().moveTo(pos.x,pos.y),visibleState.set(!0)},$_6rkqhnaejh8lz005_setup=function(editor,visibleState,menu){editor.on("contextmenu",function(e){(function(editor,e){return e.ctrlKey&&!$_gduzdnafjh8lz006_shouldNeverUseNative(editor)})(editor,e)||(e.preventDefault(),$_6to3u5ajjh8lz00c_show(editor,$_712j2vagjh8lz007_getPos(editor,e),visibleState,menu))})};global.add("contextmenu",function(editor){var menu=Cell(null),visibleState=Cell(!1);return $_6rkqhnaejh8lz005_setup(editor,visibleState,menu),$_c2oibgadjh8lz004_get(visibleState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-directionality",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_805jwcapjh8lz00w_setDir=function(editor,dir){var curDir,dom=editor.dom,blocks=editor.selection.getSelectedBlocks();blocks.length&&(curDir=dom.getAttrib(blocks[0],"dir"),global$1.each(blocks,function(block){dom.getParent(block.parentNode,'*[dir="'+dir+'"]',dom.getRoot())||dom.setAttrib(block,"dir",curDir!==dir?dir:null)}),editor.nodeChanged())},$_bg4nrvaojh8lz00v_register=function(editor){editor.addCommand("mceDirectionLTR",function(){$_805jwcapjh8lz00w_setDir(editor,"ltr")}),editor.addCommand("mceDirectionRTL",function(){$_805jwcapjh8lz00w_setDir(editor,"rtl")})},generateSelector=function(dir){var selector=[];return global$1.each("h1 h2 h3 h4 h5 h6 div p".split(" "),function(name){selector.push(name+"[dir="+dir+"]")}),selector.join(",")},$_gcdqcharjh8lz015_register=function(editor){editor.addButton("ltr",{title:"Left to right",cmd:"mceDirectionLTR",stateSelector:generateSelector("ltr")}),editor.addButton("rtl",{title:"Right to left",cmd:"mceDirectionRTL",stateSelector:generateSelector("rtl")})};global.add("directionality",function(editor){$_bg4nrvaojh8lz00v_register(editor),$_gcdqcharjh8lz015_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-emoticons",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),emoticons=[["cool","cry","embarassed","foot-in-mouth"],["frown","innocent","kiss","laughing"],["money-mouth","sealed","smile","surprised"],["tongue-out","undecided","wink","yell"]],$_1r8x6javjh8lz01h_getHtml=function(pluginUrl){var emoticonsHtml;return emoticonsHtml='<table role="list" class="mce-grid">',global$1.each(emoticons,function(row){emoticonsHtml+="<tr>",global$1.each(row,function(icon){var emoticonUrl=pluginUrl+"/img/smiley-"+icon+".gif";emoticonsHtml+='<td><a href="#" data-mce-url="'+emoticonUrl+'" data-mce-alt="'+icon+'" tabindex="-1" role="option" aria-label="'+icon+'"><img src="'+emoticonUrl+'" style="width: 18px; height: 18px" role="presentation" /></a></td>'}),emoticonsHtml+="</tr>"}),emoticonsHtml+="</table>"},$_eu4hs8aujh8lz01e_register=function(editor,pluginUrl){var panelHtml=$_1r8x6javjh8lz01h_getHtml(pluginUrl);editor.addButton("emoticons",{type:"panelbutton",panel:{role:"application",autohide:!0,html:panelHtml,onclick:function(e){var linkElm=editor.dom.getParent(e.target,"a");linkElm&&(function(editor,src,alt){editor.insertContent(editor.dom.createHTML("img",{src:src,alt:alt}))}(editor,linkElm.getAttribute("data-mce-url"),linkElm.getAttribute("data-mce-alt")),this.hide())}},tooltip:"Emoticons"})};global.add("emoticons",function(editor,pluginUrl){$_eu4hs8aujh8lz01e_register(editor,pluginUrl)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-fullpage",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),global$2=tinymce.util.Tools.resolve("tinymce.html.DomParser"),global$3=tinymce.util.Tools.resolve("tinymce.html.Node"),global$4=tinymce.util.Tools.resolve("tinymce.html.Serializer"),$_g0xiuvbsjh8lz05n_shouldHideInSourceView=function(editor){return editor.getParam("fullpage_hide_in_source_view")},$_g0xiuvbsjh8lz05n_getDefaultXmlPi=function(editor){return editor.getParam("fullpage_default_xml_pi")},$_g0xiuvbsjh8lz05n_getDefaultEncoding=function(editor){return editor.getParam("fullpage_default_encoding")},$_g0xiuvbsjh8lz05n_getDefaultFontFamily=function(editor){return editor.getParam("fullpage_default_font_family")},$_g0xiuvbsjh8lz05n_getDefaultFontSize=function(editor){return editor.getParam("fullpage_default_font_size")},$_g0xiuvbsjh8lz05n_getDefaultTextColor=function(editor){return editor.getParam("fullpage_default_text_color")},$_g0xiuvbsjh8lz05n_getDefaultTitle=function(editor){return editor.getParam("fullpage_default_title")},$_g0xiuvbsjh8lz05n_getDefaultDocType=function(editor){return editor.getParam("fullpage_default_doctype","<!DOCTYPE html>")},parseHeader=function(head){return global$2({validate:!1,root_name:"#document"}).parse(head)},$_28en95bojh8lz05g_parseHeader=parseHeader,$_28en95bojh8lz05g_htmlToData=function(editor,head){var elm,matches,headerFragment=parseHeader(head),data={};function getAttr(elm,name){return elm.attr(name)||""}return data.fontface=$_g0xiuvbsjh8lz05n_getDefaultFontFamily(editor),data.fontsize=$_g0xiuvbsjh8lz05n_getDefaultFontSize(editor),7===(elm=headerFragment.firstChild).type&&(data.xml_pi=!0,(matches=/encoding="([^"]+)"/.exec(elm.value))&&(data.docencoding=matches[1])),(elm=headerFragment.getAll("#doctype")[0])&&(data.doctype="<!DOCTYPE"+elm.value+">"),(elm=headerFragment.getAll("title")[0])&&elm.firstChild&&(data.title=elm.firstChild.value),global$1.each(headerFragment.getAll("meta"),function(meta){var matches,name=meta.attr("name"),httpEquiv=meta.attr("http-equiv");name?data[name.toLowerCase()]=meta.attr("content"):"Content-Type"===httpEquiv&&(matches=/charset\s*=\s*(.*)\s*/gi.exec(meta.attr("content")))&&(data.docencoding=matches[1])}),(elm=headerFragment.getAll("html")[0])&&(data.langcode=getAttr(elm,"lang")||getAttr(elm,"xml:lang")),data.stylesheets=[],global$1.each(headerFragment.getAll("link"),function(link){"stylesheet"===link.attr("rel")&&data.stylesheets.push(link.attr("href"))}),(elm=headerFragment.getAll("body")[0])&&(data.langdir=getAttr(elm,"dir"),data.style=getAttr(elm,"style"),data.visited_color=getAttr(elm,"vlink"),data.link_color=getAttr(elm,"link"),data.active_color=getAttr(elm,"alink")),data},$_28en95bojh8lz05g_dataToHtml=function(editor,data,head){var headerFragment,headElement,html,elm,value,dom=editor.dom;function setAttr(elm,name,value){elm.attr(name,value||void 0)}function addHeadNode(node){headElement.firstChild?headElement.insert(node,headElement.firstChild):headElement.append(node)}headerFragment=parseHeader(head),(headElement=headerFragment.getAll("head")[0])||(elm=headerFragment.getAll("html")[0],headElement=new global$3("head",1),elm.firstChild?elm.insert(headElement,elm.firstChild,!0):elm.append(headElement)),elm=headerFragment.firstChild,data.xml_pi?(value='version="1.0"',data.docencoding&&(value+=' encoding="'+data.docencoding+'"'),7!==elm.type&&(elm=new global$3("xml",7),headerFragment.insert(elm,headerFragment.firstChild,!0)),elm.value=value):elm&&7===elm.type&&elm.remove(),elm=headerFragment.getAll("#doctype")[0],data.doctype?(elm||(elm=new global$3("#doctype",10),data.xml_pi?headerFragment.insert(elm,headerFragment.firstChild):addHeadNode(elm)),elm.value=data.doctype.substring(9,data.doctype.length-1)):elm&&elm.remove(),elm=null,global$1.each(headerFragment.getAll("meta"),function(meta){"Content-Type"===meta.attr("http-equiv")&&(elm=meta)}),data.docencoding?(elm||((elm=new global$3("meta",1)).attr("http-equiv","Content-Type"),elm.shortEnded=!0,addHeadNode(elm)),elm.attr("content","text/html; charset="+data.docencoding)):elm&&elm.remove(),elm=headerFragment.getAll("title")[0],data.title?(elm?elm.empty():addHeadNode(elm=new global$3("title",1)),elm.append(new global$3("#text",3)).value=data.title):elm&&elm.remove(),global$1.each("keywords,description,author,copyright,robots".split(","),function(name){var i,meta,nodes=headerFragment.getAll("meta"),value=data[name];for(i=0;i<nodes.length;i++)if((meta=nodes[i]).attr("name")===name)return void(value?meta.attr("content",value):meta.remove());value&&((elm=new global$3("meta",1)).attr("name",name),elm.attr("content",value),elm.shortEnded=!0,addHeadNode(elm))});var currentStyleSheetsMap={};return global$1.each(headerFragment.getAll("link"),function(stylesheet){"stylesheet"===stylesheet.attr("rel")&&(currentStyleSheetsMap[stylesheet.attr("href")]=stylesheet)}),global$1.each(data.stylesheets,function(stylesheet){currentStyleSheetsMap[stylesheet]||((elm=new global$3("link",1)).attr({rel:"stylesheet",text:"text/css",href:stylesheet}),elm.shortEnded=!0,addHeadNode(elm)),delete currentStyleSheetsMap[stylesheet]}),global$1.each(currentStyleSheetsMap,function(stylesheet){stylesheet.remove()}),(elm=headerFragment.getAll("body")[0])&&(setAttr(elm,"dir",data.langdir),setAttr(elm,"style",data.style),setAttr(elm,"vlink",data.visited_color),setAttr(elm,"link",data.link_color),setAttr(elm,"alink",data.active_color),dom.setAttribs(editor.getBody(),{style:data.style,dir:data.dir,vLink:data.visited_color,link:data.link_color,aLink:data.active_color})),(elm=headerFragment.getAll("html")[0])&&(setAttr(elm,"lang",data.langcode),setAttr(elm,"xml:lang",data.langcode)),headElement.firstChild||headElement.remove(),(html=global$4({validate:!1,indent:!0,apply_source_formatting:!0,indent_before:"head,html,body,meta,title,script,link,style",indent_after:"head,html,body,meta,title,script,link,style"}).serialize(headerFragment)).substring(0,html.indexOf("</body>"))},$_ekcxiubmjh8lz05d_open=function(editor,headState){var data=$_28en95bojh8lz05g_htmlToData(editor,headState.get());editor.windowManager.open({title:"Document properties",data:data,defaults:{type:"textbox",size:40},body:[{name:"title",label:"Title"},{name:"keywords",label:"Keywords"},{name:"description",label:"Description"},{name:"robots",label:"Robots"},{name:"author",label:"Author"},{name:"docencoding",label:"Encoding"}],onSubmit:function(e){var headHtml=$_28en95bojh8lz05g_dataToHtml(editor,global$1.extend(data,e.data),headState.get());headState.set(headHtml)}})},$_8prs3sbljh8lz05c_register=function(editor,headState){editor.addCommand("mceFullPageProperties",function(){$_ekcxiubmjh8lz05d_open(editor,headState)})},$_e8blxibujh8lz05v_protectHtml=function(protect,html){return global$1.each(protect,function(pattern){html=html.replace(pattern,function(str){return"\x3c!--mce:protected "+escape(str)+"--\x3e"})}),html},$_e8blxibujh8lz05v_unprotectHtml=function(html){return html.replace(/<!--mce:protected ([\s\S]*?)-->/g,function(a,m){return unescape(m)})},each=global$1.each,low=function(s){return s.replace(/<\/?[A-Z]+/g,function(a){return a.toLowerCase()})},getDefaultHeader=function(editor){var value,header="",styles="";if($_g0xiuvbsjh8lz05n_getDefaultXmlPi(editor)){var piEncoding=$_g0xiuvbsjh8lz05n_getDefaultEncoding(editor);header+='<?xml version="1.0" encoding="'+(piEncoding||"ISO-8859-1")+'" ?>\n'}return header+=$_g0xiuvbsjh8lz05n_getDefaultDocType(editor),header+="\n<html>\n<head>\n",(value=$_g0xiuvbsjh8lz05n_getDefaultTitle(editor))&&(header+="<title>"+value+"</title>\n"),(value=$_g0xiuvbsjh8lz05n_getDefaultEncoding(editor))&&(header+='<meta http-equiv="Content-Type" content="text/html; charset='+value+'" />\n'),(value=$_g0xiuvbsjh8lz05n_getDefaultFontFamily(editor))&&(styles+="font-family: "+value+";"),(value=$_g0xiuvbsjh8lz05n_getDefaultFontSize(editor))&&(styles+="font-size: "+value+";"),(value=$_g0xiuvbsjh8lz05n_getDefaultTextColor(editor))&&(styles+="color: "+value+";"),header+="</head>\n<body"+(styles?' style="'+styles+'"':"")+">\n"},$_56p36sbtjh8lz05p_setup=function(editor,headState,footState){editor.on("BeforeSetContent",function(evt){!function(editor,headState,footState,evt){var startPos,endPos,content,headerFragment,elm,styles="",dom=editor.dom;if(!(evt.selection||(content=$_e8blxibujh8lz05v_protectHtml(editor.settings.protect,evt.content),"raw"===evt.format&&headState.get()||evt.source_view&&$_g0xiuvbsjh8lz05n_shouldHideInSourceView(editor)))){0!==content.length||evt.source_view||(content=global$1.trim(headState.get())+"\n"+global$1.trim(content)+"\n"+global$1.trim(footState.get())),-1!==(startPos=(content=content.replace(/<(\/?)BODY/gi,"<$1body")).indexOf("<body"))?(startPos=content.indexOf(">",startPos),headState.set(low(content.substring(0,startPos+1))),-1===(endPos=content.indexOf("</body",startPos))&&(endPos=content.length),evt.content=global$1.trim(content.substring(startPos+1,endPos)),footState.set(low(content.substring(endPos)))):(headState.set(getDefaultHeader(editor)),footState.set("\n</body>\n</html>")),headerFragment=$_28en95bojh8lz05g_parseHeader(headState.get()),each(headerFragment.getAll("style"),function(node){node.firstChild&&(styles+=node.firstChild.value)}),(elm=headerFragment.getAll("body")[0])&&dom.setAttribs(editor.getBody(),{style:elm.attr("style")||"",dir:elm.attr("dir")||"",vLink:elm.attr("vlink")||"",link:elm.attr("link")||"",aLink:elm.attr("alink")||""}),dom.remove("fullpage_styles");var headElm=editor.getDoc().getElementsByTagName("head")[0];styles&&(dom.add(headElm,"style",{id:"fullpage_styles"},styles),(elm=dom.get("fullpage_styles")).styleSheet&&(elm.styleSheet.cssText=styles));var currentStyleSheetsMap={};global$1.each(headElm.getElementsByTagName("link"),function(stylesheet){"stylesheet"===stylesheet.rel&&stylesheet.getAttribute("data-mce-fullpage")&&(currentStyleSheetsMap[stylesheet.href]=stylesheet)}),global$1.each(headerFragment.getAll("link"),function(stylesheet){var href=stylesheet.attr("href");if(!href)return!0;currentStyleSheetsMap[href]||"stylesheet"!==stylesheet.attr("rel")||dom.add(headElm,"link",{rel:"stylesheet",text:"text/css",href:href,"data-mce-fullpage":"1"}),delete currentStyleSheetsMap[href]}),global$1.each(currentStyleSheetsMap,function(stylesheet){stylesheet.parentNode.removeChild(stylesheet)})}}(editor,headState,footState,evt)}),editor.on("GetContent",function(evt){!function(editor,head,foot,evt){evt.selection||evt.source_view&&$_g0xiuvbsjh8lz05n_shouldHideInSourceView(editor)||(evt.content=$_e8blxibujh8lz05v_unprotectHtml(global$1.trim(head)+"\n"+global$1.trim(evt.content)+"\n"+global$1.trim(foot)))}(editor,headState.get(),footState.get(),evt)})},$_bqab8cbvjh8lz05w_register=function(editor){editor.addButton("fullpage",{title:"Document properties",cmd:"mceFullPageProperties"}),editor.addMenuItem("fullpage",{text:"Document properties",cmd:"mceFullPageProperties",context:"file"})};global.add("fullpage",function(editor){var headState=Cell(""),footState=Cell("");$_8prs3sbljh8lz05c_register(editor,headState),$_bqab8cbvjh8lz05w_register(editor),$_56p36sbtjh8lz05p_setup(editor,headState,footState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-fullscreen",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_1rpb71bzjh8lz06v_get=function(fullscreenState){return{isFullscreen:function(){return null!==fullscreenState.get()}}},global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$_1d2nfac3jh8lz070_fireFullscreenStateChanged=function(editor,state){editor.fire("FullscreenStateChanged",{state:state})},DOM=global$1.DOM,$_7tc4jhc1jh8lz06x_toggleFullscreen=function(editor,fullscreenState){var editorContainerStyle,editorContainer,iframe,iframeStyle,pos,vp,body=document.body,documentElement=document.documentElement,fullscreenInfo=fullscreenState.get(),resize=function(){var w,h,win,body;DOM.setStyle(iframe,"height",(win=window,body=document.body,body.offsetWidth&&(w=body.offsetWidth,h=body.offsetHeight),win.innerWidth&&win.innerHeight&&(w=win.innerWidth,h=win.innerHeight),{w:w,h:h}).h-(editorContainer.clientHeight-iframe.clientHeight))},removeResize=function(){DOM.unbind(window,"resize",resize)};if(editorContainerStyle=(editorContainer=editor.getContainer()).style,iframeStyle=(iframe=editor.getContentAreaContainer().firstChild).style,fullscreenInfo)iframeStyle.width=fullscreenInfo.iframeWidth,iframeStyle.height=fullscreenInfo.iframeHeight,fullscreenInfo.containerWidth&&(editorContainerStyle.width=fullscreenInfo.containerWidth),fullscreenInfo.containerHeight&&(editorContainerStyle.height=fullscreenInfo.containerHeight),DOM.removeClass(body,"mce-fullscreen"),DOM.removeClass(documentElement,"mce-fullscreen"),DOM.removeClass(editorContainer,"mce-fullscreen"),pos=fullscreenInfo.scrollPos,window.scrollTo(pos.x,pos.y),DOM.unbind(window,"resize",fullscreenInfo.resizeHandler),editor.off("remove",fullscreenInfo.removeHandler),fullscreenState.set(null),$_1d2nfac3jh8lz070_fireFullscreenStateChanged(editor,!1);else{var newFullScreenInfo={scrollPos:(vp=DOM.getViewPort(),{x:vp.x,y:vp.y}),containerWidth:editorContainerStyle.width,containerHeight:editorContainerStyle.height,iframeWidth:iframeStyle.width,iframeHeight:iframeStyle.height,resizeHandler:resize,removeHandler:removeResize};iframeStyle.width=iframeStyle.height="100%",editorContainerStyle.width=editorContainerStyle.height="",DOM.addClass(body,"mce-fullscreen"),DOM.addClass(documentElement,"mce-fullscreen"),DOM.addClass(editorContainer,"mce-fullscreen"),DOM.bind(window,"resize",resize),editor.on("remove",removeResize),resize(),fullscreenState.set(newFullScreenInfo),$_1d2nfac3jh8lz070_fireFullscreenStateChanged(editor,!0)}},$_em8om1c0jh8lz06w_register=function(editor,fullscreenState){editor.addCommand("mceFullScreen",function(){$_7tc4jhc1jh8lz06x_toggleFullscreen(editor,fullscreenState)})},postRender=function(editor){return function(e){var ctrl=e.control;editor.on("FullscreenStateChanged",function(e){ctrl.active(e.state)})}},$_f8ip0cc4jh8lz071_register=function(editor){editor.addMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Ctrl+Shift+F",selectable:!0,cmd:"mceFullScreen",onPostRender:postRender(editor),context:"view"}),editor.addButton("fullscreen",{active:!1,tooltip:"Fullscreen",cmd:"mceFullScreen",onPostRender:postRender(editor)})};global.add("fullscreen",function(editor){var fullscreenState=Cell(null);return editor.settings.inline||($_em8om1c0jh8lz06w_register(editor,fullscreenState),$_f8ip0cc4jh8lz071_register(editor),editor.addShortcut("Ctrl+Shift+F","","mceFullScreen")),$_1rpb71bzjh8lz06v_get(fullscreenState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-hr",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_dxcs8yc7jh8lz07d_register=function(editor){editor.addCommand("InsertHorizontalRule",function(){editor.execCommand("mceInsertContent",!1,"<hr />")})},$_dmdtoxc8jh8lz07e_register=function(editor){editor.addButton("hr",{icon:"hr",tooltip:"Horizontal line",cmd:"InsertHorizontalRule"}),editor.addMenuItem("hr",{icon:"hr",text:"Horizontal line",cmd:"InsertHorizontalRule",context:"insert"})};global.add("hr",function(editor){$_dxcs8yc7jh8lz07d_register(editor),$_dmdtoxc8jh8lz07e_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-image",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_crxcnscdjh8lz07s_hasDimensions=function(editor){return!1!==editor.settings.image_dimensions},$_crxcnscdjh8lz07s_hasAdvTab=function(editor){return!0===editor.settings.image_advtab},$_crxcnscdjh8lz07s_getPrependUrl=function(editor){return editor.getParam("image_prepend_url","")},$_crxcnscdjh8lz07s_getClassList=function(editor){return editor.getParam("image_class_list")},$_crxcnscdjh8lz07s_hasDescription=function(editor){return!1!==editor.settings.image_description},$_crxcnscdjh8lz07s_hasImageTitle=function(editor){return!0===editor.settings.image_title},$_crxcnscdjh8lz07s_hasImageCaption=function(editor){return!0===editor.settings.image_caption},$_crxcnscdjh8lz07s_getImageList=function(editor){return editor.getParam("image_list",!1)},$_crxcnscdjh8lz07s_hasUploadUrl=function(editor){return editor.getParam("images_upload_url",!1)},$_crxcnscdjh8lz07s_hasUploadHandler=function(editor){return editor.getParam("images_upload_handler",!1)},$_crxcnscdjh8lz07s_getUploadUrl=function(editor){return editor.getParam("images_upload_url")},$_crxcnscdjh8lz07s_getUploadHandler=function(editor){return editor.getParam("images_upload_handler")},$_crxcnscdjh8lz07s_getUploadBasePath=function(editor){return editor.getParam("images_upload_base_path")},$_crxcnscdjh8lz07s_getUploadCredentials=function(editor){return editor.getParam("images_upload_credentials")},global$1="undefined"!=typeof window?window:Function("return this;")(),path=function(parts,scope){for(var o=null!=scope?scope:global$1,i=0;i<parts.length&&null!=o;++i)o=o[parts[i]];return o},$_9gheychjh8lz08c_resolve=function(p,scope){var parts=p.split(".");return path(parts,scope)},$_8d9gbscgjh8lz089={getOrDie:function(name,scope){var actual=function(name,scope){return $_9gheychjh8lz08c_resolve(name,scope)}(name,scope);if(null==actual)throw name+" not available on this browser";return actual}};function FileReader(){return new($_8d9gbscgjh8lz089.getOrDie("FileReader"))}var global$2=tinymce.util.Tools.resolve("tinymce.util.Promise"),global$3=tinymce.util.Tools.resolve("tinymce.util.Tools"),global$4=tinymce.util.Tools.resolve("tinymce.util.XHR"),parseIntAndGetMax=function(val1,val2){return Math.max(parseInt(val1,10),parseInt(val2,10))},$_5m5ooacejh8lz07v_getImageSize=function(url,callback){var img=document.createElement("img");function done(width,height){img.parentNode&&img.parentNode.removeChild(img),callback({width:width,height:height})}img.onload=function(){done(parseIntAndGetMax(img.width,img.clientWidth),parseIntAndGetMax(img.height,img.clientHeight))},img.onerror=function(){done(0,0)};var style=img.style;style.visibility="hidden",style.position="fixed",style.bottom=style.left="0px",style.width=style.height="auto",document.body.appendChild(img),img.src=url},$_5m5ooacejh8lz07v_buildListItems=function(inputList,itemCallback,startItems){return function appendItems(values,output){return output=output||[],global$3.each(values,function(item){var menuItem={text:item.text||item.title};item.menu?menuItem.menu=appendItems(item.menu):(menuItem.value=item.value,itemCallback(menuItem)),output.push(menuItem)}),output}(inputList,startItems||[])},$_5m5ooacejh8lz07v_removePixelSuffix=function(value){return value&&(value=value.replace(/px$/,"")),value},$_5m5ooacejh8lz07v_addPixelSuffix=function(value){return 0<value.length&&/^[0-9]+$/.test(value)&&(value+="px"),value},$_5m5ooacejh8lz07v_mergeMargins=function(css){if(css.margin){var splitMargin=css.margin.split(" ");switch(splitMargin.length){case 1:css["margin-top"]=css["margin-top"]||splitMargin[0],css["margin-right"]=css["margin-right"]||splitMargin[0],css["margin-bottom"]=css["margin-bottom"]||splitMargin[0],css["margin-left"]=css["margin-left"]||splitMargin[0];break;case 2:css["margin-top"]=css["margin-top"]||splitMargin[0],css["margin-right"]=css["margin-right"]||splitMargin[1],css["margin-bottom"]=css["margin-bottom"]||splitMargin[0],css["margin-left"]=css["margin-left"]||splitMargin[1];break;case 3:css["margin-top"]=css["margin-top"]||splitMargin[0],css["margin-right"]=css["margin-right"]||splitMargin[1],css["margin-bottom"]=css["margin-bottom"]||splitMargin[2],css["margin-left"]=css["margin-left"]||splitMargin[1];break;case 4:css["margin-top"]=css["margin-top"]||splitMargin[0],css["margin-right"]=css["margin-right"]||splitMargin[1],css["margin-bottom"]=css["margin-bottom"]||splitMargin[2],css["margin-left"]=css["margin-left"]||splitMargin[3]}delete css.margin}return css},$_5m5ooacejh8lz07v_createImageList=function(editor,callback){var imageList=$_crxcnscdjh8lz07s_getImageList(editor);"string"==typeof imageList?global$4.send({url:imageList,success:function(text){callback(JSON.parse(text))}}):"function"==typeof imageList?imageList(callback):callback(imageList)},$_5m5ooacejh8lz07v_waitLoadImage=function(editor,data,imgElm){function selectImage(){imgElm.onload=imgElm.onerror=null,editor.selection&&(editor.selection.select(imgElm),editor.nodeChanged())}imgElm.onload=function(){data.width||data.height||!$_crxcnscdjh8lz07s_hasDimensions(editor)||editor.dom.setAttribs(imgElm,{width:imgElm.clientWidth,height:imgElm.clientHeight}),selectImage()},imgElm.onerror=selectImage},$_5m5ooacejh8lz07v_blobToDataUri=function(blob){return new global$2(function(resolve,reject){var reader=new FileReader;reader.onload=function(){resolve(reader.result)},reader.onerror=function(){reject(FileReader.error.message)},reader.readAsDataURL(blob)})},global$5=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),isType=function(type){return function(value){return function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t}(value)===type}},$_8actkxcrjh8lz08z={isString:isType("string"),isObject:isType("object"),isArray:isType("array"),isNull:isType("null"),isBoolean:isType("boolean"),isUndefined:isType("undefined"),isFunction:isType("function"),isNumber:isType("number")},baseMerge=function(merger){return function(){for(var objects=new Array(arguments.length),i=0;i<objects.length;i++)objects[i]=arguments[i];if(0===objects.length)throw new Error("Can't merge zero objects");for(var ret={},j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject)curObject.hasOwnProperty(key)&&(ret[key]=merger(ret[key],curObject[key]))}return ret}},deepMerge=baseMerge(function(old,nu){return $_8actkxcrjh8lz08z.isObject(old)&&$_8actkxcrjh8lz08z.isObject(nu)?deepMerge(old,nu):nu}),merge=baseMerge(function(old,nu){return nu}),$_kivhlcqjh8lz08x={deepMerge:deepMerge,merge:merge},DOM=global$5.DOM,getHspace=function(image){return image.style.marginLeft&&image.style.marginRight&&image.style.marginLeft===image.style.marginRight?$_5m5ooacejh8lz07v_removePixelSuffix(image.style.marginLeft):""},getVspace=function(image){return image.style.marginTop&&image.style.marginBottom&&image.style.marginTop===image.style.marginBottom?$_5m5ooacejh8lz07v_removePixelSuffix(image.style.marginTop):""},getBorder=function(image){return image.style.borderWidth?$_5m5ooacejh8lz07v_removePixelSuffix(image.style.borderWidth):""},getAttrib=function(image,name){return image.hasAttribute(name)?image.getAttribute(name):""},getStyle=function(image,name){return image.style[name]?image.style[name]:""},hasCaption=function(image){return null!==image.parentNode&&"FIGURE"===image.parentNode.nodeName},setAttrib=function(image,name,value){image.setAttribute(name,value)},toggleCaption=function(image){hasCaption(image)?function(image){var figureElm=image.parentNode;DOM.insertAfter(image,figureElm),DOM.remove(figureElm)}(image):function(image){var figureElm=DOM.create("figure",{class:"image"});DOM.insertAfter(figureElm,image),figureElm.appendChild(image),figureElm.appendChild(DOM.create("figcaption",{contentEditable:!0},"Caption")),figureElm.contentEditable="false"}(image)},normalizeStyle=function(image,normalizeCss){var attrValue=image.getAttribute("style"),value=normalizeCss(null!==attrValue?attrValue:"");0<value.length?(image.setAttribute("style",value),image.setAttribute("data-mce-style",value)):image.removeAttribute("style")},setSize=function(name,normalizeCss){return function(image,name,value){image.style[name]?(image.style[name]=$_5m5ooacejh8lz07v_addPixelSuffix(value),normalizeStyle(image,normalizeCss)):setAttrib(image,name,value)}},getSize=function(image,name){return image.style[name]?$_5m5ooacejh8lz07v_removePixelSuffix(image.style[name]):getAttrib(image,name)},setHspace=function(image,value){var pxValue=$_5m5ooacejh8lz07v_addPixelSuffix(value);image.style.marginLeft=pxValue,image.style.marginRight=pxValue},setVspace=function(image,value){var pxValue=$_5m5ooacejh8lz07v_addPixelSuffix(value);image.style.marginTop=pxValue,image.style.marginBottom=pxValue},setBorder=function(image,value){var pxValue=$_5m5ooacejh8lz07v_addPixelSuffix(value);image.style.borderWidth=pxValue},setBorderStyle=function(image,value){image.style.borderStyle=value},isFigure=function(elm){return"FIGURE"===elm.nodeName},getStyleValue=function(normalizeCss,data){var image=document.createElement("img");return setAttrib(image,"style",data.style),(getHspace(image)||""!==data.hspace)&&setHspace(image,data.hspace),(getVspace(image)||""!==data.vspace)&&setVspace(image,data.vspace),(getBorder(image)||""!==data.border)&&setBorder(image,data.border),(function(image){return getStyle(image,"borderStyle")}(image)||""!==data.borderStyle)&&setBorderStyle(image,data.borderStyle),normalizeCss(image.getAttribute("style"))},read=function(normalizeCss,image){return{src:getAttrib(image,"src"),alt:getAttrib(image,"alt"),title:getAttrib(image,"title"),width:getSize(image,"width"),height:getSize(image,"height"),class:getAttrib(image,"class"),style:normalizeCss(getAttrib(image,"style")),caption:hasCaption(image),hspace:getHspace(image),vspace:getVspace(image),border:getBorder(image),borderStyle:getStyle(image,"borderStyle")}},updateProp=function(image,oldData,newData,name,set){newData[name]!==oldData[name]&&set(image,name,newData[name])},normalized=function(set,normalizeCss){return function(image,name,value){set(image,value),normalizeStyle(image,normalizeCss)}},write=function(normalizeCss,newData,image){var oldData=read(normalizeCss,image);updateProp(image,oldData,newData,"caption",function(image,_name,_value){return toggleCaption(image)}),updateProp(image,oldData,newData,"src",setAttrib),updateProp(image,oldData,newData,"alt",setAttrib),updateProp(image,oldData,newData,"title",setAttrib),updateProp(image,oldData,newData,"width",setSize(0,normalizeCss)),updateProp(image,oldData,newData,"height",setSize(0,normalizeCss)),updateProp(image,oldData,newData,"class",setAttrib),updateProp(image,oldData,newData,"style",normalized(function(image,value){return setAttrib(image,"style",value)},normalizeCss)),updateProp(image,oldData,newData,"hspace",normalized(setHspace,normalizeCss)),updateProp(image,oldData,newData,"vspace",normalized(setVspace,normalizeCss)),updateProp(image,oldData,newData,"border",normalized(setBorder,normalizeCss)),updateProp(image,oldData,newData,"borderStyle",normalized(setBorderStyle,normalizeCss))},normalizeCss=function(editor,cssText){var css=editor.dom.styles.parse(cssText),mergedCss=$_5m5ooacejh8lz07v_mergeMargins(css),compressed=editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));return editor.dom.styles.serialize(compressed)},getSelectedImage=function(editor){var imgElm=editor.selection.getNode(),figureElm=editor.dom.getParent(imgElm,"figure.image");return figureElm?editor.dom.select("img",figureElm)[0]:imgElm&&("IMG"!==imgElm.nodeName||imgElm.getAttribute("data-mce-object")||imgElm.getAttribute("data-mce-placeholder"))?null:imgElm},splitTextBlock=function(editor,figure){var dom=editor.dom,textBlock=dom.getParent(figure.parentNode,function(node){return editor.schema.getTextBlockElements()[node.nodeName]});return textBlock?dom.split(textBlock,figure):figure},readImageDataFromSelection=function(editor){var image=getSelectedImage(editor);return image?read(function(css){return normalizeCss(editor,css)},image):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""}},insertImageAtCaret=function(editor,data){var elm=function(normalizeCss,data){var image=document.createElement("img");if(write(normalizeCss,$_kivhlcqjh8lz08x.merge(data,{caption:!1}),image),setAttrib(image,"alt",data.alt),data.caption){var figure=DOM.create("figure",{class:"image"});return figure.appendChild(image),figure.appendChild(DOM.create("figcaption",{contentEditable:!0},"Caption")),figure.contentEditable="false",figure}return image}(function(css){return normalizeCss(editor,css)},data);editor.dom.setAttrib(elm,"data-mce-id","__mcenew"),editor.focus(),editor.selection.setContent(elm.outerHTML);var insertedElm=editor.dom.select('*[data-mce-id="__mcenew"]')[0];if(editor.dom.setAttrib(insertedElm,"data-mce-id",null),isFigure(insertedElm)){var figure=splitTextBlock(editor,insertedElm);editor.selection.select(figure)}else editor.selection.select(insertedElm)},insertOrUpdateImage=function(editor,data){var image=getSelectedImage(editor);image?data.src?function(editor,data){var image=getSelectedImage(editor);if(write(function(css){return normalizeCss(editor,css)},data,image),function(editor,image){editor.dom.setAttrib(image,"src",image.getAttribute("src"))}(editor,image),isFigure(image.parentNode)){var figure=image.parentNode;splitTextBlock(editor,figure),editor.selection.select(image.parentNode)}else editor.selection.select(image),$_5m5ooacejh8lz07v_waitLoadImage(editor,data,image)}(editor,data):function(editor,image){if(image){var elm=editor.dom.is(image.parentNode,"figure.image")?image.parentNode:image;editor.dom.remove(elm),editor.focus(),editor.nodeChanged(),editor.dom.isEmpty(editor.getBody())&&(editor.setContent(""),editor.selection.setCursorLocation())}}(editor,image):data.src&&insertImageAtCaret(editor,data)},updateStyle=function(editor,win){win.find("#style").each(function(ctrl){var value=getStyleValue(function(css){return normalizeCss(editor,css)},$_kivhlcqjh8lz08x.merge({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:""},win.toJSON()));ctrl.value(value)})},$_546vuxcmjh8lz08g_makeTab=function(editor){return{title:"Advanced",type:"form",pack:"start",items:[{label:"Style",name:"style",type:"textbox",onchange:function(editor){return function(evt){var dom=editor.dom,rootControl=evt.control.rootControl;if($_crxcnscdjh8lz07s_hasAdvTab(editor)){var data=rootControl.toJSON(),css=dom.parseStyle(data.style);rootControl.find("#vspace").value(""),rootControl.find("#hspace").value(""),((css=$_5m5ooacejh8lz07v_mergeMargins(css))["margin-top"]&&css["margin-bottom"]||css["margin-right"]&&css["margin-left"])&&(css["margin-top"]===css["margin-bottom"]?rootControl.find("#vspace").value($_5m5ooacejh8lz07v_removePixelSuffix(css["margin-top"])):rootControl.find("#vspace").value(""),css["margin-right"]===css["margin-left"]?rootControl.find("#hspace").value($_5m5ooacejh8lz07v_removePixelSuffix(css["margin-right"])):rootControl.find("#hspace").value("")),css["border-width"]?rootControl.find("#border").value($_5m5ooacejh8lz07v_removePixelSuffix(css["border-width"])):rootControl.find("#border").value(""),css["border-style"]?rootControl.find("#borderStyle").value(css["border-style"]):rootControl.find("#borderStyle").value(""),rootControl.find("#style").value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))))}}}(editor)},{type:"form",layout:"grid",packV:"start",columns:2,padding:0,defaults:{type:"textbox",maxWidth:50,onchange:function(evt){updateStyle(editor,evt.control.rootControl)}},items:[{label:"Vertical space",name:"vspace"},{label:"Border width",name:"border"},{label:"Horizontal space",name:"hspace"},{label:"Border style",type:"listbox",name:"borderStyle",width:90,maxWidth:90,onselect:function(evt){updateStyle(editor,evt.control.rootControl)},values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},doSyncSize=function(widthCtrl,heightCtrl){widthCtrl.state.set("oldVal",widthCtrl.value()),heightCtrl.state.set("oldVal",heightCtrl.value())},doSizeControls=function(win,f){var widthCtrl=win.find("#width")[0],heightCtrl=win.find("#height")[0],constrained=win.find("#constrain")[0];widthCtrl&&heightCtrl&&constrained&&f(widthCtrl,heightCtrl,constrained.checked())},doUpdateSize=function(widthCtrl,heightCtrl,isContrained){var oldWidth=widthCtrl.state.get("oldVal"),oldHeight=heightCtrl.state.get("oldVal"),newWidth=widthCtrl.value(),newHeight=heightCtrl.value();isContrained&&oldWidth&&oldHeight&&newWidth&&newHeight&&(newWidth!==oldWidth?(newHeight=Math.round(newWidth/oldWidth*newHeight),isNaN(newHeight)||heightCtrl.value(newHeight)):(newWidth=Math.round(newHeight/oldHeight*newWidth),isNaN(newWidth)||widthCtrl.value(newWidth))),doSyncSize(widthCtrl,heightCtrl)},updateSize=function(win){doSizeControls(win,doUpdateSize)},$_8agebqctjh8lz094_createUi=function(){var recalcSize=function(evt){updateSize(evt.control.rootControl)};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:recalcSize,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:recalcSize,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},$_8agebqctjh8lz094_syncSize=function(win){doSizeControls(win,doSyncSize)},$_8agebqctjh8lz094_updateSize=updateSize,onBeforeCall=function(evt){evt.meta=evt.control.rootControl.toJSON()},getGeneralItems=function(editor,imageListCtrl){var generalFormItems=[{name:"src",type:"filepicker",filetype:"image",label:"Source",autofocus:!0,onchange:function(evt){!function(evt,editor){var srcURL,prependURL,absoluteURLPattern,meta=evt.meta||{},control=evt.control,rootControl=control.rootControl,imageListCtrl=rootControl.find("#image-list")[0];imageListCtrl&&imageListCtrl.value(editor.convertURL(control.value(),"src")),global$3.each(meta,function(value,key){rootControl.find("#"+key).value(value)}),meta.width||meta.height||(srcURL=editor.convertURL(control.value(),"src"),prependURL=$_crxcnscdjh8lz07s_getPrependUrl(editor),absoluteURLPattern=new RegExp("^(?:[a-z]+:)?//","i"),prependURL&&!absoluteURLPattern.test(srcURL)&&srcURL.substring(0,prependURL.length)!==prependURL&&(srcURL=prependURL+srcURL),control.value(srcURL),$_5m5ooacejh8lz07v_getImageSize(editor.documentBaseURI.toAbsolute(control.value()),function(data){data.width&&data.height&&$_crxcnscdjh8lz07s_hasDimensions(editor)&&(rootControl.find("#width").value(data.width),rootControl.find("#height").value(data.height),$_8agebqctjh8lz094_syncSize(rootControl))}))}(evt,editor)},onbeforecall:onBeforeCall},imageListCtrl];return $_crxcnscdjh8lz07s_hasDescription(editor)&&generalFormItems.push({name:"alt",type:"textbox",label:"Image description"}),$_crxcnscdjh8lz07s_hasImageTitle(editor)&&generalFormItems.push({name:"title",type:"textbox",label:"Image Title"}),$_crxcnscdjh8lz07s_hasDimensions(editor)&&generalFormItems.push($_8agebqctjh8lz094_createUi()),$_crxcnscdjh8lz07s_getClassList(editor)&&generalFormItems.push({name:"class",type:"listbox",label:"Class",values:$_5m5ooacejh8lz07v_buildListItems($_crxcnscdjh8lz07s_getClassList(editor),function(item){item.value&&(item.textStyle=function(){return editor.formatter.getCssText({inline:"img",classes:[item.value]})})})}),$_crxcnscdjh8lz07s_hasImageCaption(editor)&&generalFormItems.push({name:"caption",type:"checkbox",label:"Caption"}),generalFormItems},$_586d0gcsjh8lz091_makeTab=function(editor,imageListCtrl){return{title:"General",type:"form",items:getGeneralItems(editor,imageListCtrl)}},$_586d0gcsjh8lz091_getGeneralItems=getGeneralItems,url=function(){return $_8d9gbscgjh8lz089.getOrDie("URL")},$_61yp4wcvjh8lz09b_createObjectURL=function(blob){return url().createObjectURL(blob)},$_61yp4wcvjh8lz09b_revokeObjectURL=function(u){url().revokeObjectURL(u)},global$6=tinymce.util.Tools.resolve("tinymce.ui.Factory");function XMLHttpRequest(){return new($_8d9gbscgjh8lz089.getOrDie("XMLHttpRequest"))}var noop=function(){};function Uploader(settings){var defaultHandler=function(blobInfo,success,failure,progress){var xhr,formData;(xhr=new XMLHttpRequest).open("POST",settings.url),xhr.withCredentials=settings.credentials,xhr.upload.onprogress=function(e){progress(e.loaded/e.total*100)},xhr.onerror=function(){failure("Image upload failed due to a XHR Transport error. Code: "+xhr.status)},xhr.onload=function(){var json,path1,path2;xhr.status<200||300<=xhr.status?failure("HTTP Error: "+xhr.status):(json=JSON.parse(xhr.responseText))&&"string"==typeof json.location?success((path1=settings.basePath,path2=json.location,path1?path1.replace(/\/$/,"")+"/"+path2.replace(/^\//,""):path2)):failure("Invalid JSON: "+xhr.responseText)},(formData=new FormData).append("file",blobInfo.blob(),blobInfo.filename()),xhr.send(formData)};return settings=global$3.extend({credentials:!1,handler:defaultHandler},settings),{upload:function(blobInfo){return settings.url||settings.handler!==defaultHandler?function(blobInfo,handler){return new global$2(function(resolve,reject){try{handler(blobInfo,resolve,reject,noop)}catch(ex){reject(ex.message)}})}(blobInfo,settings.handler):global$2.reject("Upload url missing from the settings.")}}}var onFileInput=function(editor){return function(evt){var Throbber=global$6.get("Throbber"),rootControl=evt.control.rootControl,throbber=new Throbber(rootControl.getEl()),file=evt.control.value(),blobUri=$_61yp4wcvjh8lz09b_createObjectURL(file),uploader=Uploader({url:$_crxcnscdjh8lz07s_getUploadUrl(editor),basePath:$_crxcnscdjh8lz07s_getUploadBasePath(editor),credentials:$_crxcnscdjh8lz07s_getUploadCredentials(editor),handler:$_crxcnscdjh8lz07s_getUploadHandler(editor)}),finalize=function(){throbber.hide(),$_61yp4wcvjh8lz09b_revokeObjectURL(blobUri)};return throbber.show(),$_5m5ooacejh8lz07v_blobToDataUri(file).then(function(dataUrl){var blobInfo=editor.editorUpload.blobCache.create({blob:file,blobUri:blobUri,name:file.name?file.name.replace(/\.[^\.]+$/,""):null,base64:dataUrl.split(",")[1]});return uploader.upload(blobInfo).then(function(url){var src=rootControl.find("#src");return src.value(url),rootControl.find("tabpanel")[0].activateTab(0),src.fire("change"),finalize(),url})}).catch(function(err){editor.windowManager.alert(err),finalize()})}},$_3w774acujh8lz097_makeTab=function(editor){return{title:"Upload",type:"form",layout:"flex",direction:"column",align:"stretch",padding:"20 20 20 20",items:[{type:"container",layout:"flex",direction:"column",align:"center",spacing:10,items:[{text:"Browse for an image",type:"browsebutton",accept:".jpg,.jpeg,.png,.gif",onchange:onFileInput(editor)},{text:"OR",type:"label"}]},{text:"Drop an image here",type:"dropzone",accept:".jpg,.jpeg,.png,.gif",height:100,onchange:onFileInput(editor)}]}},constant=function(value){return function(){return value}},$_8rhdleczjh8lz09i_curry=(constant(!1),constant(!0),function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}}),submitForm=function(editor,evt){var win=evt.control.getRoot();$_8agebqctjh8lz094_updateSize(win),editor.undoManager.transact(function(){var data=$_kivhlcqjh8lz08x.merge(readImageDataFromSelection(editor),win.toJSON());insertOrUpdateImage(editor,data)}),editor.editorUpload.uploadImagesAuto()};function Dialog(editor){function showDialog(imageList){var win,imageListCtrl,data=readImageDataFromSelection(editor);if(imageList&&(imageListCtrl={type:"listbox",label:"Image list",name:"image-list",values:$_5m5ooacejh8lz07v_buildListItems(imageList,function(item){item.value=editor.convertURL(item.value||item.url,"src")},[{text:"None",value:""}]),value:data.src&&editor.convertURL(data.src,"src"),onselect:function(e){var altCtrl=win.find("#alt");(!altCtrl.value()||e.lastControl&&altCtrl.value()===e.lastControl.text())&&altCtrl.value(e.control.text()),win.find("#src").value(e.control.value()).fire("change")},onPostRender:function(){imageListCtrl=this}}),$_crxcnscdjh8lz07s_hasAdvTab(editor)||$_crxcnscdjh8lz07s_hasUploadUrl(editor)||$_crxcnscdjh8lz07s_hasUploadHandler(editor)){var body=[$_586d0gcsjh8lz091_makeTab(editor,imageListCtrl)];$_crxcnscdjh8lz07s_hasAdvTab(editor)&&body.push($_546vuxcmjh8lz08g_makeTab(editor)),($_crxcnscdjh8lz07s_hasUploadUrl(editor)||$_crxcnscdjh8lz07s_hasUploadHandler(editor))&&body.push($_3w774acujh8lz097_makeTab(editor)),win=editor.windowManager.open({title:"Insert/edit image",data:data,bodyType:"tabpanel",body:body,onSubmit:$_8rhdleczjh8lz09i_curry(submitForm,editor)})}else win=editor.windowManager.open({title:"Insert/edit image",data:data,body:$_586d0gcsjh8lz091_getGeneralItems(editor,imageListCtrl),onSubmit:$_8rhdleczjh8lz09i_curry(submitForm,editor)});$_8agebqctjh8lz094_syncSize(win)}return{open:function(){$_5m5ooacejh8lz07v_createImageList(editor,showDialog)}}}var $_4g83a6cbjh8lz07k_register=function(editor){editor.addCommand("mceImage",Dialog(editor).open)},hasImageClass=function(node){var className=node.attr("class");return className&&/\bimage\b/.test(className)},toggleContentEditableState=function(state){return function(nodes){for(var node,i=nodes.length,toggleContentEditable=function(node){node.attr("contenteditable",state?"true":null)};i--;)node=nodes[i],hasImageClass(node)&&(node.attr("contenteditable",state?"false":null),global$3.each(node.getAll("figcaption"),toggleContentEditable))}},$_1om65pd0jh8lz09k_setup=function(editor){editor.on("preInit",function(){editor.parser.addNodeFilter("figure",toggleContentEditableState(!0)),editor.serializer.addNodeFilter("figure",toggleContentEditableState(!1))})},$_df3mmtd1jh8lz09m_register=function(editor){editor.addButton("image",{icon:"image",tooltip:"Insert/edit image",onclick:Dialog(editor).open,stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image"}),editor.addMenuItem("image",{icon:"image",text:"Image",onclick:Dialog(editor).open,context:"insert",prependToContext:!0})};global.add("image",function(editor){$_1om65pd0jh8lz09k_setup(editor),$_df3mmtd1jh8lz09m_register(editor),$_4g83a6cbjh8lz07k_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-importcss",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$2=tinymce.util.Tools.resolve("tinymce.EditorManager"),global$3=tinymce.util.Tools.resolve("tinymce.Env"),global$4=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_988pjferjh8lz0nn_shouldMergeClasses=function(editor){return editor.getParam("importcss_merge_classes")},$_988pjferjh8lz0nn_shouldImportExclusive=function(editor){return editor.getParam("importcss_exclusive")},$_988pjferjh8lz0nn_getSelectorConverter=function(editor){return editor.getParam("importcss_selector_converter")},$_988pjferjh8lz0nn_getSelectorFilter=function(editor){return editor.getParam("importcss_selector_filter")},$_988pjferjh8lz0nn_getCssGroups=function(editor){return editor.getParam("importcss_groups")},$_988pjferjh8lz0nn_shouldAppend=function(editor){return editor.getParam("importcss_append")},$_988pjferjh8lz0nn_getFileFilter=function(editor){return editor.getParam("importcss_file_filter")},compileFilter=function(filter){return"string"==typeof filter?function(value){return-1!==value.indexOf(filter)}:filter instanceof RegExp?function(value){return filter.test(value)}:filter},getSelectors=function(editor,doc,fileFilter){var selectors=[],contentCSSUrls={};function append(styleSheet,imported){var rules,url,cacheSuffix,href=styleSheet.href;if(url=href,cacheSuffix=global$3.cacheSuffix,"string"==typeof url&&(url=url.replace("?"+cacheSuffix,"").replace("&"+cacheSuffix,"")),(href=url)&&fileFilter(href,imported)&&!function(editor,href){var settings=editor.settings,skin=!1!==settings.skin&&(settings.skin||"lightgray");return!!skin&&href===(settings.skin_url?editor.documentBaseURI.toAbsolute(settings.skin_url):global$2.baseURL+"/skins/"+skin)+"/content"+(editor.inline?".inline":"")+".min.css"}(editor,href)){global$4.each(styleSheet.imports,function(styleSheet){append(styleSheet,!0)});try{rules=styleSheet.cssRules||styleSheet.rules}catch(e){}global$4.each(rules,function(cssRule){cssRule.styleSheet?append(cssRule.styleSheet,!0):cssRule.selectorText&&global$4.each(cssRule.selectorText.split(","),function(selector){selectors.push(global$4.trim(selector))})})}}global$4.each(editor.contentCSS,function(url){contentCSSUrls[url]=!0}),fileFilter||(fileFilter=function(href,imported){return imported||contentCSSUrls[href]});try{global$4.each(doc.styleSheets,function(styleSheet){append(styleSheet)})}catch(e){}return selectors},defaultConvertSelectorToFormat=function(editor,selectorText){var format,selector=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(selectorText);if(selector){var elementName=selector[1],classes=selector[2].substr(1).split(".").join(" "),inlineSelectorElements=global$4.makeMap("a,img");return selector[1]?(format={title:selectorText},editor.schema.getTextBlockElements()[elementName]?format.block=elementName:editor.schema.getBlockElements()[elementName]||inlineSelectorElements[elementName.toLowerCase()]?format.selector=elementName:format.inline=elementName):selector[2]&&(format={inline:"span",title:selectorText.substr(1),classes:classes}),!1!==$_988pjferjh8lz0nn_shouldMergeClasses(editor)?format.classes=classes:format.attributes={class:classes},format}},isExclusiveMode=function(editor,group){return null===group||!1!==$_988pjferjh8lz0nn_shouldImportExclusive(editor)},$_82ojngemjh8lz0ng_defaultConvertSelectorToFormat=defaultConvertSelectorToFormat,$_82ojngemjh8lz0ng_setup=function(editor){editor.on("renderFormatsMenu",function(e){var globallyUniqueSelectors={},selectorFilter=compileFilter($_988pjferjh8lz0nn_getSelectorFilter(editor)),ctrl=e.control,groups=function(groups){return global$4.map(groups,function(group){return global$4.extend({},group,{original:group,selectors:{},filter:compileFilter(group.filter),item:{text:group.title,menu:[]}})})}($_988pjferjh8lz0nn_getCssGroups(editor)),processSelector=function(selector,group){if(function(editor,selector,group,globallyUniqueSelectors){return!(isExclusiveMode(editor,group)?selector in globallyUniqueSelectors:selector in group.selectors)}(editor,selector,group,globallyUniqueSelectors)){!function(editor,selector,group,globallyUniqueSelectors){isExclusiveMode(editor,group)?globallyUniqueSelectors[selector]=!0:group.selectors[selector]=!0}(editor,selector,group,globallyUniqueSelectors);var format=function(editor,plugin,selector,group){return(group&&group.selector_converter?group.selector_converter:$_988pjferjh8lz0nn_getSelectorConverter(editor)?$_988pjferjh8lz0nn_getSelectorConverter(editor):function(){return defaultConvertSelectorToFormat(editor,selector)}).call(plugin,selector,group)}(editor,editor.plugins.importcss,selector,group);if(format){var formatName=format.name||global$1.DOM.uniqueId();return editor.formatter.register(formatName,format),global$4.extend({},ctrl.settings.itemDefaults,{text:format.title,format:formatName})}}return null};$_988pjferjh8lz0nn_shouldAppend(editor)||ctrl.items().remove(),global$4.each(getSelectors(editor,e.doc||editor.getDoc(),compileFilter($_988pjferjh8lz0nn_getFileFilter(editor))),function(selector){if(-1===selector.indexOf(".mce-")&&(!selectorFilter||selectorFilter(selector))){var selectorGroups=function(groups,selector){return global$4.grep(groups,function(group){return!group.filter||group.filter(selector)})}(groups,selector);if(0<selectorGroups.length)global$4.each(selectorGroups,function(group){var menuItem=processSelector(selector,group);menuItem&&group.item.menu.push(menuItem)});else{var menuItem=processSelector(selector,null);menuItem&&ctrl.add(menuItem)}}}),global$4.each(groups,function(group){0<group.item.menu.length&&ctrl.add(group.item)}),e.control.renderNew()})},$_9svv1eeljh8lz0ne_get=function(editor){return{convertSelectorToFormat:function(selectorText){return $_82ojngemjh8lz0ng_defaultConvertSelectorToFormat(editor,selectorText)}}};global.add("importcss",function(editor){return $_82ojngemjh8lz0ng_setup(editor),$_9svv1eeljh8lz0ne_get(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-insertdatetime",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),getTimeFormat=function(editor){return editor.getParam("insertdatetime_timeformat",editor.translate("%H:%M:%S"))},getFormats=function(editor){return editor.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},$_dx1d2uewjh8lz0ob_getDateFormat=function(editor){return editor.getParam("insertdatetime_dateformat",editor.translate("%Y-%m-%d"))},$_dx1d2uewjh8lz0ob_getTimeFormat=getTimeFormat,$_dx1d2uewjh8lz0ob_getFormats=getFormats,$_dx1d2uewjh8lz0ob_getDefaultDateTime=function(editor){var formats=getFormats(editor);return 0<formats.length?formats[0]:getTimeFormat(editor)},$_dx1d2uewjh8lz0ob_shouldInsertTimeElement=function(editor){return editor.getParam("insertdatetime_element",!1)},daysShort="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysLong="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsLong="January February March April May June July August September October November December".split(" "),addZeros=function(value,len){if((value=""+value).length<len)for(var i=0;i<len-value.length;i++)value="0"+value;return value},getDateTime=function(editor,fmt,date){return date=date||new Date,fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=fmt.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+date.getFullYear())).replace("%y",""+date.getYear())).replace("%m",addZeros(date.getMonth()+1,2))).replace("%d",addZeros(date.getDate(),2))).replace("%H",""+addZeros(date.getHours(),2))).replace("%M",""+addZeros(date.getMinutes(),2))).replace("%S",""+addZeros(date.getSeconds(),2))).replace("%I",""+((date.getHours()+11)%12+1))).replace("%p",date.getHours()<12?"AM":"PM")).replace("%B",""+editor.translate(monthsLong[date.getMonth()]))).replace("%b",""+editor.translate(monthsShort[date.getMonth()]))).replace("%A",""+editor.translate(daysLong[date.getDay()]))).replace("%a",""+editor.translate(daysShort[date.getDay()]))).replace("%%","%")},$_6jlqe7exjh8lz0oc_insertDateTime=function(editor,format){if($_dx1d2uewjh8lz0ob_shouldInsertTimeElement(editor)){var userTime=getDateTime(editor,format),computerTime=void 0;computerTime=/%[HMSIp]/.test(format)?getDateTime(editor,"%Y-%m-%dT%H:%M"):getDateTime(editor,"%Y-%m-%d");var timeElm=editor.dom.getParent(editor.selection.getStart(),"time");timeElm?function(editor,timeElm,computerTime,userTime){var newTimeElm=editor.dom.create("time",{datetime:computerTime},userTime);timeElm.parentNode.insertBefore(newTimeElm,timeElm),editor.dom.remove(timeElm),editor.selection.select(newTimeElm,!0),editor.selection.collapse(!1)}(editor,timeElm,computerTime,userTime):editor.insertContent('<time datetime="'+computerTime+'">'+userTime+"</time>")}else editor.insertContent(getDateTime(editor,format))},$_6jlqe7exjh8lz0oc_getDateTime=getDateTime,$_asxg6pevjh8lz0oa_register=function(editor){editor.addCommand("mceInsertDate",function(){$_6jlqe7exjh8lz0oc_insertDateTime(editor,$_dx1d2uewjh8lz0ob_getDateFormat(editor))}),editor.addCommand("mceInsertTime",function(){$_6jlqe7exjh8lz0oc_insertDateTime(editor,$_dx1d2uewjh8lz0ob_getTimeFormat(editor))})},global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_3qv4wheyjh8lz0of_register=function(editor,lastFormatState){var menuItems=function(editor,lastFormatState){var formats=$_dx1d2uewjh8lz0ob_getFormats(editor);return global$1.map(formats,function(fmt){return{text:$_6jlqe7exjh8lz0oc_getDateTime(editor,fmt),onclick:function(){lastFormatState.set(fmt),$_6jlqe7exjh8lz0oc_insertDateTime(editor,fmt)}}})}(editor,lastFormatState);editor.addButton("insertdatetime",{type:"splitbutton",title:"Insert date/time",menu:menuItems,onclick:function(){var lastFormat=lastFormatState.get();$_6jlqe7exjh8lz0oc_insertDateTime(editor,lastFormat||$_dx1d2uewjh8lz0ob_getDefaultDateTime(editor))}}),editor.addMenuItem("insertdatetime",{icon:"date",text:"Date/time",menu:menuItems,context:"insert"})};global.add("insertdatetime",function(editor){var lastFormatState=Cell(null);$_asxg6pevjh8lz0oa_register(editor),$_3qv4wheyjh8lz0of_register(editor,lastFormatState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-legacyoutput",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_1u3icsf2jh8lz0ov_setup=function(editor){editor.settings.inline_styles=!1,editor.on("init",function(){!function(editor){var alignElements="p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li,table,img",fontSizes=global$1.explode(editor.settings.font_size_style_values),schema=editor.schema;editor.formatter.register({alignleft:{selector:alignElements,attributes:{align:"left"}},aligncenter:{selector:alignElements,attributes:{align:"center"}},alignright:{selector:alignElements,attributes:{align:"right"}},alignjustify:{selector:alignElements,attributes:{align:"justify"}},bold:[{inline:"b",remove:"all"},{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}}],italic:[{inline:"i",remove:"all"},{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}],fontname:{inline:"font",attributes:{face:"%value"}},fontsize:{inline:"font",attributes:{size:function(vars){return global$1.inArray(fontSizes,vars.value)+1}}},forecolor:{inline:"font",attributes:{color:"%value"}},hilitecolor:{inline:"font",styles:{backgroundColor:"%value"}}}),global$1.each("b,i,u,strike".split(","),function(name){schema.addValidElements(name+"[*]")}),schema.getElementRule("font")||schema.addValidElements("font[face|size|color|style]"),global$1.each(alignElements.split(","),function(name){var rule=schema.getElementRule(name);rule&&(rule.attributes.align||(rule.attributes.align={},rule.attributesOrder.push("align")))})}(editor)})},$_qhv2kf4jh8lz0oy_register=function(editor){editor.addButton("fontsizeselect",function(){var items=[],fontsizeFormats=editor.settings.fontsizeFormats||"8pt=1 10pt=2 12pt=3 14pt=4 18pt=5 24pt=6 36pt=7";return editor.$.each(fontsizeFormats.split(" "),function(i,item){var text=item,value=item,values=item.split("=");1<values.length&&(text=values[0],value=values[1]),items.push({text:text,value:value})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:items,fixedWidth:!0,onPostRender:function(){var self=this;editor.on("NodeChange",function(){var fontElm;(fontElm=editor.dom.getParent(editor.selection.getNode(),"font"))?self.value(fontElm.size):self.value("")})},onclick:function(e){e.control.settings.value&&editor.execCommand("FontSize",!1,e.control.settings.value)}}}),editor.addButton("fontselect",function(){var items=[],fonts=function(formats){for(var i=(formats=formats.replace(/;$/,"").split(";")).length;i--;)formats[i]=formats[i].split("=");return formats}(editor.settings.font_formats||"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats");return editor.$.each(fonts,function(i,font){items.push({text:{raw:font[0]},value:font[1],textStyle:-1===font[1].indexOf("dings")?"font-family:"+font[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:items,fixedWidth:!0,onPostRender:function(){var self=this;editor.on("NodeChange",function(){var fontElm;(fontElm=editor.dom.getParent(editor.selection.getNode(),"font"))?self.value(fontElm.face):self.value("")})},onselect:function(e){e.control.settings.value&&editor.execCommand("FontName",!1,e.control.settings.value)}}})};global.add("legacyoutput",function(editor){$_1u3icsf2jh8lz0ov_setup(editor),$_qhv2kf4jh8lz0oy_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-link",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.VK"),getTargetList=function(editorSettings){return editorSettings.target_list},getRelList=function(editorSettings){return editorSettings.rel_list},getLinkClassList=function(editorSettings){return editorSettings.link_class_list},$_4854y3fajh8lz0pg_assumeExternalTargets=function(editorSettings){return"boolean"==typeof editorSettings.link_assume_external_targets&&editorSettings.link_assume_external_targets},$_4854y3fajh8lz0pg_hasContextToolbar=function(editorSettings){return"boolean"==typeof editorSettings.link_context_toolbar&&editorSettings.link_context_toolbar},$_4854y3fajh8lz0pg_getLinkList=function(editorSettings){return editorSettings.link_list},$_4854y3fajh8lz0pg_hasDefaultLinkTarget=function(editorSettings){return"string"==typeof editorSettings.default_link_target},$_4854y3fajh8lz0pg_getDefaultLinkTarget=function(editorSettings){return editorSettings.default_link_target},$_4854y3fajh8lz0pg_getTargetList=getTargetList,$_4854y3fajh8lz0pg_setTargetList=function(editor,list){editor.settings.target_list=list},$_4854y3fajh8lz0pg_shouldShowTargetList=function(editorSettings){return!1!==getTargetList(editorSettings)},$_4854y3fajh8lz0pg_getRelList=getRelList,$_4854y3fajh8lz0pg_hasRelList=function(editorSettings){return void 0!==getRelList(editorSettings)},$_4854y3fajh8lz0pg_getLinkClassList=getLinkClassList,$_4854y3fajh8lz0pg_hasLinkClassList=function(editorSettings){return void 0!==getLinkClassList(editorSettings)},$_4854y3fajh8lz0pg_shouldShowLinkTitle=function(editorSettings){return!1!==editorSettings.link_title},$_4854y3fajh8lz0pg_allowUnsafeLinkTarget=function(editorSettings){return"boolean"==typeof editorSettings.allow_unsafe_link_target&&editorSettings.allow_unsafe_link_target},global$2=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$3=tinymce.util.Tools.resolve("tinymce.Env"),$_1rtozzfbjh8lz0po_open=function(url){if(!global$3.ie||10<global$3.ie){var link=document.createElement("a");link.target="_blank",link.href=url,link.rel="noreferrer noopener";var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(link,evt){document.body.appendChild(link),link.dispatchEvent(evt),document.body.removeChild(link)}(link,evt)}else{var win=window.open("","_blank");if(win){win.opener=null;var doc=win.document;doc.open(),doc.write('<meta http-equiv="refresh" content="0; url='+global$2.DOM.encode(url)+'">'),doc.close()}}},global$4=tinymce.util.Tools.resolve("tinymce.util.Tools"),toggleTargetRules=function(rel,isUnsafe){var rules=["noopener"],newRel=rel?rel.split(/\s+/):[],removeTargetRules=function(rel){return rel.filter(function(val){return-1===global$4.inArray(rules,val)})};return(newRel=isUnsafe?function(rel){return(rel=removeTargetRules(rel)).length?rel.concat(rules):rules}(newRel):removeTargetRules(newRel)).length?function(rel){return global$4.trim(rel.sort().join(" "))}(newRel):null},getAnchorElement=function(editor,selectedElm){return selectedElm=selectedElm||editor.selection.getNode(),isImageFigure(selectedElm)?editor.dom.select("a[href]",selectedElm)[0]:editor.dom.getParent(selectedElm,"a[href]")},isLink=function(elm){return elm&&"A"===elm.nodeName&&elm.href},isImageFigure=function(node){return node&&"FIGURE"===node.nodeName&&/\bimage\b/i.test(node.className)},unlinkImageFigure=function(editor,fig){var a,img;(img=editor.dom.select("img",fig)[0])&&(a=editor.dom.getParents(img,"a[href]",fig)[0])&&(a.parentNode.insertBefore(img,a),editor.dom.remove(a))},linkImageFigure=function(editor,fig,attrs){var a,img;(img=editor.dom.select("img",fig)[0])&&(a=editor.dom.create("a",attrs),img.parentNode.insertBefore(a,img),a.appendChild(img))},$_542aayfejh8lz0pr_link=function(editor,attachState){return function(data){editor.undoManager.transact(function(){var selectedElm=editor.selection.getNode(),anchorElm=getAnchorElement(editor,selectedElm),linkAttrs={href:data.href,target:data.target?data.target:null,rel:data.rel?data.rel:null,class:data.class?data.class:null,title:data.title?data.title:null};$_4854y3fajh8lz0pg_hasRelList(editor.settings)||!1!==$_4854y3fajh8lz0pg_allowUnsafeLinkTarget(editor.settings)||(linkAttrs.rel=toggleTargetRules(linkAttrs.rel,"_blank"===linkAttrs.target)),data.href===attachState.href&&(attachState.attach(),attachState={}),anchorElm?(editor.focus(),data.hasOwnProperty("text")&&("innerText"in anchorElm?anchorElm.innerText=data.text:anchorElm.textContent=data.text),editor.dom.setAttribs(anchorElm,linkAttrs),editor.selection.select(anchorElm),editor.undoManager.add()):isImageFigure(selectedElm)?linkImageFigure(editor,selectedElm,linkAttrs):data.hasOwnProperty("text")?editor.insertContent(editor.dom.createHTML("a",linkAttrs,editor.dom.encode(data.text))):editor.execCommand("mceInsertLink",!1,linkAttrs)})}},$_542aayfejh8lz0pr_unlink=function(editor){return function(){editor.undoManager.transact(function(){var node=editor.selection.getNode();isImageFigure(node)?unlinkImageFigure(editor,node):editor.execCommand("unlink")})}},$_542aayfejh8lz0pr_isLink=isLink,$_542aayfejh8lz0pr_hasLinks=function(elements){return 0<global$4.grep(elements,isLink).length},$_542aayfejh8lz0pr_isOnlyTextSelected=function(html){return!(/</.test(html)&&(!/^<a [^>]+>[^<]+<\/a>$/.test(html)||-1===html.indexOf("href=")))},$_542aayfejh8lz0pr_getAnchorElement=getAnchorElement,$_542aayfejh8lz0pr_getAnchorText=function(selection,anchorElm){return function(text){return text.replace(/\uFEFF/g,"")}(anchorElm?anchorElm.innerText||anchorElm.textContent:selection.getContent({format:"text"}))},$_542aayfejh8lz0pr_toggleTargetRules=toggleTargetRules,global$5=tinymce.util.Tools.resolve("tinymce.util.Delay"),global$6=tinymce.util.Tools.resolve("tinymce.util.XHR"),attachState={},buildListItems=function(inputList,itemCallback,startItems){var appendItems=function(values,output){return output=output||[],global$4.each(values,function(item){var menuItem={text:item.text||item.title};item.menu?menuItem.menu=appendItems(item.menu):(menuItem.value=item.value,itemCallback&&itemCallback(menuItem)),output.push(menuItem)}),output};return appendItems(inputList,startItems||[])},delayedConfirm=function(editor,message,callback){var rng=editor.selection.getRng();global$5.setEditorTimeout(editor,function(){editor.windowManager.confirm(message,function(state){editor.selection.setRng(rng),callback(state)})})},showDialog=function(editor,linkList){var anchorElm,initialText,win,onlyText,textListCtrl,linkListCtrl,relListCtrl,targetListCtrl,classListCtrl,linkTitleCtrl,value,data={},selection=editor.selection,dom=editor.dom,linkListChangeHandler=function(e){var textCtrl=win.find("#text");(!textCtrl.value()||e.lastControl&&textCtrl.value()===e.lastControl.text())&&textCtrl.value(e.control.text()),win.find("#href").value(e.control.value())},updateText=function(){initialText||!onlyText||data.text||this.parent().parent().find("#text")[0].value(this.value())};onlyText=$_542aayfejh8lz0pr_isOnlyTextSelected(selection.getContent()),anchorElm=$_542aayfejh8lz0pr_getAnchorElement(editor),data.text=initialText=$_542aayfejh8lz0pr_getAnchorText(editor.selection,anchorElm),data.href=anchorElm?dom.getAttrib(anchorElm,"href"):"",anchorElm?data.target=dom.getAttrib(anchorElm,"target"):$_4854y3fajh8lz0pg_hasDefaultLinkTarget(editor.settings)&&(data.target=$_4854y3fajh8lz0pg_getDefaultLinkTarget(editor.settings)),(value=dom.getAttrib(anchorElm,"rel"))&&(data.rel=value),(value=dom.getAttrib(anchorElm,"class"))&&(data.class=value),(value=dom.getAttrib(anchorElm,"title"))&&(data.title=value),onlyText&&(textListCtrl={name:"text",type:"textbox",size:40,label:"Text to display",onchange:function(){data.text=this.value()}}),linkList&&(linkListCtrl={type:"listbox",label:"Link list",values:buildListItems(linkList,function(item){item.value=editor.convertURL(item.value||item.url,"href")},[{text:"None",value:""}]),onselect:linkListChangeHandler,value:editor.convertURL(data.href,"href"),onPostRender:function(){linkListCtrl=this}}),$_4854y3fajh8lz0pg_shouldShowTargetList(editor.settings)&&(void 0===$_4854y3fajh8lz0pg_getTargetList(editor.settings)&&$_4854y3fajh8lz0pg_setTargetList(editor,[{text:"None",value:""},{text:"New window",value:"_blank"}]),targetListCtrl={name:"target",type:"listbox",label:"Target",values:buildListItems($_4854y3fajh8lz0pg_getTargetList(editor.settings))}),$_4854y3fajh8lz0pg_hasRelList(editor.settings)&&(relListCtrl={name:"rel",type:"listbox",label:"Rel",values:buildListItems($_4854y3fajh8lz0pg_getRelList(editor.settings),function(item){!1===$_4854y3fajh8lz0pg_allowUnsafeLinkTarget(editor.settings)&&(item.value=$_542aayfejh8lz0pr_toggleTargetRules(item.value,"_blank"===data.target))})}),$_4854y3fajh8lz0pg_hasLinkClassList(editor.settings)&&(classListCtrl={name:"class",type:"listbox",label:"Class",values:buildListItems($_4854y3fajh8lz0pg_getLinkClassList(editor.settings),function(item){item.value&&(item.textStyle=function(){return editor.formatter.getCssText({inline:"a",classes:[item.value]})})})}),$_4854y3fajh8lz0pg_shouldShowLinkTitle(editor.settings)&&(linkTitleCtrl={name:"title",type:"textbox",label:"Title",value:data.title}),win=editor.windowManager.open({title:"Insert link",data:data,body:[{name:"href",type:"filepicker",filetype:"file",size:40,autofocus:!0,label:"Url",onchange:function(e){var meta=e.meta||{};linkListCtrl&&linkListCtrl.value(editor.convertURL(this.value(),"href")),global$4.each(e.meta,function(value,key){var inp=win.find("#"+key);"text"===key?0===initialText.length&&(inp.value(value),data.text=value):inp.value(value)}),meta.attach&&(attachState={href:this.value(),attach:meta.attach}),meta.text||updateText.call(this)},onkeyup:updateText,onpaste:updateText,onbeforecall:function(e){e.meta=win.toJSON()}},textListCtrl,linkTitleCtrl,function(url){var anchorList=[];if(global$4.each(editor.dom.select("a:not([href])"),function(anchor){var id=anchor.name||anchor.id;id&&anchorList.push({text:id,value:"#"+id,selected:-1!==url.indexOf("#"+id)})}),anchorList.length)return anchorList.unshift({text:"None",value:""}),{name:"anchor",type:"listbox",label:"Anchors",values:anchorList,onselect:linkListChangeHandler}}(data.href),linkListCtrl,relListCtrl,targetListCtrl,classListCtrl],onSubmit:function(e){var assumeExternalTargets=$_4854y3fajh8lz0pg_assumeExternalTargets(editor.settings),insertLink=$_542aayfejh8lz0pr_link(editor,attachState),removeLink=$_542aayfejh8lz0pr_unlink(editor),resultData=global$4.extend({},data,e.data),href=resultData.href;href?(onlyText&&resultData.text!==initialText||delete resultData.text,0<href.indexOf("@")&&-1===href.indexOf("//")&&-1===href.indexOf("mailto:")?delayedConfirm(editor,"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",function(state){state&&(resultData.href="mailto:"+href),insertLink(resultData)}):!0===assumeExternalTargets&&!/^\w+:/i.test(href)||!1===assumeExternalTargets&&/^\s*www[\.|\d\.]/i.test(href)?delayedConfirm(editor,"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",function(state){state&&(resultData.href="http://"+href),insertLink(resultData)}):insertLink(resultData)):removeLink()}})},$_bsp827fgjh8lz0pw_open=function(editor){!function(editor,callback){var linkList=$_4854y3fajh8lz0pg_getLinkList(editor.settings);"string"==typeof linkList?global$6.send({url:linkList,success:function(text){callback(editor,JSON.parse(text))}}):"function"==typeof linkList?linkList(function(list){callback(editor,list)}):callback(editor,linkList)}(editor,showDialog)},getLink=function(editor,elm){return editor.dom.getParent(elm,"a[href]")},getSelectedLink=function(editor){return getLink(editor,editor.selection.getStart())},gotoLink=function(editor,a){if(a){var href=function(elm){var href=elm.getAttribute("data-mce-href");return href||elm.getAttribute("href")}(a);if(/^#/.test(href)){var targetEl=editor.$(href);targetEl.length&&editor.selection.scrollIntoView(targetEl[0],!0)}else $_1rtozzfbjh8lz0po_open(a.href)}},$_8d8mxaf8jh8lz0pd_openDialog=function(editor){return function(){$_bsp827fgjh8lz0pw_open(editor)}},$_8d8mxaf8jh8lz0pd_gotoSelectedLink=function(editor){return function(){gotoLink(editor,getSelectedLink(editor))}},$_8d8mxaf8jh8lz0pd_leftClickedOnAHref=function(editor){return function(elm){var sel,rng,node;return!!($_4854y3fajh8lz0pg_hasContextToolbar(editor.settings)&&!function(editor){var contextmenu=editor.plugins.contextmenu;return!!contextmenu&&contextmenu.isContextMenuVisible()}(editor)&&$_542aayfejh8lz0pr_isLink(elm)&&3===(node=(rng=(sel=editor.selection).getRng()).startContainer).nodeType&&sel.isCollapsed()&&0<rng.startOffset&&rng.startOffset<node.data.length)}},$_8d8mxaf8jh8lz0pd_setupGotoLinks=function(editor){editor.on("click",function(e){var link=getLink(editor,e.target);link&&global$1.metaKeyPressed(e)&&(e.preventDefault(),gotoLink(editor,link))}),editor.on("keydown",function(e){var link=getSelectedLink(editor);link&&13===e.keyCode&&function(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(e)&&(e.preventDefault(),gotoLink(editor,link))})},$_8d8mxaf8jh8lz0pd_toggleActiveState=function(editor){return function(){var self=this;editor.on("nodechange",function(e){self.active(!editor.readonly&&!!$_542aayfejh8lz0pr_getAnchorElement(editor,e.element))})}},$_8d8mxaf8jh8lz0pd_toggleViewLinkState=function(editor){return function(){var self=this,toggleVisibility=function(e){$_542aayfejh8lz0pr_hasLinks(e.parents)?self.show():self.hide()};$_542aayfejh8lz0pr_hasLinks(editor.dom.getParents(editor.selection.getStart()))||self.hide(),editor.on("nodechange",toggleVisibility),self.on("remove",function(){editor.off("nodechange",toggleVisibility)})}},$_3527iyf7jh8lz0pb_register=function(editor){editor.addCommand("mceLink",$_8d8mxaf8jh8lz0pd_openDialog(editor))},$_fpyya7fjjh8lz0q4_setup=function(editor){editor.addShortcut("Meta+K","",$_8d8mxaf8jh8lz0pd_openDialog(editor))},$_f27siffkjh8lz0q5_setupButtons=function(editor){editor.addButton("link",{active:!1,icon:"link",tooltip:"Insert/edit link",onclick:$_8d8mxaf8jh8lz0pd_openDialog(editor),onpostrender:$_8d8mxaf8jh8lz0pd_toggleActiveState(editor)}),editor.addButton("unlink",{active:!1,icon:"unlink",tooltip:"Remove link",onclick:$_542aayfejh8lz0pr_unlink(editor),onpostrender:$_8d8mxaf8jh8lz0pd_toggleActiveState(editor)}),editor.addContextToolbar&&editor.addButton("openlink",{icon:"newtab",tooltip:"Open link",onclick:$_8d8mxaf8jh8lz0pd_gotoSelectedLink(editor)})},$_f27siffkjh8lz0q5_setupMenuItems=function(editor){editor.addMenuItem("openlink",{text:"Open link",icon:"newtab",onclick:$_8d8mxaf8jh8lz0pd_gotoSelectedLink(editor),onPostRender:$_8d8mxaf8jh8lz0pd_toggleViewLinkState(editor),prependToContext:!0}),editor.addMenuItem("link",{icon:"link",text:"Link",shortcut:"Meta+K",onclick:$_8d8mxaf8jh8lz0pd_openDialog(editor),stateSelector:"a[href]",context:"insert",prependToContext:!0}),editor.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onclick:$_542aayfejh8lz0pr_unlink(editor),stateSelector:"a[href]"})},$_f27siffkjh8lz0q5_setupContextToolbars=function(editor){editor.addContextToolbar&&editor.addContextToolbar($_8d8mxaf8jh8lz0pd_leftClickedOnAHref(editor),"openlink | link unlink")};global.add("link",function(editor){$_f27siffkjh8lz0q5_setupButtons(editor),$_f27siffkjh8lz0q5_setupMenuItems(editor),$_f27siffkjh8lz0q5_setupContextToolbars(editor),$_8d8mxaf8jh8lz0pd_setupGotoLinks(editor),$_3527iyf7jh8lz0pb_register(editor),$_fpyya7fjjh8lz0q4_setup(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-lists",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),global$2=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),global$3=tinymce.util.Tools.resolve("tinymce.util.VK"),global$4=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),global$5=tinymce.util.Tools.resolve("tinymce.util.Tools"),global$6=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),isBr=function(node){return node&&"BR"===node.nodeName},$_zhglffzjh8lz0s2_isTextNode=function(node){return node&&3===node.nodeType},$_zhglffzjh8lz0s2_isListNode=function(node){return node&&/^(OL|UL|DL)$/.test(node.nodeName)},$_zhglffzjh8lz0s2_isListItemNode=function(node){return node&&/^(LI|DT|DD)$/.test(node.nodeName)},$_zhglffzjh8lz0s2_isTableCellNode=function(node){return node&&/^(TH|TD)$/.test(node.nodeName)},$_zhglffzjh8lz0s2_isBr=isBr,$_zhglffzjh8lz0s2_isFirstChild=function(node){return node.parentNode.firstChild===node},$_zhglffzjh8lz0s2_isLastChild=function(node){return node.parentNode.lastChild===node},$_zhglffzjh8lz0s2_isTextBlock=function(editor,node){return node&&!!editor.schema.getTextBlockElements()[node.nodeName]},$_zhglffzjh8lz0s2_isBlock=function(node,blockElements){return node&&node.nodeName in blockElements},$_zhglffzjh8lz0s2_isBogusBr=function(dom,node){return!!isBr(node)&&!(!dom.isBlock(node.nextSibling)||isBr(node.previousSibling))},$_zhglffzjh8lz0s2_isEmpty=function(dom,elm,keepBookmarks){var empty=dom.isEmpty(elm);return!(keepBookmarks&&0<dom.select("span[data-mce-type=bookmark]",elm).length)&&empty},$_zhglffzjh8lz0s2_isChildOfBody=function(dom,elm){return dom.isChildOf(elm,dom.getRoot())},getNormalizedEndPoint=function(container,offset){var node=global$1.getNode(container,offset);return $_zhglffzjh8lz0s2_isListItemNode(container)&&$_zhglffzjh8lz0s2_isTextNode(node)?{container:node,offset:offset>=container.childNodes.length?node.data.length:0}:{container:container,offset:offset}},$_83g2fsfyjh8lz0s0_normalizeRange=function(rng){var outRng=rng.cloneRange(),rangeStart=getNormalizedEndPoint(rng.startContainer,rng.startOffset);outRng.setStart(rangeStart.container,rangeStart.offset);var rangeEnd=getNormalizedEndPoint(rng.endContainer,rng.endOffset);return outRng.setEnd(rangeEnd.container,rangeEnd.offset),outRng},DOM=global$6.DOM,$_99hdjifxjh8lz0rx_createBookmark=function(rng){var bookmark={},setupEndPoint=function(start){var offsetNode,container,offset;container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],1===container.nodeType&&(offsetNode=DOM.create("span",{"data-mce-type":"bookmark"}),container.hasChildNodes()?(offset=Math.min(offset,container.childNodes.length-1),start?container.insertBefore(offsetNode,container.childNodes[offset]):DOM.insertAfter(offsetNode,container.childNodes[offset])):container.appendChild(offsetNode),container=offsetNode,offset=0),bookmark[start?"startContainer":"endContainer"]=container,bookmark[start?"startOffset":"endOffset"]=offset};return setupEndPoint(!0),rng.collapsed||setupEndPoint(),bookmark},$_99hdjifxjh8lz0rx_resolveBookmark=function(bookmark){function restoreEndPoint(start){var container,offset,node;container=node=bookmark[start?"startContainer":"endContainer"],offset=bookmark[start?"startOffset":"endOffset"],container&&(1===container.nodeType&&(offset=function(container){for(var node=container.parentNode.firstChild,idx=0;node;){if(node===container)return idx;1===node.nodeType&&"bookmark"===node.getAttribute("data-mce-type")||idx++,node=node.nextSibling}return-1}(container),container=container.parentNode,DOM.remove(node),!container.hasChildNodes()&&DOM.isBlock(container)&&container.appendChild(DOM.create("br"))),bookmark[start?"startContainer":"endContainer"]=container,bookmark[start?"startOffset":"endOffset"]=offset)}restoreEndPoint(!0),restoreEndPoint();var rng=DOM.createRng();return rng.setStart(bookmark.startContainer,bookmark.startOffset),bookmark.endContainer&&rng.setEnd(bookmark.endContainer,bookmark.endOffset),$_83g2fsfyjh8lz0s0_normalizeRange(rng)},DOM$1=global$6.DOM,normalizeList=function(dom,ul){var sibling,parentNode=ul.parentNode;"LI"===parentNode.nodeName&&parentNode.firstChild===ul&&((sibling=parentNode.previousSibling)&&"LI"===sibling.nodeName?(sibling.appendChild(ul),$_zhglffzjh8lz0s2_isEmpty(dom,parentNode)&&DOM$1.remove(parentNode)):DOM$1.setStyle(parentNode,"listStyleType","none")),$_zhglffzjh8lz0s2_isListNode(parentNode)&&(sibling=parentNode.previousSibling)&&"LI"===sibling.nodeName&&sibling.appendChild(ul)},$_emx2czg0jh8lz0s4_normalizeLists=function(dom,element){global$5.each(global$5.grep(dom.select("ol,ul",element)),function(ul){normalizeList(dom,ul)})},global$7=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),getParentList=function(editor){var selectionStart=editor.selection.getStart(!0);return editor.dom.getParent(selectionStart,"OL,UL,DL",getClosestListRootElm(editor,selectionStart))},getClosestListRootElm=function(editor,elm){var parentTableCell=editor.dom.getParents(elm,"TD,TH");return 0<parentTableCell.length?parentTableCell[0]:editor.getBody()},$_ukg72g1jh8lz0s6={getParentList:getParentList,getSelectedSubLists:function(editor){var parentList=getParentList(editor),selectedBlocks=editor.selection.getSelectedBlocks();return function(parentList,selectedBlocks){return parentList&&1===selectedBlocks.length&&selectedBlocks[0]===parentList}(parentList,selectedBlocks)?function(parentList){return global$5.grep(parentList.querySelectorAll("ol,ul,dl"),function(elm){return $_zhglffzjh8lz0s2_isListNode(elm)})}(parentList):global$5.grep(selectedBlocks,function(elm){return $_zhglffzjh8lz0s2_isListNode(elm)&&parentList!==elm})},getSelectedListItems:function(editor){var selectedBlocks=editor.selection.getSelectedBlocks();return global$5.grep(function(editor,elms){var listItemsElms=global$5.map(elms,function(elm){var parentLi=editor.dom.getParent(elm,"li,dd,dt",getClosestListRootElm(editor,elm));return parentLi||elm});return global$7.unique(listItemsElms)}(editor,selectedBlocks),function(block){return $_zhglffzjh8lz0s2_isListItemNode(block)})},getClosestListRootElm:getClosestListRootElm},global$8=tinymce.util.Tools.resolve("tinymce.Env"),DOM$2=global$6.DOM,$_doauksg4jh8lz0sb_createNewTextBlock=function(editor,contentNode,blockName){var node,textBlock,hasContentNode,fragment=DOM$2.createFragment(),blockElements=editor.schema.getBlockElements();if(editor.settings.forced_root_block&&(blockName=blockName||editor.settings.forced_root_block),blockName&&((textBlock=DOM$2.create(blockName)).tagName===editor.settings.forced_root_block&&DOM$2.setAttribs(textBlock,editor.settings.forced_root_block_attrs),$_zhglffzjh8lz0s2_isBlock(contentNode.firstChild,blockElements)||fragment.appendChild(textBlock)),contentNode)for(;node=contentNode.firstChild;){var nodeName=node.nodeName;hasContentNode||"SPAN"===nodeName&&"bookmark"===node.getAttribute("data-mce-type")||(hasContentNode=!0),$_zhglffzjh8lz0s2_isBlock(node,blockElements)?(fragment.appendChild(node),textBlock=null):blockName?(textBlock||(textBlock=DOM$2.create(blockName),fragment.appendChild(textBlock)),textBlock.appendChild(node)):fragment.appendChild(node)}return editor.settings.forced_root_block?hasContentNode||global$8.ie&&!(10<global$8.ie)||textBlock.appendChild(DOM$2.create("br",{"data-mce-bogus":"1"})):fragment.appendChild(DOM$2.create("br")),fragment},DOM$3=global$6.DOM,$_2pwmf9g3jh8lz0s9_splitList=function(editor,ul,li,newBlock){var tmpRng,fragment,bookmarks,node,targetNode;for(bookmarks=DOM$3.select('span[data-mce-type="bookmark"]',ul),newBlock=newBlock||$_doauksg4jh8lz0sb_createNewTextBlock(editor,li),(tmpRng=DOM$3.createRng()).setStartAfter(li),tmpRng.setEndAfter(ul),node=(fragment=tmpRng.extractContents()).firstChild;node;node=node.firstChild)if("LI"===node.nodeName&&editor.dom.isEmpty(node)){DOM$3.remove(node);break}editor.dom.isEmpty(fragment)||DOM$3.insertAfter(fragment,ul),DOM$3.insertAfter(newBlock,ul),$_zhglffzjh8lz0s2_isEmpty(editor.dom,li.parentNode)&&(targetNode=li.parentNode,global$5.each(bookmarks,function(node){targetNode.parentNode.insertBefore(node,li.parentNode)}),DOM$3.remove(targetNode)),DOM$3.remove(li),$_zhglffzjh8lz0s2_isEmpty(editor.dom,ul)&&DOM$3.remove(ul)},DOM$4=global$6.DOM,removeEmptyLi=function(dom,li){$_zhglffzjh8lz0s2_isEmpty(dom,li)&&DOM$4.remove(li)},outdent=function(editor,li){var ulParent,newBlock,ul=li.parentNode;return ul?(ulParent=ul.parentNode,ul===editor.getBody()||("DD"===li.nodeName?DOM$4.rename(li,"DT"):$_zhglffzjh8lz0s2_isFirstChild(li)&&$_zhglffzjh8lz0s2_isLastChild(li)?"LI"===ulParent.nodeName?(DOM$4.insertAfter(li,ulParent),removeEmptyLi(editor.dom,ulParent),DOM$4.remove(ul)):$_zhglffzjh8lz0s2_isListNode(ulParent)?DOM$4.remove(ul,!0):(ulParent.insertBefore($_doauksg4jh8lz0sb_createNewTextBlock(editor,li),ul),DOM$4.remove(ul)):$_zhglffzjh8lz0s2_isFirstChild(li)?"LI"===ulParent.nodeName?(DOM$4.insertAfter(li,ulParent),li.appendChild(ul),removeEmptyLi(editor.dom,ulParent)):$_zhglffzjh8lz0s2_isListNode(ulParent)?ulParent.insertBefore(li,ul):(ulParent.insertBefore($_doauksg4jh8lz0sb_createNewTextBlock(editor,li),ul),DOM$4.remove(li)):$_zhglffzjh8lz0s2_isLastChild(li)?"LI"===ulParent.nodeName?DOM$4.insertAfter(li,ulParent):$_zhglffzjh8lz0s2_isListNode(ulParent)?DOM$4.insertAfter(li,ul):(DOM$4.insertAfter($_doauksg4jh8lz0sb_createNewTextBlock(editor,li),ul),DOM$4.remove(li)):(newBlock="LI"===ulParent.nodeName?(ul=ulParent,$_doauksg4jh8lz0sb_createNewTextBlock(editor,li,"LI")):$_zhglffzjh8lz0s2_isListNode(ulParent)?$_doauksg4jh8lz0sb_createNewTextBlock(editor,li,"LI"):$_doauksg4jh8lz0sb_createNewTextBlock(editor,li),$_2pwmf9g3jh8lz0s9_splitList(editor,ul,li,newBlock),$_emx2czg0jh8lz0s4_normalizeLists(editor.dom,ul.parentNode)))):removeEmptyLi(editor.dom,li),!0},$_7womq3fvjh8lz0ru_outdent=outdent,$_7womq3fvjh8lz0ru_outdentSelection=function(editor){var listElements=$_ukg72g1jh8lz0s6.getSelectedListItems(editor);if(listElements.length){var bookmark=$_99hdjifxjh8lz0rx_createBookmark(editor.selection.getRng()),i=void 0,y=void 0,root=$_ukg72g1jh8lz0s6.getClosestListRootElm(editor,editor.selection.getStart(!0));for(i=listElements.length;i--;)for(var node=listElements[i].parentNode;node&&node!==root;){for(y=listElements.length;y--;)if(listElements[y]===node){listElements.splice(i,1);break}node=node.parentNode}for(i=0;i<listElements.length&&(outdent(editor,listElements[i])||0!==i);i++);return editor.selection.setRng($_99hdjifxjh8lz0rx_resolveBookmark(bookmark)),editor.nodeChanged(),!0}},setAttribs=function(elm,attrs){global$5.each(attrs,function(value,key){elm.setAttribute(key,value)})},updateListWithDetails=function(dom,el,detail){!function(dom,el,detail){var type=detail["list-style-type"]?detail["list-style-type"]:null;dom.setStyle(el,"list-style-type",type)}(dom,el,detail),function(dom,el,detail){setAttribs(el,detail["list-attributes"]),global$5.each(dom.select("li",el),function(li){setAttribs(li,detail["list-item-attributes"])})}(dom,el,detail)},getEndPointNode=function(editor,rng,start,root){var container,offset;for(container=rng[start?"startContainer":"endContainer"],offset=rng[start?"startOffset":"endOffset"],1===container.nodeType&&(container=container.childNodes[Math.min(offset,container.childNodes.length-1)]||container),!start&&$_zhglffzjh8lz0s2_isBr(container.nextSibling)&&(container=container.nextSibling);container.parentNode!==root;){if($_zhglffzjh8lz0s2_isTextBlock(editor,container))return container;if(/^(TD|TH)$/.test(container.parentNode.nodeName))return container;container=container.parentNode}return container},applyList=function(editor,listName,detail){void 0===detail&&(detail={});var bookmark,rng=editor.selection.getRng(!0),listItemName="LI",root=$_ukg72g1jh8lz0s6.getClosestListRootElm(editor,editor.selection.getStart(!0)),dom=editor.dom;"false"!==dom.getContentEditable(editor.selection.getNode())&&("DL"===(listName=listName.toUpperCase())&&(listItemName="DT"),bookmark=$_99hdjifxjh8lz0rx_createBookmark(rng),global$5.each(function(editor,rng,root){for(var block,textBlocks=[],dom=editor.dom,startNode=getEndPointNode(editor,rng,!0,root),endNode=getEndPointNode(editor,rng,!1,root),siblings=[],node=startNode;node&&(siblings.push(node),node!==endNode);node=node.nextSibling);return global$5.each(siblings,function(node){if($_zhglffzjh8lz0s2_isTextBlock(editor,node))return textBlocks.push(node),void(block=null);if(dom.isBlock(node)||$_zhglffzjh8lz0s2_isBr(node))return $_zhglffzjh8lz0s2_isBr(node)&&dom.remove(node),void(block=null);var nextSibling=node.nextSibling;global$4.isBookmarkNode(node)&&($_zhglffzjh8lz0s2_isTextBlock(editor,nextSibling)||!nextSibling&&node.parentNode===root)?block=null:(block||(block=dom.create("p"),node.parentNode.insertBefore(block,node),textBlocks.push(block)),block.appendChild(node))}),textBlocks}(editor,rng,root),function(block){var listBlock,sibling;(sibling=block.previousSibling)&&$_zhglffzjh8lz0s2_isListNode(sibling)&&sibling.nodeName===listName&&function(dom,sib,detail){var sibStyle=dom.getStyle(sib,"list-style-type"),detailStyle=detail?detail["list-style-type"]:"";return sibStyle===(detailStyle=null===detailStyle?"":detailStyle)}(dom,sibling,detail)?(listBlock=sibling,block=dom.rename(block,listItemName),sibling.appendChild(block)):(listBlock=dom.create(listName),block.parentNode.insertBefore(listBlock,block),listBlock.appendChild(block),block=dom.rename(block,listItemName)),function(dom,element,styles){global$5.each(styles,function(style){return dom.setStyle(element,((_a={})[style]="",_a));var _a})}(dom,block,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),updateListWithDetails(dom,listBlock,detail),mergeWithAdjacentLists(editor.dom,listBlock)}),editor.selection.setRng($_99hdjifxjh8lz0rx_resolveBookmark(bookmark)))},removeList=function(editor){var bookmark=$_99hdjifxjh8lz0rx_createBookmark(editor.selection.getRng(!0)),root=$_ukg72g1jh8lz0s6.getClosestListRootElm(editor,editor.selection.getStart(!0)),listItems=$_ukg72g1jh8lz0s6.getSelectedListItems(editor),emptyListItems=global$5.grep(listItems,function(li){return editor.dom.isEmpty(li)});listItems=global$5.grep(listItems,function(li){return!editor.dom.isEmpty(li)}),global$5.each(emptyListItems,function(li){$_zhglffzjh8lz0s2_isEmpty(editor.dom,li)&&$_7womq3fvjh8lz0ru_outdent(editor,li)}),global$5.each(listItems,function(li){var node,rootList;if(li.parentNode!==editor.getBody()){for(node=li;node&&node!==root;node=node.parentNode)$_zhglffzjh8lz0s2_isListNode(node)&&(rootList=node);$_2pwmf9g3jh8lz0s9_splitList(editor,rootList,li),$_emx2czg0jh8lz0s4_normalizeLists(editor.dom,rootList.parentNode)}}),editor.selection.setRng($_99hdjifxjh8lz0rx_resolveBookmark(bookmark))},shouldMerge=function(dom,list1,list2){return function(list1,list2){return list1&&list2&&$_zhglffzjh8lz0s2_isListNode(list1)&&list1.nodeName===list2.nodeName}(list1,list2)&&function(dom,list1,list2){return dom.getStyle(list1,"list-style-type",!0)===dom.getStyle(list2,"list-style-type",!0)}(dom,list1,list2)&&(elm2=list2,list1.className===elm2.className);var elm2},mergeWithAdjacentLists=function(dom,listBlock){var sibling,node;if(sibling=listBlock.nextSibling,shouldMerge(dom,listBlock,sibling)){for(;node=sibling.firstChild;)listBlock.appendChild(node);dom.remove(sibling)}if(sibling=listBlock.previousSibling,shouldMerge(dom,listBlock,sibling)){for(;node=sibling.lastChild;)listBlock.insertBefore(node,listBlock.firstChild);dom.remove(sibling)}},toggleMultipleLists=function(editor,parentList,lists,listName,detail){if(parentList.nodeName!==listName||hasListStyleDetail(detail)){var bookmark=$_99hdjifxjh8lz0rx_createBookmark(editor.selection.getRng(!0));global$5.each([parentList].concat(lists),function(elm){!function(dom,list,listName,detail){if(list.nodeName!==listName){var newList=dom.rename(list,listName);updateListWithDetails(dom,newList,detail)}else updateListWithDetails(dom,list,detail)}(editor.dom,elm,listName,detail)}),editor.selection.setRng($_99hdjifxjh8lz0rx_resolveBookmark(bookmark))}else removeList(editor)},hasListStyleDetail=function(detail){return"list-style-type"in detail},$_8t3z1mfsjh8lz0rl={toggleList:function(editor,listName,detail){var parentList=$_ukg72g1jh8lz0s6.getParentList(editor),selectedSubLists=$_ukg72g1jh8lz0s6.getSelectedSubLists(editor);detail=detail||{},parentList&&0<selectedSubLists.length?toggleMultipleLists(editor,parentList,selectedSubLists,listName,detail):function(editor,parentList,listName,detail){if(parentList!==editor.getBody())if(parentList)if(parentList.nodeName!==listName||hasListStyleDetail(detail)){var bookmark=$_99hdjifxjh8lz0rx_createBookmark(editor.selection.getRng(!0));updateListWithDetails(editor.dom,parentList,detail),mergeWithAdjacentLists(editor.dom,editor.dom.rename(parentList,listName)),editor.selection.setRng($_99hdjifxjh8lz0rx_resolveBookmark(bookmark))}else removeList(editor);else applyList(editor,listName,detail)}(editor,parentList,listName,detail)},removeList:removeList,mergeWithAdjacentLists:mergeWithAdjacentLists},findNextCaretContainer=function(editor,rng,isForward,root){var nonEmptyBlocks,walker,node=rng.startContainer,offset=rng.startOffset;if(3===node.nodeType&&(isForward?offset<node.data.length:0<offset))return node;for(nonEmptyBlocks=editor.schema.getNonEmptyElements(),1===node.nodeType&&(node=global$1.getNode(node,offset)),walker=new global$2(node,root),isForward&&$_zhglffzjh8lz0s2_isBogusBr(editor.dom,node)&&walker.next();node=walker[isForward?"next":"prev2"]();){if("LI"===node.nodeName&&!node.hasChildNodes())return node;if(nonEmptyBlocks[node.nodeName])return node;if(3===node.nodeType&&0<node.data.length)return node}},hasOnlyOneBlockChild=function(dom,elm){var childNodes=elm.childNodes;return 1===childNodes.length&&!$_zhglffzjh8lz0s2_isListNode(childNodes[0])&&dom.isBlock(childNodes[0])},moveChildren=function(dom,fromElm,toElm){var node,targetElm;if(targetElm=hasOnlyOneBlockChild(dom,toElm)?toElm.firstChild:toElm,function(dom,elm){hasOnlyOneBlockChild(dom,elm)&&dom.remove(elm.firstChild,!0)}(dom,fromElm),!$_zhglffzjh8lz0s2_isEmpty(dom,fromElm,!0))for(;node=fromElm.firstChild;)targetElm.appendChild(node)},mergeLiElements=function(dom,fromElm,toElm){var node,listNode,ul=fromElm.parentNode;$_zhglffzjh8lz0s2_isChildOfBody(dom,fromElm)&&$_zhglffzjh8lz0s2_isChildOfBody(dom,toElm)&&($_zhglffzjh8lz0s2_isListNode(toElm.lastChild)&&(listNode=toElm.lastChild),ul===toElm.lastChild&&$_zhglffzjh8lz0s2_isBr(ul.previousSibling)&&dom.remove(ul.previousSibling),(node=toElm.lastChild)&&$_zhglffzjh8lz0s2_isBr(node)&&fromElm.hasChildNodes()&&dom.remove(node),$_zhglffzjh8lz0s2_isEmpty(dom,toElm,!0)&&dom.$(toElm).empty(),moveChildren(dom,fromElm,toElm),listNode&&toElm.appendChild(listNode),dom.remove(fromElm),$_zhglffzjh8lz0s2_isEmpty(dom,ul)&&ul!==dom.getRoot()&&dom.remove(ul))},mergeForward=function(editor,rng,fromLi,toLi){var dom=editor.dom;if(dom.isEmpty(toLi))!function(editor,fromLi,toLi){editor.dom.$(toLi).empty(),mergeLiElements(editor.dom,fromLi,toLi),editor.selection.setCursorLocation(toLi)}(editor,fromLi,toLi);else{var bookmark=$_99hdjifxjh8lz0rx_createBookmark(rng);mergeLiElements(dom,fromLi,toLi),editor.selection.setRng($_99hdjifxjh8lz0rx_resolveBookmark(bookmark))}},backspaceDeleteFromListToListCaret=function(editor,isForward){var ul,rng,otherLi,dom=editor.dom,selection=editor.selection,selectionStartElm=selection.getStart(),root=$_ukg72g1jh8lz0s6.getClosestListRootElm(editor,selectionStartElm),li=dom.getParent(selection.getStart(),"LI",root);if(li){if((ul=li.parentNode)===editor.getBody()&&$_zhglffzjh8lz0s2_isEmpty(dom,ul))return!0;if(rng=$_83g2fsfyjh8lz0s0_normalizeRange(selection.getRng(!0)),(otherLi=dom.getParent(findNextCaretContainer(editor,rng,isForward,root),"LI",root))&&otherLi!==li)return isForward?mergeForward(editor,rng,otherLi,li):function(editor,rng,fromLi,toLi){var bookmark=$_99hdjifxjh8lz0rx_createBookmark(rng);mergeLiElements(editor.dom,fromLi,toLi);var resolvedBookmark=$_99hdjifxjh8lz0rx_resolveBookmark(bookmark);editor.selection.setRng(resolvedBookmark)}(editor,rng,li,otherLi),!0;if(!otherLi&&!isForward&&$_8t3z1mfsjh8lz0rl.removeList(editor))return!0}return!1},backspaceDeleteCaret=function(editor,isForward){return backspaceDeleteFromListToListCaret(editor,isForward)||function(editor,isForward){var dom=editor.dom,selectionStartElm=editor.selection.getStart(),root=$_ukg72g1jh8lz0s6.getClosestListRootElm(editor,selectionStartElm),block=dom.getParent(selectionStartElm,dom.isBlock,root);if(block&&dom.isEmpty(block)){var rng=$_83g2fsfyjh8lz0s0_normalizeRange(editor.selection.getRng(!0)),otherLi_1=dom.getParent(findNextCaretContainer(editor,rng,isForward,root),"LI",root);if(otherLi_1)return editor.undoManager.transact(function(){!function(dom,block,root){var parentBlock=dom.getParent(block.parentNode,dom.isBlock,root);dom.remove(block),parentBlock&&dom.isEmpty(parentBlock)&&dom.remove(parentBlock)}(dom,block,root),$_8t3z1mfsjh8lz0rl.mergeWithAdjacentLists(dom,otherLi_1.parentNode),editor.selection.select(otherLi_1,!0),editor.selection.collapse(isForward)}),!0}return!1}(editor,isForward)},backspaceDelete=function(editor,isForward){return editor.selection.isCollapsed()?backspaceDeleteCaret(editor,isForward):function(editor){var selectionStartElm=editor.selection.getStart(),root=$_ukg72g1jh8lz0s6.getClosestListRootElm(editor,selectionStartElm);return!!(editor.dom.getParent(selectionStartElm,"LI,DT,DD",root)||0<$_ukg72g1jh8lz0s6.getSelectedListItems(editor).length)&&(editor.undoManager.transact(function(){editor.execCommand("Delete"),$_emx2czg0jh8lz0s4_normalizeLists(editor.dom,editor.getBody())}),!0)}(editor)},$_fl6g5dfojh8lz0re_setup=function(editor){editor.on("keydown",function(e){e.keyCode===global$3.BACKSPACE?backspaceDelete(editor,!1)&&e.preventDefault():e.keyCode===global$3.DELETE&&backspaceDelete(editor,!0)&&e.preventDefault()})},$_fl6g5dfojh8lz0re_backspaceDelete=backspaceDelete,$_fad7jdfnjh8lz0rb_get=function(editor){return{backspaceDelete:function(isForward){$_fl6g5dfojh8lz0re_backspaceDelete(editor,isForward)}}},DOM$5=global$6.DOM,mergeLists=function(from,to){var node;if($_zhglffzjh8lz0s2_isListNode(from)){for(;node=from.firstChild;)to.appendChild(node);DOM$5.remove(from)}},$_4rsk3ng7jh8lz0sg_indentSelection=function(editor){var li,sibling,newList,listStyle,listElements=$_ukg72g1jh8lz0s6.getSelectedListItems(editor);if(listElements.length){for(var bookmark=$_99hdjifxjh8lz0rx_createBookmark(editor.selection.getRng(!0)),i=0;i<listElements.length&&(li=listElements[i],listStyle=newList=sibling=void 0,("DT"===li.nodeName?(DOM$5.rename(li,"DD"),1):(sibling=li.previousSibling)&&$_zhglffzjh8lz0s2_isListNode(sibling)?(sibling.appendChild(li),1):sibling&&"LI"===sibling.nodeName&&$_zhglffzjh8lz0s2_isListNode(sibling.lastChild)?(sibling.lastChild.appendChild(li),mergeLists(li.lastChild,sibling.lastChild),1):(sibling=li.nextSibling)&&$_zhglffzjh8lz0s2_isListNode(sibling)?(sibling.insertBefore(li,sibling.firstChild),1):(sibling=li.previousSibling)&&"LI"===sibling.nodeName&&(newList=DOM$5.create(li.parentNode.nodeName),(listStyle=DOM$5.getStyle(li.parentNode,"listStyleType"))&&DOM$5.setStyle(newList,"listStyleType",listStyle),sibling.appendChild(newList),newList.appendChild(li),mergeLists(li.lastChild,newList),1))||0!==i);i++);return editor.selection.setRng($_99hdjifxjh8lz0rx_resolveBookmark(bookmark)),editor.nodeChanged(),!0}},queryListCommandState=function(editor,listName){return function(){var parentList=editor.dom.getParent(editor.selection.getStart(),"UL,OL,DL");return parentList&&parentList.nodeName===listName}},$_1ley1og6jh8lz0se_register=function(editor){editor.on("BeforeExecCommand",function(e){var isHandled,cmd=e.command.toLowerCase();if("indent"===cmd?$_4rsk3ng7jh8lz0sg_indentSelection(editor)&&(isHandled=!0):"outdent"===cmd&&$_7womq3fvjh8lz0ru_outdentSelection(editor)&&(isHandled=!0),isHandled)return editor.fire("ExecCommand",{command:e.command}),e.preventDefault(),!0}),editor.addCommand("InsertUnorderedList",function(ui,detail){$_8t3z1mfsjh8lz0rl.toggleList(editor,"UL",detail)}),editor.addCommand("InsertOrderedList",function(ui,detail){$_8t3z1mfsjh8lz0rl.toggleList(editor,"OL",detail)}),editor.addCommand("InsertDefinitionList",function(ui,detail){$_8t3z1mfsjh8lz0rl.toggleList(editor,"DL",detail)}),editor.addQueryStateHandler("InsertUnorderedList",queryListCommandState(editor,"UL")),editor.addQueryStateHandler("InsertOrderedList",queryListCommandState(editor,"OL")),editor.addQueryStateHandler("InsertDefinitionList",queryListCommandState(editor,"DL"))},$_bkr9ckg9jh8lz0sk_shouldIndentOnTab=function(editor){return editor.getParam("lists_indent_on_tab",!0)},$_2piq8jg8jh8lz0sj_setup=function(editor){$_bkr9ckg9jh8lz0sk_shouldIndentOnTab(editor)&&function(editor){editor.on("keydown",function(e){e.keyCode!==global$3.TAB||global$3.metaKeyPressed(e)||editor.dom.getParent(editor.selection.getStart(),"LI,DT,DD")&&(e.preventDefault(),e.shiftKey?$_7womq3fvjh8lz0ru_outdentSelection(editor):$_4rsk3ng7jh8lz0sg_indentSelection(editor))})}(editor),$_fl6g5dfojh8lz0re_setup(editor)},listState=function(editor,listName){return function(e){var ctrl=e.control;editor.on("NodeChange",function(e){var tableCellIndex=function(list,predicate){for(var index=0;index<list.length;index++)if(predicate(list[index]))return index;return-1}(e.parents,$_zhglffzjh8lz0s2_isTableCellNode),parents=-1!==tableCellIndex?e.parents.slice(0,tableCellIndex):e.parents,lists=global$5.grep(parents,$_zhglffzjh8lz0s2_isListNode);ctrl.active(0<lists.length&&lists[0].nodeName===listName)})}},$_60ls25gajh8lz0sl_register=function(editor){(function(editor,plugin){var plugins=editor.settings.plugins?editor.settings.plugins:"";return-1!==global$5.inArray(plugins.split(/[ ,]/),plugin)})(editor,"advlist")||(editor.addButton("numlist",{active:!1,title:"Numbered list",cmd:"InsertOrderedList",onPostRender:listState(editor,"OL")}),editor.addButton("bullist",{active:!1,title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:listState(editor,"UL")})),editor.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(editor){return function(e){var ctrl=e.control;editor.on("nodechange",function(){var listItemBlocks=$_ukg72g1jh8lz0s6.getSelectedListItems(editor),disable=0<listItemBlocks.length&&$_zhglffzjh8lz0s2_isFirstChild(listItemBlocks[0]);ctrl.disabled(disable)})}}(editor)})};global.add("lists",function(editor){return $_2piq8jg8jh8lz0sj_setup(editor),$_60ls25gajh8lz0sl_register(editor),$_1ley1og6jh8lz0se_register(editor),$_fad7jdfnjh8lz0rb_get(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-media",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.Env"),global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_bcg8bpghjh8lz0ut_getScripts=function(editor){return editor.getParam("media_scripts")},$_bcg8bpghjh8lz0ut_getAudioTemplateCallback=function(editor){return editor.getParam("audio_template_callback")},$_bcg8bpghjh8lz0ut_getVideoTemplateCallback=function(editor){return editor.getParam("video_template_callback")},$_bcg8bpghjh8lz0ut_hasLiveEmbeds=function(editor){return editor.getParam("media_live_embeds",!0)},$_bcg8bpghjh8lz0ut_shouldFilterHtml=function(editor){return editor.getParam("media_filter_html",!0)},$_bcg8bpghjh8lz0ut_getUrlResolver=function(editor){return editor.getParam("media_url_resolver")},$_bcg8bpghjh8lz0ut_hasAltSource=function(editor){return editor.getParam("media_alt_source",!0)},$_bcg8bpghjh8lz0ut_hasPoster=function(editor){return editor.getParam("media_poster",!0)},$_bcg8bpghjh8lz0ut_hasDimensions=function(editor){return editor.getParam("media_dimensions",!0)},global$3=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),global$4=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$_a6mt9vgljh8lz0uz_getVideoScriptMatch=function(prefixes,src){if(prefixes)for(var i=0;i<prefixes.length;i++)if(-1!==src.indexOf(prefixes[i].filter))return prefixes[i]},getSize=function(name){return function(elm){return elm?elm.style[name].replace(/px$/,""):""}},setSize=function(name){return function(elm,value){elm&&(elm.style[name]=function(value){return/^[0-9.]+$/.test(value)?value+"px":value}(value))}},$_g4vsn9gmjh8lz0v1={getMaxWidth:getSize("maxWidth"),getMaxHeight:getSize("maxHeight"),setMaxWidth:setSize("maxWidth"),setMaxHeight:setSize("maxHeight")},DOM=global$4.DOM,getEphoxEmbedIri=function(elm){return DOM.getAttrib(elm,"data-ephox-embed-iri")},$_3nrb4rgijh8lz0uw_htmlToData=function(prefixes,html){return function(html){var fragment=DOM.createFragment(html);return""!==getEphoxEmbedIri(fragment.firstChild)}(html)?function(html){var div=DOM.createFragment(html).firstChild;return{type:"ephox-embed-iri",source1:getEphoxEmbedIri(div),source2:"",poster:"",width:$_g4vsn9gmjh8lz0v1.getMaxWidth(div),height:$_g4vsn9gmjh8lz0v1.getMaxHeight(div)}}(html):function(prefixes,html){var data={};return global$3({validate:!1,allow_conditional_comments:!0,special:"script,noscript",start:function(name,attrs){if(data.source1||"param"!==name||(data.source1=attrs.map.movie),"iframe"!==name&&"object"!==name&&"embed"!==name&&"video"!==name&&"audio"!==name||(data.type||(data.type=name),data=global$2.extend(attrs.map,data)),"script"===name){var videoScript=$_a6mt9vgljh8lz0uz_getVideoScriptMatch(prefixes,attrs.map.src);if(!videoScript)return;data={type:"script",source1:attrs.map.src,width:videoScript.width,height:videoScript.height}}"source"===name&&(data.source1?data.source2||(data.source2=attrs.map.src):data.source1=attrs.map.src),"img"!==name||data.poster||(data.poster=attrs.map.src)}}).parse(html),data.source1=data.source1||data.src||data.data,data.source2=data.source2||"",data.poster=data.poster||"",data}(prefixes,html)},global$5=tinymce.util.Tools.resolve("tinymce.util.Promise"),$_fbk2jcgqjh8lz0v8_guess=function(url){var mime={mp3:"audio/mpeg",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[url.toLowerCase().split(".").pop()];return mime||""},global$6=tinymce.util.Tools.resolve("tinymce.html.Writer"),global$7=tinymce.util.Tools.resolve("tinymce.html.Schema"),DOM$1=global$4.DOM,setAttributes=function(attrs,updatedAttrs){var name,i,value,attr;for(name in updatedAttrs)if(value=""+updatedAttrs[name],attrs.map[name])for(i=attrs.length;i--;)(attr=attrs[i]).name===name&&(value?(attrs.map[name]=value,attr.value=value):(delete attrs.map[name],attrs.splice(i,1)));else value&&(attrs.push({name:name,value:value}),attrs.map[name]=value)},updateEphoxEmbed=function(html,data){var div=DOM$1.createFragment(html).firstChild;return $_g4vsn9gmjh8lz0v1.setMaxWidth(div,data.width),$_g4vsn9gmjh8lz0v1.setMaxHeight(div,data.height),function(html){var writer=global$6();return global$3(writer).parse(html),writer.getContent()}(div.outerHTML)},$_ec27xygrjh8lz0va_updateHtml=function(html,data,updateAll){return function(html){var fragment=DOM$1.createFragment(html);return""!==DOM$1.getAttrib(fragment.firstChild,"data-ephox-embed-iri")}(html)?updateEphoxEmbed(html,data):function(html,data,updateAll){var hasImage,writer=global$6(),sourceCount=0;return global$3({validate:!1,allow_conditional_comments:!0,special:"script,noscript",comment:function(text){writer.comment(text)},cdata:function(text){writer.cdata(text)},text:function(text,raw){writer.text(text,raw)},start:function(name,attrs,empty){switch(name){case"video":case"object":case"embed":case"img":case"iframe":void 0!==data.height&&void 0!==data.width&&setAttributes(attrs,{width:data.width,height:data.height})}if(updateAll)switch(name){case"video":setAttributes(attrs,{poster:data.poster,src:""}),data.source2&&setAttributes(attrs,{src:""});break;case"iframe":setAttributes(attrs,{src:data.source1});break;case"source":if(++sourceCount<=2&&(setAttributes(attrs,{src:data["source"+sourceCount],type:data["source"+sourceCount+"mime"]}),!data["source"+sourceCount]))return;break;case"img":if(!data.poster)return;hasImage=!0}writer.start(name,attrs,empty)},end:function(name){if("video"===name&&updateAll)for(var index=1;index<=2;index++)if(data["source"+index]){var attrs=[];attrs.map={},sourceCount<index&&(setAttributes(attrs,{src:data["source"+index],type:data["source"+index+"mime"]}),writer.start("source",attrs,!0))}if(data.poster&&"object"===name&&updateAll&&!hasImage){var imgAttrs=[];imgAttrs.map={},setAttributes(imgAttrs,{src:data.poster,width:data.width,height:data.height}),writer.start("img",imgAttrs,!0)}writer.end(name)}},global$7({})).parse(html),writer.getContent()}(html,data,updateAll)},urlPatterns=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"//www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"//player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'//maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"//www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],$_36z50bgpjh8lz0v5_dataToHtml=function(editor,dataIn){var data=global$2.extend({},dataIn);if(!data.source1&&(global$2.extend(data,$_3nrb4rgijh8lz0uw_htmlToData($_bcg8bpghjh8lz0ut_getScripts(editor),data.embed)),!data.source1))return"";data.source2||(data.source2=""),data.poster||(data.poster=""),data.source1=editor.convertURL(data.source1,"source"),data.source2=editor.convertURL(data.source2,"source"),data.source1mime=$_fbk2jcgqjh8lz0v8_guess(data.source1),data.source2mime=$_fbk2jcgqjh8lz0v8_guess(data.source2),data.poster=editor.convertURL(data.poster,"poster");var pattern=function(url){var pattern=urlPatterns.filter(function(pattern){return pattern.regex.test(url)});return 0<pattern.length?global$2.extend({},pattern[0],{url:function(pattern,url){for(var match=pattern.regex.exec(url),newUrl=pattern.url,_loop_1=function(i){newUrl=newUrl.replace("$"+i,function(){return match[i]?match[i]:""})},i=0;i<match.length;i++)_loop_1(i);return newUrl.replace(/\?$/,"")}(pattern[0],url)}):null}(data.source1);if(pattern&&(data.source1=pattern.url,data.type=pattern.type,data.allowFullscreen=pattern.allowFullscreen,data.width=data.width||pattern.w,data.height=data.height||pattern.h),data.embed)return $_ec27xygrjh8lz0va_updateHtml(data.embed,data,!0);var videoScript=$_a6mt9vgljh8lz0uz_getVideoScriptMatch($_bcg8bpghjh8lz0ut_getScripts(editor),data.source1);videoScript&&(data.type="script",data.width=videoScript.width,data.height=videoScript.height);var audioTemplateCallback=$_bcg8bpghjh8lz0ut_getAudioTemplateCallback(editor),videoTemplateCallback=$_bcg8bpghjh8lz0ut_getVideoTemplateCallback(editor);return data.width=data.width||300,data.height=data.height||150,global$2.each(data,function(value,key){data[key]=editor.dom.encode(value)}),"iframe"===data.type?function(data){var allowFullscreen=data.allowFullscreen?' allowFullscreen="1"':"";return'<iframe src="'+data.source1+'" width="'+data.width+'" height="'+data.height+'"'+allowFullscreen+"></iframe>"}(data):"application/x-shockwave-flash"===data.source1mime?function(data){var html='<object data="'+data.source1+'" width="'+data.width+'" height="'+data.height+'" type="application/x-shockwave-flash">';return data.poster&&(html+='<img src="'+data.poster+'" width="'+data.width+'" height="'+data.height+'" />'),html+="</object>"}(data):-1!==data.source1mime.indexOf("audio")?function(data,audioTemplateCallback){return audioTemplateCallback?audioTemplateCallback(data):'<audio controls="controls" src="'+data.source1+'">'+(data.source2?'\n<source src="'+data.source2+'"'+(data.source2mime?' type="'+data.source2mime+'"':"")+" />\n":"")+"</audio>"}(data,audioTemplateCallback):"script"===data.type?function(data){return'<script src="'+data.source1+'"><\/script>'}(data):function(data,videoTemplateCallback){return videoTemplateCallback?videoTemplateCallback(data):'<video width="'+data.width+'" height="'+data.height+'"'+(data.poster?' poster="'+data.poster+'"':"")+' controls="controls">\n<source src="'+data.source1+'"'+(data.source1mime?' type="'+data.source1mime+'"':"")+" />\n"+(data.source2?'<source src="'+data.source2+'"'+(data.source2mime?' type="'+data.source2mime+'"':"")+" />\n":"")+"</video>"}(data,videoTemplateCallback)},cache={},loadedData=function(editor){return function(data){return $_36z50bgpjh8lz0v5_dataToHtml(editor,data)}},$_bqbbyvgnjh8lz0v2_getEmbedHtml=function(editor,data){var embedHandler=$_bcg8bpghjh8lz0ut_getUrlResolver(editor);return embedHandler?function(data,dataToHtml,handler){return new global$5(function(res,rej){var wrappedResolve=function(response){return response.html&&(cache[data.source1]=response),res({url:data.source1,html:response.html?response.html:dataToHtml(data)})};cache[data.source1]?wrappedResolve(cache[data.source1]):handler({url:data.source1},wrappedResolve,rej)})}(data,loadedData(editor),embedHandler):function(data,dataToHtml){return new global$5(function(res){res({html:dataToHtml(data),url:data.source1})})}(data,loadedData(editor))},$_bqbbyvgnjh8lz0v2_isCached=function(url){return cache.hasOwnProperty(url)},doSyncSize=function(widthCtrl,heightCtrl){widthCtrl.state.set("oldVal",widthCtrl.value()),heightCtrl.state.set("oldVal",heightCtrl.value())},doSizeControls=function(win,f){var widthCtrl=win.find("#width")[0],heightCtrl=win.find("#height")[0],constrained=win.find("#constrain")[0];widthCtrl&&heightCtrl&&constrained&&f(widthCtrl,heightCtrl,constrained.checked())},doUpdateSize=function(widthCtrl,heightCtrl,isContrained){var oldWidth=widthCtrl.state.get("oldVal"),oldHeight=heightCtrl.state.get("oldVal"),newWidth=widthCtrl.value(),newHeight=heightCtrl.value();isContrained&&oldWidth&&oldHeight&&newWidth&&newHeight&&(newWidth!==oldWidth?(newHeight=Math.round(newWidth/oldWidth*newHeight),isNaN(newHeight)||heightCtrl.value(newHeight)):(newWidth=Math.round(newHeight/oldHeight*newWidth),isNaN(newWidth)||widthCtrl.value(newWidth))),doSyncSize(widthCtrl,heightCtrl)},updateSize=function(win){doSizeControls(win,doUpdateSize)},$_ctm8lcgvjh8lz0vo_createUi=function(onChange){var recalcSize=function(){onChange(function(win){updateSize(win)})};return{type:"container",label:"Dimensions",layout:"flex",align:"center",spacing:5,items:[{name:"width",type:"textbox",maxLength:5,size:5,onchange:recalcSize,ariaLabel:"Width"},{type:"label",text:"x"},{name:"height",type:"textbox",maxLength:5,size:5,onchange:recalcSize,ariaLabel:"Height"},{name:"constrain",type:"checkbox",checked:!0,text:"Constrain proportions"}]}},$_ctm8lcgvjh8lz0vo_syncSize=function(win){doSizeControls(win,doSyncSize)},$_ctm8lcgvjh8lz0vo_updateSize=updateSize,embedChange=global$1.ie&&global$1.ie<=8?"onChange":"onInput",handleError=function(editor){return function(error){var errorMessage=error&&error.msg?"Media embed handler error: "+error.msg:"Media embed handler threw unknown error.";editor.notificationManager.open({type:"error",text:errorMessage})}},addEmbedHtml=function(win,editor){return function(response){var html=response.html,embed=win.find("#embed")[0],data=global$2.extend($_3nrb4rgijh8lz0uw_htmlToData($_bcg8bpghjh8lz0ut_getScripts(editor),html),{source1:response.url});win.fromJSON(data),embed&&(embed.value(html),$_ctm8lcgvjh8lz0vo_updateSize(win))}},handleInsert=function(editor,html){var beforeObjects=editor.dom.select("img[data-mce-object]");editor.insertContent(html),function(editor,beforeObjects){var i,y,afterObjects=editor.dom.select("img[data-mce-object]");for(i=0;i<beforeObjects.length;i++)for(y=afterObjects.length-1;0<=y;y--)beforeObjects[i]===afterObjects[y]&&afterObjects.splice(y,1);editor.selection.select(afterObjects[0])}(editor,beforeObjects),editor.nodeChanged()},$_3l3va1gejh8lz0uo_showDialog=function(editor){var win,data,generalFormItems=[{name:"source1",type:"filepicker",filetype:"media",size:40,autofocus:!0,label:"Source",onpaste:function(){setTimeout(function(){$_bqbbyvgnjh8lz0v2_getEmbedHtml(editor,win.toJSON()).then(addEmbedHtml(win,editor)).catch(handleError(editor))},1)},onchange:function(e){$_bqbbyvgnjh8lz0v2_getEmbedHtml(editor,win.toJSON()).then(addEmbedHtml(win,editor)).catch(handleError(editor)),function(win,meta){global$2.each(meta,function(value,key){win.find("#"+key).value(value)})}(win,e.meta)},onbeforecall:function(e){e.meta=win.toJSON()}}],advancedFormItems=[];if($_bcg8bpghjh8lz0ut_hasAltSource(editor)&&advancedFormItems.push({name:"source2",type:"filepicker",filetype:"media",size:40,label:"Alternative source"}),$_bcg8bpghjh8lz0ut_hasPoster(editor)&&advancedFormItems.push({name:"poster",type:"filepicker",filetype:"image",size:40,label:"Poster"}),$_bcg8bpghjh8lz0ut_hasDimensions(editor)){var control=$_ctm8lcgvjh8lz0vo_createUi(function(update){update(win),data=win.toJSON(),win.find("#embed").value($_ec27xygrjh8lz0va_updateHtml(data.embed,data))});generalFormItems.push(control)}data=function(editor){var element=editor.selection.getNode(),dataEmbed=element.getAttribute("data-ephox-embed-iri");return dataEmbed?{source1:dataEmbed,"data-ephox-embed-iri":dataEmbed,width:$_g4vsn9gmjh8lz0v1.getMaxWidth(element),height:$_g4vsn9gmjh8lz0v1.getMaxHeight(element)}:element.getAttribute("data-mce-object")?$_3nrb4rgijh8lz0uw_htmlToData($_bcg8bpghjh8lz0ut_getScripts(editor),editor.serializer.serialize(element,{selection:!0})):{}}(editor);var embedTextBox={id:"mcemediasource",type:"textbox",flex:1,name:"embed",value:function(editor){var elm=editor.selection.getNode();if(elm.getAttribute("data-mce-object")||elm.getAttribute("data-ephox-embed-iri"))return editor.selection.getContent()}(editor),multiline:!0,rows:5,label:"Source"};embedTextBox[embedChange]=function(){data=global$2.extend({},$_3nrb4rgijh8lz0uw_htmlToData($_bcg8bpghjh8lz0ut_getScripts(editor),this.value())),this.parent().parent().fromJSON(data)};var body=[{title:"General",type:"form",items:generalFormItems},{title:"Embed",type:"container",layout:"flex",direction:"column",align:"stretch",padding:10,spacing:10,items:[{type:"label",text:"Paste your embed code below:",forId:"mcemediasource"},embedTextBox]}];0<advancedFormItems.length&&body.push({title:"Advanced",type:"form",items:advancedFormItems}),win=editor.windowManager.open({title:"Insert/edit media",data:data,bodyType:"tabpanel",body:body,onSubmit:function(){$_ctm8lcgvjh8lz0vo_updateSize(win),function(win,editor){var data=win.toJSON();data.embed=$_ec27xygrjh8lz0va_updateHtml(data.embed,data),data.embed&&$_bqbbyvgnjh8lz0v2_isCached(data.source1)?handleInsert(editor,data.embed):$_bqbbyvgnjh8lz0v2_getEmbedHtml(editor,data).then(function(response){handleInsert(editor,response.html)}).catch(handleError(editor))}(win,editor)}}),$_ctm8lcgvjh8lz0vo_syncSize(win)},$_baju01gdjh8lz0um_get=function(editor){return{showDialog:function(){$_3l3va1gejh8lz0uo_showDialog(editor)}}},$_bp1t92gwjh8lz0vq_register=function(editor){editor.addCommand("mceMedia",function(){$_3l3va1gejh8lz0uo_showDialog(editor)})},global$8=tinymce.util.Tools.resolve("tinymce.html.Node"),$_6qsq2eh0jh8lz0vz_sanitize=function(editor,html){if(!1===$_bcg8bpghjh8lz0ut_shouldFilterHtml(editor))return html;var blocked,writer=global$6();return global$3({validate:!1,allow_conditional_comments:!1,special:"script,noscript",comment:function(text){writer.comment(text)},cdata:function(text){writer.cdata(text)},text:function(text,raw){writer.text(text,raw)},start:function(name,attrs,empty){if(blocked=!0,"script"!==name&&"noscript"!==name){for(var i=0;i<attrs.length;i++){if(0===attrs[i].name.indexOf("on"))return;"style"===attrs[i].name&&(attrs[i].value=editor.dom.serializeStyle(editor.dom.parseStyle(attrs[i].value),name))}writer.start(name,attrs,empty),blocked=!1}},end:function(name){blocked||writer.end(name)}},global$7({})).parse(html),writer.getContent()},createPlaceholderNode=function(editor,node){var placeHolder,name=node.name;return(placeHolder=new global$8("img",1)).shortEnded=!0,retainAttributesAndInnerHtml(editor,node,placeHolder),placeHolder.attr({width:node.attr("width")||"300",height:node.attr("height")||("audio"===name?"30":"150"),style:node.attr("style"),src:global$1.transparentSrc,"data-mce-object":name,class:"mce-object mce-object-"+name}),placeHolder},createPreviewIframeNode=function(editor,node){var previewWrapper,previewNode,shimNode,name=node.name;return(previewWrapper=new global$8("span",1)).attr({contentEditable:"false",style:node.attr("style"),"data-mce-object":name,class:"mce-preview-object mce-object-"+name}),retainAttributesAndInnerHtml(editor,node,previewWrapper),(previewNode=new global$8(name,1)).attr({src:node.attr("src"),allowfullscreen:node.attr("allowfullscreen"),style:node.attr("style"),class:node.attr("class"),width:node.attr("width"),height:node.attr("height"),frameborder:"0"}),(shimNode=new global$8("span",1)).attr("class","mce-shim"),previewWrapper.append(previewNode),previewWrapper.append(shimNode),previewWrapper},retainAttributesAndInnerHtml=function(editor,sourceNode,targetNode){var attrName,attrValue,attribs,ai,innerHtml;for(ai=(attribs=sourceNode.attributes).length;ai--;)attrName=attribs[ai].name,attrValue=attribs[ai].value,"width"!==attrName&&"height"!==attrName&&"style"!==attrName&&("data"!==attrName&&"src"!==attrName||(attrValue=editor.convertURL(attrValue,attrName)),targetNode.attr("data-mce-p-"+attrName,attrValue));(innerHtml=sourceNode.firstChild&&sourceNode.firstChild.value)&&(targetNode.attr("data-mce-html",escape($_6qsq2eh0jh8lz0vz_sanitize(editor,innerHtml))),targetNode.firstChild=null)},isWithinEphoxEmbed=function(node){for(;node=node.parent;)if(node.attr("data-ephox-embed-iri"))return!0;return!1},$_avuyrbgzjh8lz0vv_placeHolderConverter=function(editor){return function(nodes){for(var node,videoScript,i=nodes.length;i--;)(node=nodes[i]).parent&&(node.parent.attr("data-mce-object")||("script"!==node.name||(videoScript=$_a6mt9vgljh8lz0uz_getVideoScriptMatch($_bcg8bpghjh8lz0ut_getScripts(editor),node.attr("src"))))&&(videoScript&&(videoScript.width&&node.attr("width",videoScript.width.toString()),videoScript.height&&node.attr("height",videoScript.height.toString())),"iframe"===node.name&&$_bcg8bpghjh8lz0ut_hasLiveEmbeds(editor)&&global$1.ceFalse?isWithinEphoxEmbed(node)||node.replace(createPreviewIframeNode(editor,node)):isWithinEphoxEmbed(node)||node.replace(createPlaceholderNode(editor,node))))}},$_3u2masgxjh8lz0vs_setup=function(editor){editor.on("preInit",function(){var specialElements=editor.schema.getSpecialElements();global$2.each("video audio iframe object".split(" "),function(name){specialElements[name]=new RegExp("</"+name+"[^>]*>","gi")});var boolAttrs=editor.schema.getBoolAttrs();global$2.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),function(name){boolAttrs[name]={}}),editor.parser.addNodeFilter("iframe,video,audio,object,embed,script",$_avuyrbgzjh8lz0vv_placeHolderConverter(editor)),editor.serializer.addAttributeFilter("data-mce-object",function(nodes,name){for(var node,realElm,ai,attribs,innerHtml,innerNode,realElmName,className,i=nodes.length;i--;)if((node=nodes[i]).parent){for(realElmName=node.attr(name),realElm=new global$8(realElmName,1),"audio"!==realElmName&&"script"!==realElmName&&((className=node.attr("class"))&&-1!==className.indexOf("mce-preview-object")?realElm.attr({width:node.firstChild.attr("width"),height:node.firstChild.attr("height")}):realElm.attr({width:node.attr("width"),height:node.attr("height")})),realElm.attr({style:node.attr("style")}),ai=(attribs=node.attributes).length;ai--;){var attrName=attribs[ai].name;0===attrName.indexOf("data-mce-p-")&&realElm.attr(attrName.substr(11),attribs[ai].value)}"script"===realElmName&&realElm.attr("type","text/javascript"),(innerHtml=node.attr("data-mce-html"))&&((innerNode=new global$8("#text",3)).raw=!0,innerNode.value=$_6qsq2eh0jh8lz0vz_sanitize(editor,unescape(innerHtml)),realElm.append(innerNode)),node.replace(realElm)}})}),editor.on("setContent",function(){editor.$("span.mce-preview-object").each(function(index,elm){var $elm=editor.$(elm);0===$elm.find("span.mce-shim",elm).length&&$elm.append('<span class="mce-shim"></span>')})})},$_7e0f0eh1jh8lz0w1_setup=function(editor){editor.on("ResolveName",function(e){var name;1===e.target.nodeType&&(name=e.target.getAttribute("data-mce-object"))&&(e.name=name)})},$_firvch2jh8lz0w3_setup=function(editor){editor.on("click keyup",function(){var selectedNode=editor.selection.getNode();selectedNode&&editor.dom.hasClass(selectedNode,"mce-preview-object")&&editor.dom.getAttrib(selectedNode,"data-mce-selected")&&selectedNode.setAttribute("data-mce-selected","2")}),editor.on("ObjectSelected",function(e){var objectType=e.target.getAttribute("data-mce-object");"audio"!==objectType&&"script"!==objectType||e.preventDefault()}),editor.on("objectResized",function(e){var html,target=e.target;target.getAttribute("data-mce-object")&&(html=target.getAttribute("data-mce-html"))&&(html=unescape(html),target.setAttribute("data-mce-html",escape($_ec27xygrjh8lz0va_updateHtml(html,{width:e.width,height:e.height}))))})},$_2oflieh3jh8lz0w4_register=function(editor){editor.addButton("media",{tooltip:"Insert/edit media",cmd:"mceMedia",stateSelector:["img[data-mce-object]","span[data-mce-object]","div[data-ephox-embed-iri]"]}),editor.addMenuItem("media",{icon:"media",text:"Media",cmd:"mceMedia",context:"insert",prependToContext:!0})};global.add("media",function(editor){return $_bp1t92gwjh8lz0vq_register(editor),$_2oflieh3jh8lz0w4_register(editor),$_7e0f0eh1jh8lz0w1_setup(editor),$_3u2masgxjh8lz0vs_setup(editor),$_firvch2jh8lz0w3_setup(editor),$_baju01gdjh8lz0um_get(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-nonbreaking",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_fpypash7jh8lz0y5_insertNbsp=function(editor,times){var nbsp=function(editor){return!!editor.plugins.visualchars&&editor.plugins.visualchars.isEnabled()}(editor)?'<span class="mce-nbsp">&nbsp;</span>':"&nbsp;";editor.insertContent(function(string,repeats){for(var str="",index=0;index<repeats;index++)str+=string;return str}(nbsp,times)),editor.dom.setAttrib(editor.dom.select("span.mce-nbsp"),"data-mce-bogus","1")},$_45ppimh6jh8lz0y4_register=function(editor){editor.addCommand("mceNonBreaking",function(){$_fpypash7jh8lz0y5_insertNbsp(editor,1)})},global$1=tinymce.util.Tools.resolve("tinymce.util.VK"),$_f73qmzhajh8lz0y7_getKeyboardSpaces=function(editor){var spaces=editor.getParam("nonbreaking_force_tab",0);return"boolean"==typeof spaces?!0===spaces?3:0:spaces},$_8k27hmh8jh8lz0y6_setup=function(editor){var spaces=$_f73qmzhajh8lz0y7_getKeyboardSpaces(editor);0<spaces&&editor.on("keydown",function(e){if(e.keyCode===global$1.TAB&&!e.isDefaultPrevented()){if(e.shiftKey)return;e.preventDefault(),e.stopImmediatePropagation(),$_fpypash7jh8lz0y5_insertNbsp(editor,spaces)}})},$_2kco2nhbjh8lz0y9_register=function(editor){editor.addButton("nonbreaking",{title:"Nonbreaking space",cmd:"mceNonBreaking"}),editor.addMenuItem("nonbreaking",{icon:"nonbreaking",text:"Nonbreaking space",cmd:"mceNonBreaking",context:"insert"})};global.add("nonbreaking",function(editor){$_45ppimh6jh8lz0y4_register(editor),$_2kco2nhbjh8lz0y9_register(editor),$_8k27hmh8jh8lz0y6_setup(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-noneditable",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_9u2u4bhgjh8lz0ym_getNonEditableClass=function(editor){return editor.getParam("noneditable_noneditable_class","mceNonEditable")},$_9u2u4bhgjh8lz0ym_getEditableClass=function(editor){return editor.getParam("noneditable_editable_class","mceEditable")},$_9u2u4bhgjh8lz0ym_getNonEditableRegExps=function(editor){var nonEditableRegExps=editor.getParam("noneditable_regexp",[]);return nonEditableRegExps&&nonEditableRegExps.constructor===RegExp?[nonEditableRegExps]:nonEditableRegExps},hasClass=function(checkClassName){return function(node){return-1!==(" "+node.attr("class")+" ").indexOf(checkClassName)}},replaceMatchWithSpan=function(editor,content,cls){return function(match){var args=arguments,index=args[args.length-2],prevChar=0<index?content.charAt(index-1):"";if('"'===prevChar)return match;if(">"===prevChar){var findStartTagIndex=content.lastIndexOf("<",index);if(-1!==findStartTagIndex&&-1!==content.substring(findStartTagIndex,index).indexOf('contenteditable="false"'))return match}return'<span class="'+cls+'" data-mce-content="'+editor.dom.encode(args[0])+'">'+editor.dom.encode("string"==typeof args[1]?args[1]:args[0])+"</span>"}},$_bsp17lhejh8lz0yi_setup=function(editor){var editClass,nonEditClass;editClass=" "+global$1.trim($_9u2u4bhgjh8lz0ym_getEditableClass(editor))+" ",nonEditClass=" "+global$1.trim($_9u2u4bhgjh8lz0ym_getNonEditableClass(editor))+" ";var hasEditClass=hasClass(editClass),hasNonEditClass=hasClass(nonEditClass),nonEditableRegExps=$_9u2u4bhgjh8lz0ym_getNonEditableRegExps(editor);editor.on("PreInit",function(){0<nonEditableRegExps.length&&editor.on("BeforeSetContent",function(e){!function(editor,nonEditableRegExps,e){var i=nonEditableRegExps.length,content=e.content;if("raw"!==e.format){for(;i--;)content=content.replace(nonEditableRegExps[i],replaceMatchWithSpan(editor,content,$_9u2u4bhgjh8lz0ym_getNonEditableClass(editor)));e.content=content}}(editor,nonEditableRegExps,e)}),editor.parser.addAttributeFilter("class",function(nodes){for(var node,i=nodes.length;i--;)node=nodes[i],hasEditClass(node)?node.attr("contenteditable","true"):hasNonEditClass(node)&&node.attr("contenteditable","false")}),editor.serializer.addAttributeFilter("contenteditable",function(nodes){for(var node,i=nodes.length;i--;)node=nodes[i],(hasEditClass(node)||hasNonEditClass(node))&&(0<nonEditableRegExps.length&&node.attr("data-mce-content")?(node.name="#text",node.type=3,node.raw=!0,node.value=node.attr("data-mce-content")):node.attr("contenteditable",null))})})};global.add("noneditable",function(editor){$_bsp17lhejh8lz0yi_setup(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-pagebreak",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.Env"),$_cfcp0ehmjh8lz0z6_getSeparatorHtml=function(editor){return editor.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")},$_cfcp0ehmjh8lz0z6_shouldSplitBlock=function(editor){return editor.getParam("pagebreak_split_block",!1)},getPageBreakClass=function(){return"mce-pagebreak"},getPlaceholderHtml=function(){return'<img src="'+global$1.transparentSrc+'" class="mce-pagebreak" data-mce-resize="false" data-mce-placeholder />'},$_4nscs5hkjh8lz0z3_setup=function(editor){var separatorHtml=$_cfcp0ehmjh8lz0z6_getSeparatorHtml(editor),pageBreakSeparatorRegExp=new RegExp(separatorHtml.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"gi");editor.on("BeforeSetContent",function(e){e.content=e.content.replace(pageBreakSeparatorRegExp,getPlaceholderHtml())}),editor.on("PreInit",function(){editor.serializer.addNodeFilter("img",function(nodes){for(var node,className,i=nodes.length;i--;)if((className=(node=nodes[i]).attr("class"))&&-1!==className.indexOf("mce-pagebreak")){var parentNode=node.parent;if(editor.schema.getBlockElements()[parentNode.name]&&$_cfcp0ehmjh8lz0z6_shouldSplitBlock(editor)){parentNode.type=3,parentNode.value=separatorHtml,parentNode.raw=!0,node.remove();continue}node.type=3,node.value=separatorHtml,node.raw=!0}})})},$_4nscs5hkjh8lz0z3_getPlaceholderHtml=getPlaceholderHtml,$_4nscs5hkjh8lz0z3_getPageBreakClass=getPageBreakClass,$_eeiv35hjjh8lz0z2_register=function(editor){editor.addCommand("mcePageBreak",function(){editor.settings.pagebreak_split_block?editor.insertContent("<p>"+$_4nscs5hkjh8lz0z3_getPlaceholderHtml()+"</p>"):editor.insertContent($_4nscs5hkjh8lz0z3_getPlaceholderHtml())})},$_4vaxechnjh8lz0z7_setup=function(editor){editor.on("ResolveName",function(e){"IMG"===e.target.nodeName&&editor.dom.hasClass(e.target,$_4nscs5hkjh8lz0z3_getPageBreakClass())&&(e.name="pagebreak")})},$_2d5h02hojh8lz0z8_register=function(editor){editor.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),editor.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"})};global.add("pagebreak",function(editor){$_eeiv35hjjh8lz0z2_register(editor),$_2d5h02hojh8lz0z8_register(editor),$_4nscs5hkjh8lz0z3_setup(editor),$_4vaxechnjh8lz0z7_setup(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-paste",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_5zap27hsjh8lz0zl_hasProPlugin=function(editor){return!(!/(^|[ ,])powerpaste([, ]|$)/.test(editor.settings.plugins)||!global.get("powerpaste")||(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),0))},$_b74kiihtjh8lz0zm_get=function(clipboard,quirks){return{clipboard:clipboard,quirks:quirks}},$_dotjevhwjh8lz0zq_firePastePreProcess=function(editor,html,internal,isWordHtml){return editor.fire("PastePreProcess",{content:html,internal:internal,wordContent:isWordHtml})},$_dotjevhwjh8lz0zq_firePastePostProcess=function(editor,node,internal,isWordHtml){return editor.fire("PastePostProcess",{node:node,internal:internal,wordContent:isWordHtml})},$_dotjevhwjh8lz0zq_firePastePlainTextToggle=function(editor,state){return editor.fire("PastePlainTextToggle",{state:state})},$_dotjevhwjh8lz0zq_firePaste=function(editor,ieFake){return editor.fire("paste",{ieFake:ieFake})},$_59kbdnhxjh8lz0zr={shouldPlainTextInform:function(editor){return editor.getParam("paste_plaintext_inform",!0)},shouldBlockDrop:function(editor){return editor.getParam("paste_block_drop",!1)},shouldPasteDataImages:function(editor){return editor.getParam("paste_data_images",!1)},shouldFilterDrop:function(editor){return editor.getParam("paste_filter_drop",!0)},getPreProcess:function(editor){return editor.getParam("paste_preprocess")},getPostProcess:function(editor){return editor.getParam("paste_postprocess")},getWebkitStyles:function(editor){return editor.getParam("paste_webkit_styles")},shouldRemoveWebKitStyles:function(editor){return editor.getParam("paste_remove_styles_if_webkit",!0)},shouldMergeFormats:function(editor){return editor.getParam("paste_merge_formats",!0)},isSmartPasteEnabled:function(editor){return editor.getParam("smart_paste",!0)},isPasteAsTextEnabled:function(editor){return editor.getParam("paste_as_text",!1)},getRetainStyleProps:function(editor){return editor.getParam("paste_retain_style_properties")},getWordValidElements:function(editor){return editor.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")},shouldConvertWordFakeLists:function(editor){return editor.getParam("paste_convert_word_fake_lists",!0)},shouldUseDefaultFilters:function(editor){return editor.getParam("paste_enable_default_filters",!0)}},$_19uwahhvjh8lz0zo_togglePlainTextPaste=function(editor,clipboard,userIsInformedState){"text"===clipboard.pasteFormat.get()?(clipboard.pasteFormat.set("html"),$_dotjevhwjh8lz0zq_firePastePlainTextToggle(editor,!1)):(clipboard.pasteFormat.set("text"),$_dotjevhwjh8lz0zq_firePastePlainTextToggle(editor,!0),function(editor,userIsInformedState){return!1===userIsInformedState.get()&&$_59kbdnhxjh8lz0zr.shouldPlainTextInform(editor)}(editor,userIsInformedState)&&(function(editor,message){editor.notificationManager.open({text:editor.translate(message),type:"info"})}(editor,"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off."),userIsInformedState.set(!0))),editor.focus()},$_dw9jlohujh8lz0zn_register=function(editor,clipboard,userIsInformedState){editor.addCommand("mceTogglePlainTextPaste",function(){$_19uwahhvjh8lz0zo_togglePlainTextPaste(editor,clipboard,userIsInformedState)}),editor.addCommand("mceInsertClipboardContent",function(ui,value){value.content&&clipboard.pasteHtml(value.content,value.internal),value.text&&clipboard.pasteText(value.text)})},global$1=tinymce.util.Tools.resolve("tinymce.Env"),global$2=tinymce.util.Tools.resolve("tinymce.util.Delay"),global$3=tinymce.util.Tools.resolve("tinymce.util.Tools"),global$4=tinymce.util.Tools.resolve("tinymce.util.VK"),internalMark="\x3c!-- x-tinymce/html --\x3e",$_vdmj3i4jh8lz10b_mark=function(html){return internalMark+html},$_vdmj3i4jh8lz10b_unmark=function(html){return html.replace(internalMark,"")},$_vdmj3i4jh8lz10b_isMarked=function(html){return-1!==html.indexOf(internalMark)},$_vdmj3i4jh8lz10b_internalHtmlMime=function(){return"x-tinymce/html"},global$5=tinymce.util.Tools.resolve("tinymce.html.Entities"),toBRs=function(text){return text.replace(/\r?\n/g,"<br>")},toBlockElements=function(text,rootTag,rootAttrs){var blocks=text.split(/\n\n/),tagOpen=function(rootTag,rootAttrs){var key,attrs=[],tag="<"+rootTag;if("object"==typeof rootAttrs){for(key in rootAttrs)rootAttrs.hasOwnProperty(key)&&attrs.push(key+'="'+global$5.encodeAllRaw(rootAttrs[key])+'"');attrs.length&&(tag+=" "+attrs.join(" "))}return tag+">"}(rootTag,rootAttrs),tagClose="</"+rootTag+">",paragraphs=global$3.map(blocks,function(p){return p.split(/\n/).join("<br />")});return 1===paragraphs.length?paragraphs[0]:global$3.map(paragraphs,function(p){return tagOpen+p+tagClose}).join("")},$_q5v7hi5jh8lz10d_isPlainText=function(text){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(text)},$_q5v7hi5jh8lz10d_convert=function(text,rootTag,rootAttrs){return rootTag?toBlockElements(text,rootTag,rootAttrs):toBRs(text)},global$6=tinymce.util.Tools.resolve("tinymce.html.DomParser"),global$7=tinymce.util.Tools.resolve("tinymce.html.Node"),global$8=tinymce.util.Tools.resolve("tinymce.html.Schema"),global$9=tinymce.util.Tools.resolve("tinymce.html.Serializer");function filter(content,items){return global$3.each(items,function(v){content=v.constructor===RegExp?content.replace(v,""):content.replace(v[0],v[1])}),content}var $_exxhefidjh8lz10r={filter:filter,innerText:function(html){var schema=global$8(),domParser=global$6({},schema),text="",shortEndedElements=schema.getShortEndedElements(),ignoreElements=global$3.makeMap("script noscript style textarea video audio iframe object"," "),blockElements=schema.getBlockElements();return html=filter(html,[/<!\[[^\]]+\]>/g]),function walk(node){var name=node.name,currentNode=node;if("br"!==name)if(shortEndedElements[name]&&(text+=" "),ignoreElements[name])text+=" ";else{if(3===node.type&&(text+=node.value),!node.shortEnded&&(node=node.firstChild))for(;walk(node),node=node.next;);blockElements[name]&&currentNode.next&&(text+="\n","p"===name&&(text+="\n"))}else text+="\n"}(domParser.parse(html)),text},trimHtml:function(html){return html=filter(html,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(all,s1,s2){return s1||s2?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},createIdGenerator:function(prefix){var count=0;return function(){return prefix+count++}},isMsEdge:function(){return-1!==navigator.userAgent.indexOf(" Edge/")}};function isNumericList(text){var found,patterns;return patterns=[/^[IVXLMCD]{1,2}\.[ \u00a0]/,/^[ivxlmcd]{1,2}\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],text=text.replace(/^[\u00a0 ]+/,""),global$3.each(patterns,function(pattern){if(pattern.test(text))return!(found=!0)}),found}function convertFakeListsToProperLists(node){var currentListNode,prevListNode,lastLevel=1;function getText(node){var txt="";if(3===node.type)return node.value;if(node=node.firstChild)for(;txt+=getText(node),node=node.next;);return txt}function trimListStart(node,regExp){if(3===node.type&&regExp.test(node.value))return node.value=node.value.replace(regExp,""),!1;if(node=node.firstChild)do{if(!trimListStart(node,regExp))return!1}while(node=node.next);return!0}function convertParagraphToLi(paragraphNode,listName,start){var level=paragraphNode._listLevel||lastLevel;level!==lastLevel&&(level<lastLevel?currentListNode&&(currentListNode=currentListNode.parent.parent):(prevListNode=currentListNode,currentListNode=null)),currentListNode&&currentListNode.name===listName?currentListNode.append(paragraphNode):(prevListNode=prevListNode||currentListNode,currentListNode=new global$7(listName,1),1<start&&currentListNode.attr("start",""+start),paragraphNode.wrap(currentListNode)),paragraphNode.name="li",lastLevel<level&&prevListNode&&prevListNode.lastChild.append(currentListNode),lastLevel=level,function removeIgnoredNodes(node){if(node._listIgnore)node.remove();else if(node=node.firstChild)for(;removeIgnoredNodes(node),node=node.next;);}(paragraphNode),trimListStart(paragraphNode,/^\u00a0+/),trimListStart(paragraphNode,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),trimListStart(paragraphNode,/^\u00a0+/)}for(var elements=[],child=node.firstChild;null!=child;)if(elements.push(child),null!==(child=child.walk()))for(;void 0!==child&&child.parent!==node;)child=child.walk();for(var i=0;i<elements.length;i++)if("p"===(node=elements[i]).name&&node.firstChild){var nodeText=getText(node);if(/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(nodeText)){convertParagraphToLi(node,"ul");continue}if(isNumericList(nodeText)){var matches=/([0-9]+)\./.exec(nodeText),start=1;matches&&(start=parseInt(matches[1],10)),convertParagraphToLi(node,"ol",start);continue}if(node._listLevel){convertParagraphToLi(node,"ul",1);continue}currentListNode=null}else prevListNode=currentListNode,currentListNode=null}function filterStyles(editor,validStyles,node,styleValue){var matches,outputStyles={},styles=editor.dom.parseStyle(styleValue);return global$3.each(styles,function(value,name){switch(name){case"mso-list":(matches=/\w+ \w+([0-9]+)/i.exec(styleValue))&&(node._listLevel=parseInt(matches[1],10)),/Ignore/i.test(value)&&node.firstChild&&(node._listIgnore=!0,node.firstChild._listIgnore=!0);break;case"horiz-align":name="text-align";break;case"vert-align":name="vertical-align";break;case"font-color":case"mso-foreground":name="color";break;case"mso-background":case"mso-highlight":name="background";break;case"font-weight":case"font-style":return void("normal"!==value&&(outputStyles[name]=value));case"mso-element":if(/^(comment|comment-list)$/i.test(value))return void node.remove()}0!==name.indexOf("mso-comment")?0!==name.indexOf("mso-")&&("all"===$_59kbdnhxjh8lz0zr.getRetainStyleProps(editor)||validStyles&&validStyles[name])&&(outputStyles[name]=value):node.remove()}),/(bold)/i.test(outputStyles["font-weight"])&&(delete outputStyles["font-weight"],node.wrap(new global$7("b",1))),/(italic)/i.test(outputStyles["font-style"])&&(delete outputStyles["font-style"],node.wrap(new global$7("i",1))),(outputStyles=editor.dom.serializeStyle(outputStyles,node.name))||null}var $_d6zorbi8jh8lz10j={preProcess:function(editor,content){return $_59kbdnhxjh8lz0zr.shouldUseDefaultFilters(editor)?function(editor,content){var retainStyleProperties,validStyles;(retainStyleProperties=$_59kbdnhxjh8lz0zr.getRetainStyleProps(editor))&&(validStyles=global$3.makeMap(retainStyleProperties.split(/[, ]/))),content=$_exxhefidjh8lz10r.filter(content,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(str,spaces){return 0<spaces.length?spaces.replace(/./," ").slice(Math.floor(spaces.length/2)).split("").join(" "):""}]]);var validElements=$_59kbdnhxjh8lz0zr.getWordValidElements(editor),schema=global$8({valid_elements:validElements,valid_children:"-li[p]"});global$3.each(schema.elements,function(rule){rule.attributes.class||(rule.attributes.class={},rule.attributesOrder.push("class")),rule.attributes.style||(rule.attributes.style={},rule.attributesOrder.push("style"))});var domParser=global$6({},schema);domParser.addAttributeFilter("style",function(nodes){for(var node,i=nodes.length;i--;)(node=nodes[i]).attr("style",filterStyles(editor,validStyles,node,node.attr("style"))),"span"===node.name&&node.parent&&!node.attributes.length&&node.unwrap()}),domParser.addAttributeFilter("class",function(nodes){for(var node,className,i=nodes.length;i--;)className=(node=nodes[i]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)&&node.remove(),node.attr("class",null)}),domParser.addNodeFilter("del",function(nodes){for(var i=nodes.length;i--;)nodes[i].remove()}),domParser.addNodeFilter("a",function(nodes){for(var node,href,name,i=nodes.length;i--;)if(href=(node=nodes[i]).attr("href"),name=node.attr("name"),href&&-1!==href.indexOf("#_msocom_"))node.remove();else if(href&&0===href.indexOf("file://")&&(href=href.split("#")[1])&&(href="#"+href),href||name){if(name&&!/^_?(?:toc|edn|ftn)/i.test(name)){node.unwrap();continue}node.attr({href:href,name:name})}else node.unwrap()});var rootNode=domParser.parse(content);return $_59kbdnhxjh8lz0zr.shouldConvertWordFakeLists(editor)&&convertFakeListsToProperLists(rootNode),content=global$9({validate:editor.settings.validate},schema).serialize(rootNode)}(editor,content):content},isWordContent:function(content){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^'']*\bmso-|w:WordDocument/i.test(content)||/class="OutlineElement/.test(content)||/id="?docs\-internal\-guid\-/.test(content)}},processResult=function(content,cancelled){return{content:content,cancelled:cancelled}},filterContent=function(editor,content,internal,isWordHtml){var preProcessArgs=$_dotjevhwjh8lz0zq_firePastePreProcess(editor,content,internal,isWordHtml);return editor.hasEventListeners("PastePostProcess")&&!preProcessArgs.isDefaultPrevented()?function(editor,html,internal,isWordHtml){var tempBody=editor.dom.create("div",{style:"display:none"},html),postProcessArgs=$_dotjevhwjh8lz0zq_firePastePostProcess(editor,tempBody,internal,isWordHtml);return processResult(postProcessArgs.node.innerHTML,postProcessArgs.isDefaultPrevented())}(editor,preProcessArgs.content,internal,isWordHtml):processResult(preProcessArgs.content,preProcessArgs.isDefaultPrevented())},$_8pb2j8i7jh8lz10f_process=function(editor,html,internal){var isWordHtml=$_d6zorbi8jh8lz10j.isWordContent(html),content=isWordHtml?$_d6zorbi8jh8lz10j.preProcess(editor,html):html;return filterContent(editor,content,internal,isWordHtml)},pasteHtml=function(editor,html){return editor.insertContent(html,{merge:$_59kbdnhxjh8lz0zr.shouldMergeFormats(editor),paste:!0}),!0},isAbsoluteUrl=function(url){return/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(url)},isImageUrl=function(url){return isAbsoluteUrl(url)&&/.(gif|jpe?g|png)$/.test(url)},linkSelection=function(editor,html,pasteHtmlFn){return!(!1!==editor.selection.isCollapsed()||!isAbsoluteUrl(html))&&function(editor,url,pasteHtmlFn){return editor.undoManager.extra(function(){pasteHtmlFn(editor,url)},function(){editor.execCommand("mceInsertLink",!1,url)}),!0}(editor,html,pasteHtmlFn)},insertImage=function(editor,html,pasteHtmlFn){return!!isImageUrl(html)&&function(editor,url,pasteHtmlFn){return editor.undoManager.extra(function(){pasteHtmlFn(editor,url)},function(){editor.insertContent('<img src="'+url+'">')}),!0}(editor,html,pasteHtmlFn)},$_d0259ziejh8lz10u_insertContent=function(editor,html){!1===$_59kbdnhxjh8lz0zr.isSmartPasteEnabled(editor)?pasteHtml(editor,html):function(editor,html){global$3.each([linkSelection,insertImage,pasteHtml],function(action){return!0!==action(editor,html,pasteHtml)})}(editor,html)},pasteHtml$1=function(editor,html,internalFlag){var internal=internalFlag||$_vdmj3i4jh8lz10b_isMarked(html),args=$_8pb2j8i7jh8lz10f_process(editor,$_vdmj3i4jh8lz10b_unmark(html),internal);!1===args.cancelled&&$_d0259ziejh8lz10u_insertContent(editor,args.content)},pasteText=function(editor,text){text=editor.dom.encode(text).replace(/\r\n/g,"\n"),text=$_q5v7hi5jh8lz10d_convert(text,editor.settings.forced_root_block,editor.settings.forced_root_block_attrs),pasteHtml$1(editor,text,!1)},getDataTransferItems=function(dataTransfer){var items={};if(dataTransfer){if(dataTransfer.getData){var legacyText=dataTransfer.getData("Text");legacyText&&0<legacyText.length&&-1===legacyText.indexOf("data:text/mce-internal,")&&(items["text/plain"]=legacyText)}if(dataTransfer.types)for(var i=0;i<dataTransfer.types.length;i++){var contentType=dataTransfer.types[i];try{items[contentType]=dataTransfer.getData(contentType)}catch(ex){items[contentType]=""}}}return items},hasContentType=function(clipboardContent,mimeType){return mimeType in clipboardContent&&0<clipboardContent[mimeType].length},hasHtmlOrText=function(content){return hasContentType(content,"text/html")||hasContentType(content,"text/plain")},uniqueId=$_exxhefidjh8lz10r.createIdGenerator("mceclip"),pasteImage=function(editor,rng,reader,blob){rng&&(editor.selection.setRng(rng),rng=null);var uri,idx,settings,imgElm,dataUri=reader.result,base64=-1!==(idx=(uri=dataUri).indexOf(","))?uri.substr(idx+1):null,id=uniqueId(),name=editor.settings.images_reuse_filename&&blob.name?function(editor,str){var m=str.match(/([\s\S]+?)\.(?:jpeg|jpg|png|gif)$/i);return m?editor.dom.encode(m[1]):null}(editor,blob.name):id,img=new Image;if(img.src=dataUri,settings=editor.settings,imgElm=img,!settings.images_dataimg_filter||settings.images_dataimg_filter(imgElm)){var existingBlobInfo,blobCache=editor.editorUpload.blobCache,blobInfo=void 0;(existingBlobInfo=blobCache.findFirst(function(cachedBlobInfo){return cachedBlobInfo.base64()===base64}))?blobInfo=existingBlobInfo:(blobInfo=blobCache.create(id,blob,base64,name),blobCache.add(blobInfo)),pasteHtml$1(editor,'<img src="'+blobInfo.blobUri()+'">',!1)}else pasteHtml$1(editor,'<img src="'+dataUri+'">',!1)},pasteImageData=function(editor,e,rng){var dataTransfer="paste"===e.type?e.clipboardData:e.dataTransfer;function processItems(items){var i,item,reader,hadImage=!1;if(items)for(i=0;i<items.length;i++)if(item=items[i],/^image\/(jpeg|png|gif|bmp)$/.test(item.type)){var blob=item.getAsFile?item.getAsFile():item;(reader=new window.FileReader).onload=pasteImage.bind(null,editor,rng,reader,blob),reader.readAsDataURL(blob),e.preventDefault(),hadImage=!0}return hadImage}if(editor.settings.paste_data_images&&dataTransfer)return processItems(dataTransfer.items)||processItems(dataTransfer.files)},isKeyboardPasteEvent=function(e){return global$4.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode},registerEventHandlers=function(editor,pasteBin,pasteFormat){var keyboardPastePlainTextState,keyboardPasteTimeStamp=0;function insertClipboardContent(clipboardContent,isKeyBoardPaste,plainTextMode,internal){var content,isPlainTextHtml;hasContentType(clipboardContent,"text/html")?content=clipboardContent["text/html"]:(content=pasteBin.getHtml(),internal=internal||$_vdmj3i4jh8lz10b_isMarked(content),pasteBin.isDefaultContent(content)&&(plainTextMode=!0)),content=$_exxhefidjh8lz10r.trimHtml(content),pasteBin.remove(),isPlainTextHtml=!1===internal&&$_q5v7hi5jh8lz10d_isPlainText(content),content.length&&!isPlainTextHtml||(plainTextMode=!0),plainTextMode&&(content=hasContentType(clipboardContent,"text/plain")&&isPlainTextHtml?clipboardContent["text/plain"]:$_exxhefidjh8lz10r.innerText(content)),pasteBin.isDefaultContent(content)?isKeyBoardPaste||editor.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):plainTextMode?pasteText(editor,content):pasteHtml$1(editor,content,internal)}editor.on("keydown",function(e){function removePasteBinOnKeyUp(e){isKeyboardPasteEvent(e)&&!e.isDefaultPrevented()&&pasteBin.remove()}if(isKeyboardPasteEvent(e)&&!e.isDefaultPrevented()){if((keyboardPastePlainTextState=e.shiftKey&&86===e.keyCode)&&global$1.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),keyboardPasteTimeStamp=(new Date).getTime(),global$1.ie&&keyboardPastePlainTextState)return e.preventDefault(),void $_dotjevhwjh8lz0zq_firePaste(editor,!0);pasteBin.remove(),pasteBin.create(),editor.once("keyup",removePasteBinOnKeyUp),editor.once("paste",function(){editor.off("keyup",removePasteBinOnKeyUp)})}}),editor.on("paste",function(e){var clipboardTimer=(new Date).getTime(),clipboardContent=function(editor,clipboardEvent){var content=getDataTransferItems(clipboardEvent.clipboardData||editor.getDoc().dataTransfer);return $_exxhefidjh8lz10r.isMsEdge()?global$3.extend(content,{"text/html":""}):content}(editor,e),clipboardDelay=(new Date).getTime()-clipboardTimer,isKeyBoardPaste=(new Date).getTime()-keyboardPasteTimeStamp-clipboardDelay<1e3,plainTextMode="text"===pasteFormat.get()||keyboardPastePlainTextState,internal=hasContentType(clipboardContent,$_vdmj3i4jh8lz10b_internalHtmlMime());keyboardPastePlainTextState=!1,e.isDefaultPrevented()||function(e){var clipboardData=e.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&clipboardData&&clipboardData.items&&0===clipboardData.items.length}(e)?pasteBin.remove():hasHtmlOrText(clipboardContent)||!pasteImageData(editor,e,pasteBin.getLastRng()||editor.selection.getRng())?(isKeyBoardPaste||e.preventDefault(),!global$1.ie||isKeyBoardPaste&&!e.ieFake||hasContentType(clipboardContent,"text/html")||(pasteBin.create(),editor.dom.bind(pasteBin.getEl(),"paste",function(e){e.stopPropagation()}),editor.getDoc().execCommand("Paste",!1,null),clipboardContent["text/html"]=pasteBin.getHtml()),hasContentType(clipboardContent,"text/html")?(e.preventDefault(),internal||(internal=$_vdmj3i4jh8lz10b_isMarked(clipboardContent["text/html"])),insertClipboardContent(clipboardContent,isKeyBoardPaste,plainTextMode,internal)):global$2.setEditorTimeout(editor,function(){insertClipboardContent(clipboardContent,isKeyBoardPaste,plainTextMode,internal)},0)):pasteBin.remove()})},getPasteBinParent=function(editor){return global$1.ie&&editor.inline?document.body:editor.getBody()},delegatePasteEvents=function(editor,pasteBinElm){(function(editor){return getPasteBinParent(editor)!==editor.getBody()})(editor)&&editor.dom.bind(pasteBinElm,"paste keyup",function(e){setTimeout(function(){editor.fire("paste")},0)})},getEl=function(editor){return editor.dom.get("mcepastebin")},isDefaultContent=function(pasteBinDefaultContent,content){return content===pasteBinDefaultContent},PasteBin=function(editor){var lastRng=Cell(null);return{create:function(){return function(editor,lastRngCell,pasteBinDefaultContent){var pasteBinElm,dom=editor.dom,body=editor.getBody();lastRngCell.set(editor.selection.getRng()),pasteBinElm=editor.dom.add(getPasteBinParent(editor),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},pasteBinDefaultContent),(global$1.ie||global$1.gecko)&&dom.setStyle(pasteBinElm,"left","rtl"===dom.getStyle(body,"direction",!0)?65535:-65535),dom.bind(pasteBinElm,"beforedeactivate focusin focusout",function(e){e.stopPropagation()}),delegatePasteEvents(editor,pasteBinElm),pasteBinElm.focus(),editor.selection.select(pasteBinElm,!0)}(editor,lastRng,"%MCEPASTEBIN%")},remove:function(){return function(editor,lastRngCell){if(getEl(editor)){for(var pasteBinClone=void 0,lastRng=lastRngCell.get();pasteBinClone=editor.dom.get("mcepastebin");)editor.dom.remove(pasteBinClone),editor.dom.unbind(pasteBinClone);lastRng&&editor.selection.setRng(lastRng)}lastRngCell.set(null)}(editor,lastRng)},getEl:function(){return getEl(editor)},getHtml:function(){return function(editor){var pasteBinElm,pasteBinClones,i,dirtyWrappers,cleanWrapper,copyAndRemove=function(toElm,fromElm){toElm.appendChild(fromElm),editor.dom.remove(fromElm,!0)};for(pasteBinClones=global$3.grep(getPasteBinParent(editor).childNodes,function(elm){return"mcepastebin"===elm.id}),pasteBinElm=pasteBinClones.shift(),global$3.each(pasteBinClones,function(pasteBinClone){copyAndRemove(pasteBinElm,pasteBinClone)}),i=(dirtyWrappers=editor.dom.select("div[id=mcepastebin]",pasteBinElm)).length-1;0<=i;i--)cleanWrapper=editor.dom.create("div"),pasteBinElm.insertBefore(cleanWrapper,dirtyWrappers[i]),copyAndRemove(cleanWrapper,dirtyWrappers[i]);return pasteBinElm?pasteBinElm.innerHTML:""}(editor)},getLastRng:function(){return function(lastRng){return lastRng.get()}(lastRng)},isDefault:function(){return function(editor,pasteBinDefaultContent){var elm,pasteBinElm=getEl(editor);return(elm=pasteBinElm)&&"mcepastebin"===elm.id&&isDefaultContent(pasteBinDefaultContent,pasteBinElm.innerHTML)}(editor,"%MCEPASTEBIN%")},isDefaultContent:function(content){return isDefaultContent("%MCEPASTEBIN%",content)}}},Clipboard=function(editor,pasteFormat){var pasteBin=PasteBin(editor);return editor.on("preInit",function(){return function(editor,pasteBin,pasteFormat){var src;registerEventHandlers(editor,pasteBin,pasteFormat),editor.parser.addNodeFilter("img",function(nodes,name,args){var remove=function(node){node.attr("data-mce-object")||src===global$1.transparentSrc||node.remove()},isWebKitFakeUrl=function(src){return 0===src.indexOf("webkit-fake-url")},isDataUri=function(src){return 0===src.indexOf("data:")};if(!editor.settings.paste_data_images&&function(args){return args.data&&!0===args.data.paste}(args))for(var i=nodes.length;i--;)(src=nodes[i].attributes.map.src)&&(isWebKitFakeUrl(src)?remove(nodes[i]):!editor.settings.allow_html_data_urls&&isDataUri(src)&&remove(nodes[i]))})}(editor,pasteBin,pasteFormat)}),{pasteFormat:pasteFormat,pasteHtml:function(html,internalFlag){return pasteHtml$1(editor,html,internalFlag)},pasteText:function(text){return pasteText(editor,text)},pasteImageData:function(e,rng){return pasteImageData(editor,e,rng)},getDataTransferItems:getDataTransferItems,hasHtmlOrText:hasHtmlOrText,hasContentType:hasContentType}},noop=function(){},setHtml5Clipboard=function(clipboardData,html,text){if(!function(clipboardData){return!1===global$1.iOS&&void 0!==clipboardData&&"function"==typeof clipboardData.setData&&!0!==$_exxhefidjh8lz10r.isMsEdge()}(clipboardData))return!1;try{return clipboardData.clearData(),clipboardData.setData("text/html",html),clipboardData.setData("text/plain",text),clipboardData.setData($_vdmj3i4jh8lz10b_internalHtmlMime(),html),!0}catch(e){return!1}},setClipboardData=function(evt,data,fallback,done){setHtml5Clipboard(evt.clipboardData,data.html,data.text)?(evt.preventDefault(),done()):fallback(data.html,done)},fallback=function(editor){return function(html,done){var markedHtml=$_vdmj3i4jh8lz10b_mark(html),outer=editor.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),inner=editor.dom.create("div",{contenteditable:"true"},markedHtml);editor.dom.setStyles(outer,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),outer.appendChild(inner),editor.dom.add(editor.getBody(),outer);var range=editor.selection.getRng();inner.focus();var offscreenRange=editor.dom.createRng();offscreenRange.selectNodeContents(inner),editor.selection.setRng(offscreenRange),setTimeout(function(){editor.selection.setRng(range),outer.parentNode.removeChild(outer),done()},0)}},getData=function(editor){return{html:editor.selection.getContent({contextual:!0}),text:editor.selection.getContent({format:"text"})}},$_dic32vigjh8lz113_register=function(editor){editor.on("cut",function(editor){return function(evt){!1===editor.selection.isCollapsed()&&setClipboardData(evt,getData(editor),fallback(editor),function(){setTimeout(function(){editor.execCommand("Delete")},0)})}}(editor)),editor.on("copy",function(editor){return function(evt){!1===editor.selection.isCollapsed()&&setClipboardData(evt,getData(editor),fallback(editor),noop)}}(editor))},global$10=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),getCaretRangeFromEvent=function(editor,e){return global$10.getCaretRangeFromPoint(e.clientX,e.clientY,editor.getDoc())},setFocusedRange=function(editor,rng){editor.focus(),editor.selection.setRng(rng)},$_2b0t7zihjh8lz116_setup=function(editor,clipboard,draggingInternallyState){$_59kbdnhxjh8lz0zr.shouldBlockDrop(editor)&&editor.on("dragend dragover draggesture dragdrop drop drag",function(e){e.preventDefault(),e.stopPropagation()}),$_59kbdnhxjh8lz0zr.shouldPasteDataImages(editor)||editor.on("drop",function(e){var dataTransfer=e.dataTransfer;dataTransfer&&dataTransfer.files&&0<dataTransfer.files.length&&e.preventDefault()}),editor.on("drop",function(e){var dropContent,rng;if(rng=getCaretRangeFromEvent(editor,e),!e.isDefaultPrevented()&&!draggingInternallyState.get()){dropContent=clipboard.getDataTransferItems(e.dataTransfer);var plainTextContent,internal=clipboard.hasContentType(dropContent,$_vdmj3i4jh8lz10b_internalHtmlMime());if((clipboard.hasHtmlOrText(dropContent)&&(!(plainTextContent=dropContent["text/plain"])||0!==plainTextContent.indexOf("file://"))||!clipboard.pasteImageData(e,rng))&&rng&&$_59kbdnhxjh8lz0zr.shouldFilterDrop(editor)){var content_1=dropContent["mce-internal"]||dropContent["text/html"]||dropContent["text/plain"];content_1&&(e.preventDefault(),global$2.setEditorTimeout(editor,function(){editor.undoManager.transact(function(){dropContent["mce-internal"]&&editor.execCommand("Delete"),setFocusedRange(editor,rng),content_1=$_exxhefidjh8lz10r.trimHtml(content_1),dropContent["text/html"]?clipboard.pasteHtml(content_1,internal):clipboard.pasteText(content_1)})}))}}}),editor.on("dragstart",function(e){draggingInternallyState.set(!0)}),editor.on("dragover dragend",function(e){$_59kbdnhxjh8lz0zr.shouldPasteDataImages(editor)&&!1===draggingInternallyState.get()&&(e.preventDefault(),setFocusedRange(editor,getCaretRangeFromEvent(editor,e))),"dragend"===e.type&&draggingInternallyState.set(!1)})},$_3fvf8sijjh8lz119_setup=function(editor){var plugin=editor.plugins.paste,preProcess=$_59kbdnhxjh8lz0zr.getPreProcess(editor);preProcess&&editor.on("PastePreProcess",function(e){preProcess.call(plugin,plugin,e)});var postProcess=$_59kbdnhxjh8lz0zr.getPostProcess(editor);postProcess&&editor.on("PastePostProcess",function(e){postProcess.call(plugin,plugin,e)})};function addPreProcessFilter(editor,filterFunc){editor.on("PastePreProcess",function(e){e.content=filterFunc(editor,e.content,e.internal,e.wordContent)})}function removeExplorerBrElementsAfterBlocks(editor,html){if(!$_d6zorbi8jh8lz10j.isWordContent(html))return html;var blockElements=[];global$3.each(editor.schema.getBlockElements(),function(block,blockName){blockElements.push(blockName)});var explorerBlocksRegExp=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+blockElements.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return html=$_exxhefidjh8lz10r.filter(html,[[explorerBlocksRegExp,"$1"]]),html=$_exxhefidjh8lz10r.filter(html,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function removeWebKitStyles(editor,content,internal,isWordHtml){if(isWordHtml||internal)return content;var webKitStyles,webKitStylesSetting=$_59kbdnhxjh8lz0zr.getWebkitStyles(editor);if(!1===$_59kbdnhxjh8lz0zr.shouldRemoveWebKitStyles(editor)||"all"===webKitStylesSetting)return content;if(webKitStylesSetting&&(webKitStyles=webKitStylesSetting.split(/[, ]/)),webKitStyles){var dom_1=editor.dom,node_1=editor.selection.getNode();content=content.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(all,before,value,after){var inputStyles=dom_1.parseStyle(dom_1.decode(value)),outputStyles={};if("none"===webKitStyles)return before+after;for(var i=0;i<webKitStyles.length;i++){var inputValue=inputStyles[webKitStyles[i]],currentValue=dom_1.getStyle(node_1,webKitStyles[i],!0);/color/.test(webKitStyles[i])&&(inputValue=dom_1.toHex(inputValue),currentValue=dom_1.toHex(currentValue)),currentValue!==inputValue&&(outputStyles[webKitStyles[i]]=inputValue)}return(outputStyles=dom_1.serializeStyle(outputStyles,"span"))?before+' style="'+outputStyles+'"'+after:before+after})}else content=content.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return content=content.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(all,before,value,after){return before+' style="'+value+'"'+after})}function removeUnderlineAndFontInAnchor(editor,root){editor.$("a",root).find("font,u").each(function(i,node){editor.dom.remove(node,!0)})}var $_cmw2n5ikjh8lz11b_setup=function(editor){global$1.webkit&&addPreProcessFilter(editor,removeWebKitStyles),global$1.ie&&(addPreProcessFilter(editor,removeExplorerBrElementsAfterBlocks),function(editor,filterFunc){editor.on("PastePostProcess",function(e){filterFunc(editor,e.node)})}(editor,removeUnderlineAndFontInAnchor))},constant=function(value){return function(){return value}},$_6je1ceimjh8lz11h_curry=(constant(!1),constant(!0),function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}}),stateChange=function(editor,clipboard,e){var ctrl=e.control;ctrl.active("text"===clipboard.pasteFormat.get()),editor.on("PastePlainTextToggle",function(e){ctrl.active(e.state)})},$_f92o70iljh8lz11e_register=function(editor,clipboard){var postRender=$_6je1ceimjh8lz11h_curry(stateChange,editor,clipboard);editor.addButton("pastetext",{active:!1,icon:"pastetext",tooltip:"Paste as text",cmd:"mceTogglePlainTextPaste",onPostRender:postRender}),editor.addMenuItem("pastetext",{text:"Paste as text",selectable:!0,active:clipboard.pasteFormat,cmd:"mceTogglePlainTextPaste",onPostRender:postRender})};global.add("paste",function(editor){if(!1===$_5zap27hsjh8lz0zl_hasProPlugin(editor)){var userIsInformedState=Cell(!1),draggingInternallyState=Cell(!1),pasteFormat=Cell($_59kbdnhxjh8lz0zr.isPasteAsTextEnabled(editor)?"text":"html"),clipboard=Clipboard(editor,pasteFormat),quirks=$_cmw2n5ikjh8lz11b_setup(editor);return $_f92o70iljh8lz11e_register(editor,clipboard),$_dw9jlohujh8lz0zn_register(editor,clipboard,userIsInformedState),$_3fvf8sijjh8lz119_setup(editor),$_dic32vigjh8lz113_register(editor),$_2b0t7zihjh8lz116_setup(editor,clipboard,draggingInternallyState),$_b74kiihtjh8lz0zm_get(clipboard,quirks)}})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-preview",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.Env"),$_71hkk4isjh8lz146_getPreviewDialogWidth=function(editor){return parseInt(editor.getParam("plugin_preview_width","650"),10)},$_71hkk4isjh8lz146_getPreviewDialogHeight=function(editor){return parseInt(editor.getParam("plugin_preview_height","500"),10)},$_71hkk4isjh8lz146_getContentStyle=function(editor){return editor.getParam("content_style","")},global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),getPreviewHtml=function(editor){var headHtml="",encode=editor.dom.encode,contentStyle=$_71hkk4isjh8lz146_getContentStyle(editor);headHtml+='<base href="'+encode(editor.documentBaseURI.getURI())+'">',contentStyle&&(headHtml+='<style type="text/css">'+contentStyle+"</style>"),global$2.each(editor.contentCSS,function(url){headHtml+='<link type="text/css" rel="stylesheet" href="'+encode(editor.documentBaseURI.toAbsolute(url))+'">'});var bodyId=editor.settings.body_id||"tinymce";-1!==bodyId.indexOf("=")&&(bodyId=(bodyId=editor.getParam("body_id","","hash"))[editor.id]||bodyId);var bodyClass=editor.settings.body_class||"";-1!==bodyClass.indexOf("=")&&(bodyClass=(bodyClass=editor.getParam("body_class","","hash"))[editor.id]||"");var dirAttr=editor.settings.directionality?' dir="'+editor.settings.directionality+'"':"";return"<!DOCTYPE html><html><head>"+headHtml+'</head><body id="'+encode(bodyId)+'" class="mce-content-body '+encode(bodyClass)+'"'+encode(dirAttr)+">"+editor.getContent()+'<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A") {e.preventDefault();}}}, false);<\/script> </body></html>'},$_65q2xtitjh8lz147_injectIframeContent=function(editor,iframe,sandbox){var previewHtml=getPreviewHtml(editor);if(sandbox)iframe.src="data:text/html;charset=utf-8,"+encodeURIComponent(previewHtml);else{var doc=iframe.contentWindow.document;doc.open(),doc.write(previewHtml),doc.close()}},$_bncxn7iqjh8lz144_open=function(editor){var sandbox=!global$1.ie,dialogHtml='<iframe src="" frameborder="0"'+(sandbox?' sandbox="allow-scripts"':"")+"></iframe>",dialogWidth=$_71hkk4isjh8lz146_getPreviewDialogWidth(editor),dialogHeight=$_71hkk4isjh8lz146_getPreviewDialogHeight(editor);editor.windowManager.open({title:"Preview",width:dialogWidth,height:dialogHeight,html:dialogHtml,buttons:{text:"Close",onclick:function(e){e.control.parent().parent().close()}},onPostRender:function(e){var iframeElm=e.control.getEl("body").firstChild;$_65q2xtitjh8lz147_injectIframeContent(editor,iframeElm,sandbox)}})},$_5cptv5ipjh8lz143_register=function(editor){editor.addCommand("mcePreview",function(){$_bncxn7iqjh8lz144_open(editor)})},$_fy0w72ivjh8lz14a_register=function(editor){editor.addButton("preview",{title:"Preview",cmd:"mcePreview"}),editor.addMenuItem("preview",{text:"Preview",cmd:"mcePreview",context:"view"})};global.add("preview",function(editor){$_5cptv5ipjh8lz143_register(editor),$_fy0w72ivjh8lz14a_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-print",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_62cei9iyjh8lz14q_register=function(editor){editor.addCommand("mcePrint",function(){editor.getWin().print()})},$_75d5qoizjh8lz14r_register=function(editor){editor.addButton("print",{title:"Print",cmd:"mcePrint"}),editor.addMenuItem("print",{text:"Print",cmd:"mcePrint",icon:"print"})};global.add("print",function(editor){$_62cei9iyjh8lz14q_register(editor),$_75d5qoizjh8lz14r_register(editor),editor.addShortcut("Meta+P","","mcePrint")})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-save",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_8l09i7j6jh8lz151_enableWhenDirty=function(editor){return editor.getParam("save_enablewhendirty",!0)},$_8l09i7j6jh8lz151_hasOnSaveCallback=function(editor){return!!editor.getParam("save_onsavecallback")},$_8l09i7j6jh8lz151_hasOnCancelCallback=function(editor){return!!editor.getParam("save_oncancelcallback")},displayErrorMessage=function(editor,message){editor.notificationManager.open({text:editor.translate(message),type:"error"})},$_9mbazj3jh8lz14y_save=function(editor){var formObj;if(formObj=global$1.DOM.getParent(editor.id,"form"),!$_8l09i7j6jh8lz151_enableWhenDirty(editor)||editor.isDirty()){if(editor.save(),$_8l09i7j6jh8lz151_hasOnSaveCallback(editor))return editor.execCallback("save_onsavecallback",editor),void editor.nodeChanged();formObj?(editor.setDirty(!1),formObj.onsubmit&&!formObj.onsubmit()||("function"==typeof formObj.submit?formObj.submit():displayErrorMessage(editor,"Error: Form submit field collision.")),editor.nodeChanged()):displayErrorMessage(editor,"Error: No form element found.")}},$_9mbazj3jh8lz14y_cancel=function(editor){var h=global$2.trim(editor.startContent);$_8l09i7j6jh8lz151_hasOnCancelCallback(editor)?editor.execCallback("save_oncancelcallback",editor):(editor.setContent(h),editor.undoManager.clear(),editor.nodeChanged())},$_eyzj6nj2jh8lz14x_register=function(editor){editor.addCommand("mceSave",function(){$_9mbazj3jh8lz14y_save(editor)}),editor.addCommand("mceCancel",function(){$_9mbazj3jh8lz14y_cancel(editor)})},stateToggle=function(editor){return function(e){var ctrl=e.control;editor.on("nodeChange dirty",function(){ctrl.disabled($_8l09i7j6jh8lz151_enableWhenDirty(editor)&&!editor.isDirty())})}},$_3t71l4j7jh8lz152_register=function(editor){editor.addButton("save",{icon:"save",text:"Save",cmd:"mceSave",disabled:!0,onPostRender:stateToggle(editor)}),editor.addButton("cancel",{text:"Cancel",icon:!1,cmd:"mceCancel",disabled:!0,onPostRender:stateToggle(editor)}),editor.addShortcut("Meta+S","","mceSave")};global.add("save",function(editor){$_3t71l4j7jh8lz152_register(editor),$_eyzj6nj2jh8lz14x_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-searchreplace",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools");function isContentEditableFalse(node){return node&&1===node.nodeType&&"false"===node.contentEditable}var $_fsoyimjejh8lz15q={findAndReplaceDOMText:function(regex,node,replacementNode,captureGroup,schema){var m,text,doc,blockElementsMap,hiddenTextElementsMap,shortEndedElementsMap,matches=[],count=0;function getMatchIndexes(m,captureGroup){if(captureGroup=captureGroup||0,!m[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");var index=m.index;if(0<captureGroup){var cg=m[captureGroup];if(!cg)throw new Error("Invalid capture group");index+=m[0].indexOf(cg),m[0]=cg}return[index,index+m[0].length,[m[0]]]}if(doc=node.ownerDocument,blockElementsMap=schema.getBlockElements(),hiddenTextElementsMap=schema.getWhiteSpaceElements(),shortEndedElementsMap=schema.getShortEndedElements(),text=function getText(node){var txt;if(3===node.nodeType)return node.data;if(hiddenTextElementsMap[node.nodeName]&&!blockElementsMap[node.nodeName])return"";if(txt="",isContentEditableFalse(node))return"\n";if((blockElementsMap[node.nodeName]||shortEndedElementsMap[node.nodeName])&&(txt+="\n"),node=node.firstChild)for(;txt+=getText(node),node=node.nextSibling;);return txt}(node)){if(regex.global)for(;m=regex.exec(text);)matches.push(getMatchIndexes(m,captureGroup));else m=text.match(regex),matches.push(getMatchIndexes(m,captureGroup));return matches.length&&(count=matches.length,function(node,matches,replaceFn){var startNode,endNode,startNodeIndex,endNodeIndex,innerNodes=[],atIndex=0,curNode=node,matchLocation=matches.shift(),matchIndex=0;out:for(;;){if((blockElementsMap[curNode.nodeName]||shortEndedElementsMap[curNode.nodeName]||isContentEditableFalse(curNode))&&atIndex++,3===curNode.nodeType&&(!endNode&&curNode.length+atIndex>=matchLocation[1]?(endNode=curNode,endNodeIndex=matchLocation[1]-atIndex):startNode&&innerNodes.push(curNode),!startNode&&curNode.length+atIndex>matchLocation[0]&&(startNode=curNode,startNodeIndex=matchLocation[0]-atIndex),atIndex+=curNode.length),startNode&&endNode){if(curNode=replaceFn({startNode:startNode,startNodeIndex:startNodeIndex,endNode:endNode,endNodeIndex:endNodeIndex,innerNodes:innerNodes,match:matchLocation[2],matchIndex:matchIndex}),atIndex-=endNode.length-endNodeIndex,endNode=startNode=null,innerNodes=[],matchIndex++,!(matchLocation=matches.shift()))break}else if(hiddenTextElementsMap[curNode.nodeName]&&!blockElementsMap[curNode.nodeName]||!curNode.firstChild){if(curNode.nextSibling){curNode=curNode.nextSibling;continue}}else if(!isContentEditableFalse(curNode)){curNode=curNode.firstChild;continue}for(;;){if(curNode.nextSibling){curNode=curNode.nextSibling;break}if(curNode.parentNode===node)break out;curNode=curNode.parentNode}}}(node,matches,function(nodeName){var makeReplacementNode;if("function"!=typeof nodeName){var stencilNode_1=nodeName.nodeType?nodeName:doc.createElement(nodeName);makeReplacementNode=function(fill,matchIndex){var clone=stencilNode_1.cloneNode(!1);return clone.setAttribute("data-mce-index",matchIndex),fill&&clone.appendChild(doc.createTextNode(fill)),clone}}else makeReplacementNode=nodeName;return function(range){var before,after,parentNode,startNode=range.startNode,endNode=range.endNode,matchIndex=range.matchIndex;if(startNode===endNode){var node_1=startNode;parentNode=node_1.parentNode,0<range.startNodeIndex&&(before=doc.createTextNode(node_1.data.substring(0,range.startNodeIndex)),parentNode.insertBefore(before,node_1));var el=makeReplacementNode(range.match[0],matchIndex);return parentNode.insertBefore(el,node_1),range.endNodeIndex<node_1.length&&(after=doc.createTextNode(node_1.data.substring(range.endNodeIndex)),parentNode.insertBefore(after,node_1)),node_1.parentNode.removeChild(node_1),el}before=doc.createTextNode(startNode.data.substring(0,range.startNodeIndex)),after=doc.createTextNode(endNode.data.substring(range.endNodeIndex));for(var elA=makeReplacementNode(startNode.data.substring(range.startNodeIndex),matchIndex),innerEls=[],i=0,l=range.innerNodes.length;i<l;++i){var innerNode=range.innerNodes[i],innerEl=makeReplacementNode(innerNode.data,matchIndex);innerNode.parentNode.replaceChild(innerEl,innerNode),innerEls.push(innerEl)}var elB=makeReplacementNode(endNode.data.substring(0,range.endNodeIndex),matchIndex);return(parentNode=startNode.parentNode).insertBefore(before,startNode),parentNode.insertBefore(elA,startNode),parentNode.removeChild(startNode),(parentNode=endNode.parentNode).insertBefore(elB,endNode),parentNode.insertBefore(after,endNode),parentNode.removeChild(endNode),elB}}(replacementNode))),count}}},getElmIndex=function(elm){var value=elm.getAttribute("data-mce-index");return"number"==typeof value?""+value:value},unwrap=function(node){var parentNode=node.parentNode;node.firstChild&&parentNode.insertBefore(node.firstChild,node),node.parentNode.removeChild(node)},findSpansByIndex=function(editor,index){var nodes,spans=[];if((nodes=global$1.toArray(editor.getBody().getElementsByTagName("span"))).length)for(var i=0;i<nodes.length;i++){var nodeIndex=getElmIndex(nodes[i]);null!==nodeIndex&&nodeIndex.length&&nodeIndex===index.toString()&&spans.push(nodes[i])}return spans},moveSelection=function(editor,currentIndexState,forward){var testIndex=currentIndexState.get(),dom=editor.dom;(forward=!1!==forward)?testIndex++:testIndex--,dom.removeClass(findSpansByIndex(editor,currentIndexState.get()),"mce-match-marker-selected");var spans=findSpansByIndex(editor,testIndex);return spans.length?(dom.addClass(findSpansByIndex(editor,testIndex),"mce-match-marker-selected"),editor.selection.scrollIntoView(spans[0]),testIndex):-1},removeNode=function(dom,node){var parent=node.parentNode;dom.remove(node),dom.isEmpty(parent)&&dom.remove(parent)},next=function(editor,currentIndexState){var index=moveSelection(editor,currentIndexState,!0);-1!==index&&currentIndexState.set(index)},prev=function(editor,currentIndexState){var index=moveSelection(editor,currentIndexState,!1);-1!==index&&currentIndexState.set(index)},isMatchSpan=function(node){var matchIndex=getElmIndex(node);return null!==matchIndex&&0<matchIndex.length},done=function(editor,currentIndexState,keepEditorSelection){var i,nodes,startContainer,endContainer;for(nodes=global$1.toArray(editor.getBody().getElementsByTagName("span")),i=0;i<nodes.length;i++){var nodeIndex=getElmIndex(nodes[i]);null!==nodeIndex&&nodeIndex.length&&(nodeIndex===currentIndexState.get().toString()&&(startContainer||(startContainer=nodes[i].firstChild),endContainer=nodes[i].firstChild),unwrap(nodes[i]))}if(startContainer&&endContainer){var rng=editor.dom.createRng();return rng.setStart(startContainer,0),rng.setEnd(endContainer,endContainer.data.length),!1!==keepEditorSelection&&editor.selection.setRng(rng),rng}},hasNext=function(editor,currentIndexState){return 0<findSpansByIndex(editor,currentIndexState.get()+1).length},hasPrev=function(editor,currentIndexState){return 0<findSpansByIndex(editor,currentIndexState.get()-1).length},$_84lfczjcjh8lz15j={done:done,find:function(editor,currentIndexState,text,matchCase,wholeWord){text=(text=text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")).replace(/\s/g,"\\s"),text=wholeWord?"\\b"+text+"\\b":text;var count=function(editor,currentIndexState,regex){var node,marker;return(marker=editor.dom.create("span",{"data-mce-bogus":1})).className="mce-match-marker",node=editor.getBody(),done(editor,currentIndexState,!1),$_fsoyimjejh8lz15q.findAndReplaceDOMText(regex,node,marker,!1,editor.schema)}(editor,currentIndexState,new RegExp(text,matchCase?"g":"gi"));return count&&(currentIndexState.set(-1),currentIndexState.set(moveSelection(editor,currentIndexState,!0))),count},next:next,prev:prev,replace:function(editor,currentIndexState,text,forward,all){var i,nodes,node,matchIndex,currentMatchIndex,hasMore,nextIndex=currentIndexState.get();for(forward=!1!==forward,node=editor.getBody(),nodes=global$1.grep(global$1.toArray(node.getElementsByTagName("span")),isMatchSpan),i=0;i<nodes.length;i++){var nodeIndex=getElmIndex(nodes[i]);if(matchIndex=currentMatchIndex=parseInt(nodeIndex,10),all||matchIndex===currentIndexState.get()){for(text.length?(nodes[i].firstChild.nodeValue=text,unwrap(nodes[i])):removeNode(editor.dom,nodes[i]);nodes[++i];){if((matchIndex=parseInt(getElmIndex(nodes[i]),10))!==currentMatchIndex){i--;break}removeNode(editor.dom,nodes[i])}forward&&nextIndex--}else currentMatchIndex>currentIndexState.get()&&nodes[i].setAttribute("data-mce-index",currentMatchIndex-1)}return currentIndexState.set(nextIndex),forward?(hasMore=hasNext(editor,currentIndexState),next(editor,currentIndexState)):(hasMore=hasPrev(editor,currentIndexState),prev(editor,currentIndexState)),!all&&hasMore},hasNext:hasNext,hasPrev:hasPrev},$_9m9g6ojbjh8lz15h_get=function(editor,currentIndexState){return{done:function(keepEditorSelection){return $_84lfczjcjh8lz15j.done(editor,currentIndexState,keepEditorSelection)},find:function(text,matchCase,wholeWord){return $_84lfczjcjh8lz15j.find(editor,currentIndexState,text,matchCase,wholeWord)},next:function(){return $_84lfczjcjh8lz15j.next(editor,currentIndexState)},prev:function(){return $_84lfczjcjh8lz15j.prev(editor,currentIndexState)},replace:function(text,forward,all){return $_84lfczjcjh8lz15j.replace(editor,currentIndexState,text,forward,all)}}},$_14sx6wjgjh8lz15v_open=function(editor,currentIndexState){var selectedText,last={};function updateButtonStates(){win.statusbar.find("#next").disabled(!1===$_84lfczjcjh8lz15j.hasNext(editor,currentIndexState)),win.statusbar.find("#prev").disabled(!1===$_84lfczjcjh8lz15j.hasPrev(editor,currentIndexState))}function notFoundAlert(){editor.windowManager.alert("Could not find the specified string.",function(){win.find("#find")[0].focus()})}editor.undoManager.add(),selectedText=global$1.trim(editor.selection.getContent({format:"text"}));var win=editor.windowManager.open({layout:"flex",pack:"center",align:"center",onClose:function(){editor.focus(),$_84lfczjcjh8lz15j.done(editor,currentIndexState),editor.undoManager.add()},onSubmit:function(e){var count,caseState,text,wholeWord;return e.preventDefault(),caseState=win.find("#case").checked(),wholeWord=win.find("#words").checked(),(text=win.find("#find").value()).length?last.text===text&&last.caseState===caseState&&last.wholeWord===wholeWord?$_84lfczjcjh8lz15j.hasNext(editor,currentIndexState)?($_84lfczjcjh8lz15j.next(editor,currentIndexState),void updateButtonStates()):void notFoundAlert():((count=$_84lfczjcjh8lz15j.find(editor,currentIndexState,text,caseState,wholeWord))||notFoundAlert(),win.statusbar.items().slice(1).disabled(0===count),updateButtonStates(),void(last={text:text,caseState:caseState,wholeWord:wholeWord})):($_84lfczjcjh8lz15j.done(editor,currentIndexState,!1),void win.statusbar.items().slice(1).disabled(!0))},buttons:[{text:"Find",subtype:"primary",onclick:function(){win.submit()}},{text:"Replace",disabled:!0,onclick:function(){$_84lfczjcjh8lz15j.replace(editor,currentIndexState,win.find("#replace").value())||(win.statusbar.items().slice(1).disabled(!0),currentIndexState.set(-1),last={})}},{text:"Replace all",disabled:!0,onclick:function(){$_84lfczjcjh8lz15j.replace(editor,currentIndexState,win.find("#replace").value(),!0,!0),win.statusbar.items().slice(1).disabled(!0),last={}}},{type:"spacer",flex:1},{text:"Prev",name:"prev",disabled:!0,onclick:function(){$_84lfczjcjh8lz15j.prev(editor,currentIndexState),updateButtonStates()}},{text:"Next",name:"next",disabled:!0,onclick:function(){$_84lfczjcjh8lz15j.next(editor,currentIndexState),updateButtonStates()}}],title:"Find and replace",items:{type:"form",padding:20,labelGap:30,spacing:10,items:[{type:"textbox",name:"find",size:40,label:"Find",value:selectedText},{type:"textbox",name:"replace",size:40,label:"Replace with"},{type:"checkbox",name:"case",text:"Match case",label:" "},{type:"checkbox",name:"words",text:"Whole words",label:" "}]}})},$_80q66sjfjh8lz15u_register=function(editor,currentIndexState){editor.addCommand("SearchReplace",function(){$_14sx6wjgjh8lz15v_open(editor,currentIndexState)})},showDialog=function(editor,currentIndexState){return function(){$_14sx6wjgjh8lz15v_open(editor,currentIndexState)}},$_b8zyomjhjh8lz15y_register=function(editor,currentIndexState){editor.addMenuItem("searchreplace",{text:"Find and replace",shortcut:"Meta+F",onclick:showDialog(editor,currentIndexState),separator:"before",context:"edit"}),editor.addButton("searchreplace",{tooltip:"Find and replace",onclick:showDialog(editor,currentIndexState)}),editor.shortcuts.add("Meta+F","",showDialog(editor,currentIndexState))};global.add("searchreplace",function(editor){var currentIndexState=Cell(-1);return $_80q66sjfjh8lz15u_register(editor,currentIndexState),$_b8zyomjhjh8lz15y_register(editor,currentIndexState),$_9m9g6ojbjh8lz15h_get(editor,currentIndexState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-spellchecker",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_2a4jkrjljh8lz172_hasProPlugin=function(editor){return!(!/(^|[ ,])tinymcespellchecker([, ]|$)/.test(editor.settings.plugins)||!global.get("tinymcespellchecker")||(void 0!==window.console&&window.console.log&&window.console.log("Spell Checker Pro is incompatible with Spell Checker plugin! Remove 'spellchecker' from the 'plugins' option."),0))},$_g0597ajnjh8lz176_getLanguages=function(editor){return editor.getParam("spellchecker_languages","English=en,Danish=da,Dutch=nl,Finnish=fi,French=fr_FR,German=de,Italian=it,Polish=pl,Portuguese=pt_BR,Spanish=es,Swedish=sv")},$_g0597ajnjh8lz176_getLanguage=function(editor){var defaultLanguage=editor.getParam("language","en");return editor.getParam("spellchecker_language",defaultLanguage)},$_g0597ajnjh8lz176_getRpcUrl=function(editor){return editor.getParam("spellchecker_rpc_url")},$_g0597ajnjh8lz176_getSpellcheckerCallback=function(editor){return editor.getParam("spellchecker_callback")},$_g0597ajnjh8lz176_getSpellcheckerWordcharPattern=function(editor){var defaultPattern=new RegExp('[^\\s!"#$%&()*+,-./:;<=>?@[\\]^_{|}`§©«®±¶·¸»¼½¾¿×÷¤”“„    ]+',"g");return editor.getParam("spellchecker_wordchar_pattern",defaultPattern)},global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),global$2=tinymce.util.Tools.resolve("tinymce.util.URI"),global$3=tinymce.util.Tools.resolve("tinymce.util.XHR"),$_91lf17jsjh8lz17g_fireSpellcheckStart=function(editor){return editor.fire("SpellcheckStart")},$_91lf17jsjh8lz17g_fireSpellcheckEnd=function(editor){return editor.fire("SpellcheckEnd")};function isContentEditableFalse(node){return node&&1===node.nodeType&&"false"===node.contentEditable}var suggestionsMenu,DomTextMatcher=function(node,editor){var m,text,blockElementsMap,hiddenTextElementsMap,shortEndedElementsMap,matches=[],dom=editor.dom;function createMatch(m,data){if(!m[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return{start:m.index,end:m.index+m[0].length,text:m[0],data:data}}function getWrappersByIndex(index){var elements=node.getElementsByTagName("*"),wrappers=[];index="number"==typeof index?""+index:null;for(var i=0;i<elements.length;i++){var element=elements[i],dataIndex=element.getAttribute("data-mce-index");null!==dataIndex&&dataIndex.length&&-1!==element.className.indexOf("mce-spellchecker-word")&&(dataIndex!==index&&null!==index||wrappers.push(element))}return wrappers}function indexOf(match){for(var i=matches.length;i--;)if(matches[i]===match)return i;return-1}function each(callback){for(var i=0,l=matches.length;i<l&&!1!==callback(matches[i],i);i++);return this}function unwrap(match){var i,element,elements=getWrappersByIndex(match?indexOf(match):null);for(i=elements.length;i--;)(element=elements[i]).parentNode.insertBefore(element.firstChild,element),element.parentNode.removeChild(element);return this}function rangeFromMatch(match){var wrappers=getWrappersByIndex(indexOf(match)),rng=editor.dom.createRng();return rng.setStartBefore(wrappers[0]),rng.setEndAfter(wrappers[wrappers.length-1]),rng}return blockElementsMap=editor.schema.getBlockElements(),hiddenTextElementsMap=editor.schema.getWhiteSpaceElements(),shortEndedElementsMap=editor.schema.getShortEndedElements(),{text:text=function getText(node){var txt;if(3===node.nodeType)return node.data;if(hiddenTextElementsMap[node.nodeName]&&!blockElementsMap[node.nodeName])return"";if(isContentEditableFalse(node))return"\n";if(txt="",(blockElementsMap[node.nodeName]||shortEndedElementsMap[node.nodeName])&&(txt+="\n"),node=node.firstChild)for(;txt+=getText(node),node=node.nextSibling;);return txt}(node),matches:matches,each:each,filter:function(callback){var filteredMatches=[];return each(function(match,i){callback(match,i)&&filteredMatches.push(match)}),matches=filteredMatches,this},reset:function(){return matches.splice(0,matches.length),unwrap(),this},matchFromElement:function(element){return matches[element.getAttribute("data-mce-index")]},elementFromMatch:function(match){return getWrappersByIndex(indexOf(match))[0]},find:function(regex,data){if(text&&regex.global)for(;m=regex.exec(text);)matches.push(createMatch(m,data));return this},add:function(start,length,data){return matches.push({start:start,end:start+length,text:text.substr(start,length),data:data}),this},wrap:function(callback){return matches.length&&function(node,matches,replaceFn){var startNode,endNode,startNodeIndex,endNodeIndex,matchLocation,innerNodes=[],atIndex=0,curNode=node,matchIndex=0;(matches=matches.slice(0)).sort(function(a,b){return a.start-b.start}),matchLocation=matches.shift();out:for(;;){if((blockElementsMap[curNode.nodeName]||shortEndedElementsMap[curNode.nodeName]||isContentEditableFalse(curNode))&&atIndex++,3===curNode.nodeType&&(!endNode&&curNode.length+atIndex>=matchLocation.end?(endNode=curNode,endNodeIndex=matchLocation.end-atIndex):startNode&&innerNodes.push(curNode),!startNode&&curNode.length+atIndex>matchLocation.start&&(startNode=curNode,startNodeIndex=matchLocation.start-atIndex),atIndex+=curNode.length),startNode&&endNode){if(curNode=replaceFn({startNode:startNode,startNodeIndex:startNodeIndex,endNode:endNode,endNodeIndex:endNodeIndex,innerNodes:innerNodes,match:matchLocation.text,matchIndex:matchIndex}),atIndex-=endNode.length-endNodeIndex,endNode=startNode=null,innerNodes=[],matchIndex++,!(matchLocation=matches.shift()))break}else if(hiddenTextElementsMap[curNode.nodeName]&&!blockElementsMap[curNode.nodeName]||!curNode.firstChild){if(curNode.nextSibling){curNode=curNode.nextSibling;continue}}else if(!isContentEditableFalse(curNode)){curNode=curNode.firstChild;continue}for(;;){if(curNode.nextSibling){curNode=curNode.nextSibling;break}if(curNode.parentNode===node)break out;curNode=curNode.parentNode}}}(node,matches,function(callback){function makeReplacementNode(fill,matchIndex){var match=matches[matchIndex];match.stencil||(match.stencil=callback(match));var clone=match.stencil.cloneNode(!1);return clone.setAttribute("data-mce-index",matchIndex),fill&&clone.appendChild(dom.doc.createTextNode(fill)),clone}return function(range){var before,after,parentNode,startNode=range.startNode,endNode=range.endNode,matchIndex=range.matchIndex,doc=dom.doc;if(startNode===endNode){var node_1=startNode;parentNode=node_1.parentNode,0<range.startNodeIndex&&(before=doc.createTextNode(node_1.data.substring(0,range.startNodeIndex)),parentNode.insertBefore(before,node_1));var el=makeReplacementNode(range.match,matchIndex);return parentNode.insertBefore(el,node_1),range.endNodeIndex<node_1.length&&(after=doc.createTextNode(node_1.data.substring(range.endNodeIndex)),parentNode.insertBefore(after,node_1)),node_1.parentNode.removeChild(node_1),el}before=doc.createTextNode(startNode.data.substring(0,range.startNodeIndex)),after=doc.createTextNode(endNode.data.substring(range.endNodeIndex));for(var elA=makeReplacementNode(startNode.data.substring(range.startNodeIndex),matchIndex),innerEls=[],i=0,l=range.innerNodes.length;i<l;++i){var innerNode=range.innerNodes[i],innerEl=makeReplacementNode(innerNode.data,matchIndex);innerNode.parentNode.replaceChild(innerEl,innerNode),innerEls.push(innerEl)}var elB=makeReplacementNode(endNode.data.substring(0,range.endNodeIndex),matchIndex);return(parentNode=startNode.parentNode).insertBefore(before,startNode),parentNode.insertBefore(elA,startNode),parentNode.removeChild(startNode),(parentNode=endNode.parentNode).insertBefore(elB,endNode),parentNode.insertBefore(after,endNode),parentNode.removeChild(endNode),elB}}(callback)),this},unwrap:unwrap,replace:function(match,text){var rng=rangeFromMatch(match);return rng.deleteContents(),0<text.length&&rng.insertNode(editor.dom.doc.createTextNode(text)),rng},rangeFromMatch:rangeFromMatch,indexOf:indexOf}},getTextMatcher=function(editor,textMatcherState){if(!textMatcherState.get()){var textMatcher=DomTextMatcher(editor.getBody(),editor);textMatcherState.set(textMatcher)}return textMatcherState.get()},sendRpcCall=function(editor,pluginUrl,currentLanguageState,name,data,successCallback,errorCallback){var userSpellcheckCallback=$_g0597ajnjh8lz176_getSpellcheckerCallback(editor);(userSpellcheckCallback||function(editor,pluginUrl,currentLanguageState){return function(method,text,doneCallback,errorCallback){var data={method:method,lang:currentLanguageState.get()},postData="";data["addToDictionary"===method?"word":"text"]=text,global$1.each(data,function(value,key){postData&&(postData+="&"),postData+=key+"="+encodeURIComponent(value)}),global$3.send({url:new global$2(pluginUrl).toAbsolute($_g0597ajnjh8lz176_getRpcUrl(editor)),type:"post",content_type:"application/x-www-form-urlencoded",data:postData,success:function(result){if(result=JSON.parse(result))result.error?errorCallback(result.error):doneCallback(result);else{var message=editor.translate("Server response wasn't proper JSON.");errorCallback(message)}},error:function(){var message=editor.translate("The spelling service was not found: (")+$_g0597ajnjh8lz176_getRpcUrl(editor)+editor.translate(")");errorCallback(message)}})}}(editor,pluginUrl,currentLanguageState)).call(editor.plugins.spellchecker,name,data,successCallback,errorCallback)},checkIfFinished=function(editor,startedState,textMatcherState){editor.dom.select("span.mce-spellchecker-word").length||finish(editor,startedState,textMatcherState)},finish=function(editor,startedState,textMatcherState){if(getTextMatcher(editor,textMatcherState).reset(),textMatcherState.set(null),startedState.get())return startedState.set(!1),$_91lf17jsjh8lz17g_fireSpellcheckEnd(editor),!0},getElmIndex=function(elm){var value=elm.getAttribute("data-mce-index");return"number"==typeof value?""+value:value},markErrors=function(editor,startedState,textMatcherState,lastSuggestionsState,data){var suggestions,hasDictionarySupport;if(suggestions="string"!=typeof data&&data.words?(hasDictionarySupport=!!data.dictionary,data.words):data,editor.setProgressState(!1),function(obj){for(var _ in obj)return!1;return!0}(suggestions)){var message=editor.translate("No misspellings found.");return editor.notificationManager.open({text:message,type:"info"}),void startedState.set(!1)}lastSuggestionsState.set({suggestions:suggestions,hasDictionarySupport:hasDictionarySupport}),getTextMatcher(editor,textMatcherState).find($_g0597ajnjh8lz176_getSpellcheckerWordcharPattern(editor)).filter(function(match){return!!suggestions[match.text]}).wrap(function(match){return editor.dom.create("span",{class:"mce-spellchecker-word","data-mce-bogus":1,"data-mce-word":match.text})}),startedState.set(!0),$_91lf17jsjh8lz17g_fireSpellcheckStart(editor)},$_cw8e2ojojh8lz17a={spellcheck:function(editor,pluginUrl,startedState,textMatcherState,lastSuggestionsState,currentLanguageState){finish(editor,startedState,textMatcherState)||(editor.setProgressState(!0),sendRpcCall(editor,pluginUrl,currentLanguageState,"spellcheck",getTextMatcher(editor,textMatcherState).text,function(data){markErrors(editor,startedState,textMatcherState,lastSuggestionsState,data)},function(message){editor.notificationManager.open({text:message,type:"error"}),editor.setProgressState(!1),finish(editor,startedState,textMatcherState)}),editor.focus())},checkIfFinished:checkIfFinished,addToDictionary:function(editor,pluginUrl,startedState,textMatcherState,currentLanguageState,word,spans){editor.setProgressState(!0),sendRpcCall(editor,pluginUrl,currentLanguageState,"addToDictionary",word,function(){editor.setProgressState(!1),editor.dom.remove(spans,!0),checkIfFinished(editor,startedState,textMatcherState)},function(message){editor.notificationManager.open({text:message,type:"error"}),editor.setProgressState(!1)})},ignoreWord:function(editor,startedState,textMatcherState,word,spans,all){editor.selection.collapse(),all?global$1.each(editor.dom.select("span.mce-spellchecker-word"),function(span){span.getAttribute("data-mce-word")===word&&editor.dom.remove(span,!0)}):editor.dom.remove(spans,!0),checkIfFinished(editor,startedState,textMatcherState)},findSpansByIndex:function(editor,index){var nodes,spans=[];if((nodes=global$1.toArray(editor.getBody().getElementsByTagName("span"))).length)for(var i=0;i<nodes.length;i++){var nodeIndex=getElmIndex(nodes[i]);null!==nodeIndex&&nodeIndex.length&&nodeIndex===index.toString()&&spans.push(nodes[i])}return spans},getElmIndex:getElmIndex,markErrors:markErrors},$_6c6maajmjh8lz174_get=function(editor,startedState,lastSuggestionsState,textMatcherState,currentLanguageState,url){return{getTextMatcher:function(){return textMatcherState.get()},getWordCharPattern:function(){return $_g0597ajnjh8lz176_getSpellcheckerWordcharPattern(editor)},markErrors:function(data){$_cw8e2ojojh8lz17a.markErrors(editor,startedState,textMatcherState,lastSuggestionsState,data)},getLanguage:function(){return currentLanguageState.get()}}},$_2adncojujh8lz17o_register=function(editor,pluginUrl,startedState,textMatcherState,lastSuggestionsState,currentLanguageState){editor.addCommand("mceSpellCheck",function(){$_cw8e2ojojh8lz17a.spellcheck(editor,pluginUrl,startedState,textMatcherState,lastSuggestionsState,currentLanguageState)})},$_14j9gfjvjh8lz17p_register=function(editor,pluginUrl,startedState,textMatcherState,currentLanguageState,lastSuggestionsState){var languageValues,items,languageMenuItems=(languageValues=function(editor){return global$1.map($_g0597ajnjh8lz176_getLanguages(editor).split(","),function(langPair){return{name:(langPair=langPair.split("="))[0],value:langPair[1]}})}(editor),items=[],global$1.each(languageValues,function(languageValue){items.push({selectable:!0,text:languageValue.name,data:languageValue.value})}),items),startSpellchecking=function(){$_cw8e2ojojh8lz17a.spellcheck(editor,pluginUrl,startedState,textMatcherState,lastSuggestionsState,currentLanguageState)},buttonArgs={tooltip:"Spellcheck",onclick:startSpellchecking,onPostRender:function(e){var ctrl=e.control;editor.on("SpellcheckStart SpellcheckEnd",function(){ctrl.active(startedState.get())})}};1<languageMenuItems.length&&(buttonArgs.type="splitbutton",buttonArgs.menu=languageMenuItems,buttonArgs.onshow=function(editor,currentLanguageState){return function(e){var selectedLanguage=currentLanguageState.get();e.control.items().each(function(ctrl){ctrl.active(ctrl.settings.data===selectedLanguage)})}}(0,currentLanguageState),buttonArgs.onselect=function(e){currentLanguageState.set(e.control.settings.data)}),editor.addButton("spellchecker",buttonArgs),editor.addMenuItem("spellchecker",{text:"Spellcheck",context:"tools",onclick:startSpellchecking,selectable:!0,onPostRender:function(){var self=this;self.active(startedState.get()),editor.on("SpellcheckStart SpellcheckEnd",function(){self.active(startedState.get())})}})},global$4=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$5=tinymce.util.Tools.resolve("tinymce.ui.Factory"),$_6ic81cjwjh8lz181_setup=function(editor,pluginUrl,lastSuggestionsState,startedState,textMatcherState,currentLanguageState){editor.on("click",function(e){var target=e.target;if("mce-spellchecker-word"===target.className){e.preventDefault();var spans=$_cw8e2ojojh8lz17a.findSpansByIndex(editor,$_cw8e2ojojh8lz17a.getElmIndex(target));if(0<spans.length){var rng=editor.dom.createRng();rng.setStartBefore(spans[0]),rng.setEndAfter(spans[spans.length-1]),editor.selection.setRng(rng),function(editor,pluginUrl,lastSuggestionsState,startedState,textMatcherState,currentLanguageState,word,spans){var items=[],suggestions=lastSuggestionsState.get().suggestions[word];global$1.each(suggestions,function(suggestion){items.push({text:suggestion,onclick:function(){editor.insertContent(editor.dom.encode(suggestion)),editor.dom.remove(spans),$_cw8e2ojojh8lz17a.checkIfFinished(editor,startedState,textMatcherState)}})}),items.push({text:"-"}),lastSuggestionsState.get().hasDictionarySupport&&items.push({text:"Add to Dictionary",onclick:function(){$_cw8e2ojojh8lz17a.addToDictionary(editor,pluginUrl,startedState,textMatcherState,currentLanguageState,word,spans)}}),items.push.apply(items,[{text:"Ignore",onclick:function(){$_cw8e2ojojh8lz17a.ignoreWord(editor,startedState,textMatcherState,word,spans)}},{text:"Ignore all",onclick:function(){$_cw8e2ojojh8lz17a.ignoreWord(editor,startedState,textMatcherState,word,spans,!0)}}]),(suggestionsMenu=global$5.create("menu",{items:items,context:"contextmenu",onautohide:function(e){-1!==e.target.className.indexOf("spellchecker")&&e.preventDefault()},onhide:function(){suggestionsMenu.remove(),suggestionsMenu=null}})).renderTo(document.body);var pos=global$4.DOM.getPos(editor.getContentAreaContainer()),targetPos=editor.dom.getPos(spans[0]),root=editor.dom.getRoot();"BODY"===root.nodeName?(targetPos.x-=root.ownerDocument.documentElement.scrollLeft||root.scrollLeft,targetPos.y-=root.ownerDocument.documentElement.scrollTop||root.scrollTop):(targetPos.x-=root.scrollLeft,targetPos.y-=root.scrollTop),pos.x+=targetPos.x,pos.y+=targetPos.y,suggestionsMenu.moveTo(pos.x,pos.y+spans[0].offsetHeight)}(editor,pluginUrl,lastSuggestionsState,startedState,textMatcherState,currentLanguageState,target.getAttribute("data-mce-word"),spans)}}})};global.add("spellchecker",function(editor,pluginUrl){if(!1===$_2a4jkrjljh8lz172_hasProPlugin(editor)){var startedState=Cell(!1),currentLanguageState=Cell($_g0597ajnjh8lz176_getLanguage(editor)),textMatcherState=Cell(null),lastSuggestionsState=Cell(null);return $_14j9gfjvjh8lz17p_register(editor,pluginUrl,startedState,textMatcherState,currentLanguageState,lastSuggestionsState),$_6ic81cjwjh8lz181_setup(editor,pluginUrl,lastSuggestionsState,startedState,textMatcherState,currentLanguageState),$_2adncojujh8lz17o_register(editor,pluginUrl,startedState,textMatcherState,lastSuggestionsState,currentLanguageState),$_6c6maajmjh8lz174_get(editor,startedState,lastSuggestionsState,textMatcherState,currentLanguageState,pluginUrl)}})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-tabfocus",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$2=tinymce.util.Tools.resolve("tinymce.EditorManager"),global$3=tinymce.util.Tools.resolve("tinymce.Env"),global$4=tinymce.util.Tools.resolve("tinymce.util.Delay"),global$5=tinymce.util.Tools.resolve("tinymce.util.Tools"),global$6=tinymce.util.Tools.resolve("tinymce.util.VK"),$_949n7ik8jh8lz19m_getTabFocus=function(editor){return editor.getParam("tab_focus",function(editor){return editor.getParam("tabfocus_elements",":prev,:next")}(editor))},DOM=global$1.DOM,tabCancel=function(e){e.keyCode!==global$6.TAB||e.ctrlKey||e.altKey||e.metaKey||e.preventDefault()},$_5hsd2hk1jh8lz19f_setup=function(editor){function tabHandler(e){var x,el,v,i;if(!(e.keyCode!==global$6.TAB||e.ctrlKey||e.altKey||e.metaKey||e.isDefaultPrevented())&&(1===(v=global$5.explode($_949n7ik8jh8lz19m_getTabFocus(editor))).length&&(v[1]=v[0],v[0]=":prev"),el=e.shiftKey?":prev"===v[0]?find(-1):DOM.get(v[0]):":next"===v[1]?find(1):DOM.get(v[1]))){var focusEditor=global$2.get(el.id||el.name);el.id&&focusEditor?focusEditor.focus():global$4.setTimeout(function(){global$3.webkit||window.focus(),el.focus()},10),e.preventDefault()}function find(direction){function canSelect(el){return/INPUT|TEXTAREA|BUTTON/.test(el.tagName)&&global$2.get(e.id)&&-1!==el.tabIndex&&function canSelectRecursive(e){return"BODY"===e.nodeName||"hidden"!==e.type&&"none"!==e.style.display&&"hidden"!==e.style.visibility&&canSelectRecursive(e.parentNode)}(el)}if(el=DOM.select(":input:enabled,*[tabindex]:not(iframe)"),global$5.each(el,function(e,i){if(e.id===editor.id)return x=i,!1}),0<direction){for(i=x+1;i<el.length;i++)if(canSelect(el[i]))return el[i]}else for(i=x-1;0<=i;i--)if(canSelect(el[i]))return el[i];return null}}editor.on("init",function(){editor.inline&&DOM.setAttrib(editor.getBody(),"tabIndex",null),editor.on("keyup",tabCancel),global$3.gecko?editor.on("keypress keydown",tabHandler):editor.on("keydown",tabHandler)})};global.add("tabfocus",function(editor){$_5hsd2hk1jh8lz19f_setup(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-table",["tinymce"],function(){return function(){!function(){"use strict";var pIndexOf,fastKeys,global=tinymce.util.Tools.resolve("tinymce.PluginManager"),constant=function(value){return function(){return value}},never=constant(!1),always=constant(!0),$_bgyjg9kejh8lz1ax={noop:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i]},noarg:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return f()}},compose:function(fa,fb){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return fa(fb.apply(null,arguments))}},constant:constant,identity:function(x){return x},tripleEquals:function(a,b){return a===b},curry:function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}},not:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return!f.apply(null,arguments)}},die:function(msg){return function(){throw new Error(msg)}},apply:function(f){return f()},call:function(f){f()},never:never,always:always},never$1=$_bgyjg9kejh8lz1ax.never,always$1=$_bgyjg9kejh8lz1ax.always,none=function(){return NONE},NONE=function(){var eq=function(o){return o.isNone()},call=function(thunk){return thunk()},id=function(n){return n},me={fold:function(n,s){return n()},is:never$1,isSome:never$1,isNone:always$1,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},or:id,orThunk:call,map:none,ap:none,each:function(){},bind:none,flatten:none,exists:never$1,forall:always$1,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:$_bgyjg9kejh8lz1ax.constant("none()")};return Object.freeze&&Object.freeze(me),me}(),some=function(a){var constant_a=function(){return a},self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always$1,isNone:never$1,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},ap:function(optfab){return optfab.fold(none,function(fab){return some(fab(a))})},each:function(f){f(a)},bind:bind,flatten:constant_a,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never$1,function(b){return elementEq(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Option={some:some,none:none,from:function(value){return null==value?NONE:some(value)}},isType=function(type){return function(value){return function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t}(value)===type}},$_d1kyz8kfjh8lz1az={isString:isType("string"),isObject:isType("object"),isArray:isType("array"),isNull:isType("null"),isBoolean:isType("boolean"),isUndefined:isType("undefined"),isFunction:isType("function"),isNumber:isType("number")},rawIndexOf=void 0===(pIndexOf=Array.prototype.indexOf)?function(xs,x){return slowIndexOf(xs,x)}:function(xs,x){return pIndexOf.call(xs,x)},contains=function(xs,x){return-1<rawIndexOf(xs,x)},map=function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i,xs)}return r},each=function(xs,f){for(var i=0,len=xs.length;i<len;i++)f(xs[i],i,xs)},eachr=function(xs,f){for(var i=xs.length-1;0<=i;i--)f(xs[i],i,xs)},filter=function(xs,pred){for(var r=[],i=0,len=xs.length;i<len;i++){var x=xs[i];pred(x,i,xs)&&r.push(x)}return r},findIndex=function(xs,pred){for(var i=0,len=xs.length;i<len;i++)if(pred(xs[i],i,xs))return Option.some(i);return Option.none()},slowIndexOf=function(xs,x){for(var i=0,len=xs.length;i<len;++i)if(xs[i]===x)return i;return-1},push=Array.prototype.push,flatten=function(xs){for(var r=[],i=0,len=xs.length;i<len;++i){if(!Array.prototype.isPrototypeOf(xs[i]))throw new Error("Arr.flatten item "+i+" was not an array, input: "+xs);push.apply(r,xs[i])}return r},forall=function(xs,pred){for(var i=0,len=xs.length;i<len;++i)if(!0!==pred(xs[i],i,xs))return!1;return!0},slice=Array.prototype.slice,from$1=$_d1kyz8kfjh8lz1az.isFunction(Array.from)?Array.from:function(x){return slice.call(x)},$_6b0spykcjh8lz1ao={map:map,each:each,eachr:eachr,partition:function(xs,pred){for(var pass=[],fail=[],i=0,len=xs.length;i<len;i++){var x=xs[i];(pred(x,i,xs)?pass:fail).push(x)}return{pass:pass,fail:fail}},filter:filter,groupBy:function(xs,f){if(0===xs.length)return[];for(var wasType=f(xs[0]),r=[],group=[],i=0,len=xs.length;i<len;i++){var x=xs[i],type=f(x);type!==wasType&&(r.push(group),group=[]),wasType=type,group.push(x)}return 0!==group.length&&r.push(group),r},indexOf:function(xs,x){var r=rawIndexOf(xs,x);return-1===r?Option.none():Option.some(r)},foldr:function(xs,f,acc){return eachr(xs,function(x){acc=f(acc,x)}),acc},foldl:function(xs,f,acc){return each(xs,function(x){acc=f(acc,x)}),acc},find:function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i,xs))return Option.some(x)}return Option.none()},findIndex:findIndex,flatten:flatten,bind:function(xs,f){var output=map(xs,f);return flatten(output)},forall:forall,exists:function(xs,pred){return findIndex(xs,pred).isSome()},contains:contains,equal:function(a1,a2){return a1.length===a2.length&&forall(a1,function(x,i){return x===a2[i]})},reverse:function(xs){var r=slice.call(xs,0);return r.reverse(),r},chunk:function(array,size){for(var r=[],i=0;i<array.length;i+=size){var s=array.slice(i,i+size);r.push(s)}return r},difference:function(a1,a2){return filter(a1,function(x){return!contains(a2,x)})},mapToObject:function(xs,f){for(var r={},i=0,len=xs.length;i<len;i++){var x=xs[i];r[String(x)]=f(x,i)}return r},pure:function(x){return[x]},sort:function(xs,comparator){var copy=slice.call(xs,0);return copy.sort(comparator),copy},range:function(num,f){for(var r=[],i=0;i<num;i++)r.push(f(i));return r},head:function(xs){return 0===xs.length?Option.none():Option.some(xs[0])},last:function(xs){return 0===xs.length?Option.none():Option.some(xs[xs.length-1])},from:from$1},keys=void 0===(fastKeys=Object.keys)?function(o){var r=[];for(var i in o)o.hasOwnProperty(i)&&r.push(i);return r}:fastKeys,each$1=function(obj,f){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k];f(obj[i],i,obj)}},tupleMap=function(obj,f){var r={};return each$1(obj,function(x,i){var tuple=f(x,i,obj);r[tuple.k]=tuple.v}),r},mapToArray=function(obj,f){var r=[];return each$1(obj,function(value,name){r.push(f(value,name))}),r},values=function(obj){return mapToArray(obj,function(v){return v})},$_8kti2hkhjh8lz1bt={bifilter:function(obj,pred){var t={},f={};return each$1(obj,function(x,i){(pred(x,i)?t:f)[i]=x}),{t:t,f:f}},each:each$1,map:function(obj,f){return tupleMap(obj,function(x,i,obj){return{k:i,v:f(x,i,obj)}})},mapToArray:mapToArray,tupleMap:tupleMap,find:function(obj,pred){for(var props=keys(obj),k=0,len=props.length;k<len;k++){var i=props[k],x=obj[i];if(pred(x,i,obj))return Option.some(x)}return Option.none()},keys:keys,values:values,size:function(obj){return values(obj).length}},sort$1=function(arr){return arr.slice(0).sort()},$_9ogtmjkljh8lz1c0_reqMessage=function(required,keys){throw new Error("All required keys ("+sort$1(required).join(", ")+") were not specified. Specified keys were: "+sort$1(keys).join(", ")+".")},$_9ogtmjkljh8lz1c0_unsuppMessage=function(unsupported){throw new Error("Unsupported keys for object: "+sort$1(unsupported).join(", "))},$_9ogtmjkljh8lz1c0_validateStrArr=function(label,array){if(!$_d1kyz8kfjh8lz1az.isArray(array))throw new Error("The "+label+" fields must be an array. Was: "+array+".");$_6b0spykcjh8lz1ao.each(array,function(a){if(!$_d1kyz8kfjh8lz1az.isString(a))throw new Error("The value "+a+" in the "+label+" fields was not a string.")})},$_9ogtmjkljh8lz1c0_invalidTypeMessage=function(incorrect,type){throw new Error("All values need to be of type: "+type+". Keys ("+sort$1(incorrect).join(", ")+") were not.")},$_9ogtmjkljh8lz1c0_checkDupes=function(everything){var sorted=sort$1(everything);$_6b0spykcjh8lz1ao.find(sorted,function(s,i){return i<sorted.length-1&&s===sorted[i+1]}).each(function(d){throw new Error("The field: "+d+" occurs more than once in the combined fields: ["+sorted.join(", ")+"].")})},$_d2ojjnkijh8lz1bv={immutable:function(){for(var fields=[],_i=0;_i<arguments.length;_i++)fields[_i]=arguments[_i];return function(){for(var values=[],_i=0;_i<arguments.length;_i++)values[_i]=arguments[_i];if(fields.length!==values.length)throw new Error('Wrong number of arguments to struct. Expected "['+fields.length+']", got '+values.length+" arguments");var struct={};return $_6b0spykcjh8lz1ao.each(fields,function(name,i){struct[name]=$_bgyjg9kejh8lz1ax.constant(values[i])}),struct}},immutableBag:function(required,optional){var everything=required.concat(optional);if(0===everything.length)throw new Error("You must specify at least one required or optional field.");return $_9ogtmjkljh8lz1c0_validateStrArr("required",required),$_9ogtmjkljh8lz1c0_validateStrArr("optional",optional),$_9ogtmjkljh8lz1c0_checkDupes(everything),function(obj){var keys=$_8kti2hkhjh8lz1bt.keys(obj);$_6b0spykcjh8lz1ao.forall(required,function(req){return $_6b0spykcjh8lz1ao.contains(keys,req)})||$_9ogtmjkljh8lz1c0_reqMessage(required,keys);var unsupported=$_6b0spykcjh8lz1ao.filter(keys,function(key){return!$_6b0spykcjh8lz1ao.contains(everything,key)});0<unsupported.length&&$_9ogtmjkljh8lz1c0_unsuppMessage(unsupported);var r={};return $_6b0spykcjh8lz1ao.each(required,function(req){r[req]=$_bgyjg9kejh8lz1ax.constant(obj[req])}),$_6b0spykcjh8lz1ao.each(optional,function(opt){r[opt]=$_bgyjg9kejh8lz1ax.constant(Object.prototype.hasOwnProperty.call(obj,opt)?Option.some(obj[opt]):Option.none())}),r}}},dimensions=$_d2ojjnkijh8lz1bv.immutable("width","height"),grid=$_d2ojjnkijh8lz1bv.immutable("rows","columns"),address=$_d2ojjnkijh8lz1bv.immutable("row","column"),coords=$_d2ojjnkijh8lz1bv.immutable("x","y"),detail=$_d2ojjnkijh8lz1bv.immutable("element","rowspan","colspan"),detailnew=$_d2ojjnkijh8lz1bv.immutable("element","rowspan","colspan","isNew"),$_g424vknjh8lz1cd={dimensions:dimensions,grid:grid,address:address,coords:coords,extended:$_d2ojjnkijh8lz1bv.immutable("element","rowspan","colspan","row","column"),detail:detail,detailnew:detailnew,rowdata:$_d2ojjnkijh8lz1bv.immutable("element","cells","section"),elementnew:$_d2ojjnkijh8lz1bv.immutable("element","isNew"),rowdatanew:$_d2ojjnkijh8lz1bv.immutable("element","cells","section","isNew"),rowcells:$_d2ojjnkijh8lz1bv.immutable("cells","section"),rowdetails:$_d2ojjnkijh8lz1bv.immutable("details","section"),bounds:$_d2ojjnkijh8lz1bv.immutable("startRow","startCol","finishRow","finishCol")},fromDom=function(node){if(null==node)throw new Error("Node cannot be null or undefined");return{dom:$_bgyjg9kejh8lz1ax.constant(node)}},$_6vo9a4krjh8lz1do={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||1<div.childNodes.length)throw console.error("HTML does not have a single root node",html),"HTML must have a single root node";return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom:fromDom,fromPoint:function(doc,x,y){return Option.from(doc.dom().elementFromPoint(x,y)).map(fromDom)}},$_e4k979ksjh8lz1dt_COMMENT=8,$_e4k979ksjh8lz1dt_DOCUMENT=9,$_e4k979ksjh8lz1dt_ELEMENT=1,$_e4k979ksjh8lz1dt_TEXT=3,ELEMENT=$_e4k979ksjh8lz1dt_ELEMENT,DOCUMENT=$_e4k979ksjh8lz1dt_DOCUMENT,bypassSelector=function(dom){return dom.nodeType!==ELEMENT&&dom.nodeType!==DOCUMENT||0===dom.childElementCount},$_62so4qkqjh8lz1di={all:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?[]:$_6b0spykcjh8lz1ao.map(base.querySelectorAll(selector),$_6vo9a4krjh8lz1do.fromDom)},is:function(element,selector){var elem=element.dom();if(elem.nodeType!==ELEMENT)return!1;if(void 0!==elem.matches)return elem.matches(selector);if(void 0!==elem.msMatchesSelector)return elem.msMatchesSelector(selector);if(void 0!==elem.webkitMatchesSelector)return elem.webkitMatchesSelector(selector);if(void 0!==elem.mozMatchesSelector)return elem.mozMatchesSelector(selector);throw new Error("Browser lacks native selectors")},one:function(selector,scope){var base=void 0===scope?document:scope.dom();return bypassSelector(base)?Option.none():Option.from(base.querySelector(selector)).map($_6vo9a4krjh8lz1do.fromDom)}},$_4g1y8akujh8lz1e7_toArray=function(target,f){for(var r=[],recurse=function(e){return r.push(e),f(e)},cur=f(target);(cur=cur.bind(recurse)).isSome(););return r},global$1="undefined"!=typeof window?window:Function("return this;")(),path=function(parts,scope){for(var o=null!=scope?scope:global$1,i=0;i<parts.length&&null!=o;++i)o=o[parts[i]];return o},$_4ek05lkyjh8lz1en_resolve=function(p,scope){var parts=p.split(".");return path(parts,scope)},$_f53sa7kxjh8lz1ek_getOrDie=function(name,scope){var actual=function(name,scope){return $_4ek05lkyjh8lz1en_resolve(name,scope)}(name,scope);if(null==actual)throw name+" not available on this browser";return actual},node=function(){return $_f53sa7kxjh8lz1ek_getOrDie("Node")},compareDocumentPosition=function(a,b,match){return 0!=(a.compareDocumentPosition(b)&match)},$_1bck1kkwjh8lz1ej_documentPositionContainedBy=function(a,b){return compareDocumentPosition(a,b,node().DOCUMENT_POSITION_CONTAINED_BY)},$_aela9fl1jh8lz1es_cached=function(f){var r,called=!1;return function(){return called||(called=!0,r=f.apply(null,arguments)),r}},unknown=function(){return nu(0,0)},nu=function(major,minor){return{major:major,minor:minor}},$_90grizl4jh8lz1ex={nu:nu,detect:function(versionRegexes,agent){var cleanedAgent=String(agent).toLowerCase();return 0===versionRegexes.length?unknown():function(regexes,agent){var r=function(regexes,s){for(var i=0;i<regexes.length;i++){var x=regexes[i];if(x.test(s))return x}}(regexes,agent);if(!r)return{major:0,minor:0};var group=function(i){return Number(agent.replace(r,"$"+i))};return nu(group(1),group(2))}(versionRegexes,cleanedAgent)},unknown:unknown},isBrowser=function(name,current){return function(){return current===name}},nu$1=function(info){var current=info.current;return{current:current,version:info.version,isEdge:isBrowser("Edge",current),isChrome:isBrowser("Chrome",current),isIE:isBrowser("IE",current),isOpera:isBrowser("Opera",current),isFirefox:isBrowser("Firefox",current),isSafari:isBrowser("Safari",current)}},$_bu3ikfl3jh8lz1eu={unknown:function(){return nu$1({current:void 0,version:$_90grizl4jh8lz1ex.unknown()})},nu:nu$1,edge:$_bgyjg9kejh8lz1ax.constant("Edge"),chrome:$_bgyjg9kejh8lz1ax.constant("Chrome"),ie:$_bgyjg9kejh8lz1ax.constant("IE"),opera:$_bgyjg9kejh8lz1ax.constant("Opera"),firefox:$_bgyjg9kejh8lz1ax.constant("Firefox"),safari:$_bgyjg9kejh8lz1ax.constant("Safari")},isOS=function(name,current){return function(){return current===name}},nu$2=function(info){var current=info.current;return{current:current,version:info.version,isWindows:isOS("Windows",current),isiOS:isOS("iOS",current),isAndroid:isOS("Android",current),isOSX:isOS("OSX",current),isLinux:isOS("Linux",current),isSolaris:isOS("Solaris",current),isFreeBSD:isOS("FreeBSD",current)}},$_3hjylpl5jh8lz1ez={unknown:function(){return nu$2({current:void 0,version:$_90grizl4jh8lz1ex.unknown()})},nu:nu$2,windows:$_bgyjg9kejh8lz1ax.constant("Windows"),ios:$_bgyjg9kejh8lz1ax.constant("iOS"),android:$_bgyjg9kejh8lz1ax.constant("Android"),linux:$_bgyjg9kejh8lz1ax.constant("Linux"),osx:$_bgyjg9kejh8lz1ax.constant("OSX"),solaris:$_bgyjg9kejh8lz1ax.constant("Solaris"),freebsd:$_bgyjg9kejh8lz1ax.constant("FreeBSD")},detect$1=function(candidates,userAgent){var agent=String(userAgent).toLowerCase();return $_6b0spykcjh8lz1ao.find(candidates,function(candidate){return candidate.search(agent)})},$_ai99afl7jh8lz1f5_detectBrowser=function(browsers,userAgent){return detect$1(browsers,userAgent).map(function(browser){var version=$_90grizl4jh8lz1ex.detect(browser.versionRegexes,userAgent);return{current:browser.name,version:version}})},$_ai99afl7jh8lz1f5_detectOs=function(oses,userAgent){return detect$1(oses,userAgent).map(function(os){var version=$_90grizl4jh8lz1ex.detect(os.versionRegexes,userAgent);return{current:os.name,version:version}})},$_cciq56lajh8lz1fm_addToStart=function(str,prefix){return prefix+str},$_cciq56lajh8lz1fm_addToEnd=function(str,suffix){return str+suffix},$_cciq56lajh8lz1fm_removeFromStart=function(str,numChars){return str.substring(numChars)},$_cciq56lajh8lz1fm_removeFromEnd=function(str,numChars){return str.substring(0,str.length-numChars)},$_c66x3zlbjh8lz1fo_head=function(str){return""===str?Option.none():Option.some(str.substr(0,1))},$_c66x3zlbjh8lz1fo_tail=function(str){return""===str?Option.none():Option.some(str.substring(1))},checkRange=function(str,substr,start){return""===substr||!(str.length<substr.length)&&str.substr(start,start+substr.length)===substr},startsWith=function(str,prefix){return checkRange(str,prefix,0)},endsWith=function(str,suffix){return checkRange(str,suffix,str.length-suffix.length)},$_34vbjol9jh8lz1fk={supplant:function(str,obj){return str.replace(/\${([^{}]*)}/g,function(a,b){var value=obj[b];return function(a){var t=typeof a;return"string"===t||"number"===t}(value)?value:a})},startsWith:startsWith,removeLeading:function(str,prefix){return startsWith(str,prefix)?$_cciq56lajh8lz1fm_removeFromStart(str,prefix.length):str},removeTrailing:function(str,prefix){return endsWith(str,prefix)?$_cciq56lajh8lz1fm_removeFromEnd(str,prefix.length):str},ensureLeading:function(str,prefix){return startsWith(str,prefix)?str:$_cciq56lajh8lz1fm_addToStart(str,prefix)},ensureTrailing:function(str,prefix){return endsWith(str,prefix)?str:$_cciq56lajh8lz1fm_addToEnd(str,prefix)},endsWith:endsWith,contains:function(str,substr){return-1!==str.indexOf(substr)},trim:function(str){return str.replace(/^\s+|\s+$/g,"")},lTrim:function(str){return str.replace(/^\s+/g,"")},rTrim:function(str){return str.replace(/\s+$/g,"")},capitalize:function(str){return $_c66x3zlbjh8lz1fo_head(str).bind(function(head){return $_c66x3zlbjh8lz1fo_tail(str).map(function(tail){return head.toUpperCase()+tail})}).getOr(str)}},normalVersionRegex=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,checkContains=function(target){return function(uastring){return $_34vbjol9jh8lz1fk.contains(uastring,target)}},browsers=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(uastring){return $_34vbjol9jh8lz1fk.contains(uastring,"edge/")&&$_34vbjol9jh8lz1fk.contains(uastring,"chrome")&&$_34vbjol9jh8lz1fk.contains(uastring,"safari")&&$_34vbjol9jh8lz1fk.contains(uastring,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,normalVersionRegex],search:function(uastring){return $_34vbjol9jh8lz1fk.contains(uastring,"chrome")&&!$_34vbjol9jh8lz1fk.contains(uastring,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(uastring){return $_34vbjol9jh8lz1fk.contains(uastring,"msie")||$_34vbjol9jh8lz1fk.contains(uastring,"trident")}},{name:"Opera",versionRegexes:[normalVersionRegex,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:checkContains("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:checkContains("firefox")},{name:"Safari",versionRegexes:[normalVersionRegex,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(uastring){return($_34vbjol9jh8lz1fk.contains(uastring,"safari")||$_34vbjol9jh8lz1fk.contains(uastring,"mobile/"))&&$_34vbjol9jh8lz1fk.contains(uastring,"applewebkit")}}],oses=[{name:"Windows",search:checkContains("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(uastring){return $_34vbjol9jh8lz1fk.contains(uastring,"iphone")||$_34vbjol9jh8lz1fk.contains(uastring,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:checkContains("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:checkContains("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:checkContains("linux"),versionRegexes:[]},{name:"Solaris",search:checkContains("sunos"),versionRegexes:[]},{name:"FreeBSD",search:checkContains("freebsd"),versionRegexes:[]}],$_b5ruc3l8jh8lz1fe={browsers:$_bgyjg9kejh8lz1ax.constant(browsers),oses:$_bgyjg9kejh8lz1ax.constant(oses)},$_dgywb9l2jh8lz1et_detect=function(userAgent){var browsers=$_b5ruc3l8jh8lz1fe.browsers(),oses=$_b5ruc3l8jh8lz1fe.oses(),browser=$_ai99afl7jh8lz1f5_detectBrowser(browsers,userAgent).fold($_bu3ikfl3jh8lz1eu.unknown,$_bu3ikfl3jh8lz1eu.nu),os=$_ai99afl7jh8lz1f5_detectOs(oses,userAgent).fold($_3hjylpl5jh8lz1ez.unknown,$_3hjylpl5jh8lz1ez.nu),deviceType=function(os,browser,userAgent){var isiPad=os.isiOS()&&!0===/ipad/i.test(userAgent),isiPhone=os.isiOS()&&!isiPad,isAndroid3=os.isAndroid()&&3===os.version.major,isAndroid4=os.isAndroid()&&4===os.version.major,isTablet=isiPad||isAndroid3||isAndroid4&&!0===/mobile/i.test(userAgent),isTouch=os.isiOS()||os.isAndroid(),isPhone=isTouch&&!isTablet,iOSwebview=browser.isSafari()&&os.isiOS()&&!1===/safari/i.test(userAgent);return{isiPad:$_bgyjg9kejh8lz1ax.constant(isiPad),isiPhone:$_bgyjg9kejh8lz1ax.constant(isiPhone),isTablet:$_bgyjg9kejh8lz1ax.constant(isTablet),isPhone:$_bgyjg9kejh8lz1ax.constant(isPhone),isTouch:$_bgyjg9kejh8lz1ax.constant(isTouch),isAndroid:os.isAndroid,isiOS:os.isiOS,isWebView:$_bgyjg9kejh8lz1ax.constant(iOSwebview)}}(os,browser,userAgent);return{browser:browser,os:os,deviceType:deviceType}},$_a6om0dl0jh8lz1ep={detect:$_aela9fl1jh8lz1es_cached(function(){var userAgent=navigator.userAgent;return $_dgywb9l2jh8lz1et_detect(userAgent)})},eq=function(e1,e2){return e1.dom()===e2.dom()},contains$2=$_a6om0dl0jh8lz1ep.detect().browser.isIE()?function(e1,e2){return $_1bck1kkwjh8lz1ej_documentPositionContainedBy(e1.dom(),e2.dom())}:function(e1,e2){var d1=e1.dom(),d2=e2.dom();return d1!==d2&&d1.contains(d2)},$_2eywnlkvjh8lz1e8={eq:eq,isEqualNode:function(e1,e2){return e1.dom().isEqualNode(e2.dom())},member:function(element,elements){return $_6b0spykcjh8lz1ao.exists(elements,$_bgyjg9kejh8lz1ax.curry(eq,element))},contains:contains$2,is:$_62so4qkqjh8lz1di.is},owner=function(element){return $_6vo9a4krjh8lz1do.fromDom(element.dom().ownerDocument)},parent=function(element){var dom=element.dom();return Option.from(dom.parentNode).map($_6vo9a4krjh8lz1do.fromDom)},prevSibling=function(element){var dom=element.dom();return Option.from(dom.previousSibling).map($_6vo9a4krjh8lz1do.fromDom)},nextSibling=function(element){var dom=element.dom();return Option.from(dom.nextSibling).map($_6vo9a4krjh8lz1do.fromDom)},children=function(element){var dom=element.dom();return $_6b0spykcjh8lz1ao.map(dom.childNodes,$_6vo9a4krjh8lz1do.fromDom)},child=function(element,index){var children=element.dom().childNodes;return Option.from(children[index]).map($_6vo9a4krjh8lz1do.fromDom)},spot=$_d2ojjnkijh8lz1bv.immutable("element","offset"),$_4hc7u2ktjh8lz1dv={owner:owner,defaultView:function(element){var defaultView=element.dom().ownerDocument.defaultView;return $_6vo9a4krjh8lz1do.fromDom(defaultView)},documentElement:function(element){var doc=owner(element);return $_6vo9a4krjh8lz1do.fromDom(doc.dom().documentElement)},parent:parent,findIndex:function(element){return parent(element).bind(function(p){var kin=children(p);return $_6b0spykcjh8lz1ao.findIndex(kin,function(elem){return $_2eywnlkvjh8lz1e8.eq(element,elem)})})},parents:function(element,isRoot){for(var stop=$_d1kyz8kfjh8lz1az.isFunction(isRoot)?isRoot:$_bgyjg9kejh8lz1ax.constant(!1),dom=element.dom(),ret=[];null!==dom.parentNode&&void 0!==dom.parentNode;){var rawParent=dom.parentNode,parent=$_6vo9a4krjh8lz1do.fromDom(rawParent);if(ret.push(parent),!0===stop(parent))break;dom=rawParent}return ret},siblings:function(element){return parent(element).map(children).map(function(elements){return $_6b0spykcjh8lz1ao.filter(elements,function(x){return!$_2eywnlkvjh8lz1e8.eq(element,x)})}).getOr([])},prevSibling:prevSibling,offsetParent:function(element){var dom=element.dom();return Option.from(dom.offsetParent).map($_6vo9a4krjh8lz1do.fromDom)},prevSiblings:function(element){return $_6b0spykcjh8lz1ao.reverse($_4g1y8akujh8lz1e7_toArray(element,prevSibling))},nextSibling:nextSibling,nextSiblings:function(element){return $_4g1y8akujh8lz1e7_toArray(element,nextSibling)},children:children,child:child,firstChild:function(element){return child(element,0)},lastChild:function(element){return child(element,element.dom().childNodes.length-1)},childNodesCount:function(element){return element.dom().childNodes.length},hasChildNodes:function(element){return element.dom().hasChildNodes()},leaf:function(element,offset){var cs=children(element);return 0<cs.length&&offset<cs.length?spot(cs[offset],0):spot(element,offset)}},filterFirstLayer=function(scope,selector,predicate){return $_6b0spykcjh8lz1ao.bind($_4hc7u2ktjh8lz1dv.children(scope),function(x){return $_62so4qkqjh8lz1di.is(x,selector)?predicate(x)?[x]:[]:filterFirstLayer(x,selector,predicate)})},$_egd9zbkpjh8lz1d3={firstLayer:function(scope,selector){return filterFirstLayer(scope,selector,$_bgyjg9kejh8lz1ax.constant(!0))},filterFirstLayer:filterFirstLayer},name=function(element){return element.dom().nodeName.toLowerCase()},type=function(element){return element.dom().nodeType},isType$1=function(t){return function(element){return type(element)===t}},isElement=isType$1($_e4k979ksjh8lz1dt_ELEMENT),isText=isType$1($_e4k979ksjh8lz1dt_TEXT),isDocument=isType$1($_e4k979ksjh8lz1dt_DOCUMENT),$_a3izpgldjh8lz1fy={name:name,type:type,value:function(element){return element.dom().nodeValue},isElement:isElement,isText:isText,isDocument:isDocument,isComment:function(element){return type(element)===$_e4k979ksjh8lz1dt_COMMENT||"#comment"===name(element)}},rawSet=function(dom,key,value){if(!($_d1kyz8kfjh8lz1az.isString(value)||$_d1kyz8kfjh8lz1az.isBoolean(value)||$_d1kyz8kfjh8lz1az.isNumber(value)))throw console.error("Invalid call to Attr.set. Key ",key,":: Value ",value,":: Element ",dom),new Error("Attribute value was not simple");dom.setAttribute(key,value+"")},set=function(element,key,value){rawSet(element.dom(),key,value)},get=function(element,key){var v=element.dom().getAttribute(key);return null===v?void 0:v},has=function(element,key){var dom=element.dom();return!(!dom||!dom.hasAttribute)&&dom.hasAttribute(key)},$_1mp8lglcjh8lz1fq={clone:function(element){return $_6b0spykcjh8lz1ao.foldl(element.dom().attributes,function(acc,attr){return acc[attr.name]=attr.value,acc},{})},set:set,setAll:function(element,attrs){var dom=element.dom();$_8kti2hkhjh8lz1bt.each(attrs,function(v,k){rawSet(dom,k,v)})},get:get,has:has,remove:function(element,key){element.dom().removeAttribute(key)},hasNone:function(element){var attrs=element.dom().attributes;return null==attrs||0===attrs.length},transfer:function(source,destination,attrs){$_a3izpgldjh8lz1fy.isElement(source)&&$_a3izpgldjh8lz1fy.isElement(destination)&&$_6b0spykcjh8lz1ao.each(attrs,function(attr){!function(source,destination,attr){has(source,attr)&&!has(destination,attr)&&set(destination,attr,get(source,attr))}(source,destination,attr)})}},body=$_aela9fl1jh8lz1es_cached(function(){return getBody($_6vo9a4krjh8lz1do.fromDom(document))}),getBody=function(doc){var body=doc.dom().body;if(null==body)throw"Body is not available yet";return $_6vo9a4krjh8lz1do.fromDom(body)},$_brbde9lgjh8lz1g4={body:body,getBody:getBody,inBody:function(element){var dom=$_a3izpgldjh8lz1fy.isText(element)?element.dom().parentNode:element.dom();return null!=dom&&dom.ownerDocument.body.contains(dom)}},descendants=function(scope,predicate){var result=[];return $_6b0spykcjh8lz1ao.each($_4hc7u2ktjh8lz1dv.children(scope),function(x){predicate(x)&&(result=result.concat([x])),result=result.concat(descendants(x,predicate))}),result},$_5a2t82lfjh8lz1g0={all:function(predicate){return descendants($_brbde9lgjh8lz1g4.body(),predicate)},ancestors:function(scope,predicate,isRoot){return $_6b0spykcjh8lz1ao.filter($_4hc7u2ktjh8lz1dv.parents(scope,isRoot),predicate)},siblings:function(scope,predicate){return $_6b0spykcjh8lz1ao.filter($_4hc7u2ktjh8lz1dv.siblings(scope),predicate)},children:function(scope,predicate){return $_6b0spykcjh8lz1ao.filter($_4hc7u2ktjh8lz1dv.children(scope),predicate)},descendants:descendants},$_coxlualejh8lz1fz={all:function(selector){return $_62so4qkqjh8lz1di.all(selector)},ancestors:function(scope,selector,isRoot){return $_5a2t82lfjh8lz1g0.ancestors(scope,function(e){return $_62so4qkqjh8lz1di.is(e,selector)},isRoot)},siblings:function(scope,selector){return $_5a2t82lfjh8lz1g0.siblings(scope,function(e){return $_62so4qkqjh8lz1di.is(e,selector)})},children:function(scope,selector){return $_5a2t82lfjh8lz1g0.children(scope,function(e){return $_62so4qkqjh8lz1di.is(e,selector)})},descendants:function(scope,selector){return $_62so4qkqjh8lz1di.all(selector,scope)}};function ClosestOrAncestor(is,ancestor,scope,a,isRoot){return is(scope,a)?Option.some(scope):$_d1kyz8kfjh8lz1az.isFunction(isRoot)&&isRoot(scope)?Option.none():ancestor(scope,a,isRoot)}var ancestor=function(scope,predicate,isRoot){for(var element=scope.dom(),stop=$_d1kyz8kfjh8lz1az.isFunction(isRoot)?isRoot:$_bgyjg9kejh8lz1ax.constant(!1);element.parentNode;){element=element.parentNode;var el=$_6vo9a4krjh8lz1do.fromDom(element);if(predicate(el))return Option.some(el);if(stop(el))break}return Option.none()},child$1=function(scope,predicate){return $_6b0spykcjh8lz1ao.find(scope.dom().childNodes,$_bgyjg9kejh8lz1ax.compose(predicate,$_6vo9a4krjh8lz1do.fromDom)).map($_6vo9a4krjh8lz1do.fromDom)},descendant=function(scope,predicate){var descend=function(element){for(var i=0;i<element.childNodes.length;i++){if(predicate($_6vo9a4krjh8lz1do.fromDom(element.childNodes[i])))return Option.some($_6vo9a4krjh8lz1do.fromDom(element.childNodes[i]));var res=descend(element.childNodes[i]);if(res.isSome())return res}return Option.none()};return descend(scope.dom())},$_aykj0glijh8lz1g9={first:function(predicate){return descendant($_brbde9lgjh8lz1g4.body(),predicate)},ancestor:ancestor,closest:function(scope,predicate,isRoot){return ClosestOrAncestor(function(scope){return predicate(scope)},ancestor,scope,predicate,isRoot)},sibling:function(scope,predicate){var element=scope.dom();return element.parentNode?child$1($_6vo9a4krjh8lz1do.fromDom(element.parentNode),function(x){return!$_2eywnlkvjh8lz1e8.eq(scope,x)&&predicate(x)}):Option.none()},child:child$1,descendant:descendant},ancestor$1=function(scope,selector,isRoot){return $_aykj0glijh8lz1g9.ancestor(scope,function(e){return $_62so4qkqjh8lz1di.is(e,selector)},isRoot)},$_fiygddlhjh8lz1g7={first:function(selector){return $_62so4qkqjh8lz1di.one(selector)},ancestor:ancestor$1,sibling:function(scope,selector){return $_aykj0glijh8lz1g9.sibling(scope,function(e){return $_62so4qkqjh8lz1di.is(e,selector)})},child:function(scope,selector){return $_aykj0glijh8lz1g9.child(scope,function(e){return $_62so4qkqjh8lz1di.is(e,selector)})},descendant:function(scope,selector){return $_62so4qkqjh8lz1di.one(selector,scope)},closest:function(scope,selector,isRoot){return ClosestOrAncestor($_62so4qkqjh8lz1di.is,ancestor$1,scope,selector,isRoot)}},lookup=function(tags,element,_isRoot){var isRoot=void 0!==_isRoot?_isRoot:$_bgyjg9kejh8lz1ax.constant(!1);return isRoot(element)?Option.none():$_6b0spykcjh8lz1ao.contains(tags,$_a3izpgldjh8lz1fy.name(element))?Option.some(element):$_fiygddlhjh8lz1g7.ancestor(element,tags.join(","),function(element){return $_62so4qkqjh8lz1di.is(element,"table")||isRoot(element)})},neighbours=function(selector,element){return $_4hc7u2ktjh8lz1dv.parent(element).map(function(parent){return $_coxlualejh8lz1fz.children(parent,selector)})},neighbourCells=$_bgyjg9kejh8lz1ax.curry(neighbours,"th,td"),neighbourRows=$_bgyjg9kejh8lz1ax.curry(neighbours,"tr"),attr=function(element,property){return parseInt($_1mp8lglcjh8lz1fq.get(element,property),10)},$_ee8pmfkojh8lz1ch={cell:function(element,isRoot){return lookup(["td","th"],element,isRoot)},firstCell:function(ancestor){return $_fiygddlhjh8lz1g7.descendant(ancestor,"th,td")},cells:function(ancestor){return $_egd9zbkpjh8lz1d3.firstLayer(ancestor,"th,td")},neighbourCells:neighbourCells,table:function(element,isRoot){return $_fiygddlhjh8lz1g7.closest(element,"table",isRoot)},row:function(element,isRoot){return lookup(["tr"],element,isRoot)},rows:function(ancestor){return $_egd9zbkpjh8lz1d3.firstLayer(ancestor,"tr")},notCell:function(element,isRoot){return lookup(["caption","tr","tbody","tfoot","thead"],element,isRoot)},neighbourRows:neighbourRows,attr:attr,grid:function(element,rowProp,colProp){var rows=attr(element,rowProp),cols=attr(element,colProp);return $_g424vknjh8lz1cd.grid(rows,cols)}},$_ff1h20kmjh8lz1c3_fromTable=function(table){var rows=$_ee8pmfkojh8lz1ch.rows(table);return $_6b0spykcjh8lz1ao.map(rows,function(row){var element=row,parentSection=$_4hc7u2ktjh8lz1dv.parent(element).bind(function(parent){var parentName=$_a3izpgldjh8lz1fy.name(parent);return"tfoot"===parentName||"thead"===parentName||"tbody"===parentName?parentName:"tbody"}),cells=$_6b0spykcjh8lz1ao.map($_ee8pmfkojh8lz1ch.cells(row),function(cell){var rowspan=$_1mp8lglcjh8lz1fq.has(cell,"rowspan")?parseInt($_1mp8lglcjh8lz1fq.get(cell,"rowspan"),10):1,colspan=$_1mp8lglcjh8lz1fq.has(cell,"colspan")?parseInt($_1mp8lglcjh8lz1fq.get(cell,"colspan"),10):1;return $_g424vknjh8lz1cd.detail(cell,rowspan,colspan)});return $_g424vknjh8lz1cd.rowdata(element,cells,parentSection)})},$_ff1h20kmjh8lz1c3_fromPastedRows=function(rows,example){return $_6b0spykcjh8lz1ao.map(rows,function(row){var cells=$_6b0spykcjh8lz1ao.map($_ee8pmfkojh8lz1ch.cells(row),function(cell){var rowspan=$_1mp8lglcjh8lz1fq.has(cell,"rowspan")?parseInt($_1mp8lglcjh8lz1fq.get(cell,"rowspan"),10):1,colspan=$_1mp8lglcjh8lz1fq.has(cell,"colspan")?parseInt($_1mp8lglcjh8lz1fq.get(cell,"colspan"),10):1;return $_g424vknjh8lz1cd.detail(cell,rowspan,colspan)});return $_g424vknjh8lz1cd.rowdata(row,cells,example.section())})},key=function(row,column){return row+","+column},filterItems=function(warehouse,predicate){var all=$_6b0spykcjh8lz1ao.bind(warehouse.all(),function(r){return r.cells()});return $_6b0spykcjh8lz1ao.filter(all,predicate)},$_fxwupplkjh8lz1go={generate:function(list){var access={},cells=[],maxRows=list.length,maxColumns=0;$_6b0spykcjh8lz1ao.each(list,function(details,r){var currentRow=[];$_6b0spykcjh8lz1ao.each(details.cells(),function(detail,c){for(var start=0;void 0!==access[key(r,start)];)start++;for(var current=$_g424vknjh8lz1cd.extended(detail.element(),detail.rowspan(),detail.colspan(),r,start),i=0;i<detail.colspan();i++)for(var j=0;j<detail.rowspan();j++){var cc=start+i,newpos=key(r+j,cc);access[newpos]=current,maxColumns=Math.max(maxColumns,cc+1)}currentRow.push(current)}),cells.push($_g424vknjh8lz1cd.rowdata(details.element(),currentRow,details.section()))});var grid=$_g424vknjh8lz1cd.grid(maxRows,maxColumns);return{grid:$_bgyjg9kejh8lz1ax.constant(grid),access:$_bgyjg9kejh8lz1ax.constant(access),all:$_bgyjg9kejh8lz1ax.constant(cells)}},getAt:function(warehouse,row,column){var raw=warehouse.access()[key(row,column)];return void 0!==raw?Option.some(raw):Option.none()},findItem:function(warehouse,item,comparator){var filtered=filterItems(warehouse,function(detail){return comparator(item,detail.element())});return 0<filtered.length?Option.some(filtered[0]):Option.none()},filterItems:filterItems,justCells:function(warehouse){var rows=$_6b0spykcjh8lz1ao.map(warehouse.all(),function(w){return w.cells()});return $_6b0spykcjh8lz1ao.flatten(rows)}},$_3r8yz1lmjh8lz1hf_isSupported=function(dom){return void 0!==dom.style},internalSet=function(dom,property,value){if(!$_d1kyz8kfjh8lz1az.isString(value))throw console.error("Invalid call to CSS.set. Property ",property,":: Value ",value,":: Element ",dom),new Error("CSS value must be a string: "+value);$_3r8yz1lmjh8lz1hf_isSupported(dom)&&dom.style.setProperty(property,value)},internalRemove=function(dom,property){$_3r8yz1lmjh8lz1hf_isSupported(dom)&&dom.style.removeProperty(property)},set$1=function(element,property,value){var dom=element.dom();internalSet(dom,property,value)},getUnsafeProperty=function(dom,property){return $_3r8yz1lmjh8lz1hf_isSupported(dom)?dom.style.getPropertyValue(property):""},getRaw=function(element,property){var dom=element.dom(),raw=getUnsafeProperty(dom,property);return Option.from(raw).filter(function(r){return 0<r.length})},$_3ory84lljh8lz1gx={copy:function(source,target){var sourceDom=source.dom(),targetDom=target.dom();$_3r8yz1lmjh8lz1hf_isSupported(sourceDom)&&$_3r8yz1lmjh8lz1hf_isSupported(targetDom)&&(targetDom.style.cssText=sourceDom.style.cssText)},set:set$1,preserve:function(element,f){var oldStyles=$_1mp8lglcjh8lz1fq.get(element,"style"),result=f(element);return(void 0===oldStyles?$_1mp8lglcjh8lz1fq.remove:$_1mp8lglcjh8lz1fq.set)(element,"style",oldStyles),result},setAll:function(element,css){var dom=element.dom();$_8kti2hkhjh8lz1bt.each(css,function(v,k){internalSet(dom,k,v)})},setOptions:function(element,css){var dom=element.dom();$_8kti2hkhjh8lz1bt.each(css,function(v,k){v.fold(function(){internalRemove(dom,k)},function(value){internalSet(dom,k,value)})})},remove:function(element,property){var dom=element.dom();internalRemove(dom,property),$_1mp8lglcjh8lz1fq.has(element,"style")&&""===$_34vbjol9jh8lz1fk.trim($_1mp8lglcjh8lz1fq.get(element,"style"))&&$_1mp8lglcjh8lz1fq.remove(element,"style")},get:function(element,property){var dom=element.dom(),r=window.getComputedStyle(dom).getPropertyValue(property),v=""!==r||$_brbde9lgjh8lz1g4.inBody(element)?r:getUnsafeProperty(dom,property);return null===v?void 0:v},getRaw:getRaw,getAllRaw:function(element){var css={},dom=element.dom();if($_3r8yz1lmjh8lz1hf_isSupported(dom))for(var i=0;i<dom.style.length;i++){var ruleName=dom.style.item(i);css[ruleName]=dom.style[ruleName]}return css},isValidValue:function(tag,property,value){var element=$_6vo9a4krjh8lz1do.fromTag(tag);return set$1(element,property,value),getRaw(element,property).isSome()},reflow:function(e){return e.dom().offsetWidth},transfer:function(source,destination,styles){$_a3izpgldjh8lz1fy.isElement(source)&&$_a3izpgldjh8lz1fy.isElement(destination)&&$_6b0spykcjh8lz1ao.each(styles,function(style){!function(source,destination,style){getRaw(source,style).each(function(value){getRaw(destination,style).isNone()&&set$1(destination,style,value)})}(source,destination,style)})}},before=function(marker,element){$_4hc7u2ktjh8lz1dv.parent(marker).each(function(v){v.dom().insertBefore(element.dom(),marker.dom())})},append=function(parent,element){parent.dom().appendChild(element.dom())},$_6qqu1alnjh8lz1hg={before:before,after:function(marker,element){$_4hc7u2ktjh8lz1dv.nextSibling(marker).fold(function(){$_4hc7u2ktjh8lz1dv.parent(marker).each(function(v){append(v,element)})},function(v){before(v,element)})},prepend:function(parent,element){$_4hc7u2ktjh8lz1dv.firstChild(parent).fold(function(){append(parent,element)},function(v){parent.dom().insertBefore(element.dom(),v.dom())})},append:append,appendAt:function(parent,element,index){$_4hc7u2ktjh8lz1dv.child(parent,index).fold(function(){append(parent,element)},function(v){before(v,element)})},wrap:function(element,wrapper){before(element,wrapper),append(wrapper,element)}},$_d7tq5mlpjh8lz1hl={before:function(marker,elements){$_6b0spykcjh8lz1ao.each(elements,function(x){$_6qqu1alnjh8lz1hg.before(marker,x)})},after:function(marker,elements){$_6b0spykcjh8lz1ao.each(elements,function(x,i){var e=0===i?marker:elements[i-1];$_6qqu1alnjh8lz1hg.after(e,x)})},prepend:function(parent,elements){$_6b0spykcjh8lz1ao.each(elements.slice().reverse(),function(x){$_6qqu1alnjh8lz1hg.prepend(parent,x)})},append:function(parent,elements){$_6b0spykcjh8lz1ao.each(elements,function(x){$_6qqu1alnjh8lz1hg.append(parent,x)})}},remove$2=function(element){var dom=element.dom();null!==dom.parentNode&&dom.parentNode.removeChild(dom)},$_f2hny0lojh8lz1hi={empty:function(element){element.dom().textContent="",$_6b0spykcjh8lz1ao.each($_4hc7u2ktjh8lz1dv.children(element),function(rogue){remove$2(rogue)})},remove:remove$2,unwrap:function(wrapper){var children=$_4hc7u2ktjh8lz1dv.children(wrapper);0<children.length&&$_d7tq5mlpjh8lz1hl.before(wrapper,children),remove$2(wrapper)}},stats=$_d2ojjnkijh8lz1bv.immutable("minRow","minCol","maxRow","maxCol"),findSelectedStats=function(house,isSelected){var totalColumns=house.grid().columns(),minRow=house.grid().rows(),minCol=totalColumns,maxRow=0,maxCol=0;return $_8kti2hkhjh8lz1bt.each(house.access(),function(detail){if(isSelected(detail)){var startRow=detail.row(),endRow=startRow+detail.rowspan()-1,startCol=detail.column(),endCol=startCol+detail.colspan()-1;startRow<minRow?minRow=startRow:maxRow<endRow&&(maxRow=endRow),startCol<minCol?minCol=startCol:maxCol<endCol&&(maxCol=endCol)}}),stats(minRow,minCol,maxRow,maxCol)},makeCell=function(list,seenSelected,rowIndex){var row=list[rowIndex].element(),td=$_6vo9a4krjh8lz1do.fromTag("td");$_6qqu1alnjh8lz1hg.append(td,$_6vo9a4krjh8lz1do.fromTag("br")),(seenSelected?$_6qqu1alnjh8lz1hg.append:$_6qqu1alnjh8lz1hg.prepend)(row,td)},$_dj8mm1kgjh8lz1b3_extract=function(table,selectedSelector){var isSelected=function(detail){return $_62so4qkqjh8lz1di.is(detail.element(),selectedSelector)},list=$_ff1h20kmjh8lz1c3_fromTable(table),house=$_fxwupplkjh8lz1go.generate(list),stats=findSelectedStats(house,isSelected),selector="th:not("+selectedSelector+"),td:not("+selectedSelector+")",unselectedCells=$_egd9zbkpjh8lz1d3.filterFirstLayer(table,"th,td",function(cell){return $_62so4qkqjh8lz1di.is(cell,selector)});return $_6b0spykcjh8lz1ao.each(unselectedCells,$_f2hny0lojh8lz1hi.remove),function(list,house,stats,isSelected){for(var totalColumns=house.grid().columns(),totalRows=house.grid().rows(),i=0;i<totalRows;i++)for(var seenSelected=!1,j=0;j<totalColumns;j++)i<stats.minRow()||i>stats.maxRow()||j<stats.minCol()||j>stats.maxCol()||($_fxwupplkjh8lz1go.getAt(house,i,j).filter(isSelected).isNone()?makeCell(list,seenSelected,i):seenSelected=!0)}(list,house,stats,isSelected),function(table,stats){var emptyRows=$_6b0spykcjh8lz1ao.filter($_egd9zbkpjh8lz1d3.firstLayer(table,"tr"),function(row){return 0===row.dom().childElementCount});$_6b0spykcjh8lz1ao.each(emptyRows,$_f2hny0lojh8lz1hi.remove),stats.minCol()!==stats.maxCol()&&stats.minRow()!==stats.maxRow()||$_6b0spykcjh8lz1ao.each($_egd9zbkpjh8lz1d3.firstLayer(table,"th,td"),function(cell){$_1mp8lglcjh8lz1fq.remove(cell,"rowspan"),$_1mp8lglcjh8lz1fq.remove(cell,"colspan")}),$_1mp8lglcjh8lz1fq.remove(table,"width"),$_1mp8lglcjh8lz1fq.remove(table,"height"),$_3ory84lljh8lz1gx.remove(table,"width"),$_3ory84lljh8lz1gx.remove(table,"height")}(table,stats),table},clone$1=function(original,deep){return $_6vo9a4krjh8lz1do.fromDom(original.dom().cloneNode(deep))},deep=function(original){return clone$1(original,!0)},shallowAs=function(original,tag){var nu=$_6vo9a4krjh8lz1do.fromTag(tag),attributes=$_1mp8lglcjh8lz1fq.clone(original);return $_1mp8lglcjh8lz1fq.setAll(nu,attributes),nu},$_zeqq4lrjh8lz1id_shallow=function(original){return clone$1(original,!1)},$_zeqq4lrjh8lz1id_deep=deep,$_zeqq4lrjh8lz1id_copy=function(original,tag){var nu=shallowAs(original,tag),cloneChildren=$_4hc7u2ktjh8lz1dv.children(deep(original));return $_d7tq5mlpjh8lz1hl.append(nu,cloneChildren),nu},api=function(is,name){var getOptionSafe=function(element){return is(element)?Option.from(element.dom().nodeValue):Option.none()},browser=$_a6om0dl0jh8lz1ep.detect().browser,getOption=browser.isIE()&&10===browser.version.major?function(element){try{return getOptionSafe(element)}catch(e){return Option.none()}}:getOptionSafe;return{get:function(element){if(!is(element))throw new Error("Can only get "+name+" value of a "+name+" node");return getOption(element).getOr("")},getOption:getOption,set:function(element,value){if(!is(element))throw new Error("Can only set raw "+name+" value of a "+name+" node");element.dom().nodeValue=value}}}($_a3izpgldjh8lz1fy.isText,"text"),$_bri5anlujh8lz1in={get:function(element){return api.get(element)},getOption:function(element){return api.getOption(element)},set:function(element,value){api.set(element,value)}},getEnd=function(element){return"img"===$_a3izpgldjh8lz1fy.name(element)?1:$_bri5anlujh8lz1in.getOption(element).fold(function(){return $_4hc7u2ktjh8lz1dv.children(element).length},function(v){return v.length})},elementsWithCursorPosition=["img","br"],$_6759o9ltjh8lz1ij_getEnd=getEnd,$_6759o9ltjh8lz1ij_isCursorPosition=function(elem){return $_bri5anlujh8lz1in.getOption(elem).filter(function(text){return 0!==text.trim().length||-1<text.indexOf(" ")}).isSome()||$_6b0spykcjh8lz1ao.contains(elementsWithCursorPosition,$_a3izpgldjh8lz1fy.name(elem))},descendantRtl=function(scope,predicate){var descend=function(element){for(var children=$_4hc7u2ktjh8lz1dv.children(element),i=children.length-1;0<=i;i--){var child=children[i];if(predicate(child))return Option.some(child);var res=descend(child);if(res.isSome())return res}return Option.none()};return descend(scope)},$_fpdn73lsjh8lz1ig={first:function(element){return $_aykj0glijh8lz1g9.descendant(element,$_6759o9ltjh8lz1ij_isCursorPosition)},last:function(element){return descendantRtl(element,$_6759o9ltjh8lz1ij_isCursorPosition)}},cell$1=function(){var td=$_6vo9a4krjh8lz1do.fromTag("td");return $_6qqu1alnjh8lz1hg.append(td,$_6vo9a4krjh8lz1do.fromTag("br")),td},replace=function(cell,tag,attrs){var replica=$_zeqq4lrjh8lz1id_copy(cell,tag);return $_8kti2hkhjh8lz1bt.each(attrs,function(v,k){null===v?$_1mp8lglcjh8lz1fq.remove(replica,k):$_1mp8lglcjh8lz1fq.set(replica,k,v)}),replica},pasteReplace=function(cellContent){return cellContent},newRow=function(doc){return function(){return $_6vo9a4krjh8lz1do.fromTag("tr",doc.dom())}},$_3fxw02lqjh8lz1hp_cellOperations=function(mutate,doc,formatsToClone){return{row:newRow(doc),cell:function(prev){var doc=$_4hc7u2ktjh8lz1dv.owner(prev.element()),td=$_6vo9a4krjh8lz1do.fromTag($_a3izpgldjh8lz1fy.name(prev.element()),doc.dom()),formats=formatsToClone.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),lastNode=0<formats.length?function(oldCell,newCell,formats){return $_fpdn73lsjh8lz1ig.first(oldCell).map(function(firstText){var formatSelector=formats.join(","),parents=$_coxlualejh8lz1fz.ancestors(firstText,formatSelector,function(element){return $_2eywnlkvjh8lz1e8.eq(element,oldCell)});return $_6b0spykcjh8lz1ao.foldr(parents,function(last,parent){var clonedFormat=$_zeqq4lrjh8lz1id_shallow(parent);return $_6qqu1alnjh8lz1hg.append(last,clonedFormat),clonedFormat},newCell)}).getOr(newCell)}(prev.element(),td,formats):td;return $_6qqu1alnjh8lz1hg.append(lastNode,$_6vo9a4krjh8lz1do.fromTag("br")),$_3ory84lljh8lz1gx.copy(prev.element(),td),$_3ory84lljh8lz1gx.remove(td,"height"),1!==prev.colspan()&&$_3ory84lljh8lz1gx.remove(prev.element(),"width"),mutate(prev.element(),td),td},replace:replace,gap:cell$1}},$_3fxw02lqjh8lz1hp_paste=function(doc){return{row:newRow(doc),cell:cell$1,replace:pasteReplace,gap:cell$1}},$_200no5lwjh8lz1iy_fromHtml=function(html,scope){var div=(scope||document).createElement("div");return div.innerHTML=html,$_4hc7u2ktjh8lz1dv.children($_6vo9a4krjh8lz1do.fromDom(div))},TagBoundaries=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function DomUniverse(){return{up:$_bgyjg9kejh8lz1ax.constant({selector:$_fiygddlhjh8lz1g7.ancestor,closest:$_fiygddlhjh8lz1g7.closest,predicate:$_aykj0glijh8lz1g9.ancestor,all:$_4hc7u2ktjh8lz1dv.parents}),down:$_bgyjg9kejh8lz1ax.constant({selector:$_coxlualejh8lz1fz.descendants,predicate:$_5a2t82lfjh8lz1g0.descendants}),styles:$_bgyjg9kejh8lz1ax.constant({get:$_3ory84lljh8lz1gx.get,getRaw:$_3ory84lljh8lz1gx.getRaw,set:$_3ory84lljh8lz1gx.set,remove:$_3ory84lljh8lz1gx.remove}),attrs:$_bgyjg9kejh8lz1ax.constant({get:$_1mp8lglcjh8lz1fq.get,set:$_1mp8lglcjh8lz1fq.set,remove:$_1mp8lglcjh8lz1fq.remove,copyTo:function(source,destination){var as=$_1mp8lglcjh8lz1fq.clone(source);$_1mp8lglcjh8lz1fq.setAll(destination,as)}}),insert:$_bgyjg9kejh8lz1ax.constant({before:$_6qqu1alnjh8lz1hg.before,after:$_6qqu1alnjh8lz1hg.after,afterAll:$_d7tq5mlpjh8lz1hl.after,append:$_6qqu1alnjh8lz1hg.append,appendAll:$_d7tq5mlpjh8lz1hl.append,prepend:$_6qqu1alnjh8lz1hg.prepend,wrap:$_6qqu1alnjh8lz1hg.wrap}),remove:$_bgyjg9kejh8lz1ax.constant({unwrap:$_f2hny0lojh8lz1hi.unwrap,remove:$_f2hny0lojh8lz1hi.remove}),create:$_bgyjg9kejh8lz1ax.constant({nu:$_6vo9a4krjh8lz1do.fromTag,clone:function(element){return $_6vo9a4krjh8lz1do.fromDom(element.dom().cloneNode(!1))},text:$_6vo9a4krjh8lz1do.fromText}),query:$_bgyjg9kejh8lz1ax.constant({comparePosition:function(element,other){return element.dom().compareDocumentPosition(other.dom())},prevSibling:$_4hc7u2ktjh8lz1dv.prevSibling,nextSibling:$_4hc7u2ktjh8lz1dv.nextSibling}),property:$_bgyjg9kejh8lz1ax.constant({children:$_4hc7u2ktjh8lz1dv.children,name:$_a3izpgldjh8lz1fy.name,parent:$_4hc7u2ktjh8lz1dv.parent,isText:$_a3izpgldjh8lz1fy.isText,isComment:$_a3izpgldjh8lz1fy.isComment,isElement:$_a3izpgldjh8lz1fy.isElement,getText:$_bri5anlujh8lz1in.get,setText:$_bri5anlujh8lz1in.set,isBoundary:function(element){return!!$_a3izpgldjh8lz1fy.isElement(element)&&("body"===$_a3izpgldjh8lz1fy.name(element)||$_6b0spykcjh8lz1ao.contains(TagBoundaries,$_a3izpgldjh8lz1fy.name(element)))},isEmptyTag:function(element){return!!$_a3izpgldjh8lz1fy.isElement(element)&&$_6b0spykcjh8lz1ao.contains(["br","img","hr","input"],$_a3izpgldjh8lz1fy.name(element))}}),eq:$_2eywnlkvjh8lz1e8.eq,is:$_2eywnlkvjh8lz1e8.is}}var leftRight=$_d2ojjnkijh8lz1bv.immutable("left","right"),bisect=function(universe,parent,child){var children=universe.property().children(parent);return $_6b0spykcjh8lz1ao.findIndex(children,$_bgyjg9kejh8lz1ax.curry(universe.eq,child)).map(function(ind){return{before:$_bgyjg9kejh8lz1ax.constant(children.slice(0,ind)),after:$_bgyjg9kejh8lz1ax.constant(children.slice(ind+1))}})},$_6javmwm5jh8lz1lp_breakToLeft=function(universe,parent,child){return bisect(universe,parent,child).map(function(parts){var prior=universe.create().clone(parent);return universe.insert().appendAll(prior,parts.before().concat([child])),universe.insert().appendAll(parent,parts.after()),universe.insert().before(parent,prior),leftRight(prior,parent)})},$_6javmwm5jh8lz1lp_breakToRight=function(universe,parent,child){return bisect(universe,parent,child).map(function(parts){var second=universe.create().clone(parent);return universe.insert().appendAll(second,parts.after()),universe.insert().after(parent,second),leftRight(parent,second)})},$_6javmwm5jh8lz1lp_breakPath=function(universe,item,isTop,breaker){var result=$_d2ojjnkijh8lz1bv.immutable("first","second","splits"),next=function(child,group,splits){var fallback=result(child,Option.none(),splits);return isTop(child)?result(child,group,splits):universe.property().parent(child).bind(function(parent){return breaker(universe,parent,child).map(function(breakage){var extra=[{first:breakage.left,second:breakage.right}],nextChild=isTop(parent)?parent:breakage.left();return next(nextChild,Option.some(breakage.right()),splits.concat(extra))}).getOr(fallback)})};return next(item,Option.none(),[])},unsafeOne=function(universe,look,head,tail){var start=look(universe,head);return $_6b0spykcjh8lz1ao.foldr(tail,function(b,a){var current=look(universe,a);return commonElement(universe,b,current)},start)},commonElement=function(universe,start,end){return start.bind(function(s){return end.filter($_bgyjg9kejh8lz1ax.curry(universe.eq,s))})},$_f59pclm6jh8lz1lz_oneAll=function(universe,look,elements){return 0<elements.length?function(universe,look,elements,f){return f(universe,look,elements[0],elements.slice(1))}(universe,look,elements,unsafeOne):Option.none()},eq$1=function(universe,item){return $_bgyjg9kejh8lz1ax.curry(universe.eq,item)},ancestors$2=function(universe,start,end,_isRoot){var isRoot=void 0!==_isRoot?_isRoot:$_bgyjg9kejh8lz1ax.constant(!1),ps1=[start].concat(universe.up().all(start)),ps2=[end].concat(universe.up().all(end)),prune=function(path){return $_6b0spykcjh8lz1ao.findIndex(path,isRoot).fold(function(){return path},function(ind){return path.slice(0,ind+1)})},pruned1=prune(ps1),pruned2=prune(ps2),shared=$_6b0spykcjh8lz1ao.find(pruned1,function(x){return $_6b0spykcjh8lz1ao.exists(pruned2,eq$1(universe,x))});return{firstpath:$_bgyjg9kejh8lz1ax.constant(pruned1),secondpath:$_bgyjg9kejh8lz1ax.constant(pruned2),shared:$_bgyjg9kejh8lz1ax.constant(shared)}},$_53b8yjm7jh8lz1m7_subset=function(universe,start,end){var ancs=ancestors$2(universe,start,end);return ancs.shared().bind(function(shared){return function(universe,common,ps1,ps2){var children=universe.property().children(common);if(universe.eq(common,ps1[0]))return Option.some([ps1[0]]);if(universe.eq(common,ps2[0]))return Option.some([ps2[0]]);var finder=function(ps){var topDown=$_6b0spykcjh8lz1ao.reverse(ps),index=$_6b0spykcjh8lz1ao.findIndex(topDown,eq$1(universe,common)).getOr(-1),item=index<topDown.length-1?topDown[index+1]:topDown[index];return $_6b0spykcjh8lz1ao.findIndex(children,eq$1(universe,item))},startIndex=finder(ps1),endIndex=finder(ps2);return startIndex.bind(function(sIndex){return endIndex.map(function(eIndex){var first=Math.min(sIndex,eIndex),last=Math.max(sIndex,eIndex);return children.slice(first,last+1)})})}(universe,shared,ancs.firstpath(),ancs.secondpath())})},$_53b8yjm7jh8lz1m7_ancestors=ancestors$2,$_dkt9bum4jh8lz1ln_sharedOne=function(universe,look,elements){return $_f59pclm6jh8lz1lz_oneAll(universe,look,elements)},$_dkt9bum4jh8lz1ln_subset=function(universe,start,finish){return $_53b8yjm7jh8lz1m7_subset(universe,start,finish)},$_dkt9bum4jh8lz1ln_ancestors=function(universe,start,finish,_isRoot){return $_53b8yjm7jh8lz1m7_ancestors(universe,start,finish,_isRoot)},$_dkt9bum4jh8lz1ln_breakToLeft=function(universe,parent,child){return $_6javmwm5jh8lz1lp_breakToLeft(universe,parent,child)},$_dkt9bum4jh8lz1ln_breakToRight=function(universe,parent,child){return $_6javmwm5jh8lz1lp_breakToRight(universe,parent,child)},$_dkt9bum4jh8lz1ln_breakPath=function(universe,child,isTop,breaker){return $_6javmwm5jh8lz1lp_breakPath(universe,child,isTop,breaker)},universe=DomUniverse(),$_5glne7m1jh8lz1kg={sharedOne:function(look,elements){return $_dkt9bum4jh8lz1ln_sharedOne(universe,function(universe,element){return look(element)},elements)},subset:function(start,finish){return $_dkt9bum4jh8lz1ln_subset(universe,start,finish)},ancestors:function(start,finish,_isRoot){return $_dkt9bum4jh8lz1ln_ancestors(universe,start,finish,_isRoot)},breakToLeft:function(parent,child){return $_dkt9bum4jh8lz1ln_breakToLeft(universe,parent,child)},breakToRight:function(parent,child){return $_dkt9bum4jh8lz1ln_breakToRight(universe,parent,child)},breakPath:function(child,isTop,breaker){return $_dkt9bum4jh8lz1ln_breakPath(universe,child,isTop,function(u,p,c){return breaker(p,c)})}},isWithin=function(bounds,detail){return detail.column()>=bounds.startCol()&&detail.column()+detail.colspan()-1<=bounds.finishCol()&&detail.row()>=bounds.startRow()&&detail.row()+detail.rowspan()-1<=bounds.finishRow()},$_bx09g1majh8lz1mt_inSelection=function(bounds,detail){var leftEdge=detail.column(),rightEdge=detail.column()+detail.colspan()-1,topEdge=detail.row(),bottomEdge=detail.row()+detail.rowspan()-1;return leftEdge<=bounds.finishCol()&&rightEdge>=bounds.startCol()&&topEdge<=bounds.finishRow()&&bottomEdge>=bounds.startRow()},$_bx09g1majh8lz1mt_isRectangular=function(warehouse,bounds){for(var isRect=!0,detailIsWithin=$_bgyjg9kejh8lz1ax.curry(isWithin,bounds),i=bounds.startRow();i<=bounds.finishRow();i++)for(var j=bounds.startCol();j<=bounds.finishCol();j++)isRect=isRect&&$_fxwupplkjh8lz1go.getAt(warehouse,i,j).exists(detailIsWithin);return isRect?Option.some(bounds):Option.none()},getAnyBox=function(warehouse,startCell,finishCell){var startCoords=$_fxwupplkjh8lz1go.findItem(warehouse,startCell,$_2eywnlkvjh8lz1e8.eq),finishCoords=$_fxwupplkjh8lz1go.findItem(warehouse,finishCell,$_2eywnlkvjh8lz1e8.eq);return startCoords.bind(function(sc){return finishCoords.map(function(fc){return detailA=sc,detailB=fc,$_g424vknjh8lz1cd.bounds(Math.min(detailA.row(),detailB.row()),Math.min(detailA.column(),detailB.column()),Math.max(detailA.row()+detailA.rowspan()-1,detailB.row()+detailB.rowspan()-1),Math.max(detailA.column()+detailA.colspan()-1,detailB.column()+detailB.colspan()-1));var detailA,detailB})})},$_dsxu28mbjh8lz1mz_getAnyBox=getAnyBox,$_dsxu28mbjh8lz1mz_getBox=function(warehouse,startCell,finishCell){return getAnyBox(warehouse,startCell,finishCell).bind(function(bounds){return $_bx09g1majh8lz1mt_isRectangular(warehouse,bounds)})},$_cwtr9hm9jh8lz1mm_moveBy=function(warehouse,cell,row,column){return $_fxwupplkjh8lz1go.findItem(warehouse,cell,$_2eywnlkvjh8lz1e8.eq).bind(function(detail){var startRow=0<row?detail.row()+detail.rowspan()-1:detail.row(),startCol=0<column?detail.column()+detail.colspan()-1:detail.column();return $_fxwupplkjh8lz1go.getAt(warehouse,startRow+row,startCol+column).map(function(d){return d.element()})})},$_cwtr9hm9jh8lz1mm_intercepts=function(warehouse,start,finish){return $_dsxu28mbjh8lz1mz_getAnyBox(warehouse,start,finish).map(function(bounds){var inside=$_fxwupplkjh8lz1go.filterItems(warehouse,$_bgyjg9kejh8lz1ax.curry($_bx09g1majh8lz1mt_inSelection,bounds));return $_6b0spykcjh8lz1ao.map(inside,function(detail){return detail.element()})})},$_cwtr9hm9jh8lz1mm_parentCell=function(warehouse,innerCell){return $_fxwupplkjh8lz1go.findItem(warehouse,innerCell,function(c1,c2){return $_2eywnlkvjh8lz1e8.contains(c2,c1)}).bind(function(detail){return detail.element()})},getWarehouse=function(table){var list=$_ff1h20kmjh8lz1c3_fromTable(table);return $_fxwupplkjh8lz1go.generate(list)},$_7f2vlpm8jh8lz1mf_moveBy=function(cell,deltaRow,deltaColumn){return $_ee8pmfkojh8lz1ch.table(cell).bind(function(table){var warehouse=getWarehouse(table);return $_cwtr9hm9jh8lz1mm_moveBy(warehouse,cell,deltaRow,deltaColumn)})},$_7f2vlpm8jh8lz1mf_intercepts=function(table,first,last){var warehouse=getWarehouse(table);return $_cwtr9hm9jh8lz1mm_intercepts(warehouse,first,last)},$_7f2vlpm8jh8lz1mf_nestedIntercepts=function(table,first,firstTable,last,lastTable){var warehouse=getWarehouse(table),startCell=$_2eywnlkvjh8lz1e8.eq(table,firstTable)?first:$_cwtr9hm9jh8lz1mm_parentCell(warehouse,first),lastCell=$_2eywnlkvjh8lz1e8.eq(table,lastTable)?last:$_cwtr9hm9jh8lz1mm_parentCell(warehouse,last);return $_cwtr9hm9jh8lz1mm_intercepts(warehouse,startCell,lastCell)},$_7f2vlpm8jh8lz1mf_getBox=function(table,first,last){var warehouse=getWarehouse(table);return $_dsxu28mbjh8lz1mz_getBox(warehouse,first,last)},lookupTable=function(container,isRoot){return $_fiygddlhjh8lz1g7.ancestor(container,"table")},identified=$_d2ojjnkijh8lz1bv.immutableBag(["boxes","start","finish"],[]),identify=function(start,finish,isRoot){var getIsRoot=function(rootTable){return function(element){return isRoot(element)||$_2eywnlkvjh8lz1e8.eq(element,rootTable)}};return $_2eywnlkvjh8lz1e8.eq(start,finish)?Option.some(identified({boxes:Option.some([start]),start:start,finish:finish})):lookupTable(start).bind(function(startTable){return lookupTable(finish).bind(function(finishTable){if($_2eywnlkvjh8lz1e8.eq(startTable,finishTable))return Option.some(identified({boxes:$_7f2vlpm8jh8lz1mf_intercepts(startTable,start,finish),start:start,finish:finish}));if($_2eywnlkvjh8lz1e8.contains(startTable,finishTable)){var finishCell=0<(ancestorCells=$_coxlualejh8lz1fz.ancestors(finish,"td,th",getIsRoot(startTable))).length?ancestorCells[ancestorCells.length-1]:finish;return Option.some(identified({boxes:$_7f2vlpm8jh8lz1mf_nestedIntercepts(startTable,start,startTable,finish,finishTable),start:start,finish:finishCell}))}if($_2eywnlkvjh8lz1e8.contains(finishTable,startTable)){var ancestorCells,startCell=0<(ancestorCells=$_coxlualejh8lz1fz.ancestors(start,"td,th",getIsRoot(finishTable))).length?ancestorCells[ancestorCells.length-1]:start;return Option.some(identified({boxes:$_7f2vlpm8jh8lz1mf_nestedIntercepts(finishTable,start,startTable,finish,finishTable),start:start,finish:startCell}))}return $_5glne7m1jh8lz1kg.ancestors(start,finish).shared().bind(function(lca){return $_fiygddlhjh8lz1g7.closest(lca,"table",isRoot).bind(function(lcaTable){var finishAncestorCells=$_coxlualejh8lz1fz.ancestors(finish,"td,th",getIsRoot(lcaTable)),finishCell=0<finishAncestorCells.length?finishAncestorCells[finishAncestorCells.length-1]:finish,startAncestorCells=$_coxlualejh8lz1fz.ancestors(start,"td,th",getIsRoot(lcaTable)),startCell=0<startAncestorCells.length?startAncestorCells[startAncestorCells.length-1]:start;return Option.some(identified({boxes:$_7f2vlpm8jh8lz1mf_nestedIntercepts(lcaTable,start,startTable,finish,finishTable),start:startCell,finish:finishCell}))})})})})},$_5tpv0tm0jh8lz1jt_identify=identify,$_5tpv0tm0jh8lz1jt_retrieve=function(container,selector){var sels=$_coxlualejh8lz1fz.descendants(container,selector);return 0<sels.length?Option.some(sels):Option.none()},$_5tpv0tm0jh8lz1jt_shiftSelection=function(boxes,deltaRow,deltaColumn,firstSelectedSelector,lastSelectedSelector){return function(boxes,lastSelectedSelector){return $_6b0spykcjh8lz1ao.find(boxes,function(box){return $_62so4qkqjh8lz1di.is(box,lastSelectedSelector)})}(boxes,lastSelectedSelector).bind(function(last){return $_7f2vlpm8jh8lz1mf_moveBy(last,deltaRow,deltaColumn).bind(function(finish){return function(finish,firstSelectedSelector){return $_fiygddlhjh8lz1g7.ancestor(finish,"table").bind(function(table){return $_fiygddlhjh8lz1g7.descendant(table,firstSelectedSelector).bind(function(start){return identify(start,finish).bind(function(identified){return identified.boxes().map(function(boxes){return{boxes:$_bgyjg9kejh8lz1ax.constant(boxes),start:$_bgyjg9kejh8lz1ax.constant(identified.start()),finish:$_bgyjg9kejh8lz1ax.constant(identified.finish())}})})})})}(finish,firstSelectedSelector)})})},$_5tpv0tm0jh8lz1jt_getEdges=function(container,firstSelectedSelector,lastSelectedSelector){return $_fiygddlhjh8lz1g7.descendant(container,firstSelectedSelector).bind(function(first){return $_fiygddlhjh8lz1g7.descendant(container,lastSelectedSelector).bind(function(last){return $_5glne7m1jh8lz1kg.sharedOne(lookupTable,[first,last]).map(function(tbl){return{first:$_bgyjg9kejh8lz1ax.constant(first),last:$_bgyjg9kejh8lz1ax.constant(last),table:$_bgyjg9kejh8lz1ax.constant(tbl)}})})})},$_21toytlzjh8lz1jj_retrieve=function(container,selector){return $_5tpv0tm0jh8lz1jt_retrieve(container,selector)},$_21toytlzjh8lz1jj_retrieveBox=function(container,firstSelectedSelector,lastSelectedSelector){return $_5tpv0tm0jh8lz1jt_getEdges(container,firstSelectedSelector,lastSelectedSelector).bind(function(edges){var isRoot=function(ancestor){return $_2eywnlkvjh8lz1e8.eq(container,ancestor)},firstAncestor=$_fiygddlhjh8lz1g7.ancestor(edges.first(),"thead,tfoot,tbody,table",isRoot),lastAncestor=$_fiygddlhjh8lz1g7.ancestor(edges.last(),"thead,tfoot,tbody,table",isRoot);return firstAncestor.bind(function(fA){return lastAncestor.bind(function(lA){return $_2eywnlkvjh8lz1e8.eq(fA,lA)?$_7f2vlpm8jh8lz1mf_getBox(edges.table(),edges.first(),edges.last()):Option.none()})})})},selected="data-mce-selected",$_2yroczmcjh8lz1n4={selected:$_bgyjg9kejh8lz1ax.constant(selected),selectedSelector:$_bgyjg9kejh8lz1ax.constant("td[data-mce-selected],th[data-mce-selected]"),attributeSelector:$_bgyjg9kejh8lz1ax.constant("[data-mce-selected]"),firstSelected:$_bgyjg9kejh8lz1ax.constant("data-mce-first-selected"),firstSelectedSelector:$_bgyjg9kejh8lz1ax.constant("td[data-mce-first-selected],th[data-mce-first-selected]"),lastSelected:$_bgyjg9kejh8lz1ax.constant("data-mce-last-selected"),lastSelectedSelector:$_bgyjg9kejh8lz1ax.constant("td[data-mce-last-selected],th[data-mce-last-selected]")},$_659si2mejh8lz1n9_generate=function(cases){if(!$_d1kyz8kfjh8lz1az.isArray(cases))throw new Error("cases must be an array");if(0===cases.length)throw new Error("there must be at least one case");var constructors=[],adt={};return $_6b0spykcjh8lz1ao.each(cases,function(acase,count){var keys=$_8kti2hkhjh8lz1bt.keys(acase);if(1!==keys.length)throw new Error("one and only one name per case");var key=keys[0],value=acase[key];if(void 0!==adt[key])throw new Error("duplicate key detected:"+key);if("cata"===key)throw new Error("cannot have a case named cata (sorry)");if(!$_d1kyz8kfjh8lz1az.isArray(value))throw new Error("case arguments must be an array");constructors.push(key),adt[key]=function(){var argLength=arguments.length;if(argLength!==value.length)throw new Error("Wrong number of arguments to case "+key+". Expected "+value.length+" ("+value+"), got "+argLength);for(var args=new Array(argLength),i=0;i<args.length;i++)args[i]=arguments[i];return{fold:function(){if(arguments.length!==cases.length)throw new Error("Wrong number of arguments to fold. Expected "+cases.length+", got "+arguments.length);return arguments[count].apply(null,args)},match:function(branches){var branchKeys=$_8kti2hkhjh8lz1bt.keys(branches);if(constructors.length!==branchKeys.length)throw new Error("Wrong number of arguments to match. Expected: "+constructors.join(",")+"\nActual: "+branchKeys.join(","));if(!$_6b0spykcjh8lz1ao.forall(constructors,function(reqKey){return $_6b0spykcjh8lz1ao.contains(branchKeys,reqKey)}))throw new Error("Not all branches were specified when using match. Specified: "+branchKeys.join(", ")+"\nRequired: "+constructors.join(", "));return branches[key].apply(null,args)},log:function(label){console.log(label,{constructors:constructors,constructor:key,params:args})}}}}),adt},type$1=$_659si2mejh8lz1n9_generate([{none:[]},{multiple:["elements"]},{single:["selection"]}]),$_crzziemdjh8lz1n7={cata:function(subject,onNone,onMultiple,onSingle){return subject.fold(onNone,onMultiple,onSingle)},none:type$1.none,multiple:type$1.multiple,single:type$1.single},selection=function(cell,selections){return $_crzziemdjh8lz1n7.cata(selections.get(),$_bgyjg9kejh8lz1ax.constant([]),$_bgyjg9kejh8lz1ax.identity,$_bgyjg9kejh8lz1ax.constant([cell]))},$_59in44lyjh8lz1j8_mergable=function(table,selections){return $_crzziemdjh8lz1n7.cata(selections.get(),Option.none,function(cells,_env){return 0===cells.length?Option.none():$_21toytlzjh8lz1jj_retrieveBox(table,$_2yroczmcjh8lz1n4.firstSelectedSelector(),$_2yroczmcjh8lz1n4.lastSelectedSelector()).bind(function(bounds){return 1<cells.length?Option.some({bounds:$_bgyjg9kejh8lz1ax.constant(bounds),cells:$_bgyjg9kejh8lz1ax.constant(cells)}):Option.none()})},Option.none)},$_59in44lyjh8lz1j8_unmergable=function(cell,selections){var candidates=selection(cell,selections);return 0<candidates.length&&$_6b0spykcjh8lz1ao.forall(candidates,function(elem){return $_1mp8lglcjh8lz1fq.has(elem,"rowspan")&&1<parseInt($_1mp8lglcjh8lz1fq.get(elem,"rowspan"),10)||$_1mp8lglcjh8lz1fq.has(elem,"colspan")&&1<parseInt($_1mp8lglcjh8lz1fq.get(elem,"colspan"),10)})?Option.some(candidates):Option.none()},$_59in44lyjh8lz1j8_selection=selection,noMenu=function(cell){return{element:$_bgyjg9kejh8lz1ax.constant(cell),mergable:Option.none,unmergable:Option.none,selection:$_bgyjg9kejh8lz1ax.constant([cell])}},paste$1=$_d2ojjnkijh8lz1bv.immutable("element","clipboard","generators"),$_3xfj7olxjh8lz1j2={noMenu:noMenu,forMenu:function(selections,table,cell){return{element:$_bgyjg9kejh8lz1ax.constant(cell),mergable:$_bgyjg9kejh8lz1ax.constant($_59in44lyjh8lz1j8_mergable(table,selections)),unmergable:$_bgyjg9kejh8lz1ax.constant($_59in44lyjh8lz1j8_unmergable(cell,selections)),selection:$_bgyjg9kejh8lz1ax.constant($_59in44lyjh8lz1j8_selection(cell,selections))}},notCell:function(element){return noMenu(element)},paste:paste$1,pasteRows:function(selections,table,cell,clipboard,generators){return{element:$_bgyjg9kejh8lz1ax.constant(cell),mergable:Option.none,unmergable:Option.none,selection:$_bgyjg9kejh8lz1ax.constant($_59in44lyjh8lz1j8_selection(cell,selections)),clipboard:$_bgyjg9kejh8lz1ax.constant(clipboard),generators:$_bgyjg9kejh8lz1ax.constant(generators)}}},$_3x42x9kbjh8lz1a2_registerEvents=function(editor,selections,actions,cellSelection){editor.on("BeforeGetContent",function(e){!0===e.selection&&$_crzziemdjh8lz1n7.cata(selections.get(),$_bgyjg9kejh8lz1ax.noop,function(cells){e.preventDefault(),function(cells){return $_ee8pmfkojh8lz1ch.table(cells[0]).map($_zeqq4lrjh8lz1id_deep).map(function(replica){return[$_dj8mm1kgjh8lz1b3_extract(replica,$_2yroczmcjh8lz1n4.attributeSelector())]})}(cells).each(function(elements){e.content=$_6b0spykcjh8lz1ao.map(elements,function(elm){return function(editor,elm){return editor.selection.serializer.serialize(elm.dom(),{})}(editor,elm)}).join("")})},$_bgyjg9kejh8lz1ax.noop)}),editor.on("BeforeSetContent",function(e){!0===e.selection&&!0===e.paste&&Option.from(editor.dom.getParent(editor.selection.getStart(),"th,td")).each(function(domCell){var cell=$_6vo9a4krjh8lz1do.fromDom(domCell);$_ee8pmfkojh8lz1ch.table(cell).bind(function(table){var elements=$_6b0spykcjh8lz1ao.filter($_200no5lwjh8lz1iy_fromHtml(e.content),function(content){return"meta"!==$_a3izpgldjh8lz1fy.name(content)});if(1===elements.length&&"table"===$_a3izpgldjh8lz1fy.name(elements[0])){e.preventDefault();var doc=$_6vo9a4krjh8lz1do.fromDom(editor.getDoc()),generators=$_3fxw02lqjh8lz1hp_paste(doc),targets=$_3xfj7olxjh8lz1j2.paste(cell,elements[0],generators);actions.pasteCells(table,targets).each(function(rng){editor.selection.setRng(rng),editor.focus(),cellSelection.clear(table)})}})})})};function Dimension(name,getOffset){var get=function(element){var r=getOffset(element);if(r<=0||null===r){var css=$_3ory84lljh8lz1gx.get(element,name);return parseFloat(css)||0}return r},aggregate=function(element,properties){return $_6b0spykcjh8lz1ao.foldl(properties,function(acc,property){var val=$_3ory84lljh8lz1gx.get(element,property),value=void 0===val?0:parseInt(val,10);return isNaN(value)?acc:acc+value},0)};return{set:function(element,h){if(!$_d1kyz8kfjh8lz1az.isNumber(h)&&!h.match(/^[0-9]+$/))throw name+".set accepts only positive integer values. Value was "+h;var dom=element.dom();$_3r8yz1lmjh8lz1hf_isSupported(dom)&&(dom.style[name]=h+"px")},get:get,getOuter:get,aggregate:aggregate,max:function(element,value,properties){var cumulativeInclusions=aggregate(element,properties);return cumulativeInclusions<value?value-cumulativeInclusions:0}}}var api$1=Dimension("height",function(element){return $_brbde9lgjh8lz1g4.inBody(element)?element.dom().getBoundingClientRect().height:element.dom().offsetHeight}),$_dc45zsmjjh8lz1or_get=function(element){return api$1.get(element)},$_dc45zsmjjh8lz1or_getOuter=function(element){return api$1.getOuter(element)},api$2=Dimension("width",function(element){return element.dom().offsetWidth}),$_fu3j58mljh8lz1oz_get=function(element){return api$2.get(element)},$_fu3j58mljh8lz1oz_getOuter=function(element){return api$2.getOuter(element)},platform=$_a6om0dl0jh8lz1ep.detect(),getProp=function(elm,name,fallback){return function(px,fallback){var num=parseFloat(px);return isNaN(num)?fallback:num}($_3ory84lljh8lz1gx.get(elm,name),fallback)},$_4n3vr6mijh8lz1oi_getHeight=function(cell){return platform.browser.isIE()||platform.browser.isEdge()?function(cell){var paddingTop=getProp(cell,"padding-top",0),paddingBottom=getProp(cell,"padding-bottom",0),borderTop=getProp(cell,"border-top-width",0),borderBottom=getProp(cell,"border-bottom-width",0),height=cell.dom().getBoundingClientRect().height;return"border-box"===$_3ory84lljh8lz1gx.get(cell,"box-sizing")?height:height-paddingTop-paddingBottom-(borderTop+borderBottom)}(cell):getProp(cell,"height",$_dc45zsmjjh8lz1or_get(cell))},genericSizeRegex=/(\d+(\.\d+)?)(\w|%)*/,percentageBasedSizeRegex=/(\d+(\.\d+)?)%/,pixelBasedSizeRegex=/(\d+(\.\d+)?)px|em/,setHeight=function(cell,amount){$_3ory84lljh8lz1gx.set(cell,"height",amount+"px")},normalizePixelSize=function(value,cell,getter,setter){var number=parseInt(value,10);return $_34vbjol9jh8lz1fk.endsWith(value,"%")&&"table"!==$_a3izpgldjh8lz1fy.name(cell)?function(cell,number,getter,setter){var newSize=$_ee8pmfkojh8lz1ch.table(cell).map(function(table){var total=getter(table);return Math.floor(number/100*total)}).getOr(number);return setter(cell,newSize),newSize}(cell,number,getter,setter):number},getTotalHeight=function(cell){var value=function(cell){return $_3ory84lljh8lz1gx.getRaw(cell,"height").getOrThunk(function(){return $_4n3vr6mijh8lz1oi_getHeight(cell)+"px"})}(cell);return value?normalizePixelSize(value,cell,$_dc45zsmjjh8lz1or_get,setHeight):$_dc45zsmjjh8lz1or_get(cell)},getSpan=function(cell,type){return $_1mp8lglcjh8lz1fq.has(cell,type)?parseInt($_1mp8lglcjh8lz1fq.get(cell,type),10):1},getRawWidth=function(element){return $_3ory84lljh8lz1gx.getRaw(element,"width").fold(function(){return Option.from($_1mp8lglcjh8lz1fq.get(element,"width"))},function(width){return Option.some(width)})},normalizePercentageWidth=function(cellWidth,tableSize){return cellWidth/tableSize.pixelWidth()*100},$_i2xtsmhjh8lz1nv={percentageBasedSizeRegex:$_bgyjg9kejh8lz1ax.constant(percentageBasedSizeRegex),pixelBasedSizeRegex:$_bgyjg9kejh8lz1ax.constant(pixelBasedSizeRegex),setPixelWidth:function(cell,amount){$_3ory84lljh8lz1gx.set(cell,"width",amount+"px")},setPercentageWidth:function(cell,amount){$_3ory84lljh8lz1gx.set(cell,"width",amount+"%")},setHeight:setHeight,getPixelWidth:function(cell,tableSize){return getRawWidth(cell).fold(function(){var width=$_fu3j58mljh8lz1oz_get(cell);return parseInt(width,10)},function(width){return function(element,width,tableSize){if(pixelBasedSizeRegex.test(width)){var pixelMatch=pixelBasedSizeRegex.exec(width);return parseInt(pixelMatch[1],10)}if(percentageBasedSizeRegex.test(width)){var percentMatch=percentageBasedSizeRegex.exec(width);return function(cellWidth,tableSize){return cellWidth/100*tableSize.pixelWidth()}(parseFloat(percentMatch[1]),tableSize)}var fallbackWidth=$_fu3j58mljh8lz1oz_get(element);return parseInt(fallbackWidth,10)}(cell,width,tableSize)})},getPercentageWidth:function(cell,tableSize){return getRawWidth(cell).fold(function(){var width=$_fu3j58mljh8lz1oz_get(cell),intWidth=parseInt(width,10);return normalizePercentageWidth(intWidth,tableSize)},function(width){return function(element,width,tableSize){if(percentageBasedSizeRegex.test(width)){var percentMatch=percentageBasedSizeRegex.exec(width);return parseFloat(percentMatch[1])}var fallbackWidth=$_fu3j58mljh8lz1oz_get(element),intWidth=parseInt(fallbackWidth,10);return normalizePercentageWidth(intWidth,tableSize)}(cell,width,tableSize)})},getGenericWidth:function(cell){return getRawWidth(cell).bind(function(width){if(genericSizeRegex.test(width)){var match=genericSizeRegex.exec(width);return Option.some({width:$_bgyjg9kejh8lz1ax.constant(match[1]),unit:$_bgyjg9kejh8lz1ax.constant(match[3])})}return Option.none()})},setGenericWidth:function(cell,amount,unit){$_3ory84lljh8lz1gx.set(cell,"width",amount+unit)},getHeight:function(cell){return function(cell,type,f){return f(cell)/getSpan(cell,type)}(cell,"rowspan",getTotalHeight)},getRawWidth:getRawWidth},$_36r49rmgjh8lz1nt_halve=function(main,other){$_i2xtsmhjh8lz1nv.getGenericWidth(main).each(function(width){var newWidth=width.width()/2;$_i2xtsmhjh8lz1nv.setGenericWidth(main,newWidth,width.unit()),$_i2xtsmhjh8lz1nv.setGenericWidth(other,newWidth,width.unit())})},$_d04mvbmqjh8lz1pi_attached=function(element,scope){var doc=scope||$_6vo9a4krjh8lz1do.fromDom(document.documentElement);return $_aykj0glijh8lz1g9.ancestor(element,$_bgyjg9kejh8lz1ax.curry($_2eywnlkvjh8lz1e8.eq,doc)).isSome()},$_d04mvbmqjh8lz1pi_windowOf=function(element){var dom=element.dom();return dom===dom.window?element:$_a3izpgldjh8lz1fy.isDocument(element)?dom.defaultView||dom.parentWindow:null},r=function(left,top){return{left:$_bgyjg9kejh8lz1ax.constant(left),top:$_bgyjg9kejh8lz1ax.constant(top),translate:function(x,y){return r(left+x,top+y)}}},firstDefinedOrZero=function(a,b){return void 0!==a?a:void 0!==b?b:0},viewport=function(element){var dom=element.dom(),doc=dom.ownerDocument,body=doc.body,html=$_6vo9a4krjh8lz1do.fromDom(doc.documentElement);return body===dom?r(body.offsetLeft,body.offsetTop):$_d04mvbmqjh8lz1pi_attached(element,html)?function(dom){var box=dom.getBoundingClientRect();return r(box.left,box.top)}(dom):r(0,0)},$_6xc5idmpjh8lz1ph_absolute=function(element){var doc=element.dom().ownerDocument,body=doc.body,win=$_d04mvbmqjh8lz1pi_windowOf($_6vo9a4krjh8lz1do.fromDom(doc)),html=doc.documentElement,scrollTop=firstDefinedOrZero(win.pageYOffset,html.scrollTop),scrollLeft=firstDefinedOrZero(win.pageXOffset,html.scrollLeft),clientTop=firstDefinedOrZero(html.clientTop,body.clientTop),clientLeft=firstDefinedOrZero(html.clientLeft,body.clientLeft);return viewport(element).translate(scrollLeft-clientLeft,scrollTop-clientTop)},rowInfo=$_d2ojjnkijh8lz1bv.immutable("row","y"),colInfo=$_d2ojjnkijh8lz1bv.immutable("col","x"),rtlEdge=function(cell){return $_6xc5idmpjh8lz1ph_absolute(cell).left()+$_fu3j58mljh8lz1oz_getOuter(cell)},ltrEdge=function(cell){return $_6xc5idmpjh8lz1ph_absolute(cell).left()},getLeftEdge=function(index,cell){return colInfo(index,ltrEdge(cell))},getRightEdge=function(index,cell){return colInfo(index,rtlEdge(cell))},getTop=function(cell){return $_6xc5idmpjh8lz1ph_absolute(cell).top()},findPositions=function(getInnerEdge,getOuterEdge,array){if(0===array.length)return[];var lines=$_6b0spykcjh8lz1ao.map(array.slice(1),function(cellOption,index){return cellOption.map(function(cell){return getInnerEdge(index,cell)})}),lastLine=array[array.length-1].map(function(cell){return getOuterEdge(array.length-1,cell)});return lines.concat([lastLine])},height={delta:$_bgyjg9kejh8lz1ax.identity,positions:$_bgyjg9kejh8lz1ax.curry(findPositions,function(index,cell){return rowInfo(index,getTop(cell))},function(index,cell){return rowInfo(index,getTop(cell)+$_dc45zsmjjh8lz1or_getOuter(cell))}),edge:getTop},ltr={delta:$_bgyjg9kejh8lz1ax.identity,edge:ltrEdge,positions:$_bgyjg9kejh8lz1ax.curry(findPositions,getLeftEdge,getRightEdge)},$_sdnutmojh8lz1p3={height:height,rtl:{delta:function(step,_table){return-step},edge:rtlEdge,positions:$_bgyjg9kejh8lz1ax.curry(findPositions,getRightEdge,getLeftEdge)},ltr:ltr},$_7vn0kzmnjh8lz1p2={ltr:$_sdnutmojh8lz1p3.ltr,rtl:$_sdnutmojh8lz1p3.rtl};function TableDirection(directionAt){var auto=function(table){return directionAt(table).isRtl()?$_7vn0kzmnjh8lz1p2.rtl:$_7vn0kzmnjh8lz1p2.ltr};return{delta:function(amount,table){return auto(table).delta(amount,table)},edge:function(cell){return auto(cell).edge(cell)},positions:function(cols,table){return auto(table).positions(cols,table)}}}var $_fpjoz7msjh8lz1pq_getGridSize=function(table){var input=$_ff1h20kmjh8lz1c3_fromTable(table);return $_fxwupplkjh8lz1go.generate(input).grid()},Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},base=function(handleUnsupported,required){return baseWith(handleUnsupported,required,{validate:$_d1kyz8kfjh8lz1az.isFunction,label:"function"})},baseWith=function(handleUnsupported,required,pred){if(0===required.length)throw new Error("You must specify at least one required field.");return $_9ogtmjkljh8lz1c0_validateStrArr("required",required),$_9ogtmjkljh8lz1c0_checkDupes(required),function(obj){var keys=$_8kti2hkhjh8lz1bt.keys(obj);$_6b0spykcjh8lz1ao.forall(required,function(req){return $_6b0spykcjh8lz1ao.contains(keys,req)})||$_9ogtmjkljh8lz1c0_reqMessage(required,keys),handleUnsupported(required,keys);var invalidKeys=$_6b0spykcjh8lz1ao.filter(required,function(key){return!pred.validate(obj[key],key)});return 0<invalidKeys.length&&$_9ogtmjkljh8lz1c0_invalidTypeMessage(invalidKeys,pred.label),obj}},allowExtra=$_bgyjg9kejh8lz1ax.noop,$_2qijvhmwjh8lz1qv={exactly:$_bgyjg9kejh8lz1ax.curry(base,function(required,keys){var unsupported=$_6b0spykcjh8lz1ao.filter(keys,function(key){return!$_6b0spykcjh8lz1ao.contains(required,key)});0<unsupported.length&&$_9ogtmjkljh8lz1c0_unsuppMessage(unsupported)}),ensure:$_bgyjg9kejh8lz1ax.curry(base,allowExtra),ensureWith:$_bgyjg9kejh8lz1ax.curry(baseWith,allowExtra)},elementToData=function(element){var colspan=$_1mp8lglcjh8lz1fq.has(element,"colspan")?parseInt($_1mp8lglcjh8lz1fq.get(element,"colspan"),10):1,rowspan=$_1mp8lglcjh8lz1fq.has(element,"rowspan")?parseInt($_1mp8lglcjh8lz1fq.get(element,"rowspan"),10):1;return{element:$_bgyjg9kejh8lz1ax.constant(element),colspan:$_bgyjg9kejh8lz1ax.constant(colspan),rowspan:$_bgyjg9kejh8lz1ax.constant(rowspan)}},contract=$_2qijvhmwjh8lz1qv.exactly(["cell","row","replace","gap"]),$_46iqoomujh8lz1qf_modification=function(generators,_toData){contract(generators);var position=Cell(Option.none()),toData=void 0!==_toData?_toData:elementToData,nuFrom=function(element){return function(data){return generators.cell(data)}(toData(element))},add=function(element){var replacement=nuFrom(element);return position.get().isNone()&&position.set(Option.some(replacement)),recent=Option.some({item:element,replacement:replacement}),replacement},recent=Option.none();return{getOrInit:function(element,comparator){return recent.fold(function(){return add(element)},function(p){return comparator(element,p.item)?p.replacement:add(element)})},cursor:position.get}},$_46iqoomujh8lz1qf_transform=function(scope,tag){return function(generators){var position=Cell(Option.none());contract(generators);var list=[],makeNew=function(element){var cell=generators.replace(element,tag,{scope:scope});return list.push({item:element,sub:cell}),position.get().isNone()&&position.set(Option.some(cell)),cell};return{replaceOrInit:function(element,comparator){return function(element,comparator){return $_6b0spykcjh8lz1ao.find(list,function(x){return comparator(x.item,element)})}(element,comparator).fold(function(){return makeNew(element)},function(p){return comparator(element,p.item)?p.sub:makeNew(element)})},cursor:position.get}}},$_46iqoomujh8lz1qf_merging=function(generators){contract(generators);var position=Cell(Option.none());return{combine:function(cell){return position.get().isNone()&&position.set(Option.some(cell)),function(){var raw=generators.cell({element:$_bgyjg9kejh8lz1ax.constant(cell),colspan:$_bgyjg9kejh8lz1ax.constant(1),rowspan:$_bgyjg9kejh8lz1ax.constant(1)});return $_3ory84lljh8lz1gx.remove(raw,"width"),$_3ory84lljh8lz1gx.remove(cell,"width"),raw}},cursor:position.get}},blockList=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],isBlock=function(universe,item){var tagName=universe.property().name(item);return $_6b0spykcjh8lz1ao.contains(blockList,tagName)},isEmptyTag=function(universe,item){return $_6b0spykcjh8lz1ao.contains(["br","img","hr","input"],universe.property().name(item))},$_77qm98mzjh8lz1ro_isBlock=isBlock,$_77qm98mzjh8lz1ro_isList=function(universe,item){var tagName=universe.property().name(item);return $_6b0spykcjh8lz1ao.contains(["ol","ul"],tagName)},$_77qm98mzjh8lz1ro_isEmptyTag=isEmptyTag,universe$1=DomUniverse(),$_39l7z3myjh8lz1rk_isBlock=function(element){return $_77qm98mzjh8lz1ro_isBlock(universe$1,element)},$_39l7z3myjh8lz1rk_isList=function(element){return $_77qm98mzjh8lz1ro_isList(universe$1,element)},$_39l7z3myjh8lz1rk_isEmptyTag=function(element){return $_77qm98mzjh8lz1ro_isEmptyTag(universe$1,element)},$_9305lemxjh8lz1qy_merge=function(cells){var content,isBr=function(el){return"br"===$_a3izpgldjh8lz1fy.name(el)},markCell=function(cell){return $_fpdn73lsjh8lz1ig.last(cell).bind(function(rightEdge){var el,rightSiblingIsBlock=(el=rightEdge,$_4hc7u2ktjh8lz1dv.nextSibling(el).map(function(rightSibling){return!!$_39l7z3myjh8lz1rk_isBlock(rightSibling)||($_39l7z3myjh8lz1rk_isEmptyTag(rightSibling)?"img"!==$_a3izpgldjh8lz1fy.name(rightSibling):void 0)}).getOr(!1));return $_4hc7u2ktjh8lz1dv.parent(rightEdge).map(function(parent){return!0===rightSiblingIsBlock||(el=parent,"li"===$_a3izpgldjh8lz1fy.name(el)||$_aykj0glijh8lz1g9.ancestor(el,$_39l7z3myjh8lz1rk_isList).isSome())||isBr(rightEdge)||$_39l7z3myjh8lz1rk_isBlock(parent)&&!$_2eywnlkvjh8lz1e8.eq(cell,parent)?[]:[$_6vo9a4krjh8lz1do.fromTag("br")];var el})}).getOr([])},contents=0===(content=$_6b0spykcjh8lz1ao.bind(cells,function(cell){var children=$_4hc7u2ktjh8lz1dv.children(cell);return function(children){return $_6b0spykcjh8lz1ao.forall(children,function(c){return isBr(c)||$_a3izpgldjh8lz1fy.isText(c)&&0===$_bri5anlujh8lz1in.get(c).trim().length})}(children)?[]:children.concat(markCell(cell))})).length?[$_6vo9a4krjh8lz1do.fromTag("br")]:content;$_f2hny0lojh8lz1hi.empty(cells[0]),$_d7tq5mlpjh8lz1hl.append(cells[0],contents)},baseMerge=function(merger){return function(){for(var objects=new Array(arguments.length),i=0;i<objects.length;i++)objects[i]=arguments[i];if(0===objects.length)throw new Error("Can't merge zero objects");for(var ret={},j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject)curObject.hasOwnProperty(key)&&(ret[key]=merger(ret[key],curObject[key]))}return ret}},deepMerge=baseMerge(function(old,nu){return $_d1kyz8kfjh8lz1az.isObject(old)&&$_d1kyz8kfjh8lz1az.isObject(nu)?deepMerge(old,nu):nu}),merge$1=baseMerge(function(old,nu){return nu}),$_b4x7eon1jh8lz1se={deepMerge:deepMerge,merge:merge$1},$_clgylhn2jh8lz1sg_cat=function(arr){for(var r=[],push=function(x){r.push(x)},i=0;i<arr.length;i++)arr[i].each(push);return r},$_clgylhn2jh8lz1sg_findMap=function(arr,f){for(var i=0;i<arr.length;i++){var r=f(arr[i],i);if(r.isSome())return r}return Option.none()},setCells=function(gridRow,cells){return $_g424vknjh8lz1cd.rowcells(cells,gridRow.section())},getCell=function(gridRow,index){return gridRow.cells()[index]},$_cndk32n5jh8lz1ss={addCell:function(gridRow,index,cell){var cells=gridRow.cells(),before=cells.slice(0,index),after=cells.slice(index),newCells=before.concat([cell]).concat(after);return setCells(gridRow,newCells)},setCells:setCells,mutateCell:function(gridRow,index,cell){gridRow.cells()[index]=cell},getCell:getCell,getCellElement:function(gridRow,index){return getCell(gridRow,index).element()},mapCells:function(gridRow,f){var cells=gridRow.cells(),r=$_6b0spykcjh8lz1ao.map(cells,f);return $_g424vknjh8lz1cd.rowcells(r,gridRow.section())},cellLength:function(gridRow){return gridRow.cells().length}},findDiff=function(xs,comp){if(0===xs.length)return 0;var first=xs[0];return $_6b0spykcjh8lz1ao.findIndex(xs,function(x){return!comp(first.element(),x.element())}).fold(function(){return xs.length},function(ind){return ind})},$_6s0r2pn4jh8lz1sn_subgrid=function(grid,row,column,comparator){var restOfRow=function(grid,index){return grid[index]}(grid,row).cells().slice(column),endColIndex=findDiff(restOfRow,comparator),restOfColumn=function(grid,index){return $_6b0spykcjh8lz1ao.map(grid,function(row){return $_cndk32n5jh8lz1ss.getCell(row,index)})}(grid,column).slice(row),endRowIndex=findDiff(restOfColumn,comparator);return{colspan:$_bgyjg9kejh8lz1ax.constant(endColIndex),rowspan:$_bgyjg9kejh8lz1ax.constant(endRowIndex)}},$_7a3bzon3jh8lz1si_toDetails=function(grid,comparator){var seen=$_6b0spykcjh8lz1ao.map(grid,function(row,ri){return $_6b0spykcjh8lz1ao.map(row.cells(),function(col,ci){return!1})});return $_6b0spykcjh8lz1ao.map(grid,function(row,ri){var details=$_6b0spykcjh8lz1ao.bind(row.cells(),function(cell,ci){if(!1!==seen[ri][ci])return[];var result=$_6s0r2pn4jh8lz1sn_subgrid(grid,ri,ci,comparator);return function(ri,ci,rowspan,colspan){for(var r=ri;r<ri+rowspan;r++)for(var c=ci;c<ci+colspan;c++)seen[r][c]=!0}(ri,ci,result.rowspan(),result.colspan()),[$_g424vknjh8lz1cd.detailnew(cell.element(),result.rowspan(),result.colspan(),cell.isNew())]});return $_g424vknjh8lz1cd.rowdetails(details,row.section())})},$_7a3bzon3jh8lz1si_toGrid=function(warehouse,generators,isNew){for(var grid=[],i=0;i<warehouse.grid().rows();i++){for(var rowCells=[],j=0;j<warehouse.grid().columns();j++){var element=$_fxwupplkjh8lz1go.getAt(warehouse,i,j).map(function(item){return $_g424vknjh8lz1cd.elementnew(item.element(),isNew)}).getOrThunk(function(){return $_g424vknjh8lz1cd.elementnew(generators.gap(),!0)});rowCells.push(element)}var row=$_g424vknjh8lz1cd.rowcells(rowCells,warehouse.all()[i].section());grid.push(row)}return grid},setIfNot=function(element,property,value,ignore){value===ignore?$_1mp8lglcjh8lz1fq.remove(element,property):$_1mp8lglcjh8lz1fq.set(element,property,value)},$_2lx51jn6jh8lz1sw_render=function(table,grid){var newRows=[],newCells=[],renderOrRemoveSection=function(gridSection,sectionName){0<gridSection.length?function(gridSection,sectionName){var section=$_fiygddlhjh8lz1g7.child(table,sectionName).getOrThunk(function(){var tb=$_6vo9a4krjh8lz1do.fromTag(sectionName,$_4hc7u2ktjh8lz1dv.owner(table).dom());return $_6qqu1alnjh8lz1hg.append(table,tb),tb});$_f2hny0lojh8lz1hi.empty(section);var rows=$_6b0spykcjh8lz1ao.map(gridSection,function(row){row.isNew()&&newRows.push(row.element());var tr=row.element();return $_f2hny0lojh8lz1hi.empty(tr),$_6b0spykcjh8lz1ao.each(row.cells(),function(cell){cell.isNew()&&newCells.push(cell.element()),setIfNot(cell.element(),"colspan",cell.colspan(),1),setIfNot(cell.element(),"rowspan",cell.rowspan(),1),$_6qqu1alnjh8lz1hg.append(tr,cell.element())}),tr});$_d7tq5mlpjh8lz1hl.append(section,rows)}(gridSection,sectionName):function(sectionName){$_fiygddlhjh8lz1g7.child(table,sectionName).bind($_f2hny0lojh8lz1hi.remove)}(sectionName)},headSection=[],bodySection=[],footSection=[];return $_6b0spykcjh8lz1ao.each(grid,function(row){switch(row.section()){case"thead":headSection.push(row);break;case"tbody":bodySection.push(row);break;case"tfoot":footSection.push(row)}}),renderOrRemoveSection(headSection,"thead"),renderOrRemoveSection(bodySection,"tbody"),renderOrRemoveSection(footSection,"tfoot"),{newRows:$_bgyjg9kejh8lz1ax.constant(newRows),newCells:$_bgyjg9kejh8lz1ax.constant(newCells)}},$_2lx51jn6jh8lz1sw_copy=function(grid){return $_6b0spykcjh8lz1ao.map(grid,function(row){var tr=$_zeqq4lrjh8lz1id_shallow(row.element());return $_6b0spykcjh8lz1ao.each(row.cells(),function(cell){var clonedCell=$_zeqq4lrjh8lz1id_deep(cell.element());setIfNot(clonedCell,"colspan",cell.colspan(),1),setIfNot(clonedCell,"rowspan",cell.rowspan(),1),$_6qqu1alnjh8lz1hg.append(tr,clonedCell)}),tr})},$_3fj5mdn9jh8lz1uf_repeat=function(repititions,f){for(var r=[],i=0;i<repititions;i++)r.push(f(i));return r},$_3fj5mdn9jh8lz1uf_range=function(start,end){for(var r=[],i=start;i<end;i++)r.push(i);return r},$_3fj5mdn9jh8lz1uf_deduce=function(xs,index){if(index<0||index>=xs.length-1)return Option.none();var current=xs[index].fold(function(){var rest=$_6b0spykcjh8lz1ao.reverse(xs.slice(0,index));return $_clgylhn2jh8lz1sg_findMap(rest,function(a,i){return a.map(function(aa){return{value:aa,delta:i+1}})})},function(c){return Option.some({value:c,delta:0})}),next=xs[index+1].fold(function(){var rest=xs.slice(index+1);return $_clgylhn2jh8lz1sg_findMap(rest,function(a,i){return a.map(function(aa){return{value:aa,delta:i+1}})})},function(n){return Option.some({value:n,delta:1})});return current.bind(function(c){return next.map(function(n){var extras=n.delta+c.delta;return Math.abs(n.value-c.value)/extras})})},decide=function(getBlock,isSingle,getFallback){var inBlock=getBlock();return $_6b0spykcjh8lz1ao.find(inBlock,isSingle).orThunk(function(){return Option.from(inBlock[0]).orThunk(getFallback)}).map(function(detail){return detail.element()})},$_fdxhann8jh8lz1u7_columns=function(warehouse){var grid=warehouse.grid(),cols=$_3fj5mdn9jh8lz1uf_range(0,grid.columns()),rows=$_3fj5mdn9jh8lz1uf_range(0,grid.rows());return $_6b0spykcjh8lz1ao.map(cols,function(col){return decide(function(){return $_6b0spykcjh8lz1ao.bind(rows,function(r){return $_fxwupplkjh8lz1go.getAt(warehouse,r,col).filter(function(detail){return detail.column()===col}).fold($_bgyjg9kejh8lz1ax.constant([]),function(detail){return[detail]})})},function(detail){return 1===detail.colspan()},function(){return $_fxwupplkjh8lz1go.getAt(warehouse,0,col)})})},$_fdxhann8jh8lz1u7_rows=function(warehouse){var grid=warehouse.grid(),rows=$_3fj5mdn9jh8lz1uf_range(0,grid.rows()),cols=$_3fj5mdn9jh8lz1uf_range(0,grid.columns());return $_6b0spykcjh8lz1ao.map(rows,function(row){return decide(function(){return $_6b0spykcjh8lz1ao.bind(cols,function(c){return $_fxwupplkjh8lz1go.getAt(warehouse,row,c).filter(function(detail){return detail.row()===row}).fold($_bgyjg9kejh8lz1ax.constant([]),function(detail){return[detail]})})},function(detail){return 1===detail.rowspan()},function(){return $_fxwupplkjh8lz1go.getAt(warehouse,row,0)})})},$_eplkaenajh8lz1un_col=function(column,x,y,w,h){var blocker=$_6vo9a4krjh8lz1do.fromTag("div");return $_3ory84lljh8lz1gx.setAll(blocker,{position:"absolute",left:x-w/2+"px",top:y+"px",height:h+"px",width:w+"px"}),$_1mp8lglcjh8lz1fq.setAll(blocker,{"data-column":column,role:"presentation"}),blocker},$_eplkaenajh8lz1un_row=function(row,x,y,w,h){var blocker=$_6vo9a4krjh8lz1do.fromTag("div");return $_3ory84lljh8lz1gx.setAll(blocker,{position:"absolute",left:x+"px",top:y-h/2+"px",height:h+"px",width:w+"px"}),$_1mp8lglcjh8lz1fq.setAll(blocker,{"data-row":row,role:"presentation"}),blocker},$_2i90e7ncjh8lz1ux_css=function(namespace){var dashNamespace=namespace.replace(/\./g,"-");return{resolve:function(str){return dashNamespace+"-"+str}}},$_ezk1iinbjh8lz1uu={resolve:$_2i90e7ncjh8lz1ux_css("ephox-snooker").resolve},read=function(element,attr){var value=$_1mp8lglcjh8lz1fq.get(element,attr);return void 0===value||""===value?[]:value.split(" ")},$_92tat7ngjh8lz1v8_read=read,$_92tat7ngjh8lz1v8_add=function(element,attr,id){var nu=read(element,attr).concat([id]);$_1mp8lglcjh8lz1fq.set(element,attr,nu.join(" "))},$_92tat7ngjh8lz1v8_remove=function(element,attr,id){var nu=$_6b0spykcjh8lz1ao.filter(read(element,attr),function(v){return v!==id});0<nu.length?$_1mp8lglcjh8lz1fq.set(element,attr,nu.join(" ")):$_1mp8lglcjh8lz1fq.remove(element,attr)},get$6=function(element){return $_92tat7ngjh8lz1v8_read(element,"class")},add$1=function(element,clazz){return $_92tat7ngjh8lz1v8_add(element,"class",clazz)},remove$4=function(element,clazz){return $_92tat7ngjh8lz1v8_remove(element,"class",clazz)},$_7oeslpnfjh8lz1v2_get=get$6,$_7oeslpnfjh8lz1v2_add=add$1,$_7oeslpnfjh8lz1v2_remove=remove$4,$_7oeslpnfjh8lz1v2_toggle=function(element,clazz){$_6b0spykcjh8lz1ao.contains(get$6(element),clazz)?remove$4(element,clazz):add$1(element,clazz)},$_7oeslpnfjh8lz1v2_supports=function(element){return void 0!==element.dom().classList},has$1=function(element,clazz){return $_7oeslpnfjh8lz1v2_supports(element)&&element.dom().classList.contains(clazz)},$_evf7iendjh8lz1uz={add:function(element,clazz){$_7oeslpnfjh8lz1v2_supports(element)?element.dom().classList.add(clazz):$_7oeslpnfjh8lz1v2_add(element,clazz)},remove:function(element,clazz){$_7oeslpnfjh8lz1v2_supports(element)?element.dom().classList.remove(clazz):$_7oeslpnfjh8lz1v2_remove(element,clazz),function(element){0===($_7oeslpnfjh8lz1v2_supports(element)?element.dom().classList:$_7oeslpnfjh8lz1v2_get(element)).length&&$_1mp8lglcjh8lz1fq.remove(element,"class")}(element)},toggle:function(element,clazz){return $_7oeslpnfjh8lz1v2_supports(element)?element.dom().classList.toggle(clazz):$_7oeslpnfjh8lz1v2_toggle(element,clazz)},toggler:function(element,clazz){var hasClasslist=$_7oeslpnfjh8lz1v2_supports(element),classList=element.dom().classList;return function(turnOff,turnOn,initial){var active=initial||!1,on=function(){turnOn(),active=!0},off=function(){turnOff(),active=!1};return{on:on,off:off,toggle:function(){(active?off:on)()},isOn:function(){return active}}}(function(){hasClasslist?classList.remove(clazz):$_7oeslpnfjh8lz1v2_remove(element,clazz)},function(){hasClasslist?classList.add(clazz):$_7oeslpnfjh8lz1v2_add(element,clazz)},has$1(element,clazz))},has:has$1},resizeBar=$_ezk1iinbjh8lz1uu.resolve("resizer-bar"),resizeRowBar=$_ezk1iinbjh8lz1uu.resolve("resizer-rows"),resizeColBar=$_ezk1iinbjh8lz1uu.resolve("resizer-cols"),clear=function(wire){var previous=$_coxlualejh8lz1fz.descendants(wire.parent(),"."+resizeBar);$_6b0spykcjh8lz1ao.each(previous,$_f2hny0lojh8lz1hi.remove)},drawBar=function(wire,positions,create){var origin=wire.origin();$_6b0spykcjh8lz1ao.each(positions,function(cpOption,i){cpOption.each(function(cp){var bar=create(origin,cp);$_evf7iendjh8lz1uz.add(bar,resizeBar),$_6qqu1alnjh8lz1hg.append(wire.parent(),bar)})})},refreshGrid=function(wire,table,rows,cols,hdirection,vdirection){var position=$_6xc5idmpjh8lz1ph_absolute(table);!function(wire,rowPositions,position,tableWidth){drawBar(wire,rowPositions,function(origin,cp){var rowBar=$_eplkaenajh8lz1un_row(cp.row(),position.left()-origin.left(),cp.y()-origin.top(),tableWidth,7);return $_evf7iendjh8lz1uz.add(rowBar,resizeRowBar),rowBar})}(wire,0<rows.length?hdirection.positions(rows,table):[],position,$_fu3j58mljh8lz1oz_getOuter(table)),function(wire,colPositions,position,tableHeight){drawBar(wire,colPositions,function(origin,cp){var colBar=$_eplkaenajh8lz1un_col(cp.col(),cp.x()-origin.left(),position.top()-origin.top(),7,tableHeight);return $_evf7iendjh8lz1uz.add(colBar,resizeColBar),colBar})}(wire,0<cols.length?vdirection.positions(cols,table):[],position,$_dc45zsmjjh8lz1or_getOuter(table))},each$2=function(wire,f){var bars=$_coxlualejh8lz1fz.descendants(wire.parent(),"."+resizeBar);$_6b0spykcjh8lz1ao.each(bars,f)},$_b9z1gin7jh8lz1tj={refresh:function(wire,table,hdirection,vdirection){clear(wire);var list=$_ff1h20kmjh8lz1c3_fromTable(table),warehouse=$_fxwupplkjh8lz1go.generate(list),rows=$_fdxhann8jh8lz1u7_rows(warehouse),cols=$_fdxhann8jh8lz1u7_columns(warehouse);refreshGrid(wire,table,rows,cols,hdirection,vdirection)},hide:function(wire){each$2(wire,function(bar){$_3ory84lljh8lz1gx.set(bar,"display","none")})},show:function(wire){each$2(wire,function(bar){$_3ory84lljh8lz1gx.set(bar,"display","block")})},destroy:clear,isRowBar:function(element){return $_evf7iendjh8lz1uz.has(element,resizeRowBar)},isColBar:function(element){return $_evf7iendjh8lz1uz.has(element,resizeColBar)}},deriveRows=function(rendered,generators){return $_6b0spykcjh8lz1ao.map(rendered,function(details){var row=function(details){return $_clgylhn2jh8lz1sg_findMap(details,function(detail){return $_4hc7u2ktjh8lz1dv.parent(detail.element()).map(function(row){var isNew=$_4hc7u2ktjh8lz1dv.parent(row).isNone();return $_g424vknjh8lz1cd.elementnew(row,isNew)})}).getOrThunk(function(){return $_g424vknjh8lz1cd.elementnew(generators.row(),!0)})}(details.details());return $_g424vknjh8lz1cd.rowdatanew(row.element(),details.details(),details.section(),row.isNew())})},toDetailList=function(grid,generators){var rendered=$_7a3bzon3jh8lz1si_toDetails(grid,$_2eywnlkvjh8lz1e8.eq);return deriveRows(rendered,generators)},findInWarehouse=function(warehouse,element){var all=$_6b0spykcjh8lz1ao.flatten($_6b0spykcjh8lz1ao.map(warehouse.all(),function(r){return r.cells()}));return $_6b0spykcjh8lz1ao.find(all,function(e){return $_2eywnlkvjh8lz1e8.eq(element,e.element())})},$_1na6n8n0jh8lz1rt_run=function(operation,extract,adjustment,postAction,genWrappers){return function(wire,table,target,generators,direction){var input=$_ff1h20kmjh8lz1c3_fromTable(table),warehouse=$_fxwupplkjh8lz1go.generate(input);return extract(warehouse,target).map(function(info){var model=function(warehouse,generators){return $_7a3bzon3jh8lz1si_toGrid(warehouse,generators,!1)}(warehouse,generators),result=operation(model,info,$_2eywnlkvjh8lz1e8.eq,genWrappers(generators)),grid=toDetailList(result.grid(),generators);return{grid:$_bgyjg9kejh8lz1ax.constant(grid),cursor:result.cursor}}).fold(function(){return Option.none()},function(out){var newElements=$_2lx51jn6jh8lz1sw_render(table,out.grid());return adjustment(table,out.grid(),direction),postAction(table),$_b9z1gin7jh8lz1tj.refresh(wire,table,$_sdnutmojh8lz1p3.height,direction),Option.some({cursor:out.cursor,newRows:newElements.newRows,newCells:newElements.newCells})})}},$_1na6n8n0jh8lz1rt_toDetailList=toDetailList,$_1na6n8n0jh8lz1rt_onCell=function(warehouse,target){return $_ee8pmfkojh8lz1ch.cell(target.element()).bind(function(cell){return findInWarehouse(warehouse,cell)})},$_1na6n8n0jh8lz1rt_onCells=function(warehouse,target){var details=$_6b0spykcjh8lz1ao.map(target.selection(),function(cell){return $_ee8pmfkojh8lz1ch.cell(cell).bind(function(lc){return findInWarehouse(warehouse,lc)})}),cells=$_clgylhn2jh8lz1sg_cat(details);return 0<cells.length?Option.some(cells):Option.none()},$_1na6n8n0jh8lz1rt_onPaste=function(warehouse,target){return $_ee8pmfkojh8lz1ch.cell(target.element()).bind(function(cell){return findInWarehouse(warehouse,cell).map(function(details){return $_b4x7eon1jh8lz1se.merge(details,{generators:target.generators,clipboard:target.clipboard})})})},$_1na6n8n0jh8lz1rt_onPasteRows=function(warehouse,target){var details=$_6b0spykcjh8lz1ao.map(target.selection(),function(cell){return $_ee8pmfkojh8lz1ch.cell(cell).bind(function(lc){return findInWarehouse(warehouse,lc)})}),cells=$_clgylhn2jh8lz1sg_cat(details);return 0<cells.length?Option.some($_b4x7eon1jh8lz1se.merge({cells:cells},{generators:target.generators,clipboard:target.clipboard})):Option.none()},$_1na6n8n0jh8lz1rt_onMergable=function(warehouse,target){return target.mergable()},$_1na6n8n0jh8lz1rt_onUnmergable=function(warehouse,target){return target.unmergable()},value$1=function(o){return{is:function(v){return o===v},isValue:$_bgyjg9kejh8lz1ax.always,isError:$_bgyjg9kejh8lz1ax.never,getOr:$_bgyjg9kejh8lz1ax.constant(o),getOrThunk:$_bgyjg9kejh8lz1ax.constant(o),getOrDie:$_bgyjg9kejh8lz1ax.constant(o),or:function(opt){return value$1(o)},orThunk:function(f){return value$1(o)},fold:function(_,onValue){return onValue(o)},map:function(f){return value$1(f(o))},each:function(f){f(o)},bind:function(f){return f(o)},exists:function(f){return f(o)},forall:function(f){return f(o)},toOption:function(){return Option.some(o)}}},error=function(message){return{is:$_bgyjg9kejh8lz1ax.never,isValue:$_bgyjg9kejh8lz1ax.never,isError:$_bgyjg9kejh8lz1ax.always,getOr:$_bgyjg9kejh8lz1ax.identity,getOrThunk:function(f){return f()},getOrDie:function(){return $_bgyjg9kejh8lz1ax.die(String(message))()},or:function(opt){return opt},orThunk:function(f){return f()},fold:function(onError,_){return onError(message)},map:function(f){return error(message)},each:$_bgyjg9kejh8lz1ax.noop,bind:function(f){return error(message)},exists:$_bgyjg9kejh8lz1ax.never,forall:$_bgyjg9kejh8lz1ax.always,toOption:Option.none}},Result={value:value$1,error:error},fill=function(cells,generator){return $_6b0spykcjh8lz1ao.map(cells,function(){return $_g424vknjh8lz1cd.elementnew(generator.cell(),!0)})},rowFill=function(grid,amount,generator){return grid.concat($_3fj5mdn9jh8lz1uf_repeat(amount,function(_row){return $_cndk32n5jh8lz1ss.setCells(grid[grid.length-1],fill(grid[grid.length-1].cells(),generator))}))},colFill=function(grid,amount,generator){return $_6b0spykcjh8lz1ao.map(grid,function(row){return $_cndk32n5jh8lz1ss.setCells(row,row.cells().concat(fill($_3fj5mdn9jh8lz1uf_range(0,amount),generator)))})},$_d3iwlknijh8lz1vi_measure=function(startAddress,gridA,gridB){if(startAddress.row()>=gridA.length||startAddress.column()>$_cndk32n5jh8lz1ss.cellLength(gridA[0]))return Result.error("invalid start address out of table bounds, row: "+startAddress.row()+", column: "+startAddress.column());var rowRemainder=gridA.slice(startAddress.row()),colRemainder=rowRemainder[0].cells().slice(startAddress.column()),colRequired=$_cndk32n5jh8lz1ss.cellLength(gridB[0]),rowRequired=gridB.length;return Result.value({rowDelta:$_bgyjg9kejh8lz1ax.constant(rowRemainder.length-rowRequired),colDelta:$_bgyjg9kejh8lz1ax.constant(colRemainder.length-colRequired)})},$_d3iwlknijh8lz1vi_measureWidth=function(gridA,gridB){var colLengthA=$_cndk32n5jh8lz1ss.cellLength(gridA[0]),colLengthB=$_cndk32n5jh8lz1ss.cellLength(gridB[0]);return{rowDelta:$_bgyjg9kejh8lz1ax.constant(0),colDelta:$_bgyjg9kejh8lz1ax.constant(colLengthA-colLengthB)}},$_d3iwlknijh8lz1vi_tailor=function(gridA,delta,generator){var fillCols=delta.colDelta()<0?colFill:$_bgyjg9kejh8lz1ax.identity;return(delta.rowDelta()<0?rowFill:$_bgyjg9kejh8lz1ax.identity)(fillCols(gridA,Math.abs(delta.colDelta()),generator),Math.abs(delta.rowDelta()),generator)},$_6f3hexnkjh8lz1w0_merge=function(grid,bounds,comparator,substitution){if(0===grid.length)return grid;for(var i=bounds.startRow();i<=bounds.finishRow();i++)for(var j=bounds.startCol();j<=bounds.finishCol();j++)$_cndk32n5jh8lz1ss.mutateCell(grid[i],j,$_g424vknjh8lz1cd.elementnew(substitution(),!1));return grid},$_6f3hexnkjh8lz1w0_unmerge=function(grid,target,comparator,substitution){for(var first=!0,i=0;i<grid.length;i++)for(var j=0;j<$_cndk32n5jh8lz1ss.cellLength(grid[0]);j++){var isToReplace=comparator($_cndk32n5jh8lz1ss.getCellElement(grid[i],j),target);!0===isToReplace&&!1===first?$_cndk32n5jh8lz1ss.mutateCell(grid[i],j,$_g424vknjh8lz1cd.elementnew(substitution(),!0)):!0===isToReplace&&(first=!1)}return grid},$_6f3hexnkjh8lz1w0_splitRows=function(grid,index,comparator,substitution){if(0<index&&index<grid.length){var cells=function(row,comparator){return $_6b0spykcjh8lz1ao.foldl(row,function(rest,cell){return $_6b0spykcjh8lz1ao.exists(rest,function(currentCell){return comparator(currentCell.element(),cell.element())})?rest:rest.concat([cell])},[])}(grid[index-1].cells(),comparator);$_6b0spykcjh8lz1ao.each(cells,function(cell){for(var replacement=Option.none(),i=index;i<grid.length;i++)for(var j=0;j<$_cndk32n5jh8lz1ss.cellLength(grid[0]);j++){var current=grid[i].cells()[j];comparator(current.element(),cell.element())&&(replacement.isNone()&&(replacement=Option.some(substitution())),replacement.each(function(sub){$_cndk32n5jh8lz1ss.mutateCell(grid[i],j,$_g424vknjh8lz1cd.elementnew(sub,!0))}))}})}return grid},isSpanning=function(grid,row,col,comparator){var candidate=$_cndk32n5jh8lz1ss.getCell(grid[row],col),matching=$_bgyjg9kejh8lz1ax.curry(comparator,candidate.element()),currentRow=grid[row];return 1<grid.length&&1<$_cndk32n5jh8lz1ss.cellLength(currentRow)&&(0<col&&matching($_cndk32n5jh8lz1ss.getCellElement(currentRow,col-1))||col<currentRow.length-1&&matching($_cndk32n5jh8lz1ss.getCellElement(currentRow,col+1))||0<row&&matching($_cndk32n5jh8lz1ss.getCellElement(grid[row-1],col))||row<grid.length-1&&matching($_cndk32n5jh8lz1ss.getCellElement(grid[row+1],col)))},$_bq9moknhjh8lz1vd_merge=function(startAddress,gridA,gridB,generator,comparator){return $_d3iwlknijh8lz1vi_measure(startAddress,gridA,gridB).map(function(delta){var fittedGrid=$_d3iwlknijh8lz1vi_tailor(gridA,delta,generator);return function(startAddress,gridA,gridB,generator,comparator){for(var startRow=startAddress.row(),startCol=startAddress.column(),endRow=startRow+gridB.length,endCol=startCol+$_cndk32n5jh8lz1ss.cellLength(gridB[0]),r=startRow;r<endRow;r++)for(var c=startCol;c<endCol;c++){isSpanning(gridA,r,c,comparator)&&$_6f3hexnkjh8lz1w0_unmerge(gridA,$_cndk32n5jh8lz1ss.getCellElement(gridA[r],c),comparator,generator.cell);var newCell=$_cndk32n5jh8lz1ss.getCellElement(gridB[r-startRow],c-startCol),replacement=generator.replace(newCell);$_cndk32n5jh8lz1ss.mutateCell(gridA[r],c,$_g424vknjh8lz1cd.elementnew(replacement,!0))}return gridA}(startAddress,fittedGrid,gridB,generator,comparator)})},$_bq9moknhjh8lz1vd_insert=function(index,gridA,gridB,generator,comparator){$_6f3hexnkjh8lz1w0_splitRows(gridA,index,comparator,generator.cell);var delta=$_d3iwlknijh8lz1vi_measureWidth(gridB,gridA),fittedNewGrid=$_d3iwlknijh8lz1vi_tailor(gridB,delta,generator),secondDelta=$_d3iwlknijh8lz1vi_measureWidth(gridA,fittedNewGrid),fittedOldGrid=$_d3iwlknijh8lz1vi_tailor(gridA,secondDelta,generator);return fittedOldGrid.slice(0,index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index,fittedOldGrid.length))},$_gaga3fnljh8lz1w7_insertRowAt=function(grid,index,example,comparator,substitution){var before=grid.slice(0,index),after=grid.slice(index),between=$_cndk32n5jh8lz1ss.mapCells(grid[example],function(ex,c){return 0<index&&index<grid.length&&comparator($_cndk32n5jh8lz1ss.getCellElement(grid[index-1],c),$_cndk32n5jh8lz1ss.getCellElement(grid[index],c))?$_cndk32n5jh8lz1ss.getCell(grid[index],c):$_g424vknjh8lz1cd.elementnew(substitution(ex.element(),comparator),!0)});return before.concat([between]).concat(after)},$_gaga3fnljh8lz1w7_insertColumnAt=function(grid,index,example,comparator,substitution){return $_6b0spykcjh8lz1ao.map(grid,function(row){var sub=0<index&&index<$_cndk32n5jh8lz1ss.cellLength(row)&&comparator($_cndk32n5jh8lz1ss.getCellElement(row,index-1),$_cndk32n5jh8lz1ss.getCellElement(row,index))?$_cndk32n5jh8lz1ss.getCell(row,index):$_g424vknjh8lz1cd.elementnew(substitution($_cndk32n5jh8lz1ss.getCellElement(row,example),comparator),!0);return $_cndk32n5jh8lz1ss.addCell(row,index,sub)})},$_gaga3fnljh8lz1w7_splitCellIntoColumns=function(grid,exampleRow,exampleCol,comparator,substitution){var index=exampleCol+1;return $_6b0spykcjh8lz1ao.map(grid,function(row,i){var sub=i===exampleRow?$_g424vknjh8lz1cd.elementnew(substitution($_cndk32n5jh8lz1ss.getCellElement(row,exampleCol),comparator),!0):$_cndk32n5jh8lz1ss.getCell(row,exampleCol);return $_cndk32n5jh8lz1ss.addCell(row,index,sub)})},$_gaga3fnljh8lz1w7_splitCellIntoRows=function(grid,exampleRow,exampleCol,comparator,substitution){var index=exampleRow+1,before=grid.slice(0,index),after=grid.slice(index),between=$_cndk32n5jh8lz1ss.mapCells(grid[exampleRow],function(ex,i){return i===exampleCol?$_g424vknjh8lz1cd.elementnew(substitution(ex.element(),comparator),!0):ex});return before.concat([between]).concat(after)},$_gaga3fnljh8lz1w7_deleteRowsAt=function(grid,start,finish){return grid.slice(0,start).concat(grid.slice(finish+1))},$_gaga3fnljh8lz1w7_deleteColumnsAt=function(grid,start,finish){var rows=$_6b0spykcjh8lz1ao.map(grid,function(row){var cells=row.cells().slice(0,start).concat(row.cells().slice(finish+1));return $_g424vknjh8lz1cd.rowcells(cells,row.section())});return $_6b0spykcjh8lz1ao.filter(rows,function(row){return 0<row.cells().length})},replaceIn=function(grid,targets,comparator,substitution){return $_6b0spykcjh8lz1ao.map(grid,function(row){return $_cndk32n5jh8lz1ss.mapCells(row,function(cell){return function(cell){return $_6b0spykcjh8lz1ao.exists(targets,function(target){return comparator(cell.element(),target.element())})}(cell)?$_g424vknjh8lz1cd.elementnew(substitution(cell.element(),comparator),!0):cell})})},notStartRow=function(grid,rowIndex,colIndex,comparator){return void 0!==$_cndk32n5jh8lz1ss.getCellElement(grid[rowIndex],colIndex)&&0<rowIndex&&comparator($_cndk32n5jh8lz1ss.getCellElement(grid[rowIndex-1],colIndex),$_cndk32n5jh8lz1ss.getCellElement(grid[rowIndex],colIndex))},notStartColumn=function(row,index,comparator){return 0<index&&comparator($_cndk32n5jh8lz1ss.getCellElement(row,index-1),$_cndk32n5jh8lz1ss.getCellElement(row,index))},$_di6efunmjh8lz1wc_replaceColumn=function(grid,index,comparator,substitution){var targets=$_6b0spykcjh8lz1ao.bind(grid,function(row,i){return notStartRow(grid,i,index,comparator)||notStartColumn(row,index,comparator)?[]:[$_cndk32n5jh8lz1ss.getCell(row,index)]});return replaceIn(grid,targets,comparator,substitution)},$_di6efunmjh8lz1wc_replaceRow=function(grid,index,comparator,substitution){var targetRow=grid[index],targets=$_6b0spykcjh8lz1ao.bind(targetRow.cells(),function(item,i){return notStartRow(grid,index,i,comparator)||notStartColumn(targetRow,i,comparator)?[]:[item]});return replaceIn(grid,targets,comparator,substitution)},folder=function(fold){return{fold:fold}},$_6yfc1snpjh8lz1wv_none=function(){return folder(function(n,o,l,m,r){return n()})},$_6yfc1snpjh8lz1wv_only=function(index){return folder(function(n,o,l,m,r){return o(index)})},$_6yfc1snpjh8lz1wv_left=function(index,next){return folder(function(n,o,l,m,r){return l(index,next)})},$_6yfc1snpjh8lz1wv_middle=function(prev,index,next){return folder(function(n,o,l,m,r){return m(prev,index,next)})},$_6yfc1snpjh8lz1wv_right=function(prev,index){return folder(function(n,o,l,m,r){return r(prev,index)})},$_8l7lnenojh8lz1wp_determine=function(input,column,step,tableSize){var result=input.slice(0),context=function(input,index){return 0===input.length?$_6yfc1snpjh8lz1wv_none():1===input.length?$_6yfc1snpjh8lz1wv_only(0):0===index?$_6yfc1snpjh8lz1wv_left(0,1):index===input.length-1?$_6yfc1snpjh8lz1wv_right(index-1,index):0<index&&index<input.length-1?$_6yfc1snpjh8lz1wv_middle(index-1,index,index+1):$_6yfc1snpjh8lz1wv_none()}(input,column),zero=function(array){return $_6b0spykcjh8lz1ao.map(array,$_bgyjg9kejh8lz1ax.constant(0))},onNone=$_bgyjg9kejh8lz1ax.constant(zero(result)),onChange=function(index,next){if(0<=step){var newNext=Math.max(tableSize.minCellWidth(),result[next]-step);return zero(result.slice(0,index)).concat([step,newNext-result[next]]).concat(zero(result.slice(next+1)))}var newThis=Math.max(tableSize.minCellWidth(),result[index]+step),diffx=result[index]-newThis;return zero(result.slice(0,index)).concat([newThis-result[index],diffx]).concat(zero(result.slice(next+1)))},onLeft=onChange;return context.fold(onNone,function(index){return tableSize.singleColumnWidth(result[index],step)},onLeft,function(prev,index,next){return onChange(index,next)},function(prev,index){if(0<=step)return zero(result.slice(0,index)).concat([step]);var size=Math.max(tableSize.minCellWidth(),result[index]+step);return zero(result.slice(0,index)).concat([size-result[index]])})},getSpan$1=function(cell,type){return $_1mp8lglcjh8lz1fq.has(cell,type)&&1<parseInt($_1mp8lglcjh8lz1fq.get(cell,type),10)},$_agh84xnrjh8lz1x6={hasColspan:function(cell){return getSpan$1(cell,"colspan")},hasRowspan:function(cell){return getSpan$1(cell,"rowspan")},minWidth:$_bgyjg9kejh8lz1ax.constant(10),minHeight:$_bgyjg9kejh8lz1ax.constant(10),getInt:function(element,property){return parseInt($_3ory84lljh8lz1gx.get(element,property),10)}},getRaw$1=function(cell,property,getter){return $_3ory84lljh8lz1gx.getRaw(cell,property).fold(function(){return getter(cell)+"px"},function(raw){return raw})},getRawW=function(cell){return getRaw$1(cell,"width",$_i2xtsmhjh8lz1nv.getPixelWidth)},getRawH=function(cell){return getRaw$1(cell,"height",$_i2xtsmhjh8lz1nv.getHeight)},getWidthFrom=function(warehouse,direction,getWidth,fallback,tableSize){var columns=$_fdxhann8jh8lz1u7_columns(warehouse),backups=$_6b0spykcjh8lz1ao.map(columns,function(cellOption){return cellOption.map(direction.edge)});return $_6b0spykcjh8lz1ao.map(columns,function(cellOption,c){return cellOption.filter($_bgyjg9kejh8lz1ax.not($_agh84xnrjh8lz1x6.hasColspan)).fold(function(){var deduced=$_3fj5mdn9jh8lz1uf_deduce(backups,c);return fallback(deduced)},function(cell){return getWidth(cell,tableSize)})})},getDeduced=function(deduced){return deduced.map(function(d){return d+"px"}).getOr("")},getHeightFrom=function(warehouse,direction,getHeight,fallback){var rows=$_fdxhann8jh8lz1u7_rows(warehouse),backups=$_6b0spykcjh8lz1ao.map(rows,function(cellOption){return cellOption.map(direction.edge)});return $_6b0spykcjh8lz1ao.map(rows,function(cellOption,c){return cellOption.filter($_bgyjg9kejh8lz1ax.not($_agh84xnrjh8lz1x6.hasRowspan)).fold(function(){var deduced=$_3fj5mdn9jh8lz1uf_deduce(backups,c);return fallback(deduced)},function(cell){return getHeight(cell)})})},$_8h6liinqjh8lz1wx={getRawWidths:function(warehouse,direction){return getWidthFrom(warehouse,direction,getRawW,getDeduced)},getPixelWidths:function(warehouse,direction,tableSize){return getWidthFrom(warehouse,direction,$_i2xtsmhjh8lz1nv.getPixelWidth,function(deduced){return deduced.getOrThunk(tableSize.minCellWidth)},tableSize)},getPercentageWidths:function(warehouse,direction,tableSize){return getWidthFrom(warehouse,direction,$_i2xtsmhjh8lz1nv.getPercentageWidth,function(deduced){return deduced.fold(function(){return tableSize.minCellWidth()},function(cellWidth){return cellWidth/tableSize.pixelWidth()*100})},tableSize)},getPixelHeights:function(warehouse,direction){return getHeightFrom(warehouse,direction,$_i2xtsmhjh8lz1nv.getHeight,function(deduced){return deduced.getOrThunk($_agh84xnrjh8lz1x6.minHeight)})},getRawHeights:function(warehouse,direction){return getHeightFrom(warehouse,direction,getRawH,getDeduced)}},total=function(start,end,measures){for(var r=0,i=start;i<end;i++)r+=void 0!==measures[i]?measures[i]:0;return r},$_df6hx0nsjh8lz1xd_recalculateWidth=function(warehouse,widths){var all=$_fxwupplkjh8lz1go.justCells(warehouse);return $_6b0spykcjh8lz1ao.map(all,function(cell){var width=total(cell.column(),cell.column()+cell.colspan(),widths);return{element:cell.element,width:$_bgyjg9kejh8lz1ax.constant(width),colspan:cell.colspan}})},$_df6hx0nsjh8lz1xd_recalculateHeight=function(warehouse,heights){var all=$_fxwupplkjh8lz1go.justCells(warehouse);return $_6b0spykcjh8lz1ao.map(all,function(cell){var height=total(cell.row(),cell.row()+cell.rowspan(),heights);return{element:cell.element,height:$_bgyjg9kejh8lz1ax.constant(height),rowspan:cell.rowspan}})},$_df6hx0nsjh8lz1xd_matchRowHeight=function(warehouse,heights){return $_6b0spykcjh8lz1ao.map(warehouse.all(),function(row,i){return{element:row.element,height:$_bgyjg9kejh8lz1ax.constant(heights[i])}})},pixelSize=function(width){var intWidth=parseInt(width,10),getCellDelta=$_bgyjg9kejh8lz1ax.identity;return{width:$_bgyjg9kejh8lz1ax.constant(intWidth),pixelWidth:$_bgyjg9kejh8lz1ax.constant(intWidth),getWidths:$_8h6liinqjh8lz1wx.getPixelWidths,getCellDelta:getCellDelta,singleColumnWidth:function(width,delta){return[Math.max($_agh84xnrjh8lz1x6.minWidth(),width+delta)-width]},minCellWidth:$_agh84xnrjh8lz1x6.minWidth,setElementWidth:$_i2xtsmhjh8lz1nv.setPixelWidth,setTableWidth:function(table,newWidths,_delta){var total=$_6b0spykcjh8lz1ao.foldr(newWidths,function(b,a){return b+a},0);$_i2xtsmhjh8lz1nv.setPixelWidth(table,total)}}},chooseSize=function(element,width){if($_i2xtsmhjh8lz1nv.percentageBasedSizeRegex().test(width))return function(width,element){var floatWidth=parseFloat(width),pixelWidth=$_fu3j58mljh8lz1oz_get(element);return{width:$_bgyjg9kejh8lz1ax.constant(floatWidth),pixelWidth:$_bgyjg9kejh8lz1ax.constant(pixelWidth),getWidths:$_8h6liinqjh8lz1wx.getPercentageWidths,getCellDelta:function(delta){return delta/pixelWidth*100},singleColumnWidth:function(width,_delta){return[100-width]},minCellWidth:function(){return $_agh84xnrjh8lz1x6.minWidth()/pixelWidth*100},setElementWidth:$_i2xtsmhjh8lz1nv.setPercentageWidth,setTableWidth:function(table,_newWidths,delta){var total=floatWidth+delta;$_i2xtsmhjh8lz1nv.setPercentageWidth(table,total)}}}($_i2xtsmhjh8lz1nv.percentageBasedSizeRegex().exec(width)[1],element);if($_i2xtsmhjh8lz1nv.pixelBasedSizeRegex().test(width)){var pixelMatch=$_i2xtsmhjh8lz1nv.pixelBasedSizeRegex().exec(width);return pixelSize(pixelMatch[1])}var fallbackWidth=$_fu3j58mljh8lz1oz_get(element);return pixelSize(fallbackWidth)},$_b9pgttntjh8lz1xk_getTableSize=function(element){return $_i2xtsmhjh8lz1nv.getRawWidth(element).fold(function(){var fallbackWidth=$_fu3j58mljh8lz1oz_get(element);return pixelSize(fallbackWidth)},function(width){return chooseSize(element,width)})},getWarehouse$1=function(list){return $_fxwupplkjh8lz1go.generate(list)},getTableWarehouse=function(table){var list=$_ff1h20kmjh8lz1c3_fromTable(table);return getWarehouse$1(list)},$_7x5dznnjh8lz1wh_adjustWidth=function(table,delta,index,direction){var tableSize=$_b9pgttntjh8lz1xk_getTableSize(table),step=tableSize.getCellDelta(delta),warehouse=getTableWarehouse(table),widths=tableSize.getWidths(warehouse,direction,tableSize),deltas=$_8l7lnenojh8lz1wp_determine(widths,index,step,tableSize),newWidths=$_6b0spykcjh8lz1ao.map(deltas,function(dx,i){return dx+widths[i]}),newSizes=$_df6hx0nsjh8lz1xd_recalculateWidth(warehouse,newWidths);$_6b0spykcjh8lz1ao.each(newSizes,function(cell){tableSize.setElementWidth(cell.element(),cell.width())}),index===warehouse.grid().columns()-1&&tableSize.setTableWidth(table,newWidths,step)},$_7x5dznnjh8lz1wh_adjustHeight=function(table,delta,index,direction){var warehouse=getTableWarehouse(table),heights=$_8h6liinqjh8lz1wx.getPixelHeights(warehouse,direction),newHeights=$_6b0spykcjh8lz1ao.map(heights,function(dy,i){return index===i?Math.max(delta+dy,$_agh84xnrjh8lz1x6.minHeight()):dy}),newCellSizes=$_df6hx0nsjh8lz1xd_recalculateHeight(warehouse,newHeights),newRowSizes=$_df6hx0nsjh8lz1xd_matchRowHeight(warehouse,newHeights);$_6b0spykcjh8lz1ao.each(newRowSizes,function(row){$_i2xtsmhjh8lz1nv.setHeight(row.element(),row.height())}),$_6b0spykcjh8lz1ao.each(newCellSizes,function(cell){$_i2xtsmhjh8lz1nv.setHeight(cell.element(),cell.height())});var newSize,total=(newSize=newHeights,$_6b0spykcjh8lz1ao.foldr(newSize,function(b,a){return b+a},0));$_i2xtsmhjh8lz1nv.setHeight(table,total)},$_7x5dznnjh8lz1wh_adjustWidthTo=function(table,list,direction){var tableSize=$_b9pgttntjh8lz1xk_getTableSize(table),warehouse=getWarehouse$1(list),widths=tableSize.getWidths(warehouse,direction,tableSize),newSizes=$_df6hx0nsjh8lz1xd_recalculateWidth(warehouse,widths);$_6b0spykcjh8lz1ao.each(newSizes,function(cell){tableSize.setElementWidth(cell.element(),cell.width())});var total=$_6b0spykcjh8lz1ao.foldr(widths,function(b,a){return a+b},0);0<newSizes.length&&tableSize.setElementWidth(table,total)},prune=function(table){0===$_ee8pmfkojh8lz1ch.cells(table).length&&$_f2hny0lojh8lz1hi.remove(table)},outcome=$_d2ojjnkijh8lz1bv.immutable("grid","cursor"),elementFromGrid=function(grid,row,column){return findIn(grid,row,column).orThunk(function(){return findIn(grid,0,0)})},findIn=function(grid,row,column){return Option.from(grid[row]).bind(function(r){return Option.from(r.cells()[column]).bind(function(c){return Option.from(c.element())})})},bundle=function(grid,row,column){return outcome(grid,findIn(grid,row,column))},uniqueRows=function(details){return $_6b0spykcjh8lz1ao.foldl(details,function(rest,detail){return $_6b0spykcjh8lz1ao.exists(rest,function(currentDetail){return currentDetail.row()===detail.row()})?rest:rest.concat([detail])},[]).sort(function(detailA,detailB){return detailA.row()-detailB.row()})},uniqueColumns=function(details){return $_6b0spykcjh8lz1ao.foldl(details,function(rest,detail){return $_6b0spykcjh8lz1ao.exists(rest,function(currentDetail){return currentDetail.column()===detail.column()})?rest:rest.concat([detail])},[]).sort(function(detailA,detailB){return detailA.column()-detailB.column()})},gridifyRows=function(rows,generators,example){var pasteDetails=$_ff1h20kmjh8lz1c3_fromPastedRows(rows,example),wh=$_fxwupplkjh8lz1go.generate(pasteDetails);return $_7a3bzon3jh8lz1si_toGrid(wh,generators,!0)},resize=$_7x5dznnjh8lz1wh_adjustWidthTo,$_68i0x8mtjh8lz1pt={insertRowBefore:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var example=detail.row(),targetIndex=detail.row(),newGrid=$_gaga3fnljh8lz1w7_insertRowAt(grid,targetIndex,example,comparator,genWrappers.getOrInit);return bundle(newGrid,targetIndex,detail.column())},$_1na6n8n0jh8lz1rt_onCell,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),insertRowsBefore:$_1na6n8n0jh8lz1rt_run(function(grid,details,comparator,genWrappers){var example=details[0].row(),targetIndex=details[0].row(),rows=uniqueRows(details),newGrid=$_6b0spykcjh8lz1ao.foldl(rows,function(newGrid,_row){return $_gaga3fnljh8lz1w7_insertRowAt(newGrid,targetIndex,example,comparator,genWrappers.getOrInit)},grid);return bundle(newGrid,targetIndex,details[0].column())},$_1na6n8n0jh8lz1rt_onCells,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),insertRowAfter:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var example=detail.row(),targetIndex=detail.row()+detail.rowspan(),newGrid=$_gaga3fnljh8lz1w7_insertRowAt(grid,targetIndex,example,comparator,genWrappers.getOrInit);return bundle(newGrid,targetIndex,detail.column())},$_1na6n8n0jh8lz1rt_onCell,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),insertRowsAfter:$_1na6n8n0jh8lz1rt_run(function(grid,details,comparator,genWrappers){var rows=uniqueRows(details),example=rows[rows.length-1].row(),targetIndex=rows[rows.length-1].row()+rows[rows.length-1].rowspan(),newGrid=$_6b0spykcjh8lz1ao.foldl(rows,function(newGrid,_row){return $_gaga3fnljh8lz1w7_insertRowAt(newGrid,targetIndex,example,comparator,genWrappers.getOrInit)},grid);return bundle(newGrid,targetIndex,details[0].column())},$_1na6n8n0jh8lz1rt_onCells,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),insertColumnBefore:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var example=detail.column(),targetIndex=detail.column(),newGrid=$_gaga3fnljh8lz1w7_insertColumnAt(grid,targetIndex,example,comparator,genWrappers.getOrInit);return bundle(newGrid,detail.row(),targetIndex)},$_1na6n8n0jh8lz1rt_onCell,resize,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),insertColumnsBefore:$_1na6n8n0jh8lz1rt_run(function(grid,details,comparator,genWrappers){var columns=uniqueColumns(details),example=columns[0].column(),targetIndex=columns[0].column(),newGrid=$_6b0spykcjh8lz1ao.foldl(columns,function(newGrid,_row){return $_gaga3fnljh8lz1w7_insertColumnAt(newGrid,targetIndex,example,comparator,genWrappers.getOrInit)},grid);return bundle(newGrid,details[0].row(),targetIndex)},$_1na6n8n0jh8lz1rt_onCells,resize,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),insertColumnAfter:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var example=detail.column(),targetIndex=detail.column()+detail.colspan(),newGrid=$_gaga3fnljh8lz1w7_insertColumnAt(grid,targetIndex,example,comparator,genWrappers.getOrInit);return bundle(newGrid,detail.row(),targetIndex)},$_1na6n8n0jh8lz1rt_onCell,resize,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),insertColumnsAfter:$_1na6n8n0jh8lz1rt_run(function(grid,details,comparator,genWrappers){var example=details[details.length-1].column(),targetIndex=details[details.length-1].column()+details[details.length-1].colspan(),columns=uniqueColumns(details),newGrid=$_6b0spykcjh8lz1ao.foldl(columns,function(newGrid,_row){return $_gaga3fnljh8lz1w7_insertColumnAt(newGrid,targetIndex,example,comparator,genWrappers.getOrInit)},grid);return bundle(newGrid,details[0].row(),targetIndex)},$_1na6n8n0jh8lz1rt_onCells,resize,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),splitCellIntoColumns:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var newGrid=$_gaga3fnljh8lz1w7_splitCellIntoColumns(grid,detail.row(),detail.column(),comparator,genWrappers.getOrInit);return bundle(newGrid,detail.row(),detail.column())},$_1na6n8n0jh8lz1rt_onCell,resize,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),splitCellIntoRows:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var newGrid=$_gaga3fnljh8lz1w7_splitCellIntoRows(grid,detail.row(),detail.column(),comparator,genWrappers.getOrInit);return bundle(newGrid,detail.row(),detail.column())},$_1na6n8n0jh8lz1rt_onCell,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),eraseColumns:$_1na6n8n0jh8lz1rt_run(function(grid,details,comparator,_genWrappers){var columns=uniqueColumns(details),newGrid=$_gaga3fnljh8lz1w7_deleteColumnsAt(grid,columns[0].column(),columns[columns.length-1].column()),cursor=elementFromGrid(newGrid,details[0].row(),details[0].column());return outcome(newGrid,cursor)},$_1na6n8n0jh8lz1rt_onCells,resize,prune,$_46iqoomujh8lz1qf_modification),eraseRows:$_1na6n8n0jh8lz1rt_run(function(grid,details,comparator,_genWrappers){var rows=uniqueRows(details),newGrid=$_gaga3fnljh8lz1w7_deleteRowsAt(grid,rows[0].row(),rows[rows.length-1].row()),cursor=elementFromGrid(newGrid,details[0].row(),details[0].column());return outcome(newGrid,cursor)},$_1na6n8n0jh8lz1rt_onCells,$_bgyjg9kejh8lz1ax.noop,prune,$_46iqoomujh8lz1qf_modification),makeColumnHeader:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var newGrid=$_di6efunmjh8lz1wc_replaceColumn(grid,detail.column(),comparator,genWrappers.replaceOrInit);return bundle(newGrid,detail.row(),detail.column())},$_1na6n8n0jh8lz1rt_onCell,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_transform("row","th")),unmakeColumnHeader:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var newGrid=$_di6efunmjh8lz1wc_replaceColumn(grid,detail.column(),comparator,genWrappers.replaceOrInit);return bundle(newGrid,detail.row(),detail.column())},$_1na6n8n0jh8lz1rt_onCell,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_transform(null,"td")),makeRowHeader:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var newGrid=$_di6efunmjh8lz1wc_replaceRow(grid,detail.row(),comparator,genWrappers.replaceOrInit);return bundle(newGrid,detail.row(),detail.column())},$_1na6n8n0jh8lz1rt_onCell,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_transform("col","th")),unmakeRowHeader:$_1na6n8n0jh8lz1rt_run(function(grid,detail,comparator,genWrappers){var newGrid=$_di6efunmjh8lz1wc_replaceRow(grid,detail.row(),comparator,genWrappers.replaceOrInit);return bundle(newGrid,detail.row(),detail.column())},$_1na6n8n0jh8lz1rt_onCell,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_transform(null,"td")),mergeCells:$_1na6n8n0jh8lz1rt_run(function(grid,mergable,comparator,_genWrappers){var cells=mergable.cells();$_9305lemxjh8lz1qy_merge(cells);var newGrid=$_6f3hexnkjh8lz1w0_merge(grid,mergable.bounds(),comparator,$_bgyjg9kejh8lz1ax.constant(cells[0]));return outcome(newGrid,Option.from(cells[0]))},$_1na6n8n0jh8lz1rt_onMergable,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_merging),unmergeCells:$_1na6n8n0jh8lz1rt_run(function(grid,unmergable,comparator,genWrappers){var newGrid=$_6b0spykcjh8lz1ao.foldr(unmergable,function(b,cell){return $_6f3hexnkjh8lz1w0_unmerge(b,cell,comparator,genWrappers.combine(cell))},grid);return outcome(newGrid,Option.from(unmergable[0]))},$_1na6n8n0jh8lz1rt_onUnmergable,resize,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_merging),pasteCells:$_1na6n8n0jh8lz1rt_run(function(grid,pasteDetails,comparator,genWrappers){var table,generators,list,wh,gridB=(table=pasteDetails.clipboard(),generators=pasteDetails.generators(),list=$_ff1h20kmjh8lz1c3_fromTable(table),wh=$_fxwupplkjh8lz1go.generate(list),$_7a3bzon3jh8lz1si_toGrid(wh,generators,!0)),startAddress=$_g424vknjh8lz1cd.address(pasteDetails.row(),pasteDetails.column());return $_bq9moknhjh8lz1vd_merge(startAddress,grid,gridB,pasteDetails.generators(),comparator).fold(function(){return outcome(grid,Option.some(pasteDetails.element()))},function(nuGrid){var cursor=elementFromGrid(nuGrid,pasteDetails.row(),pasteDetails.column());return outcome(nuGrid,cursor)})},$_1na6n8n0jh8lz1rt_onPaste,resize,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),pasteRowsBefore:$_1na6n8n0jh8lz1rt_run(function(grid,pasteDetails,comparator,genWrappers){var example=grid[pasteDetails.cells[0].row()],index=pasteDetails.cells[0].row(),gridB=gridifyRows(pasteDetails.clipboard(),pasteDetails.generators(),example),mergedGrid=$_bq9moknhjh8lz1vd_insert(index,grid,gridB,pasteDetails.generators(),comparator),cursor=elementFromGrid(mergedGrid,pasteDetails.cells[0].row(),pasteDetails.cells[0].column());return outcome(mergedGrid,cursor)},$_1na6n8n0jh8lz1rt_onPasteRows,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification),pasteRowsAfter:$_1na6n8n0jh8lz1rt_run(function(grid,pasteDetails,comparator,genWrappers){var example=grid[pasteDetails.cells[0].row()],index=pasteDetails.cells[pasteDetails.cells.length-1].row()+pasteDetails.cells[pasteDetails.cells.length-1].rowspan(),gridB=gridifyRows(pasteDetails.clipboard(),pasteDetails.generators(),example),mergedGrid=$_bq9moknhjh8lz1vd_insert(index,grid,gridB,pasteDetails.generators(),comparator),cursor=elementFromGrid(mergedGrid,pasteDetails.cells[0].row(),pasteDetails.cells[0].column());return outcome(mergedGrid,cursor)},$_1na6n8n0jh8lz1rt_onPasteRows,$_bgyjg9kejh8lz1ax.noop,$_bgyjg9kejh8lz1ax.noop,$_46iqoomujh8lz1qf_modification)},getBody$1=function(editor){return $_6vo9a4krjh8lz1do.fromDom(editor.getBody())},getPixelWidth$1=function(elm){return elm.getBoundingClientRect().width},getPixelHeight=function(elm){return elm.getBoundingClientRect().height},getIsRoot=function(editor){return function(element){return $_2eywnlkvjh8lz1e8.eq(element,getBody$1(editor))}},addSizeSuffix=function(size){return/^[0-9]+$/.test(size)&&(size+="px"),size},removeDataStyle=function(table){var dataStyleCells=$_coxlualejh8lz1fz.descendants(table,"td[data-mce-style],th[data-mce-style]");$_1mp8lglcjh8lz1fq.remove(table,"data-mce-style"),$_6b0spykcjh8lz1ao.each(dataStyleCells,function(cell){$_1mp8lglcjh8lz1fq.remove(cell,"data-mce-style")})},getDirection=function(element){return"rtl"===$_3ory84lljh8lz1gx.get(element,"direction")?"rtl":"ltr"},$_5eddzznwjh8lz1yc={onDirection:function(isLtr,isRtl){return function(element){return"rtl"===getDirection(element)?isRtl:isLtr}},getDirection:getDirection},ltr$1={isRtl:$_bgyjg9kejh8lz1ax.constant(!1)},rtl$1={isRtl:$_bgyjg9kejh8lz1ax.constant(!0)},$_fe2yjsnvjh8lz1y8={directionAt:function(element){return"rtl"===$_5eddzznwjh8lz1yc.getDirection(element)?rtl$1:ltr$1}},defaultTableToolbar=["tableprops","tabledelete","|","tableinsertrowbefore","tableinsertrowafter","tabledeleterow","|","tableinsertcolbefore","tableinsertcolafter","tabledeletecol"],defaultStyles={"border-collapse":"collapse",width:"100%"},defaultAttributes={border:"1"},getDefaultStyles=function(editor){return editor.getParam("table_default_styles",defaultStyles,"object")},hasAdvancedCellTab=function(editor){return editor.getParam("table_cell_advtab",!0,"boolean")},hasAdvancedRowTab=function(editor){return editor.getParam("table_row_advtab",!0,"boolean")},hasAdvancedTableTab=function(editor){return editor.getParam("table_advtab",!0,"boolean")},shouldStyleWithCss=function(editor){return editor.getParam("table_style_by_css",!1,"boolean")},getCellClassList=function(editor){return editor.getParam("table_cell_class_list",[],"array")},getRowClassList=function(editor){return editor.getParam("table_row_class_list",[],"array")},getTableClassList=function(editor){return editor.getParam("table_class_list",[],"array")},isPixelsForced=function(editor){return!1===editor.getParam("table_responsive_width")},fireNewRow=function(editor,row){return editor.fire("newrow",{node:row})},fireNewCell=function(editor,cell){return editor.fire("newcell",{node:cell})},fireObjectResizeStart=function(editor,target,width,height){editor.fire("ObjectResizeStart",{target:target,width:width,height:height})},fireObjectResized=function(editor,target,width,height){editor.fire("ObjectResized",{target:target,width:width,height:height})},TableActions=function(editor,lazyWire){var isTableBody=function(editor){return"table"===$_a3izpgldjh8lz1fy.name(getBody$1(editor))},cloneFormats=function(editor){var cloneElements=editor.getParam("table_clone_elements");return $_d1kyz8kfjh8lz1az.isString(cloneElements)?Option.some(cloneElements.split(/[ ,]/)):Array.isArray(cloneElements)?Option.some(cloneElements):Option.none()}(editor),execute=function(operation,guard,mutate,lazyWire){return function(table,target){removeDataStyle(table);var wire=lazyWire(),doc=$_6vo9a4krjh8lz1do.fromDom(editor.getDoc()),direction=TableDirection($_fe2yjsnvjh8lz1y8.directionAt),generators=$_3fxw02lqjh8lz1hp_cellOperations(mutate,doc,cloneFormats);return guard(table)?operation(wire,table,target,generators,direction).bind(function(result){return $_6b0spykcjh8lz1ao.each(result.newRows(),function(row){fireNewRow(editor,row.dom())}),$_6b0spykcjh8lz1ao.each(result.newCells(),function(cell){fireNewCell(editor,cell.dom())}),result.cursor().map(function(cell){var rng=editor.dom.createRng();return rng.setStart(cell.dom(),0),rng.setEnd(cell.dom(),0),rng})}):Option.none()}};return{deleteRow:execute($_68i0x8mtjh8lz1pt.eraseRows,function(table){var size=$_fpjoz7msjh8lz1pq_getGridSize(table);return!1===isTableBody(editor)||1<size.rows()},$_bgyjg9kejh8lz1ax.noop,lazyWire),deleteColumn:execute($_68i0x8mtjh8lz1pt.eraseColumns,function(table){var size=$_fpjoz7msjh8lz1pq_getGridSize(table);return!1===isTableBody(editor)||1<size.columns()},$_bgyjg9kejh8lz1ax.noop,lazyWire),insertRowsBefore:execute($_68i0x8mtjh8lz1pt.insertRowsBefore,$_bgyjg9kejh8lz1ax.always,$_bgyjg9kejh8lz1ax.noop,lazyWire),insertRowsAfter:execute($_68i0x8mtjh8lz1pt.insertRowsAfter,$_bgyjg9kejh8lz1ax.always,$_bgyjg9kejh8lz1ax.noop,lazyWire),insertColumnsBefore:execute($_68i0x8mtjh8lz1pt.insertColumnsBefore,$_bgyjg9kejh8lz1ax.always,$_36r49rmgjh8lz1nt_halve,lazyWire),insertColumnsAfter:execute($_68i0x8mtjh8lz1pt.insertColumnsAfter,$_bgyjg9kejh8lz1ax.always,$_36r49rmgjh8lz1nt_halve,lazyWire),mergeCells:execute($_68i0x8mtjh8lz1pt.mergeCells,$_bgyjg9kejh8lz1ax.always,$_bgyjg9kejh8lz1ax.noop,lazyWire),unmergeCells:execute($_68i0x8mtjh8lz1pt.unmergeCells,$_bgyjg9kejh8lz1ax.always,$_bgyjg9kejh8lz1ax.noop,lazyWire),pasteRowsBefore:execute($_68i0x8mtjh8lz1pt.pasteRowsBefore,$_bgyjg9kejh8lz1ax.always,$_bgyjg9kejh8lz1ax.noop,lazyWire),pasteRowsAfter:execute($_68i0x8mtjh8lz1pt.pasteRowsAfter,$_bgyjg9kejh8lz1ax.always,$_bgyjg9kejh8lz1ax.noop,lazyWire),pasteCells:execute($_68i0x8mtjh8lz1pt.pasteCells,$_bgyjg9kejh8lz1ax.always,$_bgyjg9kejh8lz1ax.noop,lazyWire)}},$_1r3m04o0jh8lz1z4_copyRows=function(table,target,generators){var list=$_ff1h20kmjh8lz1c3_fromTable(table),house=$_fxwupplkjh8lz1go.generate(list);return $_1na6n8n0jh8lz1rt_onCells(house,target).map(function(selectedCells){var slicedGrid=$_7a3bzon3jh8lz1si_toGrid(house,generators,!1).slice(selectedCells[0].row(),selectedCells[selectedCells.length-1].row()+selectedCells[selectedCells.length-1].rowspan()),slicedDetails=$_1na6n8n0jh8lz1rt_toDetailList(slicedGrid,generators);return $_2lx51jn6jh8lz1sw_copy(slicedDetails)})},global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),$_fmiiqro3jh8lz1zk_applyAlign=function(editor,elm,name){name&&editor.formatter.apply("align"+name,{},elm)},$_fmiiqro3jh8lz1zk_applyVAlign=function(editor,elm,name){name&&editor.formatter.apply("valign"+name,{},elm)},$_fmiiqro3jh8lz1zk_unApplyAlign=function(editor,elm){global$2.each("left center right".split(" "),function(name){editor.formatter.remove("align"+name,{},elm)})},$_fmiiqro3jh8lz1zk_unApplyVAlign=function(editor,elm){global$2.each("top middle bottom".split(" "),function(name){editor.formatter.remove("valign"+name,{},elm)})},$_fmiiqro3jh8lz1zk_getTDTHOverallStyle=function(dom,elm,name){var firstChildStyle;return firstChildStyle=function(firstChildStyle,elms){for(var i=0;i<elms.length;i++){var currentStyle=dom.getStyle(elms[i],name);if(void 0===firstChildStyle&&(firstChildStyle=currentStyle),firstChildStyle!==currentStyle)return""}return firstChildStyle}(firstChildStyle,dom.select("td,th",elm))},updateStyleField=function(editor,evt){var dom=editor.dom,rootControl=evt.control.rootControl,data=rootControl.toJSON(),css=dom.parseStyle(data.style);"style"===evt.control.name()?(rootControl.find("#borderStyle").value(css["border-style"]||"")[0].fire("select"),rootControl.find("#borderColor").value(css["border-color"]||"")[0].fire("change"),rootControl.find("#backgroundColor").value(css["background-color"]||"")[0].fire("change"),rootControl.find("#width").value(css.width||"").fire("change"),rootControl.find("#height").value(css.height||"").fire("change")):(css["border-style"]=data.borderStyle,css["border-color"]=data.borderColor,css["background-color"]=data.backgroundColor,css.width=data.width?addSizeSuffix(data.width):"",css.height=data.height?addSizeSuffix(data.height):""),rootControl.find("#style").value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))))},$_7mumlpo4jh8lz1zt_createStyleForm=function(editor){var createColorPickAction=function(){var colorPickerCallback=function(editor){return editor.getParam("color_picker_callback")}(editor);if(colorPickerCallback)return function(evt){return colorPickerCallback.call(editor,function(value){evt.control.value(value).fire("change")},evt.control.value())}};return{title:"Advanced",type:"form",defaults:{onchange:$_bgyjg9kejh8lz1ax.curry(updateStyleField,editor)},items:[{label:"Style",name:"style",type:"textbox"},{type:"form",padding:0,formItemDefaults:{layout:"grid",alignH:["start","right"]},defaults:{size:7},items:[{label:"Border style",type:"listbox",name:"borderStyle",width:90,onselect:$_bgyjg9kejh8lz1ax.curry(updateStyleField,editor),values:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]},{label:"Border color",type:"colorbox",name:"borderColor",onaction:createColorPickAction()},{label:"Background color",type:"colorbox",name:"backgroundColor",onaction:createColorPickAction()}]}]}},$_7mumlpo4jh8lz1zt_buildListItems=function(inputList,itemCallback,startItems){var appendItems=function(values,output){return output=output||[],global$2.each(values,function(item){var menuItem={text:item.text||item.title};item.menu?menuItem.menu=appendItems(item.menu):(menuItem.value=item.value,itemCallback&&itemCallback(menuItem)),output.push(menuItem)}),output};return appendItems(inputList,startItems||[])},$_7mumlpo4jh8lz1zt_updateStyleField=updateStyleField,$_7mumlpo4jh8lz1zt_extractAdvancedStyles=function(dom,elm){var css=dom.parseStyle(dom.getAttrib(elm,"style")),data={};return css["border-style"]&&(data.borderStyle=css["border-style"]),css["border-color"]&&(data.borderColor=css["border-color"]),css["background-color"]&&(data.backgroundColor=css["background-color"]),data.style=dom.serializeStyle(css),data},onSubmitCellForm=function(editor,cells,evt){var data,dom=editor.dom;function setAttrib(elm,name,value){value&&dom.setAttrib(elm,name,value)}function setStyle(elm,name,value){value&&dom.setStyle(elm,name,value)}$_7mumlpo4jh8lz1zt_updateStyleField(editor,evt),data=evt.control.rootControl.toJSON(),editor.undoManager.transact(function(){global$2.each(cells,function(cellElm){var elm,cssText;setAttrib(cellElm,"scope",data.scope),1===cells.length?setAttrib(cellElm,"style",data.style):(elm=cellElm,cssText=data.style,delete elm.dataset.mceStyle,elm.style.cssText+=";"+cssText),setAttrib(cellElm,"class",data.class),setStyle(cellElm,"width",addSizeSuffix(data.width)),setStyle(cellElm,"height",addSizeSuffix(data.height)),data.type&&cellElm.nodeName.toLowerCase()!==data.type&&(cellElm=dom.rename(cellElm,data.type)),1===cells.length&&($_fmiiqro3jh8lz1zk_unApplyAlign(editor,cellElm),$_fmiiqro3jh8lz1zk_unApplyVAlign(editor,cellElm)),data.align&&$_fmiiqro3jh8lz1zk_applyAlign(editor,cellElm,data.align),data.valign&&$_fmiiqro3jh8lz1zk_applyVAlign(editor,cellElm,data.valign)}),editor.focus()})},$_eo7s5go2jh8lz1ze_open=function(editor){var cellElm,data,classListCtrl,cells=[];if(cells=editor.dom.select("td[data-mce-selected],th[data-mce-selected]"),cellElm=editor.dom.getParent(editor.selection.getStart(),"td,th"),!cells.length&&cellElm&&cells.push(cellElm),cellElm=cellElm||cells[0]){data=1<cells.length?{width:"",height:"",scope:"",class:"",align:"",valign:"",style:"",type:cellElm.nodeName.toLowerCase()}:function(editor,elm){var dom=editor.dom,data={width:dom.getStyle(elm,"width")||dom.getAttrib(elm,"width"),height:dom.getStyle(elm,"height")||dom.getAttrib(elm,"height"),scope:dom.getAttrib(elm,"scope"),class:dom.getAttrib(elm,"class"),type:elm.nodeName.toLowerCase(),style:"",align:"",valign:""};return global$2.each("left center right".split(" "),function(name){editor.formatter.matchNode(elm,"align"+name)&&(data.align=name)}),global$2.each("top middle bottom".split(" "),function(name){editor.formatter.matchNode(elm,"valign"+name)&&(data.valign=name)}),hasAdvancedCellTab(editor)&&global$2.extend(data,$_7mumlpo4jh8lz1zt_extractAdvancedStyles(dom,elm)),data}(editor,cellElm),0<getCellClassList(editor).length&&(classListCtrl={name:"class",type:"listbox",label:"Class",values:$_7mumlpo4jh8lz1zt_buildListItems(getCellClassList(editor),function(item){item.value&&(item.textStyle=function(){return editor.formatter.getCssText({block:"td",classes:[item.value]})})})});var generalCellForm={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",layout:"grid",columns:2,labelGapCalc:!1,padding:0,defaults:{type:"textbox",maxWidth:50},items:[{label:"Width",name:"width",onchange:$_bgyjg9kejh8lz1ax.curry($_7mumlpo4jh8lz1zt_updateStyleField,editor)},{label:"Height",name:"height",onchange:$_bgyjg9kejh8lz1ax.curry($_7mumlpo4jh8lz1zt_updateStyleField,editor)},{label:"Cell type",name:"type",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{label:"Scope",name:"scope",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{label:"H Align",name:"align",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"V Align",name:"valign",type:"listbox",text:"None",minWidth:90,maxWidth:null,values:[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}]}]},classListCtrl]};hasAdvancedCellTab(editor)?editor.windowManager.open({title:"Cell properties",bodyType:"tabpanel",data:data,body:[{title:"General",type:"form",items:generalCellForm},$_7mumlpo4jh8lz1zt_createStyleForm(editor)],onsubmit:$_bgyjg9kejh8lz1ax.curry(onSubmitCellForm,editor,cells)}):editor.windowManager.open({title:"Cell properties",data:data,body:generalCellForm,onsubmit:$_bgyjg9kejh8lz1ax.curry(onSubmitCellForm,editor,cells)})}};function onSubmitRowForm(editor,rows,oldData,evt){var dom=editor.dom;function setAttrib(elm,name,value){value&&dom.setAttrib(elm,name,value)}$_7mumlpo4jh8lz1zt_updateStyleField(editor,evt);var data=evt.control.rootControl.toJSON();editor.undoManager.transact(function(){global$2.each(rows,function(rowElm){var elm,name,value;setAttrib(rowElm,"scope",data.scope),setAttrib(rowElm,"style",data.style),setAttrib(rowElm,"class",data.class),elm=rowElm,name="height",(value=addSizeSuffix(data.height))&&dom.setStyle(elm,name,value),data.type!==rowElm.parentNode.nodeName.toLowerCase()&&function(dom,rowElm,toType){var tableElm=dom.getParent(rowElm,"table"),oldParentElm=rowElm.parentNode,parentElm=dom.select(toType,tableElm)[0];parentElm||(parentElm=dom.create(toType),tableElm.firstChild?"CAPTION"===tableElm.firstChild.nodeName?dom.insertAfter(parentElm,tableElm.firstChild):tableElm.insertBefore(parentElm,tableElm.firstChild):tableElm.appendChild(parentElm)),parentElm.appendChild(rowElm),oldParentElm.hasChildNodes()||dom.remove(oldParentElm)}(editor.dom,rowElm,data.type),data.align!==oldData.align&&($_fmiiqro3jh8lz1zk_unApplyAlign(editor,rowElm),$_fmiiqro3jh8lz1zk_applyAlign(editor,rowElm,data.align))}),editor.focus()})}var $_1dfi9ho5jh8lz1zz_open=function(editor){var tableElm,cellElm,rowElm,classListCtrl,data,generalRowForm,dom=editor.dom,rows=[];tableElm=dom.getParent(editor.selection.getStart(),"table"),cellElm=dom.getParent(editor.selection.getStart(),"td,th"),global$2.each(tableElm.rows,function(row){global$2.each(row.cells,function(cell){if(dom.getAttrib(cell,"data-mce-selected")||cell===cellElm)return rows.push(row),!1})}),(rowElm=rows[0])&&(data=1<rows.length?{height:"",scope:"",style:"",class:"",align:"",type:rowElm.parentNode.nodeName.toLowerCase()}:function(editor,elm){var dom=editor.dom,data={height:dom.getStyle(elm,"height")||dom.getAttrib(elm,"height"),scope:dom.getAttrib(elm,"scope"),class:dom.getAttrib(elm,"class"),align:"",style:"",type:elm.parentNode.nodeName.toLowerCase()};return global$2.each("left center right".split(" "),function(name){editor.formatter.matchNode(elm,"align"+name)&&(data.align=name)}),hasAdvancedRowTab(editor)&&global$2.extend(data,$_7mumlpo4jh8lz1zt_extractAdvancedStyles(dom,elm)),data}(editor,rowElm),0<getRowClassList(editor).length&&(classListCtrl={name:"class",type:"listbox",label:"Class",values:$_7mumlpo4jh8lz1zt_buildListItems(getRowClassList(editor),function(item){item.value&&(item.textStyle=function(){return editor.formatter.getCssText({block:"tr",classes:[item.value]})})})}),generalRowForm={type:"form",columns:2,padding:0,defaults:{type:"textbox"},items:[{type:"listbox",name:"type",label:"Row type",text:"Header",maxWidth:null,values:[{text:"Header",value:"thead"},{text:"Body",value:"tbody"},{text:"Footer",value:"tfoot"}]},{type:"listbox",name:"align",label:"Alignment",text:"None",maxWidth:null,values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height"},classListCtrl]},hasAdvancedRowTab(editor)?editor.windowManager.open({title:"Row properties",data:data,bodyType:"tabpanel",body:[{title:"General",type:"form",items:generalRowForm},$_7mumlpo4jh8lz1zt_createStyleForm(editor)],onsubmit:$_bgyjg9kejh8lz1ax.curry(onSubmitRowForm,editor,rows,data)}):editor.windowManager.open({title:"Row properties",data:data,body:generalRowForm,onsubmit:$_bgyjg9kejh8lz1ax.curry(onSubmitRowForm,editor,rows,data)}))},global$3=tinymce.util.Tools.resolve("tinymce.Env"),DefaultRenderOptions={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},percentages:!0},render$1=function(rows,columns,rowHeaders,columnHeaders,renderOpts){void 0===renderOpts&&(renderOpts=DefaultRenderOptions);var table=$_6vo9a4krjh8lz1do.fromTag("table");$_3ory84lljh8lz1gx.setAll(table,renderOpts.styles),$_1mp8lglcjh8lz1fq.setAll(table,renderOpts.attributes);var tbody=$_6vo9a4krjh8lz1do.fromTag("tbody");$_6qqu1alnjh8lz1hg.append(table,tbody);for(var trs=[],i=0;i<rows;i++){for(var tr=$_6vo9a4krjh8lz1do.fromTag("tr"),j=0;j<columns;j++){var td=i<rowHeaders||j<columnHeaders?$_6vo9a4krjh8lz1do.fromTag("th"):$_6vo9a4krjh8lz1do.fromTag("td");j<columnHeaders&&$_1mp8lglcjh8lz1fq.set(td,"scope","row"),i<rowHeaders&&$_1mp8lglcjh8lz1fq.set(td,"scope","col"),$_6qqu1alnjh8lz1hg.append(td,$_6vo9a4krjh8lz1do.fromTag("br")),renderOpts.percentages&&$_3ory84lljh8lz1gx.set(td,"width",100/columns+"%"),$_6qqu1alnjh8lz1hg.append(tr,td)}trs.push(tr)}return $_d7tq5mlpjh8lz1hl.append(tbody,trs),table},get$7=function(element){return element.dom().innerHTML},$_1dtmigobjh8lz215_getOuter=function(element){var container=$_6vo9a4krjh8lz1do.fromTag("div"),clone=$_6vo9a4krjh8lz1do.fromDom(element.dom().cloneNode(!0));return $_6qqu1alnjh8lz1hg.append(container,clone),get$7(container)},placeCaretInCell=function(editor,cell){editor.selection.select(cell.dom(),!0),editor.selection.collapse(!0)},$_7a3xgho8jh8lz20d_insert=function(editor,columns,rows){var width,defaultStyles=getDefaultStyles(editor),options={styles:defaultStyles,attributes:function(editor){return editor.getParam("table_default_attributes",defaultAttributes,"object")}(editor),percentages:(width=defaultStyles.width,$_d1kyz8kfjh8lz1az.isString(width)&&-1!==width.indexOf("%")&&!isPixelsForced(editor))},table=render$1(rows,columns,0,0,options);$_1mp8lglcjh8lz1fq.set(table,"data-mce-id","__mce");var html=$_1dtmigobjh8lz215_getOuter(table);return editor.insertContent(html),$_fiygddlhjh8lz1g7.descendant(getBody$1(editor),'table[data-mce-id="__mce"]').map(function(table){return isPixelsForced(editor)&&$_3ory84lljh8lz1gx.set(table,"width",$_3ory84lljh8lz1gx.get(table,"width")),$_1mp8lglcjh8lz1fq.remove(table,"data-mce-id"),function(editor,table){$_6b0spykcjh8lz1ao.each($_coxlualejh8lz1fz.descendants(table,"tr"),function(row){fireNewRow(editor,row.dom()),$_6b0spykcjh8lz1ao.each($_coxlualejh8lz1fz.descendants(row,"th,td"),function(cell){fireNewCell(editor,cell.dom())})})}(editor,table),function(editor,tableElm){$_fiygddlhjh8lz1g7.descendant(tableElm,"td,th").each($_bgyjg9kejh8lz1ax.curry(placeCaretInCell,editor))}(editor,table),table.dom()}).getOr(null)};function styleTDTH(dom,elm,name,value){if("TD"===elm.tagName||"TH"===elm.tagName)dom.setStyle(elm,name,value);else if(elm.children)for(var i=0;i<elm.children.length;i++)styleTDTH(dom,elm.children[i],name,value)}var onSubmitTableForm=function(editor,tableElm,evt){var captionElm,data,dom=editor.dom;$_7mumlpo4jh8lz1zt_updateStyleField(editor,evt),!1===(data=evt.control.rootControl.toJSON()).class&&delete data.class,editor.undoManager.transact(function(){tableElm||(tableElm=$_7a3xgho8jh8lz20d_insert(editor,data.cols||1,data.rows||1)),function(editor,tableElm,data){var size,dom=editor.dom,attrs={},styles={};if(attrs.class=data.class,styles.height=addSizeSuffix(data.height),dom.getAttrib(tableElm,"width")&&!shouldStyleWithCss(editor)?attrs.width=(size=data.width)?size.replace(/px$/,""):"":styles.width=addSizeSuffix(data.width),shouldStyleWithCss(editor)?(styles["border-width"]=addSizeSuffix(data.border),styles["border-spacing"]=addSizeSuffix(data.cellspacing),global$2.extend(attrs,{"data-mce-border-color":data.borderColor,"data-mce-cell-padding":data.cellpadding,"data-mce-border":data.border})):global$2.extend(attrs,{border:data.border,cellpadding:data.cellpadding,cellspacing:data.cellspacing}),shouldStyleWithCss(editor)&&tableElm.children)for(var i=0;i<tableElm.children.length;i++)styleTDTH(dom,tableElm.children[i],{"border-width":addSizeSuffix(data.border),"border-color":data.borderColor,padding:addSizeSuffix(data.cellpadding)});data.style?global$2.extend(styles,dom.parseStyle(data.style)):styles=global$2.extend({},dom.parseStyle(dom.getAttrib(tableElm,"style")),styles),attrs.style=dom.serializeStyle(styles),dom.setAttribs(tableElm,attrs)}(editor,tableElm,data),(captionElm=dom.select("caption",tableElm)[0])&&!data.caption&&dom.remove(captionElm),!captionElm&&data.caption&&((captionElm=dom.create("caption")).innerHTML=global$3.ie?" ":'<br data-mce-bogus="1"/>',tableElm.insertBefore(captionElm,tableElm.firstChild)),$_fmiiqro3jh8lz1zk_unApplyAlign(editor,tableElm),data.align&&$_fmiiqro3jh8lz1zk_applyAlign(editor,tableElm,data.align),editor.focus(),editor.addVisual()})},$_4ld2ndo6jh8lz205_open=function(editor,isProps){var tableElm,colsCtrl,rowsCtrl,classListCtrl,generalTableForm,dom=editor.dom,data={};!0===isProps?(tableElm=dom.getParent(editor.selection.getStart(),"table"))&&(data=function(editor,tableElm){var dom=editor.dom,data={width:dom.getStyle(tableElm,"width")||dom.getAttrib(tableElm,"width"),height:dom.getStyle(tableElm,"height")||dom.getAttrib(tableElm,"height"),cellspacing:dom.getStyle(tableElm,"border-spacing")||dom.getAttrib(tableElm,"cellspacing"),cellpadding:dom.getAttrib(tableElm,"data-mce-cell-padding")||dom.getAttrib(tableElm,"cellpadding")||$_fmiiqro3jh8lz1zk_getTDTHOverallStyle(editor.dom,tableElm,"padding"),border:dom.getAttrib(tableElm,"data-mce-border")||dom.getAttrib(tableElm,"border")||$_fmiiqro3jh8lz1zk_getTDTHOverallStyle(editor.dom,tableElm,"border"),borderColor:dom.getAttrib(tableElm,"data-mce-border-color"),caption:!!dom.select("caption",tableElm)[0],class:dom.getAttrib(tableElm,"class")};return global$2.each("left center right".split(" "),function(name){editor.formatter.matchNode(tableElm,"align"+name)&&(data.align=name)}),hasAdvancedTableTab(editor)&&global$2.extend(data,$_7mumlpo4jh8lz1zt_extractAdvancedStyles(dom,tableElm)),data}(editor,tableElm)):(colsCtrl={label:"Cols",name:"cols"},rowsCtrl={label:"Rows",name:"rows"}),0<getTableClassList(editor).length&&(data.class&&(data.class=data.class.replace(/\s*mce\-item\-table\s*/g,"")),classListCtrl={name:"class",type:"listbox",label:"Class",values:$_7mumlpo4jh8lz1zt_buildListItems(getTableClassList(editor),function(item){item.value&&(item.textStyle=function(){return editor.formatter.getCssText({block:"table",classes:[item.value]})})})}),generalTableForm={type:"form",layout:"flex",direction:"column",labelGapCalc:"children",padding:0,items:[{type:"form",labelGapCalc:!1,padding:0,layout:"grid",columns:2,defaults:{type:"textbox",maxWidth:50},items:function(editor){return editor.getParam("table_appearance_options",!0,"boolean")}(editor)?[colsCtrl,rowsCtrl,{label:"Width",name:"width",onchange:$_bgyjg9kejh8lz1ax.curry($_7mumlpo4jh8lz1zt_updateStyleField,editor)},{label:"Height",name:"height",onchange:$_bgyjg9kejh8lz1ax.curry($_7mumlpo4jh8lz1zt_updateStyleField,editor)},{label:"Cell spacing",name:"cellspacing"},{label:"Cell padding",name:"cellpadding"},{label:"Border",name:"border"},{label:"Caption",name:"caption",type:"checkbox"}]:[colsCtrl,rowsCtrl,{label:"Width",name:"width",onchange:$_bgyjg9kejh8lz1ax.curry($_7mumlpo4jh8lz1zt_updateStyleField,editor)},{label:"Height",name:"height",onchange:$_bgyjg9kejh8lz1ax.curry($_7mumlpo4jh8lz1zt_updateStyleField,editor)}]},{label:"Alignment",name:"align",type:"listbox",text:"None",values:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},classListCtrl]},hasAdvancedTableTab(editor)?editor.windowManager.open({title:"Table properties",data:data,bodyType:"tabpanel",body:[{title:"General",type:"form",items:generalTableForm},$_7mumlpo4jh8lz1zt_createStyleForm(editor)],onsubmit:$_bgyjg9kejh8lz1ax.curry(onSubmitTableForm,editor,tableElm)}):editor.windowManager.open({title:"Table properties",data:data,body:generalTableForm,onsubmit:$_bgyjg9kejh8lz1ax.curry(onSubmitTableForm,editor,tableElm)})},each$3=global$2.each,$_cmt2k3nzjh8lz1ym_registerCommands=function(editor,actions,cellSelection,selections,clipboardRows){var isRoot=getIsRoot(editor),getSelectionStartCell=function(){return $_6vo9a4krjh8lz1do.fromDom(editor.dom.getParent(editor.selection.getStart(),"th,td"))},getTableFromCell=function(cell){return $_ee8pmfkojh8lz1ch.table(cell,isRoot)},getSize=function(table){return{width:getPixelWidth$1(table.dom()),height:getPixelWidth$1(table.dom())}},actOnSelection=function(execute){var cell=getSelectionStartCell();getTableFromCell(cell).each(function(table){var targets=$_3xfj7olxjh8lz1j2.forMenu(selections,table,cell),beforeSize=getSize(table);execute(table,targets).each(function(rng){!function(editor,oldSize,table){var newSize=getSize(table);oldSize.width===newSize.width&&oldSize.height===newSize.height||(fireObjectResizeStart(editor,table.dom(),oldSize.width,oldSize.height),fireObjectResized(editor,table.dom(),newSize.width,newSize.height))}(editor,beforeSize,table),editor.selection.setRng(rng),editor.focus(),cellSelection.clear(table),removeDataStyle(table)})})},copyRowSelection=function(execute){var cell=getSelectionStartCell();return getTableFromCell(cell).bind(function(table){var doc=$_6vo9a4krjh8lz1do.fromDom(editor.getDoc()),targets=$_3xfj7olxjh8lz1j2.forMenu(selections,table,cell),generators=$_3fxw02lqjh8lz1hp_cellOperations($_bgyjg9kejh8lz1ax.noop,doc,Option.none());return $_1r3m04o0jh8lz1z4_copyRows(table,targets,generators)})},pasteOnSelection=function(execute){clipboardRows.get().each(function(rows){var clonedRows=$_6b0spykcjh8lz1ao.map(rows,function(row){return $_zeqq4lrjh8lz1id_deep(row)}),cell=getSelectionStartCell();getTableFromCell(cell).bind(function(table){var doc=$_6vo9a4krjh8lz1do.fromDom(editor.getDoc()),generators=$_3fxw02lqjh8lz1hp_paste(doc),targets=$_3xfj7olxjh8lz1j2.pasteRows(selections,table,cell,clonedRows,generators);execute(table,targets).each(function(rng){editor.selection.setRng(rng),editor.focus(),cellSelection.clear(table)})})})};each$3({mceTableSplitCells:function(){actOnSelection(actions.unmergeCells)},mceTableMergeCells:function(){actOnSelection(actions.mergeCells)},mceTableInsertRowBefore:function(){actOnSelection(actions.insertRowsBefore)},mceTableInsertRowAfter:function(){actOnSelection(actions.insertRowsAfter)},mceTableInsertColBefore:function(){actOnSelection(actions.insertColumnsBefore)},mceTableInsertColAfter:function(){actOnSelection(actions.insertColumnsAfter)},mceTableDeleteCol:function(){actOnSelection(actions.deleteColumn)},mceTableDeleteRow:function(){actOnSelection(actions.deleteRow)},mceTableCutRow:function(grid){clipboardRows.set(copyRowSelection()),actOnSelection(actions.deleteRow)},mceTableCopyRow:function(grid){clipboardRows.set(copyRowSelection())},mceTablePasteRowBefore:function(grid){pasteOnSelection(actions.pasteRowsBefore)},mceTablePasteRowAfter:function(grid){pasteOnSelection(actions.pasteRowsAfter)},mceTableDelete:function(){var cell=$_6vo9a4krjh8lz1do.fromDom(editor.dom.getParent(editor.selection.getStart(),"th,td"));$_ee8pmfkojh8lz1ch.table(cell,isRoot).filter($_bgyjg9kejh8lz1ax.not(isRoot)).each(function(table){var cursor=$_6vo9a4krjh8lz1do.fromText("");$_6qqu1alnjh8lz1hg.after(table,cursor),$_f2hny0lojh8lz1hi.remove(table);var rng=editor.dom.createRng();rng.setStart(cursor.dom(),0),rng.setEnd(cursor.dom(),0),editor.selection.setRng(rng)})}},function(func,name){editor.addCommand(name,func)}),each$3({mceInsertTable:$_bgyjg9kejh8lz1ax.curry($_4ld2ndo6jh8lz205_open,editor),mceTableProps:$_bgyjg9kejh8lz1ax.curry($_4ld2ndo6jh8lz205_open,editor,!0),mceTableRowProps:$_bgyjg9kejh8lz1ax.curry($_1dfi9ho5jh8lz1zz_open,editor),mceTableCellProps:$_bgyjg9kejh8lz1ax.curry($_eo7s5go2jh8lz1ze_open,editor)},function(func,name){editor.addCommand(name,function(ui,val){func(val)})})},$_bdbkjodjh8lz21o_only=function(element){var parent=Option.from(element.dom().documentElement).map($_6vo9a4krjh8lz1do.fromDom).getOr(element);return{parent:$_bgyjg9kejh8lz1ax.constant(parent),view:$_bgyjg9kejh8lz1ax.constant(element),origin:$_bgyjg9kejh8lz1ax.constant(r(0,0))}},$_bdbkjodjh8lz21o_body=function(editable,chrome){return{parent:$_bgyjg9kejh8lz1ax.constant(chrome),view:$_bgyjg9kejh8lz1ax.constant(editable),origin:$_bgyjg9kejh8lz1ax.constant(r(0,0))}};function Event(fields){var struct=$_d2ojjnkijh8lz1bv.immutable.apply(null,fields),handlers=[];return{bind:function(handler){if(void 0===handler)throw"Event bind error: undefined handler";handlers.push(handler)},unbind:function(handler){handlers=$_6b0spykcjh8lz1ao.filter(handlers,function(h){return h!==handler})},trigger:function(){var event=struct.apply(null,arguments);$_6b0spykcjh8lz1ao.each(handlers,function(handler){handler(event)})}}}var $_cmo273ogjh8lz22b={create:function(typeDefs){return{registry:$_8kti2hkhjh8lz1bt.map(typeDefs,function(event){return{bind:event.bind,unbind:event.unbind}}),trigger:$_8kti2hkhjh8lz1bt.map(typeDefs,function(event){return event.trigger})}}},$_ay0s6wokjh8lz23r={mode:$_2qijvhmwjh8lz1qv.exactly(["compare","extract","mutate","sink"]),sink:$_2qijvhmwjh8lz1qv.exactly(["element","start","stop","destroy"]),api:$_2qijvhmwjh8lz1qv.exactly(["forceDrop","drop","move","delayDrop"])},$_d4gfq4omjh8lz247={resolve:$_2i90e7ncjh8lz1ux_css("ephox-dragster").resolve},handle=function(filter,handler){return function(rawEvent){if(filter(rawEvent)){var target=$_6vo9a4krjh8lz1do.fromDom(rawEvent.target),stop=function(){rawEvent.stopPropagation()},prevent=function(){rawEvent.preventDefault()},kill=$_bgyjg9kejh8lz1ax.compose(prevent,stop),evt=function(target,x,y,stop,prevent,kill,raw){return{target:$_bgyjg9kejh8lz1ax.constant(target),x:$_bgyjg9kejh8lz1ax.constant(x),y:$_bgyjg9kejh8lz1ax.constant(y),stop:stop,prevent:prevent,kill:kill,raw:$_bgyjg9kejh8lz1ax.constant(raw)}}(target,rawEvent.clientX,rawEvent.clientY,stop,prevent,kill,rawEvent);handler(evt)}}},binder=function(element,event,filter,handler,useCapture){var wrapped=handle(filter,handler);return element.dom().addEventListener(event,wrapped,useCapture),{unbind:$_bgyjg9kejh8lz1ax.curry(unbind,element,event,wrapped,useCapture)}},unbind=function(element,event,handler,useCapture){element.dom().removeEventListener(event,handler,useCapture)},$_8y86u3oojh8lz24e_bind=function(element,event,filter,handler){return binder(element,event,filter,handler,!1)},$_8y86u3oojh8lz24e_capture=function(element,event,filter,handler){return binder(element,event,filter,handler,!0)},filter$1=$_bgyjg9kejh8lz1ax.constant(!0),$_5cpulvonjh8lz24a={bind:function(element,event,handler){return $_8y86u3oojh8lz24e_bind(element,event,filter$1,handler)},capture:function(element,event,handler){return $_8y86u3oojh8lz24e_capture(element,event,filter$1,handler)}},MouseDrag=$_ay0s6wokjh8lz23r.mode({compare:function(old,nu){return r(nu.left()-old.left(),nu.top()-old.top())},extract:function(event){return Option.some(r(event.x(),event.y()))},sink:function(dragApi,settings){var blocker=function(options){var settings=$_b4x7eon1jh8lz1se.merge({layerClass:$_d4gfq4omjh8lz247.resolve("blocker")},options),div=$_6vo9a4krjh8lz1do.fromTag("div");return $_1mp8lglcjh8lz1fq.set(div,"role","presentation"),$_3ory84lljh8lz1gx.setAll(div,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),$_evf7iendjh8lz1uz.add(div,$_d4gfq4omjh8lz247.resolve("blocker")),$_evf7iendjh8lz1uz.add(div,settings.layerClass),{element:function(){return div},destroy:function(){$_f2hny0lojh8lz1hi.remove(div)}}}(settings),mdown=$_5cpulvonjh8lz24a.bind(blocker.element(),"mousedown",dragApi.forceDrop),mup=$_5cpulvonjh8lz24a.bind(blocker.element(),"mouseup",dragApi.drop),mmove=$_5cpulvonjh8lz24a.bind(blocker.element(),"mousemove",dragApi.move),mout=$_5cpulvonjh8lz24a.bind(blocker.element(),"mouseout",dragApi.delayDrop);return $_ay0s6wokjh8lz23r.sink({element:blocker.element,start:function(parent){$_6qqu1alnjh8lz1hg.append(parent,blocker.element())},stop:function(){$_f2hny0lojh8lz1hi.remove(blocker.element())},destroy:function(){blocker.destroy(),mup.unbind(),mmove.unbind(),mout.unbind(),mdown.unbind()}})},mutate:function(mutation,info){mutation.mutate(info.left(),info.top())}});function InDrag(){var previous=Option.none(),events=$_cmo273ogjh8lz22b.create({move:Event(["info"])});return{onEvent:function(event,mode){mode.extract(event).each(function(data){(function(mode,nu){var result=previous.map(function(old){return mode.compare(old,nu)});return previous=Option.some(nu),result})(mode,data).each(function(d){events.trigger.move(d)})})},reset:function(){previous=Option.none()},events:events.registry}}function Movement(){var noDragState={onEvent:function(event,mode){},reset:$_bgyjg9kejh8lz1ax.noop},inDragState=InDrag(),dragState=noDragState;return{on:function(){dragState.reset(),dragState=inDragState},off:function(){dragState.reset(),dragState=noDragState},isOn:function(){return dragState===inDragState},onEvent:function(event,mode){dragState.onEvent(event,mode)},events:inDragState.events}}var $_eu7wkootjh8lz251_last=function(fn,rate){var timer=null;return{cancel:function(){null!==timer&&(clearTimeout(timer),timer=null)},throttle:function(){var args=arguments;null!==timer&&clearTimeout(timer),timer=setTimeout(function(){fn.apply(null,args),args=timer=null},rate)}}},$_feeb1aopjh8lz24i_setup=function(mutation,mode,settings){var active=!1,events=$_cmo273ogjh8lz22b.create({start:Event([]),stop:Event([])}),movement=Movement(),drop=function(){sink.stop(),movement.isOn()&&(movement.off(),events.trigger.stop())},throttledDrop=$_eu7wkootjh8lz251_last(drop,200);movement.events.move.bind(function(event){mode.mutate(mutation,event.info())});var runIfActive=function(f){return function(){var args=Array.prototype.slice.call(arguments,0);if(active)return f.apply(null,args)}},sink=mode.sink($_ay0s6wokjh8lz23r.api({forceDrop:drop,drop:runIfActive(drop),move:runIfActive(function(event,ui){throttledDrop.cancel(),movement.onEvent(event,mode)}),delayDrop:runIfActive(throttledDrop.throttle)}),settings);return{element:sink.element,go:function(parent){sink.start(parent),movement.on(),events.trigger.start()},on:function(){active=!0},off:function(){active=!1},destroy:function(){sink.destroy()},events:events.registry}},$_dm1jluoijh8lz23a={transform:function(mutation,options){var settings=void 0!==options?options:{},mode=void 0!==settings.mode?settings.mode:MouseDrag;return $_feeb1aopjh8lz24i_setup(mutation,mode,options)}};function BarMutation(){var events=$_cmo273ogjh8lz22b.create({drag:Event(["xDelta","yDelta","target"])}),target=Option.none(),delegate=function(){var events=$_cmo273ogjh8lz22b.create({drag:Event(["xDelta","yDelta"])});return{mutate:function(x,y){events.trigger.drag(x,y)},events:events.registry}}();return delegate.events.drag.bind(function(event){target.each(function(t){events.trigger.drag(event.xDelta(),event.yDelta(),t)})}),{assign:function(t){target=Option.some(t)},get:function(){return target},mutate:delegate.mutate,events:events.registry}}var $_6z48nsowjh8lz25j={any:function(selector){return $_fiygddlhjh8lz1g7.first(selector).isSome()},ancestor:function(scope,selector,isRoot){return $_fiygddlhjh8lz1g7.ancestor(scope,selector,isRoot).isSome()},sibling:function(scope,selector){return $_fiygddlhjh8lz1g7.sibling(scope,selector).isSome()},child:function(scope,selector){return $_fiygddlhjh8lz1g7.child(scope,selector).isSome()},descendant:function(scope,selector){return $_fiygddlhjh8lz1g7.descendant(scope,selector).isSome()},closest:function(scope,selector,isRoot){return $_fiygddlhjh8lz1g7.closest(scope,selector,isRoot).isSome()}},resizeBarDragging=$_ezk1iinbjh8lz1uu.resolve("resizer-bar-dragging");function TableResize(wire,vdirection){var hdirection=$_sdnutmojh8lz1p3.height,manager=function(wire,direction,hdirection){var mutation=BarMutation(),resizing=$_dm1jluoijh8lz23a.transform(mutation,{}),hoverTable=Option.none(),getResizer=function(element,type){return Option.from($_1mp8lglcjh8lz1fq.get(element,type))};mutation.events.drag.bind(function(event){getResizer(event.target(),"data-row").each(function(_dataRow){var currentRow=$_agh84xnrjh8lz1x6.getInt(event.target(),"top");$_3ory84lljh8lz1gx.set(event.target(),"top",currentRow+event.yDelta()+"px")}),getResizer(event.target(),"data-column").each(function(_dataCol){var currentCol=$_agh84xnrjh8lz1x6.getInt(event.target(),"left");$_3ory84lljh8lz1gx.set(event.target(),"left",currentCol+event.xDelta()+"px")})});var getDelta=function(target,direction){return $_agh84xnrjh8lz1x6.getInt(target,direction)-parseInt($_1mp8lglcjh8lz1fq.get(target,"data-initial-"+direction),10)};resizing.events.stop.bind(function(){mutation.get().each(function(target){hoverTable.each(function(table){getResizer(target,"data-row").each(function(row){var delta=getDelta(target,"top");$_1mp8lglcjh8lz1fq.remove(target,"data-initial-top"),events.trigger.adjustHeight(table,delta,parseInt(row,10))}),getResizer(target,"data-column").each(function(column){var delta=getDelta(target,"left");$_1mp8lglcjh8lz1fq.remove(target,"data-initial-left"),events.trigger.adjustWidth(table,delta,parseInt(column,10))}),$_b9z1gin7jh8lz1tj.refresh(wire,table,hdirection,direction)})})});var handler=function(target,direction){events.trigger.startAdjust(),mutation.assign(target),$_1mp8lglcjh8lz1fq.set(target,"data-initial-"+direction,parseInt($_3ory84lljh8lz1gx.get(target,direction),10)),$_evf7iendjh8lz1uz.add(target,resizeBarDragging),$_3ory84lljh8lz1gx.set(target,"opacity","0.2"),resizing.go(wire.parent())},mousedown=$_5cpulvonjh8lz24a.bind(wire.parent(),"mousedown",function(event){$_b9z1gin7jh8lz1tj.isRowBar(event.target())&&handler(event.target(),"top"),$_b9z1gin7jh8lz1tj.isColBar(event.target())&&handler(event.target(),"left")}),isRoot=function(e){return $_2eywnlkvjh8lz1e8.eq(e,wire.view())},mouseover=$_5cpulvonjh8lz24a.bind(wire.view(),"mouseover",function(event){"table"===$_a3izpgldjh8lz1fy.name(event.target())||$_6z48nsowjh8lz25j.closest(event.target(),"table",isRoot)?(hoverTable="table"===$_a3izpgldjh8lz1fy.name(event.target())?Option.some(event.target()):$_fiygddlhjh8lz1g7.ancestor(event.target(),"table",isRoot)).each(function(ht){$_b9z1gin7jh8lz1tj.refresh(wire,ht,hdirection,direction)}):$_brbde9lgjh8lz1g4.inBody(event.target())&&$_b9z1gin7jh8lz1tj.destroy(wire)}),events=$_cmo273ogjh8lz22b.create({adjustHeight:Event(["table","delta","row"]),adjustWidth:Event(["table","delta","column"]),startAdjust:Event([])});return{destroy:function(){mousedown.unbind(),mouseover.unbind(),resizing.destroy(),$_b9z1gin7jh8lz1tj.destroy(wire)},refresh:function(tbl){$_b9z1gin7jh8lz1tj.refresh(wire,tbl,hdirection,direction)},on:resizing.on,off:resizing.off,hideBars:$_bgyjg9kejh8lz1ax.curry($_b9z1gin7jh8lz1tj.hide,wire),showBars:$_bgyjg9kejh8lz1ax.curry($_b9z1gin7jh8lz1tj.show,wire),events:events.registry}}(wire,vdirection,hdirection),events=$_cmo273ogjh8lz22b.create({beforeResize:Event(["table"]),afterResize:Event(["table"]),startDrag:Event([])});return manager.events.adjustHeight.bind(function(event){events.trigger.beforeResize(event.table());var delta=hdirection.delta(event.delta(),event.table());$_7x5dznnjh8lz1wh_adjustHeight(event.table(),delta,event.row(),hdirection),events.trigger.afterResize(event.table())}),manager.events.startAdjust.bind(function(event){events.trigger.startDrag()}),manager.events.adjustWidth.bind(function(event){events.trigger.beforeResize(event.table());var delta=vdirection.delta(event.delta(),event.table());$_7x5dznnjh8lz1wh_adjustWidth(event.table(),delta,event.column(),vdirection),events.trigger.afterResize(event.table())}),{on:manager.on,off:manager.off,hideBars:manager.hideBars,showBars:manager.showBars,destroy:manager.destroy,events:events.registry}}var $_848v6boxjh8lz25l_get=function(editor,container){return editor.inline?$_bdbkjodjh8lz21o_body(getBody$1(editor),function(){var container=$_6vo9a4krjh8lz1do.fromTag("div");return $_3ory84lljh8lz1gx.setAll(container,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),$_6qqu1alnjh8lz1hg.append($_brbde9lgjh8lz1g4.body(),container),container}()):$_bdbkjodjh8lz21o_only($_6vo9a4krjh8lz1do.fromDom(editor.getDoc()))},$_848v6boxjh8lz25l_remove=function(editor,wire){editor.inline&&$_f2hny0lojh8lz1hi.remove(wire.parent())},ResizeHandler=function(editor){var startW,startRawW,selectionRng=Option.none(),resize=Option.none(),wire=Option.none(),percentageBasedSizeRegex=/(\d+(\.\d+)?)%/,isTable=function(elm){return"TABLE"===elm.nodeName};return editor.on("init",function(){var direction=TableDirection($_fe2yjsnvjh8lz1y8.directionAt),rawWire=$_848v6boxjh8lz25l_get(editor);if(wire=Option.some(rawWire),function(editor){var objectResizing=editor.getParam("object_resizing",!0);return"table"===objectResizing||objectResizing}(editor)&&function(editor){return editor.getParam("table_resize_bars",!0,"boolean")}(editor)){var sz=TableResize(rawWire,direction);sz.on(),sz.events.startDrag.bind(function(event){selectionRng=Option.some(editor.selection.getRng())}),sz.events.beforeResize.bind(function(event){var rawTable=event.table().dom();fireObjectResizeStart(editor,rawTable,getPixelWidth$1(rawTable),getPixelHeight(rawTable))}),sz.events.afterResize.bind(function(event){var table=event.table(),rawTable=table.dom();removeDataStyle(table),selectionRng.each(function(rng){editor.selection.setRng(rng),editor.focus()}),fireObjectResized(editor,rawTable,getPixelWidth$1(rawTable),getPixelHeight(rawTable)),editor.undoManager.add()}),resize=Option.some(sz)}}),editor.on("ObjectResizeStart",function(e){var elm,targetElm=e.target;isTable(targetElm)&&(startW=e.width,elm=targetElm,startRawW=editor.dom.getStyle(elm,"width")||editor.dom.getAttrib(elm,"width"))}),editor.on("ObjectResized",function(e){var targetElm=e.target;if(isTable(targetElm)){var table=targetElm;if(percentageBasedSizeRegex.test(startRawW)){var percentW=parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]),targetPercentW=e.width*percentW/startW;editor.dom.setStyle(table,"width",targetPercentW+"%")}else{var newCellSizes_1=[];global$2.each(table.rows,function(row){global$2.each(row.cells,function(cell){var width=editor.dom.getStyle(cell,"width",!0);newCellSizes_1.push({cell:cell,width:width})})}),global$2.each(newCellSizes_1,function(newCellSize){editor.dom.setStyle(newCellSize.cell,"width",newCellSize.width),editor.dom.setAttrib(newCellSize.cell,"width",null)})}}}),{lazyResize:function(){return resize},lazyWire:function(){return wire.getOr($_bdbkjodjh8lz21o_only($_6vo9a4krjh8lz1do.fromDom(editor.getBody())))},destroy:function(){resize.each(function(sz){sz.destroy()}),wire.each(function(w){$_848v6boxjh8lz25l_remove(editor,w)})}}},folder$1=function(fold){return{fold:fold}},$_1x3ywmp0jh8lz26n_none=function(current){return folder$1(function(n,f,m,l){return n(current)})},$_1x3ywmp0jh8lz26n_first=function(current){return folder$1(function(n,f,m,l){return f(current)})},$_1x3ywmp0jh8lz26n_middle=function(current,target){return folder$1(function(n,f,m,l){return m(current,target)})},$_1x3ywmp0jh8lz26n_last=function(current){return folder$1(function(n,f,m,l){return l(current)})},detect$4=function(current,isRoot){return $_ee8pmfkojh8lz1ch.table(current,isRoot).bind(function(table){var all=$_ee8pmfkojh8lz1ch.cells(table);return $_6b0spykcjh8lz1ao.findIndex(all,function(x){return $_2eywnlkvjh8lz1e8.eq(current,x)}).map(function(ind){return{index:$_bgyjg9kejh8lz1ax.constant(ind),all:$_bgyjg9kejh8lz1ax.constant(all)}})})},$_4luh0iozjh8lz26g_next=function(current,isRoot){return detect$4(current,isRoot).fold(function(){return $_1x3ywmp0jh8lz26n_none(current)},function(info){return info.index()+1<info.all().length?$_1x3ywmp0jh8lz26n_middle(current,info.all()[info.index()+1]):$_1x3ywmp0jh8lz26n_last(current)})},$_4luh0iozjh8lz26g_prev=function(current,isRoot){return detect$4(current,isRoot).fold(function(){return $_1x3ywmp0jh8lz26n_none()},function(info){return 0<=info.index()-1?$_1x3ywmp0jh8lz26n_middle(current,info.all()[info.index()-1]):$_1x3ywmp0jh8lz26n_first(current)})},adt=$_659si2mejh8lz1n9_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$_eviq86p2jh8lz26w={before:adt.before,on:adt.on,after:adt.after,cata:function(subject,onBefore,onOn,onAfter){return subject.fold(onBefore,onOn,onAfter)},getStart:function(situ){return situ.fold($_bgyjg9kejh8lz1ax.identity,$_bgyjg9kejh8lz1ax.identity,$_bgyjg9kejh8lz1ax.identity)}},type$2=$_659si2mejh8lz1n9_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),range$2=$_d2ojjnkijh8lz1bv.immutable("start","soffset","finish","foffset"),$_8ehldap1jh8lz26p={domRange:type$2.domRange,relative:type$2.relative,exact:type$2.exact,exactFromRange:function(simRange){return type$2.exact(simRange.start(),simRange.soffset(),simRange.finish(),simRange.foffset())},range:range$2,getWin:function(selection){var start=function(selection){return selection.match({domRange:function(rng){return $_6vo9a4krjh8lz1do.fromDom(rng.startContainer)},relative:function(startSitu,finishSitu){return $_eviq86p2jh8lz26w.getStart(startSitu)},exact:function(start,soffset,finish,foffset){return start}})}(selection);return $_4hc7u2ktjh8lz1dv.defaultView(start)}},makeRange=function(start,soffset,finish,foffset){var rng=$_4hc7u2ktjh8lz1dv.owner(start).dom().createRange();return rng.setStart(start.dom(),soffset),rng.setEnd(finish.dom(),foffset),rng},$_2h2fhyp4jh8lz27b_after=function(start,soffset,finish,foffset){var r=makeRange(start,soffset,finish,foffset),same=$_2eywnlkvjh8lz1e8.eq(start,finish)&&soffset===foffset;return r.collapsed&&!same},selectNodeContentsUsing=function(rng,element){rng.selectNodeContents(element.dom())},deleteContents=function(rng){rng.deleteContents()},toRect=function(rect){return{left:$_bgyjg9kejh8lz1ax.constant(rect.left),top:$_bgyjg9kejh8lz1ax.constant(rect.top),right:$_bgyjg9kejh8lz1ax.constant(rect.right),bottom:$_bgyjg9kejh8lz1ax.constant(rect.bottom),width:$_bgyjg9kejh8lz1ax.constant(rect.width),height:$_bgyjg9kejh8lz1ax.constant(rect.height)}},$_4fhpzqp6jh8lz27h={create:function(win){return win.document.createRange()},replaceWith:function(rng,fragment){deleteContents(rng),rng.insertNode(fragment.dom())},selectNodeContents:function(win,element){var rng=win.document.createRange();return selectNodeContentsUsing(rng,element),rng},selectNodeContentsUsing:selectNodeContentsUsing,relativeToNative:function(win,startSitu,finishSitu){var rng,range=win.document.createRange();return rng=range,startSitu.fold(function(e){rng.setStartBefore(e.dom())},function(e,o){rng.setStart(e.dom(),o)},function(e){rng.setStartAfter(e.dom())}),function(rng,situ){situ.fold(function(e){rng.setEndBefore(e.dom())},function(e,o){rng.setEnd(e.dom(),o)},function(e){rng.setEndAfter(e.dom())})}(range,finishSitu),range},exactToNative:function(win,start,soffset,finish,foffset){var rng=win.document.createRange();return rng.setStart(start.dom(),soffset),rng.setEnd(finish.dom(),foffset),rng},deleteContents:deleteContents,cloneFragment:function(rng){var fragment=rng.cloneContents();return $_6vo9a4krjh8lz1do.fromDom(fragment)},getFirstRect:function(rng){var rects=rng.getClientRects(),rect=0<rects.length?rects[0]:rng.getBoundingClientRect();return 0<rect.width||0<rect.height?Option.some(rect).map(toRect):Option.none()},getBounds:function(rng){var rect=rng.getBoundingClientRect();return 0<rect.width||0<rect.height?Option.some(rect).map(toRect):Option.none()},isWithin:function(outerRange,innerRange){return innerRange.compareBoundaryPoints(outerRange.END_TO_START,outerRange)<1&&-1<innerRange.compareBoundaryPoints(outerRange.START_TO_END,outerRange)},toString:function(rng){return rng.toString()}},adt$1=$_659si2mejh8lz1n9_generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),fromRange=function(win,type,range){return type($_6vo9a4krjh8lz1do.fromDom(range.startContainer),range.startOffset,$_6vo9a4krjh8lz1do.fromDom(range.endContainer),range.endOffset)},diagnose=function(win,selection){return function(win,ranges){var rng=ranges.ltr();return rng.collapsed?ranges.rtl().filter(function(rev){return!1===rev.collapsed}).map(function(rev){return adt$1.rtl($_6vo9a4krjh8lz1do.fromDom(rev.endContainer),rev.endOffset,$_6vo9a4krjh8lz1do.fromDom(rev.startContainer),rev.startOffset)}).getOrThunk(function(){return fromRange(0,adt$1.ltr,rng)}):fromRange(0,adt$1.ltr,rng)}(0,function(win,selection){return selection.match({domRange:function(rng){return{ltr:$_bgyjg9kejh8lz1ax.constant(rng),rtl:Option.none}},relative:function(startSitu,finishSitu){return{ltr:$_aela9fl1jh8lz1es_cached(function(){return $_4fhpzqp6jh8lz27h.relativeToNative(win,startSitu,finishSitu)}),rtl:$_aela9fl1jh8lz1es_cached(function(){return Option.some($_4fhpzqp6jh8lz27h.relativeToNative(win,finishSitu,startSitu))})}},exact:function(start,soffset,finish,foffset){return{ltr:$_aela9fl1jh8lz1es_cached(function(){return $_4fhpzqp6jh8lz27h.exactToNative(win,start,soffset,finish,foffset)}),rtl:$_aela9fl1jh8lz1es_cached(function(){return Option.some($_4fhpzqp6jh8lz27h.exactToNative(win,finish,foffset,start,soffset))})}}})}(win,selection))},$_dcfxf3p7jh8lz27p={ltr:adt$1.ltr,rtl:adt$1.rtl,diagnose:diagnose,asLtrRange:function(win,selection){return diagnose(win,selection).match({ltr:function(start,soffset,finish,foffset){var rng=win.document.createRange();return rng.setStart(start.dom(),soffset),rng.setEnd(finish.dom(),foffset),rng},rtl:function(start,soffset,finish,foffset){var rng=win.document.createRange();return rng.setStart(finish.dom(),foffset),rng.setEnd(start.dom(),soffset),rng}})}},$_audrxxpajh8lz28a_inRect=function(rect,x,y){return x>=rect.left&&x<=rect.right&&y>=rect.top&&y<=rect.bottom},$_audrxxpajh8lz28a_searchForPoint=function(rectForOffset,x,y,maxX,length){if(0===length)return 0;if(x===maxX)return length-1;for(var xDelta=maxX,i=1;i<length;i++){var rect=rectForOffset(i),curDeltaX=Math.abs(x-rect.left);if(y>rect.bottom);else{if(y<rect.top||xDelta<curDeltaX)return i-1;xDelta=curDeltaX}}return 0},$_g2tw93pbjh8lz28c={locate:function(doc,node,x,y){var r=doc.dom().createRange();r.selectNode(node.dom());var rects=r.getClientRects();return $_clgylhn2jh8lz1sg_findMap(rects,function(rect){return $_audrxxpajh8lz28a_inRect(rect,x,y)?Option.some(rect):Option.none()}).map(function(rect){return function(doc,textnode,x,y,rect){var rangeForOffset=function(offset){var r=doc.dom().createRange();return r.setStart(textnode.dom(),offset),r.collapse(!0),r},length=$_bri5anlujh8lz1in.get(textnode).length,offset=$_audrxxpajh8lz28a_searchForPoint(function(offset){return rangeForOffset(offset).getBoundingClientRect()},x,y,rect.right,length);return rangeForOffset(offset)}(doc,node,x,y,rect)})}},searchInChildren=function(doc,node,x,y){var r=doc.dom().createRange(),nodes=$_4hc7u2ktjh8lz1dv.children(node);return $_clgylhn2jh8lz1sg_findMap(nodes,function(n){return r.selectNode(n.dom()),$_audrxxpajh8lz28a_inRect(r.getBoundingClientRect(),x,y)?locateNode(doc,n,x,y):Option.none()})},locateNode=function(doc,node,x,y){return($_a3izpgldjh8lz1fy.isText(node)?$_g2tw93pbjh8lz28c.locate:searchInChildren)(doc,node,x,y)},$_31ujrcp9jh8lz285_locate=function(doc,node,x,y){var r=doc.dom().createRange();r.selectNode(node.dom());var rect=r.getBoundingClientRect(),boundedX=Math.max(rect.left,Math.min(rect.right,x)),boundedY=Math.max(rect.top,Math.min(rect.bottom,y));return locateNode(doc,node,boundedX,boundedY)},getCollapseDirection=function(rect,x){return x-rect.left<rect.right-x},createCollapsedNode=function(doc,target,collapseDirection){var r=doc.dom().createRange();return r.selectNode(target.dom()),r.collapse(collapseDirection),r},locateInElement=function(doc,node,x){var cursorRange=doc.dom().createRange();cursorRange.selectNode(node.dom());var rect=cursorRange.getBoundingClientRect(),collapseDirection=getCollapseDirection(rect,x);return(!0===collapseDirection?$_fpdn73lsjh8lz1ig.first:$_fpdn73lsjh8lz1ig.last)(node).map(function(target){return createCollapsedNode(doc,target,collapseDirection)})},locateInEmpty=function(doc,node,x){var rect=node.dom().getBoundingClientRect(),collapseDirection=getCollapseDirection(rect,x);return Option.some(createCollapsedNode(doc,node,collapseDirection))},$_d2lo8npcjh8lz28i_search=function(doc,node,x){return(0===$_4hc7u2ktjh8lz1dv.children(node).length?locateInEmpty:locateInElement)(doc,node,x)},availableSearch=document.caretPositionFromPoint?function(doc,x,y){return Option.from(doc.dom().caretPositionFromPoint(x,y)).bind(function(pos){if(null===pos.offsetNode)return Option.none();var r=doc.dom().createRange();return r.setStart(pos.offsetNode,pos.offset),r.collapse(),Option.some(r)})}:document.caretRangeFromPoint?function(doc,x,y){return Option.from(doc.dom().caretRangeFromPoint(x,y))}:function(doc,x,y){return $_6vo9a4krjh8lz1do.fromPoint(doc,x,y).bind(function(elem){var fallback=function(){return $_d2lo8npcjh8lz28i_search(doc,elem,x)};return 0===$_4hc7u2ktjh8lz1dv.children(elem).length?fallback():function(doc,node,x,y){var r=doc.dom().createRange();r.selectNode(node.dom());var rect=r.getBoundingClientRect(),boundedX=Math.max(rect.left,Math.min(rect.right,x)),boundedY=Math.max(rect.top,Math.min(rect.bottom,y));return $_31ujrcp9jh8lz285_locate(doc,node,boundedX,boundedY)}(doc,elem,x,y).orThunk(fallback)})},$_27o8otp8jh8lz27z_fromPoint=function(win,x,y){var doc=$_6vo9a4krjh8lz1do.fromDom(win.document);return availableSearch(doc,x,y).map(function(rng){return $_8ehldap1jh8lz26p.range($_6vo9a4krjh8lz1do.fromDom(rng.startContainer),rng.startOffset,$_6vo9a4krjh8lz1do.fromDom(rng.endContainer),rng.endOffset)})},beforeSpecial=function(element,offset){var name=$_a3izpgldjh8lz1fy.name(element);return"input"===name?$_eviq86p2jh8lz26w.after(element):$_6b0spykcjh8lz1ao.contains(["br","img"],name)?0===offset?$_eviq86p2jh8lz26w.before(element):$_eviq86p2jh8lz26w.after(element):$_eviq86p2jh8lz26w.on(element,offset)},preprocessRelative=function(startSitu,finishSitu){var start=startSitu.fold($_eviq86p2jh8lz26w.before,beforeSpecial,$_eviq86p2jh8lz26w.after),finish=finishSitu.fold($_eviq86p2jh8lz26w.before,beforeSpecial,$_eviq86p2jh8lz26w.after);return $_8ehldap1jh8lz26p.relative(start,finish)},preprocessExact=function(start,soffset,finish,foffset){var startSitu=beforeSpecial(start,soffset),finishSitu=beforeSpecial(finish,foffset);return $_8ehldap1jh8lz26p.relative(startSitu,finishSitu)},$_dvaskhpejh8lz28q_preprocess=function(selection){return selection.match({domRange:function(rng){var start=$_6vo9a4krjh8lz1do.fromDom(rng.startContainer),finish=$_6vo9a4krjh8lz1do.fromDom(rng.endContainer);return preprocessExact(start,rng.startOffset,finish,rng.endOffset)},relative:preprocessRelative,exact:preprocessExact})},$_dvaskhpejh8lz28q_preprocessRelative=preprocessRelative,$_dvaskhpejh8lz28q_preprocessExact=preprocessExact,doSetNativeRange=function(win,rng){Option.from(win.getSelection()).each(function(selection){selection.removeAllRanges(),selection.addRange(rng)})},doSetRange=function(win,start,soffset,finish,foffset){var rng=$_4fhpzqp6jh8lz27h.exactToNative(win,start,soffset,finish,foffset);doSetNativeRange(win,rng)},setRangeFromRelative=function(win,relative){return $_dcfxf3p7jh8lz27p.diagnose(win,relative).match({ltr:function(start,soffset,finish,foffset){doSetRange(win,start,soffset,finish,foffset)},rtl:function(start,soffset,finish,foffset){var selection=win.getSelection();selection.setBaseAndExtent?selection.setBaseAndExtent(start.dom(),soffset,finish.dom(),foffset):selection.extend?(selection.collapse(start.dom(),soffset),selection.extend(finish.dom(),foffset)):doSetRange(win,finish,foffset,start,soffset)}})},doGetExact=function(selection){var anchorNode=$_6vo9a4krjh8lz1do.fromDom(selection.anchorNode),focusNode=$_6vo9a4krjh8lz1do.fromDom(selection.focusNode);return $_2h2fhyp4jh8lz27b_after(anchorNode,selection.anchorOffset,focusNode,selection.focusOffset)?Option.some($_8ehldap1jh8lz26p.range($_6vo9a4krjh8lz1do.fromDom(selection.anchorNode),selection.anchorOffset,$_6vo9a4krjh8lz1do.fromDom(selection.focusNode),selection.focusOffset)):function(selection){if(0<selection.rangeCount){var firstRng=selection.getRangeAt(0),lastRng=selection.getRangeAt(selection.rangeCount-1);return Option.some($_8ehldap1jh8lz26p.range($_6vo9a4krjh8lz1do.fromDom(firstRng.startContainer),firstRng.startOffset,$_6vo9a4krjh8lz1do.fromDom(lastRng.endContainer),lastRng.endOffset))}return Option.none()}(selection)},getExact=function(win){return Option.from(win.getSelection()).filter(function(sel){return 0<sel.rangeCount}).bind(doGetExact)},$_3efg7cp3jh8lz272_setExact=function(win,start,soffset,finish,foffset){var relative=$_dvaskhpejh8lz28q_preprocessExact(start,soffset,finish,foffset);setRangeFromRelative(win,relative)},$_3efg7cp3jh8lz272_get=function(win){return getExact(win).map(function(range){return $_8ehldap1jh8lz26p.exact(range.start(),range.soffset(),range.finish(),range.foffset())})},$_3efg7cp3jh8lz272_setRelative=function(win,startSitu,finishSitu){var relative=$_dvaskhpejh8lz28q_preprocessRelative(startSitu,finishSitu);setRangeFromRelative(win,relative)},$_3efg7cp3jh8lz272_toNative=function(selection){var win=$_8ehldap1jh8lz26p.getWin(selection).dom(),getDomRange=function(start,soffset,finish,foffset){return $_4fhpzqp6jh8lz27h.exactToNative(win,start,soffset,finish,foffset)},filtered=$_dvaskhpejh8lz28q_preprocess(selection);return $_dcfxf3p7jh8lz27p.diagnose(win,filtered).match({ltr:getDomRange,rtl:getDomRange})},$_3efg7cp3jh8lz272_setToElement=function(win,element){var rng=$_4fhpzqp6jh8lz27h.selectNodeContents(win,element);doSetNativeRange(win,rng)},$_3efg7cp3jh8lz272_clear=function(win){win.getSelection().removeAllRanges()},$_3efg7cp3jh8lz272_getFirstRect=function(win,selection){var rng=$_dcfxf3p7jh8lz27p.asLtrRange(win,selection);return $_4fhpzqp6jh8lz27h.getFirstRect(rng)},$_3efg7cp3jh8lz272_getAtPoint=function(win,x,y){return $_27o8otp8jh8lz27z_fromPoint(win,x,y)},global$4=tinymce.util.Tools.resolve("tinymce.util.VK"),forward=function(editor,isRoot,cell,lazyWire){return go(editor,isRoot,$_4luh0iozjh8lz26g_next(cell),lazyWire)},backward=function(editor,isRoot,cell,lazyWire){return go(editor,isRoot,$_4luh0iozjh8lz26g_prev(cell),lazyWire)},getCellFirstCursorPosition=function(editor,cell){var selection=$_8ehldap1jh8lz26p.exact(cell,0,cell,0);return $_3efg7cp3jh8lz272_toNative(selection)},go=function(editor,isRoot,cell,actions,lazyWire){return cell.fold(Option.none,Option.none,function(current,next){return $_fpdn73lsjh8lz1ig.first(next).map(function(cell){return getCellFirstCursorPosition(0,cell)})},function(current){return $_ee8pmfkojh8lz1ch.table(current,isRoot).bind(function(table){var targets=$_3xfj7olxjh8lz1j2.noMenu(current);return editor.undoManager.transact(function(){actions.insertRowsAfter(table,targets)}),function(editor,table){var rows=$_coxlualejh8lz1fz.descendants(table,"tr");return $_6b0spykcjh8lz1ao.last(rows).bind(function(last){return $_fiygddlhjh8lz1g7.descendant(last,"td,th").map(function(first){return getCellFirstCursorPosition(0,first)})})}(0,table)})})},rootElements=["table","li","dl"],$_4jcvbhoyjh8lz25x_handle=function(event,editor,actions,lazyWire){if(event.keyCode===global$4.TAB){var body_1=getBody$1(editor),isRoot_1=function(element){var name=$_a3izpgldjh8lz1fy.name(element);return $_2eywnlkvjh8lz1e8.eq(element,body_1)||$_6b0spykcjh8lz1ao.contains(rootElements,name)},rng=editor.selection.getRng();if(rng.collapsed){var start=$_6vo9a4krjh8lz1do.fromDom(rng.startContainer);$_ee8pmfkojh8lz1ch.cell(start,isRoot_1).each(function(cell){event.preventDefault(),(event.shiftKey?backward:forward)(editor,isRoot_1,cell,actions,lazyWire).each(function(range){editor.selection.setRng(range)})})}}},$_8xnxafpijh8lz29y={response:$_d2ojjnkijh8lz1bv.immutable("selection","kill")},isKey=function(key){return function(keycode){return keycode===key}},isUp=isKey(38),isDown=isKey(40),$_5bctktpjjh8lz2a1={ltr:{isBackward:isKey(37),isForward:isKey(39)},rtl:{isBackward:isKey(39),isForward:isKey(37)},isUp:isUp,isDown:isDown,isNavigation:function(keycode){return 37<=keycode&&keycode<=40}},$_45u5rqpljh8lz2ah_convertToRange=function(win,selection){var rng=$_dcfxf3p7jh8lz27p.asLtrRange(win,selection);return{start:$_bgyjg9kejh8lz1ax.constant($_6vo9a4krjh8lz1do.fromDom(rng.startContainer)),soffset:$_bgyjg9kejh8lz1ax.constant(rng.startOffset),finish:$_bgyjg9kejh8lz1ax.constant($_6vo9a4krjh8lz1do.fromDom(rng.endContainer)),foffset:$_bgyjg9kejh8lz1ax.constant(rng.endOffset)}},$_45u5rqpljh8lz2ah_makeSitus=function(start,soffset,finish,foffset){return{start:$_bgyjg9kejh8lz1ax.constant($_eviq86p2jh8lz26w.on(start,soffset)),finish:$_bgyjg9kejh8lz1ax.constant($_eviq86p2jh8lz26w.on(finish,foffset))}},get$10=($_a6om0dl0jh8lz1ep.detect().browser.isSafari(),function(_doc){var doc=void 0!==_doc?_doc.dom():document,x=doc.body.scrollLeft||doc.documentElement.scrollLeft,y=doc.body.scrollTop||doc.documentElement.scrollTop;return r(x,y)}),$_d8doq8pmjh8lz2ay_get=get$10,$_d8doq8pmjh8lz2ay_by=function(x,y,_doc){(void 0!==_doc?_doc.dom():document).defaultView.scrollBy(x,y)};function WindowBridge(win){return{elementFromPoint:function(x,y){return $_6vo9a4krjh8lz1do.fromPoint($_6vo9a4krjh8lz1do.fromDom(win.document),x,y)},getRect:function(element){return element.dom().getBoundingClientRect()},getRangedRect:function(start,soffset,finish,foffset){var sel=$_8ehldap1jh8lz26p.exact(start,soffset,finish,foffset);return $_3efg7cp3jh8lz272_getFirstRect(win,sel).map(function(structRect){return $_8kti2hkhjh8lz1bt.map(structRect,$_bgyjg9kejh8lz1ax.apply)})},getSelection:function(){return $_3efg7cp3jh8lz272_get(win).map(function(exactAdt){return $_45u5rqpljh8lz2ah_convertToRange(win,exactAdt)})},fromSitus:function(situs){var relative=$_8ehldap1jh8lz26p.relative(situs.start(),situs.finish());return $_45u5rqpljh8lz2ah_convertToRange(win,relative)},situsFromPoint:function(x,y){return $_3efg7cp3jh8lz272_getAtPoint(win,x,y).map(function(exact){return{start:$_bgyjg9kejh8lz1ax.constant($_eviq86p2jh8lz26w.on(exact.start(),exact.soffset())),finish:$_bgyjg9kejh8lz1ax.constant($_eviq86p2jh8lz26w.on(exact.finish(),exact.foffset()))}})},clearSelection:function(){$_3efg7cp3jh8lz272_clear(win)},setSelection:function(sel){$_3efg7cp3jh8lz272_setExact(win,sel.start(),sel.soffset(),sel.finish(),sel.foffset())},setRelativeSelection:function(start,finish){$_3efg7cp3jh8lz272_setRelative(win,start,finish)},selectContents:function(element){$_3efg7cp3jh8lz272_setToElement(win,element)},getInnerHeight:function(){return win.innerHeight},getScrollY:function(){return $_d8doq8pmjh8lz2ay_get($_6vo9a4krjh8lz1do.fromDom(win.document)).top()},scrollBy:function(x,y){$_d8doq8pmjh8lz2ay_by(x,y,$_6vo9a4krjh8lz1do.fromDom(win.document))}}}var detect$5=function(container,isRoot,start,finish,selectRange){return $_2eywnlkvjh8lz1e8.eq(start,finish)?Option.none():$_5tpv0tm0jh8lz1jt_identify(start,finish,isRoot).bind(function(cellSel){var boxes=cellSel.boxes().getOr([]);return 0<boxes.length?(selectRange(container,boxes,cellSel.start(),cellSel.finish()),Option.some($_8xnxafpijh8lz29y.response(Option.some($_45u5rqpljh8lz2ah_makeSitus(start,0,start,$_6759o9ltjh8lz1ij_getEnd(start))),!0))):Option.none()})},$_2hlk4dpnjh8lz2b8={sync:function(container,isRoot,start,soffset,finish,foffset,selectRange){return $_2eywnlkvjh8lz1e8.eq(start,finish)&&soffset===foffset?Option.none():$_fiygddlhjh8lz1g7.closest(start,"td,th",isRoot).bind(function(s){return $_fiygddlhjh8lz1g7.closest(finish,"td,th",isRoot).bind(function(f){return detect$5(container,isRoot,s,f,selectRange)})})},detect:detect$5,update:function(rows,columns,container,selected,annotations){return $_5tpv0tm0jh8lz1jt_shiftSelection(selected,rows,columns,annotations.firstSelectedSelector(),annotations.lastSelectedSelector()).map(function(newSels){return annotations.clear(container),annotations.selectRange(container,newSels.boxes(),newSels.start(),newSels.finish()),newSels.boxes()})}},nu$3=$_d2ojjnkijh8lz1bv.immutableBag(["left","top","right","bottom"],[]),$_8hoedhpqjh8lz2ck={nu:nu$3,moveUp:function(caret,amount){return nu$3({left:caret.left(),top:caret.top()-amount,right:caret.right(),bottom:caret.bottom()-amount})},moveDown:function(caret,amount){return nu$3({left:caret.left(),top:caret.top()+amount,right:caret.right(),bottom:caret.bottom()+amount})},moveBottomTo:function(caret,bottom){var height=caret.bottom()-caret.top();return nu$3({left:caret.left(),top:bottom-height,right:caret.right(),bottom:bottom})},moveTopTo:function(caret,top){var height=caret.bottom()-caret.top();return nu$3({left:caret.left(),top:top,right:caret.right(),bottom:top+height})},getTop:function(caret){return caret.top()},getBottom:function(caret){return caret.bottom()},translate:function(caret,xDelta,yDelta){return nu$3({left:caret.left()+xDelta,top:caret.top()+yDelta,right:caret.right()+xDelta,bottom:caret.bottom()+yDelta})},toString:function(caret){return"("+caret.left()+", "+caret.top()+") -> ("+caret.right()+", "+caret.bottom()+")"}},toCaret=function(rect){return $_8hoedhpqjh8lz2ck.nu({left:rect.left,top:rect.top,right:rect.right,bottom:rect.bottom})},getElemBox=function(bridge,element){return Option.some(bridge.getRect(element))},$_8dyzo9prjh8lz2ct_getBoxAt=function(bridge,element,offset){return $_a3izpgldjh8lz1fy.isElement(element)?getElemBox(bridge,element).map(toCaret):$_a3izpgldjh8lz1fy.isText(element)?function(bridge,element,offset){return 0<=offset&&offset<$_6759o9ltjh8lz1ij_getEnd(element)?bridge.getRangedRect(element,offset,element,offset+1):0<offset?bridge.getRangedRect(element,offset-1,element,offset):Option.none()}(bridge,element,offset).map(toCaret):Option.none()},$_8dyzo9prjh8lz2ct_getEntireBox=function(bridge,element){return $_a3izpgldjh8lz1fy.isElement(element)?getElemBox(bridge,element).map(toCaret):$_a3izpgldjh8lz1fy.isText(element)?bridge.getRangedRect(element,0,element,$_6759o9ltjh8lz1ij_getEnd(element)).map(toCaret):Option.none()},traverse=$_d2ojjnkijh8lz1bv.immutable("item","mode"),backtrack=function(universe,item,direction,_transition){var transition=void 0!==_transition?_transition:sidestep;return universe.property().parent(item).map(function(p){return traverse(p,transition)})},sidestep=function(universe,item,direction,_transition){var transition=void 0!==_transition?_transition:advance;return direction.sibling(universe,item).map(function(p){return traverse(p,transition)})},advance=function(universe,item,direction,_transition){var transition=void 0!==_transition?_transition:advance,children=universe.property().children(item);return direction.first(children).map(function(r){return traverse(r,transition)})},successors=[{current:backtrack,next:sidestep,fallback:Option.none()},{current:sidestep,next:advance,fallback:Option.some(backtrack)},{current:advance,next:advance,fallback:Option.some(sidestep)}],go$1=function(universe,item,mode,direction,rules){return rules=void 0!==rules?rules:successors,$_6b0spykcjh8lz1ao.find(rules,function(succ){return succ.current===mode}).bind(function(rule){return rule.current(universe,item,direction,rule.next).orThunk(function(){return rule.fallback.bind(function(fb){return go$1(universe,item,fb,direction)})})})},$_5v9bytpwjh8lz2dx={backtrack:backtrack,sidestep:sidestep,advance:advance,go:go$1},$_6gybyapxjh8lz2e5={left:function(){return{sibling:function(universe,item){return universe.query().prevSibling(item)},first:function(children){return 0<children.length?Option.some(children[children.length-1]):Option.none()}}},right:function(){return{sibling:function(universe,item){return universe.query().nextSibling(item)},first:function(children){return 0<children.length?Option.some(children[0]):Option.none()}}}},hone=function(universe,item,predicate,mode,direction,isRoot){return $_5v9bytpwjh8lz2dx.go(universe,item,mode,direction).bind(function(n){return isRoot(n.item())?Option.none():predicate(n.item())?Option.some(n.item()):hone(universe,n.item(),predicate,n.mode(),direction,isRoot)})},$_fjuczcpvjh8lz2ds_left=function(universe,item,predicate,isRoot){return hone(universe,item,predicate,$_5v9bytpwjh8lz2dx.sidestep,$_6gybyapxjh8lz2e5.left(),isRoot)},$_fjuczcpvjh8lz2ds_right=function(universe,item,predicate,isRoot){return hone(universe,item,predicate,$_5v9bytpwjh8lz2dx.sidestep,$_6gybyapxjh8lz2e5.right(),isRoot)},isLeaf=function(universe,element){return 0===universe.property().children(element).length},seekLeft=function(universe,item,predicate,isRoot){return $_fjuczcpvjh8lz2ds_left(universe,item,predicate,isRoot)},seekRight=function(universe,item,predicate,isRoot){return $_fjuczcpvjh8lz2ds_right(universe,item,predicate,isRoot)},$_5k1owupujh8lz2do={before:function(universe,item,isRoot){return seekLeft(universe,item,$_bgyjg9kejh8lz1ax.curry(isLeaf,universe),isRoot)},after:function(universe,item,isRoot){return seekRight(universe,item,$_bgyjg9kejh8lz1ax.curry(isLeaf,universe),isRoot)},seekLeft:seekLeft,seekRight:seekRight,walkers:function(){return{left:$_6gybyapxjh8lz2e5.left,right:$_6gybyapxjh8lz2e5.right}},walk:function(universe,item,mode,direction,_rules){return $_5v9bytpwjh8lz2dx.go(universe,item,mode,direction,_rules)},backtrack:$_5v9bytpwjh8lz2dx.backtrack,sidestep:$_5v9bytpwjh8lz2dx.sidestep,advance:$_5v9bytpwjh8lz2dx.advance},universe$2=DomUniverse(),$_fayc8dptjh8lz2dk={gather:function(element,prune,transform){return $_5k1owupujh8lz2do.gather(universe$2,element,prune,transform)},before:function(element,isRoot){return $_5k1owupujh8lz2do.before(universe$2,element,isRoot)},after:function(element,isRoot){return $_5k1owupujh8lz2do.after(universe$2,element,isRoot)},seekLeft:function(element,predicate,isRoot){return $_5k1owupujh8lz2do.seekLeft(universe$2,element,predicate,isRoot)},seekRight:function(element,predicate,isRoot){return $_5k1owupujh8lz2do.seekRight(universe$2,element,predicate,isRoot)},walkers:function(){return $_5k1owupujh8lz2do.walkers()},walk:function(item,mode,direction,_rules){return $_5k1owupujh8lz2do.walk(universe$2,item,mode,direction,_rules)}},adt$2=$_659si2mejh8lz1n9_generate([{none:[]},{retry:["caret"]}]),inOutsideBlock=function(bridge,element,caret){return $_aykj0glijh8lz1g9.closest(element,$_39l7z3myjh8lz1rk_isBlock).fold($_bgyjg9kejh8lz1ax.constant(!1),function(cell){return $_8dyzo9prjh8lz2ct_getEntireBox(bridge,cell).exists(function(box){return function(caret,box){return caret.left()<box.left()||Math.abs(box.right()-caret.left())<1||caret.left()>box.right()}(caret,box)})})},upMovement={point:$_8hoedhpqjh8lz2ck.getTop,adjuster:function(bridge,element,guessBox,original,caret){var higherCaret=$_8hoedhpqjh8lz2ck.moveUp(caret,5);return Math.abs(guessBox.top()-original.top())<1?adt$2.retry(higherCaret):guessBox.bottom()<caret.top()?adt$2.retry(higherCaret):guessBox.bottom()===caret.top()?adt$2.retry($_8hoedhpqjh8lz2ck.moveUp(caret,1)):inOutsideBlock(bridge,element,caret)?adt$2.retry($_8hoedhpqjh8lz2ck.translate(higherCaret,5,0)):adt$2.none()},move:$_8hoedhpqjh8lz2ck.moveUp,gather:$_fayc8dptjh8lz2dk.before},downMovement={point:$_8hoedhpqjh8lz2ck.getBottom,adjuster:function(bridge,element,guessBox,original,caret){var lowerCaret=$_8hoedhpqjh8lz2ck.moveDown(caret,5);return Math.abs(guessBox.bottom()-original.bottom())<1?adt$2.retry(lowerCaret):guessBox.top()>caret.bottom()?adt$2.retry(lowerCaret):guessBox.top()===caret.bottom()?adt$2.retry($_8hoedhpqjh8lz2ck.moveDown(caret,1)):inOutsideBlock(bridge,element,caret)?adt$2.retry($_8hoedhpqjh8lz2ck.translate(lowerCaret,5,0)):adt$2.none()},move:$_8hoedhpqjh8lz2ck.moveDown,gather:$_fayc8dptjh8lz2dk.after},adjustTil=function(bridge,movement,original,caret,numRetries){return 0===numRetries?Option.some(caret):function(bridge,x,y){return bridge.elementFromPoint(x,y).filter(function(elm){return"table"===$_a3izpgldjh8lz1fy.name(elm)}).isSome()}(bridge,caret.left(),movement.point(caret))?function(bridge,movement,original,caret,numRetries){return adjustTil(bridge,movement,original,movement.move(caret,5),numRetries)}(bridge,movement,original,caret,numRetries-1):bridge.situsFromPoint(caret.left(),movement.point(caret)).bind(function(guess){return guess.start().fold(Option.none,function(element,offset){return $_8dyzo9prjh8lz2ct_getEntireBox(bridge,element,offset).bind(function(guessBox){return movement.adjuster(bridge,element,guessBox,original,caret).fold(Option.none,function(newCaret){return adjustTil(bridge,movement,original,newCaret,numRetries-1)})}).orThunk(function(){return Option.some(caret)})},Option.none)})},retry=function(movement,bridge,caret){var moved=movement.move(caret,5),adjusted=adjustTil(bridge,movement,caret,moved,100).getOr(moved);return function(movement,adjusted,bridge){return movement.point(adjusted)>bridge.getInnerHeight()?Option.some(movement.point(adjusted)-bridge.getInnerHeight()):movement.point(adjusted)<0?Option.some(-movement.point(adjusted)):Option.none()}(movement,adjusted,bridge).fold(function(){return bridge.situsFromPoint(adjusted.left(),movement.point(adjusted))},function(delta){return bridge.scrollBy(0,delta),bridge.situsFromPoint(adjusted.left(),movement.point(adjusted)-delta)})},$_djarwopsjh8lz2d1={tryUp:$_bgyjg9kejh8lz1ax.curry(retry,upMovement),tryDown:$_bgyjg9kejh8lz1ax.curry(retry,downMovement),ieTryUp:function(bridge,caret){return bridge.situsFromPoint(caret.left(),caret.top()-5)},ieTryDown:function(bridge,caret){return bridge.situsFromPoint(caret.left(),caret.bottom()+5)},getJumpSize:$_bgyjg9kejh8lz1ax.constant(5)},adt$3=$_659si2mejh8lz1n9_generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),isRow=function(elem){return $_fiygddlhjh8lz1g7.closest(elem,"tr")},$_9gwioapyjh8lz2ea={verify:function(bridge,before,beforeOffset,after,afterOffset,failure,isRoot){return $_fiygddlhjh8lz1g7.closest(after,"td,th",isRoot).bind(function(afterCell){return $_fiygddlhjh8lz1g7.closest(before,"td,th",isRoot).map(function(beforeCell){return $_2eywnlkvjh8lz1e8.eq(afterCell,beforeCell)?$_2eywnlkvjh8lz1e8.eq(after,afterCell)&&$_6759o9ltjh8lz1ij_getEnd(afterCell)===afterOffset?failure(beforeCell):adt$3.none("in same cell"):$_5glne7m1jh8lz1kg.sharedOne(isRow,[afterCell,beforeCell]).fold(function(){return function(bridge,before,after){var beforeBounds=bridge.getRect(before),afterBounds=bridge.getRect(after);return afterBounds.right>beforeBounds.left&&afterBounds.left<beforeBounds.right}(bridge,beforeCell,afterCell)?adt$3.success():failure(beforeCell)},function(sharedRow){return failure(beforeCell)})})}).getOr(adt$3.none("default"))},cata:function(subject,onNone,onSuccess,onFailedUp,onFailedDown){return subject.fold(onNone,onSuccess,onFailedUp,onFailedDown)},adt:adt$3},$_6wu737q0jh8lz2f9={point:$_d2ojjnkijh8lz1bv.immutable("element","offset"),delta:$_d2ojjnkijh8lz1bv.immutable("element","deltaOffset"),range:$_d2ojjnkijh8lz1bv.immutable("element","start","finish"),points:$_d2ojjnkijh8lz1bv.immutable("begin","end"),text:$_d2ojjnkijh8lz1bv.immutable("element","text")},inParent=($_d2ojjnkijh8lz1bv.immutable("ancestor","descendants","element","index"),$_d2ojjnkijh8lz1bv.immutable("parent","children","element","index")),indexOf$1=function(elements,element){return $_6b0spykcjh8lz1ao.findIndex(elements,$_bgyjg9kejh8lz1ax.curry($_2eywnlkvjh8lz1e8.eq,element))},$_1jwctkq1jh8lz2fd_indexInParent=function(element){return $_4hc7u2ktjh8lz1dv.parent(element).bind(function(parent){var children=$_4hc7u2ktjh8lz1dv.children(parent);return indexOf$1(children,element).map(function(index){return inParent(parent,children,element,index)})})},isBr=function(elem){return"br"===$_a3izpgldjh8lz1fy.name(elem)},gatherer=function(cand,gather,isRoot){return gather(cand,isRoot).bind(function(target){return $_a3izpgldjh8lz1fy.isText(target)&&0===$_bri5anlujh8lz1in.get(target).trim().length?gatherer(target,gather,isRoot):Option.some(target)})},handleParent=function(isRoot,element,offset,direction){return function(element,offset){return $_4hc7u2ktjh8lz1dv.child(element,offset).filter(isBr).orThunk(function(){return $_4hc7u2ktjh8lz1dv.child(element,offset-1).filter(isBr)})}(element,offset).bind(function(br){return direction.traverse(br).fold(function(){return gatherer(br,direction.gather,isRoot).map(direction.relative)},function(adjacent){return $_1jwctkq1jh8lz2fd_indexInParent(adjacent).map(function(info){return $_eviq86p2jh8lz26w.on(info.parent(),info.index())})})})},$_fdx5vppzjh8lz2eq_tryBr=function(isRoot,element,offset,direction){return(isBr(element)?function(isRoot,element,direction){return direction.traverse(element).orThunk(function(){return gatherer(element,direction.gather,isRoot)}).map(direction.relative)}(isRoot,element,direction):handleParent(isRoot,element,offset,direction)).map(function(tgt){return{start:$_bgyjg9kejh8lz1ax.constant(tgt),finish:$_bgyjg9kejh8lz1ax.constant(tgt)}})},$_fdx5vppzjh8lz2eq_process=function(analysis){return $_9gwioapyjh8lz2ea.cata(analysis,function(message){return Option.none()},function(){return Option.none()},function(cell){return Option.some($_6wu737q0jh8lz2f9.point(cell,0))},function(cell){return Option.some($_6wu737q0jh8lz2f9.point(cell,$_6759o9ltjh8lz1ij_getEnd(cell)))})},platform$1=$_a6om0dl0jh8lz1ep.detect(),scan=function(bridge,isRoot,element,offset,direction,numRetries){return 0===numRetries?Option.none():tryCursor(bridge,isRoot,element,offset,direction).bind(function(situs){var range=bridge.fromSitus(situs),analysis=$_9gwioapyjh8lz2ea.verify(bridge,element,offset,range.finish(),range.foffset(),direction.failure,isRoot);return $_9gwioapyjh8lz2ea.cata(analysis,function(){return Option.none()},function(){return Option.some(situs)},function(cell){return $_2eywnlkvjh8lz1e8.eq(element,cell)&&0===offset?tryAgain(bridge,element,offset,$_8hoedhpqjh8lz2ck.moveUp,direction):scan(bridge,isRoot,cell,0,direction,numRetries-1)},function(cell){return $_2eywnlkvjh8lz1e8.eq(element,cell)&&offset===$_6759o9ltjh8lz1ij_getEnd(cell)?tryAgain(bridge,element,offset,$_8hoedhpqjh8lz2ck.moveDown,direction):scan(bridge,isRoot,cell,$_6759o9ltjh8lz1ij_getEnd(cell),direction,numRetries-1)})})},tryAgain=function(bridge,element,offset,move,direction){return $_8dyzo9prjh8lz2ct_getBoxAt(bridge,element,offset).bind(function(box){return tryAt(bridge,direction,move(box,$_djarwopsjh8lz2d1.getJumpSize()))})},tryAt=function(bridge,direction,box){return platform$1.browser.isChrome()||platform$1.browser.isSafari()||platform$1.browser.isFirefox()||platform$1.browser.isEdge()?direction.otherRetry(bridge,box):platform$1.browser.isIE()?direction.ieRetry(bridge,box):Option.none()},tryCursor=function(bridge,isRoot,element,offset,direction){return $_8dyzo9prjh8lz2ct_getBoxAt(bridge,element,offset).bind(function(box){return tryAt(bridge,direction,box)})},$_3ywvn5ppjh8lz2c7_handle=function(bridge,isRoot,direction){return function(bridge,isRoot,direction){return bridge.getSelection().bind(function(sel){return $_fdx5vppzjh8lz2eq_tryBr(isRoot,sel.finish(),sel.foffset(),direction).fold(function(){return Option.some($_6wu737q0jh8lz2f9.point(sel.finish(),sel.foffset()))},function(brNeighbour){var range=bridge.fromSitus(brNeighbour),analysis=$_9gwioapyjh8lz2ea.verify(bridge,sel.finish(),sel.foffset(),range.finish(),range.foffset(),direction.failure,isRoot);return $_fdx5vppzjh8lz2eq_process(analysis)})})}(bridge,isRoot,direction).bind(function(spot){return scan(bridge,isRoot,spot.element(),spot.offset(),direction,20).map(bridge.fromSitus)})},$_2egcf2q2jh8lz2fq_ancestor=function(scope,predicate,isRoot){return $_aykj0glijh8lz1g9.ancestor(scope,predicate,isRoot).isSome()},detection=$_a6om0dl0jh8lz1ep.detect(),simulate=function(bridge,isRoot,direction,initial,anchor){return $_fiygddlhjh8lz1g7.closest(initial,"td,th",isRoot).bind(function(start){return $_fiygddlhjh8lz1g7.closest(start,"table",isRoot).bind(function(table){return function(elem,table){return $_2egcf2q2jh8lz2fq_ancestor(elem,function(e){return $_4hc7u2ktjh8lz1dv.parent(e).exists(function(p){return $_2eywnlkvjh8lz1e8.eq(p,table)})})}(anchor,table)?$_3ywvn5ppjh8lz2c7_handle(bridge,isRoot,direction).bind(function(range){return $_fiygddlhjh8lz1g7.closest(range.finish(),"td,th",isRoot).map(function(finish){return{start:$_bgyjg9kejh8lz1ax.constant(start),finish:$_bgyjg9kejh8lz1ax.constant(finish),range:$_bgyjg9kejh8lz1ax.constant(range)}})}):Option.none()})})},$_1iwm88pojh8lz2bj_navigate=function(bridge,isRoot,direction,initial,anchor,precheck){return detection.browser.isIE()?Option.none():precheck(initial,isRoot).orThunk(function(){return simulate(bridge,isRoot,direction,initial,anchor).map(function(info){var range=info.range();return $_8xnxafpijh8lz29y.response(Option.some($_45u5rqpljh8lz2ah_makeSitus(range.start(),range.soffset(),range.finish(),range.foffset())),!0)})})},$_1iwm88pojh8lz2bj_select=function(bridge,container,isRoot,direction,initial,anchor,selectRange){return simulate(bridge,isRoot,direction,initial,anchor).bind(function(info){return $_2hlk4dpnjh8lz2b8.detect(container,isRoot,info.start(),info.finish(),selectRange)})},$_1iwm88pojh8lz2bj_firstUpCheck=function(initial,isRoot){return $_fiygddlhjh8lz1g7.closest(initial,"tr",isRoot).bind(function(startRow){return $_fiygddlhjh8lz1g7.closest(startRow,"table",isRoot).bind(function(table){var rows=$_coxlualejh8lz1fz.descendants(table,"tr");return $_2eywnlkvjh8lz1e8.eq(startRow,rows[0])?$_fayc8dptjh8lz2dk.seekLeft(table,function(element){return $_fpdn73lsjh8lz1ig.last(element).isSome()},isRoot).map(function(last){var lastOffset=$_6759o9ltjh8lz1ij_getEnd(last);return $_8xnxafpijh8lz29y.response(Option.some($_45u5rqpljh8lz2ah_makeSitus(last,lastOffset,last,lastOffset)),!0)}):Option.none()})})},$_1iwm88pojh8lz2bj_lastDownCheck=function(initial,isRoot){return $_fiygddlhjh8lz1g7.closest(initial,"tr",isRoot).bind(function(startRow){return $_fiygddlhjh8lz1g7.closest(startRow,"table",isRoot).bind(function(table){var rows=$_coxlualejh8lz1fz.descendants(table,"tr");return $_2eywnlkvjh8lz1e8.eq(startRow,rows[rows.length-1])?$_fayc8dptjh8lz2dk.seekRight(table,function(element){return $_fpdn73lsjh8lz1ig.first(element).isSome()},isRoot).map(function(first){return $_8xnxafpijh8lz29y.response(Option.some($_45u5rqpljh8lz2ah_makeSitus(first,0,first,0)),!0)}):Option.none()})})},findCell=function(target,isRoot){return $_fiygddlhjh8lz1g7.closest(target,"td,th",isRoot)},$_24h2itq4jh8lz2fz={down:{traverse:$_4hc7u2ktjh8lz1dv.nextSibling,gather:$_fayc8dptjh8lz2dk.after,relative:$_eviq86p2jh8lz26w.before,otherRetry:$_djarwopsjh8lz2d1.tryDown,ieRetry:$_djarwopsjh8lz2d1.ieTryDown,failure:$_9gwioapyjh8lz2ea.adt.failedDown},up:{traverse:$_4hc7u2ktjh8lz1dv.prevSibling,gather:$_fayc8dptjh8lz2dk.before,relative:$_eviq86p2jh8lz26w.before,otherRetry:$_djarwopsjh8lz2d1.tryUp,ieRetry:$_djarwopsjh8lz2d1.ieTryUp,failure:$_9gwioapyjh8lz2ea.adt.failedUp}},rc=$_d2ojjnkijh8lz1bv.immutable("rows","cols"),$_5i27y1phjh8lz29m={mouse:function(win,container,isRoot,annotations){var handlers=function(bridge,container,isRoot,annotations){var cursor=Option.none(),clearState=function(){cursor=Option.none()};return{mousedown:function(event){annotations.clear(container),cursor=findCell(event.target(),isRoot)},mouseover:function(event){cursor.each(function(start){annotations.clear(container),findCell(event.target(),isRoot).each(function(finish){$_5tpv0tm0jh8lz1jt_identify(start,finish,isRoot).each(function(cellSel){var boxes=cellSel.boxes().getOr([]);(1<boxes.length||1===boxes.length&&!$_2eywnlkvjh8lz1e8.eq(start,finish))&&(annotations.selectRange(container,boxes,cellSel.start(),cellSel.finish()),bridge.selectContents(finish))})})})},mouseup:function(){cursor.each(clearState)}}}(WindowBridge(win),container,isRoot,annotations);return{mousedown:handlers.mousedown,mouseover:handlers.mouseover,mouseup:handlers.mouseup}},keyboard:function(win,container,isRoot,annotations){var bridge=WindowBridge(win),clearToNavigate=function(){return annotations.clear(container),Option.none()};return{keydown:function(event,start,soffset,finish,foffset,direction){var keycode=event.raw().which,shiftKey=!0===event.raw().shiftKey;return $_5tpv0tm0jh8lz1jt_retrieve(container,annotations.selectedSelector()).fold(function(){return $_5bctktpjjh8lz2a1.isDown(keycode)&&shiftKey?$_bgyjg9kejh8lz1ax.curry($_1iwm88pojh8lz2bj_select,bridge,container,isRoot,$_24h2itq4jh8lz2fz.down,finish,start,annotations.selectRange):$_5bctktpjjh8lz2a1.isUp(keycode)&&shiftKey?$_bgyjg9kejh8lz1ax.curry($_1iwm88pojh8lz2bj_select,bridge,container,isRoot,$_24h2itq4jh8lz2fz.up,finish,start,annotations.selectRange):$_5bctktpjjh8lz2a1.isDown(keycode)?$_bgyjg9kejh8lz1ax.curry($_1iwm88pojh8lz2bj_navigate,bridge,isRoot,$_24h2itq4jh8lz2fz.down,finish,start,$_1iwm88pojh8lz2bj_lastDownCheck):$_5bctktpjjh8lz2a1.isUp(keycode)?$_bgyjg9kejh8lz1ax.curry($_1iwm88pojh8lz2bj_navigate,bridge,isRoot,$_24h2itq4jh8lz2fz.up,finish,start,$_1iwm88pojh8lz2bj_firstUpCheck):Option.none},function(selected){var update=function(attempts){return function(){return $_clgylhn2jh8lz1sg_findMap(attempts,function(delta){return $_2hlk4dpnjh8lz2b8.update(delta.rows(),delta.cols(),container,selected,annotations)}).fold(function(){return $_5tpv0tm0jh8lz1jt_getEdges(container,annotations.firstSelectedSelector(),annotations.lastSelectedSelector()).map(function(edges){var relative=$_5bctktpjjh8lz2a1.isDown(keycode)||direction.isForward(keycode)?$_eviq86p2jh8lz26w.after:$_eviq86p2jh8lz26w.before;return bridge.setRelativeSelection($_eviq86p2jh8lz26w.on(edges.first(),0),relative(edges.table())),annotations.clear(container),$_8xnxafpijh8lz29y.response(Option.none(),!0)})},function(_){return Option.some($_8xnxafpijh8lz29y.response(Option.none(),!0))})}};return $_5bctktpjjh8lz2a1.isDown(keycode)&&shiftKey?update([rc(1,0)]):$_5bctktpjjh8lz2a1.isUp(keycode)&&shiftKey?update([rc(-1,0)]):direction.isBackward(keycode)&&shiftKey?update([rc(0,-1),rc(-1,0)]):direction.isForward(keycode)&&shiftKey?update([rc(0,1),rc(1,0)]):$_5bctktpjjh8lz2a1.isNavigation(keycode)&&!1===shiftKey?clearToNavigate:Option.none})()},keyup:function(event,start,soffset,finish,foffset){return $_5tpv0tm0jh8lz1jt_retrieve(container,annotations.selectedSelector()).fold(function(){var keycode=event.raw().which;return 0==(!0===event.raw().shiftKey)?Option.none():$_5bctktpjjh8lz2a1.isNavigation(keycode)?$_2hlk4dpnjh8lz2b8.sync(container,isRoot,start,soffset,finish,foffset,annotations.selectRange):Option.none()},Option.none)}}}},$_g8lworq7jh8lz2gs_remove=function(element,classes){$_6b0spykcjh8lz1ao.each(classes,function(x){$_evf7iendjh8lz1uz.remove(element,x)})},$_1e5pdaq6jh8lz2gr_addClass=function(clazz){return function(element){$_evf7iendjh8lz1uz.add(element,clazz)}},$_1e5pdaq6jh8lz2gr_removeClasses=function(classes){return function(element){$_g8lworq7jh8lz2gs_remove(element,classes)}},$_giqnj1q5jh8lz2g7={byClass:function(ephemera){var addSelectionClass=$_1e5pdaq6jh8lz2gr_addClass(ephemera.selected()),removeSelectionClasses=$_1e5pdaq6jh8lz2gr_removeClasses([ephemera.selected(),ephemera.lastSelected(),ephemera.firstSelected()]),clear=function(container){var sels=$_coxlualejh8lz1fz.descendants(container,ephemera.selectedSelector());$_6b0spykcjh8lz1ao.each(sels,removeSelectionClasses)};return{clear:clear,selectRange:function(container,cells,start,finish){clear(container),$_6b0spykcjh8lz1ao.each(cells,addSelectionClass),$_evf7iendjh8lz1uz.add(start,ephemera.firstSelected()),$_evf7iendjh8lz1uz.add(finish,ephemera.lastSelected())},selectedSelector:ephemera.selectedSelector,firstSelectedSelector:ephemera.firstSelectedSelector,lastSelectedSelector:ephemera.lastSelectedSelector}},byAttr:function(ephemera){var removeSelectionAttributes=function(element){$_1mp8lglcjh8lz1fq.remove(element,ephemera.selected()),$_1mp8lglcjh8lz1fq.remove(element,ephemera.firstSelected()),$_1mp8lglcjh8lz1fq.remove(element,ephemera.lastSelected())},addSelectionAttribute=function(element){$_1mp8lglcjh8lz1fq.set(element,ephemera.selected(),"1")},clear=function(container){var sels=$_coxlualejh8lz1fz.descendants(container,ephemera.selectedSelector());$_6b0spykcjh8lz1ao.each(sels,removeSelectionAttributes)};return{clear:clear,selectRange:function(container,cells,start,finish){clear(container),$_6b0spykcjh8lz1ao.each(cells,addSelectionAttribute),$_1mp8lglcjh8lz1fq.set(start,ephemera.firstSelected(),"1"),$_1mp8lglcjh8lz1fq.set(finish,ephemera.lastSelected(),"1")},selectedSelector:ephemera.selectedSelector,firstSelectedSelector:ephemera.firstSelectedSelector,lastSelectedSelector:ephemera.lastSelectedSelector}}},hasInternalTarget=function(e){return!1===$_evf7iendjh8lz1uz.has($_6vo9a4krjh8lz1do.fromDom(e.target),"ephox-snooker-resizer-bar")},each$4=global$2.each,$_7ezhclq9jh8lz2h1_addButtons=function(editor){var menuItems=[];function cmd(command){return function(){editor.execCommand(command)}}each$4("inserttable tableprops deletetable | cell row column".split(" "),function(name){"|"===name?menuItems.push({text:"-"}):menuItems.push(editor.menuItems[name])}),editor.addButton("table",{type:"menubutton",title:"Table",menu:menuItems}),editor.addButton("tableprops",{title:"Table properties",onclick:cmd("mceTableProps"),icon:"table"}),editor.addButton("tabledelete",{title:"Delete table",onclick:cmd("mceTableDelete")}),editor.addButton("tablecellprops",{title:"Cell properties",onclick:cmd("mceTableCellProps")}),editor.addButton("tablemergecells",{title:"Merge cells",onclick:cmd("mceTableMergeCells")}),editor.addButton("tablesplitcells",{title:"Split cell",onclick:cmd("mceTableSplitCells")}),editor.addButton("tableinsertrowbefore",{title:"Insert row before",onclick:cmd("mceTableInsertRowBefore")}),editor.addButton("tableinsertrowafter",{title:"Insert row after",onclick:cmd("mceTableInsertRowAfter")}),editor.addButton("tabledeleterow",{title:"Delete row",onclick:cmd("mceTableDeleteRow")}),editor.addButton("tablerowprops",{title:"Row properties",onclick:cmd("mceTableRowProps")}),editor.addButton("tablecutrow",{title:"Cut row",onclick:cmd("mceTableCutRow")}),editor.addButton("tablecopyrow",{title:"Copy row",onclick:cmd("mceTableCopyRow")}),editor.addButton("tablepasterowbefore",{title:"Paste row before",onclick:cmd("mceTablePasteRowBefore")}),editor.addButton("tablepasterowafter",{title:"Paste row after",onclick:cmd("mceTablePasteRowAfter")}),editor.addButton("tableinsertcolbefore",{title:"Insert column before",onclick:cmd("mceTableInsertColBefore")}),editor.addButton("tableinsertcolafter",{title:"Insert column after",onclick:cmd("mceTableInsertColAfter")}),editor.addButton("tabledeletecol",{title:"Delete column",onclick:cmd("mceTableDeleteCol")})},$_7ezhclq9jh8lz2h1_addToolbars=function(editor){var toolbar=function(editor){var toolbar=editor.getParam("table_toolbar",defaultTableToolbar);return""===toolbar||!1===toolbar?[]:$_d1kyz8kfjh8lz1az.isString(toolbar)?toolbar.split(/[ ,]/):$_d1kyz8kfjh8lz1az.isArray(toolbar)?toolbar:[]}(editor);0<toolbar.length&&editor.addContextToolbar(function(table){return editor.dom.is(table,"table")&&editor.getBody().contains(table)},toolbar.join(" "))},$_g08j12qajh8lz2h4_addMenuItems=function(editor,selections){var targets=Option.none(),tableCtrls=[],cellCtrls=[],mergeCtrls=[],unmergeCtrls=[],noTargetDisable=function(ctrl){ctrl.disabled(!0)},ctrlEnable=function(ctrl){ctrl.disabled(!1)},pushTable=function(){var self=this;tableCtrls.push(self),targets.fold(function(){noTargetDisable(self)},function(targets){ctrlEnable(self)})},pushCell=function(){var self=this;cellCtrls.push(self),targets.fold(function(){noTargetDisable(self)},function(targets){ctrlEnable(self)})};editor.on("init",function(){editor.on("nodechange",function(e){var cellOpt=Option.from(editor.dom.getParent(editor.selection.getStart(),"th,td"));(targets=cellOpt.bind(function(cellDom){var cell=$_6vo9a4krjh8lz1do.fromDom(cellDom);return $_ee8pmfkojh8lz1ch.table(cell).map(function(table){return $_3xfj7olxjh8lz1j2.forMenu(selections,table,cell)})})).fold(function(){$_6b0spykcjh8lz1ao.each(tableCtrls,noTargetDisable),$_6b0spykcjh8lz1ao.each(cellCtrls,noTargetDisable),$_6b0spykcjh8lz1ao.each(mergeCtrls,noTargetDisable),$_6b0spykcjh8lz1ao.each(unmergeCtrls,noTargetDisable)},function(targets){$_6b0spykcjh8lz1ao.each(tableCtrls,ctrlEnable),$_6b0spykcjh8lz1ao.each(cellCtrls,ctrlEnable),$_6b0spykcjh8lz1ao.each(mergeCtrls,function(mergeCtrl){mergeCtrl.disabled(targets.mergable().isNone())}),$_6b0spykcjh8lz1ao.each(unmergeCtrls,function(unmergeCtrl){unmergeCtrl.disabled(targets.unmergable().isNone())})})})});var selectGrid=function(editor,tx,ty,control){var x,y,focusCell,cell,active,table=control.getEl().getElementsByTagName("table")[0],rtl=control.isRtl()||"tl-tr"===control.parent().rel;for(table.nextSibling.innerHTML=tx+1+" x "+(ty+1),rtl&&(tx=9-tx),y=0;y<10;y++)for(x=0;x<10;x++)cell=table.rows[y].childNodes[x].firstChild,active=(rtl?tx<=x:x<=tx)&&y<=ty,editor.dom.toggleClass(cell,"mce-active",active),active&&(focusCell=cell);return focusCell.parentNode},insertTable=!1===function(editor){return editor.getParam("table_grid",!0,"boolean")}(editor)?{text:"Table",icon:"table",context:"table",onclick:cmd("mceInsertTable")}:{text:"Table",icon:"table",context:"table",ariaHideMenu:!0,onclick:function(e){e.aria&&(this.parent().hideAll(),e.stopImmediatePropagation(),editor.execCommand("mceInsertTable"))},onshow:function(){selectGrid(editor,0,0,this.menu.items()[0])},onhide:function(){var elements=this.menu.items()[0].getEl().getElementsByTagName("a");editor.dom.removeClass(elements,"mce-active"),editor.dom.addClass(elements[0],"mce-active")},menu:[{type:"container",html:function(){var html="";html='<table role="grid" class="mce-grid mce-grid-border" aria-readonly="true">';for(var y=0;y<10;y++){html+="<tr>";for(var x=0;x<10;x++)html+='<td role="gridcell" tabindex="-1"><a id="mcegrid'+(10*y+x)+'" href="#" data-mce-x="'+x+'" data-mce-y="'+y+'"></a></td>';html+="</tr>"}return html+="</table>",html+='<div class="mce-text-center" role="presentation">1 x 1</div>'}(),onPostRender:function(){this.lastX=this.lastY=0},onmousemove:function(e){var x,y,target=e.target;"A"===target.tagName.toUpperCase()&&(x=parseInt(target.getAttribute("data-mce-x"),10),y=parseInt(target.getAttribute("data-mce-y"),10),(this.isRtl()||"tl-tr"===this.parent().rel)&&(x=9-x),x===this.lastX&&y===this.lastY||(selectGrid(editor,x,y,e.control),this.lastX=x,this.lastY=y))},onclick:function(e){var self=this;"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),e.stopPropagation(),self.parent().cancel(),editor.undoManager.transact(function(){$_7a3xgho8jh8lz20d_insert(editor,self.lastX+1,self.lastY+1)}),editor.addVisual())}}]};function cmd(command){return function(){editor.execCommand(command)}}var tableProperties={text:"Table properties",context:"table",onPostRender:pushTable,onclick:cmd("mceTableProps")},deleteTable={text:"Delete table",context:"table",onPostRender:pushTable,cmd:"mceTableDelete"},row={text:"Row",context:"table",menu:[{text:"Insert row before",onclick:cmd("mceTableInsertRowBefore"),onPostRender:pushCell},{text:"Insert row after",onclick:cmd("mceTableInsertRowAfter"),onPostRender:pushCell},{text:"Delete row",onclick:cmd("mceTableDeleteRow"),onPostRender:pushCell},{text:"Row properties",onclick:cmd("mceTableRowProps"),onPostRender:pushCell},{text:"-"},{text:"Cut row",onclick:cmd("mceTableCutRow"),onPostRender:pushCell},{text:"Copy row",onclick:cmd("mceTableCopyRow"),onPostRender:pushCell},{text:"Paste row before",onclick:cmd("mceTablePasteRowBefore"),onPostRender:pushCell},{text:"Paste row after",onclick:cmd("mceTablePasteRowAfter"),onPostRender:pushCell}]},column={text:"Column",context:"table",menu:[{text:"Insert column before",onclick:cmd("mceTableInsertColBefore"),onPostRender:pushCell},{text:"Insert column after",onclick:cmd("mceTableInsertColAfter"),onPostRender:pushCell},{text:"Delete column",onclick:cmd("mceTableDeleteCol"),onPostRender:pushCell}]},cell={separator:"before",text:"Cell",context:"table",menu:[{text:"Cell properties",onclick:cmd("mceTableCellProps"),onPostRender:pushCell},{text:"Merge cells",onclick:cmd("mceTableMergeCells"),onPostRender:function(){var self=this;mergeCtrls.push(self),targets.fold(function(){noTargetDisable(self)},function(targets){self.disabled(targets.mergable().isNone())})}},{text:"Split cell",onclick:cmd("mceTableSplitCells"),onPostRender:function(){var self=this;unmergeCtrls.push(self),targets.fold(function(){noTargetDisable(self)},function(targets){self.disabled(targets.unmergable().isNone())})}}]};editor.addMenuItem("inserttable",insertTable),editor.addMenuItem("tableprops",tableProperties),editor.addMenuItem("deletetable",deleteTable),editor.addMenuItem("row",row),editor.addMenuItem("column",column),editor.addMenuItem("cell",cell)},getApi=function(editor,clipboardRows){return{insertTable:function(columns,rows){return $_7a3xgho8jh8lz20d_insert(editor,columns,rows)},setClipboardRows:function(rows){return function(rows,clipboardRows){var sugarRows=$_6b0spykcjh8lz1ao.map(rows,$_6vo9a4krjh8lz1do.fromDom);clipboardRows.set(Option.from(sugarRows))}(rows,clipboardRows)},getClipboardRows:function(){return function(clipboardRows){return clipboardRows.get().fold(function(){},function(rows){return $_6b0spykcjh8lz1ao.map(rows,function(row){return row.dom()})})}(clipboardRows)}}};global.add("table",function(editor){var resizeHandler=ResizeHandler(editor),cellSelection=function(editor,lazyResize){var handlerStruct=$_d2ojjnkijh8lz1bv.immutableBag(["mousedown","mouseover","mouseup","keyup","keydown"],[]),handlers=Option.none(),annotations=$_giqnj1q5jh8lz2g7.byAttr($_2yroczmcjh8lz1n4);return editor.on("init",function(e){var win=editor.getWin(),body=getBody$1(editor),isRoot=getIsRoot(editor),mouseHandlers=$_5i27y1phjh8lz29m.mouse(win,body,isRoot,annotations),keyHandlers=$_5i27y1phjh8lz29m.keyboard(win,body,isRoot,annotations),handleResponse=function(event,response){(function(event){return!0===event.raw().shiftKey})(event)&&(response.kill()&&event.kill(),response.selection().each(function(ns){var relative=$_8ehldap1jh8lz26p.relative(ns.start(),ns.finish()),rng=$_dcfxf3p7jh8lz27p.asLtrRange(win,relative);editor.selection.setRng(rng)}))},keyup=function(event){var wrappedEvent=wrapEvent(event);if(wrappedEvent.raw().shiftKey&&$_5bctktpjjh8lz2a1.isNavigation(wrappedEvent.raw().which)){var rng=editor.selection.getRng(),start=$_6vo9a4krjh8lz1do.fromDom(rng.startContainer),end=$_6vo9a4krjh8lz1do.fromDom(rng.endContainer);keyHandlers.keyup(wrappedEvent,start,rng.startOffset,end,rng.endOffset).each(function(response){handleResponse(wrappedEvent,response)})}},keydown=function(event){var wrappedEvent=wrapEvent(event);lazyResize().each(function(resize){resize.hideBars()});var rng=editor.selection.getRng(),startContainer=$_6vo9a4krjh8lz1do.fromDom(editor.selection.getStart()),start=$_6vo9a4krjh8lz1do.fromDom(rng.startContainer),end=$_6vo9a4krjh8lz1do.fromDom(rng.endContainer),direction=$_fe2yjsnvjh8lz1y8.directionAt(startContainer).isRtl()?$_5bctktpjjh8lz2a1.rtl:$_5bctktpjjh8lz2a1.ltr;keyHandlers.keydown(wrappedEvent,start,rng.startOffset,end,rng.endOffset,direction).each(function(response){handleResponse(wrappedEvent,response)}),lazyResize().each(function(resize){resize.showBars()})},isMouseEvent=function(event){return event.hasOwnProperty("x")&&event.hasOwnProperty("y")},wrapEvent=function(event){var target=$_6vo9a4krjh8lz1do.fromDom(event.target),stop=function(){event.stopPropagation()},prevent=function(){event.preventDefault()},kill=$_bgyjg9kejh8lz1ax.compose(prevent,stop);return{target:$_bgyjg9kejh8lz1ax.constant(target),x:$_bgyjg9kejh8lz1ax.constant(isMouseEvent(event)?event.x:null),y:$_bgyjg9kejh8lz1ax.constant(isMouseEvent(event)?event.y:null),stop:stop,prevent:prevent,kill:kill,raw:$_bgyjg9kejh8lz1ax.constant(event)}},isLeftMouse=function(raw){return 0===raw.button},mouseDown=function(e){isLeftMouse(e)&&hasInternalTarget(e)&&mouseHandlers.mousedown(wrapEvent(e))},mouseOver=function(e){var raw;void 0!==(raw=e).buttons&&0==(1&raw.buttons)||!hasInternalTarget(e)||mouseHandlers.mouseover(wrapEvent(e))},mouseUp=function(e){isLeftMouse(e)&&hasInternalTarget(e)&&mouseHandlers.mouseup(wrapEvent(e))};editor.on("mousedown",mouseDown),editor.on("mouseover",mouseOver),editor.on("mouseup",mouseUp),editor.on("keyup",keyup),editor.on("keydown",keydown),editor.on("nodechange",function(){var sel=editor.selection,start=$_6vo9a4krjh8lz1do.fromDom(sel.getStart()),end=$_6vo9a4krjh8lz1do.fromDom(sel.getEnd());$_5glne7m1jh8lz1kg.sharedOne($_ee8pmfkojh8lz1ch.table,[start,end]).fold(function(){annotations.clear(body)},$_bgyjg9kejh8lz1ax.noop)}),handlers=Option.some(handlerStruct({mousedown:mouseDown,mouseover:mouseOver,mouseup:mouseUp,keyup:keyup,keydown:keydown}))}),{clear:annotations.clear,destroy:function(){handlers.each(function(handlers){})}}}(editor,resizeHandler.lazyResize),actions=TableActions(editor,resizeHandler.lazyWire),selections=function(editor){return{get:function(){var body=getBody$1(editor);return $_21toytlzjh8lz1jj_retrieve(body,$_2yroczmcjh8lz1n4.selectedSelector()).fold(function(){return void 0===editor.selection.getStart()?$_crzziemdjh8lz1n7.none():$_crzziemdjh8lz1n7.single(editor.selection)},function(cells){return $_crzziemdjh8lz1n7.multiple(cells)})}}}(editor),clipboardRows=Cell(Option.none());return $_cmt2k3nzjh8lz1ym_registerCommands(editor,actions,cellSelection,selections,clipboardRows),$_3x42x9kbjh8lz1a2_registerEvents(editor,selections,actions,cellSelection),$_g08j12qajh8lz2h4_addMenuItems(editor,selections),$_7ezhclq9jh8lz2h1_addButtons(editor),$_7ezhclq9jh8lz2h1_addToolbars(editor),editor.on("PreInit",function(){editor.serializer.addTempAttr($_2yroczmcjh8lz1n4.firstSelected()),editor.serializer.addTempAttr($_2yroczmcjh8lz1n4.lastSelected())}),function(editor){return editor.getParam("table_tab_navigation",!0,"boolean")}(editor)&&editor.on("keydown",function(e){$_4jcvbhoyjh8lz25x_handle(e,editor,actions,resizeHandler.lazyWire)}),editor.on("remove",function(){resizeHandler.destroy(),cellSelection.destroy()}),getApi(editor,clipboardRows)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-template",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),constant=function(value){return function(){return value}},$_4ldd4lqfjh8lz34o_curry=(constant(!1),constant(!0),function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}}),global$1=tinymce.util.Tools.resolve("tinymce.util.Tools"),global$2=tinymce.util.Tools.resolve("tinymce.util.XHR"),global$3=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),$_aakka8qjjh8lz34u_getCreationDateClasses=function(editor){return editor.getParam("template_cdate_classes","cdate")},$_aakka8qjjh8lz34u_getModificationDateClasses=function(editor){return editor.getParam("template_mdate_classes","mdate")},$_aakka8qjjh8lz34u_getSelectedContentClasses=function(editor){return editor.getParam("template_selected_content_classes","selcontent")},$_aakka8qjjh8lz34u_getPreviewReplaceValues=function(editor){return editor.getParam("template_preview_replace_values")},$_aakka8qjjh8lz34u_getTemplateReplaceValues=function(editor){return editor.getParam("template_replace_values")},$_aakka8qjjh8lz34u_getTemplates=function(editorSettings){return editorSettings.templates},$_aakka8qjjh8lz34u_getCdateFormat=function(editor){return editor.getParam("template_cdate_format",editor.getLang("template.cdate_format"))},$_aakka8qjjh8lz34u_getMdateFormat=function(editor){return editor.getParam("template_mdate_format",editor.getLang("template.mdate_format"))},$_aakka8qjjh8lz34u_getDialogWidth=function(editor){return editor.getParam("template_popup_width",600)},$_aakka8qjjh8lz34u_getDialogHeight=function(editor){return Math.min(global$3.DOM.getViewPort().h,editor.getParam("template_popup_height",500))},addZeros=function(value,len){if((value=""+value).length<len)for(var i=0;i<len-value.length;i++)value="0"+value;return value},$_c5oa7zqljh8lz34w_getDateTime=function(editor,fmt,date){var daysShort="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),daysLong="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),monthsShort="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),monthsLong="January February March April May June July August September October November December".split(" ");return date=date||new Date,fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=(fmt=fmt.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+date.getFullYear())).replace("%y",""+date.getYear())).replace("%m",addZeros(date.getMonth()+1,2))).replace("%d",addZeros(date.getDate(),2))).replace("%H",""+addZeros(date.getHours(),2))).replace("%M",""+addZeros(date.getMinutes(),2))).replace("%S",""+addZeros(date.getSeconds(),2))).replace("%I",""+((date.getHours()+11)%12+1))).replace("%p",date.getHours()<12?"AM":"PM")).replace("%B",""+editor.translate(monthsLong[date.getMonth()]))).replace("%b",""+editor.translate(monthsShort[date.getMonth()]))).replace("%A",""+editor.translate(daysLong[date.getDay()]))).replace("%a",""+editor.translate(daysShort[date.getDay()]))).replace("%%","%")},replaceTemplateValues=function(editor,html,templateValues){return global$1.each(templateValues,function(v,k){"function"==typeof v&&(v=v(k)),html=html.replace(new RegExp("\\{\\$"+k+"\\}","g"),v)}),html},replaceVals=function(editor,e){var dom=editor.dom,vl=$_aakka8qjjh8lz34u_getTemplateReplaceValues(editor);global$1.each(dom.select("*",e),function(e){global$1.each(vl,function(v,k){dom.hasClass(e,k)&&"function"==typeof vl[k]&&vl[k](e)})})},hasClass=function(n,c){return new RegExp("\\b"+c+"\\b","g").test(n.className)},$_4rrmzqgjh8lz34q_createTemplateList=function(editorSettings,callback){return function(){var templateList=$_aakka8qjjh8lz34u_getTemplates(editorSettings);"function"!=typeof templateList?"string"==typeof templateList?global$2.send({url:templateList,success:function(text){callback(JSON.parse(text))}}):callback(templateList):templateList(callback)}},$_4rrmzqgjh8lz34q_replaceTemplateValues=replaceTemplateValues,$_4rrmzqgjh8lz34q_replaceVals=replaceVals,$_4rrmzqgjh8lz34q_insertTemplate=function(editor,ui,html){var el,n,dom=editor.dom,sel=editor.selection.getContent();html=replaceTemplateValues(0,html,$_aakka8qjjh8lz34u_getTemplateReplaceValues(editor)),el=dom.create("div",null,html),(n=dom.select(".mceTmpl",el))&&0<n.length&&(el=dom.create("div",null)).appendChild(n[0].cloneNode(!0)),global$1.each(dom.select("*",el),function(n){hasClass(n,$_aakka8qjjh8lz34u_getCreationDateClasses(editor).replace(/\s+/g,"|"))&&(n.innerHTML=$_c5oa7zqljh8lz34w_getDateTime(editor,$_aakka8qjjh8lz34u_getCdateFormat(editor))),hasClass(n,$_aakka8qjjh8lz34u_getModificationDateClasses(editor).replace(/\s+/g,"|"))&&(n.innerHTML=$_c5oa7zqljh8lz34w_getDateTime(editor,$_aakka8qjjh8lz34u_getMdateFormat(editor))),hasClass(n,$_aakka8qjjh8lz34u_getSelectedContentClasses(editor).replace(/\s+/g,"|"))&&(n.innerHTML=sel)}),replaceVals(editor,el),editor.execCommand("mceInsertContent",!1,el.innerHTML),editor.addVisual()},$_ffyhw9qejh8lz34k_register=function(editor){editor.addCommand("mceInsertTemplate",$_4ldd4lqfjh8lz34o_curry($_4rrmzqgjh8lz34q_insertTemplate,editor))},$_fi8njaqmjh8lz34y_setup=function(editor){editor.on("PreProcess",function(o){var dom=editor.dom,dateFormat=$_aakka8qjjh8lz34u_getMdateFormat(editor);global$1.each(dom.select("div",o.node),function(e){dom.hasClass(e,"mceTmpl")&&(global$1.each(dom.select("*",e),function(e){dom.hasClass(e,editor.getParam("template_mdate_classes","mdate").replace(/\s+/g,"|"))&&(e.innerHTML=$_c5oa7zqljh8lz34w_getDateTime(editor,dateFormat))}),$_4rrmzqgjh8lz34q_replaceVals(editor,e))})})},insertIframeHtml=function(editor,win,html){if(-1===html.indexOf("<html>")){var contentCssLinks_1="";global$1.each(editor.contentCSS,function(url){contentCssLinks_1+='<link type="text/css" rel="stylesheet" href="'+editor.documentBaseURI.toAbsolute(url)+'">'});var bodyClass=editor.settings.body_class||"";-1!==bodyClass.indexOf("=")&&(bodyClass=(bodyClass=editor.getParam("body_class","","hash"))[editor.id]||""),html="<!DOCTYPE html><html><head>"+contentCssLinks_1+'</head><body class="'+bodyClass+'">'+html+"</body></html>"}html=$_4rrmzqgjh8lz34q_replaceTemplateValues(editor,html,$_aakka8qjjh8lz34u_getPreviewReplaceValues(editor));var doc=win.find("iframe")[0].getEl().contentWindow.document;doc.open(),doc.write(html),doc.close()},$_7vfghaqojh8lz351_open=function(editor,templateList){var win,templateHtml,values=[];if(templateList&&0!==templateList.length)global$1.each(templateList,function(template){values.push({selected:!values.length,text:template.title,value:{url:template.url,content:template.content,description:template.description}})}),(win=editor.windowManager.open({title:"Insert template",layout:"flex",direction:"column",align:"stretch",padding:15,spacing:10,items:[{type:"form",flex:0,padding:0,items:[{type:"container",label:"Templates",items:{type:"listbox",label:"Templates",name:"template",values:values,onselect:function(e){var value=e.control.value();value.url?global$2.send({url:value.url,success:function(html){insertIframeHtml(editor,win,templateHtml=html)}}):(templateHtml=value.content,insertIframeHtml(editor,win,templateHtml)),win.find("#description")[0].text(e.control.value().description)}}}]},{type:"label",name:"description",label:"Description",text:" "},{type:"iframe",flex:1,border:1}],onsubmit:function(){$_4rrmzqgjh8lz34q_insertTemplate(editor,!1,templateHtml)},minWidth:$_aakka8qjjh8lz34u_getDialogWidth(editor),minHeight:$_aakka8qjjh8lz34u_getDialogHeight(editor)})).find("listbox")[0].fire("select");else{var message=editor.translate("No templates defined.");editor.notificationManager.open({text:message,type:"info"})}},showDialog=function(editor){return function(templates){$_7vfghaqojh8lz351_open(editor,templates)}},$_c0clk2qnjh8lz34z_register=function(editor){editor.addButton("template",{title:"Insert template",onclick:$_4rrmzqgjh8lz34q_createTemplateList(editor.settings,showDialog(editor))}),editor.addMenuItem("template",{text:"Template",onclick:$_4rrmzqgjh8lz34q_createTemplateList(editor.settings,showDialog(editor)),icon:"template",context:"insert"})};global.add("template",function(editor){$_c0clk2qnjh8lz34z_register(editor),$_ffyhw9qejh8lz34k_register(editor),$_fi8njaqmjh8lz34y_setup(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-textcolor",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_1d7gtwqsjh8lz35z_getCurrentColor=function(editor,format){var color;return editor.dom.getParents(editor.selection.getStart(),function(elm){var value;(value=elm.style["forecolor"===format?"color":"background-color"])&&(color=value)}),color},$_1d7gtwqsjh8lz35z_mapColors=function(colorMap){var i,colors=[];for(i=0;i<colorMap.length;i+=2)colors.push({text:colorMap[i+1],color:"#"+colorMap[i]});return colors},$_1d7gtwqsjh8lz35z_applyFormat=function(editor,format,value){editor.undoManager.transact(function(){editor.focus(),editor.formatter.apply(format,{value:value}),editor.nodeChanged()})},$_1d7gtwqsjh8lz35z_removeFormat=function(editor,format){editor.undoManager.transact(function(){editor.focus(),editor.formatter.remove(format,{value:null},null,!0),editor.nodeChanged()})},$_9kt0cyqrjh8lz35y_register=function(editor){editor.addCommand("mceApplyTextcolor",function(format,value){$_1d7gtwqsjh8lz35z_applyFormat(editor,format,value)}),editor.addCommand("mceRemoveTextcolor",function(format){$_1d7gtwqsjh8lz35z_removeFormat(editor,format)})},global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),defaultColorMap=["000000","Black","993300","Burnt orange","333300","Dark olive","003300","Dark green","003366","Dark azure","000080","Navy Blue","333399","Indigo","333333","Very dark gray","800000","Maroon","FF6600","Orange","808000","Olive","008000","Green","008080","Teal","0000FF","Blue","666699","Grayish blue","808080","Gray","FF0000","Red","FF9900","Amber","99CC00","Yellow green","339966","Sea green","33CCCC","Turquoise","3366FF","Royal blue","800080","Purple","999999","Medium gray","FF00FF","Magenta","FFCC00","Gold","FFFF00","Yellow","00FF00","Lime","00FFFF","Aqua","00CCFF","Sky blue","993366","Red violet","FFFFFF","White","FF99CC","Pink","FFCC99","Peach","FFFF99","Light yellow","CCFFCC","Pale green","CCFFFF","Pale cyan","99CCFF","Light sky blue","CC99FF","Plum"],getTextColorMap=function(editor){return editor.getParam("textcolor_map",defaultColorMap)},getTextColorRows=function(editor){return editor.getParam("textcolor_rows",5)},getTextColorCols=function(editor){return editor.getParam("textcolor_cols",8)},getColorPickerCallback=function(editor){return editor.getParam("color_picker_callback",null)},$_cupc58qwjh8lz366_getForeColorMap=function(editor){return editor.getParam("forecolor_map",getTextColorMap(editor))},$_cupc58qwjh8lz366_getBackColorMap=function(editor){return editor.getParam("backcolor_map",getTextColorMap(editor))},$_cupc58qwjh8lz366_getForeColorRows=function(editor){return editor.getParam("forecolor_rows",getTextColorRows(editor))},$_cupc58qwjh8lz366_getBackColorRows=function(editor){return editor.getParam("backcolor_rows",getTextColorRows(editor))},$_cupc58qwjh8lz366_getForeColorCols=function(editor){return editor.getParam("forecolor_cols",getTextColorCols(editor))},$_cupc58qwjh8lz366_getBackColorCols=function(editor){return editor.getParam("backcolor_cols",getTextColorCols(editor))},$_cupc58qwjh8lz366_getColorPickerCallback=getColorPickerCallback,$_cupc58qwjh8lz366_hasColorPicker=function(editor){return"function"==typeof getColorPickerCallback(editor)},global$3=tinymce.util.Tools.resolve("tinymce.util.I18n"),$_yigkpqxjh8lz368_getHtml=function(cols,rows,colorMap,hasColorPicker){var colors,color,html,last,x,y,i,count=0,id=global$1.DOM.uniqueId("mcearia"),getColorCellHtml=function(color,title){var isNoColor="transparent"===color;return'<td class="mce-grid-cell'+(isNoColor?" mce-colorbtn-trans":"")+'"><div id="'+id+"-"+count+++'" data-mce-color="'+(color||"")+'" role="option" tabIndex="-1" style="'+(color?"background-color: "+color:"")+'" title="'+global$3.translate(title)+'">'+(isNoColor?"&#215;":"")+"</div></td>"};for((colors=$_1d7gtwqsjh8lz35z_mapColors(colorMap)).push({text:global$3.translate("No color"),color:"transparent"}),html='<table class="mce-grid mce-grid-border mce-colorbutton-grid" role="list" cellspacing="0"><tbody>',last=colors.length-1,y=0;y<rows;y++){for(html+="<tr>",x=0;x<cols;x++)html+=last<(i=y*cols+x)?"<td></td>":getColorCellHtml((color=colors[i]).color,color.text);html+="</tr>"}if(hasColorPicker){for(html+='<tr><td colspan="'+cols+'" class="mce-custom-color-btn"><div id="'+id+'-c" class="mce-widget mce-btn mce-btn-small mce-btn-flat" role="button" tabindex="-1" aria-labelledby="'+id+'-c" style="width: 100%"><button type="button" role="presentation" tabindex="-1">'+global$3.translate("Custom...")+"</button></div></td></tr>",html+="<tr>",x=0;x<cols;x++)html+=getColorCellHtml("","Custom color");html+="</tr>"}return html+="</tbody></table>"},setDivColor=function(div,value){div.style.background=value,div.setAttribute("data-mce-color",value)},onButtonClick=function(editor){return function(e){var ctrl=e.control;ctrl._color?editor.execCommand("mceApplyTextcolor",ctrl.settings.format,ctrl._color):editor.execCommand("mceRemoveTextcolor",ctrl.settings.format)}},onPanelClick=function(editor,cols){return function(e){var value,buttonCtrl=this.parent(),currentColor=$_1d7gtwqsjh8lz35z_getCurrentColor(editor,buttonCtrl.settings.format),selectColor=function(value){editor.execCommand("mceApplyTextcolor",buttonCtrl.settings.format,value),buttonCtrl.hidePanel(),buttonCtrl.color(value)};global$1.DOM.getParent(e.target,".mce-custom-color-btn")&&(buttonCtrl.hidePanel(),$_cupc58qwjh8lz366_getColorPickerCallback(editor).call(editor,function(value){var customColorCells,div,i,tableElm=buttonCtrl.panel.getEl().getElementsByTagName("table")[0];for(customColorCells=global$2.map(tableElm.rows[tableElm.rows.length-1].childNodes,function(elm){return elm.firstChild}),i=0;i<customColorCells.length&&(div=customColorCells[i]).getAttribute("data-mce-color");i++);if(i===cols)for(i=0;i<cols-1;i++)setDivColor(customColorCells[i],customColorCells[i+1].getAttribute("data-mce-color"));setDivColor(div,value),selectColor(value)},currentColor)),(value=e.target.getAttribute("data-mce-color"))?(this.lastId&&global$1.DOM.get(this.lastId).setAttribute("aria-selected","false"),e.target.setAttribute("aria-selected",!0),this.lastId=e.target.id,"transparent"===value?(editor.execCommand("mceRemoveTextcolor",buttonCtrl.settings.format),buttonCtrl.hidePanel(),buttonCtrl.resetColor()):selectColor(value)):null!==value&&buttonCtrl.hidePanel()}},renderColorPicker=function(editor,foreColor){return function(){var cols=foreColor?$_cupc58qwjh8lz366_getForeColorCols(editor):$_cupc58qwjh8lz366_getBackColorCols(editor),rows=foreColor?$_cupc58qwjh8lz366_getForeColorRows(editor):$_cupc58qwjh8lz366_getBackColorRows(editor),colorMap=foreColor?$_cupc58qwjh8lz366_getForeColorMap(editor):$_cupc58qwjh8lz366_getBackColorMap(editor),hasColorPicker=$_cupc58qwjh8lz366_hasColorPicker(editor);return $_yigkpqxjh8lz368_getHtml(cols,rows,colorMap,hasColorPicker)}},$_dk5fhnqtjh8lz361_register=function(editor){editor.addButton("forecolor",{type:"colorbutton",tooltip:"Text color",format:"forecolor",panel:{role:"application",ariaRemember:!0,html:renderColorPicker(editor,!0),onclick:onPanelClick(editor,$_cupc58qwjh8lz366_getForeColorCols(editor))},onclick:onButtonClick(editor)}),editor.addButton("backcolor",{type:"colorbutton",tooltip:"Background color",format:"hilitecolor",panel:{role:"application",ariaRemember:!0,html:renderColorPicker(editor,!1),onclick:onPanelClick(editor,$_cupc58qwjh8lz366_getBackColorCols(editor))},onclick:onButtonClick(editor)})};global.add("textcolor",function(editor){$_9kt0cyqrjh8lz35y_register(editor),$_dk5fhnqtjh8lz361_register(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-textpattern",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_2txh6dr2jh8lz36u_get=function(patternsState){return{setPatterns:function(newPatterns){patternsState.set(newPatterns)},getPatterns:function(){return patternsState.get()}}},defaultPatterns=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"***",end:"***",format:["bold","italic"]},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],$_2d3ibsr3jh8lz36v_getPatterns=function(editorSettings){return void 0!==editorSettings.textpattern_patterns?editorSettings.textpattern_patterns:defaultPatterns},global$1=tinymce.util.Tools.resolve("tinymce.util.Delay"),global$2=tinymce.util.Tools.resolve("tinymce.util.VK"),global$3=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),global$4=tinymce.util.Tools.resolve("tinymce.util.Tools"),isMatchingPattern=function(pattern,text,offset,delta){return text.substr(offset-pattern.end.length-delta,pattern.end.length)===pattern.end},hasContent=function(offset,delta,pattern){return 0<offset-delta-pattern.end.length-pattern.start.length},$_el6qhwrbjh8lz37d_findPattern=function(patterns,text){for(var i=0;i<patterns.length;i++)if(0===text.indexOf(patterns[i].start)&&(!patterns[i].end||text.lastIndexOf(patterns[i].end)===text.length-patterns[i].end.length))return patterns[i]},$_el6qhwrbjh8lz37d_findEndPattern=function(patterns,text,offset,delta){var pattern,i,sortedPatterns=function(patterns){return patterns.sort(function(a,b){return a.start.length>b.start.length?-1:a.start.length<b.start.length?1:0})}(patterns);for(i=0;i<sortedPatterns.length;i++)if(void 0!==(pattern=sortedPatterns[i]).end&&isMatchingPattern(pattern,text,offset,delta)&&hasContent(offset,delta,pattern))return pattern},patternFromRng=function(patterns,rng,space){if(!1!==rng.collapsed){var container=rng.startContainer,text=container.data,delta=!0===space?1:0;if(3===container.nodeType){var endPattern=$_el6qhwrbjh8lz37d_findEndPattern(patterns,text,rng.startOffset,delta);if(void 0!==endPattern){var endOffset=text.lastIndexOf(endPattern.end,rng.startOffset-delta),startOffset=text.lastIndexOf(endPattern.start,endOffset-endPattern.end.length);if(endOffset=text.indexOf(endPattern.end,startOffset+endPattern.start.length),-1!==startOffset){var patternRng=document.createRange();patternRng.setStart(container,startOffset),patternRng.setEnd(container,endOffset+endPattern.end.length);var startPattern=$_el6qhwrbjh8lz37d_findPattern(patterns,patternRng.toString());if(!(void 0===endPattern||startPattern!==endPattern||container.data.length<=endPattern.start.length+endPattern.end.length))return{pattern:endPattern,startOffset:startOffset,endOffset:endOffset}}}}}},doApplyInlineFormat=function(editor,patterns,space){var rng=editor.selection.getRng(!0),foundPattern=patternFromRng(patterns,rng,space);if(foundPattern)return function(editor,container,found,space){var formatArray=global$4.isArray(found.pattern.format)?found.pattern.format:[found.pattern.format];if(0!==global$4.grep(formatArray,function(formatName){var format=editor.formatter.get(formatName);return format&&format[0].inline}).length)return editor.undoManager.transact(function(){container=function(container,pattern,endOffset,startOffset,space){return(container=0<startOffset?container.splitText(startOffset):container).splitText(endOffset-startOffset+pattern.end.length),container.deleteData(0,pattern.start.length),container.deleteData(container.data.length-pattern.end.length,pattern.end.length),container}(container,found.pattern,found.endOffset,found.startOffset),formatArray.forEach(function(format){editor.formatter.apply(format,{},container)})}),container}(editor,rng.startContainer,foundPattern)},$_gffj5fr8jh8lz379_applyInlineFormatSpace=function(editor,patterns){return doApplyInlineFormat(editor,patterns,!0)},$_gffj5fr8jh8lz379_applyInlineFormatEnter=function(editor,patterns){return doApplyInlineFormat(editor,patterns,!1)},$_gffj5fr8jh8lz379_applyBlockFormat=function(editor,patterns){var selection,dom,container,firstTextNode,node,format,textBlockElm,pattern,walker,rng,offset;if(selection=editor.selection,dom=editor.dom,selection.isCollapsed()&&(textBlockElm=dom.getParent(selection.getStart(),"p"))){for(walker=new global$3(textBlockElm,textBlockElm);node=walker.next();)if(3===node.nodeType){firstTextNode=node;break}if(firstTextNode){if(!(pattern=$_el6qhwrbjh8lz37d_findPattern(patterns,firstTextNode.data)))return;if(container=(rng=selection.getRng(!0)).startContainer,offset=rng.startOffset,firstTextNode===container&&(offset=Math.max(0,offset-pattern.start.length)),global$4.trim(firstTextNode.data).length===pattern.start.length)return;pattern.format&&(format=editor.formatter.get(pattern.format))&&format[0].block&&(firstTextNode.deleteData(0,pattern.start.length),editor.formatter.apply(pattern.format,{},firstTextNode),rng.setStart(container,offset),rng.collapse(!0),selection.setRng(rng)),pattern.cmd&&editor.undoManager.transact(function(){firstTextNode.deleteData(0,pattern.start.length),editor.execCommand(pattern.cmd)})}}},checkKeyEvent=function(codes,event,predicate){for(var i=0;i<codes.length;i++)if(predicate(codes[i],event))return!0},$_6uf8aer7jh8lz36z={handleEnter:function(editor,patterns){var wrappedTextNode,rng;(wrappedTextNode=$_gffj5fr8jh8lz379_applyInlineFormatEnter(editor,patterns))&&((rng=editor.dom.createRng()).setStart(wrappedTextNode,wrappedTextNode.data.length),rng.setEnd(wrappedTextNode,wrappedTextNode.data.length),editor.selection.setRng(rng)),$_gffj5fr8jh8lz379_applyBlockFormat(editor,patterns)},handleInlineKey:function(editor,patterns){var wrappedTextNode,lastChar,lastCharNode,rng,dom;(wrappedTextNode=$_gffj5fr8jh8lz379_applyInlineFormatSpace(editor,patterns))&&(dom=editor.dom,lastChar=wrappedTextNode.data.slice(-1),/[\u00a0 ]/.test(lastChar)&&(wrappedTextNode.deleteData(wrappedTextNode.data.length-1,1),lastCharNode=dom.doc.createTextNode(lastChar),dom.insertAfter(lastCharNode,wrappedTextNode.parentNode),(rng=dom.createRng()).setStart(lastCharNode,1),rng.setEnd(lastCharNode,1),editor.selection.setRng(rng)))},checkCharCode:function(chars,event){return checkKeyEvent(chars,event,function(chr,event){return chr.charCodeAt(0)===event.charCode})},checkKeyCode:function(codes,event){return checkKeyEvent(codes,event,function(code,event){return code===event.keyCode&&!1===global$2.modifierPressed(event)})}},$_6vgmler4jh8lz36x_setup=function(editor,patternsState){var charCodes=[",",".",";",":","!","?"],keyCodes=[32];editor.on("keydown",function(e){13!==e.keyCode||global$2.modifierPressed(e)||$_6uf8aer7jh8lz36z.handleEnter(editor,patternsState.get())},!0),editor.on("keyup",function(e){$_6uf8aer7jh8lz36z.checkKeyCode(keyCodes,e)&&$_6uf8aer7jh8lz36z.handleInlineKey(editor,patternsState.get())}),editor.on("keypress",function(e){$_6uf8aer7jh8lz36z.checkCharCode(charCodes,e)&&global$1.setEditorTimeout(editor,function(){$_6uf8aer7jh8lz36z.handleInlineKey(editor,patternsState.get())})})};global.add("textpattern",function(editor){var patternsState=Cell($_2d3ibsr3jh8lz36v_getPatterns(editor.settings));return $_6vgmler4jh8lz36x_setup(editor,patternsState),$_2txh6dr2jh8lz36u_get(patternsState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-visualblocks",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_h9rpfrsjh8lz3ee_fireVisualBlocks=function(editor,state){editor.fire("VisualBlocks",{state:state})},$_t5nqwrtjh8lz3ef_isEnabledByDefault=function(editor){return editor.getParam("visualblocks_default_state",!1)},$_t5nqwrtjh8lz3ef_getContentCss=function(editor){return editor.settings.visualblocks_content_css},global$1=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),global$2=tinymce.util.Tools.resolve("tinymce.util.Tools"),cssId=global$1.DOM.uniqueId(),$_g7sccqrujh8lz3eg_load=function(doc,url){var linkElements=global$2.toArray(doc.getElementsByTagName("link"));if(0===global$2.grep(linkElements,function(head){return head.id===cssId}).length){var linkElm=global$1.DOM.create("link",{id:cssId,rel:"stylesheet",href:url});doc.getElementsByTagName("head")[0].appendChild(linkElm)}},$_7ddznfrrjh8lz3ed_toggleVisualBlocks=function(editor,pluginUrl,enabledState){var dom=editor.dom,contentCss=$_t5nqwrtjh8lz3ef_getContentCss(editor);$_g7sccqrujh8lz3eg_load(editor.getDoc(),contentCss||pluginUrl+"/css/visualblocks.css"),dom.toggleClass(editor.getBody(),"mce-visualblocks"),enabledState.set(!enabledState.get()),$_h9rpfrsjh8lz3ee_fireVisualBlocks(editor,enabledState.get())},$_82j3kqrqjh8lz3ec_register=function(editor,pluginUrl,enabledState){editor.addCommand("mceVisualBlocks",function(){$_7ddznfrrjh8lz3ed_toggleVisualBlocks(editor,pluginUrl,enabledState)})},$_cs6iq5rxjh8lz3ei_setup=function(editor,pluginUrl,enabledState){editor.on("PreviewFormats AfterPreviewFormats",function(e){enabledState.get()&&editor.dom.toggleClass(editor.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),editor.on("init",function(){$_t5nqwrtjh8lz3ef_isEnabledByDefault(editor)&&$_7ddznfrrjh8lz3ed_toggleVisualBlocks(editor,pluginUrl,enabledState)}),editor.on("remove",function(){editor.dom.removeClass(editor.getBody(),"mce-visualblocks")})},toggleActiveState=function(editor,enabledState){return function(e){var ctrl=e.control;ctrl.active(enabledState.get()),editor.on("VisualBlocks",function(e){ctrl.active(e.state)})}},$_9qaw0mryjh8lz3ej_register=function(editor,enabledState){editor.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:toggleActiveState(editor,enabledState)}),editor.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:toggleActiveState(editor,enabledState),selectable:!0,context:"view",prependToContext:!0})};global.add("visualblocks",function(editor,pluginUrl){var enabledState=Cell(!1);$_82j3kqrqjh8lz3ec_register(editor,pluginUrl,enabledState),$_9qaw0mryjh8lz3ej_register(editor,enabledState),$_cs6iq5rxjh8lz3ei_setup(editor,pluginUrl,enabledState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-visualchars",["tinymce"],function(){return function(){!function(){"use strict";var Cell=function(initial){var value=initial,get=function(){return value};return{get:get,set:function(v){value=v},clone:function(){return Cell(get())}}},global=tinymce.util.Tools.resolve("tinymce.PluginManager"),$_bmmym6s2jh8lz3f4_get=function(toggleState){return{isEnabled:function(){return toggleState.get()}}},$_ca1g8as5jh8lz3f7_fireVisualChars=function(editor,state){return editor.fire("VisualChars",{state:state})},charMap={" ":"nbsp","­":"shy"},charMapToRegExp=function(charMap,global){var key,regExp="";for(key in charMap)regExp+=key;return new RegExp("["+regExp+"]",global?"g":"")},charMapToSelector=function(charMap){var key,selector="";for(key in charMap)selector&&(selector+=","),selector+="span.mce-"+charMap[key];return selector},$_4quw9ds7jh8lz3fg={charMap:charMap,regExp:charMapToRegExp(charMap),regExpGlobal:charMapToRegExp(charMap,!0),selector:charMapToSelector(charMap),charMapToRegExp:charMapToRegExp,charMapToSelector:charMapToSelector},constant=function(value){return function(){return value}},never=constant(!1),always=constant(!0),$_7oq9iksbjh8lz3g0={noop:function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i]},noarg:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return f()}},compose:function(fa,fb){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return fa(fb.apply(null,arguments))}},constant:constant,identity:function(x){return x},tripleEquals:function(a,b){return a===b},curry:function(f){for(var x=[],_i=1;_i<arguments.length;_i++)x[_i-1]=arguments[_i];for(var args=new Array(arguments.length-1),i=1;i<arguments.length;i++)args[i-1]=arguments[i];return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];for(var newArgs=new Array(arguments.length),j=0;j<newArgs.length;j++)newArgs[j]=arguments[j];var all=args.concat(newArgs);return f.apply(null,all)}},not:function(f){return function(){for(var x=[],_i=0;_i<arguments.length;_i++)x[_i]=arguments[_i];return!f.apply(null,arguments)}},die:function(msg){return function(){throw new Error(msg)}},apply:function(f){return f()},call:function(f){f()},never:never,always:always},never$1=$_7oq9iksbjh8lz3g0.never,always$1=$_7oq9iksbjh8lz3g0.always,none=function(){return NONE},NONE=function(){var eq=function(o){return o.isNone()},call=function(thunk){return thunk()},id=function(n){return n},me={fold:function(n,s){return n()},is:never$1,isSome:never$1,isNone:always$1,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||"error: getOrDie called on none.")},or:id,orThunk:call,map:none,ap:none,each:function(){},bind:none,flatten:none,exists:never$1,forall:always$1,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:$_7oq9iksbjh8lz3g0.constant("none()")};return Object.freeze&&Object.freeze(me),me}(),some=function(a){var constant_a=function(){return a},self=function(){return me},bind=function(f){return f(a)},me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always$1,isNone:never$1,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},ap:function(optfab){return optfab.fold(none,function(fab){return some(fab(a))})},each:function(f){f(a)},bind:bind,flatten:constant_a,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never$1,function(b){return elementEq(a,b)})},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return me},Option={some:some,none:none,from:function(value){return null==value?NONE:some(value)}},isType=function(type){return function(value){return function(x){if(null===x)return"null";var t=typeof x;return"object"===t&&Array.prototype.isPrototypeOf(x)?"array":"object"===t&&String.prototype.isPrototypeOf(x)?"string":t}(value)===type}},$_fnb6mscjh8lz3g2={isString:isType("string"),isObject:isType("object"),isArray:isType("array"),isNull:isType("null"),isBoolean:isType("boolean"),isUndefined:isType("undefined"),isFunction:isType("function"),isNumber:isType("number")},map=(Array.prototype.indexOf,function(xs,f){for(var len=xs.length,r=new Array(len),i=0;i<len;i++){var x=xs[i];r[i]=f(x,i,xs)}return r}),each=function(xs,f){for(var i=0,len=xs.length;i<len;i++)f(xs[i],i,xs)},$_9i8hjds9jh8lz3fq_map=(Array.prototype.push,Array.prototype.slice,$_fnb6mscjh8lz3g2.isFunction(Array.from)&&Array.from,map),$_9i8hjds9jh8lz3fq_each=each,fromDom=function(node){if(null==node)throw new Error("Node cannot be null or undefined");return{dom:$_7oq9iksbjh8lz3g0.constant(node)}},$_ca7ezesdjh8lz3g4={fromHtml:function(html,scope){var div=(scope||document).createElement("div");if(div.innerHTML=html,!div.hasChildNodes()||1<div.childNodes.length)throw console.error("HTML does not have a single root node",html),"HTML must have a single root node";return fromDom(div.childNodes[0])},fromTag:function(tag,scope){var node=(scope||document).createElement(tag);return fromDom(node)},fromText:function(text,scope){var node=(scope||document).createTextNode(text);return fromDom(node)},fromDom:fromDom,fromPoint:function(doc,x,y){return Option.from(doc.dom().elementFromPoint(x,y)).map(fromDom)}},$_6wgyobsfjh8lz3gb_COMMENT=8,$_6wgyobsfjh8lz3gb_DOCUMENT=9,$_6wgyobsfjh8lz3gb_TEXT=3,name=function(element){return element.dom().nodeName.toLowerCase()},type=function(element){return element.dom().nodeType},isType$1=function(t){return function(element){return type(element)===t}},isElement=isType$1(1),isText=isType$1($_6wgyobsfjh8lz3gb_TEXT),isDocument=isType$1($_6wgyobsfjh8lz3gb_DOCUMENT),$_aa8ah0sejh8lz3g9={name:name,type:type,value:function(element){return element.dom().nodeValue},isElement:isElement,isText:isText,isDocument:isDocument,isComment:function(element){return type(element)===$_6wgyobsfjh8lz3gb_COMMENT||"#comment"===name(element)}},$_g64rhxsgjh8lz3gb_wrapCharWithSpan=function(value){return'<span data-mce-bogus="1" class="mce-'+$_4quw9ds7jh8lz3fg.charMap[value]+'">'+value+"</span>"},filterDescendants=function(scope,predicate){var result=[],dom=scope.dom(),children=$_9i8hjds9jh8lz3fq_map(dom.childNodes,$_ca7ezesdjh8lz3g4.fromDom);return $_9i8hjds9jh8lz3fq_each(children,function(x){predicate(x)&&(result=result.concat([x])),result=result.concat(filterDescendants(x,predicate))}),result},$_5w2pzts8jh8lz3fi={isMatch:function(n){return $_aa8ah0sejh8lz3g9.isText(n)&&void 0!==$_aa8ah0sejh8lz3g9.value(n)&&$_4quw9ds7jh8lz3fg.regExp.test($_aa8ah0sejh8lz3g9.value(n))},filterDescendants:filterDescendants,findParentElm:function(elm,rootElm){for(;elm.parentNode;){if(elm.parentNode===rootElm)return elm;elm=elm.parentNode}},replaceWithSpans:function(html){return html.replace($_4quw9ds7jh8lz3fg.regExpGlobal,$_g64rhxsgjh8lz3gb_wrapCharWithSpan)}},show=function(editor,rootElm){var node,div,nodeList=$_5w2pzts8jh8lz3fi.filterDescendants($_ca7ezesdjh8lz3g4.fromDom(rootElm),$_5w2pzts8jh8lz3fi.isMatch);$_9i8hjds9jh8lz3fq_each(nodeList,function(n){var withSpans=$_5w2pzts8jh8lz3fi.replaceWithSpans($_aa8ah0sejh8lz3g9.value(n));for(div=editor.dom.create("div",null,withSpans);node=div.lastChild;)editor.dom.insertAfter(node,n.dom());editor.dom.remove(n.dom())})},hide=function(editor,body){var nodeList=editor.dom.select($_4quw9ds7jh8lz3fg.selector,body);$_9i8hjds9jh8lz3fq_each(nodeList,function(node){editor.dom.remove(node,1)})},$_3w2dxys6jh8lz3f8_show=show,$_3w2dxys6jh8lz3f8_hide=hide,$_3w2dxys6jh8lz3f8_toggle=function(editor){var body=editor.getBody(),bookmark=editor.selection.getBookmark(),parentNode=$_5w2pzts8jh8lz3fi.findParentElm(editor.selection.getNode(),body);hide(editor,parentNode=void 0!==parentNode?parentNode:body),show(editor,parentNode),editor.selection.moveToBookmark(bookmark)},$_8znikjs4jh8lz3f6_toggleVisualChars=function(editor,toggleState){var bookmark,body=editor.getBody(),selection=editor.selection;toggleState.set(!toggleState.get()),$_ca1g8as5jh8lz3f7_fireVisualChars(editor,toggleState.get()),bookmark=selection.getBookmark(),!0===toggleState.get()?$_3w2dxys6jh8lz3f8_show(editor,body):$_3w2dxys6jh8lz3f8_hide(editor,body),selection.moveToBookmark(bookmark)},$_fbutd9s3jh8lz3f5_register=function(editor,toggleState){editor.addCommand("mceVisualChars",function(){$_8znikjs4jh8lz3f6_toggleVisualChars(editor,toggleState)})},global$1=tinymce.util.Tools.resolve("tinymce.util.Delay"),$_353u01shjh8lz3gd_setup=function(editor,toggleState){var debouncedToggle=global$1.debounce(function(){$_3w2dxys6jh8lz3f8_toggle(editor)},300);!1!==editor.settings.forced_root_block&&editor.on("keydown",function(e){!0===toggleState.get()&&(13===e.keyCode?$_3w2dxys6jh8lz3f8_toggle(editor):debouncedToggle())})},toggleActiveState=function(editor){return function(e){var ctrl=e.control;editor.on("VisualChars",function(e){ctrl.active(e.state)})}};global.add("visualchars",function(editor){var toggleState=Cell(!1);return $_fbutd9s3jh8lz3f5_register(editor,toggleState),function(editor){editor.addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:toggleActiveState(editor)}),editor.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:toggleActiveState(editor),selectable:!0,context:"view",prependToContext:!0})}(editor),$_353u01shjh8lz3gd_setup(editor,toggleState),$_bmmym6s2jh8lz3f4_get(toggleState)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-wordcount",["tinymce"],function(){return function(){!function(){"use strict";var global=tinymce.util.Tools.resolve("tinymce.PluginManager"),regExps_midnumlet="[-'\\.‘’․﹒＇．]",regExps_midletter="[:··״‧︓﹕：]",regExps_midnum="[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",regExps_numeric="[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",regExps_cr="\\r",regExps_lf="\\n",regExps_newline="[\v\f\u2028\u2029]",regExps_extend="[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",regExps_format="[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",regExps_katakana="[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",regExps_extendnumlet="[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",regExps_punctuation="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",$_7u8uzzspjh8lz3i4={characterIndices:{ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},SETS:[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp(regExps_midnumlet),new RegExp(regExps_midletter),new RegExp(regExps_midnum),new RegExp(regExps_numeric),new RegExp(regExps_cr),new RegExp(regExps_lf),new RegExp(regExps_newline),new RegExp(regExps_extend),new RegExp(regExps_format),new RegExp(regExps_katakana),new RegExp(regExps_extendnumlet),new RegExp("@")],EMPTY_STRING:"",PUNCTUATION:new RegExp("^"+regExps_punctuation+"$"),WHITESPACE:/^\s+$/},each=function(o,cb,s){var n,l;if(!o)return 0;if(s=s||o,void 0!==o.length){for(n=0,l=o.length;n<l;n++)if(!1===cb.call(s,o[n],n,o))return 0}else for(n in o)if(o.hasOwnProperty(n)&&!1===cb.call(s,o[n],n,o))return 0;return 1},$_4dn8xisrjh8lz3i9_map=function(array,callback){var out=[];return each(array,function(item,index){out.push(callback(item,index,array))}),out},SETS$1=$_7u8uzzspjh8lz3i4.SETS,OTHER=$_7u8uzzspjh8lz3i4.characterIndices.OTHER,getType=function(char){var j,set,type=OTHER,setsLength=SETS$1.length;for(j=0;j<setsLength;++j)if((set=SETS$1[j])&&set.test(char)){type=j;break}return type},$_7jetzwsqjh8lz3i8_classify=function(string){var func,cache,memoized=(func=getType,cache={},function(char){if(cache[char])return cache[char];var result=func(char);return cache[char]=result});return $_4dn8xisrjh8lz3i9_map(string.split(""),memoized)},ci=$_7u8uzzspjh8lz3i4.characterIndices,$_b8cfs8ssjh8lz3ib_isWordBoundary=function(map,index){var prevType,nextNextType,type=map[index],nextType=map[index+1];return!(index<0||index>map.length-1&&0!==index||type===ci.ALETTER&&nextType===ci.ALETTER||(nextNextType=map[index+2],type===ci.ALETTER&&(nextType===ci.MIDLETTER||nextType===ci.MIDNUMLET||nextType===ci.AT)&&nextNextType===ci.ALETTER||(prevType=map[index-1],(type===ci.MIDLETTER||type===ci.MIDNUMLET||nextType===ci.AT)&&nextType===ci.ALETTER&&prevType===ci.ALETTER||!(type!==ci.NUMERIC&&type!==ci.ALETTER||nextType!==ci.NUMERIC&&nextType!==ci.ALETTER)||(type===ci.MIDNUM||type===ci.MIDNUMLET)&&nextType===ci.NUMERIC&&prevType===ci.NUMERIC||type===ci.NUMERIC&&(nextType===ci.MIDNUM||nextType===ci.MIDNUMLET)&&nextNextType===ci.NUMERIC||type===ci.EXTEND||type===ci.FORMAT||prevType===ci.EXTEND||prevType===ci.FORMAT||nextType===ci.EXTEND||nextType===ci.FORMAT||type===ci.CR&&nextType===ci.LF||type!==ci.NEWLINE&&type!==ci.CR&&type!==ci.LF&&nextType!==ci.NEWLINE&&nextType!==ci.CR&&nextType!==ci.LF&&(type===ci.KATAKANA&&nextType===ci.KATAKANA||nextType===ci.EXTENDNUMLET&&(type===ci.ALETTER||type===ci.NUMERIC||type===ci.KATAKANA||type===ci.EXTENDNUMLET)||type===ci.EXTENDNUMLET&&(nextType===ci.ALETTER||nextType===ci.NUMERIC||nextType===ci.KATAKANA)||type===ci.AT))))},EMPTY_STRING$1=$_7u8uzzspjh8lz3i4.EMPTY_STRING,WHITESPACE$1=$_7u8uzzspjh8lz3i4.WHITESPACE,PUNCTUATION$1=$_7u8uzzspjh8lz3i4.PUNCTUATION,isProtocol=function(word){return"http"===word||"https"===word},extractUrl=function(word,str,index){var endIndex=function(str,index){var i;for(i=index;i<str.length;++i){var chr=str.charAt(i);if(WHITESPACE$1.test(chr))break}return i}(str,index+1),peakedWord=str.substring(index+1,endIndex);return"://"===peakedWord.substr(0,3)?{word:word+peakedWord,index:endIndex}:{word:word,index:index}},$_70byijsojh8lz3i1_getWords=function(str,options){return function(str,options){var chr,includePunctuation,includeWhitespace,i=0,map=$_7jetzwsqjh8lz3i8_classify(str),len=map.length,word=[],words=[];for(options||(options={}),options.ignoreCase&&(str=str.toLowerCase()),includePunctuation=options.includePunctuation,includeWhitespace=options.includeWhitespace;i<len;++i)if(chr=str.charAt(i),word.push(chr),$_b8cfs8ssjh8lz3ib_isWordBoundary(map,i)){if((word=word.join(EMPTY_STRING$1))&&(includeWhitespace||!WHITESPACE$1.test(word))&&(includePunctuation||!PUNCTUATION$1.test(word)))if(isProtocol(word)){var obj=extractUrl(word,str,i);words.push(obj.word),i=obj.index}else words.push(word);word=[]}return words}(str.replace(/\ufeff/g,""),options)},$_e2zt0csnjh8lz3i0_getCount=function(editor){return $_70byijsojh8lz3i1_getWords(function(editor){return editor.removed?"":editor.getBody().innerText}(editor)).length},$_c37nf7smjh8lz3hz_get=function(editor){return{getCount:function(){return $_e2zt0csnjh8lz3i0_getCount(editor)}}},global$1=tinymce.util.Tools.resolve("tinymce.util.Delay"),global$2=tinymce.util.Tools.resolve("tinymce.util.I18n"),$_30dxcostjh8lz3ie_setup=function(editor){var wordsToText=function(editor){return global$2.translate(["{0} words",$_e2zt0csnjh8lz3i0_getCount(editor)])},update=function(){editor.theme.panel.find("#wordcount").text(wordsToText(editor))};editor.on("init",function(){var statusbar=editor.theme.panel&&editor.theme.panel.find("#statusbar")[0],debouncedUpdate=global$1.debounce(update,300);statusbar&&global$1.setEditorTimeout(editor,function(){statusbar.insert({type:"label",name:"wordcount",text:wordsToText(editor),classes:"wordcount",disabled:editor.settings.readonly},0),editor.on("setcontent beforeaddundo undo redo keyup",debouncedUpdate)},0)})};global.add("wordcount",function(editor){return $_30dxcostjh8lz3ie_setup(editor),$_c37nf7smjh8lz3hz_get(editor)})}()}.apply(root,arguments)})}(this),function(root){define("tinymce-compat3x",["tinymce"],function(){return function(){!function(tinymce){var reported;function noop(){}function log(apiCall){!reported&&window&&window.console&&(reported=!0,console.log("Deprecated TinyMCE API call: "+apiCall))}function Dispatcher(target,newEventName,argsMap,defaultScope){target=target||this;var cbs=[];newEventName?(this.add=function(callback,scope,prepend){function patchedEventCallback(e){var callbackArgs=[];if("string"==typeof argsMap&&(argsMap=argsMap.split(" ")),argsMap&&"function"!=typeof argsMap)for(var i=0;i<argsMap.length;i++)callbackArgs.push(e[argsMap[i]]);("function"!=typeof argsMap||(callbackArgs=argsMap(newEventName,e,target)))&&(argsMap||(callbackArgs=[e]),callbackArgs.unshift(defaultScope||target),!1===callback.apply(scope||defaultScope||target,callbackArgs)&&e.stopImmediatePropagation())}log("<target>.on"+newEventName+".add(..)"),target.on(newEventName,patchedEventCallback,prepend);var handlers={original:callback,patched:patchedEventCallback};return cbs.push(handlers),patchedEventCallback},this.addToTop=function(callback,scope){this.add(callback,scope,!0)},this.remove=function(callback){return cbs.forEach(function(item,i){if(item.original===callback)return cbs.splice(i,1),target.off(newEventName,item.patched)}),target.off(newEventName,callback)},this.dispatch=function(){return target.fire(newEventName),!0}):this.add=this.addToTop=this.remove=this.dispatch=noop}function patchEditor(editor){function patchEditorEvents(oldEventNames,argsMap){tinymce.each(oldEventNames.split(" "),function(oldName){editor["on"+oldName]=new Dispatcher(editor,oldName,argsMap)})}function convertUndoEventArgs(type,event,target){return[event.level,target]}function filterSelectionEvents(needsSelection){return function(type,e){if(!e.selection&&!needsSelection||e.selection==needsSelection)return[e]}}if(!editor.controlManager){editor.controlManager={buttons:{},setDisabled:function(name,state){log("controlManager.setDisabled(..)"),this.buttons[name]&&this.buttons[name].disabled(state)},setActive:function(name,state){log("controlManager.setActive(..)"),this.buttons[name]&&this.buttons[name].active(state)},onAdd:new Dispatcher,onPostRender:new Dispatcher,add:function(obj){return obj},createButton:cmNoop,createColorSplitButton:cmNoop,createControl:cmNoop,createDropMenu:cmNoop,createListBox:cmNoop,createMenuButton:cmNoop,createSeparator:cmNoop,createSplitButton:cmNoop,createToolbar:cmNoop,createToolbarGroup:cmNoop,destroy:noop,get:noop,setControlType:cmNoop},patchEditorEvents("PreInit BeforeRenderUI PostRender Load Init Remove Activate Deactivate","editor"),patchEditorEvents("Click MouseUp MouseDown DblClick KeyDown KeyUp KeyPress ContextMenu Paste Submit Reset"),patchEditorEvents("BeforeExecCommand ExecCommand","command ui value args"),patchEditorEvents("PreProcess PostProcess LoadContent SaveContent Change"),patchEditorEvents("BeforeSetContent BeforeGetContent SetContent GetContent",filterSelectionEvents(!1)),patchEditorEvents("SetProgressState","state time"),patchEditorEvents("VisualAid","element hasVisual"),patchEditorEvents("Undo Redo",convertUndoEventArgs),patchEditorEvents("NodeChange",function(type,e){return[editor.controlManager,e.element,editor.selection.isCollapsed(),e]});var originalAddButton=editor.addButton;editor.addButton=function(name,settings){var originalOnPostRender,str,prefixedStr,translatedStr;function patchedPostRender(){if(editor.controlManager.buttons[name]=this,originalOnPostRender)return originalOnPostRender.apply(this,arguments)}for(var key in settings)"onpostrender"===key.toLowerCase()&&(originalOnPostRender=settings[key],settings.onPostRender=patchedPostRender);return originalOnPostRender||(settings.onPostRender=patchedPostRender),settings.title&&(settings.title=(str=settings.title,prefixedStr=[editor.settings.language||"en",str].join("."),translatedStr=tinymce.i18n.translate(prefixedStr),prefixedStr!==translatedStr?translatedStr:tinymce.i18n.translate(str))),originalAddButton.call(this,name,settings)},editor.on("init",function(){var undoManager=editor.undoManager,selection=editor.selection;undoManager.onUndo=new Dispatcher(editor,"Undo",convertUndoEventArgs,null,undoManager),undoManager.onRedo=new Dispatcher(editor,"Redo",convertUndoEventArgs,null,undoManager),undoManager.onBeforeAdd=new Dispatcher(editor,"BeforeAddUndo",null,undoManager),undoManager.onAdd=new Dispatcher(editor,"AddUndo",null,undoManager),selection.onBeforeGetContent=new Dispatcher(editor,"BeforeGetContent",filterSelectionEvents(!0),selection),selection.onGetContent=new Dispatcher(editor,"GetContent",filterSelectionEvents(!0),selection),selection.onBeforeSetContent=new Dispatcher(editor,"BeforeSetContent",filterSelectionEvents(!0),selection),selection.onSetContent=new Dispatcher(editor,"SetContent",filterSelectionEvents(!0),selection)}),editor.on("BeforeRenderUI",function(){var windowManager=editor.windowManager;windowManager.onOpen=new Dispatcher,windowManager.onClose=new Dispatcher,windowManager.createInstance=function(className,a,b,c,d,e){return log("windowManager.createInstance(..)"),new(tinymce.resolve(className))(a,b,c,d,e)}})}function cmNoop(){var obj={};function _noop(){return cmNoop()}return log("editor.controlManager.*"),tinymce.each("add addMenu addSeparator collapse createMenu destroy displayColor expand focus getLength hasMenus hideMenu isActive isCollapsed isDisabled isRendered isSelected mark postRender remove removeAll renderHTML renderMenu renderNode renderTo select selectByIndex setActive setAriaProperty setColor setDisabled setSelected setState showMenu update".split(" "),function(method){obj[method]=_noop}),obj}}tinymce.util.Dispatcher=Dispatcher,tinymce.onBeforeUnload=new Dispatcher(tinymce,"BeforeUnload"),tinymce.onAddEditor=new Dispatcher(tinymce,"AddEditor","editor"),tinymce.onRemoveEditor=new Dispatcher(tinymce,"RemoveEditor","editor"),tinymce.util.Cookie={get:noop,getHash:noop,remove:noop,set:noop,setHash:noop},tinymce.on("SetupEditor",function(e){patchEditor(e.editor)}),tinymce.PluginManager.add("compat3x",patchEditor),tinymce.addI18n=function(prefix,o){var I18n=tinymce.util.I18n,each=tinymce.each;"string"!=typeof prefix||-1!==prefix.indexOf(".")?tinymce.is(prefix,"string")?each(o,function(o,k){I18n.data[prefix+"."+k]=o}):each(prefix,function(o,lc){each(o,function(o,g){each(o,function(o,k){"common"===g?I18n.data[lc+"."+k]=o:I18n.data[lc+"."+g+"."+k]=o})})}):I18n.add(prefix,o)}}(tinymce)}.apply(root,arguments)})}(this),define("mockup-patterns-tinymce",["jquery","underscore","pat-base","tinymce","mockup-utils","mockup-patterns-tinymce-url/js/links","mockup-i18n","translate","tinymce-modern-theme","tinymce-advlist","tinymce-anchor","tinymce-autolink","tinymce-autoresize","tinymce-autosave","tinymce-bbcode","tinymce-charmap","tinymce-code","tinymce-colorpicker","tinymce-contextmenu","tinymce-directionality","tinymce-emoticons","tinymce-fullpage","tinymce-fullscreen","tinymce-hr","tinymce-image","tinymce-importcss","tinymce-insertdatetime","tinymce-legacyoutput","tinymce-link","tinymce-lists","tinymce-media","tinymce-nonbreaking","tinymce-noneditable","tinymce-pagebreak","tinymce-paste","tinymce-preview","tinymce-print","tinymce-save","tinymce-searchreplace","tinymce-spellchecker","tinymce-tabfocus","tinymce-table","tinymce-template","tinymce-textcolor","tinymce-textpattern","tinymce-visualblocks","tinymce-visualchars","tinymce-wordcount","tinymce-compat3x"],function($,_,Base,tinymce,utils,LinkModal,I18n,_t){"use strict";return Base.extend({name:"tinymce",trigger:".pat-tinymce",parser:"mockup",defaults:{upload:{uploadMultiple:!1,maxFiles:1,showTitle:!1},relatedItems:{attributes:["UID","Title","portal_type","path","getURL","getIcon","is_folderish","review_state"],batchSize:20,basePath:"/",vocabularyUrl:null,width:500,maximumSelectionSize:1,placeholder:_t("Search for item on site...")},text:{insertBtn:_t("Insert"),cancelBtn:_t("Cancel"),insertHeading:_t("Insert link"),title:_t("Title"),internal:_t("Internal"),external:_t("External URL (can be relative within this site or absolute if it starts with http:// or https://)"),email:_t("Email Address"),anchor:_t("Anchor"),subject:_t("Email Subject (optional)"),image:_t("Image"),imageAlign:_t("Align"),scale:_t("Size"),alt:_t("Alternative Text"),externalImage:_t("External Image URL (can be relative within this site or absolute if it starts with http:// or https://)")},loadingBaseUrl:"../../../bower_components/tinymce-builded/js/tinymce/",prependToUrl:"",appendToUrl:"",linkAttribute:"path",prependToScalePart:"/imagescale/",appendToScalePart:"",appendToOriginalScalePart:"",defaultScale:"large",imageScales:[{title:"Mini",value:"mini"},{title:"Thumb",value:"thumb"},{title:"Listing",value:"listing"},{title:"Preview",value:"preview"},{title:"Tile",value:"tile"},{title:"Icon",value:"icon"},{title:"Large",value:"large"}],imageClasses:{"image-inline":"Inline","image-right":"Right","image-left":"Left"},targetList:[{text:_t("Open in this window / frame"),value:""},{text:_t("Open in new window"),value:"_blank"},{text:_t("Open in parent window / frame"),value:"_parent"},{text:_t("Open in top frame (replaces all frames)"),value:"_top"}],imageTypes:["Image"],folderTypes:["Folder","Plone Site"],tiny:{content_css:"/base/bower_components/tinymce-builded/js/tinymce/skins/lightgray/content.min.css",theme:"modern",plugins:["advlist","autolink","lists","charmap","print","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","contextmenu","paste","plonelink","ploneimage"],menubar:"edit table format tools view insert",toolbar:"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | unlink plonelink ploneimage",height:400},inline:!1},addLinkClicked:function(){if(null===this.linkModal){var $el=$("<div/>").insertAfter(this.$el),linkTypes=["internal","upload","external","email","anchor"];this.options.upload||linkTypes.splice(1,1),this.linkModal=new LinkModal($el,$.extend(!0,{},this.options,{tinypattern:this,linkTypes:linkTypes})),this.linkModal.show()}else this.linkModal.reinitialize(),this.linkModal.show()},addImageClicked:function(){if(null===this.imageModal){var linkTypes=["image","uploadImage","externalImage"];this.options.upload||linkTypes.splice(1,1);var options=$.extend(!0,{},this.options,{tinypattern:this,linkTypes:linkTypes,initialLinkType:"image",text:{insertHeading:_t("Insert Image")},relatedItems:{selectableTypes:this.options.imageTypes}}),$el=$("<div/>").insertAfter(this.$el);this.imageModal=new LinkModal($el,options),this.imageModal.show()}else this.imageModal.reinitialize(),this.imageModal.show()},generateUrl:function(data){var part=data[this.options.linkAttribute];return this.options.prependToUrl+part+this.options.appendToUrl},generateImageUrl:function(data,scale_name){var url=this.generateUrl(data);return scale_name?url=url+this.options.prependToScalePart+scale_name+this.options.appendToScalePart:url+=this.options.appendToOriginalScalePart,url},stripGeneratedUrl:function(url){if(url=url.split(this.options.prependToScalePart,2)[0],this.options.prependToUrl){var parts=url.split(this.options.prependToUrl,2);2===parts.length&&(url=parts[1])}return this.options.appendToUrl&&(url=url.split(this.options.appendToUrl)[0]),url},getScaleFromUrl:function(url){var split=url.split(this.options.prependToScalePart);return 2!==split.length?null:(-1!==(url=this.options.appendToScalePart?split[1].split(this.options.appendToScalePart)[0]:split[1]).indexOf("/image_")&&(url=url.split("/image_")[1]),url)},initLanguage:function(call_back){var self=this,lang=(new I18n).currentLanguage;"en"!==lang&&"en"!==self.options.tiny.language?(tinymce.baseURL=self.options.loadingBaseUrl,$.ajax({url:tinymce.baseURL+"/langs/"+lang+".js",method:"GET",cache:"true",success:function(){self.options.tiny.language=lang,call_back()},error:function(){lang=1<lang.split("_")?lang.split("_")[0]:1<lang.split("-")?lang.split("-")[0]:lang+"_"+lang.toUpperCase(),$.ajax({url:tinymce.baseURL+"/langs/"+lang+".js",method:"GET",cache:"true",success:function(){self.options.tiny.language=lang,call_back()},error:function(){call_back()}})}})):call_back()},init:function(){var self=this;self.linkModal=self.imageModal=self.uploadModal=self.pasteModal=null;var id=utils.setId(self.$el);self.options.imageScales&&"string"==typeof self.options.imageScales&&(self.options.imageScales=JSON.parse(self.options.imageScales));var tinyOptions=self.options.tiny;!0===self.options.inline&&(self.options.tiny.inline=!0),self.tinyId=self.options.inline?id+"-editable":id,tinyOptions.selector="#"+self.tinyId,tinyOptions.addLinkClicked=function(){self.addLinkClicked.apply(self,[])},tinyOptions.addImageClicked=function(file){self.addImageClicked.apply(self,[file])},tinyOptions.skin=!1,tinyOptions.init_instance_callback=function(editor){void 0!==self.tiny&&null!==self.tiny||(self.tiny=editor)},self.initLanguage(function(){if("string"==typeof self.options.folderTypes&&(self.options.folderTypes=self.options.folderTypes.split(",")),"string"==typeof self.options.imageTypes&&(self.options.imageTypes=self.options.imageTypes.split(",")),!0===self.options.inline&&(self.$el.after('<div id="'+self.tinyId+'">'+self.$el.val()+"</div>"),self.$el.hide()),tinyOptions.importcss_file_filter&&"function"==typeof tinyOptions.importcss_file_filter.indexOf&&-1!==tinyOptions.importcss_file_filter.indexOf(",")){var files=tinyOptions.importcss_file_filter.split(",");tinyOptions.importcss_file_filter=function(value){for(var i=0;i<files.length;i++)if(-1!==value.indexOf(files[i]))return!0;return!1}}if(tinyOptions.importcss_selector_filter&&tinyOptions.importcss_selector_filter.length&&(tinyOptions.importcss_selector_filter=new RegExp(tinyOptions.importcss_selector_filter)),tinyOptions.importcss_groups&&tinyOptions.importcss_groups.length)for(var i=0;i<tinyOptions.importcss_groups.length;i++)tinyOptions.importcss_groups[i].filter&&tinyOptions.importcss_groups[i].filter.length&&(tinyOptions.importcss_groups[i].filter=new RegExp(tinyOptions.importcss_groups[i].filter));tinymce.init(tinyOptions),self.tiny=tinymce.get(self.tinyId),self.$el.parents("form").on("submit",function(){!0===self.options.inline?self.$el.val(self.tiny.getContent()):self.tiny.save()})})},destroy:function(){this.tiny&&(!0===this.options.inline&&(this.$el.val(this.tiny.getContent()),$("#"+this.tinyId).remove(),this.$el.show()),this.tiny.destroy(),this.tiny=void 0)}})}),function(h){"function"==typeof define&&define.amd?define("datatables.net",["jquery"],function(E){return h(E,window,document)}):"object"==typeof exports?module.exports=function(E,G){return E||(E=window),G||(G="undefined"!=typeof window?require("jquery"):require("jquery")(E)),h(G,E,E.document)}:h(jQuery,window,document)}(function(h,E,G,k){function X(a){var b,c,d={};h.each(a,function(e){(b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(c=e.replace(b[0],b[2].toLowerCase()),d[c]=e,"o"===b[1]&&X(a[e]))}),a._hungarianMap=d}function I(a,b,c){var d;a._hungarianMap||X(a),h.each(b,function(e){(d=a._hungarianMap[e])===k||!c&&b[d]!==k||("o"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),I(a[d],b[d],c)):b[d]=b[e])})}function Ca(a){var b=m.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&F(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&F(a,a,"sZeroRecords","sLoadingRecords"),a.sInfoThousands&&(a.sThousands=a.sInfoThousands),(a=a.sDecimal)&&cb(a)}function db(a){if(A(a,"ordering","bSort"),A(a,"orderMulti","bSortMulti"),A(a,"orderClasses","bSortClasses"),A(a,"orderCellsTop","bSortCellsTop"),A(a,"order","aaSorting"),A(a,"orderFixed","aaSortingFixed"),A(a,"paging","bPaginate"),A(a,"pagingType","sPaginationType"),A(a,"pageLength","iDisplayLength"),A(a,"searching","bFilter"),"boolean"==typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":""),"boolean"==typeof a.scrollX&&(a.scrollX=a.scrollX?"100%":""),a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&I(m.models.oSearch,a[b])}function eb(a){A(a,"orderable","bSortable"),A(a,"orderData","aDataSort"),A(a,"orderSequence","asSorting"),A(a,"orderDataType","sortDataType");var b=a.aDataSort;"number"==typeof b&&!h.isArray(b)&&(a.aDataSort=[b])}function fb(a){if(!m.__browser){var b={};m.__browser=b;var c=h("<div/>").css({position:"fixed",top:0,left:-1*h(E).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(h("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(h("<div/>").css({width:"100%",height:10}))).appendTo("body"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth,b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth,b.bScrollbarLeft=1!==Math.round(e.offset().left),b.bBounding=!!c[0].getBoundingClientRect().width,c.remove()}h.extend(a.oBrowser,m.__browser),a.oScroll.iBarWidth=m.__browser.barWidth}function gb(a,b,c,d,e,f){var g,j=!1;for(c!==k&&(g=c,j=!0);d!==e;)a.hasOwnProperty(d)&&(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Da(a,b){var c=m.defaults.column,d=a.aoColumns.length;c=h.extend({},m.models.oColumn,c,{nTh:b||G.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c),(c=a.aoPreSearchCols)[d]=h.extend({},m.models.oSearch,c[d]),ja(a,d,h(b).data())}function ja(a,b,c){b=a.aoColumns[b];var d=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var f=(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==k&&null!==c&&(eb(c),I(m.defaults.column,c),c.mDataProp!==k&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),c.sClass&&e.addClass(c.sClass),h.extend(b,c),F(b,c,"sWidth","sWidthOrig"),c.iDataSort!==k&&(b.aDataSort=[c.iDataSort]),F(b,c,"aDataSort"));var g=b.mData,j=Q(g),i=b.mRender?Q(b.mRender):null;c=function(a){return"string"==typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter)),b._setter=null,b.fnGetData=function(a,b,c){var d=j(a,b,k,c);return i&&b?i(d,b,a,c):d},b.fnSetData=function(a,b,c){return R(g)(a,b,c)},"number"!=typeof g&&(a._rowReadObject=!0),a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone)),a=-1!==h.inArray("asc",b.asSorting),c=-1!==h.inArray("desc",b.asSorting),b.bSortable&&(a||c)?b.sSortingClassJUI=a&&!c?(b.sSortingClass=d.sSortableAsc,d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,d.sSortJUI):(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI="")}function Y(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Ea(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}(""!==(b=a.oScroll).sY||""!==b.sX)&&ka(a),r(a,null,"column-sizing",[a])}function Z(a,b){var c=la(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function $(a,b){var c=la(a,"bVisible");return-1!==(c=h.inArray(b,c))?c:null}function aa(a){var b=0;return h.each(a.aoColumns,function(a,d){d.bVisible&&"none"!==h(d.nTh).css("display")&&b++}),b}function la(a,b){var c=[];return h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)}),c}function Fa(a){var e,f,g,j,i,h,l,q,t,b=a.aoColumns,c=a.aoData,d=m.ext.type.detect;for(e=0,f=b.length;e<f;e++)if(t=[],!(l=b[e]).sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(g=0,j=d.length;g<j;g++){for(i=0,h=c.length;i<h&&(t[i]===k&&(t[i]=B(a,i,e,"type")),(q=d[g](t[i],a))||g===d.length-1)&&"html"!==q;i++);if(q){l.sType=q;break}}l.sType||(l.sType="string")}}function hb(a,b,c,d){var e,f,g,j,i,n,l=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){var q=(n=b[e]).targets!==k?n.targets:n.aTargets;for(h.isArray(q)||(q=[q]),f=0,g=q.length;f<g;f++)if("number"==typeof q[f]&&0<=q[f]){for(;l.length<=q[f];)Da(a);d(q[f],n)}else if("number"==typeof q[f]&&q[f]<0)d(l.length+q[f],n);else if("string"==typeof q[f])for(j=0,i=l.length;j<i;j++)("_all"==q[f]||h(l[j].nTh).hasClass(q[f]))&&d(j,n)}if(c)for(e=0,a=c.length;e<a;e++)d(e,c[e])}function M(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},m.models.oRow,{src:c?"dom":"data",idx:e});f._aData=b,a.aoData.push(f);for(var g=a.aoColumns,j=0,i=g.length;j<i;j++)g[j].sType=null;return a.aiDisplayMaster.push(e),(b=a.rowIdFn(b))!==k&&(a.aIds[b]=f),(c||!a.oFeatures.bDeferRender)&&Ga(a,e,c,d),e}function ma(a,b){var c;return b instanceof h||(b=h(b)),b.map(function(b,e){return c=Ha(a,e),M(a,c.data,e,c.cells)})}function B(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,i=f.fnGetData(g,d,{settings:a,row:b,col:c});if(i===k)return a.iDrawError!=e&&null===j&&(J(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=e),j;if(i!==g&&null!==i||null===j||d===k){if("function"==typeof i)return i.call(g)}else i=j;return null===i&&"display"==d?"":i}function ib(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function Ia(a){return h.map(a.match(/(\\.|[^\.])+/g)||[""],function(a){return a.replace(/\\\./g,".")})}function Q(a){if(h.isPlainObject(a)){var b={};return h.each(a,function(a,c){c&&(b[a]=Q(c))}),function(a,c,f,g){var j=b[c]||b._;return j!==k?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"==typeof a)return function(b,c,f,g){return a(b,c,f,g)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b){return b[a]};var c=function(a,b,f){var g,j;if(""!==f)for(var i=0,n=(j=Ia(f)).length;i<n;i++){if(f=j[i].match(ba),g=j[i].match(U),f){if(j[i]=j[i].replace(ba,""),""!==j[i]&&(a=a[j[i]]),g=[],j.splice(0,i+1),j=j.join("."),h.isArray(a))for(i=0,n=a.length;i<n;i++)g.push(c(a[i],b,j));a=""===(a=f[0].substring(1,f[0].length-1))?g:g.join(a);break}if(g)j[i]=j[i].replace(U,""),a=a[j[i]]();else{if(null===a||a[j[i]]===k)return k;a=a[j[i]]}}return a};return function(b,e){return c(b,e,a)}}function R(a){if(h.isPlainObject(a))return R(a._);if(null===a)return function(){};if("function"==typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"!=typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,d){b[a]=d};var b=function(a,d,e){var f;f=(e=Ia(e))[e.length-1];for(var g,j,i=0,n=e.length-1;i<n;i++){if(g=e[i].match(ba),j=e[i].match(U),g){if(e[i]=e[i].replace(ba,""),a[e[i]]=[],(f=e.slice()).splice(0,i+1),g=f.join("."),h.isArray(d))for(j=0,n=d.length;j<n;j++)b(f={},d[j],g),a[e[i]].push(f);else a[e[i]]=d;return}j&&(e[i]=e[i].replace(U,""),a=a[e[i]](d)),null!==a[e[i]]&&a[e[i]]!==k||(a[e[i]]={}),a=a[e[i]]}f.match(U)?a[f.replace(U,"")](d):a[f.replace(ba,"")]=d};return function(c,d){return b(c,d,a)}}function Ja(a){return D(a.aoData,"_aData")}function na(a){a.aoData.length=0,a.aiDisplayMaster.length=0,a.aiDisplay.length=0,a.aIds={}}function oa(a,b,c){for(var d=-1,e=0,f=a.length;e<f;e++)a[e]==b?d=e:a[e]>b&&a[e]--;-1!=d&&c===k&&a.splice(d,1)}function ca(a,b,c,d){var f,e=a.aoData[b],g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=B(a,b,d,"display")};if("dom"!==c&&(c&&"auto"!==c||"dom"!==e.src)){var j=e.anCells;if(j)if(d!==k)g(j[d],d);else for(c=0,f=j.length;c<f;c++)g(j[c],c)}else e._aData=Ha(a,e,d,d===k?k:e._aData).data;if(e._aSortData=null,e._aFilterData=null,g=a.aoColumns,d!==k)g[d].sType=null;else{for(c=0,f=g.length;c<f;c++)g[c].sType=null;Ka(a,e)}}function Ha(a,b,c,d){var g,j,n,e=[],f=b.firstChild,i=0,l=a.aoColumns,q=a._rowReadObject,t=(d=d!==k?d:q?{}:[],function(a,b){if("string"==typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),R(a)(d,b.getAttribute(c)))}}),m=function(a){c!==k&&c!==i||(j=l[i],n=h.trim(a.innerHTML),j&&j._bAttrSrc?(R(j.mData._)(d,n),t(j.mData.sort,a),t(j.mData.type,a),t(j.mData.filter,a)):q?(j._setter||(j._setter=R(j.mData)),j._setter(d,n)):d[i]=n),i++};if(f)for(;f;)"TD"!=(g=f.nodeName.toUpperCase())&&"TH"!=g||(m(f),e.push(f)),f=f.nextSibling;else for(f=0,g=(e=b.anCells).length;f<g;f++)m(e[f]);return(b=b.firstChild?b:b.nTr)&&(b=b.getAttribute("id"))&&R(a.rowId)(d,b),{data:d,cells:e}}function Ga(a,b,c,d){var j,i,n,l,q,e=a.aoData[b],f=e._aData,g=[];if(null===e.nTr){for(j=c||G.createElement("tr"),e.nTr=j,e.anCells=g,j._DT_RowIndex=b,Ka(a,e),l=0,q=a.aoColumns.length;l<q;l++)n=a.aoColumns[l],(i=c?d[l]:G.createElement(n.sCellType))._DT_CellIndex={row:b,column:l},g.push(i),c&&!n.mRender&&n.mData===l||h.isPlainObject(n.mData)&&n.mData._===l+".display"||(i.innerHTML=B(a,b,l,"display")),n.sClass&&(i.className+=" "+n.sClass),n.bVisible&&!c?j.appendChild(i):!n.bVisible&&c&&i.parentNode.removeChild(i),n.fnCreatedCell&&n.fnCreatedCell.call(a.oInstance,i,B(a,b,l),f,b,l);r(a,"aoRowCreatedCallback",null,[j,f,b])}e.nTr.setAttribute("role","row")}function Ka(a,b){var c=b.nTr,d=b._aData;if(c){var e=a.rowIdFn(d);e&&(c.id=e),d.DT_RowClass&&(e=d.DT_RowClass.split(" "),b.__rowc=b.__rowc?qa(b.__rowc.concat(e)):e,h(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass)),d.DT_RowAttr&&h(c).attr(d.DT_RowAttr),d.DT_RowData&&h(c).data(d.DT_RowData)}}function jb(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===h("th, td",g).length,n=a.oClasses,l=a.aoColumns;for(i&&(e=h("<tr/>").appendTo(g)),b=0,c=l.length;b<c;b++)f=l[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),La(a,f.nTh,b))),f.sTitle!=d[0].innerHTML&&d.html(f.sTitle),Ma(a,"header")(a,d,f,n);if(i&&da(a.aoHeader,g),h(g).find(">tr").attr("role","row"),h(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH),h(j).find(">tr>th, >tr>td").addClass(n.sFooterTH),null!==j)for(b=0,c=(a=a.aoFooter[0]).length;b<c;b++)(f=l[b]).nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}function ea(a,b,c){var d,e,f,n,g=[],j=[],i=a.aoColumns.length;if(b){for(c===k&&(c=!1),d=0,e=b.length;d<e;d++){for(g[d]=b[d].slice(),g[d].nTr=b[d].nTr,f=i-1;0<=f;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}for(d=0,e=g.length;d<e;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);for(f=0,b=g[d].length;f<b;f++)if(n=i=1,j[d][f]===k){for(a.appendChild(g[d][f].cell),j[d][f]=1;g[d+i]!==k&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+n]!==k&&g[d][f].cell==g[d][f+n].cell;){for(c=0;c<i;c++)j[d+c][f+n]=1;n++}h(g[d][f].cell).attr("rowspan",i).attr("colspan",n)}}}}function N(a){var b=r(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))C(a,!1);else{b=[];var c=0,d=a.asStripeClasses,e=d.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==y(a),i=a.aiDisplay;a.bDrawing=!0,g!==k&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);g=a._iDisplayStart;var n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,C(a,!1);else if(j){if(!a.bDestroying&&!kb(a))return}else a.iDraw++;if(0!==i.length)for(f=j?a.aoData.length:n,j=j?0:g;j<f;j++){var l=i[j],q=a.aoData[l];if(null===q.nTr&&Ga(a,l),l=q.nTr,0!==e){var t=d[c%e];q._sRowStripe!=t&&(h(l).removeClass(q._sRowStripe).addClass(t),q._sRowStripe=t)}r(a,"aoRowCallback",null,[l,q._aData,c,j]),b.push(l),c++}else c=f.sZeroRecords,1==a.iDraw&&"ajax"==y(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{class:e?d[0]:""}).append(h("<td />",{valign:"top",colSpan:aa(a),class:a.oClasses.sRowEmpty}).html(c))[0];r(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Ja(a),g,n,i]),r(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Ja(a),g,n,i]),(d=h(a.nTBody)).children().detach(),d.append(h(b)),r(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1}}function S(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&lb(a),d?fa(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice(),!0!==b&&(a._iDisplayStart=0),a._drawHold=b,N(a),a._drawHold=!1}function mb(a){var b=a.oClasses,c=h(a.nTable),d=(c=h("<div/>").insertBefore(c),a.oFeatures),e=h("<div/>",{id:a.sTableId+"_wrapper",class:b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0],a.nTableWrapper=e[0],a.nTableReinsertBefore=a.nTable.nextSibling;for(var g,j,i,n,l,q,f=a.sDom.split(""),k=0;k<f.length;k++){if(g=null,"<"==(j=f[k])){if(i=h("<div/>")[0],"'"==(n=f[k+1])||'"'==n){for(l="",q=2;f[k+q]!=n;)l+=f[k+q],q++;"H"==l?l=b.sJUIHeader:"F"==l&&(l=b.sJUIFooter),-1!=l.indexOf(".")?(n=l.split("."),i.id=n[0].substr(1,n[0].length-1),i.className=n[1]):"#"==l.charAt(0)?i.id=l.substr(1,l.length-1):i.className=l,k+=q}e.append(i),e=h(i)}else if(">"==j)e=e.parent();else if("l"==j&&d.bPaginate&&d.bLengthChange)g=nb(a);else if("f"==j&&d.bFilter)g=ob(a);else if("r"==j&&d.bProcessing)g=pb(a);else if("t"==j)g=qb(a);else if("i"==j&&d.bInfo)g=rb(a);else if("p"==j&&d.bPaginate)g=sb(a);else if(0!==m.ext.feature.length)for(q=0,n=(i=m.ext.feature).length;q<n;q++)if(j==i[q].cFeature){g=i[q].fnInit(a);break}g&&((i=a.aanFeatures)[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e),a.nHolding=null}function da(a,b){var d,e,f,g,j,i,n,l,q,k,c=h(b).children("tr");for(a.splice(0,a.length),f=0,i=c.length;f<i;f++)a.push([]);for(f=0,i=c.length;f<i;f++)for(e=(d=c[f]).firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){for(l=(l=1*e.getAttribute("colspan"))&&0!==l&&1!==l?l:1,q=(q=1*e.getAttribute("rowspan"))&&0!==q&&1!==q?q:1,g=0,j=a[f];j[g];)g++;for(n=g,k=1===l,j=0;j<l;j++)for(g=0;g<q;g++)a[f+g][n+j]={cell:e,unique:k},a[f+g].nTr=d}e=e.nextSibling}}function ra(a,b,c){var d=[];c||(c=a.aoHeader,b&&da(c=[],b));b=0;for(var e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function sa(a,b,c){if(r(a,"aoServerParams","serverParams",[b]),b&&h.isArray(b)){var d={},e=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value}),b=d}var f,g=a.ajax,j=a.oInstance,i=function(b){r(a,null,"xhr",[a,b,a.jqXHR]),c(b)};if(h.isPlainObject(g)&&g.data){f=g.data;var n=h.isFunction(f)?f(b,a):f;b=h.isFunction(f)&&n?n:h.extend(!0,b,n);delete g.data}n={data:b,success:function(b){var c=b.error||b.sError;c&&J(a,0,c),a.json=b,i(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var d=r(a,null,"xhr",[a,null,a.jqXHR]);-1===h.inArray(!0,d)&&("parsererror"==c?J(a,0,"Invalid JSON response",1):4===b.readyState&&J(a,0,"Ajax error",7)),C(a,!1)}},a.oAjaxData=b,r(a,null,"preXhr",[a,b]),a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),i,a):a.sAjaxSource||"string"==typeof g?a.jqXHR=h.ajax(h.extend(n,{url:g||a.sAjaxSource})):h.isFunction(g)?a.jqXHR=g.call(j,b,i,a):(a.jqXHR=h.ajax(h.extend(n,g)),g.data=f)}function kb(a){return!a.bAjaxDataGet||(a.iDraw++,C(a,!0),sa(a,tb(a),function(b){ub(a,b)}),!1)}function tb(a){var g,i,n,l,b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,j=[],k=V(a);g=a._iDisplayStart,i=!1!==d.bPaginate?a._iDisplayLength:-1;var t=function(a,b){j.push({name:a,value:b})};t("sEcho",a.iDraw),t("iColumns",c),t("sColumns",D(b,"sName").join(",")),t("iDisplayStart",g),t("iDisplayLength",i);var pa={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;g<c;g++)n=b[g],l=f[g],i="function"==typeof n.mData?"function":n.mData,pa.columns.push({data:i,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:l.sSearch,regex:l.bRegex}}),t("mDataProp_"+g,i),d.bFilter&&(t("sSearch_"+g,l.sSearch),t("bRegex_"+g,l.bRegex),t("bSearchable_"+g,n.bSearchable)),d.bSort&&t("bSortable_"+g,n.bSortable);return d.bFilter&&(t("sSearch",e.sSearch),t("bRegex",e.bRegex)),d.bSort&&(h.each(k,function(a,b){pa.order.push({column:b.col,dir:b.dir}),t("iSortCol_"+a,b.col),t("sSortDir_"+a,b.dir)}),t("iSortingCols",k.length)),null===(b=m.ext.legacy.ajax)?a.sAjaxSource?j:pa:b?j:pa}function ub(a,b){var c=ta(a,b),d=b.sEcho!==k?b.sEcho:b.draw,e=b.iTotalRecords!==k?b.iTotalRecords:b.recordsTotal,f=b.iTotalDisplayRecords!==k?b.iTotalDisplayRecords:b.recordsFiltered;if(d){if(1*d<a.iDraw)return;a.iDraw=1*d}for(na(a),a._iRecordsTotal=parseInt(e,10),a._iRecordsDisplay=parseInt(f,10),d=0,e=c.length;d<e;d++)M(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,N(a),a._bInitComplete||ua(a,b),a.bAjaxDataGet=!0,C(a,!1)}function ta(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==k?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?Q(c)(b):b}function ob(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=(j=d.sSearch).match(/_INPUT_/)?j.replace("_INPUT_",g):j+g,i=(b=h("<div/>",{id:f.f?null:c+"_filter",class:b.sFilter}).append(h("<label/>").append(j)),f=function(){var b=this.value?this.value:"";b!=e.sSearch&&(fa(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,N(a))},g=null!==a.searchDelay?a.searchDelay:"ssp"===y(a)?400:0,h("input",b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",g?Na(f,g):f).on("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c));return h(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{i[0]!==G.activeElement&&i.val(e.sSearch)}catch(d){}}),b[0]}function fa(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch,d.bRegex=a.bRegex,d.bSmart=a.bSmart,d.bCaseInsensitive=a.bCaseInsensitive};if(Fa(a),"ssp"!=y(a)){for(vb(a,b.sSearch,c,b.bEscapeRegex!==k?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive),f(b),b=0;b<e.length;b++)wb(a,e[b].sSearch,b,e[b].bEscapeRegex!==k?!e[b].bEscapeRegex:e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);xb(a)}else f(b);a.bFiltered=!0,r(a,null,"search",[a])}function xb(a){for(var d,e,b=m.ext.search,c=a.aiDisplay,f=0,g=b.length;f<g;f++){for(var j=[],i=0,n=c.length;i<n;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0,h.merge(c,j)}}function wb(a,b,c,d,e,f){if(""!==b){var g=[],j=a.aiDisplay;for(d=Oa(b,d,e,f),e=0;e<j.length;e++)b=a.aoData[j[e]]._aFilterData[c],d.test(b)&&g.push(j[e]);a.aiDisplay=g}}function vb(a,b,c,d,e,f){d=Oa(b,d,e,f),f=a.oPreviousSearch.sSearch;var j,g=a.aiDisplayMaster;e=[];if(0!==m.ext.search.length&&(c=!0),j=yb(a),b.length<=0)a.aiDisplay=g.slice();else{for((j||c||f.length>b.length||0!==b.indexOf(f)||a.bSorted)&&(a.aiDisplay=g.slice()),b=a.aiDisplay,c=0;c<b.length;c++)d.test(a.aoData[b[c]]._sFilterRow)&&e.push(b[c]);a.aiDisplay=e}}function Oa(a,b,c,d){return a=b?a:Pa(a),c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$"),RegExp(a,d?"i":"")}function yb(a){var c,d,e,f,g,j,i,h,b=a.aoColumns,l=m.ext.type.search;for(c=!1,d=0,f=a.aoData.length;d<f;d++)if(!(h=a.aoData[d])._aFilterData){for(j=[],e=0,g=b.length;e<g;e++)(c=b[e]).bSearchable?(i=B(a,d,e,"filter"),l[c.sType]&&(i=l[c.sType](i)),null===i&&(i=""),"string"!=typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(va.innerHTML=i,i=Wb?va.textContent:va.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);h._aFilterData=j,h._sFilterRow=j.join("  "),c=!0}return c}function zb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Ab(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function rb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h("<div/>",{class:a.oClasses.sInfo,id:c?null:b+"_info"});return c||(a.aoDrawCallback.push({fn:Bb,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",b+"_info")),d[0]}function Bb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered),j=Cb(a,j+=c.sInfoPostFix),null!==(c=c.fnInfoCallback)&&(j=c.call(a.oInstance,a,d,e,f,g,j)),h(b).html(j)}}function Cb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ga(a){var b,c,f,d=a.iInitDisplayStart,e=a.aoColumns;c=a.oFeatures;var g=a.bDeferLoading;if(a.bInitialised){for(mb(a),jb(a),ea(a,a.aoHeader),ea(a,a.aoFooter),C(a,!0),c.bAutoWidth&&Ea(a),b=0,c=e.length;b<c;b++)(f=e[b]).sWidth&&(f.nTh.style.width=v(f.sWidth));r(a,null,"preInit",[a]),S(a),("ssp"!=(e=y(a))||g)&&("ajax"==e?sa(a,[],function(c){var f=ta(a,c);for(b=0;b<f.length;b++)M(a,f[b]);a.iInitDisplayStart=d,S(a),C(a,!1),ua(a,c)}):(C(a,!1),ua(a)))}else setTimeout(function(){ga(a)},200)}function ua(a,b){a._bInitComplete=!0,(b||a.oInit.aaData)&&Y(a),r(a,null,"plugin-init",[a,b]),r(a,"aoInitComplete","init",[a,b])}function Qa(a,b){var c=parseInt(b,10);a._iDisplayLength=c,Ra(a),r(a,null,"length",[a,c])}function nb(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,f=(e=h.isArray(d[0]))?d[0]:d,e=(d=e?d[1]:d,h("<select/>",{name:c+"_length","aria-controls":c,class:b.sLengthSelect})),g=0,j=f.length;g<j;g++)e[0][g]=new Option("number"==typeof d[g]?a.fnFormatNumber(d[g]):d[g],f[g]);var i=h("<div><label/></div>").addClass(b.sLength);return a.aanFeatures.l||(i[0].id=c+"_length"),i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML)),h("select",i).val(a._iDisplayLength).on("change.DT",function(){Qa(a,h(this).val()),N(a)}),h(a.nTable).on("length.dt.DT",function(b,c,d){a===c&&h("select",i).val(d)}),i[0]}function sb(a){var b=a.sPaginationType,c=m.ext.pager[b],d="function"==typeof c,e=function(a){N(a)},f=(b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],a.aanFeatures);return d||c.fnInit(a,b,e),f.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var k,b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),l=(b=(l=-1===i)?0:Math.ceil(b/i),i=l?1:Math.ceil(h/i),h=c(b,i),0);for(k=f.p.length;l<k;l++)Ma(a,"pageButton")(a,f.p[l],l,h,b,i)}else c.fnUpdate(a,e)},sName:"pagination"})),b}function Sa(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();return 0===f||-1===e?d=0:"number"==typeof b?f<(d=b*e)&&(d=0):"first"==b?d=0:"previous"==b?(d=0<=e?d-e:0)<0&&(d=0):"next"==b?d+e<f&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:J(a,0,"Unknown paging action: "+b,5),b=a._iDisplayStart!==d,a._iDisplayStart=d,b&&(r(a,null,"page",[a]),c&&N(a)),b}function pb(a){return h("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing",class:a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function C(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none"),r(a,null,"processing",[a,b])}function qb(a){(b=h(a.nTable)).attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),n=h(b[0].cloneNode(!1)),l=b.children("tfoot");l.length||(l=null),i=h("<div/>",{class:f.sScrollWrapper}).append(h("<div/>",{class:f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?d?v(d):null:"100%"}).append(h("<div/>",{class:f.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append("top"===j?g:null).append(b.children("thead"))))).append(h("<div/>",{class:f.sScrollBody}).css({position:"relative",overflow:"auto",width:d?v(d):null}).append(b)),l&&i.append(h("<div/>",{class:f.sScrollFoot}).css({overflow:"hidden",border:0,width:d?d?v(d):null:"100%"}).append(h("<div/>",{class:f.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===j?g:null).append(b.children("tfoot")))));var b,k=(b=i.children())[0],t=(f=b[1],l?b[2]:null);return d&&h(f).on("scroll.DT",function(){var a=this.scrollLeft;k.scrollLeft=a,l&&(t.scrollLeft=a)}),h(f).css(e&&c.bCollapse?"max-height":"height",e),a.nScrollHead=k,a.nScrollBody=f,a.nScrollFoot=t,a.aoDrawCallback.push({fn:ka,sName:"scrolling"}),i[0]}function ka(a){var O,K,P,w,B,c=(b=a.oScroll).sX,d=b.sXInner,e=b.sY,b=b.iBarWidth,f=h(a.nScrollHead),g=f[0].style,i=(j=f.children("div"))[0].style,n=j.children("table"),j=a.nScrollBody,l=h(j),q=j.style,t=h(a.nScrollFoot).children("div"),m=t.children("table"),o=h(a.nTHead),p=h(a.nTable),s=p[0],r=s.style,u=a.nTFoot?h(a.nTFoot):null,x=a.oBrowser,T=x.bScrollOversize,Xb=D(a.aoColumns,"nTh"),Ta=[],y=[],z=[],A=[],C=function(a){(a=a.style).paddingTop="0",a.paddingBottom="0",a.borderTopWidth="0",a.borderBottomWidth="0",a.height=0};K=j.scrollHeight>j.clientHeight,a.scrollBarVis!==K&&a.scrollBarVis!==k?(a.scrollBarVis=K,Y(a)):(a.scrollBarVis=K,p.children("thead, tfoot").remove(),u&&(P=u.clone().prependTo(p),O=u.find("tr"),P=P.find("tr")),w=o.clone().prependTo(p),o=o.find("tr"),K=w.find("tr"),w.find("th, td").removeAttr("tabindex"),c||(q.width="100%",f[0].style.width="100%"),h.each(ra(a,w),function(b,c){B=Z(a,b),c.style.width=a.aoColumns[B].sWidth}),u&&H(function(a){a.style.width=""},P),f=p.outerWidth(),""===c?(r.width="100%",T&&(p.find("tbody").height()>j.offsetHeight||"scroll"==l.css("overflow-y"))&&(r.width=v(p.outerWidth()-b)),f=p.outerWidth()):""!==d&&(r.width=v(d),f=p.outerWidth()),H(C,K),H(function(a){z.push(a.innerHTML),Ta.push(v(h(a).css("width")))},K),H(function(a,b){-1!==h.inArray(a,Xb)&&(a.style.width=Ta[b])},o),h(K).height(0),u&&(H(C,P),H(function(a){A.push(a.innerHTML),y.push(v(h(a).css("width")))},P),H(function(a,b){a.style.width=y[b]},O),h(P).height(0)),H(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+z[b]+"</div>",a.style.width=Ta[b]},K),u&&H(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+A[b]+"</div>",a.style.width=y[b]},P),p.outerWidth()<f?(O=j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y")?f+b:f,T&&(j.scrollHeight>j.offsetHeight||"scroll"==l.css("overflow-y"))&&(r.width=v(O-b)),(""===c||""!==d)&&J(a,1,"Possible column misalignment",6)):O="100%",q.width=v(O),g.width=v(O),u&&(a.nScrollFoot.style.width=v(O)),!e&&T&&(q.height=v(s.offsetHeight+b)),c=p.outerWidth(),n[0].style.width=v(c),i.width=v(c),d=p.height()>j.clientHeight||"scroll"==l.css("overflow-y"),i[e="padding"+(x.bScrollbarLeft?"Left":"Right")]=d?b+"px":"0px",u&&(m[0].style.width=v(c),t[0].style.width=v(c),t[0].style[e]=d?b+"px":"0px"),p.children("colgroup").insertBefore(p.children("thead")),l.scroll(),!a.bSorted&&!a.bFiltered||a._drawHold||(j.scrollTop=0))}function H(a,b,c){for(var g,j,d=0,e=0,f=b.length;e<f;){for(g=b[e].firstChild,j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Ea(a){var m,o,b=a.nTable,c=a.aoColumns,e=(d=a.oScroll).sY,f=d.sX,g=d.sXInner,j=c.length,i=la(a,"bVisible"),n=h("th",a.nTHead),l=b.getAttribute("width"),k=b.parentNode,t=!1,p=a.oBrowser,d=p.bScrollOversize;for((m=b.style.width)&&-1!==m.indexOf("%")&&(l=m),m=0;m<i.length;m++)null!==(o=c[i[m]]).sWidth&&(o.sWidth=Db(o.sWidthOrig,k),t=!0);if(d||!t&&!f&&!e&&j==aa(a)&&j==n.length)for(m=0;m<j;m++)null!==(i=Z(a,m))&&(c[i].sWidth=v(n.eq(m).width()));else{(j=h(b).clone().css("visibility","hidden").removeAttr("id")).find("tbody tr").remove();var s=h("<tr/>").appendTo(j.find("tbody"));for(j.find("thead, tfoot").remove(),j.append(h(a.nTHead).clone()).append(h(a.nTFoot).clone()),j.find("tfoot th, tfoot td").css("width",""),n=ra(a,j.find("thead")[0]),m=0;m<i.length;m++)o=c[i[m]],n[m].style.width=null!==o.sWidthOrig&&""!==o.sWidthOrig?v(o.sWidthOrig):"",o.sWidthOrig&&f&&h(n[m]).append(h("<div/>").css({width:o.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(m=0;m<i.length;m++)o=c[t=i[m]],h(Eb(a,t)).clone(!1).append(o.sContentPadding).appendTo(s);for(h("[name]",j).removeAttr("name"),o=h("<div/>").css(f||e?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(j).appendTo(k),f&&g?j.width(g):f?(j.css("width","auto"),j.removeAttr("width"),j.width()<k.clientWidth&&l&&j.width(k.clientWidth)):e?j.width(k.clientWidth):l&&j.width(l),m=e=0;m<i.length;m++)g=(k=h(n[m])).outerWidth()-k.width(),e+=k=p.bBounding?Math.ceil(n[m].getBoundingClientRect().width):k.outerWidth(),c[i[m]].sWidth=v(k-g);b.style.width=v(e),o.remove()}l&&(b.style.width=v(l)),!l&&!f||a._reszEvt||(b=function(){h(E).on("resize.DT-"+a.sInstance,Na(function(){Y(a)}))},d?setTimeout(b,1e3):b(),a._reszEvt=!0)}function Db(a,b){if(!a)return 0;var c=h("<div/>").css("width",v(a)).appendTo(b||G.body),d=c[0].offsetWidth;return c.remove(),d}function Eb(a,b){var c=Fb(a,b);if(c<0)return null;var d=a.aoData[c];return d.nTr?d.anCells[b]:h("<td/>").html(B(a,c,b,"display"))[0]}function Fb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;f<g;f++)(c=(c=(c=B(a,f,b,"display")+"").replace(Yb,"")).replace(/&nbsp;/g," ")).length>d&&(d=c.length,e=f);return e}function v(a){return null===a?"0px":"number"==typeof a?a<0?"0px":a+"px":a.match(/\d$/)?a+"px":a}function V(a){var b,c,f,g,j,i,d=[],e=a.aoColumns;b=a.aaSortingFixed,c=h.isPlainObject(b);var n=[];for(f=function(a){a.length&&!h.isArray(a[0])?n.push(a):h.merge(n,a)},h.isArray(b)&&f(b),c&&b.pre&&f(b.pre),f(a.aaSorting),c&&b.post&&f(b.post),a=0;a<n.length;a++)for(b=0,c=(f=e[i=n[a][0]].aDataSort).length;b<c;b++)j=e[g=f[b]].sType||"string",n[a]._idx===k&&(n[a]._idx=h.inArray(n[a][1],e[g].asSorting)),d.push({src:i,col:g,dir:n[a][1],index:n[a]._idx,type:j,formatter:m.ext.type.order[j+"-pre"]});return d}function lb(a){var b,c,j,h,d=[],e=m.ext.type.order,f=a.aoData,g=0,i=a.aiDisplayMaster;for(Fa(a),b=0,c=(h=V(a)).length;b<c;b++)(j=h[b]).formatter&&g++,Gb(a,j.col);if("ssp"!=y(a)&&0!==h.length){for(b=0,c=i.length;b<c;b++)d[i[b]]=b;g===h.length?i.sort(function(a,b){var c,e,g,j,i=h.length,k=f[a]._aSortData,m=f[b]._aSortData;for(g=0;g<i;g++)if(0!==(c=(c=k[(j=h[g]).col])<(e=m[j.col])?-1:e<c?1:0))return"asc"===j.dir?c:-c;return(c=d[a])<(e=d[b])?-1:e<c?1:0}):i.sort(function(a,b){var c,g,j,i,k=h.length,m=f[a]._aSortData,o=f[b]._aSortData;for(j=0;j<k;j++)if(c=m[(i=h[j]).col],g=o[i.col],0!==(c=(i=e[i.type+"-"+i.dir]||e["string-"+i.dir])(c,g)))return c;return(c=d[a])<(g=d[b])?-1:g<c?1:0})}a.bSorted=!0}function Hb(a){for(var b,c,d=a.aoColumns,e=V(a),f=(a=a.oLanguage.oAria,0),g=d.length;f<g;f++){var j=(c=d[f]).asSorting;b=c.sTitle.replace(/<.*?>/g,"");var i=c.nTh;i.removeAttribute("aria-sort"),c.bSortable&&(b+="asc"===(c=0<e.length&&e[0].col==f?(i.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),j[e[0].index+1]||j[0]):j[0])?a.sSortAscending:a.sSortDescending),i.setAttribute("aria-label",b)}}function Ua(a,b,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;return c===k&&(c=h.inArray(a[1],f)),c+1<f.length?c+1:b?null:0};"number"==typeof e[0]&&(e=a.aaSorting=[e]),c&&a.oFeatures.bSortMulti?-1!==(c=h.inArray(b,D(e,"0")))?(null===(b=g(e[c],!0))&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=f[b],e[c]._idx=b)):(e.push([b,f[0],0]),e[e.length-1]._idx=0):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0),S(a),"function"==typeof d&&d(a)}function La(a,b,c,d){var e=a.aoColumns[c];Va(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(C(a,!0),setTimeout(function(){Ua(a,c,b.shiftKey,d),"ssp"!==y(a)&&C(a,!1)},0)):Ua(a,c,b.shiftKey,d))})}function wa(a){var f,g,b=a.aLastSort,c=a.oClasses.sSortColumn,d=V(a),e=a.oFeatures;if(e.bSort&&e.bSortClasses){for(e=0,f=b.length;e<f;e++)g=b[e].src,h(D(a.aoData,"anCells",g)).removeClass(c+(e<2?e+1:3));for(e=0,f=d.length;e<f;e++)g=d[e].src,h(D(a.aoData,"anCells",g)).addClass(c+(e<2?e+1:3))}a.aLastSort=d}function Gb(a,b){var e,c=a.aoColumns[b],d=m.ext.order[c.sSortDataType];d&&(e=d.call(a.oInstance,a,b,$(a,b)));for(var f,g=m.ext.type.order[c.sType+"-pre"],j=0,i=a.aoData.length;j<i;j++)(c=a.aoData[j])._aSortData||(c._aSortData=[]),(!c._aSortData[b]||d)&&(f=d?e[j]:B(a,j,b,"sort"),c._aSortData[b]=g?g(f):f)}function xa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:zb(a.oPreviousSearch),columns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:zb(a.aoPreSearchCols[d])}})};r(a,"aoStateSaveParams","stateSaveParams",[a,b]),a.oSavedState=b,a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Ib(a,b,c){var d,e,f=a.aoColumns;b=function(b){if(b&&b.time){var g=r(a,"aoStateLoadParams","stateLoadParams",[a,b]);if(-1===h.inArray(!1,g)&&!(0<(g=a.iStateDuration)&&b.time<+new Date-1e3*g||b.columns&&f.length!==b.columns.length)){if(a.oLoadedState=h.extend(!0,{},b),b.start!==k&&(a._iDisplayStart=b.start,a.iInitDisplayStart=b.start),b.length!==k&&(a._iDisplayLength=b.length),b.order!==k&&(a.aaSorting=[],h.each(b.order,function(b,c){a.aaSorting.push(c[0]>=f.length?[0,c[1]]:c)})),b.search!==k&&h.extend(a.oPreviousSearch,Ab(b.search)),b.columns)for(d=0,e=b.columns.length;d<e;d++)(g=b.columns[d]).visible!==k&&(f[d].bVisible=g.visible),g.search!==k&&h.extend(a.aoPreSearchCols[d],Ab(g.search));r(a,"aoStateLoaded","stateLoaded",[a,b])}}c()};if(a.oFeatures.bStateSave){var g=a.fnStateLoadCallback.call(a.oInstance,a,b);g!==k&&b(g)}else c()}function ya(a){var b=m.settings;return-1!==(a=h.inArray(a,D(b,"nTable")))?b[a]:null}function J(a,b,c,d){if(c="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+c,d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+d),b)E.console&&console.log&&console.log(c);else if(b=(b=m.ext).sErrMode||b.errMode,a&&r(a,null,"error",[a,d,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==typeof b&&b(a,d,c)}}function F(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?F(a,b,d[0],d[1]):F(a,b,d)}):(d===k&&(d=c),b[c]!==k&&(a[d]=b[c]))}function Jb(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&"data"!==e&&"aaData"!==e&&h.isArray(d)?d.slice():d);return a}function Va(a,b,c){h(a).on("click.DT",b,function(b){a.blur(),c(b)}).on("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).on("selectstart.DT",function(){return!1})}function z(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function r(a,b,c,d){var e=[];return b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)})),null!==c&&(b=h.Event(c+".dt"),h(a.nTable).trigger(b,d),e.push(b.result)),e}function Ra(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;c<=b&&(b=c-d),b-=b%d,(-1===d||b<0)&&(b=0),a._iDisplayStart=b}function Ma(a,b){var c=a.renderer,d=m.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:"string"==typeof c&&d[c]||d._}function y(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ha(a,b){var c=[],d=(c=Kb.numbers_length,Math.floor(c/2));return b<=c?c=W(0,b):a<=d?((c=W(0,c-2)).push("ellipsis"),c.push(b-1)):(b-1-d<=a?c=W(b-(c-2),b):((c=W(a-d+2,a+d-1)).push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0)),c.DT_el="span",c}function cb(a){h.each({num:function(b){return za(b,a)},"num-fmt":function(b){return za(b,a,Wa)},"html-num":function(b){return za(b,a,Aa)},"html-num-fmt":function(b){return za(b,a,Aa,Wa)}},function(b,c){x.type.order[b+a+"-pre"]=c,b.match(/^html\-/)&&(x.type.search[b+a]=x.type.search.html)})}function Lb(a){return function(){var b=[ya(this[m.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return m.ext.internal[a].apply(this,b)}}var x,s,o,u,m=function(a){this.$=function(a,b){return this.api(!0).$(a,b)},this._=function(a,b){return this.api(!0).rows(a,b).data()},this.api=function(a){return new s(a?ya(this[x.iApiIndex]):this)},this.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);return(b===k||b)&&c.draw(),d.flatten().toArray()},this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===k||a?b.draw(!1):(""!==d.sX||""!==d.sY)&&ka(c)},this.fnClearTable=function(a){var b=this.api(!0).clear();(a===k||a)&&b.draw()},this.fnClose=function(a){this.api(!0).row(a).child.hide()},this.fnDeleteRow=function(a,b,c){var d=this.api(!0),e=(a=d.rows(a)).settings()[0],h=e.aoData[a[0][0]];return a.remove(),b&&b.call(this,e,h),(c===k||c)&&d.draw(),h},this.fnDestroy=function(a){this.api(!0).destroy(a)},this.fnDraw=function(a){this.api(!0).draw(a)},this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0),null===b||b===k?e.search(a,c,d,h):e.column(b).search(a,c,d,h),e.draw()},this.fnGetData=function(a,b){var c=this.api(!0);if(a===k)return c.data().toArray();var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==k||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||null},this.fnGetNodes=function(a){var b=this.api(!0);return a!==k?b.row(a).node():b.rows().nodes().flatten().toArray()},this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?[(a=b.cell(a).index()).row,a.columnVisible,a.column]:null},this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()},this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]},this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===k||b)&&c.draw(!1)},this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b),(c===k||c)&&a.columns.adjust().draw()},this.fnSettings=function(){return ya(this[x.iApiIndex])},this.fnSort=function(a){this.api(!0).order(a).draw()},this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)},this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);return c===k||null===c?h.row(b).data(a):h.cell(b,c).data(a),(e===k||e)&&h.columns.adjust(),(d===k||d)&&h.draw(),0},this.fnVersionCheck=x.fnVersionCheck;var b=this,c=a===k,d=this.length;for(var e in c&&(a={}),this.oApi=this.internal=x.internal,m.ext.internal)e&&(this[e]=Lb(e));return this.each(function(){var i,e={},g=1<d?Jb(e,a,!0):a,j=0,n=(e=this.getAttribute("id"),!1),l=m.defaults,q=h(this);if("table"!=this.nodeName.toLowerCase())J(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{db(l),eb(l.column),I(l,l,!0),I(l.column,l.column,!0),I(l,h.extend(g,q.data()));var t=m.settings;j=0;for(i=t.length;j<i;j++){var o=t[j];if(o.nTable==this||o.nTHead.parentNode==this||o.nTFoot&&o.nTFoot.parentNode==this){var s=g.bRetrieve!==k?g.bRetrieve:l.bRetrieve;if(c||s)return o.oInstance;if(g.bDestroy!==k?g.bDestroy:l.bDestroy){o.oInstance.fnDestroy();break}return void J(o,0,"Cannot reinitialise DataTable",3)}if(o.sTableId==this.id){t.splice(j,1);break}}null!==e&&""!==e||(this.id=e="DataTables_Table_"+m.ext._unique++);var p=h.extend(!0,{},m.models.oSettings,{sDestroyWidth:q[0].style.width,sInstance:e,sTableId:e});p.nTable=this,p.oApi=b.internal,p.oInit=g,t.push(p),p.oInstance=1===b.length?b:q.dataTable(),db(g),g.oLanguage&&Ca(g.oLanguage),g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=h.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]),g=Jb(h.extend(!0,{},l),g),F(p.oFeatures,g,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),F(p,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),F(p.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),F(p.oLanguage,g,"fnInfoCallback"),z(p,"aoDrawCallback",g.fnDrawCallback,"user"),z(p,"aoServerParams",g.fnServerParams,"user"),z(p,"aoStateSaveParams",g.fnStateSaveParams,"user"),z(p,"aoStateLoadParams",g.fnStateLoadParams,"user"),z(p,"aoStateLoaded",g.fnStateLoaded,"user"),z(p,"aoRowCallback",g.fnRowCallback,"user"),z(p,"aoRowCreatedCallback",g.fnCreatedRow,"user"),z(p,"aoHeaderCallback",g.fnHeaderCallback,"user"),z(p,"aoFooterCallback",g.fnFooterCallback,"user"),z(p,"aoInitComplete",g.fnInitComplete,"user"),z(p,"aoPreDrawCallback",g.fnPreDrawCallback,"user"),p.rowIdFn=Q(g.rowId),fb(p);var u=p.oClasses;h.extend(u,m.ext.classes,g.oClasses),q.addClass(u.sTable),p.iInitDisplayStart===k&&(p.iInitDisplayStart=g.iDisplayStart,p._iDisplayStart=g.iDisplayStart),null!==g.iDeferLoading&&(p.bDeferLoading=!0,e=h.isArray(g.iDeferLoading),p._iRecordsDisplay=e?g.iDeferLoading[0]:g.iDeferLoading,p._iRecordsTotal=e?g.iDeferLoading[1]:g.iDeferLoading);var v=p.oLanguage;h.extend(!0,v,g.oLanguage),v.sUrl&&(h.ajax({dataType:"json",url:v.sUrl,success:function(a){Ca(a),I(l.oLanguage,a),h.extend(!0,v,a),ga(p)},error:function(){ga(p)}}),n=!0),null===g.asStripeClasses&&(p.asStripeClasses=[u.sStripeOdd,u.sStripeEven]);e=p.asStripeClasses;var x=q.children("tbody").find("tr").eq(0);if(-1!==h.inArray(!0,h.map(e,function(a){return x.hasClass(a)}))&&(h("tbody tr",this).removeClass(e.join(" ")),p.asDestroyStripes=e.slice()),e=[],0!==(t=this.getElementsByTagName("thead")).length&&(da(p.aoHeader,t[0]),e=ra(p)),null===g.aoColumns)for(t=[],j=0,i=e.length;j<i;j++)t.push(null);else t=g.aoColumns;for(j=0,i=t.length;j<i;j++)Da(p,e?e[j]:null);if(hb(p,g.aoColumnDefs,t,function(a,b){ja(p,a,b)}),x.length){var w=function(a,b){return null!==a.getAttribute("data-"+b)?b:null};h(x[0]).children("th, td").each(function(a,b){var c=p.aoColumns[a];if(c.mData===a){var d=w(b,"sort")||w(b,"order"),e=w(b,"filter")||w(b,"search");null===d&&null===e||(c.mData={_:a+".display",sort:null!==d?a+".@data-"+d:k,type:null!==d?a+".@data-"+d:k,filter:null!==e?a+".@data-"+e:k},ja(p,a))}})}var T=p.oFeatures;e=function(){if(g.aaSorting===k){var a=p.aaSorting;for(j=0,i=a.length;j<i;j++)a[j][1]=p.aoColumns[j].asSorting[0]}wa(p),T.bSort&&z(p,"aoDrawCallback",function(){if(p.bSorted){var a=V(p),b={};h.each(a,function(a,c){b[c.src]=c.dir}),r(p,null,"order",[p,a,b]),Hb(p)}}),z(p,"aoDrawCallback",function(){(p.bSorted||"ssp"===y(p)||T.bDeferRender)&&wa(p)},"sc");a=q.children("caption").each(function(){this._captionSide=h(this).css("caption-side")});var b=q.children("thead");if(0===b.length&&(b=h("<thead/>").appendTo(q)),p.nTHead=b[0],0===(b=q.children("tbody")).length&&(b=h("<tbody/>").appendTo(q)),p.nTBody=b[0],0===(b=q.children("tfoot")).length&&0<a.length&&(""!==p.oScroll.sX||""!==p.oScroll.sY)&&(b=h("<tfoot/>").appendTo(q)),0===b.length||0===b.children().length?q.addClass(u.sNoFooter):0<b.length&&(p.nTFoot=b[0],da(p.aoFooter,p.nTFoot)),g.aaData)for(j=0;j<g.aaData.length;j++)M(p,g.aaData[j]);else(p.bDeferLoading||"dom"==y(p))&&ma(p,h(p.nTBody).children("tr"));p.aiDisplay=p.aiDisplayMaster.slice(),!(p.bInitialised=!0)===n&&ga(p)};g.bStateSave?(T.bStateSave=!0,z(p,"aoDrawCallback",xa,"state_save"),Ib(p,g,e)):e()}}),b=null,this},Xa={},Mb=/[\r\n]/g,Aa=/<.*?>/g,Zb=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,$b=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Wa=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,L=function(a){return!a||!0===a||"-"===a},Nb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Ob=function(a,b){return Xa[b]||(Xa[b]=RegExp(Pa(b),"g")),"string"==typeof a&&"."!==b?a.replace(/\./g,"").replace(Xa[b],"."):a},Ya=function(a,b,c){var d="string"==typeof a;return!!L(a)||(b&&d&&(a=Ob(a,b)),c&&d&&(a=a.replace(Wa,"")),!isNaN(parseFloat(a))&&isFinite(a))},Pb=function(a,b,c){return!!L(a)||((L(a)||"string"==typeof a)&&!!Ya(a.replace(Aa,""),b,c)||null)},D=function(a,b,c){var d=[],e=0,f=a.length;if(c!==k)for(;e<f;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<f;e++)a[e]&&d.push(a[e][b]);return d},ia=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==k)for(;f<g;f++)a[b[f]][c]&&e.push(a[b[f]][c][d]);else for(;f<g;f++)e.push(a[b[f]][c]);return e},W=function(a,b){var d,c=[];b===k?(b=0,d=a):(d=b,b=a);for(var e=b;e<d;e++)c.push(e);return c},Qb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},qa=function(a){var b;a:{if(!(a.length<2))for(var c=(b=a.slice().sort())[0],d=1,e=b.length;d<e;d++){if(b[d]===c){b=!1;break a}c=b[d]}b=!0}if(b)return a.slice();b=[];e=a.length;var f,g=0;d=0;a:for(;d<e;d++){for(c=a[d],f=0;f<g;f++)if(b[f]===c)continue a;b.push(c),g++}return b};m.util={throttle:function(a,b){var d,e,c=b!==k?b:200;return function(){var b=this,g=+new Date,j=arguments;d&&g<d+c?(clearTimeout(e),e=setTimeout(function(){d=k,a.apply(b,j)},c)):(d=g,a.apply(b,j))}},escapeRegex:function(a){return a.replace($b,"\\$1")}};var A=function(a,b,c){a[b]!==k&&(a[c]=a[b])},ba=/\[.*?\]$/,U=/\(\)$/,Pa=m.util.escapeRegex,va=h("<div>")[0],Wb=va.textContent!==k,Yb=/<.*?>/g,Na=m.util.throttle,Rb=[],w=Array.prototype;s=function(a,b){if(!(this instanceof s))return new s(a,b);var c=[],d=function(a){(a=function(a){var b,c,d=m.settings,e=h.map(d,function(a){return a.nTable});return a?a.nTable&&a.oApi?[a]:a.nodeName&&"table"===a.nodeName.toLowerCase()?-1!==(b=h.inArray(a,e))?[d[b]]:null:a&&"function"==typeof a.settings?a.settings().toArray():("string"==typeof a?c=h(a):a instanceof h&&(c=a),c?c.map(function(){return-1!==(b=h.inArray(this,e))?d[b]:null}).toArray():void 0):[]}(a))&&(c=c.concat(a))};if(h.isArray(a))for(var e=0,f=a.length;e<f;e++)d(a[e]);else d(a);this.context=qa(c),b&&h.merge(this,b),this.selector={rows:null,cols:null,opts:null},s.extend(this,this,Rb)},m.Api=s,h.extend(s.prototype,{any:function(){return 0!==this.count()},concat:w.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new s(b[a],this[a]):null},filter:function(a){var b=[];if(w.filter)b=w.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new s(this.context,b)},flatten:function(){var a=[];return new s(this.context,a.concat.apply(a,this.toArray()))},join:w.join,indexOf:w.indexOf||function(a,b){for(var c=b||0,d=this.length;c<d;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c,d){var f,g,j,h,n,m,o,e=[],l=this.context,u=this.selector;for("string"==typeof a&&(d=c,c=b,b=a,a=!1),g=0,j=l.length;g<j;g++){var r=new s(l[g]);if("table"===b)(f=c.call(r,l[g],g))!==k&&e.push(f);else if("columns"===b||"rows"===b)(f=c.call(r,l[g],this[g],g))!==k&&e.push(f);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(o=this[g],"column-rows"===b&&(m=Ba(l[g],u.opts)),h=0,n=o.length;h<n;h++)f=o[h],(f="cell"===b?c.call(r,l[g],f.row,f.column,g,h):c.call(r,l[g],f,g,h,m))!==k&&e.push(f)}return e.length||d?((b=(a=new s(l,a?e.concat.apply([],e):e)).selector).rows=u.rows,b.cols=u.cols,b.opts=u.opts,a):this},lastIndexOf:w.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(w.map)b=w.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new s(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:w.pop,push:w.push,reduce:w.reduce||function(a,b){return gb(this,a,b,0,this.length,1)},reduceRight:w.reduceRight||function(a,b){return gb(this,a,b,this.length-1,-1,-1)},reverse:w.reverse,selector:null,shift:w.shift,slice:function(){return new s(this.context,this)},sort:w.sort,splice:w.splice,toArray:function(){return w.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},unique:function(){return new s(this.context,qa(this))},unshift:w.unshift}),s.extend=function(a,b,c){if(c.length&&b&&(b instanceof s||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=b.apply(a,arguments);return s.extend(d,d,c.methodExt),d}};for(d=0,e=c.length;d<e;d++)b[(f=c[d]).name]="function"==typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,s.extend(a,b[f.name],f.propExt)}},s.register=o=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;c<d;c++)s.register(a[c],b);else{var g,j,e=a.split("."),f=Rb;for(c=0,d=e.length;c<d;c++){var i;g=(j=-1!==e[c].indexOf("()"))?e[c].replace("()",""):e[c];a:{i=0;for(var n=f.length;i<n;i++)if(f[i].name===g){i=f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i)),c===d-1?i.val=b:f=j?i.methodExt:i.propExt}}},s.registerPlural=u=function(a,b,c){s.register(a,c),s.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof s?a.length?h.isArray(a[0])?new s(a.context,a[0]):a[0]:k:a})},o("tables()",function(a){var b;if(a){b=s;var c=this.context;if("number"==typeof a)a=[c[a]];else{var d=h.map(c,function(a){return a.nTable});a=h(d).filter(a).map(function(){var a=h.inArray(this,d);return c[a]}).toArray()}b=new b(a)}else b=this;return b}),o("table()",function(a){var b=(a=this.tables(a)).context;return b.length?new s(b[0]):a}),u("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)}),u("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody},1)}),u("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)}),u("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)}),u("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)}),o("draw()",function(a){return this.iterator("table",function(b){"page"===a?N(b):("string"==typeof a&&(a="full-hold"!==a),S(b,!1===a))})}),o("page()",function(a){return a===k?this.page.info().page:this.iterator("table",function(b){Sa(b,a)})}),o("page.info()",function(){if(0===this.context.length)return k;var a=this.context[0],b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,serverSide:"ssp"===y(a)}}),o("page.len()",function(a){return a===k?0!==this.context.length?this.context[0]._iDisplayLength:k:this.iterator("table",function(b){Qa(b,a)})});var Sb=function(a,b,c){if(c){var d=new s(a);d.one("draw",function(){c(d.ajax.json())})}if("ssp"==y(a))S(a,b);else{C(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort(),sa(a,[],function(c){na(a);for(var d=0,e=(c=ta(a,c)).length;d<e;d++)M(a,c[d]);S(a,b),C(a,!1)})}};o("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json}),o("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData}),o("ajax.reload()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})}),o("ajax.url()",function(a){var b=this.context;return a===k?0===b.length?k:(b=b[0]).ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource:this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})}),o("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})});var Za=function(a,b,c,d,e){var g,j,i,n,l,m,f=[];for(i=typeof b,b&&"string"!==i&&"function"!==i&&b.length!==k||(b=[b]),i=0,n=b.length;i<n;i++)for(l=0,m=(j=b[i]&&b[i].split&&!b[i].match(/[\[\(:]/)?b[i].split(","):[b[i]]).length;l<m;l++)(g=c("string"==typeof j[l]?h.trim(j[l]):j[l]))&&g.length&&(f=f.concat(g));if((a=x.selector[a]).length)for(i=0,n=a.length;i<n;i++)f=a[i](d,e,f);return qa(f)},$a=function(a){return a||(a={}),a.filter&&a.search===k&&(a.search=a.filter),h.extend({search:"none",order:"current",page:"all"},a)},ab=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;return a.length=0,a},Ba=function(a,b){var c,d,e,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var j=b.search;if(d=b.order,e=b.page,"ssp"==y(a))return"removed"===j?[]:W(0,c.length);if("current"==e)for(c=a._iDisplayStart,d=a.fnDisplayEnd();c<d;c++)f.push(g[c]);else if("current"==d||"applied"==d)f="none"==j?c.slice():"applied"==j?g.slice():h.map(c,function(a){return-1===h.inArray(a,g)?a:null});else if("index"==d||"original"==d)for(c=0,d=a.aoData.length;c<d;c++)"none"==j?f.push(c):(-1===(e=h.inArray(c,g))&&"removed"==j||0<=e&&"applied"==j)&&f.push(c);return f};o("rows()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");b=$a(b);var c=this.iterator("table",function(c){var f,e=b;return Za("row",a,function(a){var b=Nb(a);if(null!==b&&!e)return[b];if(f||(f=Ba(c,e)),null!==b&&-1!==h.inArray(b,f))return[b];if(null===a||a===k||""===a)return f;if("function"==typeof a)return h.map(f,function(b){var e=c.aoData[b];return a(b,e._aData,e.nTr)?b:null});if(b=Qb(ia(c.aoData,f,"nTr")),a.nodeName)return a._DT_RowIndex!==k?[a._DT_RowIndex]:a._DT_CellIndex?[a._DT_CellIndex.row]:(b=h(a).closest("*[data-dt-row]")).length?[b.data("dt-row")]:[];if("string"==typeof a&&"#"===a.charAt(0)){var i=c.aIds[a.replace(/^#/,"")];if(i!==k)return[i.idx]}return h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()},c,e)},1);return c.selector.rows=a,c.selector.opts=b,c}),o("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||k},1)}),o("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return ia(a.aoData,b,"_aData")},1)}),u("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData},1)}),u("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){ca(b,c,a)})}),u("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)}),u("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var f=0,g=this[d].length;f<g;f++){var h=c[d].rowIdFn(c[d].aoData[this[d][f]]._aData);b.push((!0===a?"#":"")+h)}return new s(c,b)}),u("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,d){var g,h,i,n,l,e=b.aoData,f=e[c];for(e.splice(c,1),g=0,h=e.length;g<h;g++)if(l=(i=e[g]).anCells,null!==i.nTr&&(i.nTr._DT_RowIndex=g),null!==l)for(i=0,n=l.length;i<n;i++)l[i]._DT_CellIndex.row=g;oa(b.aiDisplayMaster,c),oa(b.aiDisplay,c),oa(a[d],c,!1),0<b._iRecordsDisplay&&b._iRecordsDisplay--,Ra(b),(c=b.rowIdFn(f._aData))!==k&&delete b.aIds[c]}),this.iterator("table",function(a){for(var c=0,d=a.aoData.length;c<d;c++)a.aoData[c].idx=c}),this}),o("rows.add()",function(a){var b=this.iterator("table",function(b){var c,f,g,h=[];for(f=0,g=a.length;f<g;f++)(c=a[f]).nodeName&&"TR"===c.nodeName.toUpperCase()?h.push(ma(b,c)[0]):h.push(M(b,c));return h},1),c=this.rows(-1);return c.pop(),h.merge(c,b),c}),o("row()",function(a,b){return ab(this.rows(a,b))}),o("row().data()",function(a){var b=this.context;return a===k?b.length&&this.length?b[0].aoData[this[0]]._aData:k:(b[0].aoData[this[0]]._aData=a,ca(b[0],this[0],"data"),this)}),o("row().node()",function(){var a=this.context;return a.length&&this.length&&a[0].aoData[this[0]].nTr||null}),o("row.add()",function(a){a instanceof h&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?ma(b,a)[0]:M(b,a)});return this.row(b[0])});var bb=function(a,b){var c=a.context;c.length&&(c=c[0].aoData[b!==k?b:a[0]])&&c._details&&(c._details.remove(),c._detailsShow=k,c._details=k)},Tb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new s(e),g=e.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<D(g,"_details").length&&(f.on("draw.dt.DT_details",function(a,b){e===b&&f.rows({page:"current"}).eq(0).each(function(a){(a=g[a])._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(e===b)for(var c,d=aa(b),f=0,h=g.length;f<h;f++)(c=g[f])._details&&c._details.children("td[colspan]").attr("colspan",d)}),f.on("destroy.dt.DT_details",function(a,b){if(e===b)for(var c=0,d=g.length;c<d;c++)g[c]._details&&bb(f,c)}))}}};o("row().child()",function(a,b){var c=this.context;if(a===k)return c.length&&this.length?c[0].aoData[this[0]]._details:k;if(!0===a)this.child.show();else if(!1===a)bb(this);else if(c.length&&this.length){var d=c[0],e=(c=c[0].aoData[this[0]],[]),f=function(a,b){if(h.isArray(a)||a instanceof h)for(var c=0,k=a.length;c<k;c++)f(a[c],b);else a.nodeName&&"tr"===a.nodeName.toLowerCase()?e.push(a):(c=h("<tr><td/></tr>").addClass(b),h("td",c).addClass(b).html(a)[0].colSpan=aa(d),e.push(c[0]))};f(a,b),c._details&&c._details.detach(),c._details=h(e),c._detailsShow&&c._details.insertAfter(c.nTr)}return this}),o(["row().child.show()","row().child().show()"],function(){return Tb(this,!0),this}),o(["row().child.hide()","row().child().hide()"],function(){return Tb(this,!1),this}),o(["row().child.remove()","row().child().remove()"],function(){return bb(this),this}),o("row().child.isShown()",function(){var a=this.context;return a.length&&this.length&&a[0].aoData[this[0]]._detailsShow||!1});var bc=/^([^:]+):(name|visIdx|visible)$/,Ub=function(a,b,c,d,e){c=[],d=0;for(var f=e.length;d<f;d++)c.push(B(a,e[d],b));return c};o("columns()",function(a,b){a===k?a="":h.isPlainObject(a)&&(b=a,a="");b=$a(b);var c=this.iterator("table",function(c){var e=a,f=b,g=c.aoColumns,j=D(g,"sName"),i=D(g,"nTh");return Za("column",e,function(a){var b=Nb(a);if(""===a)return W(g.length);if(null!==b)return[0<=b?b:g.length+b];if("function"==typeof a){var e=Ba(c,f);return h.map(g,function(b,f){return a(f,Ub(c,f,0,0,e),i[f])?f:null})}var k="string"==typeof a?a.match(bc):"";if(k)switch(k[2]){case"visIdx":case"visible":if((b=parseInt(k[1],10))<0){var m=h.map(g,function(a,b){return a.bVisible?b:null});return[m[m.length+b]]}return[Z(c,b)];case"name":return h.map(j,function(a,b){return a===k[1]?b:null});default:return[]}return a.nodeName&&a._DT_CellIndex?[a._DT_CellIndex.column]:(b=h(i).filter(a).map(function(){return h.inArray(this,i)}).toArray()).length||!a.nodeName?b:(b=h(a).closest("*[data-dt-column]")).length?[b.data("dt-column")]:[]},c,f)},1);return c.selector.cols=a,c.selector.opts=b,c}),u("columns().header()","column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)}),u("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)}),u("columns().data()","column().data()",function(){return this.iterator("column-rows",Ub,1)}),u("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)}),u("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return ia(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)}),u("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return ia(a.aoData,e,"anCells",b)},1)}),u("columns().visible()","column().visible()",function(a,b){var c=this.iterator("column",function(b,c){if(a===k)return b.aoColumns[c].bVisible;var i,n,l,f=b.aoColumns,g=f[c],j=b.aoData;if(a!==k&&g.bVisible!==a){if(a){var m=h.inArray(!0,D(f,"bVisible"),c+1);for(i=0,n=j.length;i<n;i++)l=j[i].nTr,f=j[i].anCells,l&&l.insertBefore(f[c],f[m]||null)}else h(D(b.aoData,"anCells",c)).detach();g.bVisible=a,ea(b,b.aoHeader),ea(b,b.aoFooter),xa(b)}});return a!==k&&(this.iterator("column",function(c,e){r(c,null,"column-visibility",[c,e,a,b])}),(b===k||b)&&this.columns.adjust()),c}),u("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?$(b,c):c},1)}),o("columns.adjust()",function(){return this.iterator("table",function(a){Y(a)},1)}),o("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return Z(c,b);if("fromData"===a||"toVisible"===a)return $(c,b)}}),o("column()",function(a,b){return ab(this.columns(a,b))}),o("cells()",function(a,b,c){if(h.isPlainObject(a)&&(a.row===k?(c=a,a=null):(c=b,b=null)),h.isPlainObject(b)&&(c=b,b=null),null===b||b===k)return this.iterator("table",function(b){var l,m,o,u,s,r,v,d=a,e=$a(c),f=b.aoData,g=Ba(b,e),j=Qb(ia(f,g,"anCells")),i=h([].concat.apply([],j)),n=b.aoColumns.length;return Za("cell",d,function(a){var c="function"==typeof a;if(null===a||a===k||c){for(m=[],o=0,u=g.length;o<u;o++)for(l=g[o],s=0;s<n;s++)r={row:l,column:s},c?(v=f[l],a(r,B(b,l,s),v.anCells?v.anCells[s]:null)&&m.push(r)):m.push(r);return m}return h.isPlainObject(a)?[a]:(c=i.filter(a).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray()).length||!a.nodeName?c:(v=h(a).closest("*[data-dt-row]")).length?[{row:v.data("dt-row"),column:v.data("dt-column")}]:[]},b,e)});var f,g,j,i,n,d=this.columns(b,c),e=this.rows(a,c),l=this.iterator("table",function(a,b){for(f=[],g=0,j=e[b].length;g<j;g++)for(i=0,n=d[b].length;i<n;i++)f.push({row:e[b][g],column:d[b][i]});return f},1);return h.extend(l.selector,{cols:b,rows:a,opts:c}),l}),u("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b])&&a.anCells?a.anCells[c]:k},1)}),o("cells().data()",function(){return this.iterator("cell",function(a,b,c){return B(a,b,c)},1)}),u("cells().cache()","cell().cache()",function(a){return a="search"===a?"_aFilterData":"_aSortData",this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)}),u("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return B(b,c,d,a)},1)}),u("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:$(a,c)}},1)}),u("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){ca(b,c,a,d)})}),o("cell()",function(a,b,c){return ab(this.cells(a,b,c))}),o("cell().data()",function(a){var b=this.context,c=this[0];return a===k?b.length&&c.length?B(b[0],c[0].row,c[0].column):k:(ib(b[0],c[0].row,c[0].column,a),ca(b[0],c[0].row,"data",c[0].column),this)}),o("order()",function(a,b){var c=this.context;return a===k?0!==c.length?c[0].aaSorting:k:("number"==typeof a?a=[[a,b]]:a.length&&!h.isArray(a[0])&&(a=Array.prototype.slice.call(arguments)),this.iterator("table",function(b){b.aaSorting=a.slice()}))}),o("order.listener()",function(a,b,c){return this.iterator("table",function(d){La(d,a,b,c)})}),o("order.fixed()",function(a){if(a)return this.iterator("table",function(b){b.aaSortingFixed=h.extend(!0,{},a)});var b=(b=this.context).length?b[0].aaSortingFixed:k;return h.isArray(b)?{pre:b}:b}),o(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])}),c.aaSorting=e})}),o("search()",function(a,b,c,d){var e=this.context;return a===k?0!==e.length?e[0].oPreviousSearch.sSearch:k:this.iterator("table",function(e){e.oFeatures.bFilter&&fa(e,h.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null!==b&&b,bSmart:null===c||c,bCaseInsensitive:null===d||d}),1)})}),u("columns().search()","column().search()",function(a,b,c,d){return this.iterator("column",function(e,f){var g=e.aoPreSearchCols;if(a===k)return g[f].sSearch;e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null!==b&&b,bSmart:null===c||c,bCaseInsensitive:null===d||d}),fa(e,e.oPreviousSearch,1))})}),o("state()",function(){return this.context.length?this.context[0].oSavedState:null}),o("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})}),o("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),o("state.save()",function(){return this.iterator("table",function(a){xa(a)})}),m.versionCheck=m.fnVersionCheck=function(a){for(var c,d,b=m.version.split("."),e=0,f=(a=a.split(".")).length;e<f;e++)if((c=parseInt(b[e],10)||0)!==(d=parseInt(a[e],10)||0))return d<c;return!0},m.isDataTable=m.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;return a instanceof m.Api||(h.each(m.settings,function(a,e){var f=e.nScrollHead?h("table",e.nScrollHead)[0]:null,g=e.nScrollFoot?h("table",e.nScrollFoot)[0]:null;e.nTable!==b&&f!==b&&g!==b||(c=!0)}),c)},m.tables=m.fnTables=function(a){var b=!1;h.isPlainObject(a)&&(b=a.api,a=a.visible);var c=h.map(m.settings,function(b){if(!a||a&&h(b.nTable).is(":visible"))return b.nTable});return b?new s(c):c},m.camelToHungarian=I,o("$()",function(a,b){var c=this.rows(b).nodes();c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))}),h.each(["on","one","off"],function(a,b){o(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0]=h.map(a[0].split(/\s/),function(a){return a.match(/\.dt\b/)?a:a+".dt"}).join(" ");var d=h(this.tables().nodes());return d[b].apply(d,a),this})}),o("clear()",function(){return this.iterator("table",function(a){na(a)})}),o("settings()",function(){return new s(this.context,this.context)}),o("init()",function(){var a=this.context;return a.length?a[0].oInit:null}),o("data()",function(){return this.iterator("table",function(a){return D(a.aoData,"_aData")}).flatten()}),o("destroy()",function(a){return a=a||!1,this.iterator("table",function(b){var o,c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),k=(f=h(f),h(b.nTableWrapper)),l=h.map(b.aoData,function(a){return a.nTr});b.bDestroying=!0,r(b,"aoDestroyCallback","destroy",[b]),a||new s(b).columns().visible(!0),k.off(".DT").find(":not(tbody *)").off(".DT"),h(E).off(".DT-"+b.sInstance),e!=g.parentNode&&(i.children("thead").detach(),i.append(g)),j&&e!=j.parentNode&&(i.children("tfoot").detach(),i.append(j)),b.aaSorting=[],b.aaSortingFixed=[],wa(b),h(l).removeClass(b.asStripeClasses.join(" ")),h("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone),f.children().detach(),f.append(l),i[g=a?"remove":"detach"](),k[g](),!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),i.css("width",b.sDestroyWidth).removeClass(d.sTable),(o=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%o])})),-1!==(c=h.inArray(b,m.settings))&&m.settings.splice(c,1)})}),h.each(["column","row","cell"],function(a,b){o(b+"s().every()",function(a){var d=this.selector.opts,e=this;return this.iterator(b,function(f,g,h,i,n){a.call(e[b](g,"cell"===b?h:d,"cell"===b?d:k),g,h,i,n)})})}),o("i18n()",function(a,b,c){var d=this.context[0];return(a=Q(a)(d.oLanguage))===k&&(a=b),c!==k&&h.isPlainObject(a)&&(a=a[c]!==k?a[c]:a._),a.replace("%d",c)}),m.version="1.10.16",m.settings=[],m.models={},m.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},m.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},m.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},m.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},m.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},X(m.defaults),m.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},X(m.defaults.column),m.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:k,oAjaxData:k,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==y(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==y(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||d<c||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},m.ext=x={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:m.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:m.version},h.extend(x,{afnFiltering:x.search,aTypes:x.type.detect,ofnSearch:x.type.search,oSort:x.type.order,afnSortData:x.order,aoFeatures:x.feature,oApi:x.internal,oStdClasses:x.classes,oPagination:x.pager}),h.extend(m.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Kb=m.ext.pager;h.extend(Kb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(a,b){return[ha(a,b)]},simple_numbers:function(a,b){return["previous",ha(a,b),"next"]},full_numbers:function(a,b){return["first","previous",ha(a,b),"next","last"]},first_last_numbers:function(a,b){return["first",ha(a,b),"last"]},_numbers:ha,numbers_length:7}),h.extend(!0,m.ext.renderer,{pageButton:{_:function(a,b,c,d,e,f){var n,l,s,g=a.oClasses,j=a.oLanguage.oPaginate,i=a.oLanguage.oAria.paginate||{},m=0,o=function(b,d){var k,s,u,r,v=function(b){Sa(a,b.data.action,!0)};for(k=0,s=d.length;k<s;k++)if(r=d[k],h.isArray(r))u=h("<"+(r.DT_el||"div")+"/>").appendTo(b),o(u,r);else{switch(n=null,l="",r){case"ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case"first":n=j.sFirst,l=r+(0<e?"":" "+g.sPageButtonDisabled);break;case"previous":n=j.sPrevious,l=r+(0<e?"":" "+g.sPageButtonDisabled);break;case"next":n=j.sNext,l=r+(e<f-1?"":" "+g.sPageButtonDisabled);break;case"last":n=j.sLast,l=r+(e<f-1?"":" "+g.sPageButtonDisabled);break;default:n=r+1,l=e===r?g.sPageButtonActive:""}null!==n&&(Va(u=h("<a>",{class:g.sPageButton+" "+l,"aria-controls":a.sTableId,"aria-label":i[r],"data-dt-idx":m,tabindex:a.iTabIndex,id:0===c&&"string"==typeof r?a.sTableId+"_"+r:null}).html(n).appendTo(b),{action:r},v),m++)}};try{s=h(b).find(G.activeElement).data("dt-idx")}catch(u){}o(h(b).empty(),d),s!==k&&h(b).find("[data-dt-idx="+s+"]").focus()}}}),h.extend(m.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Ya(a,c)?"num"+c:null},function(a){if(a&&!(a instanceof Date)&&!Zb.test(a))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||L(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Ya(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Pb(a,c,!0)?"html-num-fmt"+c:null},function(a){return L(a)||"string"==typeof a&&-1!==a.indexOf("<")?"html":null}]),h.extend(m.ext.type.search,{html:function(a){return L(a)?a:"string"==typeof a?a.replace(Mb," ").replace(Aa,""):""},string:function(a){return L(a)?a:"string"==typeof a?a.replace(Mb," "):a}});var za=function(a,b,c,d){return 0===a||a&&"-"!==a?(b&&(a=Ob(a,b)),a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,""))),1*a):-1/0};h.extend(x.type.order,{"date-pre":function(a){return Date.parse(a)||-1/0},"html-pre":function(a){return L(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return L(a)?"":"string"==typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:b<a?1:0},"string-desc":function(a,b){return a<b?1:b<a?-1:0}}),cb(""),h.extend(!0,m.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on("order.dt.DT",function(e,f,g,h){a===f&&(e=c.idx,b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass("asc"==h[e]?d.sSortAsc:"desc"==h[e]?d.sSortDesc:c.sSortingClass))})},jqueryui:function(a,b,c,d){h("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b),h(a.nTable).on("order.dt.DT",function(e,f,g,h){a===f&&(e=c.idx,b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass("asc"==h[e]?d.sSortAsc:"desc"==h[e]?d.sSortDesc:c.sSortingClass),b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass("asc"==h[e]?d.sSortJUIAsc:"desc"==h[e]?d.sSortJUIDesc:c.sSortingClassJUI))})}}});var Vb=function(a){return"string"==typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};return m.render={number:function(a,b,c,d,e){return{display:function(f){if("number"!=typeof f&&"string"!=typeof f)return f;var g=f<0?"-":"",h=parseFloat(f);return isNaN(h)?Vb(f):(h=h.toFixed(c),f=Math.abs(h),h=parseInt(f,10),f=c?b+(f-h).toFixed(c).substring(2):"",g+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+f+(e||""))}}},text:function(){return{display:Vb}}},h.extend(m.ext.internal,{_fnExternApiFunc:Lb,_fnBuildAjax:sa,_fnAjaxUpdate:kb,_fnAjaxParameters:tb,_fnAjaxUpdateDraw:ub,_fnAjaxDataSrc:ta,_fnAddColumn:Da,_fnColumnOptions:ja,_fnAdjustColumnSizing:Y,_fnVisibleToColumnIndex:Z,_fnColumnIndexToVisible:$,_fnVisbleColumns:aa,_fnGetColumns:la,_fnColumnTypes:Fa,_fnApplyColumnDefs:hb,_fnHungarianMap:X,_fnCamelToHungarian:I,_fnLanguageCompat:Ca,_fnBrowserDetect:fb,_fnAddData:M,_fnAddTr:ma,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==k?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:B,_fnSetCellData:ib,_fnSplitObjNotation:Ia,_fnGetObjectDataFn:Q,_fnSetObjectDataFn:R,_fnGetDataMaster:Ja,_fnClearTable:na,_fnDeleteIndex:oa,_fnInvalidate:ca,_fnGetRowElements:Ha,_fnCreateTr:Ga,_fnBuildHead:jb,_fnDrawHead:ea,_fnDraw:N,_fnReDraw:S,_fnAddOptionsHtml:mb,_fnDetectHeader:da,_fnGetUniqueThs:ra,_fnFeatureHtmlFilter:ob,_fnFilterComplete:fa,_fnFilterCustom:xb,_fnFilterColumn:wb,_fnFilter:vb,_fnFilterCreateSearch:Oa,_fnEscapeRegex:Pa,_fnFilterData:yb,_fnFeatureHtmlInfo:rb,_fnUpdateInfo:Bb,_fnInfoMacros:Cb,_fnInitialise:ga,_fnInitComplete:ua,_fnLengthChange:Qa,_fnFeatureHtmlLength:nb,_fnFeatureHtmlPaginate:sb,_fnPageChange:Sa,_fnFeatureHtmlProcessing:pb,_fnProcessingDisplay:C,_fnFeatureHtmlTable:qb,_fnScrollDraw:ka,_fnApplyToChildren:H,_fnCalculateColumnWidths:Ea,_fnThrottle:Na,_fnConvertToWidth:Db,_fnGetWidestNode:Eb,_fnGetMaxLenString:Fb,_fnStringToCss:v,_fnSortFlatten:V,_fnSort:lb,_fnSortAria:Hb,_fnSortListener:Ua,_fnSortAttachListener:La,_fnSortingClasses:wa,_fnSortData:Gb,_fnSaveState:xa,_fnLoadState:Ib,_fnSettingsFromNode:ya,_fnLog:J,_fnMap:F,_fnBindAction:Va,_fnCallbackReg:z,_fnCallbackFire:r,_fnLengthOverflow:Ra,_fnRenderer:Ma,_fnDataSource:y,_fnRowAttributes:Ka,_fnCalculateEnd:function(){}}),((h.fn.dataTable=m).$=h).fn.dataTableSettings=m.settings,h.fn.dataTableExt=m.ext,h.fn.DataTable=function(a){return h(this).dataTable(a).api()},h.each(m,function(a,b){h.fn.DataTable[a]=b}),h.fn.dataTable}),function(b){"function"==typeof define&&define.amd?define("datatables.net-bs",["jquery","datatables.net"],function(a){return b(a,window,document)}):"object"==typeof exports?module.exports=function(a,d){return a||(a=window),d&&d.fn.dataTable||(d=require("datatables.net")(a,d).$),b(d,a,a.document)}:b(jQuery,window,document)}(function(b,a,d,m){var f=b.fn.dataTable;return b.extend(!0,f.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),b.extend(f.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm",sProcessing:"dataTables_processing panel panel-default"}),f.ext.renderer.pageButton.bootstrap=function(a,h,r,s,j,n){var e,g,i,o=new f.Api(a),t=a.oClasses,k=a.oLanguage.oPaginate,u=a.oLanguage.oAria.paginate||{},p=0,q=function(d,f){var l,h,i,c,m=function(a){a.preventDefault(),!b(a.currentTarget).hasClass("disabled")&&o.page()!=a.data.action&&o.page(a.data.action).draw("page")};for(l=0,h=f.length;l<h;l++)if(c=f[l],b.isArray(c))q(d,c);else{switch(g=e="",c){case"ellipsis":e="&#x2026;",g="disabled";break;case"first":e=k.sFirst,g=c+(0<j?"":" disabled");break;case"previous":e=k.sPrevious,g=c+(0<j?"":" disabled");break;case"next":e=k.sNext,g=c+(j<n-1?"":" disabled");break;case"last":e=k.sLast,g=c+(j<n-1?"":" disabled");break;default:e=c+1,g=j===c?"active":""}e&&(i=b("<li>",{class:t.sPageButton+" "+g,id:0===r&&"string"==typeof c?a.sTableId+"_"+c:null}).append(b("<a>",{href:"#","aria-controls":a.sTableId,"aria-label":u[c],"data-dt-idx":p,tabindex:a.iTabIndex}).html(e)).appendTo(d),a.oApi._fnBindAction(i,{action:c},m),p++)}};try{i=b(h).find(d.activeElement).data("dt-idx")}catch(v){}q(b(h).empty().html('<ul class="pagination"/>').children("ul"),s),i!==m&&b(h).find("[data-dt-idx="+i+"]").focus()},f}),function(d){"function"==typeof define&&define.amd?define("datatables.net-buttons",["jquery","datatables.net"],function(n){return d(n,window,document)}):"object"==typeof exports?module.exports=function(n,o){return n||(n=window),o&&o.fn.dataTable||(o=require("datatables.net")(n,o).$),d(o,n,n.document)}:d(jQuery,window,document)}(function(d,n,o,l){var q,i=d.fn.dataTable,w=0,x=0,j=i.ext.buttons,m=function(a,b){void 0===b&&(b={}),!0===b&&(b={}),d.isArray(b)&&(b={buttons:b}),this.c=d.extend(!0,{},m.defaults,b),b.buttons&&(this.c.buttons=b.buttons),this.s={dt:new i.Api(a),buttons:[],listenKeys:"",namespace:"dtb"+w++},this.dom={container:d("<"+this.c.dom.container.tag+"/>").addClass(this.c.dom.container.className)},this._constructor()};d.extend(m.prototype,{action:function(a,b){var c=this._nodeToButton(a);return b===l?c.conf.action:(c.conf.action=b,this)},active:function(a,b){var c=this._nodeToButton(a),e=this.c.dom.button.active;c=d(c.node);return b===l?c.hasClass(e):(c.toggleClass(e,b===l||b),this)},add:function(a,b){var c=this.s.buttons;if("string"==typeof b){for(var e=b.split("-"),d=(c=this.s,0),h=e.length-1;d<h;d++)c=c.buttons[1*e[d]];c=c.buttons,b=1*e[e.length-1]}return this._expandButton(c,a,!1,b),this._draw(),this},container:function(){return this.dom.container},disable:function(a){return a=this._nodeToButton(a),d(a.node).addClass(this.c.dom.button.disabled),this},destroy:function(){d("body").off("keyup."+this.s.namespace);var b,c,a=this.s.buttons.slice();for(b=0,c=a.length;b<c;b++)this.remove(a[b].node);for(this.dom.container.remove(),b=0,c=(a=this.s.dt.settings()[0]).length;b<c;b++)if(a.inst===this){a.splice(b,1);break}return this},enable:function(a,b){if(!1===b)return this.disable(a);var c=this._nodeToButton(a);return d(c.node).removeClass(this.c.dom.button.disabled),this},name:function(){return this.c.name},node:function(a){return a=this._nodeToButton(a),d(a.node)},processing:function(a,b){var c=this._nodeToButton(a);return b===l?d(c.node).hasClass("processing"):(d(c.node).toggleClass("processing",b),this)},remove:function(a){var b=this._nodeToButton(a),c=this._nodeToHost(a),e=this.s.dt;if(b.buttons.length)for(var g=b.buttons.length-1;0<=g;g--)this.remove(b.buttons[g].node);return b.conf.destroy&&b.conf.destroy.call(e.button(a),e,d(a),b.conf),this._removeKey(b.conf),d(b.node).remove(),a=d.inArray(b,c),c.splice(a,1),this},text:function(a,b){var c=this._nodeToButton(a),e=this.c.dom.collection.buttonLiner,g=(e=c.inCollection&&e&&e.tag?e.tag:this.c.dom.buttonLiner.tag,this.s.dt),h=d(c.node),f=function(a){return"function"==typeof a?a(g,h,c.conf):a};return b===l?f(c.conf.text):(c.conf.text=b,e?h.children(e).html(f(b)):h.html(f(b)),this)},_constructor:function(){var a=this,b=this.s.dt,c=b.settings()[0],e=this.c.buttons;c._buttons||(c._buttons=[]),c._buttons.push({inst:this,name:this.c.name});c=0;for(var g=e.length;c<g;c++)this.add(e[c]);b.on("destroy",function(){a.destroy()}),d("body").on("keyup."+this.s.namespace,function(b){if(!o.activeElement||o.activeElement===o.body){var c=String.fromCharCode(b.keyCode).toLowerCase();-1!==a.s.listenKeys.toLowerCase().indexOf(c)&&a._keypress(c,b)}})},_addKey:function(a){a.key&&(this.s.listenKeys+=d.isPlainObject(a.key)?a.key.key:a.key)},_draw:function(a,b){a||(a=this.dom.container,b=this.s.buttons),a.children().detach();for(var c=0,e=b.length;c<e;c++)a.append(b[c].inserter),a.append(" "),b[c].buttons&&b[c].buttons.length&&this._draw(b[c].collection,b[c].buttons)},_expandButton:function(a,b,c,e){for(var g=this.s.dt,f=0,r=(b=d.isArray(b)?b:[b]).length;f<r;f++){var k=this._resolveExtends(b[f]);if(k)if(d.isArray(k))this._expandButton(a,k,c,e);else{var p=this._buildButton(k,c);if(p){if(e!==l?(a.splice(e,0,p),e++):a.push(p),p.conf.buttons){var t=this.c.dom.collection;p.collection=d("<"+t.tag+"/>").addClass(t.className).attr("role","menu"),p.conf._collection=p.collection,this._expandButton(p.buttons,p.conf.buttons,!0,e)}k.init&&k.init.call(g.button(p.node),g,d(p.node),k),0}}}},_buildButton:function(a,b){var c=this.c.dom.button,e=this.c.dom.buttonLiner,g=this.c.dom.collection,h=this.s.dt,f=function(b){return"function"==typeof b?b(h,k,a):b};if(b&&g.button&&(c=g.button),b&&g.buttonLiner&&(e=g.buttonLiner),a.available&&!a.available(h,a))return!1;var r=function(a,b,c,e){e.action.call(b.button(c),a,b,c,e),d(b.table().node()).triggerHandler("buttons-action.dt",[b.button(c),b,c,e])},k=d("<"+c.tag+"/>").addClass(c.className).attr("tabindex",this.s.dt.settings()[0].iTabIndex).attr("aria-controls",this.s.dt.table().node().id).on("click.dtb",function(b){b.preventDefault(),!k.hasClass(c.disabled)&&a.action&&r(b,h,k,a),k.blur()}).on("keyup.dtb",function(b){13===b.keyCode&&!k.hasClass(c.disabled)&&a.action&&r(b,h,k,a)});return"a"===c.tag.toLowerCase()&&k.attr("href","#"),e.tag?(g=d("<"+e.tag+"/>").html(f(a.text)).addClass(e.className),"a"===e.tag.toLowerCase()&&g.attr("href","#"),k.append(g)):k.html(f(a.text)),!1===a.enabled&&k.addClass(c.disabled),a.className&&k.addClass(a.className),a.titleAttr&&k.attr("title",f(a.titleAttr)),a.namespace||(a.namespace=".dt-button-"+x++),e=(e=this.c.dom.buttonContainer)&&e.tag?d("<"+e.tag+"/>").addClass(e.className).append(k):k,this._addKey(a),{conf:a,node:k.get(0),inserter:e,buttons:[],inCollection:b,collection:null}},_nodeToButton:function(a,b){b||(b=this.s.buttons);for(var c=0,e=b.length;c<e;c++){if(b[c].node===a)return b[c];if(b[c].buttons.length){var d=this._nodeToButton(a,b[c].buttons);if(d)return d}}},_nodeToHost:function(a,b){b||(b=this.s.buttons);for(var c=0,e=b.length;c<e;c++){if(b[c].node===a)return b;if(b[c].buttons.length){var d=this._nodeToHost(a,b[c].buttons);if(d)return d}}},_keypress:function(a,b){var c=function(e){for(var g=0,h=e.length;g<h;g++){var f=e[g].conf,r=e[g].node;f.key&&(f.key===a?d(r).click():!d.isPlainObject(f.key)||f.key.key!==a||f.key.shiftKey&&!b.shiftKey||f.key.altKey&&!b.altKey||f.key.ctrlKey&&!b.ctrlKey||(!f.key.metaKey||b.metaKey)&&d(r).click()),e[g].buttons.length&&c(e[g].buttons)}};c(this.s.buttons)},_removeKey:function(a){if(a.key){var b=d.isPlainObject(a.key)?a.key.key:a.key;a=this.s.listenKeys.split(""),b=d.inArray(b,a);a.splice(b,1),this.s.listenKeys=a.join("")}},_resolveExtends:function(a){var c,e,b=this.s.dt,g=function(c){for(var e=0;!d.isPlainObject(c)&&!d.isArray(c);){if(c===l)return;if("function"==typeof c){if(!(c=c(b,a)))return!1}else if("string"==typeof c){if(!j[c])throw"Unknown button type: "+c;c=j[c]}if(30<++e)throw"Buttons: Too many iterations"}return d.isArray(c)?c:d.extend({},c)};for(a=g(a);a&&a.extend;){if(!j[a.extend])throw"Cannot extend unknown button type: "+a.extend;var h=g(j[a.extend]);if(d.isArray(h))return h;if(!h)return!1;c=h.className,a=d.extend({},h,a),c&&a.className!==c&&(a.className=c+" "+a.className);var f=a.postfixButtons;if(f){for(a.buttons||(a.buttons=[]),c=0,e=f.length;c<e;c++)a.buttons.push(f[c]);a.postfixButtons=null}if(f=a.prefixButtons){for(a.buttons||(a.buttons=[]),c=0,e=f.length;c<e;c++)a.buttons.splice(c,0,f[c]);a.prefixButtons=null}a.extend=h.extend}return a}}),m.background=function(a,b,c){c===l&&(c=400),a?d("<div/>").addClass(b).css("display","none").appendTo("body").fadeIn(c):d("body > div."+b).fadeOut(c,function(){d(this).removeClass(b).remove()})},m.instanceSelector=function(a,b){if(!a)return d.map(b,function(a){return a.inst});var c=[],e=d.map(b,function(a){return a.name}),g=function(a){if(d.isArray(a))for(var f=0,r=a.length;f<r;f++)g(a[f]);else"string"==typeof a?-1!==a.indexOf(",")?g(a.split(",")):-1!==(a=d.inArray(d.trim(a),e))&&c.push(b[a].inst):"number"==typeof a&&c.push(b[a].inst)};return g(a),c},m.buttonSelector=function(a,b){for(var c=[],e=function(a,b,c){for(var d,g,f=0,h=b.length;f<h;f++)(d=b[f])&&(g=c!==l?c+f:f+"",a.push({node:d.node,name:d.conf.name,idx:g}),d.buttons&&e(a,d.buttons,g+"-"))},g=function(a,b){var f,h,i=[];if(e(i,b.s.buttons),f=d.map(i,function(a){return a.node}),d.isArray(a)||a instanceof d)for(f=0,h=a.length;f<h;f++)g(a[f],b);else if(null===a||a===l||"*"===a)for(f=0,h=i.length;f<h;f++)c.push({inst:b,node:i[f].node});else if("number"==typeof a)c.push({inst:b,node:b.s.buttons[a].node});else if("string"==typeof a)if(-1!==a.indexOf(","))for(f=0,h=(i=a.split(",")).length;f<h;f++)g(d.trim(i[f]),b);else if(a.match(/^\d+(\-\d+)*$/))f=d.map(i,function(a){return a.idx}),c.push({inst:b,node:i[d.inArray(a,f)].node});else if(-1!==a.indexOf(":name")){var j=a.replace(":name","");for(f=0,h=i.length;f<h;f++)i[f].name===j&&c.push({inst:b,node:i[f].node})}else d(f).filter(a).each(function(){c.push({inst:b,node:this})});else"object"==typeof a&&a.nodeName&&(-1!==(i=d.inArray(a,f))&&c.push({inst:b,node:f[i]}))},h=0,f=a.length;h<f;h++)g(b,a[h]);return c},m.defaults={buttons:["copy","excel","csv","pdf","print"],name:"main",tabIndex:0,dom:{container:{tag:"div",className:"dt-buttons"},collection:{tag:"div",className:"dt-button-collection"},button:{tag:"a",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"span",className:""}}},m.version="1.4.2",d.extend(j,{collection:{text:function(a){return a.i18n("buttons.collection","Collection")},className:"buttons-collection",action:function(a,b,c,e){a=c.offset();var g=d(b.table().container()),h=!1;d("div.dt-button-background").length&&(h=d(".dt-button-collection").offset(),d("body").trigger("click.dtb-collection")),e._collection.addClass(e.collectionLayout).css("display","none").appendTo("body").fadeIn(e.fade);var f=e._collection.css("position");h&&"absolute"===f?e._collection.css({top:h.top,left:h.left}):"absolute"===f?(e._collection.css({top:a.top+c.outerHeight(),left:a.left}),h=g.offset().top+g.height(),c=a.top+c.outerHeight()+e._collection.outerHeight()-h,h=a.top-e._collection.outerHeight(),(h=g.offset().top-h)<c&&e._collection.css("top",a.top-e._collection.outerHeight()-5),c=a.left+e._collection.outerWidth(),(g=g.offset().left+g.width())<c&&e._collection.css("left",a.left-(c-g))):((a=e._collection.height()/2)>d(n).height()/2&&(a=d(n).height()/2),e._collection.css("marginTop",-1*a)),e.background&&m.background(!0,e.backgroundClassName,e.fade),setTimeout(function(){d("div.dt-button-background").on("click.dtb-collection",function(){}),d("body").on("click.dtb-collection",function(a){var c=d.fn.addBack?"addBack":"andSelf";d(a.target).parents()[c]().filter(e._collection).length||(e._collection.fadeOut(e.fade,function(){e._collection.detach()}),d("div.dt-button-background").off("click.dtb-collection"),m.background(!1,e.backgroundClassName,e.fade),d("body").off("click.dtb-collection"),b.off("buttons-action.b-internal"))})},10),e.autoClose&&b.on("buttons-action.b-internal",function(){d("div.dt-button-background").click()})},background:!0,collectionLayout:"",backgroundClassName:"dt-button-background",autoClose:!1,fade:400},copy:function(a,b){return j.copyHtml5?"copyHtml5":j.copyFlash&&j.copyFlash.available(a,b)?"copyFlash":void 0},csv:function(a,b){return j.csvHtml5&&j.csvHtml5.available(a,b)?"csvHtml5":j.csvFlash&&j.csvFlash.available(a,b)?"csvFlash":void 0},excel:function(a,b){return j.excelHtml5&&j.excelHtml5.available(a,b)?"excelHtml5":j.excelFlash&&j.excelFlash.available(a,b)?"excelFlash":void 0},pdf:function(a,b){return j.pdfHtml5&&j.pdfHtml5.available(a,b)?"pdfHtml5":j.pdfFlash&&j.pdfFlash.available(a,b)?"pdfFlash":void 0},pageLength:function(a){a=a.settings()[0].aLengthMenu;var b=d.isArray(a[0])?a[0]:a,c=d.isArray(a[0])?a[1]:a,e=function(a){return a.i18n("buttons.pageLength",{"-1":"Show all rows",_:"Show %d rows"},a.page.len())};return{extend:"collection",text:e,className:"buttons-page-length",autoClose:!0,buttons:d.map(b,function(a,b){return{text:c[b],className:"button-page-length",action:function(b,c){c.page.len(a).draw()},init:function(b,c,d){var e=this;c=function(){e.active(b.page.len()===a)};b.on("length.dt"+d.namespace,c),c()},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}),init:function(a,b,c){var d=this;a.on("length.dt"+c.namespace,function(){d.text(e(a))})},destroy:function(a,b,c){a.off("length.dt"+c.namespace)}}}}),i.Api.register("buttons()",function(a,b){b===l&&(b=a,a=l),this.selector.buttonGroup=a;var c=this.iterator(!0,"table",function(c){if(c._buttons)return m.buttonSelector(m.instanceSelector(a,c._buttons),b)},!0);return c._groupSelector=a,c}),i.Api.register("button()",function(a,b){var c=this.buttons(a,b);return 1<c.length&&c.splice(1,c.length),c}),i.Api.registerPlural("buttons().active()","button().active()",function(a){return a===l?this.map(function(a){return a.inst.active(a.node)}):this.each(function(b){b.inst.active(b.node,a)})}),i.Api.registerPlural("buttons().action()","button().action()",function(a){return a===l?this.map(function(a){return a.inst.action(a.node)}):this.each(function(b){b.inst.action(b.node,a)})}),i.Api.register(["buttons().enable()","button().enable()"],function(a){return this.each(function(b){b.inst.enable(b.node,a)})}),i.Api.register(["buttons().disable()","button().disable()"],function(){return this.each(function(a){a.inst.disable(a.node)})}),i.Api.registerPlural("buttons().nodes()","button().node()",function(){var a=d();return d(this.each(function(b){a=a.add(b.inst.node(b.node))})),a}),i.Api.registerPlural("buttons().processing()","button().processing()",function(a){return a===l?this.map(function(a){return a.inst.processing(a.node)}):this.each(function(b){b.inst.processing(b.node,a)})}),i.Api.registerPlural("buttons().text()","button().text()",function(a){return a===l?this.map(function(a){return a.inst.text(a.node)}):this.each(function(b){b.inst.text(b.node,a)})}),i.Api.registerPlural("buttons().trigger()","button().trigger()",function(){return this.each(function(a){a.inst.node(a.node).trigger("click")})}),i.Api.registerPlural("buttons().containers()","buttons().container()",function(){var a=d(),b=this._groupSelector;return this.iterator(!0,"table",function(c){if(c._buttons)for(var d=0,g=(c=m.instanceSelector(b,c._buttons)).length;d<g;d++)a=a.add(c[d].container())}),a}),i.Api.register("button().add()",function(a,b){var c=this.context;return c.length&&((c=m.instanceSelector(this._groupSelector,c[0]._buttons)).length&&c[0].add(b,a)),this.button(this._groupSelector,a)}),i.Api.register("buttons().destroy()",function(){return this.pluck("inst").unique().each(function(a){a.destroy()}),this}),i.Api.registerPlural("buttons().remove()","buttons().remove()",function(){return this.each(function(a){a.inst.remove(a.node)}),this}),i.Api.register("buttons.info()",function(a,b,c){var e=this;return!1===a?(d("#datatables_buttons_info").fadeOut(function(){d(this).remove()}),clearTimeout(q),q=null):(q&&clearTimeout(q),d("#datatables_buttons_info").length&&d("#datatables_buttons_info").remove(),d('<div id="datatables_buttons_info" class="dt-button-info"/>').html(a?"<h2>"+a+"</h2>":"").append(d("<div/>")["string"==typeof b?"html":"append"](b)).css("display","none").appendTo("body").fadeIn(),c!==l&&0!==c&&(q=setTimeout(function(){e.buttons.info(!1)},c))),this}),i.Api.register("buttons.exportData()",function(a){if(this.context.length){for(var b=new i.Api(this.context[0]),c=d.extend(!0,{},{rows:null,columns:"",modifier:{search:"applied",order:"applied"},orthogonal:"display",stripHtml:!0,stripNewlines:!0,decodeEntities:!0,trim:!0,format:{header:function(a){return e(a)},footer:function(a){return e(a)},body:function(a){return e(a)}}},a),e=function(a){return"string"!=typeof a||(a=a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,""),c.stripHtml&&(a=a.replace(/<[^>]*>/g,"")),c.trim&&(a=a.replace(/^\s+|\s+$/g,"")),c.stripNewlines&&(a=a.replace(/\n/g," ")),c.decodeEntities&&(u.innerHTML=a,a=u.value)),a},g=(a=b.columns(c.columns).indexes().map(function(a){var d=b.column(a).header();return c.format.header(d.innerHTML,a,d)}).toArray(),b.table().footer()?b.columns(c.columns).indexes().map(function(a){var d=b.column(a).footer();return c.format.footer(d?d.innerHTML:"",a,d)}).toArray():null),h=b.rows(c.rows,c.modifier).indexes().toArray(),f=(h=(f=b.cells(h,c.columns)).render(c.orthogonal).toArray(),f.nodes().toArray()),j=a.length,k=0<j?h.length/j:0,l=Array(k),m=0,n=0;n<k;n++){for(var o=Array(j),q=0;q<j;q++)o[q]=c.format.body(h[m],n,q,f[m]),m++;l[n]=o}return{header:a,footer:g,body:l}}}),i.Api.register("buttons.exportInfo()",function(a){var b;a||(a={});var c=a;return"function"==typeof(b="*"===c.filename&&"*"!==c.title&&c.title!==l?c.title:c.filename)&&(b=b()),b===l||null===b?b=null:(-1!==b.indexOf("*")&&(b=d.trim(b.replace("*",d("title").text()))),b=b.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""),(c=s(c.extension))||(c=""),b+=c),{filename:b,title:c=null===(c=s(a.title))?null:-1!==c.indexOf("*")?c.replace("*",d("title").text()||"Exported data"):c,messageTop:v(this,a.messageTop||a.message,"top"),messageBottom:v(this,a.messageBottom,"bottom")}});var s=function(a){return null===a||a===l?null:"function"==typeof a?a():a},v=function(a,b,c){return null===(b=s(b))?null:(a=d("caption",a.table().container()).eq(0),"*"===b?a.css("caption-side")!==c?null:a.length?a.text():"":b)},u=d("<textarea/>")[0];return d.fn.dataTable.Buttons=m,d.fn.DataTable.Buttons=m,d(o).on("init.dt plugin-init.dt",function(a,b){if("dt"===a.namespace){var c=b.oInit.buttons||i.defaults.buttons;c&&!b._buttons&&new m(b,c).container()}}),i.ext.feature.push({fnInit:function(a){var b=(a=new i.Api(a)).init().buttons||i.defaults.buttons;return new m(a,b).container()},cFeature:"B"}),m}),function(g){"function"==typeof define&&define.amd?define("datatables.net-buttons-colvis",["jquery","datatables.net","datatables.net-buttons"],function(d){return g(d,window,document)}):"object"==typeof exports?module.exports=function(d,e){return d||(d=window),e&&e.fn.dataTable||(e=require("datatables.net")(d,e).$),e.fn.dataTable.Buttons||require("datatables.net-buttons")(d,e),g(e,d,d.document)}:g(jQuery,window,document)}(function(g,d,e,h){return d=g.fn.dataTable,g.extend(d.ext.buttons,{colvis:function(b,a){return{extend:"collection",text:function(a){return a.i18n("buttons.colvis","Column visibility")},className:"buttons-colvis",buttons:[{extend:"columnsToggle",columns:a.columns,columnText:a.columnText}]}},columnsToggle:function(b,a){return b.columns(a.columns).indexes().map(function(b){return{extend:"columnToggle",columns:b,columnText:a.columnText}}).toArray()},columnToggle:function(b,a){return{extend:"columnVisibility",columns:a.columns,columnText:a.columnText}},columnsVisibility:function(b,a){return b.columns(a.columns).indexes().map(function(b){return{extend:"columnVisibility",columns:b,visibility:a.visibility,columnText:a.columnText}}).toArray()},columnVisibility:{columns:h,text:function(b,a,c){return c._columnText(b,c)},className:"buttons-columnVisibility",action:function(b,a,c,f){a=(b=a.columns(f.columns)).visible(),b.visible(f.visibility!==h?f.visibility:!(a.length&&a[0]))},init:function(b,a,c){var f=this;b.on("column-visibility.dt"+c.namespace,function(a,d){!d.bDestroying&&d.nTable==b.settings()[0].nTable&&f.active(b.column(c.columns).visible())}).on("column-reorder.dt"+c.namespace,function(a,d,e){1===b.columns(c.columns).count()&&("number"==typeof c.columns&&(c.columns=e.mapping[c.columns]),a=b.column(c.columns),f.text(c._columnText(b,c)),f.active(a.visible()))}),this.active(b.column(c.columns).visible())},destroy:function(b,a,c){b.off("column-visibility.dt"+c.namespace).off("column-reorder.dt"+c.namespace)},_columnText:function(b,a){var c=b.column(a.columns).index(),f=b.settings()[0].aoColumns[c].sTitle.replace(/\n/g," ").replace(/<br\s*\/?>/gi," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,"");return a.columnText?a.columnText(b,c,f):f}},colvisRestore:{className:"buttons-colvisRestore",text:function(b){return b.i18n("buttons.colvisRestore","Restore visibility")},init:function(b,a,c){c._visOriginal=b.columns().indexes().map(function(a){return b.column(a).visible()}).toArray()},action:function(b,a,c,d){a.columns().every(function(b){b=a.colReorder&&a.colReorder.transpose?a.colReorder.transpose(b,"toOriginal"):b,this.visible(d._visOriginal[b])})}},colvisGroup:{className:"buttons-colvisGroup",action:function(b,a,c,d){a.columns(d.show).visible(!0,!1),a.columns(d.hide).visible(!1,!1),a.columns.adjust()},show:[],hide:[]}}),d.Buttons}),function(h){"function"==typeof define&&define.amd?define("datatables.net-buttons-flash",["jquery","datatables.net","datatables.net-buttons"],function(j){return h(j,window,document)}):"object"==typeof exports?module.exports=function(j,l){return j||(j=window),l&&l.fn.dataTable||(l=require("datatables.net")(j,l).$),l.fn.dataTable.Buttons||require("datatables.net-buttons")(j,l),h(l,j,j.document)}:h(jQuery,window,document)}(function(h,j,l,p){function v(a){for(var b="";0<=a;)b=String.fromCharCode(a%26+65)+b,a=Math.floor(a/26)-1;return b}function o(a,b,d){var c=a.createElement(b);return d&&(d.attr&&h(c).attr(d.attr),d.children&&h.each(d.children,function(a,b){c.appendChild(b)}),null!==d.text&&d.text!==p&&c.appendChild(a.createTextNode(d.text))),c}function B(a,b){var c,d=a.header[b].length;a.footer&&a.footer[b].length>d&&(d=a.footer[b].length);for(var e=0,f=a.body.length;e<f;e++)if(d<(c=-1!==(c=null!==(c=a.body[e][b])&&c!==p?c.toString():"").indexOf("\n")?((c=c.split("\n")).sort(function(a,b){return b.length-a.length}),c[0].length):c.length)&&(d=c),40<d)return 52;return 6<(d*=1.3)?d:6}function w(a){q===p&&(q=-1===u.serializeToString(h.parseXML(m["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),h.each(a,function(b,d){if(h.isPlainObject(d))w(d);else{if(q){var e,f,c=d.childNodes[0],i=[];for(e=c.attributes.length-1;0<=e;e--){f=c.attributes[e].nodeName;var k=c.attributes[e].nodeValue;-1!==f.indexOf(":")&&(i.push({name:f,value:k}),c.removeAttribute(f))}for(e=0,f=i.length;e<f;e++)(k=d.createAttribute(i[e].name.replace(":","_dt_b_namespace_token_"))).value=i[e].value,c.setAttributeNode(k)}c=u.serializeToString(d),q&&(-1===c.indexOf("<?xml")&&(c='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+c),c=c.replace(/_dt_b_namespace_token_/g,":")),c=c.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),a[b]=c}})}var g=h.fn.dataTable,i={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){return"string"==typeof a&&(a=l.getElementById(a)),a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a),this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(RegExp("\\s*"+a+"\\s*"))}),a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,d){(a=this.clients[a])&&a.receiveEvent(b,d)},log:function(a){console.log("Flash: "+a)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};for(""!==a.style.width&&(b.width=a.style.width.replace("px","")),""!==a.style.height&&(b.height=a.style.height.replace("px",""));a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b},Client:function(a){this.handlers={},this.id=i.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,i.register(this.id,this),a&&this.glue(a)}};i.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,sheetName:"",glue:function(a,b){this.domElement=i.$(a);var d=99;this.domElement.style.zIndex&&(d=parseInt(this.domElement.style.zIndex,10)+1);var c=i.getDOMObjectPosition(this.domElement);this.div=l.createElement("div");var e=this.div.style;e.position="absolute",e.left="0px",e.top="0px",e.width=c.width+"px",e.height=c.height+"px",e.zIndex=d,void 0!==b&&""!==b&&(this.div.title=b),0!==c.width&&0!==c.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(c.width,c.height).replace(/&/g,"&amp;"))},positionElement:function(){var a=i.getDOMObjectPosition(this.domElement),b=this.div.style;b.position="absolute",b.width=a.width+"px",b.height=a.height+"px",0!==a.width&&0!==a.height&&(this.sized=!0,(b=this.div.childNodes[0]).width=a.width,b.height=a.height)},getHTML:function(a,b){var d="",c="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/))d=d+'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+(location.href.match(/^https/i)?"https://":"http://")+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+i.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+c+'"/><param name="wmode" value="transparent"/></object>';else d+='<embed id="'+this.movieId+'" src="'+i.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+c+'" wmode="transparent" />';return d},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){var a=this;this.domElement&&this.div&&(h(this.div).remove(),this.div=this.domElement=null,h.each(i.clients,function(b,d){d===a&&delete i.clients[b]}))},reposition:function(a){if(a&&((this.domElement=i.$(a))||this.hide()),this.domElement&&this.div){a=i.getDOMObjectPosition(this.domElement);var b=this.div.style;b.left=a.left+"px",b.top=a.top+"px"}},clearText:function(){this.clipText="",this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a,this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a,this.ready&&this.movie.setText(a)},setFileName:function(a){this.fileName=a,this.ready&&this.movie.setFileName(a)},setSheetData:function(a){this.ready&&this.movie.setSheetData(JSON.stringify(a))},setAction:function(a){this.action=a,this.ready&&this.movie.setAction(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,""),this.handlers[a]||(this.handlers[a]=[]),this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a,this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){var d;switch(a=a.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=l.getElementById(this.movieId),!this.movie)return d=this,void setTimeout(function(){d.receiveEvent("load",null)},1);if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return d=this,setTimeout(function(){d.receiveEvent("load",null)},100),void(this.ready=!0);this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var c=0,e=this.handlers[a].length;c<e;c++){var f=this.handlers[a][c];"function"==typeof f?f(this,b):"object"==typeof f&&2==f.length?f[0][f[1]](this,b):"string"==typeof f&&j[f](this,b)}}},i.hasFlash=function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(a){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==p&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},j.ZeroClipboard_TableTools=i;var q,x=function(a,b){b.attr("id"),b.parents("html").length?a.glue(b[0],""):setTimeout(function(){x(a,b)},500)},s=function(a,b){var d=b.match(/[\s\S]{1,8192}/g)||[];a.clearText();for(var c=0,e=d.length;c<e;c++)a.appendText(d[c])},y=function(a){return a.newline?a.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},z=function(a,b){for(var d=y(b),c=a.buttons.exportData(b.exportOptions),e=b.fieldBoundary,f=b.fieldSeparator,h=RegExp(e,"g"),i=b.escapeChar!==p?b.escapeChar:"\\",j=function(a){for(var b="",c=0,d=a.length;c<d;c++)0<c&&(b+=f),b+=e?e+(""+a[c]).replace(h,i+e)+e:a[c];return b},l=b.header?j(c.header)+d:"",o=b.footer&&c.footer?d+j(c.footer):"",n=[],g=0,m=c.body.length;g<m;g++)n.push(j(c.body[g]));return{str:l+n.join(d)+o,rows:n.length}},t={available:function(){return i.hasFlash()},init:function(a,b,d){i.moviePath=g.Buttons.swfPath;var c=new i.Client;c.setHandCursor(!0),c.addEventListener("mouseDown",function(){d._fromFlash=!0,a.button(b[0]).trigger(),d._fromFlash=!1}),x(c,b),d._flash=c},destroy:function(a,b,d){d._flash.destroy()},fieldSeparator:",",fieldBoundary:'"',exportOptions:{},title:"*",messageTop:"*",messageBottom:"*",filename:"*",extension:".csv",header:!0,footer:!1},u="",m=(u=void 0===j.XMLSerializer?new function(){this.serializeToString=function(a){return a.xml}}:new XMLSerializer,{"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="61"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'}),A=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(a){return a/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(a){return a/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\([\d,]+\)$/,style:61,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^[\d,]+$/,style:63},{match:/^[\d,]+\.\d{2}$/,style:64}];return g.Buttons.swfPath="//cdn.datatables.net/buttons/"+g.Buttons.version+"/swf/flashExport.swf",g.Api.register("buttons.resize()",function(){h.each(i.clients,function(a,b){b.domElement!==p&&b.domElement.parentNode&&b.positionElement()})}),g.ext.buttons.copyFlash=h.extend({},t,{className:"buttons-copy buttons-flash",text:function(a){return a.i18n("buttons.copy","Copy")},action:function(a,b,d,c){if(c._fromFlash){this.processing(!0);a=c._flash;var e=z(b,c),f=(d=b.buttons.exportInfo(c),y(c));e=e.str;d.title&&(e=d.title+f+f+e),d.messageTop&&(e=d.messageTop+f+f+e),d.messageBottom&&(e=e+f+f+d.messageBottom),c.customize&&(e=c.customize(e,c)),a.setAction("copy"),s(a,e),this.processing(!1),b.buttons.info(b.i18n("buttons.copyTitle","Copy to clipboard"),b.i18n("buttons.copySuccess",{_:"Copied %d rows to clipboard",1:"Copied 1 row to clipboard"},data.rows),3e3)}},fieldSeparator:"\t",fieldBoundary:""}),g.ext.buttons.csvFlash=h.extend({},t,{className:"buttons-csv buttons-flash",text:function(a){return a.i18n("buttons.csv","CSV")},action:function(a,b,d,c){a=c._flash,b=z(b,c),b=c.customize?c.customize(b.str,c):b.str,a.setAction("csv"),a.setFileName(_filename(c)),s(a,b)},escapeChar:'"'}),g.ext.buttons.excelFlash=h.extend({},t,{className:"buttons-excel buttons-flash",text:function(a){return a.i18n("buttons.excel","Excel")},action:function(a,b,d,c){this.processing(!0);a=c._flash;var j,l,e=0,f=h.parseXML(m["xl/worksheets/sheet1.xml"]),i=f.getElementsByTagName("sheetData")[0],k=(d={_rels:{".rels":h.parseXML(m["_rels/.rels"])},xl:{_rels:{"workbook.xml.rels":h.parseXML(m["xl/_rels/workbook.xml.rels"])},"workbook.xml":h.parseXML(m["xl/workbook.xml"]),"styles.xml":h.parseXML(m["xl/styles.xml"]),worksheets:{"sheet1.xml":f}},"[Content_Types].xml":h.parseXML(m["[Content_Types].xml"])},b.buttons.exportData(c.exportOptions)),g=function(a){l=o(f,"row",{attr:{r:j=e+1}});for(var b=0,c=a.length;b<c;b++){var d=v(b)+""+j,g=null;if(null!==a[b]&&a[b]!==p&&""!==a[b]){a[b]=h.trim(a[b]);for(var k=0,n=A.length;k<n;k++){var m=A[k];if(a[b].match&&!a[b].match(/^0\d+/)&&a[b].match(m.match)){g=a[b].replace(/[^\d\.\-]/g,""),m.fmt&&(g=m.fmt(g)),g=o(f,"c",{attr:{r:d,s:m.style},children:[o(f,"v",{text:g})]});break}}g||(g="number"==typeof a[b]||a[b].match&&a[b].match(/^-?\d+(\.\d+)?$/)&&!a[b].match(/^0\d+/)?o(f,"c",{attr:{t:"n",r:d},children:[o(f,"v",{text:a[b]})]}):(m=a[b].replace?a[b].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):a[b],o(f,"c",{attr:{t:"inlineStr",r:d},children:{row:o(f,"is",{children:{row:o(f,"t",{text:m})}})}}))),l.appendChild(g)}}i.appendChild(l),e++};h("sheets sheet",d.xl["workbook.xml"]).attr("name",function(a){var b="Sheet1";return a.sheetName&&(b=a.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),b}(c)),c.customizeData&&c.customizeData(k);var n=function(a,b){var c=h("mergeCells",f);c[0].appendChild(o(f,"mergeCell",{attr:{ref:"A"+a+":"+v(b)+a}})),c.attr("count",c.attr("count")+1),h("row:eq("+(a-1)+") c",f).attr("s","51")};(b=b.buttons.exportInfo(c)).title&&(g([b.title],e),n(e,k.header.length-1)),b.messageTop&&(g([b.messageTop],e),n(e,k.header.length-1)),c.header&&(g(k.header,e),h("row:last c",f).attr("s","2"));for(var r=0,q=k.body.length;r<q;r++)g(k.body[r],e);for(c.footer&&k.footer&&(g(k.footer,e),h("row:last c",f).attr("s","2")),b.messageBottom&&(g([b.messageBottom],e),n(e,k.header.length-1)),g=o(f,"cols"),h("worksheet",f).prepend(g),n=0,r=k.header.length;n<r;n++)g.appendChild(o(f,"col",{attr:{min:n+1,max:n+1,width:B(k,n),customWidth:1}}));c.customize&&c.customize(d),w(d),a.setAction("excel"),a.setFileName(b.filename),a.setSheetData(d),s(a,""),this.processing(!1)},extension:".xlsx"}),g.ext.buttons.pdfFlash=h.extend({},t,{className:"buttons-pdf buttons-flash",text:function(a){return a.i18n("buttons.pdf","PDF")},action:function(a,b,d,c){this.processing(!0);a=c._flash,d=b.buttons.exportData(c.exportOptions);var e=b.buttons.exportInfo(c),f=b.table().node().offsetWidth,g=b.columns(c.columns).indexes().map(function(a){return b.column(a).header().offsetWidth/f});a.setAction("pdf"),a.setFileName(e.filename),s(a,JSON.stringify({title:e.title||"",messageTop:e.messageTop||"",messageBottom:e.messageBottom||"",colWidth:g.toArray(),orientation:c.orientation,size:c.pageSize,header:c.header?d.header:null,footer:c.footer?d.footer:null,body:d.body})),this.processing(!1)},extension:".pdf",orientation:"portrait",pageSize:"A4",newline:"\n"}),g.Buttons}),function(j){"function"==typeof define&&define.amd?define("datatables.net-buttons-html5",["jquery","datatables.net","datatables.net-buttons"],function(k){return j(k,window,document)}):"object"==typeof exports?module.exports=function(k,l,t,s){return k||(k=window),l&&l.fn.dataTable||(l=require("datatables.net")(k,l).$),l.fn.dataTable.Buttons||require("datatables.net-buttons")(k,l),j(l,k,k.document,t,s)}:j(jQuery,window,document)}(function(j,k,l,t,s,q){function x(a){for(var c="";0<=a;)c=String.fromCharCode(a%26+65)+c,a=Math.floor(a/26)-1;return c}function p(a,c,d){var b=a.createElement(c);return d&&(d.attr&&j(b).attr(d.attr),d.children&&j.each(d.children,function(a,c){b.appendChild(c)}),null!==d.text&&d.text!==q&&b.appendChild(a.createTextNode(d.text))),b}function J(a,c){var b,d=a.header[c].length;a.footer&&a.footer[c].length>d&&(d=a.footer[c].length);for(var e=0,f=a.body.length;e<f;e++)if(d<(b=-1!==(b=null!==(b=a.body[e][c])&&b!==q?b.toString():"").indexOf("\n")?((b=b.split("\n")).sort(function(a,b){return b.length-a.length}),b[0].length):b.length)&&(d=b),40<d)return 52;return 6<(d*=1.3)?d:6}var r,m=j.fn.dataTable,h="undefined"!=typeof self&&self||void 0!==k&&k||this.content;if(void 0===h||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))r=void 0;else{var v=h.document.createElementNS("http://www.w3.org/1999/xhtml","a"),K="download"in v,L=/constructor/i.test(h.HTMLElement)||h.safari,A=/CriOS\/[\d]+/.test(navigator.userAgent),M=function(a){(h.setImmediate||h.setTimeout)(function(){throw a},0)},B=function(a){setTimeout(function(){"string"==typeof a?(h.URL||h.webkitURL||h).revokeObjectURL(a):a.remove()},4e4)},C=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},E=function(a,c,d){d||(a=C(a));var e,b=this,f=(d="application/octet-stream"===a.type,function(){for(var a,c=(a=[].concat(a=["writestart","progress","write","writeend"])).length;c--;){var d=b["on"+a[c]];if("function"==typeof d)try{d.call(b,b)}catch(f){M(f)}}});if(b.readyState=b.INIT,K)e=(h.URL||h.webkitURL||h).createObjectURL(a),setTimeout(function(){v.href=e,v.download=c;var a=new MouseEvent("click");v.dispatchEvent(a),f(),B(e),b.readyState=b.DONE});else if((A||d&&L)&&h.FileReader){var g=new FileReader;g.onloadend=function(){var a=A?g.result:g.result.replace(/^data:[^;]*;/,"data:attachment/file;");h.open(a,"_blank")||(h.location.href=a),b.readyState=b.DONE,f()},g.readAsDataURL(a),b.readyState=b.INIT}else e||(e=(h.URL||h.webkitURL||h).createObjectURL(a)),d?h.location.href=e:h.open(e,"_blank")||(h.location.href=e),b.readyState=b.DONE,f(),B(e)},i=E.prototype;r="undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,c,d){return c=c||a.name||"download",d||(a=C(a)),navigator.msSaveOrOpenBlob(a,c)}:(i.abort=function(){},i.readyState=i.INIT=0,i.WRITING=1,i.DONE=2,i.error=i.onwritestart=i.onprogress=i.onwrite=i.onabort=i.onerror=i.onwriteend=null,function(a,c,d){return new E(a,c||a.name||"download",d)})}m.fileSave=r;var F=function(a){return a.newline?a.newline:navigator.userAgent.match(/Windows/)?"\r\n":"\n"},G=function(a,c){for(var d=F(c),b=a.buttons.exportData(c.exportOptions),e=c.fieldBoundary,f=c.fieldSeparator,g=RegExp(e,"g"),n=c.escapeChar!==q?c.escapeChar:"\\",j=function(a){for(var b="",c=0,d=a.length;c<d;c++)0<c&&(b+=f),b+=e?e+(""+a[c]).replace(g,n+e)+e:a[c];return b},h=c.header?j(b.header)+d:"",k=c.footer&&b.footer?d+j(b.footer):"",l=[],o=0,i=b.body.length;o<i;o++)l.push(j(b.body[o]));return{str:h+l.join(d)+k,rows:l.length}},H=function(){if(-1===navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("Chrome")||-1!==navigator.userAgent.indexOf("Opera"))return!1;var a=navigator.userAgent.match(/AppleWebKit\/(\d+\.\d+)/);return!!(a&&1<a.length&&1*a[1]<603.1)};try{var u,w=new XMLSerializer}catch(O){}var z={"_rels/.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',"xl/_rels/workbook.xml.rels":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/></Relationships>',"[Content_Types].xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="xml" ContentType="application/xml" /><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" /><Default Extension="jpeg" ContentType="image/jpeg" /><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" /><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" /><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml" /></Types>',"xl/workbook.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="24816"/><workbookPr showInkAnnotation="0" autoCompressPictures="0"/><bookViews><workbookView xWindow="0" yWindow="0" windowWidth="25600" windowHeight="19020" tabRatio="500"/></bookViews><sheets><sheet name="" sheetId="1" r:id="rId1"/></sheets></workbook>',"xl/worksheets/sheet1.xml":'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><sheetData/><mergeCells count="0"/></worksheet>',"xl/styles.xml":'<?xml version="1.0" encoding="UTF-8"?><styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="6"><numFmt numFmtId="164" formatCode="#,##0.00_- [$$-45C]"/><numFmt numFmtId="165" formatCode="&quot;£&quot;#,##0.00"/><numFmt numFmtId="166" formatCode="[$€-2] #,##0.00"/><numFmt numFmtId="167" formatCode="0.0%"/><numFmt numFmtId="168" formatCode="#,##0;(#,##0)"/><numFmt numFmtId="169" formatCode="#,##0.00;(#,##0.00)"/></numFmts><fonts count="5" x14ac:knownFonts="1"><font><sz val="11" /><name val="Calibri" /></font><font><sz val="11" /><name val="Calibri" /><color rgb="FFFFFFFF" /></font><font><sz val="11" /><name val="Calibri" /><b /></font><font><sz val="11" /><name val="Calibri" /><i /></font><font><sz val="11" /><name val="Calibri" /><u /></font></fonts><fills count="6"><fill><patternFill patternType="none" /></fill><fill/><fill><patternFill patternType="solid"><fgColor rgb="FFD9D9D9" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="FFD99795" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6efce" /><bgColor indexed="64" /></patternFill></fill><fill><patternFill patternType="solid"><fgColor rgb="ffc6cfef" /><bgColor indexed="64" /></patternFill></fill></fills><borders count="2"><border><left /><right /><top /><bottom /><diagonal /></border><border diagonalUp="false" diagonalDown="false"><left style="thin"><color auto="1" /></left><right style="thin"><color auto="1" /></right><top style="thin"><color auto="1" /></top><bottom style="thin"><color auto="1" /></bottom><diagonal /></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" /></cellStyleXfs><cellXfs count="67"><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="0" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="0" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="2" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="3" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="4" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="1" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="2" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="3" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="4" fillId="5" borderId="1" applyFont="1" applyFill="1" applyBorder="1"/><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="left"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="center"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="right"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment horizontal="fill"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment textRotation="90"/></xf><xf numFmtId="0" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyAlignment="1"><alignment wrapText="1"/></xf><xf numFmtId="9"   fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="164" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="165" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="166" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="167" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="168" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="169" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="3" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="4" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="1" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/><xf numFmtId="2" fontId="0" fillId="0" borderId="0" applyFont="1" applyFill="1" applyBorder="1" xfId="0" applyNumberFormat="1"/></cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0" /></cellStyles><dxfs count="0" /><tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4" /></styleSheet>'},I=[{match:/^\-?\d+\.\d%$/,style:60,fmt:function(a){return a/100}},{match:/^\-?\d+\.?\d*%$/,style:56,fmt:function(a){return a/100}},{match:/^\-?\$[\d,]+.?\d*$/,style:57},{match:/^\-?£[\d,]+.?\d*$/,style:58},{match:/^\-?€[\d,]+.?\d*$/,style:59},{match:/^\-?\d+$/,style:65},{match:/^\-?\d+\.\d{2}$/,style:66},{match:/^\([\d,]+\)$/,style:61,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\([\d,]+\.\d{2}\)$/,style:62,fmt:function(a){return-1*a.replace(/[\(\)]/g,"")}},{match:/^\-?[\d,]+$/,style:63},{match:/^\-?[\d,]+\.\d{2}$/,style:64}];return m.ext.buttons.copyHtml5={className:"buttons-copy buttons-html5",text:function(a){return a.i18n("buttons.copy","Copy")},action:function(a,c,d,b){this.processing(!0);var e=this,f=(a=G(c,b),c.buttons.exportInfo(b)),g=F(b),n=a.str;d=j("<div/>").css({height:1,width:1,overflow:"hidden",position:"fixed",top:0,left:0});if(f.title&&(n=f.title+g+g+n),f.messageTop&&(n=f.messageTop+g+g+n),f.messageBottom&&(n=n+g+g+f.messageBottom),b.customize&&(n=b.customize(n,b)),b=j("<textarea readonly/>").val(n).appendTo(d),l.queryCommandSupported("copy")){d.appendTo(c.table().container()),b[0].focus(),b[0].select();try{var h=l.execCommand("copy");if(d.remove(),h)return c.buttons.info(c.i18n("buttons.copyTitle","Copy to clipboard"),c.i18n("buttons.copySuccess",{1:"Copied one row to clipboard",_:"Copied %d rows to clipboard"},a.rows),2e3),void this.processing(!1)}catch(k){}}h=j("<span>"+c.i18n("buttons.copyKeys","Press <i>ctrl</i> or <i>⌘</i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.")+"</span>").append(d),c.buttons.info(c.i18n("buttons.copyTitle","Copy to clipboard"),h,0),b[0].focus(),b[0].select();var D=j(h).closest(".dt-button-info"),i=function(){D.off("click.buttons-copy"),j(l).off(".buttons-copy"),c.buttons.info(!1)};D.on("click.buttons-copy",i),j(l).on("keydown.buttons-copy",function(a){27===a.keyCode&&(i(),e.processing(!1))}).on("copy.buttons-copy cut.buttons-copy",function(){i(),e.processing(!1)})},exportOptions:{},fieldSeparator:"\t",fieldBoundary:"",header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},m.ext.buttons.csvHtml5={bom:!1,className:"buttons-csv buttons-html5",available:function(){return k.FileReader!==q&&k.Blob},text:function(a){return a.i18n("buttons.csv","CSV")},action:function(a,c,d,b){this.processing(!0),a=G(c,b).str,c=c.buttons.exportInfo(b),d=b.charset,b.customize&&(a=b.customize(a,b)),!1!==d?(d||(d=l.characterSet||l.charset),d&&(d=";charset="+d)):d="",b.bom&&(a="\ufeff"+a),r(new Blob([a],{type:"text/csv"+d}),c.filename,!0),this.processing(!1)},filename:"*",extension:".csv",exportOptions:{},fieldSeparator:",",fieldBoundary:'"',escapeChar:'"',charset:null,header:!0,footer:!1},m.ext.buttons.excelHtml5={className:"buttons-excel buttons-html5",available:function(){return k.FileReader!==q&&(t||k.JSZip)!==q&&!H()&&w},text:function(a){return a.i18n("buttons.excel","Excel")},action:function(a,c,d,b){this.processing(!0);var h,l,e=this,f=0,g=(a=function(a){return j.parseXML(z[a])})("xl/worksheets/sheet1.xml"),n=g.getElementsByTagName("sheetData")[0],i=(a={_rels:{".rels":a("_rels/.rels")},xl:{_rels:{"workbook.xml.rels":a("xl/_rels/workbook.xml.rels")},"workbook.xml":a("xl/workbook.xml"),"styles.xml":a("xl/styles.xml"),worksheets:{"sheet1.xml":g}},"[Content_Types].xml":a("[Content_Types].xml")},d=c.buttons.exportData(b.exportOptions),function(a){l=p(g,"row",{attr:{r:h=f+1}});for(var b=0,c=a.length;b<c;b++){var d=x(b)+""+h,e=null;if(null!==a[b]&&a[b]!==q&&""!==a[b]){a[b]=j.trim(a[b]);for(var i=0,k=I.length;i<k;i++){var m=I[i];if(a[b].match&&!a[b].match(/^0\d+/)&&a[b].match(m.match)){e=a[b].replace(/[^\d\.\-]/g,""),m.fmt&&(e=m.fmt(e)),e=p(g,"c",{attr:{r:d,s:m.style},children:[p(g,"v",{text:e})]});break}}e||(e="number"==typeof a[b]||a[b].match&&a[b].match(/^-?\d+(\.\d+)?$/)&&!a[b].match(/^0\d+/)?p(g,"c",{attr:{t:"n",r:d},children:[p(g,"v",{text:a[b]})]}):(m=a[b].replace?a[b].replace(/[\x00-\x09\x0B\x0C\x0E-\x1F\x7F-\x9F]/g,""):a[b],p(g,"c",{attr:{t:"inlineStr",r:d},children:{row:p(g,"is",{children:{row:p(g,"t",{text:m})}})}}))),l.appendChild(e)}}n.appendChild(l),f++});j("sheets sheet",a.xl["workbook.xml"]).attr("name",function(a){var c="Sheet1";return a.sheetName&&(c=a.sheetName.replace(/[\[\]\*\/\\\?\:]/g,"")),c}(b)),b.customizeData&&b.customizeData(d);var m=function(a,b){var c=j("mergeCells",g);c[0].appendChild(p(g,"mergeCell",{attr:{ref:"A"+a+":"+x(b)+a}})),c.attr("count",c.attr("count")+1),j("row:eq("+(a-1)+") c",g).attr("s","51")},o=c.buttons.exportInfo(b);o.title&&(i([o.title],f),m(f,d.header.length-1)),o.messageTop&&(i([o.messageTop],f),m(f,d.header.length-1)),b.header&&(i(d.header,f),j("row:last c",g).attr("s","2"));c=0;for(var s=d.body.length;c<s;c++)i(d.body[c],f);for(b.footer&&d.footer&&(i(d.footer,f),j("row:last c",g).attr("s","2")),o.messageBottom&&(i([o.messageBottom],f),m(f,d.header.length-1)),c=p(g,"cols"),j("worksheet",g).prepend(c),i=0,m=d.header.length;i<m;i++)c.appendChild(p(g,"col",{attr:{min:i+1,max:i+1,width:J(d,i),customWidth:1}}));b.customize&&b.customize(a),d={type:"blob",mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},function y(a,c){u===q&&(u=-1===w.serializeToString(j.parseXML(z["xl/worksheets/sheet1.xml"])).indexOf("xmlns:r")),j.each(c,function(c,b){if(j.isPlainObject(b))y(e=a.folder(c),b);else{if(u){var e,f,g,n=[];for(f=(e=b.childNodes[0]).attributes.length-1;0<=f;f--){g=e.attributes[f].nodeName;var h=e.attributes[f].nodeValue;-1!==g.indexOf(":")&&(n.push({name:g,value:h}),e.removeAttribute(g))}for(f=0,g=n.length;f<g;f++)(h=b.createAttribute(n[f].name.replace(":","_dt_b_namespace_token_"))).value=n[f].value,e.setAttributeNode(h)}e=w.serializeToString(b),u&&(-1===e.indexOf("<?xml")&&(e='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+e),e=e.replace(/_dt_b_namespace_token_/g,":")),e=e.replace(/<([^<>]*?) xmlns=""([^<>]*?)>/g,"<$1 $2>"),a.file(c,e)}})}(b=new(t||k.JSZip),a),b.generateAsync?b.generateAsync(d).then(function(a){r(a,o.filename),e.processing(!1)}):(r(b.generate(d),o.filename),this.processing(!1))},filename:"*",extension:".xlsx",exportOptions:{},header:!0,footer:!1,title:"*",messageTop:"*",messageBottom:"*"},m.ext.buttons.pdfHtml5={className:"buttons-pdf buttons-html5",available:function(){return k.FileReader!==q&&(s||k.pdfMake)},text:function(a){return a.i18n("buttons.pdf","PDF")},action:function(a,c,d,b){this.processing(!0);var e=this,f=(a=c.buttons.exportData(b.exportOptions),c.buttons.exportInfo(b));c=[];b.header&&c.push(j.map(a.header,function(a){return{text:"string"==typeof a?a:a+"",style:"tableHeader"}}));var g=0;for(d=a.body.length;g<d;g++)c.push(j.map(a.body[g],function(a){return{text:"string"==typeof a?a:a+"",style:g%2?"tableBodyEven":"tableBodyOdd"}}));b.footer&&a.footer&&c.push(j.map(a.footer,function(a){return{text:"string"==typeof a?a:a+"",style:"tableFooter"}})),c={pageSize:b.pageSize,pageOrientation:b.orientation,content:[{table:{headerRows:1,body:c},layout:"noBorders"}],styles:{tableHeader:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154",alignment:"center"},tableBodyEven:{},tableBodyOdd:{fillColor:"#f3f3f3"},tableFooter:{bold:!0,fontSize:11,color:"white",fillColor:"#2d4154"},title:{alignment:"center",fontSize:15},message:{}},defaultStyle:{fontSize:10}},f.messageTop&&c.content.unshift({text:f.messageTop,style:"message",margin:[0,0,0,12]}),f.messageBottom&&c.content.push({text:f.messageBottom,style:"message",margin:[0,0,0,12]}),f.title&&c.content.unshift({text:f.title,style:"title",margin:[0,0,0,12]}),b.customize&&b.customize(c,b),c=(s||k.pdfMake).createPdf(c),"open"!==b.download||H()?c.getBuffer(function(a){a=new Blob([a],{type:"application/pdf"}),r(a,f.filename),e.processing(!1)}):(c.open(),this.processing(!1))},title:"*",filename:"*",extension:".pdf",exportOptions:{},orientation:"portrait",pageSize:"A4",header:!0,footer:!1,messageTop:"*",messageBottom:"*",customize:null,download:"download"},m.Buttons}),function(d){"function"==typeof define&&define.amd?define("datatables.net-buttons-print",["jquery","datatables.net","datatables.net-buttons"],function(e){return d(e,window,document)}):"object"==typeof exports?module.exports=function(e,c){return e||(e=window),c&&c.fn.dataTable||(c=require("datatables.net")(e,c).$),c.fn.dataTable.Buttons||require("datatables.net-buttons")(e,c),d(c,e,e.document)}:d(jQuery,window,document)}(function(d,e,c){var i=d.fn.dataTable,f=c.createElement("a"),l=function(a){return f.href=a,-1===(a=f.host).indexOf("/")&&0!==f.pathname.indexOf("/")&&(a+="/"),f.protocol+"//"+a+f.pathname+f.search};return i.ext.buttons.print={className:"buttons-print",text:function(a){return a.i18n("buttons.print","Print")},action:function(a,b,c,h){a=b.buttons.exportData(d.extend({decodeEntities:!1},h.exportOptions)),c=b.buttons.exportInfo(h);var f=function(b,c){for(var a="<tr>",d=0,e=b.length;d<e;d++)a+="<"+c+">"+b[d]+"</"+c+">";return a+"</tr>"};b='<table class="'+b.table().node().className+'">';h.header&&(b+="<thead>"+f(a.header,"th")+"</thead>");b+="<tbody>";for(var k=0,i=a.body.length;k<i;k++)b+=f(a.body[k],"td");b+="</tbody>",h.footer&&a.footer&&(b+="<tfoot>"+f(a.footer,"th")+"</tfoot>");b+="</table>";var g=e.open("","");g.document.close();var j="<title>"+c.title+"</title>";d("style, link").each(function(){var b=j,a=d(this).clone()[0];"link"===a.nodeName.toLowerCase()&&(a.href=l(a.href)),j=b+a.outerHTML});try{g.document.head.innerHTML=j}catch(m){d(g.document.head).html(j)}g.document.body.innerHTML="<h1>"+c.title+"</h1><div>"+(c.messageTop||"")+"</div>"+b+"<div>"+(c.messageBottom||"")+"</div>",d(g.document.body).addClass("dt-print-view"),d("img",g.document.body).each(function(a,b){b.setAttribute("src",l(b.getAttribute("src")))}),h.customize&&h.customize(g),setTimeout(function(){h.autoPrint&&(g.print(),g.close())},1e3)},title:"*",messageTop:"*",messageBottom:"*",exportOptions:{},header:!0,footer:!1,autoPrint:!0,customize:null},i.Buttons}),function(c){"function"==typeof define&&define.amd?define("datatables.net-buttons-bs",["jquery","datatables.net-bs","datatables.net-buttons"],function(a){return c(a,window,document)}):"object"==typeof exports?module.exports=function(a,b){return a||(a=window),b&&b.fn.dataTable||(b=require("datatables.net-bs")(a,b).$),b.fn.dataTable.Buttons||require("datatables.net-buttons")(a,b),c(b,a.document)}:c(jQuery,window,document)}(function(c){var a=c.fn.dataTable;return c.extend(!0,a.Buttons.defaults,{dom:{container:{className:"dt-buttons btn-group"},button:{className:"btn btn-default"},collection:{tag:"ul",className:"dt-button-collection dropdown-menu",button:{tag:"li",className:"dt-button",active:"active",disabled:"disabled"},buttonLiner:{tag:"a",className:""}}}}),a.ext.buttons.collection.text=function(a){return a.i18n("buttons.collection",'Collection <span class="caret"/>')},a.Buttons}),function(f){"function"==typeof define&&define.amd?define("datatables.net-colreorder",["jquery","datatables.net"],function(o){return f(o,window,document)}):"object"==typeof exports?module.exports=function(o,l){return o||(o=window),l&&l.fn.dataTable||(l=require("datatables.net")(o,l).$),f(l,o,o.document)}:f(jQuery,window,document)}(function(f,o,l,r){function q(a){for(var b=[],c=0,e=a.length;c<e;c++)b[a[c]]=c;return b}function p(a,b,c){b=a.splice(b,1)[0],a.splice(c,0,b)}function s(a,b,c){for(var e=[],f=0,d=a.childNodes.length;f<d;f++)1==a.childNodes[f].nodeType&&e.push(a.childNodes[f]);b=e[b],null!==c?a.insertBefore(b,e[c]):a.appendChild(b)}var t=f.fn.dataTable;f.fn.dataTableExt.oApi.fnColReorder=function(a,b,c,e,g){var d,h,j,m,i,k,l=a.aoColumns.length;if(i=function(a,b,d){if(a[b]&&"function"!=typeof a[b]){var c=a[b].split("."),e=c.shift();isNaN(1*e)||(a[b]=d[1*e]+"."+c.join("."))}},b!=c)if(b<0||l<=b)this.oApi._fnLog(a,1,"ColReorder 'from' index is out of bounds: "+b);else if(c<0||l<=c)this.oApi._fnLog(a,1,"ColReorder 'to' index is out of bounds: "+c);else{for(j=[],d=0,h=l;d<h;d++)j[d]=d;p(j,b,c);var n=q(j);for(d=0,h=a.aaSorting.length;d<h;d++)a.aaSorting[d][0]=n[a.aaSorting[d][0]];if(null!==a.aaSortingFixed)for(d=0,h=a.aaSortingFixed.length;d<h;d++)a.aaSortingFixed[d][0]=n[a.aaSortingFixed[d][0]];for(d=0,h=l;d<h;d++){for(j=0,m=(k=a.aoColumns[d]).aDataSort.length;j<m;j++)k.aDataSort[j]=n[k.aDataSort[j]];k.idx=n[k.idx]}for(f.each(a.aLastSort,function(b,c){a.aLastSort[b].src=n[c.src]}),d=0,h=l;d<h;d++)"number"==typeof(k=a.aoColumns[d]).mData?k.mData=n[k.mData]:f.isPlainObject(k.mData)&&(i(k.mData,"_",n),i(k.mData,"filter",n),i(k.mData,"sort",n),i(k.mData,"type",n));if(a.aoColumns[b].bVisible){for(i=this.oApi._fnColumnIndexToVisible(a,b),m=null,d=c<b?c:c+1;null===m&&d<l;)m=this.oApi._fnColumnIndexToVisible(a,d),d++;for(d=0,h=(j=a.nTHead.getElementsByTagName("tr")).length;d<h;d++)s(j[d],i,m);if(null!==a.nTFoot)for(d=0,h=(j=a.nTFoot.getElementsByTagName("tr")).length;d<h;d++)s(j[d],i,m);for(d=0,h=a.aoData.length;d<h;d++)null!==a.aoData[d].nTr&&s(a.aoData[d].nTr,i,m)}for(p(a.aoColumns,b,c),d=0,h=l;d<h;d++)a.oApi._fnColumnOptions(a,d,{});for(p(a.aoPreSearchCols,b,c),d=0,h=a.aoData.length;d<h;d++){if(k=(m=a.aoData[d]).anCells)for(p(k,b,c),j=0,i=k.length;j<i;j++)k[j]&&k[j]._DT_CellIndex&&(k[j]._DT_CellIndex.column=j);"dom"!==m.src&&f.isArray(m._aData)&&p(m._aData,b,c)}for(d=0,h=a.aoHeader.length;d<h;d++)p(a.aoHeader[d],b,c);if(null!==a.aoFooter)for(d=0,h=a.aoFooter.length;d<h;d++)p(a.aoFooter[d],b,c);for((g||g===r)&&f.fn.dataTable.Api(a).rows().invalidate(),d=0,h=l;d<h;d++)f(a.aoColumns[d].nTh).off("click.DT"),this.oApi._fnSortAttachListener(a,a.aoColumns[d].nTh,d);f(a.oInstance).trigger("column-reorder.dt",[a,{from:b,to:c,mapping:n,drop:e,iFrom:b,iTo:c,aiInvertMapping:n}])}};var i=function(a,b){var c=new f.fn.dataTable.Api(a).settings()[0];if(c._colReorder)return c._colReorder;!0===b&&(b={});var e=f.fn.dataTable.camelToHungarian;return e&&(e(i.defaults,i.defaults,!0),e(i.defaults,b||{})),this.s={dt:null,init:f.extend(!0,{},i.defaults,b),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=c,(this.s.dt._colReorder=this)._fnConstruct(),this};return f.extend(i.prototype,{fnReset:function(){return this._fnOrderColumns(this.fnOrder()),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(a,b){var e,g,c=[],d=this.s.dt.aoColumns;if(a===r){for(e=0,g=d.length;e<g;e++)c.push(d[e]._ColReorder_iOrigCol);return c}if(b){for(d=this.fnOrder(),e=0,g=a.length;e<g;e++)c.push(f.inArray(a[e],d));a=c}return this._fnOrderColumns(q(a)),this},fnTranspose:function(a,b){b||(b="toCurrent");var c=this.fnOrder(),e=this.s.dt.aoColumns;return"toCurrent"===b?f.isArray(a)?f.map(a,function(a){return f.inArray(a,c)}):f.inArray(a,c):f.isArray(a)?f.map(a,function(a){return e[a]._ColReorder_iOrigCol}):e[a]._ColReorder_iOrigCol},_fnConstruct:function(){var e,a=this,b=this.s.dt.aoColumns.length,c=this.s.dt.nTable;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback),e=0;e<b;e++)e>this.s.fixed-1&&e<b-this.s.fixedRight&&this._fnMouseListener(e,this.s.dt.aoColumns[e].nTh),this.s.dt.aoColumns[e]._ColReorder_iOrigCol=e;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(b,c){a._fnStateSave.call(a,c)},"ColReorder_State");var g=null;if(this.s.init.aiOrder&&(g=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(g=this.s.dt.oLoadedState.ColReorder),g)if(a.s.dt._bInitComplete)b=q(g),a._fnOrderColumns.call(a,b);else{var d=!1;f(c).on("draw.dt.colReorder",function(){if(!a.s.dt._bInitComplete&&!d){d=!0;var b=q(g);a._fnOrderColumns.call(a,b)}})}else this._fnSetColumnIndexes();f(c).on("destroy.dt.colReorder",function(){f(c).off("destroy.dt.colReorder draw.dt.colReorder"),f(a.s.dt.nTHead).find("*").off(".ColReorder"),f.each(a.s.dt.aoColumns,function(a,b){f(b.nTh).removeAttr("data-column-index")}),a.s.dt._colReorder=null,a.s=null})},_fnOrderColumns:function(a){var b=!1;if(a.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var c=0,e=a.length;c<e;c++){var g=f.inArray(c,a);c!=g&&(p(a,g,c),this.s.dt.oInstance.fnColReorder(g,c,!0,!1),b=!0)}f.fn.dataTable.Api(this.s.dt).rows().invalidate(),this._fnSetColumnIndexes(),b&&((""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}},_fnStateSave:function(a){var b,c,e,g=this.s.dt.aoColumns;if(a.ColReorder=[],a.aaSorting){for(b=0;b<a.aaSorting.length;b++)a.aaSorting[b][0]=g[a.aaSorting[b][0]]._ColReorder_iOrigCol;var d=f.extend(!0,[],a.aoSearchCols);for(b=0,c=g.length;b<c;b++)e=g[b]._ColReorder_iOrigCol,a.aoSearchCols[e]=d[b],a.abVisCols[e]=g[b].bVisible,a.ColReorder.push(e)}else if(a.order){for(b=0;b<a.order.length;b++)a.order[b][0]=g[a.order[b][0]]._ColReorder_iOrigCol;for(d=f.extend(!0,[],a.columns),b=0,c=g.length;b<c;b++)e=g[b]._ColReorder_iOrigCol,a.columns[e]=d[b],a.ColReorder.push(e)}},_fnMouseListener:function(a,b){var c=this;f(b).on("mousedown.ColReorder",function(a){c._fnMouseDown.call(c,a,b)}).on("touchstart.ColReorder",function(a){c._fnMouseDown.call(c,a,b)})},_fnMouseDown:function(a,b){var c=this,e=f(a.target).closest("th, td").offset(),g=parseInt(f(b).attr("data-column-index"),10);g!==r&&(this.s.mouse.startX=this._fnCursorPosition(a,"pageX"),this.s.mouse.startY=this._fnCursorPosition(a,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(a,"pageX")-e.left,this.s.mouse.offsetY=this._fnCursorPosition(a,"pageY")-e.top,this.s.mouse.target=this.s.dt.aoColumns[g].nTh,this.s.mouse.targetIndex=g,this.s.mouse.fromIndex=g,this._fnRegions(),f(l).on("mousemove.ColReorder touchmove.ColReorder",function(a){c._fnMouseMove.call(c,a)}).on("mouseup.ColReorder touchend.ColReorder",function(a){c._fnMouseUp.call(c,a)}))},_fnMouseMove:function(a){if(null===this.dom.drag){if(Math.pow(Math.pow(this._fnCursorPosition(a,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(a,"pageY")-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(a,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(a,"pageY")-this.s.mouse.offsetY});for(var b=!1,c=this.s.mouse.toIndex,e=1,f=this.s.aoTargets.length;e<f;e++)if(this._fnCursorPosition(a,"pageX")<this.s.aoTargets[e-1].x+(this.s.aoTargets[e].x-this.s.aoTargets[e-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[e-1].x),this.s.mouse.toIndex=this.s.aoTargets[e-1].to,b=!0;break}b||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&c!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!1),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(){f(l).off(".ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),(""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY)&&this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var a=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:f(this.s.dt.nTable).offset().left,to:0});for(var b=0,c=this.s.aoTargets[0].x,e=0,g=a.length;e<g;e++)e!=this.s.mouse.fromIndex&&b++,a[e].bVisible&&"none"!==a[e].nTh.style.display&&(c+=f(a[e].nTh).outerWidth(),this.s.aoTargets.push({x:c,to:b}));0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var a=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,b=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,c=b.parentNode,e=c.parentNode,g=e.parentNode,d=f(b).clone();this.dom.drag=f(g.cloneNode(!1)).addClass("DTCR_clonedTable").append(f(e.cloneNode(!1)).append(f(c.cloneNode(!1)).append(d[0]))).css({position:"absolute",top:0,left:0,width:f(b).outerWidth(),height:f(b).outerHeight()}).appendTo("body"),this.dom.pointer=f("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:a?f("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:f(this.s.dt.nTable).offset().top,height:a?f("div.dataTables_scroll",this.s.dt.nTableWrapper).height():f(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){f.each(this.s.dt.aoColumns,function(a,b){f(b.nTh).attr("data-column-index",a)})},_fnCursorPosition:function(a,b){return-1!==a.type.indexOf("touch")?a.originalEvent.touches[0][b]:a[b]}}),i.defaults={aiOrder:null,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null},i.version="1.4.1",f.fn.dataTable.ColReorder=i,f.fn.DataTable.ColReorder=i,"function"==typeof f.fn.dataTable&&"function"==typeof f.fn.dataTableExt.fnVersionCheck&&f.fn.dataTableExt.fnVersionCheck("1.10.8")?f.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInstance;return a._colReorder?b.oApi._fnLog(a,1,"ColReorder attempted to initialise twice. Ignoring second"):(b=a.oInit,new i(a,b.colReorder||b.oColReorder||{})),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download"),f(l).on("preInit.dt.colReorder",function(a,b){if("dt"===a.namespace){var c=b.oInit.colReorder,e=t.defaults.colReorder;(c||e)&&(e=f.extend({},c,e),!1!==c&&new i(b,e))}}),f.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(a){a._colReorder.fnReset()})}),f.fn.dataTable.Api.register("colReorder.order()",function(a,b){return a?this.iterator("table",function(c){c._colReorder.fnOrder(a,b)}):this.context.length?this.context[0]._colReorder.fnOrder():null}),f.fn.dataTable.Api.register("colReorder.transpose()",function(a,b){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(a,b):a}),f.fn.dataTable.Api.register("colReorder.move()",function(a,b,c,e){return this.context.length&&this.context[0]._colReorder.s.dt.oInstance.fnColReorder(a,b,c,e),this}),i}),function(d){"function"==typeof define&&define.amd?define("datatables.net-rowreorder",["jquery","datatables.net"],function(f){return d(f,window,document)}):"object"==typeof exports?module.exports=function(f,g){return f||(f=window),g&&g.fn.dataTable||(g=require("datatables.net")(f,g).$),d(g,f,f.document)}:d(jQuery,window,document)}(function(d,f,g,m){var h=d.fn.dataTable,k=function(c,b){if(!h.versionCheck||!h.versionCheck("1.10.8"))throw"DataTables RowReorder requires DataTables 1.10.8 or newer";this.c=d.extend(!0,{},h.defaults.rowReorder,k.defaults,b),this.s={bodyTop:null,dt:new h.Api(c),getDataFn:h.ext.oApi._fnGetObjectDataFn(this.c.dataSrc),middles:null,scroll:{},scrollInterval:null,setDataFn:h.ext.oApi._fnSetObjectDataFn(this.c.dataSrc),start:{top:0,left:0,offsetTop:0,offsetLeft:0,nodes:[]},windowHeight:0,documentOuterHeight:0,domCloneOuterHeight:0},this.dom={clone:null,dtScroll:d("div.dataTables_scrollBody",this.s.dt.table().container())};var a=this.s.dt.settings()[0],e=a.rowreorder;if(e)return e;(a.rowreorder=this)._constructor()};d.extend(k.prototype,{_constructor:function(){var c=this,b=this.s.dt,a=d(b.table().node());"static"===a.css("position")&&a.css("position","relative"),d(b.table().container()).on("mousedown.rowReorder touchstart.rowReorder",this.c.selector,function(a){if(c.c.enable){var i=d(this).closest("tr"),j=b.row(i);if(j.any())return c._emitEvent("pre-row-reorder",{node:j.node(),index:j.index()}),c._mouseDown(a,i),!1}}),b.on("destroy.rowReorder",function(){d(b.table().container()).off(".rowReorder"),b.off(".rowReorder")})},_cachePositions:function(){var c=this.s.dt,b=d(c.table().node()).find("thead").outerHeight(),a=d.unique(c.rows({page:"current"}).nodes().toArray()),e=d.map(a,function(a){return d(a).position().top-b});a=d.map(e,function(a,b){return e.length<b-1?(a+e[b+1])/2:(a+a+d(c.row(":last-child").node()).outerHeight())/2});this.s.middles=a,this.s.bodyTop=d(c.table().body()).offset().top,this.s.windowHeight=d(f).height(),this.s.documentOuterHeight=d(g).outerHeight()},_clone:function(c){var b=d(this.s.dt.table().node().cloneNode(!1)).addClass("dt-rowReorder-float").append("<tbody/>").append(c.clone(!1)),a=c.outerWidth(),e=c.outerHeight(),i=c.children().map(function(){return d(this).width()});b.width(a).height(e).find("tr").children().each(function(a){this.style.width=i[a]+"px"}),b.appendTo("body"),this.dom.clone=b,this.s.domCloneOuterHeight=b.outerHeight()},_clonePosition:function(c){var b=this.s.start,a=this._eventToPage(c,"Y")-b.top,e=(c=this._eventToPage(c,"X")-b.left,this.c.snapX);a+=b.offsetTop,b=!0===e?b.offsetLeft:"number"==typeof e?b.offsetLeft+e:c+b.offsetLeft;a<0?a=0:a+this.s.domCloneOuterHeight>this.s.documentOuterHeight&&(a=this.s.documentOuterHeight-this.s.domCloneOuterHeight),this.dom.clone.css({top:a,left:b})},_emitEvent:function(c,b){this.s.dt.iterator("table",function(a){d(a.nTable).triggerHandler(c+".dt",b)})},_eventToPage:function(c,b){return-1!==c.type.indexOf("touch")?c.originalEvent.touches[0]["page"+b]:c["page"+b]},_mouseDown:function(c,b){var a=this,e=this.s.dt,i=this.s.start,j=b.offset();i.top=this._eventToPage(c,"Y"),i.left=this._eventToPage(c,"X"),i.offsetTop=j.top,i.offsetLeft=j.left,i.nodes=d.unique(e.rows({page:"current"}).nodes().toArray()),this._cachePositions(),this._clone(b),this._clonePosition(c),(this.dom.target=b).addClass("dt-rowReorder-moving"),d(g).on("mouseup.rowReorder touchend.rowReorder",function(b){a._mouseUp(b)}).on("mousemove.rowReorder touchmove.rowReorder",function(b){a._mouseMove(b)}),d(f).width()===d(g).width()&&d(g.body).addClass("dt-rowReorder-noOverflow"),e=this.dom.dtScroll,this.s.scroll={windowHeight:d(f).height(),windowWidth:d(f).width(),dtTop:e.length?e.offset().top:null,dtLeft:e.length?e.offset().left:null,dtHeight:e.length?e.outerHeight():null,dtWidth:e.length?e.outerWidth():null}},_mouseMove:function(c){this._clonePosition(c);for(var b=this._eventToPage(c,"Y")-this.s.bodyTop,a=this.s.middles,e=null,i=this.s.dt,j=i.table().body(),g=0,f=a.length;g<f;g++)if(b<a[g]){e=g;break}null===e&&(e=a.length),null!==this.s.lastInsert&&this.s.lastInsert===e||(0===e?this.dom.target.prependTo(j):(b=d.unique(i.rows({page:"current"}).nodes().toArray()),e>this.s.lastInsert?this.dom.target.insertAfter(b[e-1]):this.dom.target.insertBefore(b[e])),this._cachePositions(),this.s.lastInsert=e),this._shiftScroll(c)},_mouseUp:function(){var a,e,c=this,b=this.s.dt,i=this.c.dataSrc;this.dom.clone.remove(),this.dom.clone=null,this.dom.target.removeClass("dt-rowReorder-moving"),d(g).off(".rowReorder"),d(g.body).removeClass("dt-rowReorder-noOverflow"),clearInterval(this.s.scrollInterval),this.s.scrollInterval=null;var j=this.s.start.nodes,f=d.unique(b.rows({page:"current"}).nodes().toArray()),k={},h=[],l=[],n=this.s.getDataFn,m=this.s.setDataFn;for(a=0,e=j.length;a<e;a++)if(j[a]!==f[a]){var o=b.row(f[a]).id(),s=b.row(f[a]).data(),p=b.row(j[a]).data();o&&(k[o]=n(p)),h.push({node:f[a],oldData:n(s),newData:n(p),newPosition:a,oldPosition:d.inArray(f[a],j)}),l.push(f[a])}var q=[h,{dataSrc:i,nodes:l,values:k,triggerRow:b.row(this.dom.target)}];this._emitEvent("row-reorder",q);var r=function(){if(c.c.update){for(a=0,e=h.length;a<e;a++){var d=b.row(h[a].node).data();m(d,h[a].newData),b.columns().every(function(){this.dataSrc()===i&&b.cell(h[a].node,this.index()).invalidate("data")})}c._emitEvent("row-reordered",q),b.draw(!1)}};this.c.editor?(this.c.enable=!1,this.c.editor.edit(l,!1,d.extend({submit:"changed"},this.c.formOptions)).multiSet(i,k).one("submitUnsuccessful.rowReorder",function(){b.draw(!1)}).one("submitSuccess.rowReorder",function(){r()}).one("submitComplete",function(){c.c.enable=!0,c.c.editor.off(".rowReorder")}).submit()):r()},_shiftScroll:function(c){var f,h,b=this,a=this.s.scroll,e=!1,d=c.pageY-g.body.scrollTop;d<65?f=-5:d>a.windowHeight-65&&(f=5),null!==a.dtTop&&c.pageY<a.dtTop+65?h=-5:null!==a.dtTop&&c.pageY>a.dtTop+a.dtHeight-65&&(h=5),f||h?(a.windowVert=f,a.dtVert=h,e=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&e&&(this.s.scrollInterval=setInterval(function(){if(a.windowVert&&(g.body.scrollTop=g.body.scrollTop+a.windowVert),a.dtVert){var c=b.dom.dtScroll[0];a.dtVert&&(c.scrollTop=c.scrollTop+a.dtVert)}},20))}}),k.defaults={dataSrc:0,editor:null,enable:!0,formOptions:{},selector:"td:first-child",snapX:!1,update:!0};var l=d.fn.dataTable.Api;return l.register("rowReorder()",function(){return this}),l.register("rowReorder.enable()",function(c){return c===m&&(c=!0),this.iterator("table",function(b){b.rowreorder&&(b.rowreorder.c.enable=c)})}),l.register("rowReorder.disable()",function(){return this.iterator("table",function(c){c.rowreorder&&(c.rowreorder.c.enable=!1)})}),k.version="1.2.3",d.fn.dataTable.RowReorder=k,d.fn.DataTable.RowReorder=k,d(g).on("init.dt.dtr",function(c,b){if("dt"===c.namespace){var a=b.oInit.rowReorder,e=h.defaults.rowReorder;(a||e)&&(e=d.extend({},a,e),!1!==a&&new k(b,e))}}),k}),function(d){"function"==typeof define&&define.amd?define("datatables.net-fixedcolumns",["jquery","datatables.net"],function(p){return d(p,window,document)}):"object"==typeof exports?module.exports=function(p,r){return p||(p=window),r&&r.fn.dataTable||(r=require("datatables.net")(p,r).$),d(r,p,p.document)}:d(jQuery,window,document)}(function(d,p,r,t){var u,s=d.fn.dataTable,m=function(a,b){var c=this;if(this instanceof m){b!==t&&!0!==b||(b={});var e=d.fn.dataTable.camelToHungarian;if(e&&(e(m.defaults,m.defaults,!0),e(m.defaults,b)),e=new d.fn.dataTable.Api(a).settings()[0],this.s={dt:e,iTableColumns:e.aoColumns.length,aiOuterWidths:[],aiInnerWidths:[],rtl:"rtl"===d(e.nTable).css("direction")},this.dom={scroller:null,header:null,body:null,footer:null,grid:{wrapper:null,dt:null,left:{wrapper:null,head:null,body:null,foot:null},right:{wrapper:null,head:null,body:null,foot:null}},clone:{left:{header:null,body:null,footer:null},right:{header:null,body:null,footer:null}}},e._oFixedColumns)throw"FixedColumns already initialised on this table";e._oFixedColumns=this,e._bInitComplete?this._fnConstruct(b):e.oApi._fnCallbackReg(e,"aoInitComplete",function(){c._fnConstruct(b)},"FixedColumns")}else alert("FixedColumns warning: FixedColumns must be initialised with the 'new' keyword.")};return d.extend(m.prototype,{fnUpdate:function(){this._fnDraw(!0)},fnRedrawLayout:function(){this._fnColCalc(),this._fnGridLayout(),this.fnUpdate()},fnRecalculateHeight:function(a){delete a._DTTC_iHeight,a.style.height="auto"},fnSetRowHeight:function(a,b){a.style.height=b+"px"},fnGetPosition:function(a){var b=this.s.dt.oInstance;if(d(a).parents(".DTFC_Cloned").length){if("tr"===a.nodeName.toLowerCase())return a=d(a).index(),b.fnGetPosition(d("tr",this.s.dt.nTBody)[a]);var c=d(a).index();a=d(a.parentNode).index();return[b.fnGetPosition(d("tr",this.s.dt.nTBody)[a]),c,b.oApi._fnVisibleToColumnIndex(this.s.dt,c)]}return b.fnGetPosition(a)},_fnConstruct:function(a){var b=this;if("function"!=typeof this.s.dt.oInstance.fnVersionCheck||!0!==this.s.dt.oInstance.fnVersionCheck("1.8.0"))alert("FixedColumns "+m.VERSION+" required DataTables 1.8.0 or later. Please upgrade your DataTables installation");else if(""===this.s.dt.oScroll.sX)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"FixedColumns is not needed (no x-scrolling in DataTables enabled), so no action will be taken. Use 'FixedHeader' for column fixing when scrolling is not enabled");else{this.s=d.extend(!0,this.s,m.defaults,a),a=this.s.dt.oClasses,this.dom.grid.dt=d(this.s.dt.nTable).parents("div."+a.sScrollWrapper)[0],this.dom.scroller=d("div."+a.sScrollBody,this.dom.grid.dt)[0],this._fnColCalc(),this._fnGridSetup();var c,e=!1;d(this.s.dt.nTableWrapper).on("mousedown.DTFC",function(){e=!0,d(r).one("mouseup",function(){e=!1})}),d(this.dom.scroller).on("mouseover.DTFC touchstart.DTFC",function(){e||(c="main")}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="main"),"main"===c&&(0<b.s.iLeftColumns&&(b.dom.grid.left.liner.scrollTop=b.dom.scroller.scrollTop),0<b.s.iRightColumns)&&(b.dom.grid.right.liner.scrollTop=b.dom.scroller.scrollTop)});var f="onwheel"in r.createElement("div")?"wheel.DTFC":"mousewheel.DTFC";0<b.s.iLeftColumns&&d(b.dom.grid.left.liner).on("mouseover.DTFC touchstart.DTFC",function(){e||(c="left")}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="left"),"left"===c&&(b.dom.scroller.scrollTop=b.dom.grid.left.liner.scrollTop,0<b.s.iRightColumns&&(b.dom.grid.right.liner.scrollTop=b.dom.grid.left.liner.scrollTop))}).on(f,function(a){b.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX}),0<b.s.iRightColumns&&d(b.dom.grid.right.liner).on("mouseover.DTFC touchstart.DTFC",function(){e||(c="right")}).on("scroll.DTFC",function(a){!c&&a.originalEvent&&(c="right"),"right"===c&&(b.dom.scroller.scrollTop=b.dom.grid.right.liner.scrollTop,0<b.s.iLeftColumns&&(b.dom.grid.left.liner.scrollTop=b.dom.grid.right.liner.scrollTop))}).on(f,function(a){b.dom.scroller.scrollLeft-="wheel"===a.type?-a.originalEvent.deltaX:a.originalEvent.wheelDeltaX}),d(p).on("resize.DTFC",function(){b._fnGridLayout.call(b)});var g=!0,h=d(this.s.dt.nTable);h.on("draw.dt.DTFC",function(){b._fnColCalc(),b._fnDraw.call(b,g),g=!1}).on("column-sizing.dt.DTFC",function(){b._fnColCalc(),b._fnGridLayout(b)}).on("column-visibility.dt.DTFC",function(a,c,d,e,f){(f===t||f)&&(b._fnColCalc(),b._fnGridLayout(b),b._fnDraw(!0))}).on("select.dt.DTFC deselect.dt.DTFC",function(a){"dt"===a.namespace&&b._fnDraw(!1)}).on("destroy.dt.DTFC",function(){h.off(".DTFC"),d(b.dom.scroller).off(".DTFC"),d(p).off(".DTFC"),d(b.s.dt.nTableWrapper).off(".DTFC"),d(b.dom.grid.left.liner).off(".DTFC "+f),d(b.dom.grid.left.wrapper).remove(),d(b.dom.grid.right.liner).off(".DTFC "+f),d(b.dom.grid.right.wrapper).remove()}),this._fnGridLayout(),this.s.dt.oInstance.fnDraw(!1)}},_fnColCalc:function(){var a=this,b=0,c=0;this.s.aiInnerWidths=[],this.s.aiOuterWidths=[],d.each(this.s.dt.aoColumns,function(e,f){var h,g=d(f.nTh);if(g.filter(":visible").length){var i=g.outerWidth();0===a.s.aiOuterWidths.length&&(i+="string"==typeof(h=d(a.s.dt.nTable).css("border-left-width"))?1:parseInt(h,10)),a.s.aiOuterWidths.length===a.s.dt.aoColumns.length-1&&(i+="string"==typeof(h=d(a.s.dt.nTable).css("border-right-width"))?1:parseInt(h,10)),a.s.aiOuterWidths.push(i),a.s.aiInnerWidths.push(g.width()),e<a.s.iLeftColumns&&(b+=i),a.s.iTableColumns-a.s.iRightColumns<=e&&(c+=i)}else a.s.aiInnerWidths.push(0),a.s.aiOuterWidths.push(0)}),this.s.iLeftWidth=b,this.s.iRightWidth=c},_fnGridSetup:function(){var b,a=this._fnDTOverflow();this.dom.body=this.s.dt.nTable,this.dom.header=this.s.dt.nTHead.parentNode,this.dom.header.parentNode.parentNode.style.position="relative";var c=d('<div class="DTFC_ScrollWrapper" style="position:relative; clear:both;"><div class="DTFC_LeftWrapper" style="position:absolute; top:0; left:0;"><div class="DTFC_LeftHeadWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div><div class="DTFC_LeftBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_LeftBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_LeftFootWrapper" style="position:relative; top:0; left:0; overflow:hidden;"></div></div><div class="DTFC_RightWrapper" style="position:absolute; top:0; right:0;"><div class="DTFC_RightHeadWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightHeadBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div><div class="DTFC_RightBodyWrapper" style="position:relative; top:0; left:0; overflow:hidden;"><div class="DTFC_RightBodyLiner" style="position:relative; top:0; left:0; overflow-y:scroll;"></div></div><div class="DTFC_RightFootWrapper" style="position:relative; top:0; left:0;"><div class="DTFC_RightFootBlocker DTFC_Blocker" style="position:absolute; top:0; bottom:0;"></div></div></div></div>')[0],e=c.childNodes[0],f=c.childNodes[1];this.dom.grid.dt.parentNode.insertBefore(c,this.dom.grid.dt),c.appendChild(this.dom.grid.dt),this.dom.grid.wrapper=c,0<this.s.iLeftColumns&&(this.dom.grid.left.wrapper=e,this.dom.grid.left.head=e.childNodes[0],this.dom.grid.left.body=e.childNodes[1],this.dom.grid.left.liner=d("div.DTFC_LeftBodyLiner",c)[0],c.appendChild(e)),0<this.s.iRightColumns&&(this.dom.grid.right.wrapper=f,this.dom.grid.right.head=f.childNodes[0],this.dom.grid.right.body=f.childNodes[1],this.dom.grid.right.liner=d("div.DTFC_RightBodyLiner",c)[0],f.style.right=a.bar+"px",(b=d("div.DTFC_RightHeadBlocker",c)[0]).style.width=a.bar+"px",b.style.right=-a.bar+"px",this.dom.grid.right.headBlock=b,(b=d("div.DTFC_RightFootBlocker",c)[0]).style.width=a.bar+"px",b.style.right=-a.bar+"px",this.dom.grid.right.footBlock=b,c.appendChild(f)),this.s.dt.nTFoot&&(this.dom.footer=this.s.dt.nTFoot.parentNode,0<this.s.iLeftColumns&&(this.dom.grid.left.foot=e.childNodes[2]),0<this.s.iRightColumns)&&(this.dom.grid.right.foot=f.childNodes[2]),this.s.rtl&&d("div.DTFC_RightHeadBlocker",c).css({left:-a.bar+"px",right:""})},_fnGridLayout:function(){var a=this,b=this.dom.grid;d(b.wrapper).width();var c=d(this.s.dt.nTable.parentNode).outerHeight(),e=d(this.s.dt.nTable.parentNode.parentNode).outerHeight(),f=this._fnDTOverflow(),g=this.s.iLeftWidth,h=this.s.iRightWidth,i="rtl"===d(this.dom.body).css("direction"),k=function(b,c){f.bar?a._firefoxScrollError()?34<d(b).height()&&(b.style.width=c+f.bar+"px"):b.style.width=c+f.bar+"px":(b.style.width=c+20+"px",b.style.paddingRight="20px",b.style.boxSizing="border-box")};f.x&&(c-=f.bar),b.wrapper.style.height=e+"px",0<this.s.iLeftColumns&&((e=b.left.wrapper).style.width=g+"px",e.style.height="1px",e.style.right=i?(e.style.left="",0):(e.style.left=0,""),b.left.body.style.height=c+"px",b.left.foot&&(b.left.foot.style.top=(f.x?f.bar:0)+"px"),k(b.left.liner,g),b.left.liner.style.height=c+"px",b.left.liner.style.maxHeight=c+"px"),0<this.s.iRightColumns&&((e=b.right.wrapper).style.width=h+"px",e.style.height="1px",this.s.rtl?(e.style.left=f.y?f.bar+"px":0,e.style.right=""):(e.style.left="",e.style.right=f.y?f.bar+"px":0),b.right.body.style.height=c+"px",b.right.foot&&(b.right.foot.style.top=(f.x?f.bar:0)+"px"),k(b.right.liner,h),b.right.liner.style.height=c+"px",b.right.liner.style.maxHeight=c+"px",b.right.headBlock.style.display=f.y?"block":"none",b.right.footBlock.style.display=f.y?"block":"none")},_fnDTOverflow:function(){var a=this.s.dt.nTable,b=a.parentNode,c={x:!1,y:!1,bar:this.s.dt.oScroll.iBarWidth};return a.offsetWidth>b.clientWidth&&(c.x=!0),a.offsetHeight>b.clientHeight&&(c.y=!0),c},_fnDraw:function(a){this._fnGridLayout(),this._fnCloneLeft(a),this._fnCloneRight(a),null!==this.s.fnDrawCallback&&this.s.fnDrawCallback.call(this,this.dom.clone.left,this.dom.clone.right),d(this).trigger("draw.dtfc",{leftClone:this.dom.clone.left,rightClone:this.dom.clone.right})},_fnCloneRight:function(a){if(!(this.s.iRightColumns<=0)){var b,c=[];for(b=this.s.iTableColumns-this.s.iRightColumns;b<this.s.iTableColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.right,this.dom.grid.right,c,a)}},_fnCloneLeft:function(a){if(!(this.s.iLeftColumns<=0)){var b,c=[];for(b=0;b<this.s.iLeftColumns;b++)this.s.dt.aoColumns[b].bVisible&&c.push(b);this._fnClone(this.dom.clone.left,this.dom.grid.left,c,a)}},_fnCopyLayout:function(a,b,c){for(var e=[],f=[],g=[],h=0,i=a.length;h<i;h++){var k=[];k.nTr=d(a[h].nTr).clone(c,!1)[0];for(var l=0,o=this.s.iTableColumns;l<o;l++)if(-1!==d.inArray(l,b)){var q=d.inArray(a[h][l].cell,g);-1===q?(q=d(a[h][l].cell).clone(c,!1)[0],f.push(q),g.push(a[h][l].cell),k.push({cell:q,unique:a[h][l].unique})):k.push({cell:f[q],unique:a[h][l].unique})}e.push(k)}return e},_fnClone:function(a,b,c,e){var g,h,i,k,l,o,q,n,m,f=this,j=this.s.dt;if(e){for(d(a.header).remove(),a.header=d(this.dom.header).clone(!0,!1)[0],a.header.className+=" DTFC_Cloned",a.header.style.width="100%",b.head.appendChild(a.header),n=this._fnCopyLayout(j.aoHeader,c,!0),(k=d(">thead",a.header)).empty(),g=0,h=n.length;g<h;g++)k[0].appendChild(n[g].nTr);j.oApi._fnDrawHead(j,n,!0)}else for(n=this._fnCopyLayout(j.aoHeader,c,!1),m=[],j.oApi._fnDetectHeader(m,d(">thead",a.header)[0]),g=0,h=n.length;g<h;g++)for(i=0,k=n[g].length;i<k;i++)m[g][i].cell.className=n[g][i].cell.className,d("span.DataTables_sort_icon",m[g][i].cell).each(function(){this.className=d("span.DataTables_sort_icon",n[g][i].cell)[0].className});this._fnEqualiseHeights("thead",this.dom.header,a.header),"auto"==this.s.sHeightMatch&&d(">tbody>tr",f.dom.body).css("height","auto"),null!==a.body&&(d(a.body).remove(),a.body=null),a.body=d(this.dom.body).clone(!0)[0],a.body.className+=" DTFC_Cloned",a.body.style.paddingBottom=j.oScroll.iBarWidth+"px",a.body.style.marginBottom=2*j.oScroll.iBarWidth+"px",null!==a.body.getAttribute("id")&&a.body.removeAttribute("id"),d(">thead>tr",a.body).empty(),d(">tfoot",a.body).remove();var p=d("tbody",a.body)[0];if(d(p).empty(),0<j.aiDisplay.length){for(h=d(">thead>tr",a.body)[0],q=0;q<c.length;q++)l=c[q],(o=d(j.aoColumns[l].nTh).clone(!0)[0]).innerHTML="",(k=o.style).paddingTop="0",k.paddingBottom="0",k.borderTopWidth="0",k.borderBottomWidth="0",k.height=0,k.width=f.s.aiInnerWidths[l]+"px",h.appendChild(o);d(">tbody>tr",f.dom.body).each(function(a){a=!1===f.s.dt.oFeatures.bServerSide?f.s.dt.aiDisplay[f.s.dt._iDisplayStart+a]:a;var b=f.s.dt.aoData[a].anCells||d(this).children("td, th"),e=this.cloneNode(!1);for(e.removeAttribute("id"),e.setAttribute("data-dt-row",a),q=0;q<c.length;q++)l=c[q],0<b.length&&((o=d(b[l]).clone(!0,!0)[0]).removeAttribute("id"),o.setAttribute("data-dt-row",a),o.setAttribute("data-dt-column",j.oApi._fnVisibleToColumnIndex(j,l)),e.appendChild(o));p.appendChild(e)})}else d(">tbody>tr",f.dom.body).each(function(){(o=this.cloneNode(!0)).className=o.className+" DTFC_NoData",d("td",o).html(""),p.appendChild(o)});if(a.body.style.width="100%",a.body.style.margin="0",a.body.style.padding="0",j.oScroller!==t&&(h=j.oScroller.dom.force,b.forcer?b.forcer.style.height=h.style.height:(b.forcer=h.cloneNode(!0),b.liner.appendChild(b.forcer))),b.liner.appendChild(a.body),this._fnEqualiseHeights("tbody",f.dom.body,a.body),null!==j.nTFoot){if(e){for(null!==a.footer&&a.footer.parentNode.removeChild(a.footer),a.footer=d(this.dom.footer).clone(!0,!0)[0],a.footer.className+=" DTFC_Cloned",a.footer.style.width="100%",b.foot.appendChild(a.footer),n=this._fnCopyLayout(j.aoFooter,c,!0),(b=d(">tfoot",a.footer)).empty(),g=0,h=n.length;g<h;g++)b[0].appendChild(n[g].nTr);j.oApi._fnDrawHead(j,n,!0)}else for(n=this._fnCopyLayout(j.aoFooter,c,!1),b=[],j.oApi._fnDetectHeader(b,d(">tfoot",a.footer)[0]),g=0,h=n.length;g<h;g++)for(i=0,k=n[g].length;i<k;i++)b[g][i].cell.className=n[g][i].cell.className;this._fnEqualiseHeights("tfoot",this.dom.footer,a.footer)}b=j.oApi._fnGetUniqueThs(j,d(">thead",a.header)[0]),d(b).each(function(a){l=c[a],this.style.width=f.s.aiInnerWidths[l]+"px"}),null!==f.s.dt.nTFoot&&(b=j.oApi._fnGetUniqueThs(j,d(">tfoot",a.footer)[0]),d(b).each(function(a){l=c[a],this.style.width=f.s.aiInnerWidths[l]+"px"}))},_fnGetTrNodes:function(a){for(var b=[],c=0,d=a.childNodes.length;c<d;c++)"TR"==a.childNodes[c].nodeName.toUpperCase()&&b.push(a.childNodes[c]);return b},_fnEqualiseHeights:function(a,b,c){if("none"!=this.s.sHeightMatch||"thead"===a||"tfoot"===a){var e,f,g=b.getElementsByTagName(a)[0];c=c.getElementsByTagName(a)[0];(a=d(">"+a+">tr:eq(0)",b).children(":first")).outerHeight(),a.height();g=this._fnGetTrNodes(g),b=this._fnGetTrNodes(c);var h=[];for(c=0,a=b.length;c<a;c++)e=(e=g[c].offsetHeight)<(f=b[c].offsetHeight)?f:e,"semiauto"==this.s.sHeightMatch&&(g[c]._DTTC_iHeight=e),h.push(e);for(c=0,a=b.length;c<a;c++)b[c].style.height=h[c]+"px",g[c].style.height=h[c]+"px"}},_firefoxScrollError:function(){if(u===t){var a=d("<div/>").css({position:"absolute",top:0,left:0,height:10,width:50,overflow:"scroll"}).appendTo("body");u=a[0].clientWidth===a[0].offsetWidth&&0!==this._fnDTOverflow().bar,a.remove()}return u}}),m.defaults={iLeftColumns:1,iRightColumns:0,fnDrawCallback:null,sHeightMatch:"semiauto"},m.version="3.2.3",s.Api.register("fixedColumns()",function(){return this}),s.Api.register("fixedColumns().update()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnUpdate()})}),s.Api.register("fixedColumns().relayout()",function(){return this.iterator("table",function(a){a._oFixedColumns&&a._oFixedColumns.fnRedrawLayout()})}),s.Api.register("rows().recalcHeight()",function(){return this.iterator("row",function(a,b){a._oFixedColumns&&a._oFixedColumns.fnRecalculateHeight(this.row(b).node())})}),s.Api.register("fixedColumns().rowIndex()",function(a){return(a=d(a)).parents(".DTFC_Cloned").length?this.rows({page:"current"}).indexes()[a.index()]:this.row(a).index()}),s.Api.register("fixedColumns().cellIndex()",function(a){if((a=d(a)).parents(".DTFC_Cloned").length){var b=a.parent().index();b=this.rows({page:"current"}).indexes()[b],a=a.parents(".DTFC_LeftWrapper").length?a.index():this.columns().flatten().length-this.context[0]._oFixedColumns.s.iRightColumns+a.index();return{row:b,column:this.column.index("toData",a),columnVisible:a}}return this.cell(a).index()}),d(r).on("init.dt.fixedColumns",function(a,b){if("dt"===a.namespace){var c=b.oInit.fixedColumns,e=s.defaults.fixedColumns;(c||e)&&(e=d.extend({},c,e),!1!==c&&new m(b,e))}}),d.fn.dataTable.FixedColumns=m,d.fn.DataTable.FixedColumns=m}),function(d){"function"==typeof define&&define.amd?define("datatables.net-fixedheader",["jquery","datatables.net"],function(g){return d(g,window,document)}):"object"==typeof exports?module.exports=function(g,h){return g||(g=window),h&&h.fn.dataTable||(h=require("datatables.net")(g,h).$),d(h,g,g.document)}:d(jQuery,window,document)}(function(d,g,h,k){var j=d.fn.dataTable,l=0,i=function(b,a){if(!(this instanceof i))throw"FixedHeader must be initialised with the 'new' keyword.";!0===a&&(a={}),b=new j.Api(b),this.c=d.extend(!0,{},i.defaults,a),this.s={dt:b,position:{theadTop:0,tbodyTop:0,tfootTop:0,tfootBottom:0,width:0,left:0,tfootHeight:0,theadHeight:0,windowHeight:d(g).height(),visible:!0},headerMode:null,footerMode:null,autoWidth:b.settings()[0].oFeatures.bAutoWidth,namespace:".dtfc"+l++,scrollLeft:{header:-1,footer:-1},enable:!0},this.dom={floatingHeader:null,thead:d(b.table().header()),tbody:d(b.table().body()),tfoot:d(b.table().footer()),header:{host:null,floating:null,placeholder:null},footer:{host:null,floating:null,placeholder:null}},this.dom.header.host=this.dom.thead.parent(),this.dom.footer.host=this.dom.tfoot.parent();var e=b.settings()[0];if(e._fixedHeader)throw"FixedHeader already initialised on table "+e.nTable.id;(e._fixedHeader=this)._constructor()};return d.extend(i.prototype,{enable:function(b){this.s.enable=b,this.c.header&&this._modeChange("in-place","header",!0),this.c.footer&&this.dom.tfoot.length&&this._modeChange("in-place","footer",!0),this.update()},headerOffset:function(b){return b!==k&&(this.c.headerOffset=b,this.update()),this.c.headerOffset},footerOffset:function(b){return b!==k&&(this.c.footerOffset=b,this.update()),this.c.footerOffset},update:function(){this._positions(),this._scroll(!0)},_constructor:function(){var b=this,a=this.s.dt;d(g).on("scroll"+this.s.namespace,function(){b._scroll()}).on("resize"+this.s.namespace,function(){b.s.position.windowHeight=d(g).height(),b.update()});var e=d(".fh-fixedHeader");!this.c.headerOffset&&e.length&&(this.c.headerOffset=e.outerHeight()),e=d(".fh-fixedFooter"),!this.c.footerOffset&&e.length&&(this.c.footerOffset=e.outerHeight()),a.on("column-reorder.dt.dtfc column-visibility.dt.dtfc draw.dt.dtfc column-sizing.dt.dtfc",function(){b.update()}),a.on("destroy.dtfc",function(){a.off(".dtfc"),d(g).off(b.s.namespace)}),this._positions(),this._scroll()},_clone:function(b,a){var e=this.s.dt,c=this.dom[b],f="header"===b?this.dom.thead:this.dom.tfoot;!a&&c.floating?c.floating.removeClass("fixedHeader-floating fixedHeader-locked"):(c.floating&&(c.placeholder.remove(),this._unsize(b),c.floating.children().detach(),c.floating.remove()),c.floating=d(e.table().node().cloneNode(!1)).css("table-layout","fixed").removeAttr("id").append(f).appendTo("body"),c.placeholder=f.clone(!1),c.placeholder.find("*[id]").removeAttr("id"),c.host.prepend(c.placeholder),this._matchWidths(c.placeholder,c.floating))},_matchWidths:function(b,a){var c=function(b,c){d(b,a).each(function(a){d(this).css({width:c[a],minWidth:c[a]})})},f=(e=function(a){return d(a,b).map(function(){return d(this).width()}).toArray()})("th"),e=e("td");c("th",f),c("td",e)},_unsize:function(b){var a=this.dom[b].floating;a&&("footer"===b||"header"===b&&!this.s.autoWidth)?d("th, td",a).css({width:"",minWidth:""}):a&&"header"===b&&d("th, td",a).css("min-width","")},_horizontal:function(b,a){var e=this.dom[b],c=this.s.position,d=this.s.scrollLeft;e.floating&&d[b]!==a&&(e.floating.css("left",c.left-a),d[b]=a)},_modeChange:function(b,a,e){var c=this.dom[a],f=this.s.position,g=d.contains(this.dom["footer"===a?"tfoot":"thead"][0],h.activeElement)?h.activeElement:null;"in-place"===b?(c.placeholder&&(c.placeholder.remove(),c.placeholder=null),this._unsize(a),"header"===a?c.host.prepend(this.dom.thead):c.host.append(this.dom.tfoot),c.floating&&(c.floating.remove(),c.floating=null)):"in"===b?(this._clone(a,e),c.floating.addClass("fixedHeader-floating").css("header"===a?"top":"bottom",this.c[a+"Offset"]).css("left",f.left+"px").css("width",f.width+"px"),"footer"===a&&c.floating.css("top","")):"below"===b?(this._clone(a,e),c.floating.addClass("fixedHeader-locked").css("top",f.tfootTop-f.theadHeight).css("left",f.left+"px").css("width",f.width+"px")):"above"===b&&(this._clone(a,e),c.floating.addClass("fixedHeader-locked").css("top",f.tbodyTop).css("left",f.left+"px").css("width",f.width+"px")),g&&g!==h.activeElement&&g.focus(),this.s.scrollLeft.header=-1,this.s.scrollLeft.footer=-1,this.s[a+"Mode"]=b},_positions:function(){var b=this.s.dt.table(),a=this.s.position,e=this.dom,c=(b=d(b.node())).children("thead"),f=b.children("tfoot");e=e.tbody;a.visible=b.is(":visible"),a.width=b.outerWidth(),a.left=b.offset().left,a.theadTop=c.offset().top,a.tbodyTop=e.offset().top,a.theadHeight=a.tbodyTop-a.theadTop,f.length?(a.tfootTop=f.offset().top,a.tfootBottom=a.tfootTop+f.outerHeight(),a.tfootHeight=a.tfootBottom-a.tfootTop):(a.tfootTop=a.tbodyTop+e.outerHeight(),a.tfootBottom=a.tfootTop,a.tfootHeight=a.tfootTop)},_scroll:function(b){var f,a=d(h).scrollTop(),e=d(h).scrollLeft(),c=this.s.position;this.s.enable&&(this.c.header&&(f=!c.visible||a<=c.theadTop-this.c.headerOffset?"in-place":a<=c.tfootTop-c.theadHeight-this.c.headerOffset?"in":"below",(b||f!==this.s.headerMode)&&this._modeChange(f,"header",b),this._horizontal("header",e)),this.c.footer&&this.dom.tfoot.length)&&(a=!c.visible||a+c.windowHeight>=c.tfootBottom+this.c.footerOffset?"in-place":c.windowHeight+a>c.tbodyTop+c.tfootHeight+this.c.footerOffset?"in":"above",(b||a!==this.s.footerMode)&&this._modeChange(a,"footer",b),this._horizontal("footer",e))}}),i.version="3.1.3",i.defaults={header:!0,footer:!1,headerOffset:0,footerOffset:0},d.fn.dataTable.FixedHeader=i,d.fn.DataTable.FixedHeader=i,d(h).on("init.dt.dtfh",function(b,a){if("dt"===b.namespace){var e=a.oInit.fixedHeader,c=j.defaults.fixedHeader;!e&&!c||a._fixedHeader||(c=d.extend({},c,e),!1!==e&&new i(a,c))}}),j.Api.register("fixedHeader()",function(){}),j.Api.register("fixedHeader.adjust()",function(){return this.iterator("table",function(b){(b=b._fixedHeader)&&b.update()})}),j.Api.register("fixedHeader.enable()",function(b){return this.iterator("table",function(a){a=a._fixedHeader,b=b===k||b,a&&b!==a.s.enable&&a.enable(b)})}),j.Api.register("fixedHeader.disable()",function(){return this.iterator("table",function(b){(b=b._fixedHeader)&&b.s.enable&&b.enable(!1)})}),d.each(["header","footer"],function(b,a){j.Api.register("fixedHeader."+a+"Offset()",function(b){var c=this.context;return b===k?c.length&&c[0]._fixedHeader?c[0]._fixedHeader[a+"Offset"]():k:this.iterator("table",function(c){(c=c._fixedHeader)&&c[a+"Offset"](b)})})}),i}),function(e){"function"==typeof define&&define.amd?define("datatables.net-select",["jquery","datatables.net"],function(j){return e(j,window,document)}):"object"==typeof exports?module.exports=function(j,m){return j||(j=window),m&&m.fn.dataTable||(m=require("datatables.net")(j,m).$),e(m,j,j.document)}:e(jQuery,window,document)}(function(e,j,m,h){function v(a,c,b){var d;d=function(b,c){if(c<b){var d=c;c=b,b=d}var f=!1;return a.columns(":visible").indexes().filter(function(a){return a===b&&(f=!0),a===c?!(f=!1):f})};var f=function(b,c){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(b)>d.indexOf(c)){var f=c;c=b,b=f}var e=!1;return d.filter(function(a){return a===b&&(e=!0),a===c?!(e=!1):e})};b=a.cells({selected:!0}).any()||b?(d=d(b.column,c.column),f(b.row,c.row)):(d=d(0,c.column),f(0,c.row)),b=a.cells(b,d).flatten(),a.cells(c,{selected:!0}).any()?a.cells(b).deselect():a.cells(b).select()}function r(a){var c=a.settings()[0]._select.selector;e(a.table().container()).off("mousedown.dtSelect",c).off("mouseup.dtSelect",c).off("click.dtSelect",c),e("body").off("click.dtSelect"+a.table().node().id)}function x(a){var c=e(a.table().container()),b=a.settings()[0],d=b._select.selector;c.on("mousedown.dtSelect",d,function(b){(b.shiftKey||b.metaKey||b.ctrlKey)&&c.css("-moz-user-select","none").one("selectstart.dtSelect",d,function(){return!1})}).on("mouseup.dtSelect",d,function(){c.css("-moz-user-select","")}).on("click.dtSelect",d,function(b){var c=a.select.items();if(!j.getSelection||!e.trim(j.getSelection().toString())){var d=a.settings()[0];if(e(b.target).closest("div.dataTables_wrapper")[0]==a.table().container()){var k=a.cell(e(b.target).closest("td, th"));if(k.any()){var g=e.Event("user-select.dt");i(a,g,[c,k,b]),g.isDefaultPrevented()||(g=k.index(),"row"===c?(c=g.row,s(b,a,d,"row",c)):"column"===c?(c=k.index().column,s(b,a,d,"column",c)):"cell"===c&&(c=k.index(),s(b,a,d,"cell",c)),d._select_lastCell=g)}}}}),e("body").on("click.dtSelect"+a.table().node().id,function(c){b._select.blurable&&!e(c.target).parents().filter(a.table().container()).length&&0!==e(c.target).parents("html").length&&!e(c.target).parents("div.DTE").length&&p(b,!0)})}function i(a,c,b,d){d&&!a.flatten().length||("string"==typeof c&&(c+=".dt"),b.unshift(a),e(a.table().node()).trigger(c,b))}function y(a){var c=a.settings()[0];if(c._select.info&&c.aanFeatures.i&&"api"!==a.select.style()){var b=a.rows({selected:!0}).flatten().length,d=a.columns({selected:!0}).flatten().length,f=a.cells({selected:!0}).flatten().length,l=function(b,c,d){b.append(e('<span class="select-item"/>').append(a.i18n("select."+c+"s",{_:"%d "+c+"s selected",0:"",1:"1 "+c+" selected"},d)))};e.each(c.aanFeatures.i,function(c,a){a=e(a);var g=e('<span class="select-info"/>');l(g,"row",b),l(g,"column",d),l(g,"cell",f);var h=a.children("span.select-info");h.length&&h.remove(),""!==g.text()&&a.append(g)})}}function z(a,c,b,d){var f=a[c+"s"]({search:"applied"}).indexes(),l=(d=e.inArray(d,f),e.inArray(b,f));if(a[c+"s"]({selected:!0}).any()||-1!==d){if(l<d){var g=l;l=d,d=g}f.splice(l+1,f.length),f.splice(0,d)}else f.splice(e.inArray(b,f)+1,f.length);a[c](b,{selected:!0}).any()?(f.splice(e.inArray(b,f),1),a[c+"s"](f).deselect()):a[c+"s"](f).select()}function p(a,c){if(c||"single"===a._select.style){var b=new g.Api(a);b.rows({selected:!0}).deselect(),b.columns({selected:!0}).deselect(),b.cells({selected:!0}).deselect()}}function s(a,c,b,d,f){var e=c.select.style(),g=c[d](f,{selected:!0}).any();"os"===e?a.ctrlKey||a.metaKey?c[d](f).select(!g):a.shiftKey?"cell"===d?v(c,f,b._select_lastCell||null):z(c,d,f,b._select_lastCell?b._select_lastCell[d]:null):(a=c[d+"s"]({selected:!0}),g&&1===a.flatten().length?c[d](f).deselect():(a.deselect(),c[d](f).select())):"multi+shift"==e&&a.shiftKey?"cell"===d?v(c,f,b._select_lastCell||null):z(c,d,f,b._select_lastCell?b._select_lastCell[d]:null):c[d](f).select(!g)}function q(a,c){return function(b){return b.i18n("buttons."+a,c)}}function t(a){return"draw.dt.DT"+(a=a._eventNamespace)+" select.dt.DT"+a+" deselect.dt.DT"+a}var g=e.fn.dataTable;g.select={},g.select.version="1.2.3",g.select.init=function(a){var c=a.settings()[0],b=c.oInit.select,d=g.defaults.select,f=(b=b===h?d:b,d="row","api"),l=!1,w=!0,k="td, th",j="selected",i=!1;c._select={},!0===b?(f="os",i=!0):"string"==typeof b?(f=b,i=!0):e.isPlainObject(b)&&(b.blurable!==h&&(l=b.blurable),b.info!==h&&(w=b.info),b.items!==h&&(d=b.items),b.style!==h&&(f=b.style,i=!0),b.selector!==h&&(k=b.selector),b.className!==h)&&(j=b.className),a.select.selector(k),a.select.items(d),a.select.style(f),a.select.blurable(l),a.select.info(w),c._select.className=j,e.fn.dataTable.ext.order["select-checkbox"]=function(b,c){return this.api().column(c,{order:"index"}).nodes().map(function(c){return"row"===b._select.items?e(c).parent().hasClass(b._select.className):"cell"===b._select.items&&e(c).hasClass(b._select.className)})},!i&&e(a.table().node()).hasClass("selectable")&&a.select.style("os")},e.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,c){g.ext.selector[c.type].push(function(b,a,f){var e,g=[];if((a=a.selected)===h)return f;for(var k=0,i=f.length;k<i;k++)e=b[c.prop][f[k]],(!0===a&&!0===e._select_selected||!1===a&&!e._select_selected)&&g.push(f[k]);return g})}),g.ext.selector.cell.push(function(a,c,b){var d,f=[];if((c=c.selected)===h)return b;for(var e=0,g=b.length;e<g;e++)d=a.aoData[b[e].row],(!0===c&&d._selected_cells&&!0===d._selected_cells[b[e].column]||!1===c&&(!d._selected_cells||!d._selected_cells[b[e].column]))&&f.push(b[e]);return f});var n=g.Api.register,o=g.Api.registerPlural;n("select()",function(){return this.iterator("table",function(a){g.select.init(new g.Api(a))})}),n("select.blurable()",function(a){return a===h?this.context[0]._select.blurable:this.iterator("table",function(c){c._select.blurable=a})}),n("select.info()",function(a){return y===h?this.context[0]._select.info:this.iterator("table",function(c){c._select.info=a})}),n("select.items()",function(a){return a===h?this.context[0]._select.items:this.iterator("table",function(c){c._select.items=a,i(new g.Api(c),"selectItems",[a])})}),n("select.style()",function(a){return a===h?this.context[0]._select.style:this.iterator("table",function(c){if(c._select.style=a,!c._select_init){var b=new g.Api(c);c.aoRowCreatedCallback.push({fn:function(b,a,d){for((a=c.aoData[d])._select_selected&&e(b).addClass(c._select.className),b=0,d=c.aoColumns.length;b<d;b++)(c.aoColumns[b]._select_selected||a._selected_cells&&a._selected_cells[b])&&e(a.anCells[b]).addClass(c._select.className)},sName:"select-deferRender"}),b.on("preXhr.dt.dtSelect",function(){var c=b.rows({selected:!0}).ids(!0).filter(function(b){return b!==h}),a=b.cells({selected:!0}).eq(0).map(function(c){var a=b.row(c.row).id(!0);return a?{row:a,column:c.column}:h}).filter(function(b){return b!==h});b.one("draw.dt.dtSelect",function(){b.rows(c).select(),a.any()&&a.each(function(c){b.cells(c.row,c.column).select()})})}),b.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){y(b)}),b.on("destroy.dtSelect",function(){r(b),b.off(".dtSelect")})}var d=new g.Api(c);r(d),"api"!==a&&x(d),i(new g.Api(c),"selectStyle",[a])})}),n("select.selector()",function(a){return a===h?this.context[0]._select.selector:this.iterator("table",function(c){r(new g.Api(c)),c._select.selector=a,"api"!==c._select.style&&x(new g.Api(c))})}),o("rows().select()","row().select()",function(a){var c=this;return!1===a?this.deselect():(this.iterator("row",function(b,c){p(b),b.aoData[c]._select_selected=!0,e(b.aoData[c].nTr).addClass(b._select.className)}),this.iterator("table",function(b,a){i(c,"select",["row",c[a]],!0)}),this)}),o("columns().select()","column().select()",function(a){var c=this;return!1===a?this.deselect():(this.iterator("column",function(b,c){p(b),b.aoColumns[c]._select_selected=!0;var a=new g.Api(b).column(c);e(a.header()).addClass(b._select.className),e(a.footer()).addClass(b._select.className),a.nodes().to$().addClass(b._select.className)}),this.iterator("table",function(b,a){i(c,"select",["column",c[a]],!0)}),this)}),o("cells().select()","cell().select()",function(a){var c=this;return!1===a?this.deselect():(this.iterator("cell",function(b,c,a){p(b),(c=b.aoData[c])._selected_cells===h&&(c._selected_cells=[]),c._selected_cells[a]=!0,c.anCells&&e(c.anCells[a]).addClass(b._select.className)}),this.iterator("table",function(b,a){i(c,"select",["cell",c[a]],!0)}),this)}),o("rows().deselect()","row().deselect()",function(){var a=this;return this.iterator("row",function(c,b){c.aoData[b]._select_selected=!1,e(c.aoData[b].nTr).removeClass(c._select.className)}),this.iterator("table",function(c,b){i(a,"deselect",["row",a[b]],!0)}),this}),o("columns().deselect()","column().deselect()",function(){var a=this;return this.iterator("column",function(c,b){c.aoColumns[b]._select_selected=!1;var a=new g.Api(c),f=a.column(b);e(f.header()).removeClass(c._select.className),e(f.footer()).removeClass(c._select.className),a.cells(null,b).indexes().each(function(b){var a=c.aoData[b.row],d=a._selected_cells;a.anCells&&(!d||!d[b.column])&&e(a.anCells[b.column]).removeClass(c._select.className)})}),this.iterator("table",function(c,b){i(a,"deselect",["column",a[b]],!0)}),this}),o("cells().deselect()","cell().deselect()",function(){var a=this;return this.iterator("cell",function(c,b,a){(b=c.aoData[b])._selected_cells[a]=!1,b.anCells&&!c.aoColumns[a]._select_selected&&e(b.anCells[a]).removeClass(c._select.className)}),this.iterator("table",function(c,b){i(a,"deselect",["cell",a[b]],!0)}),this});var u=0;return e.extend(g.ext.buttons,{selected:{text:q("selected","Selected"),className:"buttons-selected",init:function(a,c,b){var d=this;b._eventNamespace=".select"+u++,a.on(t(b),function(){var a=d.rows({selected:!0}).any()||d.columns({selected:!0}).any()||d.cells({selected:!0}).any();d.enable(a)}),this.disable()},destroy:function(a,c,b){a.off(b._eventNamespace)}},selectedSingle:{text:q("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a,c,b){var d=this;b._eventNamespace=".select"+u++,a.on(t(b),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(1===b)}),this.disable()},destroy:function(a,c,b){a.off(b._eventNamespace)}},selectAll:{text:q("selectAll","Select all"),className:"buttons-select-all",action:function(){this[this.select.items()+"s"]().select()}},selectNone:{text:q("selectNone","Deselect all"),className:"buttons-select-none",action:function(){p(this.settings()[0],!0)},init:function(a,c,b){var d=this;b._eventNamespace=".select"+u++,a.on(t(b),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(0<b)}),this.disable()},destroy:function(a,c,b){a.off(b._eventNamespace)}}}),e.each(["Row","Column","Cell"],function(a,c){var b=c.toLowerCase();g.ext.buttons["select"+c+"s"]={text:q("select"+c+"s","Select "+b+"s"),className:"buttons-select-"+b+"s",action:function(){this.select.items(b)},init:function(a){var c=this;a.on("selectItems.dt.DT",function(a,d,e){c.active(e===b)})}}}),e(m).on("preInit.dt.dtSelect",function(a,c){"dt"===a.namespace&&g.select.init(new g.Api(c))}),g.select}),define("mockup-patterns-datatables",["jquery","pat-base","datatables.net","datatables.net-bs","datatables.net-buttons","datatables.net-buttons-colvis","datatables.net-buttons-flash","datatables.net-buttons-html5","datatables.net-buttons-print","datatables.net-buttons-bs","datatables.net-colreorder","datatables.net-rowreorder","datatables.net-fixedcolumns","datatables.net-fixedheader","datatables.net-select"],function($,Base,Dt){"use strict";return Base.extend({name:"datatables",trigger:".pat-datatables",parser:"mockup",table:null,defaults:{},init:function(){this.table=this.$el.DataTable(this.options)}})}),define("mockup-patterns-formunloadalert",["jquery","pat-base","translate"],function($,Base,_t){"use strict";return Base.extend({name:"formunloadalert",trigger:".pat-formunloadalert",parser:"mockup",_changed:!1,_suppressed:!1,defaults:{message:_t("Discard changes? If you click OK, any changes you have made will be lost."),changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init:function(){var self=this;if(self.$el.is("form")){$(self.options.changingFields,self.$el).on(self.options.changingEvents,function(evt){self._changed=!0});var $modal=self.$el.parents(".plone-modal");0!==$modal.size()?$modal.data("patternPloneModal").on("hide",function(e){var modal=$modal.data("patternPloneModal");modal&&(modal._suppressHide=self._handleUnload.call(self,e))}):$(window).on("beforeunload",function(e){return self._handleUnload(e)}),self.$el.on("submit",function(e){self._suppressed=!0})}},_handleUnload:function(e){if(this._suppressed)this._suppressed=!1;else if(this._changed){var msg=this.options.message;return this._handleMsg(e,msg),$(window).trigger("messageset"),msg}},_handleMsg:function(e,msg){(e||window.event).returnValue=msg}})}),define("mockup-patterns-preventdoublesubmit",["jquery","pat-base","translate"],function($,Base,_t){"use strict";return Base.extend({name:"preventdoublesubmit",trigger:".pat-preventdoublesubmit",parser:"mockup",defaults:{message:_t("You already clicked the submit button. Do you really want to submit this form again?"),guardClassName:"submitting",optOutClassName:"allowMultiSubmit"},init:function(){var self=this;self.$el.is("form")&&$(":submit",self.$el).click(function(e){if($(":submit").removeAttr("clicked"),$(this).attr("clicked","clicked"),$(this).hasClass(self.options.guardClassName)&&!$(this).hasClass(self.options.optOutClassName))return self._confirm.call(self);$(this).addClass(self.options.guardClassName)})},_confirm:function(e){return window.confirm(this.options.message)}})}),define("mockup-patterns-formautofocus",["jquery","pat-base"],function($,Base,undefined){"use strict";return Base.extend({name:"formautofocus",trigger:".pat-formautofocus",parser:"mockup",defaults:{condition:"div.error",target:"div.error :input:not(.formTabs):visible:first",always:":input:not(.formTabs):visible:first"},init:function(){0!==$(this.options.condition,this.$el).size()?$(this.options.target,this.$el).focus():$(this.options.always,this.$el).focus()}})}),define("mockup-ui-url/views/container",["jquery","underscore","mockup-ui-url/views/base"],function($,_,BaseView){"use strict";return BaseView.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,idPrefix:"container-",render:function(){return this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this.$el.data("component",this),this},renderItems:function(){var $container;if(null!==this.itemContainer){if(0===($container=$(this.itemContainer,this.$el)).length)throw"Item Container element not found."}else $container=this.$el;_.each(this.items,function(view){!0===view.appendInContainer?$container.append(view.render().$el):view.render()},this)},bindEvents:function(){var self=this;_.each(this.items,function(view){view.on("all",function(){var eventTarget,slice=[].slice,eventName=arguments[0],newName=""!==self.id?self.id+"."+eventName:eventName;if(1<arguments.length&&(eventTarget=arguments[1]),newName!==eventName){var newArgs=slice.call(arguments,0);newArgs[0]=newName,self.trigger.apply(self,newArgs)}void 0!==eventTarget&&!0===eventTarget.isUIView&&!0===eventTarget.propagateEvent(eventName)&&self.trigger.apply(self,arguments)})})},get:function(id){return _.findWhere(this.items,{id:id})},add:function(item){if(void 0!==item.id&&this.get(item.id))throw"Another item with the same `id` already exists.";this.items.push(item)}})}),define("mockup-ui-url/views/toolbar",["mockup-ui-url/views/container"],function(ContainerView){"use strict";return ContainerView.extend({tagName:"div",className:"navbar",idPrefix:"toolbar-"})}),define("mockup-ui-url/views/buttongroup",["underscore","mockup-ui-url/views/container"],function(_,ContainerView){"use strict";return ContainerView.extend({tagName:"div",className:"btn-group",idPrefix:"btngroup-",disable:function(){_.each(this.items,function(button){button.disable()})},enable:function(){_.each(this.items,function(button){button.enable()})}})}),define("mockup-patterns-structure-url/js/navigation",["backbone","mockup-utils"],function(Backbone,utils){"use strict";return Backbone.Model.extend({initialize:function(options){this.options=options,this.app=options.app,this.model=options.model},folderClicked:function(e){e.preventDefault();this.app.setCurrentPath(this.model.attributes.path),this.app.collection.goTo(this.app.collection.information.firstPage)}})}),define("mockup-patterns-structure-url/js/models/result",["backbone"],function(Backbone){"use strict";return Backbone.Model.extend({defaults:function(){return{is_folderish:!1,review_state:"",getURL:""}},uid:function(){return this.attributes.UID}})}),define("mockup-patterns-structure-url/js/actions",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","translate"],function($,_,Backbone,Result,utils,_t){"use strict";return Backbone.Model.extend({initialize:function(options){this.options=options,this.app=options.app,this.model=options.model,this.selectedCollection=this.app.selectedCollection},selectAll:function(e){e.preventDefault();var self=this,page=1,count=0,getPage=function(){self.app.loading.show(),$.ajax({url:self.app.collection.url,type:"GET",dataType:"json",data:{query:self.app.collection.queryParser({searchPath:self.model.attributes.path}),batch:JSON.stringify({page:page,size:100}),attributes:JSON.stringify(self.app.collection.queryHelper.options.attributes)}}).done(function(data){var items=self.app.collection.parse(data,count);count+=items.length,_.each(items,function(item){self.app.selectedCollection.add(new Result(item))}),page+=1,data.total>count?getPage():(self.app.loading.hide(),self.app.tableView.render())})};getPage()},doAction:function(buttonName,successMsg,failMsg){var self=this;$.ajax({url:self.app.buttons.get(buttonName).options.url,data:{selection:JSON.stringify([self.model.attributes.UID]),folder:self.model.attributes.path,_authenticator:utils.getAuthenticator()},dataType:"json",type:"POST"}).done(function(data){var msg;"success"===data.status?(msg=_t(successMsg+' "'+self.model.attributes.Title+'"'),self.app.collection.pager(),self.app.updateButtons()):msg=_t("Error "+failMsg+' "'+self.model.attributes.Title+'"'),self.app.setStatus({text:msg,type:data.status||"warning"})})},cutClicked:function(e){e.preventDefault(),this.doAction("cut",_t("Cut"),_t("cutting"))},copyClicked:function(e){e.preventDefault(),this.doAction("copy",_t("Copied"),_t("copying"))},pasteClicked:function(e){e.preventDefault(),this.doAction("paste",_t("Pasted into"),_t("Error pasting into"))},moveTopClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(e){e.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:function(e){e.preventDefault();var self=this;$.ajax({url:self.app.getAjaxUrl(self.app.setDefaultPageUrl),type:"POST",data:{_authenticator:$('[name="_authenticator"]').val(),id:this.model.attributes.id},success:function(data){self.app.ajaxSuccessResponse.apply(self.app,[data])},error:function(data){self.app.ajaxErrorResponse.apply(self.app,[data])}})}})}),define("mockup-patterns-structure-url/js/actionmenu",["underscore"],function(_){"use strict";var menuOptions={openItem:{url:"#",title:"Open",category:"button",iconCSS:"glyphicon glyphicon-eye-open",css:"",modal:!1},editItem:{url:"#",title:"Edit",category:"button",iconCSS:"glyphicon glyphicon-pencil",css:"",modal:!1},cutItem:{library:"mockup-patterns-structure-url/js/actions",method:"cutClicked",url:"#",title:"Cut",category:"dropdown",iconCSS:"glyphicon glyphicon-scissors",css:"",modal:!1},copyItem:{library:"mockup-patterns-structure-url/js/actions",method:"copyClicked",url:"#",title:"Copy",category:"dropdown",iconCSS:"glyphicon glyphicon-duplicate",css:"",modal:!1},pasteItem:{library:"mockup-patterns-structure-url/js/actions",method:"pasteClicked",url:"#",title:"Paste",category:"dropdown",iconCSS:"glyphicon glyphicon-open-file",css:"",modal:!1},"move-top":{library:"mockup-patterns-structure-url/js/actions",method:"moveTopClicked",url:"#",title:"Move to top of folder",category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rright",css:"",modal:!1},"move-bottom":{library:"mockup-patterns-structure-url/js/actions",method:"moveBottomClicked",url:"#",title:"Move to bottom of folder",category:"dropdown",iconCSS:"glyphicon glyphicon-step-backward rleft",css:"",modal:!1},"set-default-page":{library:"mockup-patterns-structure-url/js/actions",method:"setDefaultPageClicked",url:"#",title:"Set as default page",category:"dropdown",iconCSS:"glyphicon glyphicon-ok-circle",css:"",modal:!1},selectAll:{library:"mockup-patterns-structure-url/js/actions",method:"selectAll",url:"#",title:"Select all contained items",category:"dropdown",iconCSS:"glyphicon glyphicon-check",css:"",modal:!1}};return function(menu){if(null!==menu.menuOptions)return menu.menuOptions;var model=menu.model.attributes,app=menu.app,result=_.clone(menuOptions);app.pasteAllowed()&&model.is_folderish||delete result.pasteItem,(app.inQueryMode()||!1===menu.options.canMove)&&(delete result["move-top"],delete result["move-bottom"]),!model.is_folderish&&app.setDefaultPageUrl||delete result["set-default-page"],model.is_folderish||delete result.selectAll;var typeToViewAction=app.options.typeToViewAction,viewAction=typeToViewAction&&typeToViewAction[model.portal_type]||"";return result.openItem.url=model.getURL+viewAction,result.editItem.url=model.getURL+"/edit",result}}),define("text!mockup-patterns-structure-url/templates/actionmenu.xml",[],function(){return'<% _.each(menuOptions.button, function(menuOption){ %>\n<a class="action <%- menuOption.name %> <%- menuOption.idx %> pat-tooltip <%- menuOption.css %>"\n    href="<%- menuOption.url %>"\n    title="<%- _t(menuOption.title) %>">\n  <% if (menuOption.iconCSS) { %>\n  <span class="<%- menuOption.iconCSS %>"></span>\n  <% } else { %>\n  <%- _t(menuOption.title) %> \n  <% } %>\n</a>&nbsp;\n<% }); %>\n\n\n<% if (menuOptions.dropdown) { %>\n<a class="dropdown-toggle"\n    data-toggle="dropdown"\n    href="#"\n    aria-haspopup="true"\n    aria-expanded="true"\n    id="<%- id %>"\n    title="Actions">\n  <span class="glyphicon glyphicon-cog"></span><span class="caret"></span>\n</a>\n<ul class="dropdown-menu pull-right" aria-labelledby="<%- id %>">\n  <% if (header) { %>\n    <li class="dropdown-header"><%- header %></li>\n    <li class="divider"></li>\n  <% } %>\n\n  <% _.each(menuOptions.dropdown, function(menuOption){ %>\n  <li>\n    <a class="action <%- menuOption.name %> <%- menuOption.idx %> <%- menuOption.css %>"\n        href="<%- menuOption.url %>">\n      <% if (menuOption.iconCSS) { %>\n      <span class="<%- menuOption.iconCSS %>"></span>\n      <% } %>\n      <%- _t(menuOption.title) %>\n    </a>\n  </li>\n  <% }); %>\n</ul>\n<% } %>\n'}),define("mockup-patterns-structure-url/js/views/actionmenu",["jquery","underscore","mockup-ui-url/views/base","mockup-utils","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/actions","mockup-patterns-structure-url/js/actionmenu","text!mockup-patterns-structure-url/templates/actionmenu.xml","pat-registry","translate","mockup-patterns-tooltip","bootstrap-dropdown"],function($,_,BaseView,utils,Result,Actions,ActionMenu,ActionMenuTemplate,registry,_t){"use strict";return BaseView.extend({className:"btn-group actionmenu",template:_.template(ActionMenuTemplate),menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",eventConstructor:function(definition){var self=this,libName=definition.library,method=definition.method;if("string"!=typeof libName||"string"!=typeof method)return!1;return function(e){var lib=new(require(libName))(self);return lib[method]&&lib[method](e)}},events:function(){var self=this,result={},menuOptionsCategorized={};return _.each(self.menuOptions,function(menuOption,key){var idx=utils.generateId();menuOption.idx=idx,menuOption.name=key;var category=menuOption.category||"dropdown";void 0===menuOptionsCategorized[category]&&(menuOptionsCategorized[category]=[]),menuOptionsCategorized[category].push(menuOption),menuOption.css=menuOption.css||"",!0===menuOption.modal&&(menuOption.css+=" pat-plone-modal");var e=self.eventConstructor(menuOption);e&&(result["click a."+idx]=e)}),self.menuOptionsCategorized=menuOptionsCategorized,result},initialize:function(options){BaseView.prototype.initialize.apply(this,[options]),this.options=options,this.selectedCollection=this.app.selectedCollection;var menuGenerator=this.options.menuGenerator||this.menuGenerator;if(menuGenerator){var menuOptions=require(menuGenerator)(this);"object"==typeof menuOptions&&(this.menuOptions=menuOptions)}},render:function(){this.$el.empty();var data=this.model.toJSON();return data.header=this.options.header||null,data.menuOptions=this.menuOptionsCategorized,this.$el.html(this.template($.extend({_t:_t,id:utils.generateId()},data))),data.menuOptions.dropdown&&(this.$dropdown=this.$(".dropdown-toggle"),this.$dropdown.dropdown()),this.options.className&&this.$el.addClass(this.options.className),registry.scan(this.$el),this}})}),define("text!mockup-patterns-structure-url/templates/tablerow.xml",[],function(){return'<td class="selection" data-order="<%- attributes[\'_sort\'] %>"><input type="checkbox" <% if(selected){ %> checked="checked" <% } %>/></td>\n\n<td class="title">\n  <div class="pull-left">\n    <a href="<%- viewURL %>"\n        class="manage state-<%- review_state %> contenttype-<%- contenttype %>"\n        title="<%- portal_type %>">\n        <% if(attributes["getMimeIcon"] && contenttype == \'file\'){ %>\n           <img class="mime-icon" src="<%- getMimeIcon %>"> <% } %>\n      <% if(Title){ %>\n        <%- Title %>\n      <% } else { %>\n        <em><%- id %></em>\n      <% } %>\n    </a>\n    <% if(expired){ %>\n      <span class="plone-item-expired"><%- _t(\'Expired\') %></span>\n    <% } %>\n    <% if(ineffective){ %>\n      <span class="plone-item-ineffective"><%- _t(\'Before publishing date\') %></span>\n    <% } %>\n    <% if(activeColumns.indexOf(\'Description\') !== -1 && _.has(availableColumns, \'Description\') && Description) { %>\n    <p class="Description">\n      <small>\n        <%- Description %>\n      </small>\n    </p>\n    <% } %>\n  </div>\n  <% if(attributes["getIcon"] && thumb_scale) { %>\n    <img class="thumb-<%- thumb_scale %> pull-right" src="<%- getURL %>/@@images/image/<%- thumb_scale %>">\n  <% } %>\n</td>\n\n<% _.each(activeColumns, function(column) { %>\n  <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n    <td class="<%- column %>" data-order="<%- attributes[column] %>"><%- attributes[column] %></td>\n  <% } %>\n<% }); %>\n\n<td class="actionmenu-container"></td>\n'}),function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("moment",factory):global.moment=factory()}(this,function(){"use strict";var hookCallback;function utils_hooks__hooks(){return hookCallback.apply(null,arguments)}function isArray(input){return"[object Array]"===Object.prototype.toString.call(input)}function isDate(input){return input instanceof Date||"[object Date]"===Object.prototype.toString.call(input)}function hasOwnProp(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function extend(a,b){for(var i in b)hasOwnProp(b,i)&&(a[i]=b[i]);return hasOwnProp(b,"toString")&&(a.toString=b.toString),hasOwnProp(b,"valueOf")&&(a.valueOf=b.valueOf),a}function create_utc__createUTC(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!0).utc()}function getParsingFlags(m){return null==m._pf&&(m._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}),m._pf}function valid__isValid(m){if(null==m._isValid){var flags=getParsingFlags(m);m._isValid=!(isNaN(m._d.getTime())||!(flags.overflow<0)||flags.empty||flags.invalidMonth||flags.invalidWeekday||flags.nullInput||flags.invalidFormat||flags.userInvalidated),m._strict&&(m._isValid=m._isValid&&0===flags.charsLeftOver&&0===flags.unusedTokens.length&&void 0===flags.bigHour)}return m._isValid}function valid__createInvalid(flags){var m=create_utc__createUTC(NaN);return null!=flags?extend(getParsingFlags(m),flags):getParsingFlags(m).userInvalidated=!0,m}var momentProperties=utils_hooks__hooks.momentProperties=[];function copyConfig(to,from){var i,prop,val;if(void 0!==from._isAMomentObject&&(to._isAMomentObject=from._isAMomentObject),void 0!==from._i&&(to._i=from._i),void 0!==from._f&&(to._f=from._f),void 0!==from._l&&(to._l=from._l),void 0!==from._strict&&(to._strict=from._strict),void 0!==from._tzm&&(to._tzm=from._tzm),void 0!==from._isUTC&&(to._isUTC=from._isUTC),void 0!==from._offset&&(to._offset=from._offset),void 0!==from._pf&&(to._pf=getParsingFlags(from)),void 0!==from._locale&&(to._locale=from._locale),0<momentProperties.length)for(i in momentProperties)void 0!==(val=from[prop=momentProperties[i]])&&(to[prop]=val);return to}var updateInProgress=!1;function Moment(config){copyConfig(this,config),this._d=new Date(null!=config._d?config._d.getTime():NaN),!1===updateInProgress&&(updateInProgress=!0,utils_hooks__hooks.updateOffset(this),updateInProgress=!1)}function isMoment(obj){return obj instanceof Moment||null!=obj&&null!=obj._isAMomentObject}function absFloor(number){return number<0?Math.ceil(number):Math.floor(number)}function toInt(argumentForCoercion){var coercedNumber=+argumentForCoercion,value=0;return 0!==coercedNumber&&isFinite(coercedNumber)&&(value=absFloor(coercedNumber)),value}function compareArrays(array1,array2,dontConvert){var i,len=Math.min(array1.length,array2.length),lengthDiff=Math.abs(array1.length-array2.length),diffs=0;for(i=0;i<len;i++)(dontConvert&&array1[i]!==array2[i]||!dontConvert&&toInt(array1[i])!==toInt(array2[i]))&&diffs++;return diffs+lengthDiff}function Locale(){}var globalLocale,locales={};function normalizeLocale(key){return key?key.toLowerCase().replace("_","-"):key}function loadLocale(name){var oldLocale=null;if(!locales[name]&&"undefined"!=typeof module&&module&&module.exports)try{oldLocale=globalLocale._abbr,require("./locale/"+name),locale_locales__getSetGlobalLocale(oldLocale)}catch(e){}return locales[name]}function locale_locales__getSetGlobalLocale(key,values){var data;return key&&(data=void 0===values?locale_locales__getLocale(key):defineLocale(key,values))&&(globalLocale=data),globalLocale._abbr}function defineLocale(name,values){return null!==values?(values.abbr=name,locales[name]=locales[name]||new Locale,locales[name].set(values),locale_locales__getSetGlobalLocale(name),locales[name]):(delete locales[name],null)}function locale_locales__getLocale(key){var locale;if(key&&key._locale&&key._locale._abbr&&(key=key._locale._abbr),!key)return globalLocale;if(!isArray(key)){if(locale=loadLocale(key))return locale;key=[key]}return function(names){for(var j,next,locale,split,i=0;i<names.length;){for(j=(split=normalizeLocale(names[i]).split("-")).length,next=(next=normalizeLocale(names[i+1]))?next.split("-"):null;0<j;){if(locale=loadLocale(split.slice(0,j).join("-")))return locale;if(next&&next.length>=j&&compareArrays(split,next,!0)>=j-1)break;j--}i++}return null}(key)}var aliases={};function addUnitAlias(unit,shorthand){var lowerCase=unit.toLowerCase();aliases[lowerCase]=aliases[lowerCase+"s"]=aliases[shorthand]=unit}function normalizeUnits(units){return"string"==typeof units?aliases[units]||aliases[units.toLowerCase()]:void 0}function normalizeObjectUnits(inputObject){var normalizedProp,prop,normalizedInput={};for(prop in inputObject)hasOwnProp(inputObject,prop)&&(normalizedProp=normalizeUnits(prop))&&(normalizedInput[normalizedProp]=inputObject[prop]);return normalizedInput}function makeGetSet(unit,keepTime){return function(value){return null!=value?(get_set__set(this,unit,value),utils_hooks__hooks.updateOffset(this,keepTime),this):get_set__get(this,unit)}}function get_set__get(mom,unit){return mom._d["get"+(mom._isUTC?"UTC":"")+unit]()}function get_set__set(mom,unit,value){return mom._d["set"+(mom._isUTC?"UTC":"")+unit](value)}function getSet(units,value){var unit;if("object"==typeof units)for(unit in units)this.set(unit,units[unit]);else if("function"==typeof this[units=normalizeUnits(units)])return this[units](value);return this}function zeroFill(number,targetLength,forceSign){var absNumber=""+Math.abs(number),zerosToFill=targetLength-absNumber.length;return(0<=number?forceSign?"+":"":"-")+Math.pow(10,Math.max(0,zerosToFill)).toString().substr(1)+absNumber}var formattingTokens=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,localFormattingTokens=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,formatFunctions={},formatTokenFunctions={};function addFormatToken(token,padded,ordinal,callback){var func=callback;"string"==typeof callback&&(func=function(){return this[callback]()}),token&&(formatTokenFunctions[token]=func),padded&&(formatTokenFunctions[padded[0]]=function(){return zeroFill(func.apply(this,arguments),padded[1],padded[2])}),ordinal&&(formatTokenFunctions[ordinal]=function(){return this.localeData().ordinal(func.apply(this,arguments),token)})}function formatMoment(m,format){return m.isValid()?(format=expandFormat(format,m.localeData()),formatFunctions[format]=formatFunctions[format]||function(format){var i,length,input,array=format.match(formattingTokens);for(i=0,length=array.length;i<length;i++)formatTokenFunctions[array[i]]?array[i]=formatTokenFunctions[array[i]]:array[i]=(input=array[i]).match(/\[[\s\S]/)?input.replace(/^\[|\]$/g,""):input.replace(/\\/g,"");return function(mom){var output="";for(i=0;i<length;i++)output+=array[i]instanceof Function?array[i].call(mom,format):array[i];return output}}(format),formatFunctions[format](m)):m.localeData().invalidDate()}function expandFormat(format,locale){var i=5;function replaceLongDateFormatTokens(input){return locale.longDateFormat(input)||input}for(localFormattingTokens.lastIndex=0;0<=i&&localFormattingTokens.test(format);)format=format.replace(localFormattingTokens,replaceLongDateFormatTokens),localFormattingTokens.lastIndex=0,i-=1;return format}var match1=/\d/,match2=/\d\d/,match3=/\d{3}/,match4=/\d{4}/,match6=/[+-]?\d{6}/,match1to2=/\d\d?/,match1to3=/\d{1,3}/,match1to4=/\d{1,4}/,match1to6=/[+-]?\d{1,6}/,matchUnsigned=/\d+/,matchSigned=/[+-]?\d+/,matchOffset=/Z|[+-]\d\d:?\d\d/gi,matchWord=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,regexes={};function addRegexToken(token,regex,strictRegex){var sth;regexes[token]="function"==typeof(sth=regex)&&"[object Function]"===Object.prototype.toString.call(sth)?regex:function(isStrict){return isStrict&&strictRegex?strictRegex:regex}}function getParseRegexForToken(token,config){return hasOwnProp(regexes,token)?regexes[token](config._strict,config._locale):new RegExp(token.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(matched,p1,p2,p3,p4){return p1||p2||p3||p4}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}var tokens={};function addParseToken(token,callback){var i,func=callback;for("string"==typeof token&&(token=[token]),"number"==typeof callback&&(func=function(input,array){array[callback]=toInt(input)}),i=0;i<token.length;i++)tokens[token[i]]=func}function addWeekParseToken(token,callback){addParseToken(token,function(input,array,config,token){config._w=config._w||{},callback(input,config._w,config,token)})}function addTimeToArrayFromToken(token,input,config){null!=input&&hasOwnProp(tokens,token)&&tokens[token](input,config._a,config,token)}var YEAR=0,MONTH=1,DATE=2,HOUR=3,MINUTE=4,SECOND=5,MILLISECOND=6;function daysInMonth(year,month){return new Date(Date.UTC(year,month+1,0)).getUTCDate()}addFormatToken("M",["MM",2],"Mo",function(){return this.month()+1}),addFormatToken("MMM",0,0,function(format){return this.localeData().monthsShort(this,format)}),addFormatToken("MMMM",0,0,function(format){return this.localeData().months(this,format)}),addUnitAlias("month","M"),addRegexToken("M",match1to2),addRegexToken("MM",match1to2,match2),addRegexToken("MMM",matchWord),addRegexToken("MMMM",matchWord),addParseToken(["M","MM"],function(input,array){array[MONTH]=toInt(input)-1}),addParseToken(["MMM","MMMM"],function(input,array,config,token){var month=config._locale.monthsParse(input,token,config._strict);null!=month?array[MONTH]=month:getParsingFlags(config).invalidMonth=input});var defaultLocaleMonths="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var defaultLocaleMonthsShort="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function setMonth(mom,value){var dayOfMonth;return"string"==typeof value&&"number"!=typeof(value=mom.localeData().monthsParse(value))||(dayOfMonth=Math.min(mom.date(),daysInMonth(mom.year(),value)),mom._d["set"+(mom._isUTC?"UTC":"")+"Month"](value,dayOfMonth)),mom}function getSetMonth(value){return null!=value?(setMonth(this,value),utils_hooks__hooks.updateOffset(this,!0),this):get_set__get(this,"Month")}function checkOverflow(m){var overflow,a=m._a;return a&&-2===getParsingFlags(m).overflow&&(overflow=a[MONTH]<0||11<a[MONTH]?MONTH:a[DATE]<1||a[DATE]>daysInMonth(a[YEAR],a[MONTH])?DATE:a[HOUR]<0||24<a[HOUR]||24===a[HOUR]&&(0!==a[MINUTE]||0!==a[SECOND]||0!==a[MILLISECOND])?HOUR:a[MINUTE]<0||59<a[MINUTE]?MINUTE:a[SECOND]<0||59<a[SECOND]?SECOND:a[MILLISECOND]<0||999<a[MILLISECOND]?MILLISECOND:-1,getParsingFlags(m)._overflowDayOfYear&&(overflow<YEAR||DATE<overflow)&&(overflow=DATE),getParsingFlags(m).overflow=overflow),m}function warn(msg){!1===utils_hooks__hooks.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+msg)}function deprecate(msg,fn){var firstTime=!0;return extend(function(){return firstTime&&(warn(msg+"\n"+(new Error).stack),firstTime=!1),fn.apply(this,arguments)},fn)}var deprecations={};utils_hooks__hooks.suppressDeprecationWarnings=!1;var from_string__isoRegex=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],isoTimes=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],aspNetJsonRegex=/^\/?Date\((\-?\d+)/i;function configFromISO(config){var i,l,string=config._i,match=from_string__isoRegex.exec(string);if(match){for(getParsingFlags(config).iso=!0,i=0,l=isoDates.length;i<l;i++)if(isoDates[i][1].exec(string)){config._f=isoDates[i][0];break}for(i=0,l=isoTimes.length;i<l;i++)if(isoTimes[i][1].exec(string)){config._f+=(match[6]||" ")+isoTimes[i][0];break}string.match(matchOffset)&&(config._f+="Z"),configFromStringAndFormat(config)}else config._isValid=!1}function createUTCDate(y){var date=new Date(Date.UTC.apply(null,arguments));return y<1970&&date.setUTCFullYear(y),date}function daysInYear(year){return isLeapYear(year)?366:365}function isLeapYear(year){return year%4==0&&year%100!=0||year%400==0}utils_hooks__hooks.createFromInputFallback=deprecate("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(config){config._d=new Date(config._i+(config._useUTC?" UTC":""))}),addFormatToken(0,["YY",2],0,function(){return this.year()%100}),addFormatToken(0,["YYYY",4],0,"year"),addFormatToken(0,["YYYYY",5],0,"year"),addFormatToken(0,["YYYYYY",6,!0],0,"year"),addUnitAlias("year","y"),addRegexToken("Y",matchSigned),addRegexToken("YY",match1to2,match2),addRegexToken("YYYY",match1to4,match4),addRegexToken("YYYYY",match1to6,match6),addRegexToken("YYYYYY",match1to6,match6),addParseToken(["YYYYY","YYYYYY"],YEAR),addParseToken("YYYY",function(input,array){array[YEAR]=2===input.length?utils_hooks__hooks.parseTwoDigitYear(input):toInt(input)}),addParseToken("YY",function(input,array){array[YEAR]=utils_hooks__hooks.parseTwoDigitYear(input)});var getSetYear=makeGetSet("FullYear",!(utils_hooks__hooks.parseTwoDigitYear=function(input){return toInt(input)+(68<toInt(input)?1900:2e3)}));function weekOfYear(mom,firstDayOfWeek,firstDayOfWeekOfYear){var adjustedMoment,end=firstDayOfWeekOfYear-firstDayOfWeek,daysToDayOfWeek=firstDayOfWeekOfYear-mom.day();return end<daysToDayOfWeek&&(daysToDayOfWeek-=7),daysToDayOfWeek<end-7&&(daysToDayOfWeek+=7),adjustedMoment=local__createLocal(mom).add(daysToDayOfWeek,"d"),{week:Math.ceil(adjustedMoment.dayOfYear()/7),year:adjustedMoment.year()}}addFormatToken("w",["ww",2],"wo","week"),addFormatToken("W",["WW",2],"Wo","isoWeek"),addUnitAlias("week","w"),addUnitAlias("isoWeek","W"),addRegexToken("w",match1to2),addRegexToken("ww",match1to2,match2),addRegexToken("W",match1to2),addRegexToken("WW",match1to2,match2),addWeekParseToken(["w","ww","W","WW"],function(input,week,config,token){week[token.substr(0,1)]=toInt(input)});function defaults(a,b,c){return null!=a?a:null!=b?b:c}function configFromArray(config){var i,date,currentDate,yearToUse,input=[];if(!config._d){for(currentDate=function(config){var now=new Date;return config._useUTC?[now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()]:[now.getFullYear(),now.getMonth(),now.getDate()]}(config),config._w&&null==config._a[DATE]&&null==config._a[MONTH]&&function(config){var w,weekYear,week,weekday,dow,doy,temp;null!=(w=config._w).GG||null!=w.W||null!=w.E?(dow=1,doy=4,weekYear=defaults(w.GG,config._a[YEAR],weekOfYear(local__createLocal(),1,4).year),week=defaults(w.W,1),weekday=defaults(w.E,1)):(dow=config._locale._week.dow,doy=config._locale._week.doy,weekYear=defaults(w.gg,config._a[YEAR],weekOfYear(local__createLocal(),dow,doy).year),week=defaults(w.w,1),null!=w.d?(weekday=w.d)<dow&&++week:weekday=null!=w.e?w.e+dow:dow);temp=function(year,week,weekday,firstDayOfWeekOfYear,firstDayOfWeek){var dayOfYear,week1Jan=6+firstDayOfWeek-firstDayOfWeekOfYear,d=createUTCDate(year,0,1+week1Jan).getUTCDay();return d<firstDayOfWeek&&(d+=7),{year:0<(dayOfYear=1+week1Jan+7*(week-1)-d+(weekday=null!=weekday?1*weekday:firstDayOfWeek))?year:year-1,dayOfYear:0<dayOfYear?dayOfYear:daysInYear(year-1)+dayOfYear}}(weekYear,week,weekday,doy,dow),config._a[YEAR]=temp.year,config._dayOfYear=temp.dayOfYear}(config),config._dayOfYear&&(yearToUse=defaults(config._a[YEAR],currentDate[YEAR]),config._dayOfYear>daysInYear(yearToUse)&&(getParsingFlags(config)._overflowDayOfYear=!0),date=createUTCDate(yearToUse,0,config._dayOfYear),config._a[MONTH]=date.getUTCMonth(),config._a[DATE]=date.getUTCDate()),i=0;i<3&&null==config._a[i];++i)config._a[i]=input[i]=currentDate[i];for(;i<7;i++)config._a[i]=input[i]=null==config._a[i]?2===i?1:0:config._a[i];24===config._a[HOUR]&&0===config._a[MINUTE]&&0===config._a[SECOND]&&0===config._a[MILLISECOND]&&(config._nextDay=!0,config._a[HOUR]=0),config._d=(config._useUTC?createUTCDate:function(y,m,d,h,M,s,ms){var date=new Date(y,m,d,h,M,s,ms);return y<1970&&date.setFullYear(y),date}).apply(null,input),null!=config._tzm&&config._d.setUTCMinutes(config._d.getUTCMinutes()-config._tzm),config._nextDay&&(config._a[HOUR]=24)}}function configFromStringAndFormat(config){if(config._f!==utils_hooks__hooks.ISO_8601){config._a=[],getParsingFlags(config).empty=!0;var i,parsedInput,tokens,token,skipped,string=""+config._i,stringLength=string.length,totalParsedInputLength=0;for(tokens=expandFormat(config._f,config._locale).match(formattingTokens)||[],i=0;i<tokens.length;i++)token=tokens[i],(parsedInput=(string.match(getParseRegexForToken(token,config))||[])[0])&&(0<(skipped=string.substr(0,string.indexOf(parsedInput))).length&&getParsingFlags(config).unusedInput.push(skipped),string=string.slice(string.indexOf(parsedInput)+parsedInput.length),totalParsedInputLength+=parsedInput.length),formatTokenFunctions[token]?(parsedInput?getParsingFlags(config).empty=!1:getParsingFlags(config).unusedTokens.push(token),addTimeToArrayFromToken(token,parsedInput,config)):config._strict&&!parsedInput&&getParsingFlags(config).unusedTokens.push(token);getParsingFlags(config).charsLeftOver=stringLength-totalParsedInputLength,0<string.length&&getParsingFlags(config).unusedInput.push(string),!0===getParsingFlags(config).bigHour&&config._a[HOUR]<=12&&0<config._a[HOUR]&&(getParsingFlags(config).bigHour=void 0),config._a[HOUR]=function(locale,hour,meridiem){var isPm;if(null==meridiem)return hour;return null!=locale.meridiemHour?locale.meridiemHour(hour,meridiem):(null!=locale.isPM&&((isPm=locale.isPM(meridiem))&&hour<12&&(hour+=12),isPm||12!==hour||(hour=0)),hour)}(config._locale,config._a[HOUR],config._meridiem),configFromArray(config),checkOverflow(config)}else configFromISO(config)}function prepareConfig(config){var input=config._i,format=config._f;return config._locale=config._locale||locale_locales__getLocale(config._l),null===input||void 0===format&&""===input?valid__createInvalid({nullInput:!0}):("string"==typeof input&&(config._i=input=config._locale.preparse(input)),isMoment(input)?new Moment(checkOverflow(input)):(isArray(format)?function(config){var tempConfig,bestMoment,scoreToBeat,i,currentScore;if(0===config._f.length)return getParsingFlags(config).invalidFormat=!0,config._d=new Date(NaN);for(i=0;i<config._f.length;i++)currentScore=0,tempConfig=copyConfig({},config),null!=config._useUTC&&(tempConfig._useUTC=config._useUTC),tempConfig._f=config._f[i],configFromStringAndFormat(tempConfig),valid__isValid(tempConfig)&&(currentScore+=getParsingFlags(tempConfig).charsLeftOver,currentScore+=10*getParsingFlags(tempConfig).unusedTokens.length,getParsingFlags(tempConfig).score=currentScore,(null==scoreToBeat||currentScore<scoreToBeat)&&(scoreToBeat=currentScore,bestMoment=tempConfig));extend(config,bestMoment||tempConfig)}(config):format?configFromStringAndFormat(config):isDate(input)?config._d=input:function(config){var input=config._i;void 0===input?config._d=new Date:isDate(input)?config._d=new Date(+input):"string"==typeof input?function(config){var matched=aspNetJsonRegex.exec(config._i);null===matched?(configFromISO(config),!1===config._isValid&&(delete config._isValid,utils_hooks__hooks.createFromInputFallback(config))):config._d=new Date(+matched[1])}(config):isArray(input)?(config._a=function(arr,fn){var i,res=[];for(i=0;i<arr.length;++i)res.push(fn(arr[i],i));return res}(input.slice(0),function(obj){return parseInt(obj,10)}),configFromArray(config)):"object"==typeof input?function(config){if(!config._d){var i=normalizeObjectUnits(config._i);config._a=[i.year,i.month,i.day||i.date,i.hour,i.minute,i.second,i.millisecond],configFromArray(config)}}(config):"number"==typeof input?config._d=new Date(input):utils_hooks__hooks.createFromInputFallback(config)}(config),config))}function createLocalOrUTC(input,format,locale,strict,isUTC){var res,c={};return"boolean"==typeof locale&&(strict=locale,locale=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=isUTC,c._l=locale,c._i=input,c._f=format,c._strict=strict,(res=new Moment(checkOverflow(prepareConfig(c))))._nextDay&&(res.add(1,"d"),res._nextDay=void 0),res}function local__createLocal(input,format,locale,strict){return createLocalOrUTC(input,format,locale,strict,!1)}addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear"),addUnitAlias("dayOfYear","DDD"),addRegexToken("DDD",match1to3),addRegexToken("DDDD",match3),addParseToken(["DDD","DDDD"],function(input,array,config){config._dayOfYear=toInt(input)}),utils_hooks__hooks.ISO_8601=function(){};var prototypeMin=deprecate("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return other<this?this:other}),prototypeMax=deprecate("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var other=local__createLocal.apply(null,arguments);return this<other?this:other});function pickBy(fn,moments){var res,i;if(1===moments.length&&isArray(moments[0])&&(moments=moments[0]),!moments.length)return local__createLocal();for(res=moments[0],i=1;i<moments.length;++i)moments[i].isValid()&&!moments[i][fn](res)||(res=moments[i]);return res}function Duration(duration){var normalizedInput=normalizeObjectUnits(duration),years=normalizedInput.year||0,quarters=normalizedInput.quarter||0,months=normalizedInput.month||0,weeks=normalizedInput.week||0,days=normalizedInput.day||0,hours=normalizedInput.hour||0,minutes=normalizedInput.minute||0,seconds=normalizedInput.second||0,milliseconds=normalizedInput.millisecond||0;this._milliseconds=+milliseconds+1e3*seconds+6e4*minutes+36e5*hours,this._days=+days+7*weeks,this._months=+months+3*quarters+12*years,this._data={},this._locale=locale_locales__getLocale(),this._bubble()}function isDuration(obj){return obj instanceof Duration}function offset(token,separator){addFormatToken(token,0,0,function(){var offset=this.utcOffset(),sign="+";return offset<0&&(offset=-offset,sign="-"),sign+zeroFill(~~(offset/60),2)+separator+zeroFill(~~offset%60,2)})}offset("Z",":"),offset("ZZ",""),addRegexToken("Z",matchOffset),addRegexToken("ZZ",matchOffset),addParseToken(["Z","ZZ"],function(input,array,config){config._useUTC=!0,config._tzm=offsetFromString(input)});var chunkOffset=/([\+\-]|\d\d)/gi;function offsetFromString(string){var matches=(string||"").match(matchOffset)||[],parts=((matches[matches.length-1]||[])+"").match(chunkOffset)||["-",0,0],minutes=60*parts[1]+toInt(parts[2]);return"+"===parts[0]?minutes:-minutes}function cloneWithOffset(input,model){var res,diff;return model._isUTC?(res=model.clone(),diff=(isMoment(input)||isDate(input)?+input:+local__createLocal(input))-+res,res._d.setTime(+res._d+diff),utils_hooks__hooks.updateOffset(res,!1),res):local__createLocal(input).local()}function getDateOffset(m){return 15*-Math.round(m._d.getTimezoneOffset()/15)}function isUtc(){return this._isUTC&&0===this._offset}utils_hooks__hooks.updateOffset=function(){};var aspNetRegex=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,create__isoRegex=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;function create__createDuration(input,key){var sign,ret,diffRes,duration=input,match=null;return isDuration(input)?duration={ms:input._milliseconds,d:input._days,M:input._months}:"number"==typeof input?(duration={},key?duration[key]=input:duration.milliseconds=input):(match=aspNetRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:0,d:toInt(match[DATE])*sign,h:toInt(match[HOUR])*sign,m:toInt(match[MINUTE])*sign,s:toInt(match[SECOND])*sign,ms:toInt(match[MILLISECOND])*sign}):(match=create__isoRegex.exec(input))?(sign="-"===match[1]?-1:1,duration={y:parseIso(match[2],sign),M:parseIso(match[3],sign),d:parseIso(match[4],sign),h:parseIso(match[5],sign),m:parseIso(match[6],sign),s:parseIso(match[7],sign),w:parseIso(match[8],sign)}):null==duration?duration={}:"object"==typeof duration&&("from"in duration||"to"in duration)&&(diffRes=function(base,other){var res;other=cloneWithOffset(other,base),base.isBefore(other)?res=positiveMomentsDifference(base,other):((res=positiveMomentsDifference(other,base)).milliseconds=-res.milliseconds,res.months=-res.months);return res}(local__createLocal(duration.from),local__createLocal(duration.to)),(duration={}).ms=diffRes.milliseconds,duration.M=diffRes.months),ret=new Duration(duration),isDuration(input)&&hasOwnProp(input,"_locale")&&(ret._locale=input._locale),ret}function parseIso(inp,sign){var res=inp&&parseFloat(inp.replace(",","."));return(isNaN(res)?0:res)*sign}function positiveMomentsDifference(base,other){var res={milliseconds:0,months:0};return res.months=other.month()-base.month()+12*(other.year()-base.year()),base.clone().add(res.months,"M").isAfter(other)&&--res.months,res.milliseconds=+other-+base.clone().add(res.months,"M"),res}function createAdder(direction,name){return function(val,period){var tmp;return null===period||isNaN(+period)||(!function(name,msg){deprecations[name]||(warn(msg),deprecations[name]=!0)}(name,"moment()."+name+"(period, number) is deprecated. Please use moment()."+name+"(number, period)."),tmp=val,val=period,period=tmp),add_subtract__addSubtract(this,create__createDuration(val="string"==typeof val?+val:val,period),direction),this}}function add_subtract__addSubtract(mom,duration,isAdding,updateOffset){var milliseconds=duration._milliseconds,days=duration._days,months=duration._months;updateOffset=null==updateOffset||updateOffset,milliseconds&&mom._d.setTime(+mom._d+milliseconds*isAdding),days&&get_set__set(mom,"Date",get_set__get(mom,"Date")+days*isAdding),months&&setMonth(mom,get_set__get(mom,"Month")+months*isAdding),updateOffset&&utils_hooks__hooks.updateOffset(mom,days||months)}create__createDuration.fn=Duration.prototype;var add_subtract__add=createAdder(1,"add"),add_subtract__subtract=createAdder(-1,"subtract");function moment_format__toISOString(){var m=this.clone().utc();return 0<m.year()&&m.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():formatMoment(m,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):formatMoment(m,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function locale(key){var newLocaleData;return void 0===key?this._locale._abbr:(null!=(newLocaleData=locale_locales__getLocale(key))&&(this._locale=newLocaleData),this)}utils_hooks__hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var lang=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(key){return void 0===key?this.localeData():this.locale(key)});function localeData(){return this._locale}function addWeekYearFormatToken(token,getter){addFormatToken(0,[token,token.length],0,getter)}function weeksInYear(year,dow,doy){return weekOfYear(local__createLocal([year,11,31+dow-doy]),dow,doy).week}addFormatToken(0,["gg",2],0,function(){return this.weekYear()%100}),addFormatToken(0,["GG",2],0,function(){return this.isoWeekYear()%100}),addWeekYearFormatToken("gggg","weekYear"),addWeekYearFormatToken("ggggg","weekYear"),addWeekYearFormatToken("GGGG","isoWeekYear"),addWeekYearFormatToken("GGGGG","isoWeekYear"),addUnitAlias("weekYear","gg"),addUnitAlias("isoWeekYear","GG"),addRegexToken("G",matchSigned),addRegexToken("g",matchSigned),addRegexToken("GG",match1to2,match2),addRegexToken("gg",match1to2,match2),addRegexToken("GGGG",match1to4,match4),addRegexToken("gggg",match1to4,match4),addRegexToken("GGGGG",match1to6,match6),addRegexToken("ggggg",match1to6,match6),addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],function(input,week,config,token){week[token.substr(0,2)]=toInt(input)}),addWeekParseToken(["gg","GG"],function(input,week,config,token){week[token]=utils_hooks__hooks.parseTwoDigitYear(input)}),addFormatToken("Q",0,0,"quarter"),addUnitAlias("quarter","Q"),addRegexToken("Q",match1),addParseToken("Q",function(input,array){array[MONTH]=3*(toInt(input)-1)}),addFormatToken("D",["DD",2],"Do","date"),addUnitAlias("date","D"),addRegexToken("D",match1to2),addRegexToken("DD",match1to2,match2),addRegexToken("Do",function(isStrict,locale){return isStrict?locale._ordinalParse:locale._ordinalParseLenient}),addParseToken(["D","DD"],DATE),addParseToken("Do",function(input,array){array[DATE]=toInt(input.match(match1to2)[0])});var getSetDayOfMonth=makeGetSet("Date",!0);addFormatToken("d",0,"do","day"),addFormatToken("dd",0,0,function(format){return this.localeData().weekdaysMin(this,format)}),addFormatToken("ddd",0,0,function(format){return this.localeData().weekdaysShort(this,format)}),addFormatToken("dddd",0,0,function(format){return this.localeData().weekdays(this,format)}),addFormatToken("e",0,0,"weekday"),addFormatToken("E",0,0,"isoWeekday"),addUnitAlias("day","d"),addUnitAlias("weekday","e"),addUnitAlias("isoWeekday","E"),addRegexToken("d",match1to2),addRegexToken("e",match1to2),addRegexToken("E",match1to2),addRegexToken("dd",matchWord),addRegexToken("ddd",matchWord),addRegexToken("dddd",matchWord),addWeekParseToken(["dd","ddd","dddd"],function(input,week,config){var weekday=config._locale.weekdaysParse(input);null!=weekday?week.d=weekday:getParsingFlags(config).invalidWeekday=input}),addWeekParseToken(["d","e","E"],function(input,week,config,token){week[token]=toInt(input)});var defaultLocaleWeekdays="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var defaultLocaleWeekdaysShort="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var defaultLocaleWeekdaysMin="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function meridiem(token,lowercase){addFormatToken(token,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),lowercase)})}function matchMeridiem(isStrict,locale){return locale._meridiemParse}addFormatToken("H",["HH",2],0,"hour"),addFormatToken("h",["hh",2],0,function(){return this.hours()%12||12}),meridiem("a",!0),meridiem("A",!1),addUnitAlias("hour","h"),addRegexToken("a",matchMeridiem),addRegexToken("A",matchMeridiem),addRegexToken("H",match1to2),addRegexToken("h",match1to2),addRegexToken("HH",match1to2,match2),addRegexToken("hh",match1to2,match2),addParseToken(["H","HH"],HOUR),addParseToken(["a","A"],function(input,array,config){config._isPm=config._locale.isPM(input),config._meridiem=input}),addParseToken(["h","hh"],function(input,array,config){array[HOUR]=toInt(input),getParsingFlags(config).bigHour=!0});var getSetHour=makeGetSet("Hours",!0);addFormatToken("m",["mm",2],0,"minute"),addUnitAlias("minute","m"),addRegexToken("m",match1to2),addRegexToken("mm",match1to2,match2),addParseToken(["m","mm"],MINUTE);var getSetMinute=makeGetSet("Minutes",!1);addFormatToken("s",["ss",2],0,"second"),addUnitAlias("second","s"),addRegexToken("s",match1to2),addRegexToken("ss",match1to2,match2),addParseToken(["s","ss"],SECOND);var token,getSetSecond=makeGetSet("Seconds",!1);for(addFormatToken("S",0,0,function(){return~~(this.millisecond()/100)}),addFormatToken(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),addFormatToken(0,["SSS",3],0,"millisecond"),addFormatToken(0,["SSSS",4],0,function(){return 10*this.millisecond()}),addFormatToken(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),addFormatToken(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),addFormatToken(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),addFormatToken(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),addFormatToken(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),addUnitAlias("millisecond","ms"),addRegexToken("S",match1to3,match1),addRegexToken("SS",match1to3,match2),addRegexToken("SSS",match1to3,match3),token="SSSS";token.length<=9;token+="S")addRegexToken(token,matchUnsigned);function parseMs(input,array){array[MILLISECOND]=toInt(1e3*("0."+input))}for(token="S";token.length<=9;token+="S")addParseToken(token,parseMs);var getSetMillisecond=makeGetSet("Milliseconds",!1);addFormatToken("z",0,0,"zoneAbbr"),addFormatToken("zz",0,0,"zoneName");var momentPrototype__proto=Moment.prototype;momentPrototype__proto.add=add_subtract__add,momentPrototype__proto.calendar=function(time,formats){var now=time||local__createLocal(),sod=cloneWithOffset(now,this).startOf("day"),diff=this.diff(sod,"days",!0),format=diff<-6?"sameElse":diff<-1?"lastWeek":diff<0?"lastDay":diff<1?"sameDay":diff<2?"nextDay":diff<7?"nextWeek":"sameElse";return this.format(formats&&formats[format]||this.localeData().calendar(format,this,local__createLocal(now)))},momentPrototype__proto.clone=function(){return new Moment(this)},momentPrototype__proto.diff=function(input,units,asFloat){var delta,output,that=cloneWithOffset(input,this),zoneDelta=6e4*(that.utcOffset()-this.utcOffset());return"year"===(units=normalizeUnits(units))||"month"===units||"quarter"===units?(a=this,b=that,wholeMonthDiff=12*(b.year()-a.year())+(b.month()-a.month()),anchor=a.clone().add(wholeMonthDiff,"months"),adjust=b-anchor<0?(anchor2=a.clone().add(wholeMonthDiff-1,"months"),(b-anchor)/(anchor-anchor2)):(anchor2=a.clone().add(wholeMonthDiff+1,"months"),(b-anchor)/(anchor2-anchor)),output=-(wholeMonthDiff+adjust),"quarter"===units?output/=3:"year"===units&&(output/=12)):(delta=this-that,output="second"===units?delta/1e3:"minute"===units?delta/6e4:"hour"===units?delta/36e5:"day"===units?(delta-zoneDelta)/864e5:"week"===units?(delta-zoneDelta)/6048e5:delta),asFloat?output:absFloor(output);var a,b,anchor2,adjust,wholeMonthDiff,anchor},momentPrototype__proto.endOf=function(units){return void 0===(units=normalizeUnits(units))||"millisecond"===units?this:this.startOf(units).add(1,"isoWeek"===units?"week":units).subtract(1,"ms")},momentPrototype__proto.format=function(inputString){var output=formatMoment(this,inputString||utils_hooks__hooks.defaultFormat);return this.localeData().postformat(output)},momentPrototype__proto.from=function(time,withoutSuffix){return this.isValid()?create__createDuration({to:this,from:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()},momentPrototype__proto.fromNow=function(withoutSuffix){return this.from(local__createLocal(),withoutSuffix)},momentPrototype__proto.to=function(time,withoutSuffix){return this.isValid()?create__createDuration({from:this,to:time}).locale(this.locale()).humanize(!withoutSuffix):this.localeData().invalidDate()},momentPrototype__proto.toNow=function(withoutSuffix){return this.to(local__createLocal(),withoutSuffix)},momentPrototype__proto.get=getSet,momentPrototype__proto.invalidAt=function(){return getParsingFlags(this).overflow},momentPrototype__proto.isAfter=function(input,units){return"millisecond"===(units=normalizeUnits(void 0!==units?units:"millisecond"))?+(input=isMoment(input)?input:local__createLocal(input))<+this:(isMoment(input)?+input:+local__createLocal(input))<+this.clone().startOf(units)},momentPrototype__proto.isBefore=function(input,units){var inputMs;return"millisecond"===(units=normalizeUnits(void 0!==units?units:"millisecond"))?+this<+(input=isMoment(input)?input:local__createLocal(input)):(inputMs=isMoment(input)?+input:+local__createLocal(input),+this.clone().endOf(units)<inputMs)},momentPrototype__proto.isBetween=function(from,to,units){return this.isAfter(from,units)&&this.isBefore(to,units)},momentPrototype__proto.isSame=function(input,units){var inputMs;return"millisecond"===(units=normalizeUnits(units||"millisecond"))?+this==+(input=isMoment(input)?input:local__createLocal(input)):(inputMs=+local__createLocal(input),+this.clone().startOf(units)<=inputMs&&inputMs<=+this.clone().endOf(units))},momentPrototype__proto.isValid=function(){return valid__isValid(this)},momentPrototype__proto.lang=lang,momentPrototype__proto.locale=locale,momentPrototype__proto.localeData=localeData,momentPrototype__proto.max=prototypeMax,momentPrototype__proto.min=prototypeMin,momentPrototype__proto.parsingFlags=function(){return extend({},getParsingFlags(this))},momentPrototype__proto.set=getSet,momentPrototype__proto.startOf=function(units){switch(units=normalizeUnits(units)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===units&&this.weekday(0),"isoWeek"===units&&this.isoWeekday(1),"quarter"===units&&this.month(3*Math.floor(this.month()/3)),this},momentPrototype__proto.subtract=add_subtract__subtract,momentPrototype__proto.toArray=function(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]},momentPrototype__proto.toObject=function(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}},momentPrototype__proto.toDate=function(){return this._offset?new Date(+this):this._d},momentPrototype__proto.toISOString=moment_format__toISOString,momentPrototype__proto.toJSON=moment_format__toISOString,momentPrototype__proto.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},momentPrototype__proto.unix=function(){return Math.floor(+this/1e3)},momentPrototype__proto.valueOf=function(){return+this._d-6e4*(this._offset||0)},momentPrototype__proto.year=getSetYear,momentPrototype__proto.isLeapYear=function(){return isLeapYear(this.year())},momentPrototype__proto.weekYear=function(input){var year=weekOfYear(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==input?year:this.add(input-year,"y")},momentPrototype__proto.isoWeekYear=function(input){var year=weekOfYear(this,1,4).year;return null==input?year:this.add(input-year,"y")},momentPrototype__proto.quarter=momentPrototype__proto.quarters=function(input){return null==input?Math.ceil((this.month()+1)/3):this.month(3*(input-1)+this.month()%3)},momentPrototype__proto.month=getSetMonth,momentPrototype__proto.daysInMonth=function(){return daysInMonth(this.year(),this.month())},momentPrototype__proto.week=momentPrototype__proto.weeks=function(input){var week=this.localeData().week(this);return null==input?week:this.add(7*(input-week),"d")},momentPrototype__proto.isoWeek=momentPrototype__proto.isoWeeks=function(input){var week=weekOfYear(this,1,4).week;return null==input?week:this.add(7*(input-week),"d")},momentPrototype__proto.weeksInYear=function(){var weekInfo=this.localeData()._week;return weeksInYear(this.year(),weekInfo.dow,weekInfo.doy)},momentPrototype__proto.isoWeeksInYear=function(){return weeksInYear(this.year(),1,4)},momentPrototype__proto.date=getSetDayOfMonth,momentPrototype__proto.day=momentPrototype__proto.days=function(input){var day=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=input?(input=function(input,locale){return"string"!=typeof input?input:isNaN(input)?"number"==typeof(input=locale.weekdaysParse(input))?input:null:parseInt(input,10)}(input,this.localeData()),this.add(input-day,"d")):day},momentPrototype__proto.weekday=function(input){var weekday=(this.day()+7-this.localeData()._week.dow)%7;return null==input?weekday:this.add(input-weekday,"d")},momentPrototype__proto.isoWeekday=function(input){return null==input?this.day()||7:this.day(this.day()%7?input:input-7)},momentPrototype__proto.dayOfYear=function(input){var dayOfYear=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==input?dayOfYear:this.add(input-dayOfYear,"d")},momentPrototype__proto.hour=momentPrototype__proto.hours=getSetHour,momentPrototype__proto.minute=momentPrototype__proto.minutes=getSetMinute,momentPrototype__proto.second=momentPrototype__proto.seconds=getSetSecond,momentPrototype__proto.millisecond=momentPrototype__proto.milliseconds=getSetMillisecond,momentPrototype__proto.utcOffset=function(input,keepLocalTime){var localAdjust,offset=this._offset||0;return null!=input?("string"==typeof input&&(input=offsetFromString(input)),Math.abs(input)<16&&(input*=60),!this._isUTC&&keepLocalTime&&(localAdjust=getDateOffset(this)),this._offset=input,this._isUTC=!0,null!=localAdjust&&this.add(localAdjust,"m"),offset!==input&&(!keepLocalTime||this._changeInProgress?add_subtract__addSubtract(this,create__createDuration(input-offset,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,utils_hooks__hooks.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?offset:getDateOffset(this)},momentPrototype__proto.utc=function(keepLocalTime){return this.utcOffset(0,keepLocalTime)},momentPrototype__proto.local=function(keepLocalTime){return this._isUTC&&(this.utcOffset(0,keepLocalTime),this._isUTC=!1,keepLocalTime&&this.subtract(getDateOffset(this),"m")),this},momentPrototype__proto.parseZone=function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(offsetFromString(this._i)),this},momentPrototype__proto.hasAlignedHourOffset=function(input){return input=input?local__createLocal(input).utcOffset():0,(this.utcOffset()-input)%60==0},momentPrototype__proto.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},momentPrototype__proto.isDSTShifted=function(){if(void 0!==this._isDSTShifted)return this._isDSTShifted;var c={};if(copyConfig(c,this),(c=prepareConfig(c))._a){var other=c._isUTC?create_utc__createUTC(c._a):local__createLocal(c._a);this._isDSTShifted=this.isValid()&&0<compareArrays(c._a,other.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted},momentPrototype__proto.isLocal=function(){return!this._isUTC},momentPrototype__proto.isUtcOffset=function(){return this._isUTC},momentPrototype__proto.isUtc=isUtc,momentPrototype__proto.isUTC=isUtc,momentPrototype__proto.zoneAbbr=function(){return this._isUTC?"UTC":""},momentPrototype__proto.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},momentPrototype__proto.dates=deprecate("dates accessor is deprecated. Use date instead.",getSetDayOfMonth),momentPrototype__proto.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth),momentPrototype__proto.years=deprecate("years accessor is deprecated. Use year instead",getSetYear),momentPrototype__proto.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(input,keepLocalTime){return null!=input?("string"!=typeof input&&(input=-input),this.utcOffset(input,keepLocalTime),this):-this.utcOffset()});var momentPrototype=momentPrototype__proto;function preParsePostFormat(string){return string}var prototype__proto=Locale.prototype;function lists__get(format,index,field,setter){var locale=locale_locales__getLocale(),utc=create_utc__createUTC().set(setter,index);return locale[field](utc,format)}function list(format,index,field,count,setter){if("number"==typeof format&&(index=format,format=void 0),format=format||"",null!=index)return lists__get(format,index,field,setter);var i,out=[];for(i=0;i<count;i++)out[i]=lists__get(format,i,field,setter);return out}prototype__proto._calendar={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},prototype__proto.calendar=function(key,mom,now){var output=this._calendar[key];return"function"==typeof output?output.call(mom,now):output},prototype__proto._longDateFormat={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},prototype__proto.longDateFormat=function(key){var format=this._longDateFormat[key],formatUpper=this._longDateFormat[key.toUpperCase()];return format||!formatUpper?format:(this._longDateFormat[key]=formatUpper.replace(/MMMM|MM|DD|dddd/g,function(val){return val.slice(1)}),this._longDateFormat[key])},prototype__proto._invalidDate="Invalid date",prototype__proto.invalidDate=function(){return this._invalidDate},prototype__proto._ordinal="%d",prototype__proto.ordinal=function(number){return this._ordinal.replace("%d",number)},prototype__proto._ordinalParse=/\d{1,2}/,prototype__proto.preparse=preParsePostFormat,prototype__proto.postformat=preParsePostFormat,prototype__proto._relativeTime={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},prototype__proto.relativeTime=function(number,withoutSuffix,string,isFuture){var output=this._relativeTime[string];return"function"==typeof output?output(number,withoutSuffix,string,isFuture):output.replace(/%d/i,number)},prototype__proto.pastFuture=function(diff,output){var format=this._relativeTime[0<diff?"future":"past"];return"function"==typeof format?format(output):format.replace(/%s/i,output)},prototype__proto.set=function(config){var prop,i;for(i in config)"function"==typeof(prop=config[i])?this[i]=prop:this["_"+i]=prop;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},prototype__proto.months=function(m){return this._months[m.month()]},prototype__proto._months=defaultLocaleMonths,prototype__proto.monthsShort=function(m){return this._monthsShort[m.month()]},prototype__proto._monthsShort=defaultLocaleMonthsShort,prototype__proto.monthsParse=function(monthName,format,strict){var i,mom,regex;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(mom=create_utc__createUTC([2e3,i]),strict&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(mom,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(mom,"").replace(".","")+"$","i")),strict||this._monthsParse[i]||(regex="^"+this.months(mom,"")+"|^"+this.monthsShort(mom,""),this._monthsParse[i]=new RegExp(regex.replace(".",""),"i")),strict&&"MMMM"===format&&this._longMonthsParse[i].test(monthName))return i;if(strict&&"MMM"===format&&this._shortMonthsParse[i].test(monthName))return i;if(!strict&&this._monthsParse[i].test(monthName))return i}},prototype__proto.week=function(mom){return weekOfYear(mom,this._week.dow,this._week.doy).week},prototype__proto._week={dow:0,doy:6},prototype__proto.firstDayOfYear=function(){return this._week.doy},prototype__proto.firstDayOfWeek=function(){return this._week.dow},prototype__proto.weekdays=function(m){return this._weekdays[m.day()]},prototype__proto._weekdays=defaultLocaleWeekdays,prototype__proto.weekdaysMin=function(m){return this._weekdaysMin[m.day()]},prototype__proto._weekdaysMin=defaultLocaleWeekdaysMin,prototype__proto.weekdaysShort=function(m){return this._weekdaysShort[m.day()]},prototype__proto._weekdaysShort=defaultLocaleWeekdaysShort,prototype__proto.weekdaysParse=function(weekdayName){var i,mom,regex;for(this._weekdaysParse=this._weekdaysParse||[],i=0;i<7;i++)if(this._weekdaysParse[i]||(mom=local__createLocal([2e3,1]).day(i),regex="^"+this.weekdays(mom,"")+"|^"+this.weekdaysShort(mom,"")+"|^"+this.weekdaysMin(mom,""),this._weekdaysParse[i]=new RegExp(regex.replace(".",""),"i")),this._weekdaysParse[i].test(weekdayName))return i},prototype__proto.isPM=function(input){return"p"===(input+"").toLowerCase().charAt(0)},prototype__proto._meridiemParse=/[ap]\.?m?\.?/i,prototype__proto.meridiem=function(hours,minutes,isLower){return 11<hours?isLower?"pm":"PM":isLower?"am":"AM"},locale_locales__getSetGlobalLocale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(number){var b=number%10;return number+(1===toInt(number%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th")}}),utils_hooks__hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",locale_locales__getSetGlobalLocale),utils_hooks__hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",locale_locales__getLocale);var mathAbs=Math.abs;function duration_add_subtract__addSubtract(duration,input,value,direction){var other=create__createDuration(input,value);return duration._milliseconds+=direction*other._milliseconds,duration._days+=direction*other._days,duration._months+=direction*other._months,duration._bubble()}function absCeil(number){return number<0?Math.floor(number):Math.ceil(number)}function daysToMonths(days){return 4800*days/146097}function monthsToDays(months){return 146097*months/4800}function makeAs(alias){return function(){return this.as(alias)}}var asMilliseconds=makeAs("ms"),asSeconds=makeAs("s"),asMinutes=makeAs("m"),asHours=makeAs("h"),asDays=makeAs("d"),asWeeks=makeAs("w"),asMonths=makeAs("M"),asYears=makeAs("y");function makeGetter(name){return function(){return this._data[name]}}var milliseconds=makeGetter("milliseconds"),seconds=makeGetter("seconds"),minutes=makeGetter("minutes"),hours=makeGetter("hours"),days=makeGetter("days"),months=makeGetter("months"),years=makeGetter("years");var round=Math.round,thresholds={s:45,m:45,h:22,d:26,M:11};var iso_string__abs=Math.abs;function iso_string__toISOString(){var minutes,hours,seconds=iso_string__abs(this._milliseconds)/1e3,days=iso_string__abs(this._days),months=iso_string__abs(this._months);hours=absFloor((minutes=absFloor(seconds/60))/60),seconds%=60,minutes%=60;var Y=absFloor(months/12),M=months%=12,D=days,h=hours,m=minutes,s=seconds,total=this.asSeconds();return total?(total<0?"-":"")+"P"+(Y?Y+"Y":"")+(M?M+"M":"")+(D?D+"D":"")+(h||m||s?"T":"")+(h?h+"H":"")+(m?m+"M":"")+(s?s+"S":""):"P0D"}var duration_prototype__proto=Duration.prototype;return duration_prototype__proto.abs=function(){var data=this._data;return this._milliseconds=mathAbs(this._milliseconds),this._days=mathAbs(this._days),this._months=mathAbs(this._months),data.milliseconds=mathAbs(data.milliseconds),data.seconds=mathAbs(data.seconds),data.minutes=mathAbs(data.minutes),data.hours=mathAbs(data.hours),data.months=mathAbs(data.months),data.years=mathAbs(data.years),this},duration_prototype__proto.add=function(input,value){return duration_add_subtract__addSubtract(this,input,value,1)},duration_prototype__proto.subtract=function(input,value){return duration_add_subtract__addSubtract(this,input,value,-1)},duration_prototype__proto.as=function(units){var days,months,milliseconds=this._milliseconds;if("month"===(units=normalizeUnits(units))||"year"===units)return days=this._days+milliseconds/864e5,months=this._months+daysToMonths(days),"month"===units?months:months/12;switch(days=this._days+Math.round(monthsToDays(this._months)),units){case"week":return days/7+milliseconds/6048e5;case"day":return days+milliseconds/864e5;case"hour":return 24*days+milliseconds/36e5;case"minute":return 1440*days+milliseconds/6e4;case"second":return 86400*days+milliseconds/1e3;case"millisecond":return Math.floor(864e5*days)+milliseconds;default:throw new Error("Unknown unit "+units)}},duration_prototype__proto.asMilliseconds=asMilliseconds,duration_prototype__proto.asSeconds=asSeconds,duration_prototype__proto.asMinutes=asMinutes,duration_prototype__proto.asHours=asHours,duration_prototype__proto.asDays=asDays,duration_prototype__proto.asWeeks=asWeeks,duration_prototype__proto.asMonths=asMonths,duration_prototype__proto.asYears=asYears,duration_prototype__proto.valueOf=function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*toInt(this._months/12)},duration_prototype__proto._bubble=function(){var seconds,minutes,hours,years,monthsFromDays,milliseconds=this._milliseconds,days=this._days,months=this._months,data=this._data;return 0<=milliseconds&&0<=days&&0<=months||milliseconds<=0&&days<=0&&months<=0||(milliseconds+=864e5*absCeil(monthsToDays(months)+days),months=days=0),data.milliseconds=milliseconds%1e3,seconds=absFloor(milliseconds/1e3),data.seconds=seconds%60,minutes=absFloor(seconds/60),data.minutes=minutes%60,hours=absFloor(minutes/60),data.hours=hours%24,months+=monthsFromDays=absFloor(daysToMonths(days+=absFloor(hours/24))),days-=absCeil(monthsToDays(monthsFromDays)),years=absFloor(months/12),months%=12,data.days=days,data.months=months,data.years=years,this},duration_prototype__proto.get=function(units){return this[(units=normalizeUnits(units))+"s"]()},duration_prototype__proto.milliseconds=milliseconds,duration_prototype__proto.seconds=seconds,duration_prototype__proto.minutes=minutes,duration_prototype__proto.hours=hours,duration_prototype__proto.days=days,duration_prototype__proto.weeks=function(){return absFloor(this.days()/7)},duration_prototype__proto.months=months,duration_prototype__proto.years=years,duration_prototype__proto.humanize=function(withSuffix){var locale=this.localeData(),output=function(posNegDuration,withoutSuffix,locale){var duration=create__createDuration(posNegDuration).abs(),seconds=round(duration.as("s")),minutes=round(duration.as("m")),hours=round(duration.as("h")),days=round(duration.as("d")),months=round(duration.as("M")),years=round(duration.as("y")),a=seconds<thresholds.s&&["s",seconds]||1===minutes&&["m"]||minutes<thresholds.m&&["mm",minutes]||1===hours&&["h"]||hours<thresholds.h&&["hh",hours]||1===days&&["d"]||days<thresholds.d&&["dd",days]||1===months&&["M"]||months<thresholds.M&&["MM",months]||1===years&&["y"]||["yy",years];return a[2]=withoutSuffix,a[3]=0<+posNegDuration,a[4]=locale,function(string,number,withoutSuffix,isFuture,locale){return locale.relativeTime(number||1,!!withoutSuffix,string,isFuture)}.apply(null,a)}(this,!withSuffix,locale);return withSuffix&&(output=locale.pastFuture(+this,output)),locale.postformat(output)},duration_prototype__proto.toISOString=iso_string__toISOString,duration_prototype__proto.toString=iso_string__toISOString,duration_prototype__proto.toJSON=iso_string__toISOString,duration_prototype__proto.locale=locale,duration_prototype__proto.localeData=localeData,duration_prototype__proto.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",iso_string__toISOString),duration_prototype__proto.lang=lang,addFormatToken("X",0,0,"unix"),addFormatToken("x",0,0,"valueOf"),addRegexToken("x",matchSigned),addRegexToken("X",/[+-]?\d+(\.\d{1,3})?/),addParseToken("X",function(input,array,config){config._d=new Date(1e3*parseFloat(input,10))}),addParseToken("x",function(input,array,config){config._d=new Date(toInt(input))}),utils_hooks__hooks.version="2.10.6",hookCallback=local__createLocal,utils_hooks__hooks.fn=momentPrototype,utils_hooks__hooks.min=function(){return pickBy("isBefore",[].slice.call(arguments,0))},utils_hooks__hooks.max=function(){return pickBy("isAfter",[].slice.call(arguments,0))},utils_hooks__hooks.utc=create_utc__createUTC,utils_hooks__hooks.unix=function(input){return local__createLocal(1e3*input)},utils_hooks__hooks.months=function(format,index){return list(format,index,"months",12,"month")},utils_hooks__hooks.isDate=isDate,utils_hooks__hooks.locale=locale_locales__getSetGlobalLocale,utils_hooks__hooks.invalid=valid__createInvalid,utils_hooks__hooks.duration=create__createDuration,utils_hooks__hooks.isMoment=isMoment,utils_hooks__hooks.weekdays=function(format,index){return list(format,index,"weekdays",7,"day")},utils_hooks__hooks.parseZone=function(){return local__createLocal.apply(null,arguments).parseZone()},utils_hooks__hooks.localeData=locale_locales__getLocale,utils_hooks__hooks.isDuration=isDuration,utils_hooks__hooks.monthsShort=function(format,index){return list(format,index,"monthsShort",12,"month")},utils_hooks__hooks.weekdaysMin=function(format,index){return list(format,index,"weekdaysMin",7,"day")},utils_hooks__hooks.defineLocale=defineLocale,utils_hooks__hooks.weekdaysShort=function(format,index){return list(format,index,"weekdaysShort",7,"day")},utils_hooks__hooks.normalizeUnits=normalizeUnits,utils_hooks__hooks.relativeTimeThreshold=function(threshold,limit){return void 0!==thresholds[threshold]&&(void 0===limit?thresholds[threshold]:(thresholds[threshold]=limit,!0))},utils_hooks__hooks}),define("mockup-patterns-structure-url/js/views/tablerow",["jquery","underscore","backbone","mockup-patterns-structure-url/js/navigation","mockup-patterns-structure-url/js/views/actionmenu","text!mockup-patterns-structure-url/templates/tablerow.xml","mockup-utils","translate","moment"],function($,_,Backbone,Nav,ActionMenuView,TableRowTemplate,utils,_t,moment){"use strict";return Backbone.View.extend({tagName:"tr",className:"itemRow",template:_.template(TableRowTemplate),events:{"change input":"itemSelected","click td.title a.manage":"itemClicked"},initialize:function(options){this.options=options,this.app=options.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table,this.now=moment()},expired:function(data){return!!data.attributes.ExpirationDate&&moment(data.attributes.ExpirationDate).diff(this.now,"seconds")<0},ineffective:function(data){return!!data.attributes.EffectiveDate&&0<moment(data.attributes.EffectiveDate).diff(this.now,"seconds")},render:function(){var data=this.model.toJSON();data.selected=!1,this.selectedCollection.findWhere({UID:data.UID})&&(data.selected=!0),data.attributes=this.model.attributes,data.activeColumns=this.app.activeColumns,data.availableColumns=this.app.availableColumns,data.portal_type=data.portal_type?data.portal_type:"",data.contenttype=data.portal_type.toLowerCase().replace(/\.| /g,"-"),data._authenticator=utils.getAuthenticator(),data.thumb_scale=this.app.thumb_scale;var viewAction=this.app.typeToViewAction&&this.app.typeToViewAction[data.attributes.portal_type]||"";data.viewURL=data.attributes.getURL+viewAction,data._t=_t,data.expired=this.expired(data),data.ineffective=this.ineffective(data),this.$el.html(this.template(data));var attrs=this.model.attributes;this.$el.addClass("state-"+attrs.review_state).addClass("type-"+attrs.portal_type),attrs.is_folderish&&this.$el.addClass("folder"),this.$el.attr("data-path",data.path),this.$el.attr("data-UID",data.UID),this.$el.attr("data-id",data.id),this.$el.attr("data-type",data.portal_type),this.$el.attr("data-folderish",data.is_folderish),this.$el.removeClass("expired"),this.$el.removeClass("ineffective"),data.expired&&this.$el.addClass("expired"),data.ineffective&&this.$el.addClass("ineffective"),this.el.model=this.model;var canMove=!!this.app.options.moveUrl;return this.menu=new ActionMenuView({app:this.app,model:this.model,menuOptions:this.app.menuOptions,menuGenerator:this.app.menuGenerator,canMove:canMove}),$(".actionmenu-container",this.$el).append(this.menu.render().el),this},itemClicked:function(e){var key,keyEvent=this.app.keyEvent;key=keyEvent&&keyEvent.ctrlKey||!this.model.attributes.is_folderish?"other":"folder";var definition=this.app.options.tableRowItemAction[key]||[],libName=definition[0],method=definition[1];if("string"!=typeof libName||"string"!=typeof key)return null;var lib=new(require(libName))(this);return lib[method]&&lib[method](e)},itemSelected:function(){var checkbox=this.$("input")[0];checkbox.checked?this.app.selectedCollection.add(this.model.clone()):this.app.selectedCollection.removeResult(this.model);var selectedCollection=this.selectedCollection,keyEvent=this.app.keyEvent;if(keyEvent&&keyEvent.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode){var $el=$(this.app.last_selected),lastCheckedIndex=$el.index(),thisIndex=this.$el.index();this.app.tableView.$('input[type="checkbox"]').each(function(){var index=($el=$(this)).parents("tr").index();if(lastCheckedIndex<index&&index<thisIndex||index<lastCheckedIndex&&thisIndex<index){this.checked=checkbox.checked;var $tr=$(this).closest("tr.itemRow");if(0<$tr.length){var model=$tr[0].model,existing=selectedCollection.getByUID(model.attributes.UID);this.checked?existing||selectedCollection.add(model.clone()):existing&&selectedCollection.removeResult(existing)}}})}this.app.last_selected=this.el}})}),define("text!mockup-patterns-structure-url/templates/table.xml",[],function(){return'<div class="alert alert-<%- status.type %> status">\n  <strong><%- status.label %></strong>\n  <span><%- status.text %></span>&nbsp;<% // &nbsp; to get correct height for empty alerts %>\n</div>\n\n<div class="fc-breadcrumbs-container">\n  <div class="fc-breadcrumbs" colspan="<%- activeColumns.length + 3 %>">\n    <a href="#" data-path="/">\n      <span class="glyphicon glyphicon-home"></span> /\n    </a>\n    <% _.each(pathParts, function(part, idx, list){\n      if(part){\n        if(idx > 0){ %>\n          /\n        <% } %>\n        <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n      <% }\n    }); %>\n  </div>\n</div>\n\n<table class="pat-datatables table table-striped table-bordered"\n       data-pat-datatables="<%- datatables_options %>">\n  <thead>\n    <tr>\n      <th class="selection"><input type="checkbox" class="select-all" /></th>\n      <th class="title"><%- _t(\'Title\') %></th>\n      <% _.each(activeColumns, function(column){ %>\n        <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th class="actions"><%- _t("Actions") %></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'}),define("mockup-patterns-sortable",["jquery","pat-base","jquery.event.drop","jquery.event.drag"],function($,Base,drop){"use strict";return Base.extend({name:"sortable",trigger:".pat-sortable",parser:"mockup",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",createDragItem:function(pattern,$el){return $el.clone().addClass(pattern.options.cloneClass).css({opacity:.75,position:"absolute"}).appendTo(document.body)},drop:void 0},init:function(){var self=this,start=0;self.$el.find(self.options.selector).drag("start",function(e,dd){var $el=$(this);return $(this).addClass(self.options.dragClass),drop({tolerance:function(event,proxy,target){if(0!==$(target.elem).closest(self.$el).length){var test=event.pageY>target.top+target.height/2;return $.data(target.elem,"drop+reorder",test?"insertAfter":"insertBefore"),this.contains(target,[event.pageX,event.pageY])}}}),start=$el.index(),self.options.createDragItem(self,$el)}).drag(function(e,dd){$(dd.proxy).css({top:dd.offsetY,left:dd.offsetX});var drop=dd.drop[0],method=$.data(drop||{},"drop+reorder");method&&drop&&(drop!=dd.current||method!=dd.method)&&($(this)[method](drop),dd.current=drop,dd.method=method,dd.update())}).drag("end",function(e,dd){var $el=$(this);$el.removeClass(self.options.dragClass),$(dd.proxy).remove(),self.options.drop&&("string"==typeof self.options.drop?window[self.options.drop]($el,$el.index()-start):self.options.drop($el,$el.index()-start))}).drop("init",function(e,dd){return this!=dd.drag})}})}),define("mockup-patterns-moment",["jquery","pat-base","moment","mockup-i18n"],function($,Base,moment,i18n){return Base.extend({name:"moment",trigger:".pat-moment",parser:"mockup",moment_i18n_map:{no:"nb"},defaults:{selector:null,format:"LLL",setTitle:!1},convert:function($el){var date=$el.attr("data-date");if(date||(date=$.trim($el.html())),date&&"None"!==date){var currentLanguage=(new i18n).currentLanguage;currentLanguage in this.moment_i18n_map&&(currentLanguage=this.moment_i18n_map[currentLanguage]),moment.locale([currentLanguage,"en"]),(date=moment(date)).isValid()&&(this.options.setTitle&&$el.attr("title",date.format("LLLL")),(date="relative"===this.options.format?date.fromNow():"calendar"===this.options.format?date.calendar():date.format(this.options.format))&&$el.html(date))}},init:function(){var self=this;self.options.selector?self.$el.find(self.options.selector).each(function(){self.convert($(this))}):self.convert(self.$el)}})}),function(root){define("bootstrap-alert",["jquery"],function(){return function(){return function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.6",Alert.TRANSITION_DURATION=150,Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr("data-target");selector||(selector=(selector=$this.attr("href"))&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),$parent.length||($parent=$this.closest(".alert")),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement())};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})},$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),window.jQuery.fn.alert.Constructor}.apply(root,arguments)})}(this),define("mockup-patterns-structure-url/js/views/table",["jquery","underscore","mockup-patterns-structure-url/js/views/tablerow","text!mockup-patterns-structure-url/templates/table.xml","mockup-ui-url/views/base","mockup-patterns-datatables","mockup-patterns-sortable","mockup-patterns-moment","mockup-patterns-structure-url/js/models/result","mockup-patterns-structure-url/js/views/actionmenu","translate","pat-registry","bootstrap-alert"],function($,_,TableRowView,TableTemplate,BaseView,patDataTables,Sortable,patMoment,Result,ActionMenuView,_t,registry){"use strict";return BaseView.extend({tagName:"div",template:_.template(TableTemplate),initialize:function(options){var self=this;BaseView.prototype.initialize.apply(self,[options]),self.collection=self.app.collection,self.selectedCollection=self.app.selectedCollection,self.listenTo(self.collection,"sync",self.render),self.listenTo(self.selectedCollection,"remove",self.render),self.listenTo(self.selectedCollection,"reset",self.render),self.collection.pager(),self.subsetIds=[],self.contextInfo=null,$("body").on("context-info-loaded",function(event,data){self.contextInfo=data,self.setContextInfo()}),self.dateColumns=["ModificationDate","EffectiveDate","CreationDate","ExpirationDate","start","end","last_comment_date"]},events:{"click .fc-breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll"},setContextInfo:function(){var data=this.contextInfo,$defaultPage=this.$('[data-id="'+data.defaultPage+'"]');0<$defaultPage.length&&$defaultPage.addClass("default-page");var crumbs=data.breadcrumbs;if(crumbs&&crumbs.length){var $crumbs=this.$(".fc-breadcrumbs a.crumb");_.each(crumbs,function(crumb,idx){$crumbs.eq(idx).html(crumb.title)})}},render:function(){var self=this,datatables_options={aaSorting:[],aoColumnDefs:[{bSortable:!1,aTargets:[0,self.app.activeColumns.length+2]}],paging:!1,searching:!1,info:!1};if($.extend(datatables_options,self.app.options.datatables_options),self.$el.html(self.template({_t:_t,pathParts:_.filter(self.app.getCurrentPath().split("/").slice(1),function(val){return 0<val.length}),status:self.app.status,activeColumns:self.app.activeColumns,availableColumns:self.app.availableColumns,datatables_options:JSON.stringify(datatables_options)})),self.collection.length){var container=self.$("tbody");self.collection.each(function(result){self.dateColumns.map(function(col){!result.attributes.hasOwnProperty(col)||"None"!==result.attributes[col]&&result.attributes[col]||(result.attributes[col]="")});var view=new TableRowView({model:result,app:self.app,table:self}).render();container.append(view.el)})}return self.moment=new patMoment(self.$el,{selector:"."+self.dateColumns.join(",."),format:self.options.app.momentFormat}),self.app.options.moveUrl&&self.addReordering(),self.storeOrder(),registry.scan(self.$el),self.$el.find("table").on("order.dt",function(e,settings,details){var btn=$('<button type="button" class="btn btn-danger btn-xs"></button>').text(_t("Reset column sorting")).on("click",function(e){self.$el.find("table.pat-datatables").data("patternDatatables").table.order([0,"asc"]).draw().order([]).draw(),self.addReordering(),self.app.setStatus()});self.app.setStatus(_t("Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column."),"warning",btn=btn),$(".pat-datatables tbody").find("tr").off("drag"),self.$el.removeClass("order-support")}),this},breadcrumbClicked:function(e){e.preventDefault();var $el=$(e.target);"A"!==$el[0].tagName&&($el=$el.parent("a"));var path="";$($el.prevAll("a").get().reverse()).each(function(){var part=$(this).attr("data-path");path+=part,"/"!==part&&(path+="/")}),path+=$el.attr("data-path"),this.app.setCurrentPath(path),this.collection.currentPage=1,this.collection.pager()},selectAll:function(e){$(e.target).is(":checked")?$('input[type="checkbox"]',this.$("tbody")).prop("checked",!0).change():(this.selectedCollection.remove(this.collection.models,{silent:!0}),this.selectedCollection.trigger("remove")),this.setContextInfo()},toggleSelectAll:function(e){$(e.target).is(":checked")||this.$(".select-all").prop("checked",!1)},addReordering:function(){var self=this;if(self.app.inQueryMode())return self.app.setStatus({text:_t("Cannot order items while querying"),type:"warning"}),void self.$el.removeClass("order-support");self.$el.addClass("order-support");new Sortable(self.$("tbody"),{selector:"tr",createDragItem:function(pattern,$el){var $tr=$el.clone(),$table=$("<table><tbody></tbody></table>");return $("tbody",$table).append($tr),$table.addClass("structure-dragging").css({opacity:.85,position:"absolute"}),$table.width($el.width()),$table.height($el.height()),$table.appendTo(document.body),$table},drop:function($el,delta){0!==delta&&(self.app.moveItem($el.attr("data-id"),delta,self.subsetIds),self.storeOrder())}})},storeOrder:function(){var subsetIds=[];this.$("tbody tr.itemRow").each(function(){subsetIds.push($(this).attr("data-id"))}),this.subsetIds=subsetIds}})}),define("text!mockup-ui-url/templates/popover.xml",[],function(){return'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n'}),define("mockup-ui-url/views/popover",["jquery","underscore","mockup-ui-url/views/container","mockup-patterns-backdrop","text!mockup-ui-url/templates/popover.xml"],function($,_,ContainerView,Backdrop,PopoverTemplate){"use strict";return ContainerView.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:PopoverTemplate,content:null,title:null,triggerView:null,idPrefix:"popover-",triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:void 0,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(options){ContainerView.prototype.initialize.apply(this,[options]),this.bindTriggerEvents(),this.on("render",function(){this.$el.attr("role","tooltip").attr("aria-hidden","false"),this.renderTitle(),this.renderContent()},this)},afterRender:function(){},getTemplateOptions:function(){return this.options},renderTitle:function(){var title=this.title;"function"==typeof title&&(title=title(this.getTemplateOptions())),this.$(".popover-title").empty().append(title)},renderContent:function(){this.$(".popover-content").empty().append(this.content(this.getTemplateOptions()))},bindTriggerEvents:function(){this.triggerView&&_.each(this.triggerEvents,function(func,event){var method=this[func];method||$.error("Function not found."),this.stopListening(this.triggerView,event),this.listenTo(this.triggerView,event,method)},this)},getPosition:function(){var $el=this.triggerView.$el;return $.extend({},{width:$el[0].offsetWidth,height:$el[0].offsetHeight},$el.offset())},getBodyClassName:function(){var name="popover-";return this.options.id&&(name+=this.options.id+"-"),name+="active"},show:function(){$(".popover:visible").each(function(){var popover=$(this).data("component");popover&&popover.hide()}),this.position(),this.setBackdrop(),!0===this.useBackdrop&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this),this.$el.attr("aria-hidden","false"),$("body").addClass(this.getBodyClassName())},position:function(){var tp,placement,actualWidth,actualHeight,pos=this.getPosition(),$tip=this.$el;switch(placement=this.placement,$tip.css({top:0,left:0}).addClass("active"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,placement){case"bottom":tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case"top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case"left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case"right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}}this.applyPlacement(tp,placement)},applyPlacement:function(offset,placement){var actualWidth,actualHeight,delta,replace,$el=this.$el,$tip=this.$el,width=$tip[0].offsetWidth,height=$tip[0].offsetHeight;$el.removeClass(placement),$el.offset(offset).addClass(placement).addClass("active"),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight,"top"===placement&&actualHeight!==height&&(offset.top=offset.top+height-actualHeight,replace=!0),"bottom"===placement||"top"===placement?(delta=0,offset.left<0&&(delta=-2*offset.left,offset.left=0,$el.removeClass(placement),$el.offset(offset).addClass(placement),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.positionArrow(delta-width+actualWidth,actualWidth,"left")):this.positionArrow(actualHeight-height,actualHeight,"top"),replace&&$el.offset(offset)},positionArrow:function(delta,dimension,position){this.$(".arrow").css(position,delta?50*(1-delta/dimension)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&(this.triggerView.$el.removeClass("active"),this.triggerView.$el.attr("aria-hidden","true")),this.uiEventTrigger("hide",this),this.$el.attr("aria-hidden","true"),$("body").removeClass(this.getBodyClassName())},toggle:function(button,e){this.opened?this.hide():this.show()},setBackdrop:function(){if(!0===this.useBackdrop&&void 0===this.backdrop){var self=this;this.$backdrop=this.$el.closest(".ui-backdrop-element"),0===this.$backdrop.length&&(this.$backdrop=$("body")),this.backdrop=new Backdrop(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",function(e){"backdrop.patterns"===e.namespace&&(e.stopPropagation(),!0===self.opened&&self.hide())}),this.on("popover:hide",function(){this.backdrop.hide()},this)}}})}),define("text!mockup-patterns-structure-url/templates/selection_item.xml",[],function(){return'<span class="selected-item">\n  <a href="#" data-uid="<%- UID %>" title="remove" class="remove">\n    <span class="glyphicon glyphicon-remove-circle"></span>\n  </a>\n  <%- Title %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionwell",["jquery","underscore","mockup-ui-url/views/popover","text!mockup-patterns-structure-url/templates/selection_item.xml"],function($,_,PopoverView,ItemTemplate){"use strict";return PopoverView.extend({className:"popover selected-items",title:_.template('<input type="text" class="filter" placeholder="Filter" /><a href="#" class=" remove-all"><span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>'),content:_.template("<% collection.each(function(item) { %><%= item_template(item.toJSON()) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(options){PopoverView.prototype.initialize.apply(this,[options]);var self=this,timeout=0;this.listenTo(this.collection,"reset all add remove",function(){clearTimeout(timeout),timeout=setTimeout(function(){self.render()},50)}),this.options.item_template=_.template(ItemTemplate)},render:function(){return PopoverView.prototype.render.call(this),0===this.collection.length&&this.$el.removeClass("active"),this},itemRemoved:function(e){e.preventDefault();var uid=$(e.currentTarget).data("uid");this.collection.removeByUID(uid),0!==this.collection.length&&this.show()},filterSelected:function(e){var val=$(e.target).val().toLowerCase();$(".selected-item",this.$el).each(function(){var $el=$(this);-1===$el.text().toLowerCase().indexOf(val)?$el.hide():$el.show()})},removeAll:function(e){e.preventDefault(),this.collection.reset(),this.hide()}})}),define("mockup-patterns-structure-url/js/views/generic-popover",["jquery","underscore","mockup-ui-url/views/popover","translate","pat-registry"],function($,_,PopoverView,_t,registry){"use strict";return PopoverView.extend({events:{"click button.applyBtn":"applyButtonClicked","click button.closeBtn":"toggle"},submitText:_t("Apply"),initialize:function(options){this.app=options.app,this.className="popover "+options.id,this.title=options.form.title||options.title,this.submitText=options.form.submitText||_t("Apply"),this.submitContext=options.form.submitContext||"primary",this.data={},this.options=options,this.setContent(options.form.template),PopoverView.prototype.initialize.apply(this,[options])},setContent:function(content){var html="<form>"+content+"</form>";html+='<button class="btn btn-block btn-'+this.submitContext+' applyBtn">'+this.submitText+" </button>",this.options.form.closeText&&(html+='<button class="btn btn-block btn-default closeBtn">'+this.options.form.closeText+" </button>"),this.content=_.template(html)},getTemplateOptions:function(){var items=[];return this.app.selectedCollection.each(function(item){items.push(item.toJSON())}),$.extend({},!0,this.options,{items:items,data:this.data})},applyButtonClicked:function(){var data={};_.each(this.$el.find("form").serializeArray(),function(param){param.name in data?data[param.name]+=","+param.value:data[param.name]=param.value}),this.app.buttonClickEvent(this.triggerView,data),this.hide()},afterRender:function(){var self=this;if(self.options.form.dataUrl){self.$(".popover-content").html(_t("Loading...")),self.app.loading.show();var url=self.app.getAjaxUrl(self.options.form.dataUrl);$.ajax({url:url,dataType:"json",type:"POST",cache:!1,data:{selection:JSON.stringify(self.app.getSelectedUids()),transitions:!0,render:"yes"}}).done(function(result){self.data=result.data||result,self.renderContent(),registry.scan(self.$el)}).fail(function(){var originalContent=self.content;self.setContent("<p>"+_t("Error loading popover from server.")+"</p>",!1),self.renderContent(),self.content=originalContent}).always(function(){self.app.loading.hide(),self.position()})}else registry.scan(self.$el),self.position()},toggle:function(button,e){PopoverView.prototype.toggle.apply(this,[button,e]);this.opened&&(this.$el.replaceWith(this.render().el),this.position())}})}),define("mockup-patterns-structure-url/js/views/rearrange",["underscore","mockup-ui-url/views/popover","translate"],function(_,PopoverView,_t){"use strict";return PopoverView.extend({className:"popover rearrange",title:_.template('<%- _t("Rearrange items in this folder") %>'),content:_.template('<div class="form-group"><label><%- _t("What to rearrange on") %></label><select name="rearrange_on" class="form-control"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block"><b><%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %></b></p></div><div><label> <input type="checkbox" name="reversed" /> <%- _t("Reverse") %></label></div><button class="btn btn-block btn-primary"><%- _t("Rearrange") %></button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(options){this.app=options.app,PopoverView.prototype.initialize.apply(this,[options]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return PopoverView.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){if("/"!==this.app.collection.queryHelper.getCurrentPath()||window.confirm(_t("Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?"))){var data={rearrange_on:this.$rearrangeOn.val(),reversed:!1};this.$reversed[0].checked&&(data.reversed=!0),this.app.buttonClickEvent(this.triggerView,data),this.hide()}}})}),define("text!mockup-patterns-structure-url/templates/selection_button.xml",[],function(){return'<span class="glyphicon glyphicon-list"></span>\n<%- title %>\n<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\n  <%- length %>\n</span>\n'}),define("mockup-patterns-structure-url/js/views/selectionbutton",["mockup-ui-url/views/button","text!mockup-patterns-structure-url/templates/selection_button.xml"],function(ButtonView,tplButton){"use strict";return ButtonView.extend({collection:null,template:tplButton,initialize:function(options){ButtonView.prototype.initialize.apply(this,[options]);var self=this;self.timeout=0,null!==this.collection&&this.collection.on("add remove reset",function(){clearTimeout(self.timeout),self.timeout=setTimeout(function(){self.render(),0===self.collection.length&&self.$el.removeClass("active")},50)},this)},serializedModel:function(){var obj={icon:"",title:this.options.title,length:0};return null!==this.collection&&(obj.length=this.collection.length),obj}})}),define("text!mockup-patterns-structure-url/templates/paging.xml",[],function(){return'  <ul class="pagination pagination-sm pagination-centered">\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="<% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, function(p){ %>\n    <li class="<% if (currentPage == p) { %>active<% } else if ( p == \'...\' ) { %>disabled<% }%>">\n      <a href="#" class="page"><%- p %></a>\n    </li>\n    <% }); %>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="<% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled"><a href="#"><%- _t("Show:") %></a></li>\n    <li class="serverhowmany serverhowmany15 <% if(perPage == 15){ %>disabled<% } %>">\n      <a href="#" class="">15</a>\n    </li>\n    <li class="serverhowmany serverhowmany30 <% if(perPage == 30){ %>disabled<% } %>">\n      <a href="#" class="">30</a>\n    </li>\n    <li class="serverhowmany serverhowmany50 <% if(perPage == 50){ %>disabled<% } %>">\n      <a href="#" class="">50</a>\n    </li>\n    <li class="serverhowmany serverhowmany250 <% if(perPage == 250){ %>disabled<% } %>">\n      <a href="#" class="">250</a>\n    </li>\n  </ul>\n\n  <ul class="pagination pagination-sm">\n    <li class="disabled">\n      <a href="#">\n        <%- _t("Page:") %> <span class="current"><%- currentPage %></span>\n        <%- _t("of") %>\n        <span class="total"><%- totalPages %></span>\n              <%- _t("shown") %>\n      </a>\n    </li>\n  </ul>\n'}),define("mockup-patterns-structure-url/js/views/paging",["jquery","underscore","backbone","text!mockup-patterns-structure-url/templates/paging.xml","translate"],function($,_,Backbone,PagingTemplate,_t){"use strict";return Backbone.View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:_.template(PagingTemplate),maxPages:7,initialize:function(options){this.options=options,this.app=this.options.app,this.collection=this.app.collection,this.collection.on("reset",this.render,this),this.collection.on("sync",this.render,this),this.$el.appendTo("#pagination")},render:function(){var data=this.collection.info();data.pages=this.getPages(data);var html=this.template($.extend({_t:_t},data));return this.$el.html(html),this},getPages:function(data){var totalPages=data.totalPages;if(!totalPages)return[];var currentPage=data.currentPage,left=1,right=totalPages;totalPages>this.maxPages&&(left=Math.max(1,Math.floor(currentPage-this.maxPages/2)),(right=Math.min(left+this.maxPages,totalPages))-left<this.maxPages&&(left-=Math.floor(this.maxPages/2)));for(var pages=[],i=left;i<=right;i+=1)pages.push(i);return 1<pages[0]&&(2<pages[0]&&(pages=["..."].concat(pages)),pages=[1].concat(pages)),pages[pages.length-1]<totalPages-1&&(pages[pages.length-2]<totalPages-2&&pages.push("..."),pages.push(totalPages)),pages},nextResultPage:function(e){e.preventDefault(),this.app.setStatus(),this.collection.requestNextPage()},previousResultPage:function(e){e.preventDefault(),this.app.setStatus(),this.collection.requestPreviousPage()},gotoFirst:function(e){e.preventDefault(),this.app.setStatus(),this.collection.goTo(this.collection.information.firstPage)},gotoLast:function(e){e.preventDefault(),this.app.setStatus(),this.collection.goTo(this.collection.information.totalPages)},gotoPage:function(e){e.preventDefault(),this.app.setStatus();var page=$(e.target).text();this.collection.goTo(page)},changeCount:function(e){e.preventDefault(),this.app.setStatus();var per=$(e.target).text();this.collection.howManyPer(per),this.app.setCookieSetting("perPage",per)}})}),define("mockup-patterns-structure-url/js/views/columns",["jquery","underscore","mockup-ui-url/views/popover","mockup-patterns-sortable"],function($,_,PopoverView,Sortable){"use strict";return PopoverView.extend({className:"popover attribute-columns",title:_.template('<%- _t("Columns") %>'),content:_.template('<label><%- _t("Select columns to show, drag and drop to reorder") %></label><ul></ul><button class="btn btn-block btn-success"><%- _t("Save") %></button>'),itemTemplate:_.template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(options){this.app=options.app,PopoverView.prototype.initialize.apply(this,[options])},afterRender:function(){var self=this;self.$container=self.$("ul"),_.each(self.app.activeColumns,function(id){var $el=$(self.itemTemplate({title:self.app.availableColumns[id],id:id}));$el.find("input")[0].checked=!0,self.$container.append($el)});var availableKeys=_.keys(_.omit(self.app.availableColumns,self.app.activeColumns)).sort(function(a,b){var ca=self.app.availableColumns[a],cb=self.app.availableColumns[b];return ca<cb?-1:ca==cb?0:1});_.each(availableKeys,function(id){var $el=$(self.itemTemplate({title:self.app.availableColumns[id],id:id}));self.$container.append($el)});new Sortable(self.$container,{selector:"li"});return this},applyButtonClicked:function(){var self=this;this.hide(),self.app.activeColumns=[],self.$("input:checked").each(function(){self.app.activeColumns.push($(this).val())}),self.app.setCookieSetting(self.app.activeColumnsCookie,this.app.activeColumns),self.app.tableView.render()}})}),define("mockup-patterns-structure-url/js/views/textfilter",["jquery","underscore","mockup-ui-url/views/base","mockup-ui-url/views/button","mockup-ui-url/views/popover","mockup-patterns-querystring","translate"],function($,_,BaseView,ButtonView,PopoverView,QueryString,_t){"use strict";return BaseView.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:_.template('<div class="input-group"><input type="text" class="form-control search-query" placeholder="<%- _t("Filter") %>"><span class="input-group-btn"></span></div>'),popoverContent:_.template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,initialize:function(options){BaseView.prototype.initialize.apply(this,[options]),this.app=this.options.app},render:function(){this.$el.html(this.template({_t:_t})),this.button=new ButtonView({tooltip:_t("Query"),icon:"search"}),this.popover=new PopoverView({triggerView:this.button,id:"structure-query",title:_.template(_t("Query")),content:this.popoverContent,placement:"left"}),this.$(".input-group-btn").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new QueryString(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1});var self=this;return self.queryString.$el.on("change",function(){self.timeoutId&&clearTimeout(self.timeoutId),self.timeoutId=setTimeout(function(){var criterias=$.parseJSON(self.$queryString.val());self.app.additionalCriterias=criterias,self.app.collection.currentPage=1,self.app.collection.pager()},this.keyupDelay)}),self.queryString.$el.on("initialized",function(){self.queryString.$sortOn.on("change",function(){self.app.sort_on=self.queryString.$sortOn.val(),self.app.collection.currentPage=1,self.app.collection.pager()}),self.queryString.$sortOrder.change(function(){self.queryString.$sortOrder[0].checked?self.app.sort_order="reverse":self.app.sort_order="ascending",self.app.collection.currentPage=1,self.app.collection.pager()})}),this},filter:function(event){var self=this;self.timeoutId&&clearTimeout(self.timeoutId),self.timeoutId=setTimeout(function(){self.term=$(event.currentTarget).val(),self.app.collection.currentPage=1,self.app.collection.pager(),self.term||self.app.setStatus()},this.keyupDelay)}})}),define("mockup-patterns-structure-url/js/views/upload",["underscore","mockup-ui-url/views/popover","mockup-patterns-upload"],function(_,PopoverView,Upload){"use strict";return PopoverView.extend({className:"popover upload",title:_.template('<%- _t("Upload files") %>'),content:_.template('<input type="text" name="upload" style="display:none" /><div class="uploadify-me"></div>'),initialize:function(options){var self=this;self.app=options.app,PopoverView.prototype.initialize.apply(self,[options]),self.currentPathData=null,$("body").on("context-info-loaded",function(event,data){self.currentPathData=data})},render:function(){var self=this;PopoverView.prototype.render.call(this);var options=self.app.options.upload;return options.success=function(){self.app.collection.pager()},options.currentPath=self.app.getCurrentPath(),options.allowPathSelection=!1,self.upload=new Upload(self.$(".uploadify-me").addClass("pat-upload"),options),this},toggle:function(button,e){PopoverView.prototype.toggle.apply(this,[button,e]);if(this.opened){var currentPath=this.app.getCurrentPath();this.currentPathData&&currentPath!==this.upload.currentPath&&this.upload.setPath(currentPath)}}})}),function(root){define("backbone.paginator",["backbone"],function(){return function(){return Backbone.Paginator=function(Backbone,_,$){"use strict";var bbVer=_.map(Backbone.VERSION.split("."),function(digit){return parseInt(digit,10)}),Paginator={version:"<%= pkg.version %>"};Paginator.clientPager=Backbone.Collection.extend({useDiacriticsPlugin:!0,useLevenshteinPlugin:!0,sortColumn:"",sortDirection:"desc",lastSortColumn:"",fieldFilterRules:[],lastFieldFilterRules:[],filterFields:"",filterExpression:"",lastFilterExpression:"",defaults_ui:{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4},initialize:function(){this.on("add",this.addModel,this),this.on("remove",this.removeModel,this),this.setDefaults()},setDefaults:function(){var options=_.defaults(this.paginator_ui,this.defaults_ui);_.defaults(this,options)},addModel:function(model){this.origModels.push(model)},removeModel:function(model){var index=_.indexOf(this.origModels,model);this.origModels.splice(index,1)},sync:function(method,model,options){var self=this;this.setDefaults();var queryAttributes={};_.each(_.result(self,"server_api"),function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryAttributes[key]=value});var queryOptions=_.clone(self.paginator_core);_.each(queryOptions,function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryOptions[key]=value}),queryOptions=_.defaults(queryOptions,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),queryOptions=_.extend(queryOptions,{data:decodeURIComponent($.param(queryAttributes)),processData:!1,url:_.result(queryOptions,"url")},options);var promiseSuccessFormat=!(0===bbVer[0]&&9===bbVer[1]&&10===bbVer[2]),success=queryOptions.success;queryOptions.success=function(resp,status,xhr){success&&(promiseSuccessFormat?success(resp,status,xhr):success(model,resp,queryOptions)),model&&model.trigger&&model.trigger("sync",model,resp,queryOptions)};var error=queryOptions.error;queryOptions.error=function(xhr){error&&error(model,xhr,queryOptions),model&&model.trigger&&model.trigger("error",model,xhr,queryOptions)};var xhr=queryOptions.xhr=Backbone.ajax(queryOptions);return model&&model.trigger&&model.trigger("request",model,xhr,queryOptions),xhr},nextPage:function(options){this.currentPage<this.information.totalPages&&(this.currentPage=++this.currentPage,this.pager(options))},previousPage:function(options){1<this.currentPage&&(this.currentPage=--this.currentPage,this.pager(options))},goTo:function(page,options){void 0!==page&&(this.currentPage=parseInt(page,10),this.pager(options))},howManyPer:function(perPage){if(void 0!==perPage){var lastPerPage=this.perPage;this.perPage=parseInt(perPage,10),this.currentPage=Math.ceil((lastPerPage*(this.currentPage-1)+1)/perPage),this.pager()}},setSort:function(column,direction){void 0!==column&&void 0!==direction&&(this.lastSortColumn=this.sortColumn,this.sortColumn=column,this.sortDirection=direction,this.pager(),this.info())},setFieldFilter:function(fieldFilterRules){_.isEmpty(fieldFilterRules)?(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=""):(this.lastFieldFilterRules=this.fieldFilterRules,this.fieldFilterRules=fieldFilterRules),this.pager(),this.info()},doFakeFieldFilter:function(rules){if(!_.isEmpty(rules)){var testModels=this.origModels;return void 0===testModels&&(testModels=this.models),testModels=this._fieldFilter(testModels,rules),""!==this.filterExpression&&(testModels=this._filter(testModels,this.filterFields,this.filterExpression)),testModels.length}},setFilter:function(fields,filter){void 0!==fields&&void 0!==filter&&(this.filterFields=fields,this.lastFilterExpression=this.filterExpression,this.filterExpression=filter,this.pager(),this.info())},doFakeFilter:function(fields,filter){if(void 0!==fields&&void 0!==filter){var testModels=this.origModels;return void 0===testModels&&(testModels=this.models),_.isEmpty(this.fieldFilterRules)||(testModels=this._fieldFilter(testModels,this.fieldFilterRules)),(testModels=this._filter(testModels,fields,filter)).length}},pager:function(options){var disp=this.perPage,start=(this.currentPage-1)*disp,stop=start+disp;void 0===this.origModels&&(this.origModels=this.models),this.models=this.origModels.slice(),""!==this.sortColumn&&(this.models=this._sort(this.models,this.sortColumn,this.sortDirection)),_.isEmpty(this.fieldFilterRules)||(this.models=this._fieldFilter(this.models,this.fieldFilterRules)),""!==this.filterExpression&&(this.models=this._filter(this.models,this.filterFields,this.filterExpression)),this.lastSortColumn===this.sortColumn&&this.lastFilterExpression===this.filterExpression&&_.isEqual(this.fieldFilterRules,this.lastFieldFilterRules)||(stop=(start=0)+disp,this.currentPage=1,this.lastSortColumn=this.sortColumn,this.lastFieldFilterRules=this.fieldFilterRules,this.lastFilterExpression=this.filterExpression),this.sortedAndFilteredModels=this.models.slice(),this.info(),this.reset(this.models.slice(start,stop)),_.result(options,"success")},_sort:function(models,sort,direction){return models=models.sort(function(a,b){var ac=a.get(sort),bc=b.get(sort);if(_.isUndefined(ac)||_.isUndefined(bc)||null===ac||null===bc)return 0;if(ac=ac.toString().toLowerCase(),bc=bc.toString().toLowerCase(),"desc"===direction)if(!ac.match(/[^\-\d\.]/)&&ac.match(/-?[\d\.]+/)&&!bc.match(/[^\-\d\.]/)&&bc.match(/-?[\d\.]+/)){if(ac-0<bc-0)return 1;if(bc-0<ac-0)return-1}else{if(ac<bc)return 1;if(bc<ac)return-1}else if(!ac.match(/[^\-\d\.]/)&&ac.match(/-?[\d\.]+/)&&!bc.match(/[^\-\d\.]/)&&bc.match(/-?[\d\.]+/)){if(ac-0<bc-0)return-1;if(bc-0<ac-0)return 1}else{if(ac<bc)return-1;if(bc<ac)return 1}if(a.cid&&b.cid){var aId=a.cid,bId=b.cid;if(aId<bId)return-1;if(bId<aId)return 1}return 0})},_fieldFilter:function(models,rules){if(_.isEmpty(rules))return models;var filteredModels=[];return _.each(models,function(model){var should_push=!0;_.each(rules,function(rule){if(!should_push)return!1;(should_push=!1,"function"===rule.type)?_.wrap(rule.value,function(func){return func(model.get(rule.field))})()&&(should_push=!0):"required"===rule.type?_.isEmpty(model.get(rule.field).toString())||(should_push=!0):"min"===rule.type?!_.isNaN(Number(model.get(rule.field)))&&!_.isNaN(Number(rule.value))&&Number(model.get(rule.field))>=Number(rule.value)&&(should_push=!0):"max"===rule.type?!_.isNaN(Number(model.get(rule.field)))&&!_.isNaN(Number(rule.value))&&Number(model.get(rule.field))<=Number(rule.value)&&(should_push=!0):"range"===rule.type?!_.isNaN(Number(model.get(rule.field)))&&_.isObject(rule.value)&&!_.isNaN(Number(rule.value.min))&&!_.isNaN(Number(rule.value.max))&&Number(model.get(rule.field))>=Number(rule.value.min)&&Number(model.get(rule.field))<=Number(rule.value.max)&&(should_push=!0):"minLength"===rule.type?model.get(rule.field).toString().length>=rule.value&&(should_push=!0):"maxLength"===rule.type?model.get(rule.field).toString().length<=rule.value&&(should_push=!0):"rangeLength"===rule.type?_.isObject(rule.value)&&!_.isNaN(Number(rule.value.min))&&!_.isNaN(Number(rule.value.max))&&model.get(rule.field).toString().length>=rule.value.min&&model.get(rule.field).toString().length<=rule.value.max&&(should_push=!0):"oneOf"===rule.type?_.isArray(rule.value)&&_.include(rule.value,model.get(rule.field))&&(should_push=!0):"equalTo"===rule.type?rule.value===model.get(rule.field)&&(should_push=!0):"containsAllOf"===rule.type?_.isArray(rule.value)&&_.isArray(model.get(rule.field))&&_.intersection(rule.value,model.get(rule.field)).length===rule.value.length&&(should_push=!0):"pattern"===rule.type?model.get(rule.field).toString().match(rule.value)&&(should_push=!0):should_push=!1}),should_push&&filteredModels.push(model)}),filteredModels},_filter:function(models,fields,filter){var self=this,obj_fields={};if(_.isString(fields)?obj_fields[fields]={cmp_method:"regexp"}:_.isArray(fields)?_.each(fields,function(field){obj_fields[field]={cmp_method:"regexp"}}):_.each(fields,function(cmp_opts,field){obj_fields[field]=_.defaults(cmp_opts,{cmp_method:"regexp"})}),fields=obj_fields,_.has(Backbone.Paginator,"removeDiacritics")&&self.useDiacriticsPlugin&&(filter=Backbone.Paginator.removeDiacritics(filter)),""===filter||!_.isString(filter))return models;var words=_.map(filter.match(/\w+/gi),function(element){return element.toLowerCase()}),pattern="("+_.uniq(words).join("|")+")",regexp=new RegExp(pattern,"igm"),filteredModels=[];return _.each(models,function(model){var matchesPerModel=[];_.each(fields,function(cmp_opts,field){var value=model.get(field);if(value){var matchesPerField=[];if(value=_.has(Backbone.Paginator,"removeDiacritics")&&self.useDiacriticsPlugin?Backbone.Paginator.removeDiacritics(value.toString()):value.toString(),"levenshtein"===cmp_opts.cmp_method&&_.has(Backbone.Paginator,"levenshtein")&&self.useLevenshteinPlugin){var distance=Backbone.Paginator.levenshtein(value,filter);_.defaults(cmp_opts,{max_distance:0}),distance<=cmp_opts.max_distance&&(matchesPerField=_.uniq(words))}else matchesPerField=value.match(regexp);matchesPerField=_.map(matchesPerField,function(match){return match.toString().toLowerCase()}),_.each(matchesPerField,function(match){matchesPerModel.push(match)})}}),matchesPerModel=_.uniq(_.without(matchesPerModel,"")),_.isEmpty(_.difference(words,matchesPerModel))&&filteredModels.push(model)}),filteredModels},info:function(){var info={},totalRecords=this.sortedAndFilteredModels?this.sortedAndFilteredModels.length:this.length,totalPages=Math.ceil(totalRecords/this.perPage);return info={totalUnfilteredRecords:this.origModels.length,totalRecords:totalRecords,currentPage:this.currentPage,perPage:this.perPage,totalPages:totalPages,lastPage:totalPages,previous:!1,next:!1,startRecord:0===totalRecords?0:(this.currentPage-1)*this.perPage+1,endRecord:Math.min(totalRecords,this.currentPage*this.perPage)},1<this.currentPage&&(info.previous=this.currentPage-1),this.currentPage<info.totalPages&&(info.next=this.currentPage+1),info.pageSet=this.setPagination(info),this.information=info},setPagination:function(info){var pages=[],i=0,l=0,ADJACENTx2=2*this.pagesInRange,LASTPAGE=Math.ceil(info.totalRecords/info.perPage);if(1<LASTPAGE)if(LASTPAGE<=1+ADJACENTx2)for(i=1,l=LASTPAGE;i<=l;i++)pages.push(i);else if(info.currentPage<=this.pagesInRange+1)for(i=1,l=2+ADJACENTx2;i<l;i++)pages.push(i);else if(LASTPAGE-this.pagesInRange>info.currentPage&&info.currentPage>this.pagesInRange)for(i=info.currentPage-this.pagesInRange;i<=info.currentPage+this.pagesInRange;i++)pages.push(i);else for(i=LASTPAGE-ADJACENTx2;i<=LASTPAGE;i++)pages.push(i);return pages},bootstrap:function(options){return _.extend(this,options),this.goTo(1),this.info(),this}}),Paginator.clientPager.prototype.prevPage=Paginator.clientPager.prototype.previousPage;var reject=function(){var response=new $.Deferred;return response.reject(),response.promise()};return Paginator.requestPager=Backbone.Collection.extend({sync:function(method,model,options){var self=this;self.setDefaults();var queryAttributes={};_.each(_.result(self,"server_api"),function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryAttributes[key]=value});var queryOptions=_.clone(self.paginator_core);_.each(queryOptions,function(value,key){_.isFunction(value)&&(value=(value=_.bind(value,self))()),queryOptions[key]=value}),queryOptions=_.defaults(queryOptions,{timeout:25e3,cache:!1,type:"GET",dataType:"jsonp"}),options.data?options.data=decodeURIComponent($.param(_.extend(queryAttributes,options.data))):options.data=decodeURIComponent($.param(queryAttributes)),queryOptions=_.extend(queryOptions,{data:decodeURIComponent($.param(queryAttributes)),processData:!1,url:_.result(queryOptions,"url")},options);var promiseSuccessFormat=!(0===bbVer[0]&&9===bbVer[1]&&10===bbVer[2]),success=queryOptions.success;queryOptions.success=function(resp,status,xhr){success&&(promiseSuccessFormat?success(resp,status,xhr):success(model,resp,queryOptions)),bbVer[0]<1&&model&&model.trigger&&model.trigger("sync",model,resp,queryOptions)};var error=queryOptions.error;queryOptions.error=function(xhr){error&&error(xhr),model&&model.trigger&&model.trigger("error",model,xhr,queryOptions)};var xhr=queryOptions.xhr=Backbone.ajax(queryOptions);return model&&model.trigger&&model.trigger("request",model,xhr,queryOptions),xhr},setDefaults:function(){var self=this;_.defaults(self.paginator_ui,{firstPage:0,currentPage:1,perPage:5,totalPages:10,pagesInRange:4}),_.each(self.paginator_ui,function(value,key){_.isUndefined(self[key])&&(self[key]=self.paginator_ui[key])})},requestNextPage:function(options){return void 0!==this.currentPage?(this.currentPage+=1,this.pager(options)):reject()},requestPreviousPage:function(options){return void 0!==this.currentPage?(this.currentPage-=1,this.pager(options)):reject()},updateOrder:function(column,options){return void 0!==column?(this.sortField=column,this.pager(options)):reject()},goTo:function(page,options){return void 0!==page?(this.currentPage=parseInt(page,10),this.pager(options)):reject()},howManyPer:function(count,options){return void 0!==count?(this.currentPage=this.firstPage,this.perPage=count,this.pager(options)):reject()},info:function(){var info={totalRecords:this.totalRecords||0,currentPage:this.currentPage,firstPage:this.firstPage,totalPages:Math.ceil(this.totalRecords/this.perPage),lastPage:this.totalPages,perPage:this.perPage,previous:!1,next:!1};return 1<this.currentPage&&(info.previous=this.currentPage-1),this.currentPage<info.totalPages&&(info.next=this.currentPage+1),info.hasNext=info.next,info.hasPrevious=info.next,info.pageSet=this.setPagination(info),this.information=info},setPagination:function(info){var pages=[],i=0,l=0,ADJACENTx2=2*this.pagesInRange,LASTPAGE=Math.ceil(info.totalRecords/info.perPage);if(1<LASTPAGE)if(LASTPAGE<=1+ADJACENTx2)for(i=1,l=LASTPAGE;i<=l;i++)pages.push(i);else if(info.currentPage<=this.pagesInRange+1)for(i=1,l=2+ADJACENTx2;i<l;i++)pages.push(i);else if(LASTPAGE-this.pagesInRange>info.currentPage&&info.currentPage>this.pagesInRange)for(i=info.currentPage-this.pagesInRange;i<=info.currentPage+this.pagesInRange;i++)pages.push(i);else for(i=LASTPAGE-ADJACENTx2;i<=LASTPAGE;i++)pages.push(i);return pages},pager:function(options){return _.isObject(options)||(options={}),this.fetch(options)},url:function(){return void 0!==this.paginator_core&&void 0!==this.paginator_core.url?this.paginator_core.url:null},bootstrap:function(options){return _.extend(this,options),this.setDefaults(),this.info(),this}}),Paginator.requestPager.prototype.nextPage=Paginator.requestPager.prototype.requestNextPage,Paginator.requestPager.prototype.prevPage=Paginator.requestPager.prototype.requestPreviousPage,Paginator}(Backbone,_,jQuery),window.Backbone.Paginator}.apply(root,arguments)})}(this),define("mockup-patterns-structure-url/js/collections/result",["jquery","underscore","backbone","mockup-patterns-structure-url/js/models/result","mockup-utils","backbone.paginator"],function($,_,Backbone,Result,Utils){"use strict";return Backbone.Paginator.requestPager.extend({model:Result,initialize:function(models,options){this.options=options,this.view=options.view,this.url=options.url,this.queryHelper=Utils.QueryHelper($.extend(!0,{},this.view.options,{attributes:this.view.options.queryHelperAttributes})),this.queryParser=function(options){void 0===options&&(options={});var term=null;this.view.toolbar&&(term=this.view.toolbar.get("filter").term);var sortOn=this.view.sort_on,sortOrder=this.view.sort_order;return sortOn||(sortOn="getObjPositionInParent"),JSON.stringify({criteria:this.queryHelper.getCriterias(term,$.extend({},options,{additionalCriterias:this.view.additionalCriterias})),sort_on:sortOn,sort_order:sortOrder})},"#/"===window.location.hash.substring(0,2)&&(this.queryHelper.currentPath=window.location.hash.substring(1)),Backbone.Paginator.requestPager.prototype.initialize.apply(this,[models,options])},getCurrentPath:function(){return this.queryHelper.getCurrentPath()},setCurrentPath:function(path){this.queryHelper.currentPath=path},pager:function(){this.trigger("pager"),Backbone.Paginator.requestPager.prototype.pager.apply(this,[])},paginator_core:{type:"GET",dataType:"json",url:function(){return this.url}},paginator_ui:{firstPage:1,currentPage:1,perPage:15},server_api:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.perPage,JSON.stringify(this.queryHelper.getBatch(this.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parse:function(response,baseSortIdx){void 0===baseSortIdx&&(baseSortIdx=0),this.totalRecords=response.total;var results=response.results;return _.each(results,function(item,idx){item._sort=idx}),results},comparator:"_sort"})}),define("mockup-patterns-structure-url/js/collections/selected",["backbone","mockup-patterns-structure-url/js/models/result"],function(Backbone,Result){"use strict";return Backbone.Collection.extend({model:Result,removeResult:function(model){return this.removeByUID(model.uid())},removeByUID:function(uid){var found=this.getByUID(uid);return found&&this.remove(found),found},getByUID:function(uid){return this.findWhere({UID:uid})}})}),function(factory){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],factory):"object"==typeof exports?factory(require("jquery")):factory(jQuery)}(function($){var pluses=/\+/g;function encode(s){return config.raw?s:encodeURIComponent(s)}function read(s,converter){var value=config.raw?s:function(s){0===s.indexOf('"')&&(s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s=decodeURIComponent(s.replace(pluses," ")),config.json?JSON.parse(s):s}catch(e){}}(s);return $.isFunction(converter)?converter(value):value}var config=$.cookie=function(key,value,options){if(void 0!==value&&!$.isFunction(value)){if("number"==typeof(options=$.extend({},config.defaults,options)).expires){var days=options.expires,t=options.expires=new Date;t.setTime(+t+864e5*days)}return document.cookie=[encode(key),"=",function(value){return encode(config.json?JSON.stringify(value):String(value))}(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}for(var s,result=key?void 0:{},cookies=document.cookie?document.cookie.split("; "):[],i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split("="),name=(s=parts.shift(),config.raw?s:decodeURIComponent(s)),cookie=parts.join("=");if(key&&key===name){result=read(cookie,value);break}key||void 0===(cookie=read(cookie))||(result[name]=cookie)}return result};config.defaults={},$.removeCookie=function(key,options){return void 0!==$.cookie(key)&&($.cookie(key,"",$.extend({},options,{expires:-1})),!$.cookie(key))}}),define("mockup-patterns-structure-url/js/views/app",["jquery","underscore","mockup-ui-url/views/toolbar","mockup-ui-url/views/buttongroup","mockup-ui-url/views/button","mockup-ui-url/views/base","mockup-patterns-structure-url/js/views/table","mockup-patterns-structure-url/js/views/selectionwell","mockup-patterns-structure-url/js/views/generic-popover","mockup-patterns-structure-url/js/views/rearrange","mockup-patterns-structure-url/js/views/selectionbutton","mockup-patterns-structure-url/js/views/paging","mockup-patterns-structure-url/js/views/columns","mockup-patterns-structure-url/js/views/textfilter","mockup-patterns-structure-url/js/views/upload","mockup-patterns-structure-url/js/collections/result","mockup-patterns-structure-url/js/collections/selected","mockup-utils","translate","pat-logger","jquery.cookie"],function($,_,Toolbar,ButtonGroup,ButtonView,BaseView,TableView,SelectionWellView,GenericPopover,RearrangeView,SelectionButtonView,PagingView,ColumnsView,TextFilterView,UploadView,_ResultCollection,SelectedCollection,utils,_t,logger){"use strict";var log=logger.getLogger("pat-structure");return BaseView.extend({tagName:"div",status:{type:"none",text:"",label:""},sort_on:"getObjPositionInParent",sort_order:"ascending",additionalCriterias:[],cookieSettingPrefix:"_fc_",pasteAllowed:function(){return!!$.cookie("__cp")},initialize:function(options){var self=this;BaseView.prototype.initialize.apply(self,[options]),self.loading=new utils.Loading,self.loading.show(),$(document).click(function(e){var $el=$(e.target);if($el.is(":visible")&&"hidden"!==$el.css("visibility")&&"0"!==$el.css("opacity")&&!$el.is("a")&&!$el.parent().is("a")){var $popover=$(".popover:visible");if(0<$popover.length&&!$.contains($popover[0],$el[0])){var popover=$popover.data("component");popover&&popover.hide()}}});var ResultCollection=require(options.collectionConstructor);self.collection=new ResultCollection([],{view:self,url:self.options.collectionUrl}),self.setAllCookieSettings(),self.selectedCollection=new SelectedCollection,self.tableView=new TableView({app:self}),self.pagingView=new PagingView({app:self}),self.setupButtons(),self.wellView=new SelectionWellView({collection:self.selectedCollection,triggerView:self.toolbar.get("selected-items"),app:self,id:"structure-well"}),self.toolbar.get("selected-items").disable(),self.buttons.disable();var timeout=0;self.selectedCollection.on("add remove reset",function(){clearTimeout(timeout),timeout=setTimeout(function(){self.updateButtons()},100)},self),self.collection.on("sync",function(){self.contextInfoUrl&&$.ajax({url:self.getAjaxUrl(self.contextInfoUrl),dataType:"json",success:function(data){$("body").trigger("context-info-loaded",[data])},error:function(response){404===response.status&&log.info("context info url not found")}}),self.loading.hide()}),self.collection.on("pager",function(){if(self.loading.show(),self.updateButtons(),window.history&&window.history.pushState)if(self.doNotPushState)self.doNotPushState=!1;else{var url,path=self.getCurrentPath();if("/"===path&&(path=""),self.options.pushStateUrl)url=self.options.pushStateUrl.replace("/{path}","{path}").replace("{path}",path),window.history.pushState(null,null,url);else self.options.urlStructure&&(url=self.options.urlStructure.base+path+self.options.urlStructure.appended,window.history.pushState(null,null,url));self.options.traverseView&&(path=""),$("body").trigger("structure-url-changed",[path])}}),(self.options.pushStateUrl||self.options.urlStructure)&&utils.featureSupport.history()&&($(window).bind("popstate",function(){var base,appended,url=utils.getWindow().location.href;if(-1!==url.indexOf("?")&&(url=url.split("?")[0]),-1!==url.indexOf("#")&&(url=url.split("#")[0]),self.options.pushStateUrl){var tmp=self.options.pushStateUrl.split("{path}");base=tmp[0],appended=tmp[1]}else base=self.options.urlStructure.base,appended=self.options.urlStructure.appended;var path=url.substring(base.length);path.substring(path.length-appended.length)===appended&&(path=path.substring(0,path.length-appended.length)),path||(path="/"),self.setCurrentPath(path),$("body").trigger("structure-url-changed",[path]),self.doNotPushState=!0,self.collection.goTo(self.collection.information.firstPage)}),$(document).bind("keyup keydown",function(e){self.keyEvent=e})),self.togglePasteBtn()},updateButtons:function(){this.selectedCollection.length?(this.toolbar.get("selected-items").enable(),this.buttons.enable()):(this.toolbar.get("selected-items").disable(),this.buttons.disable()),this.togglePasteBtn()},togglePasteBtn:function(){_.find(this.buttons.items,function(btn){return"paste"===btn.id})&&(this.pasteAllowed()?this.buttons.get("paste").enable():this.buttons.get("paste").disable())},inQueryMode:function(){if(this.toolbar&&this.toolbar.get("filter").term)return!0;return 0<this.additionalCriterias.length||(!(!this.sort_on||"getObjPositionInParent"===this.sort_on)||"ascending"!==this.sort_order)},getSelectedUids:function(collection){void 0===collection&&(collection=this.selectedCollection);var uids=[];return collection.each(function(item){uids.push(item.uid())}),uids},getCurrentPath:function(){return this.collection.getCurrentPath()},setCurrentPath:function(path){this.collection.setCurrentPath(path)},getAjaxUrl:function(url){return url.replace("{path}",this.getCurrentPath())},buttonClickEvent:function(button){var self=this,data=null,callback=null;if(button.url){if(self.loading.show(),1<arguments.length){var arg1=arguments[1];arg1.preventDefault||(data=arg1)}if(2<arguments.length){var arg2=arguments[2];"function"==typeof arg2&&(callback=arg2)}null===data&&(data={}),void 0===data.selection&&(data.selection=JSON.stringify(self.getSelectedUids())),data._authenticator=utils.getAuthenticator(),void 0===data.folder&&(data.folder=self.getCurrentPath());var url=self.getAjaxUrl(button.url);$.ajax({url:url,type:"POST",data:data,success:function(data){self.ajaxSuccessResponse.apply(self,[data,callback]),self.loading.hide()},error:function(response){self.ajaxErrorResponse.apply(self,[response,url]),self.loading.hide()}},self)}},ajaxSuccessResponse:function(data,callback){this.selectedCollection.reset(),"success"===data.status&&this.collection.reset(),data.msg&&this.setStatus(data.msg,data.status||"warning"),null!=callback&&callback(data),this.collection.pager()},ajaxErrorResponse:function(response,url){404===response.status?window.alert(_t("operation url ${url} is not valid",{url:url})):window.alert(_t("there was an error performing the action"))},setupButtons:function(){var self=this,items=[],columnsBtn=new ButtonView({id:"attribute-columns",tooltip:_t("Configure displayed columns"),icon:"th"});if(self.columnsView=new ColumnsView({app:self,triggerView:columnsBtn,id:"structure-columns"}),items.push(columnsBtn),items.push(new SelectionButtonView({title:_t("Selected"),id:"selected-items",tooltip:_t("Manage selection"),collection:this.selectedCollection})),self.options.rearrange){var rearrangeButton=new ButtonView({id:"rearrange",title:_t("Rearrange"),icon:"sort-by-attributes",tooltip:_t("Rearrange folder contents"),url:self.options.rearrange.url});self.rearrangeView=new RearrangeView({triggerView:rearrangeButton,app:self,id:"structure-rearrange"}),items.push(rearrangeButton)}if(self.options.upload&&utils.featureSupport.dragAndDrop()&&utils.featureSupport.fileApi()){var uploadButton=new ButtonView({id:"upload",title:_t("Upload"),tooltip:_t("Upload files"),icon:"upload"});self.uploadView=new UploadView({triggerView:uploadButton,app:self}),items.push(uploadButton)}var buttons=[];_.each(self.options.buttons,function(buttonOptions){try{var button=new ButtonView(buttonOptions);if(buttons.push(button),button.form){buttonOptions.triggerView=button,buttonOptions.app=self;var view=new GenericPopover(buttonOptions);self.$el.append(view.el)}else button.on("button:click",self.buttonClickEvent,self)}catch(err){log.error("Error initializing button "+buttonOptions.title+" "+err)}}),self.buttons=new ButtonGroup({items:buttons,id:"mainbuttons",app:self}),items.push(self.buttons),items.push(new TextFilterView({id:"filter",app:this})),this.toolbar=new Toolbar({items:items})},moveItem:function(id,delta,subsetIds){var self=this;$.ajax({url:this.getAjaxUrl(this.options.moveUrl),type:"POST",data:{delta:delta,id:id,_authenticator:utils.getAuthenticator(),subsetIds:JSON.stringify(subsetIds)},dataType:"json",success:function(data){data.msg?self.setStatus(data.msg):"success"!==data.status&&self.setStatus({text:"error moving item",type:"error"}),self.collection.pager()},error:function(){self.setStatus({text:"error moving item",type:"error"})}})},setStatus:function(msg,type,btn){this.status.type=msg?"string"==typeof msg?(this.status.text=msg,this.status.label="",type||"warning"):(this.status.label=msg.label||"",this.status.text=msg.text,msg.type||"warning"):(this.status.text="",this.status.label="","none");var $status=this.$(".status");if(0<$status.length){$status[0].className="alert alert-"+this.status.type+" status";var $text=$("<span></span>");$text.text(this.status.text);var $label=$("<strong></strong>");$label.text(this.status.label),$status.empty().append($label).append($text),btn&&$status.append(btn)}},render:function(){return this.$el.append(this.toolbar.render().el),this.$el.append(this.wellView.render().el),this.$el.append(this.columnsView.render().el),this.rearrangeView&&this.$el.append(this.rearrangeView.render().el),this.uploadView&&this.$el.append(this.uploadView.render().el),this.$el.append(this.tableView.render().el),this.$el.append(this.pagingView.render().el),null!==this.options.backdropSelector?$(this.options.backdropSelector).addClass("ui-backdrop-element"):this.$el.addClass("ui-backdrop-element"),this},getCookieSetting:function(name,_default){var val;void 0===_default&&(_default=null);try{val=$.cookie(this.cookieSettingPrefix+name),val=$.parseJSON(val).value}catch(e){return _default}return null==val?_default:val},setCookieSetting:function(name,val){$.cookie(this.cookieSettingPrefix+name,JSON.stringify({value:val}))},setAllCookieSettings:function(){this.activeColumns=this.getCookieSetting(this.activeColumnsCookie,this.activeColumns);var perPage=this.getCookieSetting("perPage",15);"string"==typeof perPage&&(perPage=parseInt(perPage)),this.collection.howManyPer(perPage)}})}),define("mockup-patterns-structure",["jquery","underscore","pat-base","mockup-patterns-structure-url/js/views/app"],function($,_,Base,AppView){"use strict";return Base.extend({name:"structure",trigger:".pat-structure",parser:"mockup",defaults:{urlStructure:null,vocabularyUrl:null,indexOptionsUrl:null,contextInfoUrl:null,setDefaultPageUrl:null,menuOptions:null,menuGenerator:"mockup-patterns-structure-url/js/actionmenu",backdropSelector:".plone-modal",activeColumnsCookie:"activeColumns",attributes:null,_default_attributes:["CreationDate","EffectiveDate","ExpirationDate","exclude_from_nav","getIcon","getMimeIcon","getObjSize","getURL","id","is_folderish","last_comment_date","ModificationDate","path","portal_type","review_state","Subject","Title","total_comments","UID"],activeColumns:null,_default_activeColumns:["ModificationDate","EffectiveDate","review_state"],availableColumns:null,_default_availableColumns:{id:"ID",ModificationDate:"Last modified",EffectiveDate:"Published",ExpirationDate:"Expiration",CreationDate:"Created",review_state:"Review state",Subject:"Tags",portal_type:"Type",is_folderish:"Folder",exclude_from_nav:"Excluded from navigation",getObjSize:"Object Size",last_comment_date:"Last comment date",total_comments:"Total comments"},tableRowItemAction:null,_default_tableRowItemAction:{folder:["mockup-patterns-structure-url/js/navigation","folderClicked"],other:[]},typeToViewAction:null,_default_typeToViewAction:{File:"/view",Image:"/view",Blob:"/view"},collectionConstructor:"mockup-patterns-structure-url/js/collections/result",momentFormat:"L LT",rearrange:{properties:{id:"ID",sortable_title:"Title"},url:"/rearrange"},moveUrl:null,buttons:null,_default_buttons:[{tooltip:"Cut",title:"Cut",url:"/cut"},{tooltip:"Copy",title:"Copy",url:"/copy"},{tooltip:"Paste",title:"Paste",url:"/paste"},{tooltip:"Delete",title:"Delete",url:"/delete",context:"danger",icon:"trash"},{tooltip:"Workflow",title:"Workflow",url:"/workflow"},{tooltip:"Tags",title:"Tags",url:"/tags"},{tooltip:"Properties",title:"Properties",url:"/properties"},{tooltip:"Rename",title:"Rename",url:"/rename"}],datatables_options:{},upload:{uploadMultiple:!0,showTitle:!0}},init:function(){var self=this;_.each(["attributes","activeColumns","availableColumns","buttons","typeToViewAction"],function(idx){null===self.options[idx]&&(self.options[idx]=self.options["_default_"+idx])});_.each(["tableRowItemAction"],function(idx){var old=self.options[idx];self.options[idx]=$.extend(!1,self.options["_default_"+idx],old)}),self.browsing=!0,self.options.collectionUrl=self.options.vocabularyUrl,(self.options.pattern=self).options.queryHelperAttributes=self.options.attributes,delete self.options.attributes,self.view=new AppView(self.options),self.$el.append(self.view.render().$el)}})}),define("mockup-patterns-textareamimetypeselector",["jquery","pat-base","pat-registry","mockup-patterns-tinymce"],function($,Base,registry){"use strict";return Base.extend({name:"textareamimetypeselector",trigger:".pat-textareamimetypeselector",parser:"mockup",textarea:void 0,currentWidget:void 0,defaults:{textareaName:"",widgets:{"text/html":{pattern:"tinymce",patternOptions:{}}}},init:function(){var self=this,$el=self.$el;self.textarea=$('[name="'+self.options.textareaName+'"]'),$el.change(function(e){self.initTextarea(e.target.value)}),self.initTextarea($el.val())},initTextarea:function(mimetype){var pattern,patternConfig=this.options.widgets[mimetype];this.currentWidget&&this.currentWidget.destroy(),patternConfig&&(pattern=new registry.patterns[patternConfig.pattern](this.textarea,patternConfig.patternOptions||{}),this.currentWidget=pattern)}})}),function(root){define("bootstrap-collapse",["jquery"],function(){return function(){return function($){"use strict";var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],[data-toggle="collapse"][data-target="#'+element.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function getTargetFromTrigger($trigger){var href,target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&/show|hide/.test(option)&&(options.toggle=!1),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})}Collapse.VERSION="3.3.6",Collapse.TRANSITION_DURATION=350,Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var activesData,actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(actives&&actives.length&&(activesData=actives.data("bs.collapse"))&&activesData.transitioning)){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){actives&&actives.length&&(Plugin.call(actives,"hide"),activesData||actives.data("bs.collapse",null));var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])}}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()},Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen),$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};var old=$.fn.collapse;$.fn.collapse=Plugin,$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);$this.attr("data-target")||e.preventDefault();var $target=getTargetFromTrigger($this),option=$target.data("bs.collapse")?"toggle":$this.data();Plugin.call($target,option)})}(jQuery),window.jQuery.fn.collapse.Constructor}.apply(root,arguments)})}(this),define("mockup-bundles-plone",["jquery","pat-registry","pat-base","mockup-patterns-select2","mockup-patterns-pickadate","mockup-patterns-relateditems","mockup-patterns-querystring","mockup-patterns-tinymce","mockup-patterns-autotoc","mockup-patterns-datatables","mockup-patterns-formunloadalert","mockup-patterns-preventdoublesubmit","mockup-patterns-formautofocus","mockup-patterns-modal","mockup-patterns-structure","mockup-patterns-textareamimetypeselector","bootstrap-dropdown","bootstrap-collapse"],function($,registry,Base){"use strict";var Plone=Base.extend({name:"plone",init:function(){}});return window.parent===window&&$(document).ready(function(){$("body").addClass("pat-plone"),registry.initialized||registry.init()}),Plone}),require(["mockup-bundles-plone"]);
//# sourceMappingURL=++resource++plone.min.js.map